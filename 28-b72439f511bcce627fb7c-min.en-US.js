(window["wpJsonpExtractCss"]=window["wpJsonpExtractCss"]||[]).push([[28],{"./src/main/webapp/frontend/packages/enums/BlockType.js":function(e,t){var a={NAVIGATION:1,HTML:2,LOGO:3,MAP:4,IMAGE:5,TWITTER:6,JOURNAL:7,GALLERY:8,FORM:9,GEO:10,INDEX:11,COLLECTION_LINK:12,LINK:13,TAGCLOUD:14,COMMENTS:16,FOLDER:17,MENU:18,SOCIAL_LINKS:19,SUMMARY:20,SPACER:21,EMBED:22,CODE:23,FOURSQUARE:24,INSTAGRAM:25,CALENDAR:26,POSTS_BY_AUTHOR:27,POSTS_BY_TAG:28,POSTS_BY_CATEGORY:29,POSTS_BY_MONTH:30,QUOTE:31,VIDEO:32,SEARCH:33,AUDIO:41,FIVEHUNDREDPIX:42,PRODUCT:43,MARKDOWN:44,FLICKR:45,AMAZON:46,HORIZONTAL_RULE:47,SOCIAL_ACCOUNT_LINKS:48,RSS:49,OPENTABLE:50,NEWSLETTER:51,DONATION:52,BUTTON:53,SOCIAL_ACCOUNT_LINKS_V2:54,SUMMARY_V2:55,SOUNDCLOUD:56,EMAIL_FOOTER:57,IN_BROWSER_MESSAGE_LINK:58,TOURDATES:59,ALBUM:60,ARCHIVE:61,CHART:62,ZOLA:63,ACUITY:65,OPENTABLE_V2:66,MEMBER_AREA:67};e.exports=a},"./src/main/webapp/frontend/packages/enums/FormBackendConnectionState.js":function(e,t){var a={CONNECTED:1,DISCONNECTED:2,PENDING:3};e.exports=a},"./src/main/webapp/frontend/packages/enums/FormBackendConnectionType.js":function(e,t){var a={GOOGLE:1,MAILCHIMP:2,EMAIL:3,SITE_USER:4,ZAPIER:5,CAMPAIGNS:6};e.exports=a},"./src/main/webapp/universal/src/shared/actions/CampaignsConfigActions.js":function(e,t,a){"use strict";var n=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var r=n(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var i=n(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var s=n(a("./src/main/webapp/universal/src/shared/dispatchers/alt/index.ts"));var o=n(a("./src/main/webapp/universal/src/shared/utils/CampaignsConfigApi.js"));var l=n(a("./src/main/webapp/frontend/packages/enums/FormBackendConnectionState.js"));var u=function(){function e(){(0,r.default)(this,e);this.generateActions("loadFromCheckoutSettingsSuccess","loadFromSavedDataSuccess","changeSelectedListId","showValidationError","connectSuccess","connectFailure","saveSuccess","disconnect","reset")}(0,i.default)(e,[{key:"loadFromSavedData",value:function e(){var t=this;var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e){if(a.connectionState!==l.default.CONNECTED)return t.reset();e({savedData:a,listId:a.listId});return o.default.getLists().then(t.loadFromSavedDataSuccess).catch(t.connectFailure)}}},{key:"connect",value:function e(){var t=this;return function(e){e();return o.default.getLists().then(t.connectSuccess).catch(t.connectFailure)}}}]);return e}();var c=s.default.createActions(u);t.default=c;e.exports=t.default},"./src/main/webapp/universal/src/shared/actions/MailChimpConfigActions.js":function(e,t,a){"use strict";var n=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var s=n(a("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));var r=n(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var i=n(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var o=a("./src/main/webapp/universal/src/shared/dispatchers/alt/index.ts");var l=a("./src/main/webapp/universal/src/shared/utils/MailChimpConfigApi.js");var u=a("./src/main/webapp/universal/src/shared/utils/ExternalAuthentication.js");var c=a("./src/main/webapp/frontend/packages/enums/ExternalServiceProviders.js");var d=function(){function e(){(0,r.default)(this,e);this.generateActions("loadSuccess","loadFromSavedDataSuccess","connectFailure","updateFailure","disconnectMailChimp","closeDidFailAlert","saveSuccess","reset","changeListId","changeUseSingleOptIn","mailChimpValidationError","closeNoListsAlert","savePreviousSettings","restorePreviousSettings")}(0,i.default)(e,[{key:"loadFromSavedData",value:function e(){var a=this;var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e){if(!n.socialConfig||!n.socialConfig.externalAuthenticationId)return a.loadFromSavedDataSuccess({savedData:n});var t=n.socialConfig.externalAuthenticationId;l.getLists(t).then(function(e){a.loadFromSavedDataSuccess({savedData:n,lists:e})},a.connectFailure).catch(a.connectFailure);e()}}},{key:"connectSuccess",value:function e(t,a,n){return{accountDetail:t,lists:a,socialConfig:n}}},{key:"connectMailChimp",value:function e(t){var i=this;return function(e){var t={serviceProvider:c.MAILCHIMP,params:{authenticationType:"website",startSubscription:true}};u.authenticate(t).then(function(e){if(e.socialConfig){var t=e.socialConfig.externalAuthenticationId;return Promise.all([l.getAccountDetail(t),l.getLists(t),e.socialConfig])}},i.updateFailure).then(function(e){var t=(0,s.default)(e,3),a=t[0],n=t[1],r=t[2];i.connectSuccess(a.data,n,r)},i.connectFailure).catch(i.connectFailure);e()}}}]);return e}();e.exports=o.createActions(d)},"./src/main/webapp/universal/src/shared/components/CampaignsConfig.jsx":function(e,t,a){"use strict";var n=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=n(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var r=n(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var o=n(a("./common/temp/node_modules/@babel/runtime/helpers/assertThisInitialized.js"));var l=n(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var u=n(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var c=n(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var d=n(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var i=n(a("./common/temp/node_modules/prop-types/index.js"));var m=n(a("./common/temp/node_modules/react/index.js"));var p=n(a("./common/temp/node_modules/classnames/index.js"));var f=a("./common/temp/node_modules/@sqs/fields/lib/index.js");var h=n(a("./common/temp/node_modules/alt-utils/lib/connectToStores.js"));var v=n(a("./src/main/webapp/universal/src/shared/stores/CampaignsConfigStore.js"));var C=n(a("./src/main/webapp/universal/src/shared/actions/CampaignsConfigActions.js"));var b=a("./src/main/webapp/universal/src/shared/i18n/react.ts");var g=n(a("./src/main/webapp/universal/src/shared/components/CampaignsConfigDescription.jsx"));var y=n(a("./src/main/webapp/universal/src/shared/components/CampaignsConfig.less"));function j(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,n)}return a}function w(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?j(Object(a),true).forEach(function(e){(0,d.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):j(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function M(r){var i=O();return function e(){var t=(0,c.default)(r),a;if(i){var n=(0,c.default)(this).constructor;a=Reflect.construct(t,arguments,n)}else a=t.apply(this,arguments);return(0,u.default)(this,a)}}function O(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var S=document.location.hostname;var _="https://".concat(S,"/config/marketing/campaigns");var E=function(e){(0,l.default)(i,e);var n=M(i);function i(){var r;(0,s.default)(this,i);for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];r=n.call.apply(n,[this].concat(t));(0,d.default)((0,o.default)(r),"handleContainerClick",function(e){e.stopPropagation();var t=r.props,a=t.isConnected,n=t.lists;if(!a)return C.default.connect();0===n.length&&window.open(_)});(0,d.default)((0,o.default)(r),"handleDisconnectIconClick",function(){r.props.isConnected&&C.default.disconnect()});(0,d.default)((0,o.default)(r),"handleChange",function(e){C.default.changeSelectedListId(e)});(0,d.default)((0,o.default)(r),"renderMailingListOptions",function(){var e=r.props.lists;return e.map(function(e){var t=e.id,a=e.name;return m.default.createElement("option",{key:t,value:t},a)})});(0,d.default)((0,o.default)(r),"renderSelect",function(){var e=r.props,t=e.lists,a=e.selectedListId;var n=t.find(function(e){var t=e.id;return t===a})?a:"";return m.default.createElement("div",{className:y.default.labelAndSelect},m.default.createElement(f.Label,{className:y.default.label},m.default.createElement(b.T,{project:"src.shared"},"Mailing List")),m.default.createElement(f.Select,{wrapperClassName:y.default.select,value:n,onChange:r.handleChange,type:"light"},r.renderMailingListOptions()))});return r}(0,r.default)(i,[{key:"render",value:function e(){var t=this.props,a=t.isConnected,n=t.isConnecting,r=t.hasConnectionError,i=t.lists;var s=a&&i.length>0;var o=(0,p.default)(y.default.container,(0,d.default)({},y.default.connected,s));return m.default.createElement(m.default.Fragment,null,m.default.createElement("div",{className:o,onClick:this.handleContainerClick},m.default.createElement("div",{className:y.default.titleAndButton},m.default.createElement("div",{className:y.default.title},m.default.createElement(b.T,{project:"src.shared"},"Squarespace Email Campaigns")),m.default.createElement("div",{className:y.default.button,onClick:this.handleDisconnectIconClick},m.default.createElement("div",{className:y.default.icon}))),m.default.createElement("div",{className:y.default.descriptionContainer},m.default.createElement(g.default,{isConnected:a,isConnecting:n,hasConnectionError:r,lists:i}),s&&this.renderSelect())),a&&m.default.createElement("p",{className:(0,p.default)(y.default.description,y.default.postDescription)},m.default.createElement(b.T,{campaignsDashboard:m.default.createElement("a",{href:_,target:"_blank"},m.default.createElement(b.T,{project:"src.shared"},"Email Campaigns dashboard")),project:"src.shared"},"To manage this mailing list and customize the confirmation email, go to the {campaignsDashboard}.")))}}]);return i}(m.default.Component);(0,d.default)(E,"propTypes",{initialData:i.default.object,isConnecting:i.default.bool.isRequired,isConnected:i.default.bool.isRequired,isDirty:i.default.bool,lists:i.default.array.isRequired,selectedListId:i.default.string,wasRemoved:i.default.bool,hasConnectionError:i.default.bool});var T=(0,h.default)({getStores:function e(){return[v.default]},componentDidConnect:function e(t){C.default.loadFromSavedData.defer(t.initialData)},getPropsFromStores:function e(){var t=v.default.getState();return w({},t)}},E);t.default=T;e.exports=t.default},"./src/main/webapp/universal/src/shared/components/CampaignsConfig.less":function(e,t,a){e.exports={container:"CampaignsConfig-container-3kMxH",icon:"CampaignsConfig-icon-3Sk3L",titleAndButton:"CampaignsConfig-titleAndButton-3x92a",title:"CampaignsConfig-title-e4b3E",button:"CampaignsConfig-button-3-Rl7",descriptionContainer:"CampaignsConfig-descriptionContainer-1LRvX",connected:"CampaignsConfig-connected-1Szn1",labelAndSelect:"CampaignsConfig-labelAndSelect-rsiHJ",label:"CampaignsConfig-label-2fERg",select:"CampaignsConfig-select-2LeGN",description:"CampaignsConfig-description-c4_7f",innerDescription:"CampaignsConfig-innerDescription-22rGq",postDescription:"CampaignsConfig-postDescription-hKU_3"}},"./src/main/webapp/universal/src/shared/components/CampaignsConfigDescription.jsx":function(e,t,a){"use strict";var n=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var r=n(a("./common/temp/node_modules/prop-types/index.js"));var m=n(a("./common/temp/node_modules/react/index.js"));var p=n(a("./common/temp/node_modules/classnames/index.js"));var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts");var f=n(a("./src/main/webapp/universal/src/shared/components/CampaignsConfig.less"));var c={CONNECTING:(0,i.t)("Connecting..."),CONNECTION_ERROR:(0,i.t)("There was an issue retrieving your Squarespace Email Campaigns lists. Please try again later."),CONNECT:(0,i.t)("Click to connect"),NO_LISTS:(0,i.t)("Click here to create a mailing list. Then come back to this page to link it with this block.")};var h=function e(t){var a=t.isConnecting,n=void 0!==a&&a,r=t.hasConnectionError,i=void 0!==r&&r,s=t.isConnected,o=void 0!==s&&s,l=t.isMissingLists,u=void 0!==l&&l;if(n)return c.CONNECTING;if(i)return c.CONNECTION_ERROR;if(!o)return c.CONNECT;if(u)return c.NO_LISTS;return""};var s=function e(t){var a=t.isConnecting,n=void 0!==a&&a,r=t.hasConnectionError,i=void 0!==r&&r,s=t.isConnected,o=void 0!==s&&s,l=t.lists,u=void 0===l?[]:l;var c=o&&0===u.length;var d=h({isConnecting:n,hasConnectionError:i,isConnected:o,isMissingLists:c});return d&&m.default.createElement("div",{className:(0,p.default)(f.default.description,f.default.innerDescription)},m.default.createElement("span",null,d))};s.propTypes={isConnecting:r.default.bool,hasConnectionError:r.default.bool,isConnected:r.default.bool,lists:r.default.array};var o=s;t.default=o;e.exports=t.default},"./src/main/webapp/universal/src/shared/components/FeatureGate/Badge/index.js":function(e,t,a){"use strict";var n=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var r=n(a("./common/temp/node_modules/@sqs/core-components/lib/web/FeatureGateBadge.js"));var i=n(a("./src/main/webapp/universal/src/shared/components/FeatureGate/withLabelsAndAnalytics.js"));var s=(0,i.default)(r.default);t.default=s;e.exports=t.default},"./src/main/webapp/universal/src/shared/components/FeatureGate/ConfirmationModal/ConfirmationModal.js":function(e,t,a){"use strict";var n=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var l=n(a("./common/temp/node_modules/@babel/runtime/helpers/extends.js"));var u=n(a("./common/temp/node_modules/@babel/runtime/helpers/objectWithoutProperties.js"));var r=n(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var i=n(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var s=n(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var o=n(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var c=n(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var d=n(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var m=n(a("./common/temp/node_modules/prop-types/index.js"));var p=n(a("./common/temp/node_modules/react/index.js"));var f=n(a("./src/main/webapp/universal/src/shared/components/Modal/index.jsx"));var h=n(a("./src/main/webapp/universal/src/shared/components/Modal/Button.jsx"));var v=n(a("./common/temp/node_modules/@sqs/core-components/lib/web/FeatureGateBadge.js"));var C=a("./src/main/webapp/universal/src/shared/i18n/react.ts");var b=n(a("./src/main/webapp/universal/src/shared/components/FeatureGate/ConfirmationModal/ConfirmationModal.less"));function g(r){var i=y();return function e(){var t=(0,c.default)(r),a;if(i){var n=(0,c.default)(this).constructor;a=Reflect.construct(t,arguments,n)}else a=t.apply(this,arguments);return(0,o.default)(this,a)}}function y(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var j=function(e){(0,s.default)(a,e);var t=g(a);function a(){(0,r.default)(this,a);return t.apply(this,arguments)}(0,i.default)(a,[{key:"render",value:function e(){var t=this.props,a=t.positionToMouse,n=t.premiumFeatureLabel,r=t.confirmTitle,i=t.confirmDescription,s=(0,u.default)(t,["positionToMouse","premiumFeatureLabel","confirmTitle","confirmDescription"]);var o=this.props.anchor;o=o||(a?"mousepointer":"window");return p.default.createElement(f.default,(0,l.default)({},s,{anchor:o,theme:"damask"}),p.default.createElement(f.default.Body,{className:b.default.confirmModal},p.default.createElement(v.default,{premiumFeatureLabel:n}),r&&p.default.createElement("p",{className:b.default.confirmTitle},r),p.default.createElement("p",{className:b.default.confirmDescription},i),p.default.createElement(h.default,{onClick:this.props.onRequestClose},p.default.createElement(C.T,{project:"src.shared"},"Okay"))))}}]);return a}(p.default.Component);(0,d.default)(j,"propTypes",{anchor:m.default.oneOf(["window","mousepointer"]),confirmDescription:m.default.node.isRequired,confirmTitle:m.default.string.isRequired,isOpen:m.default.bool.isRequired,onRequestClose:m.default.func.isRequired,positionToMouse:m.default.bool,premiumFeatureLabel:m.default.string.isRequired});(0,d.default)(j,"defaultProps",{anchor:"window",onDismiss:function e(){},onUpgrade:function e(){},positionToMouse:true,theme:"damask"});var w=j;t.default=w;e.exports=t.default},"./src/main/webapp/universal/src/shared/components/FeatureGate/ConfirmationModal/ConfirmationModal.less":function(e,t,a){e.exports={confirmModal:"ConfirmationModal-confirmModal-7B-az",confirmTitle:"ConfirmationModal-confirmTitle-3P1we"}},"./src/main/webapp/universal/src/shared/components/FeatureGate/ConfirmationModal/index.jsx":function(e,t,a){"use strict";var n=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var r=n(a("./src/main/webapp/universal/src/shared/components/FeatureGate/ConfirmationModal/ConfirmationModal.js"));var i=n(a("./src/main/webapp/universal/src/shared/components/FeatureGate/ConfirmationModal/withLabels.js"));var s=(0,i.default)(r.default);t.default=s;e.exports=t.default},"./src/main/webapp/universal/src/shared/components/FeatureGate/ConfirmationModal/withLabels.js":function(e,t,a){"use strict";var n=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=n(a("./common/temp/node_modules/@babel/runtime/helpers/extends.js"));var o=n(a("./common/temp/node_modules/@babel/runtime/helpers/objectWithoutProperties.js"));var l=n(a("./common/temp/node_modules/react/index.js"));var u=n(a("./src/main/webapp/universal/src/apps/App/shared/constants/FeatureGateDefaultCopy.js"));var r=function e(i){return function(e){var t=e.isTrial,a=e.confirmDescription,n=e.confirmTitle,r=(0,o.default)(e,["isTrial","confirmDescription","confirmTitle"]);a=a||(t?u.default.trialConfirmDescription:u.default.confirmDescription);n=n||(t?u.default.trialConfirmTitle:u.default.confirmTitle);return l.default.createElement(i,(0,s.default)({premiumFeatureLabel:u.default.premiumFeatureLabel,confirmDescription:a,confirmTitle:n},r))}};t.default=r;e.exports=t.default},"./src/main/webapp/universal/src/shared/components/FeatureGate/Logo/index.js":function(e,t,a){"use strict";var n=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var r=n(a("./common/temp/node_modules/@sqs/core-components/lib/web/FeatureGateLogo.js"));var i=n(a("./src/main/webapp/universal/src/shared/components/FeatureGate/withLabelsAndAnalytics.js"));var s=(0,i.default)(r.default);t.default=s;e.exports=t.default},"./src/main/webapp/universal/src/shared/components/FeatureGate/Menu/index.js":function(e,t,a){"use strict";var n=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var r=n(a("./common/temp/node_modules/@sqs/core-components/lib/web/FeatureGateMenu.js"));var i=n(a("./src/main/webapp/universal/src/shared/components/FeatureGate/withLabelsAndAnalytics.js"));var s=(0,i.default)(r.default);t.default=s;e.exports=t.default},"./src/main/webapp/universal/src/shared/components/FeatureGate/Message/FeatureGateMessage.js":function(e,t,a){"use strict";var n=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var r=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i=r(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var s=r(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var o=r(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var l=r(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var u=r(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var c=r(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var d=n(a("./common/temp/node_modules/react/index.js"));var m=r(a("./src/main/webapp/universal/src/shared/components/FeatureGate/Message/FeatureGateMessage.less"));var p=r(a("./common/temp/node_modules/prop-types/index.js"));var f=r(a("./common/temp/node_modules/classnames/index.js"));var h=a("./common/temp/node_modules/@sqs/fields/lib/index.js");var v=a("./src/main/webapp/universal/src/shared/i18n/index.ts");function C(r){var i=b();return function e(){var t=(0,u.default)(r),a;if(i){var n=(0,u.default)(this).constructor;a=Reflect.construct(t,arguments,n)}else a=t.apply(this,arguments);return(0,l.default)(this,a)}}function b(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var g=function(e){(0,o.default)(a,e);var t=C(a);function a(){(0,i.default)(this,a);return t.apply(this,arguments)}(0,s.default)(a,[{key:"render",value:function e(){var t=this.props,a=t.title,n=t.subTitle,r=t.className,i=t.onRequestUpgrade,s=t.upgradeLabel;return d.default.createElement("div",{className:(0,f.default)(m.default.message,r)},d.default.createElement("div",{className:m.default.title},a),d.default.createElement("div",{className:m.default.subTitle},n),d.default.createElement(h.BaseButton,{onClick:i,className:m.default.upgradeButton},s))}}]);return a}(d.Component);(0,c.default)(g,"propTypes",{title:p.default.string.isRequired,subTitle:p.default.string.isRequired,upgradeLabel:p.default.string.isRequired,onRequestUpgrade:p.default.func});(0,c.default)(g,"defaultProps",{upgradeLabel:(0,v.t)("Upgrade Now")});var y=g;t.default=y;e.exports=t.default},"./src/main/webapp/universal/src/shared/components/FeatureGate/Message/FeatureGateMessage.less":function(e,t,a){e.exports={message:"FeatureGateMessage-message-1HPp9",title:"FeatureGateMessage-title-35KWW",subTitle:"FeatureGateMessage-subTitle-3dVRT",upgradeButton:"FeatureGateMessage-upgradeButton-YWyNS"}},"./src/main/webapp/universal/src/shared/components/FeatureGate/Message/index.js":function(e,t,a){"use strict";var n=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var r=n(a("./src/main/webapp/universal/src/shared/components/FeatureGate/Message/FeatureGateMessage.js"));var i=n(a("./src/main/webapp/universal/src/shared/components/FeatureGate/withLabelsAndAnalytics.js"));var s=(0,i.default)(r.default);t.default=s;e.exports=t.default},"./src/main/webapp/universal/src/shared/components/FeatureGate/UpgradeModalStandalone/UpgradeModalStandalone.jsx":function(e,t,a){"use strict";var n=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var r=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i=r(a("./common/temp/node_modules/@babel/runtime/helpers/extends.js"));var o=r(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var s=r(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var l=r(a("./common/temp/node_modules/@babel/runtime/helpers/assertThisInitialized.js"));var u=r(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var c=r(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var d=r(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var m=r(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var p=r(a("./common/temp/node_modules/prop-types/index.js"));var f=n(a("./common/temp/node_modules/react/index.js"));var h=a("./src/main/webapp/universal/src/shared/components/FeatureGate/UpgradeModal/index.jsx");var v=r(a("./src/main/webapp/universal/src/apps/App/shared/constants/UpsellDestination.js"));var C=r(a("./src/main/webapp/universal/src/apps/App/shared/constants/UpsellUrls.js"));var b=r(a("./src/main/webapp/universal/src/shared/utils/analytics/trackInternal.ts"));var g=r(a("./src/main/webapp/universal/src/shared/router/withRouter.tsx"));var y=r(a("./src/main/webapp/universal/src/shared/router/propType.ts"));function j(r){var i=w();return function e(){var t=(0,d.default)(r),a;if(i){var n=(0,d.default)(this).constructor;a=Reflect.construct(t,arguments,n)}else a=t.apply(this,arguments);return(0,c.default)(this,a)}}function w(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var M=function(e){(0,u.default)(a,e);var t=j(a);function a(e){var s;(0,o.default)(this,a);s=t.call(this,e);(0,m.default)((0,l.default)(s),"handleUpgradeModalUpgradeClick",function(e){var t=s.props,a=t.isTrial,n=t.router,r=t.eventTracker;r();e.stopPropagation();s.handleUpgradeModalDismiss(e);s.handleTrackingEvents("upgrade_click");var i=a?C.default[v.default.TRIAL_UPGRADE_PLAN]:C.default[v.default.UPGRADE_PLAN];n?n.push({pathname:i}):window.location.assign("/config".concat(i))});(0,m.default)((0,l.default)(s),"handleUpgradeModalDismiss",function(e){e.stopPropagation();s.setState({isUpgradeModalOpen:false})});(0,m.default)((0,l.default)(s),"handleTrackingEvents",function(e){var t=s.props,a=t.analyticsId,n=t.isTrial;(0,b.default)("feature_gate",{action:e,identifier:a,isTrial:n})});s.state=a.defaultState;s.handleTrackingEvents("display");return s}(0,s.default)(a,[{key:"render",value:function e(){var t=this.state.isUpgradeModalOpen;var a=this.props.isTrial;if(t)return f.default.createElement(h.UpgradeModalWithLabels,(0,i.default)({isOpen:t,key:"upgrade-modal",isTrial:a,onRequestClose:this.handleUpgradeModalDismiss,onRequestUpgrade:this.handleUpgradeModalUpgradeClick},this.props));return null}}]);return a}(f.Component);(0,m.default)(M,"propTypes",{analyticsId:p.default.string.isRequired,isTrial:p.default.bool.isRequired,router:y.default.isRequired,anchor:p.default.oneOf(["window","mousepointer"]),eventTracker:p.default.func});(0,m.default)(M,"defaultProps",{anchor:"mousepointer"});(0,m.default)(M,"defaultState",{isUpgradeModalOpen:true});var O=(0,g.default)(M);t.default=O;e.exports=t.default},"./src/main/webapp/universal/src/shared/components/FeatureGate/UpgradeModalStandalone/index.jsx":function(e,t,a){"use strict";var n=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});Object.defineProperty(t,"default",{enumerable:true,get:function e(){return r.default}});var r=n(a("./src/main/webapp/universal/src/shared/components/FeatureGate/UpgradeModalStandalone/UpgradeModalStandalone.jsx"));e.exports=t.default},"./src/main/webapp/universal/src/shared/components/MailChimpConfig.jsx":function(e,t,a){"use strict";var n=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var i=n(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var s=n(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var l=n(a("./common/temp/node_modules/@babel/runtime/helpers/assertThisInitialized.js"));var o=n(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var u=n(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var c=n(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var d=n(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));function m(r){var i=p();return function e(){var t=(0,c.default)(r),a;if(i){var n=(0,c.default)(this).constructor;a=Reflect.construct(t,arguments,n)}else a=t.apply(this,arguments);return(0,u.default)(this,a)}}function p(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var r=a("./common/temp/node_modules/prop-types/index.js");var f=a("./common/temp/node_modules/react/index.js");var h=a("./common/temp/node_modules/@sqs/fields/lib/index.js"),v=h.Check,C=h.Select;var b=a("./src/main/webapp/universal/src/shared/actions/MailChimpConfigActions.js");var g=a("./src/main/webapp/universal/src/shared/components/Alert.jsx");var y=a("./common/temp/node_modules/classnames/index.js");var j=a("./common/temp/node_modules/alt-utils/lib/connectToStores.js");var w=a("./src/main/webapp/universal/src/apps/App/shared/stores/BillingStatusStore.js");var M=a("./src/main/webapp/frontend/packages/enums/StatusConstants.js");var O=a("./src/main/webapp/universal/src/apps/App/shared/stores/FeaturesStore.js");var S=a("./src/main/webapp/frontend/packages/enums/Features.js");var _=a("./src/main/webapp/universal/src/shared/i18n/index.ts"),E=_.t;var T=a("./src/main/webapp/universal/src/shared/i18n/react.ts"),D=T.T;var k=a("./src/main/webapp/universal/src/shared/utils/BlockFeatureGatingUtils.js");var A=a("./src/main/webapp/universal/src/shared/components/FeatureGate/ConfirmationModal/index.jsx");var R=a("./src/main/webapp/universal/src/shared/components/MailChimpConfig.less");var I=function(e){(0,o.default)(r,e);var n=m(r);function r(){var o;(0,i.default)(this,r);for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];o=n.call.apply(n,[this].concat(t));(0,d.default)((0,l.default)(o),"state",{showMailchimpWarning:false});(0,d.default)((0,l.default)(o),"handleContainerClick",function(){var e=o.props,t=e.isMailChimpConnected,a=e.shouldShowMailchimpWarning,n=e.showConnectionFailedAlert;if(!t)if(a){k.trackInternal("upsell_confirmation_mailchimp_show");o.setState({showMailchimpWarning:true})}else n||b.connectMailChimp()});(0,d.default)((0,l.default)(o),"getDescription",function(){var e=o.props,t=e.isMailChimpConnected,a=e.isConnecting,n=e.mailChimpError,r=e.mailChimpUsername;if(n)return E("Error connecting to MailChimp");if(t)return E("As {username}",{username:r});if(a)return E("Connecting…");return E("Click to connect")});(0,d.default)((0,l.default)(o),"handleIconClick",function(){var e=o.props.isMailChimpConnected;e&&b.disconnectMailChimp()});(0,d.default)((0,l.default)(o),"handleCloseMailchimpWarning",function(){o.setState({showMailchimpWarning:false});b.connectMailChimp()});(0,d.default)((0,l.default)(o),"renderMailingListOptions",function(){var e=o.props.mailChimpLists;return e.map(function(e){var t=e.title,a=e.value;return f.createElement("option",{key:a,value:a},t)})});(0,d.default)((0,l.default)(o),"renderOAuthFailedAlert",function(){var e=o.props.showConnectionFailedAlert;return f.createElement(g,{key:"oauth-failed-alert",isOpen:e,onDismiss:b.closeDidFailAlert,title:E("External Authentication Error"),dismissText:E("Okay"),anchor:"window"},f.createElement(D,{project:"src.shared"},"Unable to connect to external service."))});(0,d.default)((0,l.default)(o),"renderNoListsAlert",function(){var e=o.props.showNoMailChimpListsAlert;return f.createElement(g,{key:"no-lists-alert",isOpen:e,onDismiss:b.closeNoListsAlert,title:E("No MailChimp Lists Created"),dismissText:E("Okay"),anchor:"window"},f.createElement(D,{project:"src.shared"},"Connecting to MailChimp requires an existing MailChimp mailing list. Please create one to continue."))});(0,d.default)((0,l.default)(o),"renderIcon",function(){return f.createElement("div",{className:R.button,onClick:o.handleIconClick},f.createElement("div",{"data-test":"mailchimp-config-icon",className:R.icon}))});(0,d.default)((0,l.default)(o),"renderSelect",function(){var e=o.props,t=e.mailChimpListId,a=e.showMailingListRequiredError;var n=[f.createElement("option",{key:"placeholder-option",value:""},"Select Lists")];var r=o.renderMailingListOptions();var i=a?E("Select a list"):null;var s=r.some(function(e){return e.props.value===t})?t:"";return f.createElement(C,{wrapperClassName:R.select,value:s,onChange:function e(t){b.changeListId(t)},type:"light",errorMessage:i},n.concat(r))});(0,d.default)((0,l.default)(o),"renderDoubleOptInConfig",function(){var e=o.props.mailChimpUseSingleOptIn;var t=!e;var a=y(R.check,(0,d.default)({},R.active,t));return f.createElement("div",{className:R.sectionContainer},f.createElement(v,{className:a,wrapperClassName:R.checkWrapper,title:E("Require double opt-in after subscribing"),value:t,onChange:function e(t){b.changeUseSingleOptIn(!t)}}))});(0,d.default)((0,l.default)(o),"renderMailchimpWarning",function(){var e=o.state.showMailchimpWarning;return f.createElement(A,{key:"mailchimp-warning",isOpen:e,isTrial:w.isTrial(),onRequestClose:o.handleCloseMailchimpWarning})});return o}(0,s.default)(r,[{key:"render",value:function e(){var t;var a=this.props.isMailChimpConnected;var n=y(R.container,(t={},(0,d.default)(t,R.connected,a),(0,d.default)(t,R.disconnected,!a),t));var r=a?"mailchimp-config-connected":void 0;return[f.createElement("div",{key:"container",className:n,onClick:this.handleContainerClick,"data-test":r},f.createElement("div",{className:R.sectionContainer},f.createElement("div",{className:R.descriptionContainer},f.createElement("div",{className:R.title},"MailChimp"),f.createElement("div",{className:R.description},this.getDescription())),a&&this.renderSelect(),this.renderIcon()),a&&this.renderDoubleOptInConfig()),this.renderNoListsAlert(),this.renderOAuthFailedAlert(),this.renderMailchimpWarning()]}}]);return r}(f.Component);(0,d.default)(I,"propTypes",{isConnecting:r.bool.isRequired,isMailChimpConnected:r.bool.isRequired,mailChimpError:r.bool.isRequired,mailChimpListId:r.string,mailChimpLists:r.arrayOf(r.object),mailChimpUsername:r.string,mailChimpUseSingleOptIn:r.bool,showConnectionFailedAlert:r.bool.isRequired,showMailingListRequiredError:r.bool.isRequired,showNoMailChimpListsAlert:r.bool.isRequired,shouldShowMailchimpWarning:r.bool.isRequired});e.exports=j({getStores:function e(){return[w,O]},getPropsFromStores:function e(){var t=w.getState(),a=t.siteStatus;var n=!O.isFeatureInAllPlans(S.MAILCHIMP_INTEGRATION)&&a===M.TRIAL;return{shouldShowMailchimpWarning:n}}},I)},"./src/main/webapp/universal/src/shared/components/MailChimpConfig.less":function(e,t,a){e.exports={container:"MailChimpConfig-container-3D9hd",disconnected:"MailChimpConfig-disconnected-CcrOo",icon:"MailChimpConfig-icon-3XdJO",descriptionContainer:"MailChimpConfig-descriptionContainer-27lSQ",sectionContainer:"MailChimpConfig-sectionContainer-1_A9Q",connected:"MailChimpConfig-connected-1exwf",button:"MailChimpConfig-button-1PBfu",select:"MailChimpConfig-select-HTrDG",check:"MailChimpConfig-check-2Ybki icons-checkDarkSmallAfter-2fuHw",active:"MailChimpConfig-active-3BGcc",checkWrapper:"MailChimpConfig-checkWrapper-2_YoR",title:"MailChimpConfig-title-16z0o",description:"MailChimpConfig-description-2oGO3"}},"./src/main/webapp/universal/src/shared/constants/BlockTypeToFeature.js":function(e,t,a){"use strict";var n=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var r=n(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var i=n(a("./src/main/webapp/frontend/packages/enums/Features.js"));var s=n(a("./src/main/webapp/frontend/packages/enums/BlockType.js"));var o;var l=(o={},(0,r.default)(o,s.default.AMAZON,i.default.BLOCK_AMAZON),(0,r.default)(o,s.default.DONATION,i.default.BLOCK_DONATION),(0,r.default)(o,s.default.MENU,i.default.BLOCK_MENU),(0,r.default)(o,s.default.OPENTABLE,i.default.BLOCK_OPENTABLE),(0,r.default)(o,s.default.OPENTABLE_V2,i.default.BLOCK_OPENTABLE),o);t.default=l;e.exports=t.default},"./src/main/webapp/universal/src/shared/stores/CampaignsConfigStore.js":function(e,t,a){"use strict";var n=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=n(a("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));var r=n(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var i=n(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var o=n(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var l=n(a("./src/main/webapp/universal/src/shared/dispatchers/alt/index.ts"));var u=n(a("./src/main/webapp/frontend/packages/enums/FormBackendConnectionState.js"));var c=n(a("./src/main/webapp/frontend/packages/enums/FormBackendConnectionType.js"));var d=n(a("./src/main/webapp/universal/src/shared/actions/CampaignsConfigActions.js"));function m(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,n)}return a}function p(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?m(Object(a),true).forEach(function(e){(0,o.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var f={initialData:{connectionState:u.default.DISCONNECTED,listId:null},isConnecting:false,isConnected:false,isDirty:false,lists:[],selectedListId:null,wasRemoved:false,hasConnectionError:false};var h=function(){function t(){var e=this;(0,r.default)(this,t);(0,o.default)(this,"isReady",function(){return e.state.hasConnectionError||e.state.isConnected});(0,o.default)(this,"isConnected",function(){return e.state.isConnected&&e.state.selectedListId});(0,o.default)(this,"getConnectionData",function(){return e.isConnected()?{backendType:c.default.CAMPAIGNS,connectionState:u.default.CONNECTED,listId:e.state.selectedListId}:{backendType:c.default.CAMPAIGNS,connectionState:u.default.DISCONNECTED,listId:null}});this.state=p({},f);this.bindActions(d.default);this.exportPublicMethods({getConnectionData:this.getConnectionData,isConnected:this.isConnected,isReady:this.isReady})}(0,i.default)(t,[{key:"onLoadFromSavedData",value:function e(t){var a=t.savedData,n=t.listId;this.setState({initialData:a,selectedListId:n})}},{key:"onLoadFromSavedDataSuccess",value:function e(t){var a=t.results;var n=null!==this.state.initialData.listId;this.setState({isConnected:true,isDirty:!n,lists:a})}},{key:"onLoadFromCheckoutSettingsSuccess",value:function e(t){var a=t.storeMailingListSettings;var n=a.isCampaignsConnected,r=a.campaignsListId,i=a.campaignsMailingLists;this.setState({isConnected:n,isDirty:false,selectedListId:r,lists:i,initialData:{connectionState:n?u.default.CONNECTED:u.default.DISCONNECTED,listId:r}})}},{key:"onChangeSelectedListId",value:function e(t){t&&this.setState({isDirty:true,selectedListId:t})}},{key:"onConnect",value:function e(){this.setState({isConnecting:true,hasConnectionError:false})}},{key:"onConnectSuccess",value:function e(t){var a=t.results;var n={isConnecting:false,isConnected:true,lists:a,wasRemoved:false};if(!this.state.selectedListId){var r=(0,s.default)(a,1),i=r[0].id;n.selectedListId=i;n.isDirty=true}this.setState(n)}},{key:"onConnectFailure",value:function e(){this.setState({isConnecting:false,hasConnectionError:true})}},{key:"onDisconnect",value:function e(){this.setState(p({},f,{initialData:this.state.initialData,isDirty:true,wasRemoved:true}))}},{key:"onSaveSuccess",value:function e(){this.setState({isDirty:false,initialData:this.getConnectionData()})}},{key:"onReset",value:function e(){this.setState(p({},f))}}]);return t}();var v=l.default.createStore(h,"CampaignsConfigStore");t.default=v;e.exports=t.default},"./src/main/webapp/universal/src/shared/stores/MailChimpConfigStore.js":function(e,t,a){"use strict";var n=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var r=n(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var i=n(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var s=a("./src/main/webapp/universal/src/shared/dispatchers/alt/index.ts");var o=a("./common/temp/node_modules/immutable/dist/immutable.js");var l=a("./src/main/webapp/universal/src/shared/actions/MailChimpConfigActions.js");var u=a("./src/main/webapp/universal/src/shared/utils/MailChimpConfigRecord.js");var c=a("./src/main/webapp/frontend/packages/enums/FormBackendConnectionState.js");var d=function(){function t(){(0,r.default)(this,t);var e=new u;this.state={initialMailChimpConfig:e,mailChimpConfig:e,isDirty:false,showConnectionFailedAlert:false,isConnecting:false,showMailingListRequiredError:false,showNoMailChimpListsAlert:false,previousMailChimpConfig:null,wasRemoved:false};this.bindActions(l)}(0,i.default)(t,[{key:"onSavePreviousSettings",value:function e(){var t=this.state.mailChimpConfig;this.setState({previousMailChimpConfig:t,mailChimpConfig:new u})}},{key:"onRestorePreviousSettings",value:function e(){var t=this.state.previousMailChimpConfig;t&&this.setState({mailChimpConfig:t,previousMailChimpConfig:null})}},{key:"onMailChimpValidationError",value:function e(){this.setState({showMailingListRequiredError:true})}},{key:"onConnectMailChimp",value:function e(){this.setState({wasRemoved:false,isConnecting:true})}},{key:"onLoadSuccess",value:function e(t){var a=t.storeMailingListSettings;var n=u.buildFromJson(a);var r=n.isMailChimpConnected;var i=n.mailChimpConnectionInfo.mailChimpLists;var s=r&&(!i||0===i.length);this.setState({isDirty:false,initialMailChimpConfig:n,mailChimpConfig:n,showNoMailChimpListsAlert:s})}},{key:"onLoadFromSavedDataSuccess",value:function e(t){var a=t.savedData,n=t.lists,r=void 0===n?[]:n;var i=!!(a.connectionState===c.CONNECTED&&0===r.length);var s=u.buildFromJson({isMailChimpConnected:a.connectionState===c.CONNECTED,mailChimpListId:a.list,mailChimpUsername:a.username,mailChimpUseSingleOptIn:a.useSingleOptIn,mailChimpConnectionInfo:{mailChimpLists:r},mailChimpOAuthConfig:a.socialConfig});this.setState({isDirty:false,isConnecting:false,mailChimpConfig:s,initialMailChimpConfig:s,showNoMailChimpListsAlert:i})}},{key:"onConnectFailure",value:function e(){var t=this.state.mailChimpConfig;var a=t.mailChimpConnectionInfo;var n=a.merge({mailChimpError:true});var r=t.merge({mailChimpConnectionInfo:n});this.setState({initialMailChimpConfig:r,mailChimpConfig:r})}},{key:"onChangeListId",value:function e(t){var a=this.state,n=a.initialMailChimpConfig,r=a.mailChimpConfig;var i=r.merge({mailChimpListId:t});this.setState({isDirty:!o.is(i,n),mailChimpConfig:i,showMailingListRequiredError:false})}},{key:"onChangeUseSingleOptIn",value:function e(t){var a=this.state,n=a.initialMailChimpConfig,r=a.mailChimpConfig;var i=r.merge({mailChimpUseSingleOptIn:t});this.setState({isDirty:!o.is(i,n),mailChimpConfig:i})}},{key:"onConnectSuccess",value:function e(t){var a=this.state.mailChimpConfig.mailChimpListId;t.accountDetail.list&&(a=t.accountDetail.list);var n=t.lists;var r=0===n.length;var i=u.buildFromJson({isMailChimpConnected:true,mailChimpListId:a,mailChimpUsername:t.accountDetail.username,mailChimpUseSingleOptIn:true,mailChimpConnectionInfo:{mailChimpLists:n},mailChimpOAuthConfig:t.socialConfig});this.setState({isDirty:!(t.accountDetail&&t.accountDetail.connected),isConnecting:false,mailChimpConfig:i,showNoMailChimpListsAlert:r})}},{key:"onDisconnectMailChimp",value:function e(){var t=this.state.mailChimpConfig.mailChimpListId;var a=u.buildFromJson({mailChimpListId:t});this.setState({wasRemoved:true,isDirty:true,mailChimpConfig:a})}},{key:"onSaveSuccess",value:function e(){this.setState({isDirty:false,showMailingListRequiredError:false,initialMailChimpConfig:this.state.mailChimpConfig})}},{key:"onUpdateFailure",value:function e(){this.setState({showConnectionFailedAlert:true,isConnecting:false})}},{key:"onCloseDidFailAlert",value:function e(){this.setState({showConnectionFailedAlert:false})}},{key:"onCloseNoListsAlert",value:function e(){this.setState({showNoMailChimpListsAlert:false})}},{key:"onReset",value:function e(){var t=this.state.initialMailChimpConfig;this.setState({isDirty:false,showMailingListRequiredError:false,mailChimpConfig:t})}}]);return t}();e.exports=s.createStore(d,"MailChimpConfigStore")},"./src/main/webapp/universal/src/shared/utils/BlockFeatureGatingUtils.js":function(e,t,a){"use strict";var n=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.isBlockTypeFeatureGated=S;t.getFeatureGatedBlockTypes=_;t.featureGateBlockItems=E;t.trackInternal=T;t.willAddFeatureGate=D;t.renderLogo=A;t.renderMenu=R;t.renderBadgeWithProps=I;t.renderBadge=L;t.renderBlockWrapper=N;t.renderPanelNode=P;t.renderPanel=F;t.renderMessage=x;t.renderUpgradeModal=G;t.showUpsellConfirmation=U;t.transformUpsellCopy=q;var r=n(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var o=n(a("./common/temp/node_modules/react/index.js"));var u=n(a("./common/temp/node_modules/react-dom/index.js"));var i=n(a("./common/temp/node_modules/lodash/invert.js"));var s=n(a("./common/temp/node_modules/lodash/isUndefined.js"));var l=n(a("./src/main/webapp/frontend/packages/enums/BlockType.js"));var c=n(a("./src/main/webapp/universal/src/apps/App/shared/constants/UpsellDestination.js"));var d=n(a("./src/main/webapp/universal/src/apps/App/shared/stores/FeaturesStore.js"));var m=n(a("./src/main/webapp/universal/src/apps/App/shared/stores/BillingStatusStore.js"));var p=n(a("./src/main/webapp/universal/src/shared/constants/BlockTypeToFeature.js"));var f=n(a("./src/main/webapp/universal/src/shared/utils/analytics/trackInternal.ts"));var h=a("./src/main/webapp/universal/src/shared/i18n/index.ts");var v=n(a("./src/main/webapp/universal/src/shared/components/FeatureGate/Logo/index.js"));var C=n(a("./src/main/webapp/universal/src/shared/components/FeatureGate/Menu/index.js"));var b=n(a("./src/main/webapp/universal/src/shared/components/FeatureGate/Panel/index.js"));var g=n(a("./src/main/webapp/universal/src/shared/components/FeatureGate/Badge/index.js"));var y=n(a("./src/main/webapp/universal/src/shared/components/FeatureGate/Message/index.js"));var j=n(a("./src/main/webapp/universal/src/shared/components/FeatureGate/UpgradeModalStandalone/index.jsx"));function w(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,n)}return a}function M(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?w(Object(a),true).forEach(function(e){(0,r.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var O=(0,i.default)(l.default);function S(e){var t=p.default[e];if((0,s.default)(t))return false;return d.default.isFeatureGated(t)}function _(){return Object.keys(p.default).filter(function(e){return S(e)}).map(function(e){return parseInt(e,10)})}function E(e){var t=_();var a=[];e.forEach(function(e){e.items=e.items.filter(function(e){if(t.includes(e)){a.push(e);return false}return true})});a.length>0&&e.push({label:(0,h.t)("Premium"),items:a,premium:true,meta:{isTrial:m.default.isTrial()}});return e}function T(e,t){(0,f.default)(e,M({},t,{isTrial:m.default.isTrial()}))}function D(e){var t=e.blockType,a=e.featureGateClass,n=void 0===a?"":a,r=e.node;if(t&&!S(t))return false;if(n&&r.querySelector("".concat(n)))return false;return true}function k(e){var t=e.blockType,a=e.component,n=e.featureGateClass,r=void 0===n?"":n,i=e.node;var s=i.ownerDocument.createElement("div");if(r){var o=r.split(" ");for(var l=0;l<o.length;++l)s.classList.add(o[l].replace(".",""))}i.insertBefore(s,i.firstChild);u.default.render(a,s)}function A(e){var t=e.analyticsId,a=e.blockType,n=e.node,r=e.featureGateClass,i=e.upsellCopyOverrides;k({blockType:a,node:n,featureGateClass:r||".sqs-widget .sqs-featuregate",component:o.default.createElement(v.default,M({analyticsId:t||"".concat(O[a].toLowerCase(),"-block"),isTrial:m.default.isTrial()},i))})}function R(e){var t=e.analyticsId,a=e.blockType,n=e.escapePadding,r=e.node,i=e.isEditing;var s=".sqs-featuregate-menu";if(!D({blockType:a,featureGateClass:s,node:r}))return false;k({blockType:a,node:r,featureGateClass:s,component:o.default.createElement(C.default,{analyticsId:t||"".concat(O[a].toLowerCase(),"-block"),isTrial:m.default.isTrial(),escapePadding:n,isEditing:i})});return true}function I(e){var t=e.node,a=e.upsellCopyOverrides,n=void 0===a?{}:a,r=e.componentProps,i=void 0===r?{}:r;k({node:t,featureGateClass:".sqs-featuregate-badge",component:o.default.createElement(g.default,M({isTrial:m.default.isTrial()},n,{},i))})}function L(e){var t=e.analyticsId,a=e.blockType,n=e.knockout,r=e.node,i=e.upsellCopyOverrides;k({blockType:a,node:r,featureGateClass:".sqs-featuregate-badge",component:o.default.createElement(g.default,M({analyticsId:t,isTrial:m.default.isTrial(),knockout:n},i))})}function N(e){var t=e.blockType,a=e.node;if(S(t)){a.classList.add("sqs-feature-gated-wrapper");var n=".sqs-feature-gated-logo-container";A({blockType:t,node:a,featureGateClass:n})}}function P(e){var t=e.blockType,a=e.node,n=e.analyticsId,r=e.upsellCopyOverrides;k({blockType:t,node:a,featureGateClass:".sqs-featuregate-panel",component:o.default.createElement(b.default,M({isTrial:m.default.isTrial(),analyticsId:n},r))})}function F(e){var t=e.featureType,a=e.analyticsId;if(!d.default.isFeatureGated(t))return null;return o.default.createElement(b.default,{isTrial:m.default.isTrial(),analyticsId:a})}function x(e){var t=e.blockType,a=e.node,n=e.analyticsId,r=e.title,i=e.subTitle,s=e.upsellCopyOverrides;k({blockType:t,node:a,featureGateClass:".sqs-featuregate-message",component:o.default.createElement(y.default,M({isTrial:m.default.isTrial(),analyticsId:n,title:r,subTitle:i},s))})}function G(e){var t=e.blockType,a=e.node,n=e.analyticsId,r=e.upsellCopyOverrides,i=e.eventTracker;k({blockType:t,node:a,featureGateClass:".sqs-featuregate-upgrade-modal",component:o.default.createElement(j.default,M({isOpen:true,isTrial:m.default.isTrial(),analyticsId:n,eventTracker:i},r))})}function U(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};G({analyticsId:"upgrade-modal",node:document.createElement("div"),upsellCopyOverrides:e,eventTracker:t})}function q(e){var t=m.default.isTrial();return{isSoftWarning:t,title:e.upgradeTitle,message:e.upgradeDescription,destination:t?c.default.TRIAL_UPGRADE_PLAN:c.default.UPGRADE_PLAN}}},"./src/main/webapp/universal/src/shared/utils/CampaignsConfigApi.js":function(e,t,a){"use strict";var n=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var r=n(a("./src/main/webapp/universal/src/shared/utils/network.js"));var i=n(a("./src/main/webapp/frontend/packages/enums/Flag.js"));var s=n(a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts"));var o="/api/composer";var l="".concat(o,"/mailing-lists");var u={getLists:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l;if(s.default.isFeatureEnabled(i.default.CAMPAIGNS_API_MOCK))return Promise.resolve({results:[{id:"ffffffffffffffffffffffff",name:"Mocked Campaigns API Response",count:1}],hasNextPage:false});return r.default.get(t).then(function(e){var t=e.data;return t})}};var c=u;t.default=c;e.exports=t.default},"./src/main/webapp/universal/src/shared/utils/MailChimpConfigApi.js":function(e,t,a){"use strict";var n=a("./src/main/webapp/universal/src/shared/utils/sqsAxios.ts");var r="/api/external/GetMailChimpAccountDetail";var i="/api/external/GetMailChimpLists";var s=function e(t,a){var n=t.title.toLowerCase();var r=a.title.toLowerCase();if(n<r)return-1;if(n>r)return 1;return 0};var o=function e(t){var a=t.data;return Object.keys(a).filter(function(e){return""!==e}).map(function(e){return{value:e,title:a[e].title}}).sort(s)};var l={getAccountDetail:function e(t){return n.get(r,{params:{connectedAccountId:t}})},getLists:function e(t){return n.get(i,{params:{connectedAccountId:t}}).then(o)}};e.exports=l},"./src/main/webapp/universal/src/shared/utils/MailChimpConfigRecord.js":function(e,t,a){"use strict";var n=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var r=n(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var i=n(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var s=n(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var o=n(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var l=n(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));function u(r){var i=c();return function e(){var t=(0,l.default)(r),a;if(i){var n=(0,l.default)(this).constructor;a=Reflect.construct(t,arguments,n)}else a=t.apply(this,arguments);return(0,o.default)(this,a)}}function c(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var d=a("./common/temp/node_modules/immutable/dist/immutable.js"),m=d.Record;var p=a("./src/main/webapp/universal/src/shared/utils/MailChimpConnectionInfoRecord.js");var f=a("./src/main/webapp/universal/src/shared/utils/MailChimpOAuthConfigRecord.js");var h={mailChimpUsername:"",mailChimpUseSingleOptIn:true,isMailChimpConnected:false,mailChimpListId:"",mailChimpConnectionInfo:new p,mailChimpOAuthConfig:null};var v=function(e){(0,s.default)(l,e);var t=u(l);function l(){(0,r.default)(this,l);return t.apply(this,arguments)}(0,i.default)(l,null,[{key:"buildFromJson",value:function e(t){var a=t.mailChimpUsername,n=t.mailChimpUseSingleOptIn,r=t.isMailChimpConnected,i=t.mailChimpListId,s=t.mailChimpConnectionInfo,o=t.mailChimpOAuthConfig;return new l({mailChimpUsername:a||"",mailChimpUseSingleOptIn:!!n,isMailChimpConnected:!!r,mailChimpListId:i||"",mailChimpConnectionInfo:new p(s),mailChimpOAuthConfig:o?new f(o):null})}}]);return l}(m(h));e.exports=v},"./src/main/webapp/universal/src/shared/utils/MailChimpConnectionInfoRecord.js":function(e,t,a){"use strict";var n=a("./common/temp/node_modules/immutable/dist/immutable.js"),r=n.Record;e.exports=r({mailChimpLists:[],mailChimpError:false})},"./src/main/webapp/universal/src/shared/utils/MailChimpOAuthConfigRecord.js":function(e,t,a){"use strict";var n=a("./common/temp/node_modules/immutable/dist/immutable.js"),r=n.Record;e.exports=r({externalAuthenticationId:null,oauthError:false})}}]);
//# sourceMappingURL=https://sourcemaps.squarespace.net/universal/scripts-compressed/28-9d5cf495c0a2265273de6-min.en-US.js.map