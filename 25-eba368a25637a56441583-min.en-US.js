(window["wpJsonpExtractCss"]=window["wpJsonpExtractCss"]||[]).push([[25],{"./src/main/webapp/universal/src/apps/App/screens/Checkout/shared/components/PlanChangeFooter/PlanChangeFooter.jsx":function(e,n,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var t=a(r("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var i=a(r("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var o=a(r("./common/temp/node_modules/@babel/runtime/helpers/assertThisInitialized.js"));var l=a(r("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var c=a(r("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var p=a(r("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var u=a(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));function m(s){var t=d();return function e(){var n=(0,p.default)(s),r;if(t){var a=(0,p.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var s=r("./src/main/webapp/universal/src/shared/i18n/index.ts"),v=s.t;var f=r("./common/temp/node_modules/prop-types/index.js");var h=r("./common/temp/node_modules/react/index.js");var b=r("./src/main/webapp/universal/src/apps/App/screens/Checkout/shared/stores/AvailablePlanPropTypes.js");var g=r("./src/main/webapp/universal/src/apps/App/shared/components/BigSpinner/index.jsx");var w=r("./common/temp/node_modules/@sqs/fields/lib/index.js"),C=w.Button;var P=r("./src/main/webapp/universal/src/shared/components/Confirmation.jsx");var y=r("./common/temp/node_modules/classnames/index.js");var j=r("./src/main/webapp/universal/src/shared/utils/billing/ProductLineUtils.js");var S=r("./src/main/webapp/universal/src/apps/App/screens/Checkout/shared/components/PlanChangeFooter/PlanChangeFooter.less");var x=r("./src/main/webapp/universal/src/apps/App/shared/components/billing/PurchasePreview/index.jsx");var A=r("./src/main/webapp/universal/src/shared/router/withRouter.tsx");var L=r("./src/main/webapp/universal/src/shared/router/propType.ts"),_=L.default;var k=r("./src/main/webapp/universal/src/apps/App/shared/actions/billing/PlanChangePreviewActions.js");var B=r("./src/main/webapp/universal/src/apps/App/shared/components/Receipt/utils/InvoicePropTypes.js");var R=r("./src/main/webapp/frontend/packages/enums/SubscriptionLineItemType.js");var D=function(e){(0,l.default)(s,e);var a=m(s);function s(){var l;(0,t.default)(this,s);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];l=a.call.apply(a,[this].concat(n));(0,u.default)((0,o.default)(l),"state",{showError:false,showSpinner:false});(0,u.default)((0,o.default)(l),"handleConfirm",function(){l.setState({showSpinner:true});l.props.onConfirm().then(function(){return document.location.href="/config"},function(){return l.setState({showSpinner:false,showError:true})})});(0,u.default)((0,o.default)(l),"getPlanChangeLabel",function(e){if(e.subscriptionDetail.lineItemType!==R.PRORATED_CHARGE&&e.subscriptionDetail.lineItemType!==R.PRORATED_REFUND)return null;var n=l.props.mode;var r=e.subscriptionDetail;var a=r.productLine,s=r.planName,t=r.periodName;var i=j.getLabelForProductLine(a);var o=i;i!==s&&(o+=" "+s);"billingPeriod"===n&&(o+=" - "+t);return o});(0,u.default)((0,o.default)(l),"getButtonLabel",function(){if("billingPeriod"===l.props.mode)return v("Confirm Cycle Change");return v("Confirm Plan Change")});(0,u.default)((0,o.default)(l),"getSpinnerLabel",function(){var e=l.props.mode;if("billingPeriod"===e)return v("Please wait a moment while your Squarespace billing cycle is changed…");return v("Please wait a moment while your Squarespace plan is changed…")});(0,u.default)((0,o.default)(l),"renderModals",function(){var e=l.state,n=e.showSpinner,r=e.showError;return h.createElement("div",null,h.createElement(g,{visible:n,subtext:l.getSpinnerLabel()}),h.createElement(P,{isOpen:r,onCancel:function e(){return l.setState({showError:false})},onConfirm:function e(){return l.props.router.push("/settings/billing/billing/payment-info")},title:v("Transaction Declined"),message:v("The transaction was declined. Please update your payment information and try again."),confirmText:v("Update Payment Info"),cancelText:v("Dismiss")}))});return l}(0,i.default)(s,[{key:"componentDidMount",value:function e(){k.emptyCache()}},{key:"render",value:function e(){var n=this.props,r=n.isVisible,a=n.previewInvoice,s=n.width;if(!r)return this.renderModals();return h.createElement("div",{className:y(S.container,(0,u.default)({},S.hidden,!r)),styles:{width:s}},h.createElement("div",{className:S.column},h.createElement("div",{className:S.subSummaryContainer},h.createElement(x,{previewInvoice:a,itemDescriptionOverride:this.getPlanChangeLabel}))),this.props.showConfirm&&h.createElement("div",{className:S.column},h.createElement("div",{className:S.confirmButtonContainer},h.createElement(C,{testId:"submit-plan-change-button",className:S.confirmButton,type:"primary",onClick:this.handleConfirm},this.getButtonLabel()))),this.renderModals())}}]);return s}(h.Component);(0,u.default)(D,"propTypes",{mode:f.oneOf(["billingPeriod","featureLevel"]),isVisible:f.bool,newPlan:b.plan,previewInvoice:B.invoice,onConfirm:f.func.isRequired,showConfirm:f.bool,width:f.number,router:_});(0,u.default)(D,"defaultProps",{onConfirm:function e(){false;return Promise.resolve()},showConfirm:true});e.exports=A(D)},"./src/main/webapp/universal/src/apps/App/screens/Checkout/shared/components/PlanChangeFooter/PlanChangeFooter.less":function(e,n,r){e.exports={container:"PlanChangeFooter-container-9F6wa",column:"PlanChangeFooter-column-3lcKt",confirmButtonContainer:"PlanChangeFooter-confirmButtonContainer-1PWdG",subSummaryContainer:"PlanChangeFooter-subSummaryContainer-7zdkX",confirmButton:"PlanChangeFooter-confirmButton-3H0hd"}},"./src/main/webapp/universal/src/apps/App/screens/Checkout/shared/components/PlanChangeFooter/index.js":function(e,n,r){"use strict";var a=r("./common/temp/node_modules/alt-utils/lib/connectToStores.js");var d=r("./src/main/webapp/universal/src/apps/App/screens/Checkout/shared/utils/setBillingChangeCookie.js");var s=r("./src/main/webapp/universal/src/apps/App/shared/stores/billing/AvailablePlansStore.js");var t=r("./src/main/webapp/universal/src/shared/actions/billing/CustomerActions.js");var v=r("./src/main/webapp/universal/src/shared/stores/billing/CustomerStore.js");var f=r("./src/main/webapp/universal/src/apps/App/shared/stores/billing/PlanChangePreviewStore.js");var h=r("./src/main/webapp/universal/src/apps/App/screens/Checkout/shared/stores/PlanSelectionStore.js");var b=r("./src/main/webapp/universal/src/apps/App/shared/actions/billing/SubscriptionActions.js");var g=r("./src/main/webapp/universal/src/apps/App/shared/stores/billing/SubscriptionStore.js");var i=r("./src/main/webapp/universal/src/apps/App/shared/stores/WebsiteStore/index.js");var o=r("./src/main/webapp/universal/src/apps/App/screens/Checkout/shared/components/PlanChangeFooter/PlanChangeFooter.jsx");var w=r("./src/main/webapp/universal/src/apps/App/shared/actions/ProductLineTransitionActions.js");e.exports=a({getStores:function e(){return[s,v,f,h,i]},getPropsFromStores:function e(n){var r=v.getState(),a=r.cardNumber,s=r.customerBalance;var t=h.getState().plan;var i=f.getState(),o=i.invoice,l=i.isLoaded,c=i.isLoading;var p=t?t.id:null;var u=!("isVisible"in n&&!n.isVisible)&&null!==p&&l&&!c;var m=function e(){return g.getOrLoadWebsiteSubscription().then(function(e){var n=Object.assign({},e);Object.assign(e,{plan:t});var r=null;r=n.plan.productLine!==t.productLine?w.transition(t.productLine,{subscriptionId:e.id,featureLevel:t.featureLevel}):b.update(e);return r.then(function(){var e=g.getWebsiteSubscription();d(n,e)})})};return{cardNumber:a,customerBalance:s,isVisible:u,newPlan:t,onConfirm:m,previewInvoice:o}},componentDidConnect:function e(){var n=v.getState();n.loaded||n.loading||t.load.defer()}},o)},"./src/main/webapp/universal/src/apps/App/screens/Checkout/shared/components/PromotionalBanner/PromotionalBanner.jsx":function(e,n,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var s=a(r("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var t=a(r("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var i=a(r("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var o=a(r("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var l=a(r("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));function c(s){var t=p();return function e(){var n=(0,l.default)(s),r;if(t){var a=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,o.default)(this,r)}}function p(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var u=r("./common/temp/node_modules/react/index.js");var m=r("./src/main/webapp/universal/src/apps/App/screens/Checkout/shared/components/PromotionalBanner/PromotionalBanner.less");var d=function(e){(0,i.default)(r,e);var n=c(r);function r(){(0,s.default)(this,r);return n.apply(this,arguments)}(0,t.default)(r,[{key:"render",value:function e(){return u.createElement("div",{className:m.container},this.props.children)}}]);return r}(u.Component);e.exports=d},"./src/main/webapp/universal/src/apps/App/screens/Checkout/shared/components/PromotionalBanner/PromotionalBanner.less":function(e,n,r){e.exports={container:"PromotionalBanner-container-1W4H-"}},"./src/main/webapp/universal/src/apps/App/screens/Checkout/shared/components/PromotionalBanner/index.js":function(e,n,r){"use strict";e.exports=r("./src/main/webapp/universal/src/apps/App/screens/Checkout/shared/components/PromotionalBanner/PromotionalBanner.jsx")},"./src/main/webapp/universal/src/apps/App/screens/Checkout/shared/utils/setBillingChangeCookie.js":function(e,n,r){"use strict";var a=function e(n,r){var a=n.plan;var s=r.plan;var t={newSub:false,planChange:a.featureLevel!==s.featureLevel,prevPlanName:a.planDisplayName,newPlanName:s.planDisplayName,prevPeriodName:a.periodDisplayName,newPeriodName:s.periodDisplayName,nextBillDate:r.renewalDate,productLineChange:a.productLine!==s.productLine,prevProductLine:a.productLine,newProductLine:s.productLine};document.cookie="billingChangeSummary=".concat(JSON.stringify(t))};e.exports=a},"./src/main/webapp/universal/src/apps/App/shared/actions/ProductLineTransitionActions.js":function(e,n,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var s=a(r("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var t=a(r("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var i=r("./src/main/webapp/universal/src/shared/dispatchers/alt/index.ts");var o=r("./src/main/webapp/universal/src/apps/App/shared/utils/ProductLineTransitionAPI.js");var l=function(){function e(){(0,s.default)(this,e);this.generateActions("loadSuccess","loadFail")}(0,t.default)(e,[{key:"transition",value:function e(n,r){var a=this;r&&0!==Object.keys(r).length||(r={});var s=o.transition(n,r);s.then(function(e){a.loadSuccess(e.data.results)}).catch(function(e){console.error(e);a.loadFail(e)});return s}}]);return e}();e.exports=i.createActions(l)},"./src/main/webapp/universal/src/apps/App/shared/actions/billing/PlanChangePreviewActions.js":function(e,n,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var s=a(r("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var t=a(r("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var i=r("./src/main/webapp/universal/src/shared/dispatchers/alt/index.ts");var o=r("./src/main/webapp/universal/src/apps/App/shared/utils/billing/PlanChangePreviewApi.js");var l={};var c=function(){function e(){(0,s.default)(this,e);this.generateActions("loadSuccess","loadFail","reset")}(0,t.default)(e,[{key:"load",value:function e(r,a){var s=this;return function(e){e({planId:r});var n=null;n=l[r]?Promise.resolve(l[r]):o.load({planId:r,productType:a});return n.then(function(e){l[r]||(l[r]=e);s.loadSuccess(Object.assign({planId:r},e.data))}).catch(function(e){console.error(e);s.loadFail()})}}},{key:"emptyCache",value:function e(){return function(e){l={}}}}]);return e}();e.exports=i.createActions(c)},"./src/main/webapp/universal/src/apps/App/shared/components/BigSpinner/BigSpinner.less":function(e,n,r){e.exports={spinner:"BigSpinner-spinner-3UKwJ animations-spin-lL8XX",subtext:"BigSpinner-subtext-3hZZJ",overlay:"BigSpinner-overlay-1nwS8",overlayContainer:"BigSpinner-overlayContainer-ceHMj"}},"./src/main/webapp/universal/src/apps/App/shared/components/BigSpinner/index.jsx":function(e,n,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var i=a(r("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var o=a(r("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var l=a(r("./common/temp/node_modules/@babel/runtime/helpers/assertThisInitialized.js"));var c=a(r("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var p=a(r("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var u=a(r("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var m=a(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));function d(s){var t=v();return function e(){var n=(0,u.default)(s),r;if(t){var a=(0,u.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,p.default)(this,r)}}function v(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var s=r("./common/temp/node_modules/prop-types/index.js");var f=r("./common/temp/node_modules/react/index.js");var h=r("./src/main/webapp/universal/src/apps/App/shared/components/BigSpinner/BigSpinner.less");var b=r("./src/main/webapp/universal/src/shared/components/Modal/index.jsx");var t=function(e){(0,c.default)(t,e);var s=d(t);function t(){var n;(0,i.default)(this,t);for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];n=s.call.apply(s,[this].concat(r));(0,m.default)((0,l.default)(n),"renderSubtext",function(){var e=n.props.subtext;if(e)return f.createElement("div",{className:h.subtext},e);return""});return n}(0,o.default)(t,[{key:"render",value:function e(){return f.createElement(b,{isOpen:this.props.visible,overlayClassName:h.overlay,className:h.overlayContainer,width:"auto"},f.createElement("div",{className:h.spinner}," "),this.renderSubtext())}}]);return t}(f.Component);(0,m.default)(t,"propTypes",{visible:s.bool,subtext:s.string});(0,m.default)(t,"defaultProps",{subtext:"",visible:false});e.exports=t},"./src/main/webapp/universal/src/apps/App/shared/stores/billing/PlanChangePreviewStore.js":function(e,n,r){"use strict";var a=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var s=a(r("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var t=a(r("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var i=r("./src/main/webapp/universal/src/shared/dispatchers/alt/index.ts");var o=r("./src/main/webapp/universal/src/apps/App/shared/actions/billing/PlanChangePreviewActions.js");var l=function(){function e(){(0,s.default)(this,e);this.isLoaded=false;this.isLoading=false;this.amount=null;this.violations=[];this.planId=null;this.bindActions(o)}(0,t.default)(e,[{key:"onLoad",value:function e(n){var r=n.planId;this.setState({isLoading:true,planId:r})}},{key:"onLoadSuccess",value:function e(n){if(n.planId!==this.planId)return false;this.setState({isLoaded:true,isLoading:false,invoice:n.invoice})}},{key:"onLoadFail",value:function e(){this.setState({isLoading:false})}},{key:"onReset",value:function e(){this.setState({amount:null,isLoading:false,invoice:null})}}]);return e}();e.exports=i.createStore(l,"PlanChangePreviewStore")},"./src/main/webapp/universal/src/apps/App/shared/utils/ProductLineTransitionAPI.js":function(e,n,r){"use strict";var a=r("./src/main/webapp/universal/src/shared/utils/sqsAxios.ts");var s="/api/billing/product-types/website/product-lines";var t={transition:function e(n,r){return a.post("".concat(s,"/").concat(n,"/transitions"),r)}};e.exports=t},"./src/main/webapp/universal/src/apps/App/shared/utils/billing/PlanChangePreviewApi.js":function(e,n,r){"use strict";var a=r("./src/main/webapp/universal/src/shared/utils/sqsAxios.ts");var s=r("./src/main/webapp/universal/src/shared/utils/SerializationUtils.js"),t=s.deserializer;var i=r("./src/main/webapp/universal/src/shared/utils/billing/deserializeInvoice.js");var o="/api/billing/plan-change-preview";var l=t(i,"data.invoice");var c={load:function e(n){return a.get(o,{params:n}).then(l)}};e.exports=c},"./src/main/webapp/universal/src/shared/utils/billing/PriceUtils.js":function(e,n,r){"use strict";var a=r("./common/temp/node_modules/lodash/find.js");var s=r("./src/main/webapp/universal/src/shared/utils/billing/BillingIntervalUtils.js");function t(e){return a(e,function(e){return s.isAnnual(e.billingPeriod)})}function i(e){return a(e,function(e){return s.isMonthly(e.billingPeriod)})}function o(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{code:"USD",symbol:"$"};false;if(!e&&0!==e)return"";var r=Math.round(e)!==e?2:0;var a=Math.abs(e)!==e?"-":"";var s="USD"===n.code?"":" "+n.code;e=Number(Math.abs(e)).toFixed(r);return a+n.symbol+e+s}e.exports={findAnnualPrice:t,formatPrice:o,findMonthlyPrice:i}}}]);
//# sourceMappingURL=https://sourcemaps.squarespace.net/universal/scripts-compressed/25-09b1102590ef008363914-min.en-US.js.map