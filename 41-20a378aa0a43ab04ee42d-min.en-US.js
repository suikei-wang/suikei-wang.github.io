(window["wpJsonpExtractCss"]=window["wpJsonpExtractCss"]||[]).push([[41],{"./src/main/webapp/frontend/packages/enums/AdvertisingProviderType.js":function(e,t){var a={GOOGLE_ADS:1};e.exports=a},"./src/main/webapp/frontend/packages/enums/AgeTypes.js":function(e,t){var a={NEWBORN:"newborn",BABY:"baby",CHILD:"child",TEENAGER:"teenager",YOUNG_ADULT:"young_adult",ADULT:"adult",ADULTS_ONLY:"adults_only",MATURE_ADULT:"mature_adult",SENIOR_ADULT:"senior_adult"};e.exports=a},"./src/main/webapp/frontend/packages/enums/AggregationGroupSortByTypes.js":function(e,t){var a={NAME:"name",FIRSTNAME:"firstName",LASTNAME:"lastName",DATE:"date",COUNT:"count",ACTIVITY:"activity"};e.exports=a},"./src/main/webapp/frontend/packages/enums/AggregationTypes.js":function(e,t){var a={AUTHOR:"author",YEAR:"year",MONTH:"month",DAY:"day",CATEGORY:"category",TAG:"tag"};e.exports=a},"./src/main/webapp/frontend/packages/enums/AnnouncementBarStyle.js":function(e,t){var a={NONE:1,CUSTOM:2};e.exports=a},"./src/main/webapp/frontend/packages/enums/ApplicationSettingType.js":function(e,t){var a={STRING:"str",NUMERIC:"num",BOOLEAN:"bool"};e.exports=a},"./src/main/webapp/frontend/packages/enums/AuthenticationFrameMessageType.js":function(e,t){var a={AUTHENTICATED:"authenticated",REDIRECT:"redirect"};e.exports=a},"./src/main/webapp/frontend/packages/enums/BackgroundSource.js":function(e,t){var a={UPLOAD:1,INSTAGRAM:2,VIDEO:3,NONE:4};e.exports=a},"./src/main/webapp/frontend/packages/enums/BillingSubscriptionStatus.js":function(e,t){var a={ACTIVE:"active",CANCELED:"canceled",PAST_DUE:"pastDue",TRIAL:"trial",UNPAID:"unpaid",EXPIRED:"expired",PENDING:"pending",PENDING_CANCELED:"pending_canceled",TRANSFERRING:"transferring",ACTIVE_PROCESSING_PAYMENT:"active_processing_payment",INACTIVE_PROCESSING_PAYMENT:"inactive_processing_payment"};e.exports=a},"./src/main/webapp/frontend/packages/enums/BlockForeignKeyFieldNames.js":function(e,t){var a={GALLERY_BLOCK_TRANSIENT_GALLERY_ID:"transientGalleryId",ALBUM_BLOCK_TRANSIENT_COLLECTION_ID:"transientCollectionId",FORM_BLOCK_FORM_ID:"formId",IMAGE_BLOCK_IMAGE_ID:"imageId",TWITTER_BLOCK_SEARCH_COLLECTION_ID:"socialCollectionId",CHART_BLOCK_DATA_TABLE_ID:"dataTableId"};e.exports=a},"./src/main/webapp/frontend/packages/enums/ButtonContext.js":function(e,t){var a={BUTTON_BLOCK:1,POPUP_OVERLAY:2};e.exports=a},"./src/main/webapp/frontend/packages/enums/CalendarEventDisplayModes.js":function(e,t){var a={PAST:"past",UPCOMING:"upcoming"};e.exports=a},"./src/main/webapp/frontend/packages/enums/CanadianProvinces.js":function(e,t){var a={ON:"ON",QC:"QC",NS:"NS",NB:"NB",MB:"MB",BC:"BC",PE:"PE",SK:"SK",AB:"AB",NL:"NL",NT:"NT",YT:"YT",NU:"NU"};e.exports=a},"./src/main/webapp/frontend/packages/enums/CensusDataMetric.js":function(e,t){var a={VIEWS:1,VISITS:2,VISITORS:3,COUNT:4,SUBS:5,BOTS:6,REVENUE:7,QUANTITY:8,QUERIES:9,OS:10,BROWSER:11,DEVICE_TYPE:12,VERSIONS:13};e.exports=a},"./src/main/webapp/frontend/packages/enums/CensusDataType.js":function(e,t){var a={TOTAL:1,PAGE_URL:2,PAGE_TITLE:3,BROWSER:4,OS:5,COUNTRY:6,REFERRER:7,SEARCH_TERM:8,SEARCH_ENGINE:9,SUBSCRIBER:10,DEVICE:11,CATEGORY_PURCHASE:30,PRODUCT_PURCHASE:31,SITE_SEARCH:32,ACTIVE_TIME:33};e.exports=a},"./src/main/webapp/frontend/packages/enums/CensusEventType.js":function(e,t){var a={PAGE_VIEW:1,SITE_SEARCH:2,HEARTBEAT:10,AUDIO:20,VIDEO:21};e.exports=a},"./src/main/webapp/frontend/packages/enums/CensusGranularity.js":function(e,t){var a={HOURLY:1,DAILY:2,WEEKLY:3,MONTHLY:4,YEARLY:5};e.exports=a},"./src/main/webapp/frontend/packages/enums/CommentSortTypes.js":function(e,t){var a={OLDEST_FIRST:1,NEWEST_FIRST:2,MOST_LIKED:3,LEAST_LIKED:4,MOST_FLAGGED:5};e.exports=a},"./src/main/webapp/frontend/packages/enums/CommentStatuses.js":function(e,t){var a={APPROVED:1,AWAITING_MODERATION:2,DELETED:3,SPAM:4,POSSIBLY_SPAM:5};e.exports=a},"./src/main/webapp/frontend/packages/enums/CommentTargetTypes.js":function(e,t){var a={ITEM:1,COLLECTION:2};e.exports=a},"./src/main/webapp/frontend/packages/enums/CommerceCouponType.js":function(e,t){var a={CATEGORY_IDS:6,THIRD_PARTY:5,SINGLE_PRODUCT:4,CATEGORIES:3,ORDERS_OVER:2,ALL_ORDERS:1};e.exports=a},"./src/main/webapp/frontend/packages/enums/CommerceDiscountType.js":function(e,t){var a={FLAT:1,PERCENTAGE:2,FREE_SHIPPING:3};e.exports=a},"./src/main/webapp/frontend/packages/enums/CommerceEmailTypes.js":function(e,t){var a={ORDER_CONFIRMED:1,ORDER_SHIPPED:2,ORDER_REFUNDED:3,DIGITAL_GOODS_DELIVERY:4,CONTRIBUTION_CONFIRMED:5,ABANDONED_CART:6,RESET_PASSWORD:7,CUSTOMER_WELCOME:8,PASSWORD_UPDATED:10,GIFT_CARD_DELIVERY:11,MEMBER_WELCOME:13,RESTOCK_NOTIFICATION:14,CUSTOM_MESSAGE:50,BASE_TEMPLATE:51};e.exports=a},"./src/main/webapp/frontend/packages/enums/ConfigurationMenuItemType.js":function(e,t){var a={HOME:1,CONTENT:2,DASHBOARD:3,SETTINGS:4,COMMERCE:5,FOLDER:6,HELP:7,NEWSLETTERS:8,NOTIFICATIONS:9};e.exports=a},"./src/main/webapp/frontend/packages/enums/CurrencySymbol.js":function(e,t){var a={USD:"$",CAD:"$",GBP:"£",AUD:"$",EUR:"€",CHF:"CHF",NOK:"kr",SEK:"kr",DKK:"kr",NZD:"$",SGD:"S$",MXN:"$",HKD:"HK$",CZK:"Kč",ILS:"₪",MYR:"RM",RUB:"р.",PHP:"Php",PLN:"zł",THB:"฿",BRL:"R$",ARS:"$",COP:"COL$",IDR:"Rp",INR:"₹",JPY:"¥",ZAR:"R"};e.exports=a},"./src/main/webapp/frontend/packages/enums/CustomerField.js":function(e,t){var a={NAME:"name",EMAIL:"email",ACCOUNT:"account",ORDER_NUM:"orderNum",LAST_ORDER_ON:"lastOrderOn",TOTAL_SPENT:"totalSpent"};e.exports=a},"./src/main/webapp/frontend/packages/enums/CustomerSortDirection.js":function(e,t){var a={ASCENDING:"asc",DESCENDING:"desc"};e.exports=a},"./src/main/webapp/frontend/packages/enums/DNSProviderIdentifier.js":function(e,t){var a={OPEN_SRS:1,NS1:2};e.exports=a},"./src/main/webapp/frontend/packages/enums/DeviceCategory.js":function(e,t){var a={DESKTOP:1,MOBILE:2,TABLET:3,UNKNOWN:4,ALL:200};e.exports=a},"./src/main/webapp/frontend/packages/enums/DiscountCriteriaType.js":function(e,t){var a={ANY_ORDER:"ANY_ORDER",PRODUCT:"PRODUCT",CART_TOTAL:"CART_TOTAL",CATEGORY:"CATEGORY",CATEGORY_ID:"CATEGORY_ID"};e.exports=a},"./src/main/webapp/frontend/packages/enums/DiscountStatus.js":function(e,t){var a={ALL:"ALL",ACTIVE:"ACTIVE",SCHEDULED:"SCHEDULED",EXPIRED:"EXPIRED"};e.exports=a},"./src/main/webapp/frontend/packages/enums/DiscountTemplateType.js":function(e,t){var a={FIXED_AMOUNT:"FIXED_AMOUNT",FREE_SHIPPING:"FREE_SHIPPING",PERCENTAGE:"PERCENTAGE"};e.exports=a},"./src/main/webapp/frontend/packages/enums/DiscountTriggerType.js":function(e,t){var a={CODE:"CODE",AUTO:"AUTO",EPHEMERAL:"EPHEMERAL"};e.exports=a},"./src/main/webapp/frontend/packages/enums/DiscountValidationErrorType.js":function(e,t){var a={MINIMUM_CART_TOTAL_GREATER_THAN_ZERO:"MINIMUM_CART_TOTAL_GREATER_THAN_ZERO",AT_LEAST_ONE_CATEGORY:"AT_LEAST_ONE_CATEGORY",NON_EXISTING_CATEGORY:"NON_EXISTING_CATEGORY",PRODUCT_ID_REQUIRED:"PRODUCT_ID_REQUIRED",DISCOUNT_DISABLED:"DISCOUNT_DISABLED",NON_EXISTING_PRODUCT:"NON_EXISTING_PRODUCT",PRODUCT_QUANTITY_REQUIRED:"PRODUCT_QUANTITY_REQUIRED",FIXED_AMOUNT_GREATER_THAN_ZERO:"FIXED_AMOUNT_GREATER_THAN_ZERO",PERCENTAGE_INVALID:"PERCENTAGE_INVALID",TRIGGER_REQUIRED:"TRIGGER_REQUIRED",PROMO_CODE_REQUIRED:"PROMO_CODE_REQUIRED",PROMO_CODE_ALREADY_EXISTS:"PROMO_CODE_ALREADY_EXISTS",PROMO_CODE_RESERVED:"PROMO_CODE_RESERVED",START_DATE_REQUIRED:"START_DATE_REQUIRED",TEMPLATE_REQUIRED:"TEMPLATE_REQUIRED",NON_EXISTING_SHIPPING_OPTION:"NON_EXISTING_SHIPPING_OPTION",CRITERIA_REQUIRED:"CRITERIA_REQUIRED",MAX_ALLOWED_AUTO_TRIGGER_REACHED:"MAX_ALLOWED_AUTO_TRIGGER_REACHED",AUTO_TRIGGER_NOT_SUPPORTED:"AUTO_TRIGGER_NOT_SUPPORTED",NAME_REQUIRED:"NAME_REQUIRED",DISCOUNT_LIMIT_GREATER_THAN_ZERO:"DISCOUNT_LIMIT_GREATER_THAN_ZERO",LIMITED_USE_NOT_SUPPPORTED:"LIMITED_USE_NOT_SUPPPORTED",INVALID_SUBSCRIPTION_OPTIONS:"INVALID_SUBSCRIPTION_OPTIONS"};e.exports=a},"./src/main/webapp/frontend/packages/enums/DomainPresetTemplateId.js":function(e,t){var a={GOOGLE_APPS_MAIL_OLD:1,GOOGLE_APPS_MAIL:2,ZOHO_MAIL:3,SQUARESPACE_APEX_FORWARDING:4,SQUARESPACE_SUBDOMAIN_FORWARDING:5,SQUARESPACE_WEBSITE:6,SQUARESPACE_WEBSITE_LEGACY_WILDCARD:7,SQUARESPACE_SUBDOMAIN_WEBSITE:8,GOOGLE_APPS_VERIFICATION:9,NEWSLETTERS_EMAIL:10};e.exports=a},"./src/main/webapp/frontend/packages/enums/EmailTypes.js":function(e,t){var a={ABANDONED_CART:1,ACCOUNT_VERIFICATION_EMAIL:2,BATCH_DOMAIN_REGISTRATION_SUCCESSFUL_EMAIL:3,BILLING_FAILURE_EMAIL:4,BILLING_FAILURE_FINAL_EMAIL:5,BILLING_RENEWAL_REMINDER:6,BILLING_SUSPENDED:7,CHANGED_IDENTIFIER_EMAIL:8,COMMENT_EMAIL:9,COMPED_STATUS_ENDED:10,CONTRIBUTION_ARRIVED:11,CONTRIBUTION_CONFIRMED:12,CREATIVE_NEW_WEBSITE_EMAIL:13,CIRCLE_SIGNUP_CONFIRMATION_EMAIL:14,CREATIVE_WELCOME_DAY_1:15,CREATIVE_WELCOME_DAY_2:16,CREATIVE_WELCOME_DAY_3:17,DOMAIN_EXPIRATION_NOTICE:18,DOMAIN_EXPIRATION_REMINDER:19,DOMAIN_RENEWAL_FAILURE_NOTICE:20,DOMAIN_RENEWAL_REMINDER:21,DOMAIN_SUBSCRIPTION_SUCCESSFUL_EMAIL:22,EMAIL_RECOVERY:24,FORM_SUBMISSION_EMAIL:25,FORM_SUBMISSION_ERROR:26,G_SUITE_ADMIN_CREATION_FAILURE:27,G_SUITE_BILLING_FAILURE_FINAL:28,G_SUITE_BILLING_FAILURE:29,DEPRECATED_G_SUITE_FREE_INBOX_REMINDER:30,G_SUITE_INVITATION:31,G_SUITE_PASSWORD_RESET:32,G_SUITE_SUSPENDED:33,G_SUITE_TOTAL_FAILURE:34,G_SUITE_WELCOME:35,LINKED_G_SUITE_WELCOME:36,LOGO_GENERATED_EMAIL:37,MARKETING_RELATIONSHIP_VERIFICATION_EMAIL:38,MEMBER_ACCOUNT_ACTIVATION_EMAIL:39,MEMBER_INVITE_EMAIL:40,NEW_ORDER_ALERT:41,NEWSLETTER_OPT_IN:42,STORE_LIVE:43,DEPRECATED_ONBOARDING_ONE_WEEK_LEFT:44,DEPRECATED_24_HOURS_LEFT:45,DEPRECATED_TRIAL_EXPIRED:46,ONBOARDING_TRIAL_EXTENSION:47,ORDER_CONFIRMED:48,ORDER_DIGITAL_GOODS:49,ORDER_REFUNDED:51,ORDER_SHIPPED:52,PASSWORD_RESET_EMAIL:53,PLAN_CHANGE_EMAIL:54,REFERRAL_RECEIVED:55,REFERRAL_SAVED_SEARCH_MATCH:56,SECURITY_NOTIFICATION_EMAIL:57,OLD_SIGNUP_CONFIRMATION_EMAIL:58,SIGNUP_FAILED_EMAIL:59,STOCK_LEVEL_ALERT:60,DEPRECATED_SUBSCRIPTION_SUCCESSFUL_EMAIL:61,XERO_EXPORT_FAILURE_EMAIL:62,NEW_TRIAL_ONBOARDING_1:63,NEW_TRIAL_ONBOARDING_2:64,NEW_TRIAL_ONBOARDING_3:65,NEW_TRIAL_ONBOARDING_4:66,NEW_TRIAL_ONBOARDING_DAY_BEFORE:67,NEW_TRIAL_ONBOARDING_DAY_AFTER:68,TRIAL_3X_EXTENSION_CHECKIN:69,SIGNUP_CONFIRMATION_EMAIL:70,COMMERCE_COMMON_MOCK_EMAIL:71,SUBSCRIPTION_SUCCESSFUL:72,SUBSCRIPTION_WELCOME:73,EMAIL_ENDPOINT_SOURCED:74,PARKED_PAGE_ONBOARDING:75,G_SUITE_RENEWAL_REMINDER:76,G_SUITE_EXPIRATION_REMINDER:77,G_SUITE_RENEWAL_FAILURE_NOTICE:78,G_SUITE_EXPIRATION_NOTICE:79,G_SUITE_RESELLER_ACCESS_DISABLED_REMINDER:80,G_SUITE_RESELLER_ACCESS_DISABLED_FAILURE:81,G_SUITE_RESELLER_ACCESS_DISABLED_EXPIRATION_REMINDER:82,SALES_TAX_NOTIFICATION:83,BILLING_EXPIRATION_REMINDER:84,BILLING_EXPIRED_NATURALLY:85,BILLING_CANCELLATION_CONFIRMATION:86,G_SUITE_CANCELLATION_CONFIRMATION:87,BILLING_CARD_EXPIRING:88,BILLING_AUTORENEW_DISABLED_CONFIRMATION:89,DOMAIN_AUTORENEW_DISABLED_CONFIRMATION:90,G_SUITE_AUTORENEW_DISABLED_CONFIRMATION:91,DOMAIN_TRANSFER_INITIATED:92,DOMAIN_TRANSFER_SUCCESS:93,DOMAIN_TRANSFER_CANCELLED:94,DOMAIN_TRANSFER_FAILED:95,BATCH_DOMAIN_REGISTRATION_FAILURE_EMAIL:96,G_SUITE_NAME_IN_USE:97,G_SUITE_PURGE_REMINDER:98,GIFT_CARD_DELIVERY:99,BILLING_WEBSITE_CHARGEBACK_CANCELLATION:100,CUSTOMER_ACCOUNT_RESET_PASSWORD:101,GST_REMINDER:102,ADVANCED_COMMERCE_CALLBACKS:103,OLD_SHARE_REFERRAL_CODE:104,CUSTOMER_ACCOUNT_WELCOME:105,CUSTOMER_ACCOUNT_PASSWORD_UPDATED:106,DOMAIN_SSL_RENEWAL_FAILED:107,G_SUITE_CHANGE_PLAN_TO_ANNUAL:108,GIFT_CARD_CANCELED:109,COMMERCE_PAYMENT_ACCOUNT_CHANGED:110,TWO_FACTOR_UPDATED:111,DOMAIN_WITH_CNAME_TO_WWW:112,SOCIAL_ACCOUNT_CONFIRMATION:113,COMMERCE_MERCHANT_SUBSCRIBER_PAYMENT_DECLINED:114,COMMERCE_SUBSCRIBER_PAYMENT_DECLINED:115,TAX_CHANGE:116,COMMERCE_MERCHANT_SUBSCRIPTION_CANCELLED:117,REGISTRAR_EMAIL_VERIFICATION:118,COMMERCE_SUBSCRIBER_SUBSCRIPTION_CANCELLED:119,G_SUITE_TOS_SUSPENSION_30DAY_REMINDER:120,G_SUITE_TOS_SUSPENSION_15DAY_REMINDER:121,COMMERCE_MERCHANT_SUBSCRIPTION_PAYMENT_MERCHANT_ERROR:122,CAMPAIGNS_SUBSCRIPTION_SUCCESSFUL:123,CAMPAIGNS_BILLING_FAILURE_EMAIL:124,CAMPAIGNS_BILLING_FAILURE_FINAL_EMAIL:125,CAMPAIGNS_BILLING_EXPIRATION_REMINDER:126,CAMPAIGNS_BILLING_EXPIRED_NATURALLY:127,CAMPAIGNS_BILLING_RENEWAL_REMINDER:128,CAMPAIGNS_SUBSCRIPTION_SUSPENDED:129,CAMPAIGNS_AUTORENEW_DISABLED_CONFIRMATION:130,CAMPAIGNS_SUBSCRIPTION_CANCELED:131,CAMPAIGNS_PLAN_CHANGE_EMAIL:132,MEMBER_AREA_INVITATION:133,MEMBER_AREA_WELCOME:134,OPENSRS_DE_DOMAIN_DELETION:135,COUNTRY_TAX_CHANGE:136,VAT_TAX_CHANGE:137,GST_TAX_CHANGE:138,ORDER_NOT_PLACED:139,TRIAL_DATA_DELETION:140,COMMERCE_PRODUCT_RESTOCK_NOTIFICATION:141,NEW_ORDER_ALERT_POS:142,POS_ORDER_CONFIRMED:143,THIRD_PARTY_CONNECTED:144,THIRD_PARTY_DISCONNECTED:145,POS_ORDER_REFUNDED:146,COMMERCE_SUBSCRIBER_AUTH_REQUIRED:147,STRONG_AUTH_BILLING_FAILURE_EMAIL:148,MERCHANT_NEW_MEMBER_JOINED:149,BILLING_RESOLD_EXPIRATION_REMINDER:150,MEMBER_AREA_MEMBERSHIP_CANCELLED:151,MERCHANT_MEMBERSHIP_CANCELLED:152,BILLING_RESOLD_GRACE_PERIOD_REMINDER:153,STRONG_AUTH_BILLING_FAILURE_FINAL_EMAIL:154,SCHEDULING_BILLING_FAILURE:155,BATCH_DOMAIN_REGISTRATION_PAYMENT_AUTHENTICATION_EMAIL:156,SCHEDULING_SUBSCRIPTION_SUCCESSFUL:157,SCHEDULING_BILLING_FAILURE_FINAL:158,SCHEDULING_BILLING_EXPIRATION_REMINDER:159,SCHEDULING_PLAN_CHANGE:160,SCHEDULING_BILLING_EXPIRED_NATURALLY:161,SCHEDULING_SUBSCRIPTION_SUSPENDED:162,SCHEDULING_SUBSCRIPTION_CANCELLED:163,SCHEDULING_BILLING_RENEWAL_REMINDER:164,SCHEDULING_AUTORENEW_DISABLED_CONFIRMATION:165,DOMAIN_TRANSFER_LOCKED:166,DOMAIN_TRANSFER_AUTH_CODE_NEEDED:167,COMMERCE_TRANSACTIONAL_EMAIL:168,G_SUITE_SUBSCRIPTION_EXISTS_ON_DOMAIN:169,DOMAIN_TRANSFER_LOCKED_REMINDER:170,DOMAIN_TRANSFER_AUTH_CODE_NEEDED_REMINDER:171,REGISTRAR_EMAIL_AUTH_CODE:172,ACCOUNT_RECOVERY_CHANGED:173,ACCOUNT_PHONE_NUMBER_CHANGED:174,FRAUD_DETECTION_ACCOUNT_VERIFICATION:175,DOMAIN_TRANSFER_EXPIRED:176,CUSTOMER_RECIPIENT_EMAIL_NOTIFICATION:177,WHOIS_PRIVACY_VERIFICATION_EMAIL:178,BILLING_CARD_DELETED:179,DOMAIN_SUSPENDED_EMAIL:180,CONTACT_CHANGE_CONFIRMATION:181,REGISTRANT_CHANGE_APPROVAL:182,MEMBER_AREAS_SUBSCRIPTION_SUCCESSFUL:184,MEMBER_AREAS_BILLING_EXPIRED_NATURALLY:185,MEMBER_AREAS_BILLING_RENEWAL_REMINDER:186,MEMBER_AREAS_BILLING_AUTO_RENEW_DISABLED:187,MEMBER_AREAS_BILLING_CANCELLATION_CONFIRMATION:188,MEMBER_AREAS_BILLING_EXPIRATION_REMINDER:189,MEMBER_AREAS_PLAN_CHANGE:190,FORM_SUBMISSION_2020_EMAIL:191,MEMBER_AREAS_BILLING_FAILURE:192,MEMBER_AREAS_SUBSCRIPTION_SUSPENDED:193,DOMAINS_WRONGLY_EXPIRED_REACTIVATION_EMAIL:194,PASSWORDLESS_LOGIN:195,NEW_DEVICE_LOGIN:196,FORM_SUBMISSION_PHISHING_EMAIL:197};e.exports=a},"./src/main/webapp/frontend/packages/enums/EventView.js":function(e,t){var a={CALENDAR:0,LIST:1};e.exports=a},"./src/main/webapp/frontend/packages/enums/FeatureSetIdentifiers.js":function(e,t){var a={WEBSITE_CLASSIC_TRIAL:"website-classic-trial",WEBSITE_CLASSIC_PERSONAL:"website-classic-personal",WEBSITE_CLASSIC_PERSONAL_GATED_TEST:"website-classic-personal-gated",WEBSITE_CLASSIC_PERSONAL_RESOLD:"website-classic-personal-resold",WEBSITE_CLASSIC_PROFESSIONAL:"website-classic-professional",WEBSITE_BUSINESS_RESOLD:"website-classic-professional-resold",WEBSITE_CLASSIC_COMPED:"website-classic-comped",WEBSITE_LEGACY_COMPED:"website-legacy-comped",WEBSITE_LEGACY_PROFESSIONAL:"website-legacy-professional",WEBSITE_LEGACY_PERSONAL:"website-legacy-personal",WEBSITE_LEGACY_COMMERCE:"website-legacy-commerce",WEBSITE_BUSINESS_PRICE_TEST_AUG_2017:"website-business-price-test-aug-2017",WEBSITE_COVER_PAGE:"website-starter",WEBSITE_COVER_PAGE_TRIAL:"website-starter-trial",WEBSITE_COMMERCE_TRIAL:"website-commerce-trial",WEBSITE_COMMERCE_BASIC:"website-commerce-basic",WEBSITE_COMMERCE_BASIC_RESOLD:"website-commerce-basic-resold",WEBSITE_COMMERCE_ADVANCED:"website-commerce-advanced",WEBSITE_COMMERCE_ADVANCED_RESOLD:"website-commerce-advanced-resold",WEBSITE_COMMERCE_ADVANCED_WITH_CALLBACKS:"website-commerce-advanced-callbacks",WEBSITE_ENTERPRISE_TRIAL:"website-enterprise-trial",WEBSITE_ENTERPRISE_SELECT:"website-enterprise-select",PARKING_PAGE_REMOVED:"parking-page-removed",WEBSITE_V5_LINKED_LOW:"website-v5-linked-low",WEBSITE_V5_LINKED_HIGH:"website-v5-linked-high",WEBSITE_PARKING_PAGE:"website-parking-page"};e.exports=a},"./src/main/webapp/frontend/packages/enums/FocalPointSources.js":function(e,t){var a={HUMAN:1,MACHINE:2,DEFAULT:3};e.exports=a},"./src/main/webapp/frontend/packages/enums/GettyError.js":function(e,t){var a={IMAGE_NOT_AVAILABLE:"This image is no longer available to license. Your card was not charged."};e.exports=a},"./src/main/webapp/frontend/packages/enums/GoogleAppsSubscriptionState.js":function(e,t){var a={PENDING:1,ACTIVE:2,PASTDUE:3,SUSPENDED:4,PROCESSING:5};e.exports=a},"./src/main/webapp/frontend/packages/enums/GoogleAppsSubscriptionStatus.js":function(e,t){var a={ACTIVE:1,PENDING:2,CANCELLED:3,SUSPENDED:4};e.exports=a},"./src/main/webapp/frontend/packages/enums/GraphicalStyles.js":function(e,t){var a={FINE_ART:"fine_art",ILLUSTRATION:"illustration",PHOTOGRAPHY:"photography"};e.exports=a},"./src/main/webapp/frontend/packages/enums/GroupSizes.js":function(e,t){var a={NONE:"none",ONE:"one",TWO:"two",GROUP:"group"};e.exports=a},"./src/main/webapp/frontend/packages/enums/ImportingSources.js":function(e,t){var a={V5:1,WORDPRESS:2,TUMBLR:3,BLOGGER:5,ETSY:7,SHOPIFY:8,BIG_CARTEL:9};e.exports=a},"./src/main/webapp/frontend/packages/enums/IndexType.js":function(e,t){var a={STACKED:"stacked",GRID:"grid",FULL_URL:"full-url"};e.exports=a},"./src/main/webapp/frontend/packages/enums/InvoiceProvider.js":function(e,t){var a={STRIPE:1,ZUORA:2,BILLING_SERVICE:3,BILLING_SERVICE_DEBT:4};e.exports=a},"./src/main/webapp/frontend/packages/enums/ItemCatalogCategory.js":function(e,t){var a={PROJECTS:"PROJECTS"};e.exports=a},"./src/main/webapp/frontend/packages/enums/LinkStatusType.js":function(e,t){var a={MAPPING:1,VERIFICATION:2};e.exports=a},"./src/main/webapp/frontend/packages/enums/MarketingCouponExpirationTypes.js":function(e,t){var a={TIME:1,USES:2,TIME_AND_USES:3};e.exports=a},"./src/main/webapp/frontend/packages/enums/MemberAccountRole.js":function(e,t){var a={SUPERADMIN:1,BILLING:2,SUPPORT:3,DEV:4,MARKETING:5,SUPPORT_SUPERVISOR:6,INTERNAL_REPORTING:7,EXTERNAL_BETA_ACCESS:8,ADVISOR_BILLING:9,TRUST_AND_SAFETY:10,SQSP_PUBLIC_IMPERSONATION:11,CAMPAIGNS_EMAIL_REVIEWER:12,ENTERPRISE_ADMIN:13,FRAUD_DETECTION_REVIEWER:14,INTERNAL_CAMPAIGNS_SENDER:15,SITEL_USER:16};e.exports=a},"./src/main/webapp/frontend/packages/enums/MemberAccountStatus.js":function(e,t){var a={ACTIVE:"ACTIVE",SUSPENDED:"SUSPENDED",TERMINATED:"TERMINATED"};e.exports=a},"./src/main/webapp/frontend/packages/enums/MobileInfoBarStyle.js":function(e,t){var a={NONE:1,LIGHT:2,DARK:3};e.exports=a},"./src/main/webapp/frontend/packages/enums/OrderEventType.js":function(e,t){var a={STATE_CHANGE:1,PAYMENT_STATE_CHANGE:2,ORDER_CANCELED:3,PAYMENT_REFUND:4,ORDER_MARKED_PENDING:5,ORDER_FULFILLED:6};e.exports=a},"./src/main/webapp/frontend/packages/enums/OrderFulfillmentStates.js":function(e,t){var a={PENDING:"PENDING",COMPLETED:"COMPLETED",CANCELLED:"CANCELLED"};e.exports=a},"./src/main/webapp/frontend/packages/enums/OrderPaymentStates.js":function(e,t){var a={NOT_CHARGED:1,AUTHORIZED:2,PAID:3,REFUNDED:4};e.exports=a},"./src/main/webapp/frontend/packages/enums/OrderStates.js":function(e,t){var a={PENDING:1,FULFILLED:2,REFUNDED:3,CANCELLED:4};e.exports=a},"./src/main/webapp/frontend/packages/enums/OverlayAction.js":function(e,t){var a={DISPLAY:1,CLOSE:2,DISMISS:3};e.exports=a},"./src/main/webapp/frontend/packages/enums/OverlayTrigger.js":function(e,t){var a={TIME:1,SCROLL:2};e.exports=a},"./src/main/webapp/frontend/packages/enums/PageFeatures.js":function(e,t){var a={EDITABLE:1,TWEAKABLE:2,FULL_PAGE_CART:3,OVERLAYS:4,ECOMMERCE_GOOGLE_ANALYTICS_TRACKED:5};e.exports=a},"./src/main/webapp/frontend/packages/enums/PayPalCheckoutErrorTypes.js":function(e,t){var a={CREATE_CHECKOUT_ERROR_GENERIC:"create-checkout-error-generic",CREATE_CHECKOUT_ERROR_ADDRESS_MISSING_STATE:"create-checkout-shipping-address-missing-state",CREATE_CHECKOUT_ERROR_ADDRESS_MISSING_POSTAL_CODE:"create-checkout-shipping-address-missing-postal-code",CREATE_CHECKOUT_ERROR_ADDRESS_MISSING_CITY:"create-checkout-shipping-address-missing-city",CREATE_CHECKOUT_ERROR_ADDRESS_MISSING_COUNTRY:"create-checkout-shipping-address-missing-country",CREATE_CHECKOUT_ERROR_ADDRESS_INVALID:"create-checkout-shipping-address-invalid",GET_CHECKOUT_ERROR:"get-checkout-error",BUILD_REDIRECT_URL_ERROR:"build-redirect-url-error",PAYPAL_NOT_AVAILABLE_ERROR:"paypal-not-available-error",DISCONNECTED_ACCOUNT:"disconnect-account",CHECKOUT_AMOUNT_ZERO:"checkout-amount-zero"};e.exports=a},"./src/main/webapp/frontend/packages/enums/PaymentSettingsErrorType.js":function(e,t){var a={PAYMENT_PROVIDER_NOT_SUPPORTED:"payment-provider-not-supported",CURRENCY_REQUIRED:"currency-required",COULD_NOT_REVOKE_ACCESS_TOKEN:"could-not-revoke-access-token",COUNTRY_NOT_SUPPORTED:"country-not-supported",INVALID_TOKEN:"invalid-token",UNKNOWN:"unknown",CURRENCY_NOT_SUPPORTED:"currency-not-supported",COULD_NOT_CHANGE_CURRENCY:"could-not-change-currency"};e.exports=a},"./src/main/webapp/frontend/packages/enums/PlanViolationErrors.js":function(e,t){var a={PAGE_LIMIT_EXCEEDED:1,STORAGE_LIMIT_EXCEEDED:2};e.exports=a},"./src/main/webapp/frontend/packages/enums/PopupOverlayStyle.js":function(e,t){var a={NONE:1,SHOW:2};e.exports=a},"./src/main/webapp/frontend/packages/enums/PriceTaxInterpretations.js":function(e,t){var a={TAX_INCLUSIVE:"TAX_INCLUSIVE",TAX_EXCLUSIVE:"TAX_EXCLUSIVE"};e.exports=a},"./src/main/webapp/frontend/packages/enums/ReferralMatchType.js":function(e,t){var a={WEBSITE:1,EMAIL_ADDRESS:2,FACEBOOK:3,TWITTER:4,LINKEDIN:5,FACEBOOK_ID:6};e.exports=a},"./src/main/webapp/frontend/packages/enums/ReferralSearchResultStatus.js":function(e,t){var a={NO_MATCH:0,SINGLE_MATCH:1,MULTI_MATCH:2};e.exports=a},"./src/main/webapp/frontend/packages/enums/ReferralSource.js":function(e,t){var a={GOOGLE:1};e.exports=a},"./src/main/webapp/frontend/packages/enums/ReferralState.js":function(e,t){var a={AWAITING_MATCH:"AWAITING_MATCH",APPLIED_TO_REFEREE:"APPLIED_TO_REFEREE",APPLIED_TO_BOTH:"APPLIED_TO_BOTH",REMOVED:"REMOVED"};e.exports=a},"./src/main/webapp/frontend/packages/enums/SSBadgeDevices.js":function(e,t){var a={ALL:1,DESKTOP_ONLY:2};e.exports=a},"./src/main/webapp/frontend/packages/enums/SSBadgePosition.js":function(e,t){var a={TOP_LEFT:1,TOP_CENTER:2,TOP_RIGHT:3,BOTTOM_LEFT:4,BOTTOM_CENTER:5,BOTTOM_RIGHT:6};e.exports=a},"./src/main/webapp/frontend/packages/enums/SSBadgeType.js":function(e,t){var a={NONE:1,BLACK:2,WHITE:3};e.exports=a},"./src/main/webapp/frontend/packages/enums/SSBadgeVisibility.js":function(e,t){var a={ALWAYS:1,SCROLL:2};e.exports=a},"./src/main/webapp/frontend/packages/enums/SchedulingPageGroup.js":function(e,t){var a={ALL:"all",CALENDARS:"calendars",CATEGORIES:"categories",CLASSES:"classes",APPOINTMENT_TYPES:"appointment_types",CUSTOM:"custom"};e.exports=a},"./src/main/webapp/frontend/packages/enums/ShippingRateTypes.js":function(e,t){var a={OTHER:0,FLAT:1,WEIGHT_RANGE:3,USPS:6,UPS:7,FEDEX:8};e.exports=a},"./src/main/webapp/frontend/packages/enums/SlideLayoutCategory.js":function(e,t){var a={LANDING:1,PROFILE:2,AUDIO:3,VIDEO:4,LOCATION:5,LOCK:6,TWITTER:7,OVERLAY_NEWSLETTER:8,OVERLAY_PROMOTION:9};e.exports=a},"./src/main/webapp/frontend/packages/enums/SlideLayoutStatus.js":function(e,t){var a={ALPHA:1,BETA:2,RELEASED:3};e.exports=a},"./src/main/webapp/frontend/packages/enums/SocialIconAlignments.js":function(e,t){var a={LEFT:"left",RIGHT:"right",CENTER:"center"};e.exports=a},"./src/main/webapp/frontend/packages/enums/SocialIconColors.js":function(e,t){var a={BLACK:"black",WHITE:"white",STANDARD:"standard"};e.exports=a},"./src/main/webapp/frontend/packages/enums/SocialIconSizes.js":function(e,t){var a={XSMALL:"extra-small",SMALL:"small",DEFAULT:"default",LARGE:"large",XLARGE:"extra-large"};e.exports=a},"./src/main/webapp/frontend/packages/enums/SocialIconStyles.js":function(e,t){var a={ICON_ONLY:"icon-only",ROUND:"round",ROUND_BORDER:"round-border",ROUND_SOLID:"round-solid",REAL_SQUARE:"real-square",REAL_SQUARE_BORDER:"real-square-border",REAL_SQUARE_SOLID:"real-square-solid",SQUARE:"square",SQUARE_BORDER:"square-border",SQUARE_SOLID:"square-solid"};e.exports=a},"./src/main/webapp/frontend/packages/enums/SocialSearchReferenceType.js":function(e,t){var a={PAGE:1,BLOG_POST:2,TEMPLATE_INSTALLATION:3,SLIDE:4};e.exports=a},"./src/main/webapp/frontend/packages/enums/SocialSearchStatus.js":function(e,t){var a={UNDEFINED:1,PREVIEW:2,BLOCK_SAVED:3,BLOCK_REMOVED:4,SAVED:5,REMOVED:6};e.exports=a},"./src/main/webapp/frontend/packages/enums/StoreStates.js":function(e,t){var a={LIVE:1,TEST_MODE:2,NOT_CONNECTED:3};e.exports=a},"./src/main/webapp/frontend/packages/enums/SubscriptionEventRecordTypes.js":function(e,t){var a={PURCHASE:"PURCHASE",CANCEL:"CANCEL",MOVE:"MOVE",RESUBSCRIBE:"RESUBSCRIBE",UPDATE:"UPDATE",RENEW:"RENEW",ADMIN_RETROACTIVE_REFUND:"ADMIN_RETROACTIVE_REFUND"};e.exports=a},"./src/main/webapp/frontend/packages/enums/SuspensionState.js":function(e,t){var a={HIDDEN:1,QUARANTINED:2};e.exports=a},"./src/main/webapp/frontend/packages/enums/SystemBlogCollectionPostDisplay.js":function(e,t){var a={FULL:"full",EXCERPT:"excerpt"};e.exports=a},"./src/main/webapp/frontend/packages/enums/SystemWebsiteSubjects.js":function(e,t){var a={FAITH:"faith",FASHION:"fashion",FINE_ART:"fine_art",FITNESS:"fitness",FOOD:"food",GRAPHIC_DESIGN:"design",HEALTH_CARE:"health",MUSIC:"music",PHOTOGRAPHY:"photo",TECHNOLOGY:"tech",VIDEOGRAPHY:"video",WEDDING_COUPLE:"wedding_couple",WEDDING_SERVICES:"wedding_services",OTHER:"other"};e.exports=a},"./src/main/webapp/frontend/packages/enums/TaxCategoryTypes.js":function(e,t){var a={CUSTOM:1,GENERAL:2,EXEMPT:10,CLOTHING:11,FOOD_GROCERIES:12,NON_PRESCRIPTION_DRUGS:13,PRESCRIPTION_DRUGS:14,DIGITAL_GOODS:15,SPECIAL_DIGITAL_PRODUCTS:16};e.exports=a},"./src/main/webapp/frontend/packages/enums/TaxScopes.js":function(e,t){var a={COUNTRY:1,STATE:2,LOCAL:3};e.exports=a},"./src/main/webapp/frontend/packages/enums/TemplateErrorType.js":function(e,t){var a={JSON_DESERIALIZE:1,JSON_PROPERTY_MAP:2,CSS_COMPILE:3,JSON_TEMPLATE:4,CSS_TWEAK_PARSE:5,LOCALIZE_STRING_PARSE:6,SECTION_DEFINITION:7};e.exports=a},"./src/main/webapp/frontend/packages/enums/TermTypes.js":function(e,t){var a={WEBSITE_TERMS_OF_SERVICE:1,PRIVACY_POLICY:2,DOMAIN_FIRST_TERMS_OF_SERVICE:3,IMAGE_TERMS_OF_SERVICE:4,TEMPLATES_LICENSE:5,LOGO_TERMS_OF_SERVICE:7,TRADEMARK_USAGE:8,COMBINED_TOS_AND_PRIVACY_POLICY:9};e.exports=a},"./src/main/webapp/frontend/packages/enums/WebsiteCompRecordType.js":function(e,t){var a={EMPLOYEE:1,PRESS:2,BRAND_PARTNER:3,EVENT_PARTNER:4,INFLUENCER:5,FACULTY:6,GIVEAWAY:7,BULK_INVOICE:8,RECRUITING_PARTNER:9,BRAND_MARKETING:10,ENTERPRISE_CONCIERGE:11,EXTENSION_DEVELOPER:12};e.exports=a},"./src/main/webapp/frontend/packages/enums/WebsiteContentCategory.js":function(e,t){var a={MUSIC:1,FOOD_DRINK:2,PORTFOLIO:3,PUBLISHING_CONTENT:4,WEDDING:5,PROFESSIONAL_SERVICES:6,BUSINESS:7,OTHER:8,CLASSES_SERVICES:9,JEWELRY_ACCESSORIES:10,FASHION_APPAREL:11,HOME_DECOR:12,HEALTH_BEAUTY:13,BOOKS:14,ART_PHOTOGRAPHY:15,TICKETS:16,ELECTRONICS:17,TOYS_GAMES:18,MUSIC_VIDEOS_CONTENT:19,SPORTS_OUTDOORS:20,PAPER_GOODS:21,AUTOMOTIVE:22};e.exports=a},"./src/main/webapp/frontend/packages/enums/WebsiteContentSubcategory.js":function(e,t){var a={MUSICIAN:1,RECORD_LABEL:2,BAND:3,VENUE:4,EVENT:5,RESTAURANT:6,BAR:7,CAFE_BAKERY:8,GOODS:9,PHOTOGRAPHER:10,ARTIST:11,CREATIVE_AGENCY:12,ARCHITECT:13,INTERIOR_DESIGNER:14,PODCAST:15,MAGAZINE:16,BLOG:17,BOOK:18,PERSONAL_WEDDING:19,WEDDING_PROFESSIONAL:20,WEDDING_VENDOR:21,LAWYER:22,CONSULTANT:23,ARCHITECTURE:24,HEALTHCARE:25,MARKETING:26,TECHNOLOGY:27,DESIGN:28,REAL_ESTATE:29,CORPORATE:30,HOME_LIVING:31,FASHION:32,HEALTH_BEAUTY:33,ART_PHOTOGRAPHY:34};e.exports=a},"./src/main/webapp/frontend/packages/enums/WebsiteDisambiguationType.js":function(e,t){var a={DEFAULT:1,DOMAIN_FIRST:2,GOOGLE_DOMAINS:3,DOMAIN_TRANSFER:4};e.exports=a},"./src/main/webapp/frontend/packages/enums/WebsiteGoal.js":function(e,t){var a={PORTFOLIO:1,EMPLOYMENT:2,ONLINE_SALES:3,BUSINESS_PROMOTION:4,ANNOUNCEMENT:5,COLLECT_INFO:6,CAPTURE_IDEAS:7,OTHER:8};e.exports=a},"./src/main/webapp/frontend/packages/enums/WebsiteTaxonomyFilterFlag.js":function(e,t){var a={IN_DIRECTORY:1,FEATURED:2,INCLUDE_IN_LOGO_WALL:3,NOTABLE:4,IN_STORE:5,INVALIDATED_ENTRIES:6,MISSING_THUMBNAIL:7,COVER_PAGE:8};e.exports=a},"./src/main/webapp/templates-v6/handlebars/announcement-bar.html":function(e,t){YUI.add("squarespace-announcement-bar-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["announcement-bar.html"]=e(function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);i=i||{};var s="",r,o,l=this,c="function",u=this.escapeExpression;function d(e,t){var a="",i,s;a+='\n<a\n  class="sqs-announcement-bar-url"\n  ';s=n["if"].call(e,(i=e.clickthroughUrl,null==i||false===i?i:i.newWindow),{hash:{},inverse:l.noop,fn:l.program(2,p,t),data:t});(s||0===s)&&(a+=s);a+='\n  href="'+u((i=(i=e.clickthroughUrl,null==i||false===i?i:i.url),typeof i===c?i.apply(e):i))+'"\n  \n  aria-labelledby="announcement-bar-text-inner-id"\n></a>\n';return a}function p(e,t){return'target="_blank"'}o=n["if"].call(t,(r=t.clickthroughUrl,null==r||false===r?r:r.url),{hash:{},inverse:l.noop,fn:l.program(1,d,i),data:i});(o||0===o)&&(s+=o);s+='\n\n<div class="sqs-announcement-bar-text">\n  <span\n    class="sqs-announcement-bar-close"\n    tabindex="0"\n    role="button"\n    aria-label="';if(o=n.closeButtonLabel)o=o.call(t,{hash:{},data:i});else{o=t.closeButtonLabel;o=typeof o===c?o.apply(t):o}s+=u(o)+'"></span>\n  <div\n    \n    id="announcement-bar-text-inner-id"\n    class="sqs-announcement-bar-text-inner"\n  >\n    ';if(o=n.text)o=o.call(t,{hash:{},data:i});else{o=t.text;o=typeof o===c?o.apply(t):o}(o||0===o)&&(s+=o);s+="\n  </div>\n</div>\n";return s})})();var t="announcement-bar.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},"./src/main/webapp/templates-v6/handlebars/block-audio-player.html":function(e,t){YUI.add("squarespace-block-audio-player-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["block-audio-player.html"]=e(function(e,t,a,i,s){this.compilerInfo=[4,">= 1.0.0"];a=this.merge(a,e.helpers);s=s||{};var n="",r,o="function",l=this.escapeExpression;n+='<div class="player">\n  <div\n    class="action"\n    tabindex="0"\n  >\n    <div class="play">\n      <div class="play-button"></div>\n    </div>\n    <div class="pause">\n      <div class="pause-button"></div>\n    </div>\n  </div>\n  <div class="track">\n    <span class="played"><span class="icon"></span></span>\n  </div>\n  <div class="labels">\n    <div class="title-wrapper">\n      <div class="title" title="';if(r=a.title)r=r.call(t,{hash:{},data:s});else{r=t.title;r=typeof r===o?r.apply(t):r}n+=l(r)+'" data-title="';if(r=a.title)r=r.call(t,{hash:{},data:s});else{r=t.title;r=typeof r===o?r.apply(t):r}n+=l(r)+'">';if(r=a.title)r=r.call(t,{hash:{},data:s});else{r=t.title;r=typeof r===o?r.apply(t):r}n+=l(r)+'</div>\n    </div>\n    <div class="artistName" title="';if(r=a.artistName)r=r.call(t,{hash:{},data:s});else{r=t.artistName;r=typeof r===o?r.apply(t):r}n+=l(r)+'">';if(r=a.artistName)r=r.call(t,{hash:{},data:s});else{r=t.artistName;r=typeof r===o?r.apply(t):r}n+=l(r)+'</div>\n  </div>\n  <div class="secondary-controls">\n    <div class="time">\n      <span class="progress"></span>\n      <span class="total">';if(r=a.duration)r=r.call(t,{hash:{},data:s});else{r=t.duration;r=typeof r===o?r.apply(t):r}n+=l(r)+"</span>\n    </div>\n  </div>\n</div>\n";return n})})();var t="block-audio-player.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},"./src/main/webapp/templates-v6/handlebars/business-hours.html":function(e,t){YUI.add("squarespace-business-hours-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["business-hours.html"]=e(function(e,t,a,i,s){this.compilerInfo=[4,">= 1.0.0"];a=this.merge(a,e.helpers);s=s||{};var n="",r,o,l,c="function",u=this,d=a.helperMissing,p=this.escapeExpression;function h(e,t){var a="",i,s;a+="\n    ";s=(i=(i=(i=e.strings,null==i||false===i?i:i.store),null==i||false===i?i:i.open),typeof i===c?i.apply(e):i);(s||0===s)&&(a+=s);a+="\n  ";return a}function g(e,t){var a="",i,s;a+="\n    ";s=(i=(i=(i=e.strings,null==i||false===i?i:i.store),null==i||false===i?i:i.closed),typeof i===c?i.apply(e):i);(s||0===s)&&(a+=s);a+="\n  ";return a}n+='\n<div class="sqs-business-hours-store">\n  ';l={hash:{},inverse:u.program(3,g,s),fn:u.program(1,h,s),data:s};o=(r=a.isStoreOpen||t.isStoreOpen,r?r.call(t,t.businessHours,l):d.call(t,"isStoreOpen",t.businessHours,l));(o||0===o)&&(n+=o);n+='\n</div>\n\n<div class="sqs-business-hours-day">\n  <div class="sqs-business-hours-day-label">'+p((r=(r=(r=t.strings,null==r||false===r?r:r.daysAbbreviated),null==r||false===r?r:r.monday),typeof r===c?r.apply(t):r))+'</div>\n  <div class="sqs-business-hours-day-hours">\n    ';l={hash:{},data:s};n+=p((r=a.dailyHours||t.dailyHours,r?r.call(t,(r=t.businessHours,null==r||false===r?r:r.monday),l):d.call(t,"dailyHours",(r=t.businessHours,null==r||false===r?r:r.monday),l)))+'\n  </div>\n</div>\n\n<div class="sqs-business-hours-day">\n  <div class="sqs-business-hours-day-label">'+p((r=(r=(r=t.strings,null==r||false===r?r:r.daysAbbreviated),null==r||false===r?r:r.tuesday),typeof r===c?r.apply(t):r))+'</div>\n  <div class="sqs-business-hours-day-hours">\n    ';l={hash:{},data:s};n+=p((r=a.dailyHours||t.dailyHours,r?r.call(t,(r=t.businessHours,null==r||false===r?r:r.tuesday),l):d.call(t,"dailyHours",(r=t.businessHours,null==r||false===r?r:r.tuesday),l)))+'\n  </div>\n</div>\n\n<div class="sqs-business-hours-day">\n  <div class="sqs-business-hours-day-label">'+p((r=(r=(r=t.strings,null==r||false===r?r:r.daysAbbreviated),null==r||false===r?r:r.wednesday),typeof r===c?r.apply(t):r))+'</div>\n  <div class="sqs-business-hours-day-hours">\n    ';l={hash:{},data:s};n+=p((r=a.dailyHours||t.dailyHours,r?r.call(t,(r=t.businessHours,null==r||false===r?r:r.wednesday),l):d.call(t,"dailyHours",(r=t.businessHours,null==r||false===r?r:r.wednesday),l)))+'\n  </div>\n</div>\n\n<div class="sqs-business-hours-day">\n  <div class="sqs-business-hours-day-label">'+p((r=(r=(r=t.strings,null==r||false===r?r:r.daysAbbreviated),null==r||false===r?r:r.thursday),typeof r===c?r.apply(t):r))+'</div>\n  <div class="sqs-business-hours-day-hours">\n    ';l={hash:{},data:s};n+=p((r=a.dailyHours||t.dailyHours,r?r.call(t,(r=t.businessHours,null==r||false===r?r:r.thursday),l):d.call(t,"dailyHours",(r=t.businessHours,null==r||false===r?r:r.thursday),l)))+'\n  </div>\n</div>\n\n<div class="sqs-business-hours-day">\n  <div class="sqs-business-hours-day-label">'+p((r=(r=(r=t.strings,null==r||false===r?r:r.daysAbbreviated),null==r||false===r?r:r.friday),typeof r===c?r.apply(t):r))+'</div>\n  <div class="sqs-business-hours-day-hours">\n    ';l={hash:{},data:s};n+=p((r=a.dailyHours||t.dailyHours,r?r.call(t,(r=t.businessHours,null==r||false===r?r:r.friday),l):d.call(t,"dailyHours",(r=t.businessHours,null==r||false===r?r:r.friday),l)))+'\n  </div>\n</div>\n\n<div class="sqs-business-hours-day">\n  <div class="sqs-business-hours-day-label">'+p((r=(r=(r=t.strings,null==r||false===r?r:r.daysAbbreviated),null==r||false===r?r:r.saturday),typeof r===c?r.apply(t):r))+'</div>\n  <div class="sqs-business-hours-day-hours">\n    ';l={hash:{},data:s};n+=p((r=a.dailyHours||t.dailyHours,r?r.call(t,(r=t.businessHours,null==r||false===r?r:r.saturday),l):d.call(t,"dailyHours",(r=t.businessHours,null==r||false===r?r:r.saturday),l)))+'\n  </div>\n</div>\n\n<div class="sqs-business-hours-day">\n  <div class="sqs-business-hours-day-label">'+p((r=(r=(r=t.strings,null==r||false===r?r:r.daysAbbreviated),null==r||false===r?r:r.sunday),typeof r===c?r.apply(t):r))+'</div>\n  <div class="sqs-business-hours-day-hours">\n    ';l={hash:{},data:s};n+=p((r=a.dailyHours||t.dailyHours,r?r.call(t,(r=t.businessHours,null==r||false===r?r:r.sunday),l):d.call(t,"dailyHours",(r=t.businessHours,null==r||false===r?r:r.sunday),l)))+"\n  </div>\n</div>\n";return n})})();var t="business-hours.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},"./src/main/webapp/templates-v6/handlebars/calendar-day.html":function(e,t){YUI.add("squarespace-calendar-day-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["calendar-day.html"]=e(function(e,t,r,a,i){this.compilerInfo=[4,">= 1.0.0"];r=this.merge(r,e.helpers);i=i||{};var s="",n,o,l,c=this,u="function",d=this.escapeExpression,p=r.helperMissing,h=r.blockHelperMissing;function g(e,t){var a="",i,s;a+="\n\t";s=r["if"].call(e,(i=(i=e.events,null==i||false===i?i:i[1]),null==i||false===i?i:i.title),{hash:{},inverse:c.program(4,f,t),fn:c.program(2,m,t),data:t});(s||0===s)&&(a+=s);a+="\n";return a}function m(e,t){var a="";return a}function f(e,t){var a="",i,s;a+='\n\t<div class="background';s=r["if"].call(e,(i=(i=(i=e.events,null==i||false===i?i:i[0]),null==i||false===i?i:i.structuredContent),null==i||false===i?i:i.startDate),{hash:{},inverse:c.noop,fn:c.program(5,v,t),data:t});(s||0===s)&&(a+=s);a+='">\n    <a href="'+d((i=(i=(i=e.events,null==i||false===i?i:i[0]),null==i||false===i?i:i.fullUrl),typeof i===u?i.apply(e):i))+'" class="background-image-link">\n      <img\n        alt="'+d((i=(i=(i=e.events,null==i||false===i?i:i[0]),null==i||false===i?i:i.title),typeof i===u?i.apply(e):i))+'"\n        data-src="'+d((i=(i=(i=e.events,null==i||false===i?i:i[0]),null==i||false===i?i:i.assetUrl),typeof i===u?i.apply(e):i))+'"\n        data-image-dimensions="'+d((i=(i=(i=e.events,null==i||false===i?i:i[0]),null==i||false===i?i:i.originalSize),typeof i===u?i.apply(e):i))+'"\n        data-load="false"\n        class="background-image"\n      >\n    </a>\n\t</div>\n\t';return a}function v(e,t){return" background--iseventscollection"}function b(e,t){var a="",i,s,n;a+='\n<ul class="itemlist';s=r["if"].call(e,(i=(i=(i=e.events,null==i||false===i?i:i[0]),null==i||false===i?i:i.structuredContent),null==i||false===i?i:i.startDate),{hash:{},inverse:c.noop,fn:c.program(8,S,t),data:t});(s||0===s)&&(a+=s);a+='">\n\t';n={hash:{},inverse:c.noop,fn:c.program(10,y,t),data:t};if(s=r.events)s=s.call(e,n);else{s=e.events;s=typeof s===u?s.apply(e):s}r.events||(s=h.call(e,s,n));(s||0===s)&&(a+=s);a+='\n</ul>\n\n<ul class="\n\tflyoutitemlist\n\t';s=r["if"].call(e,(i=(i=(i=e.events,null==i||false===i?i:i[0]),null==i||false===i?i:i.structuredContent),null==i||false===i?i:i.startDate),{hash:{},inverse:c.noop,fn:c.program(17,w,t),data:t});(s||0===s)&&(a+=s);a+="\n\t";s=r["if"].call(e,(i=(i=e.events,null==i||false===i?i:i[1]),null==i||false===i?i:i.title),{hash:{},inverse:c.program(21,T,t),fn:c.program(19,A,t),data:t});(s||0===s)&&(a+=s);a+='\n">\n\t';n={hash:{},inverse:c.noop,fn:c.program(28,D,t),data:t};if(s=r.events)s=s.call(e,n);else{s=e.events;s=typeof s===u?s.apply(e):s}r.events||(s=h.call(e,s,n));(s||0===s)&&(a+=s);a+='\n</ul>\n\n<div class="itemcount">'+d((i=(i=e.events,null==i||false===i?i:i.length),typeof i===u?i.apply(e):i))+"</div>\n";return a}function S(e,t){return" itemlist--iseventscollection"}function y(e,t){var a="",i,s,n;a+='\n\t<li class="item';i=r["if"].call(e,e.isMultiday,{hash:{},inverse:c.noop,fn:c.program(11,_,t),data:t});(i||0===i)&&(a+=i);i=r["if"].call(e,e.isSubsequentDayOfMultidayEvent,{hash:{},inverse:c.noop,fn:c.program(13,C,t),data:t});(i||0===i)&&(a+=i);a+='">\n\t\t<a href="';if(i=r.fullUrl)i=i.call(e,{hash:{},data:t});else{i=e.fullUrl;i=typeof i===u?i.apply(e):i}a+=d(i)+'" class="item-link">\n\t\t\t<span class="item-time item-time--12hr">';n={hash:{},data:t};a+=d((i=r["calendar-compact-time-format"]||e["calendar-compact-time-format"],i?i.call(e,(i=e.structuredContent,null==i||false===i?i:i.startDate),n):p.call(e,"calendar-compact-time-format",(i=e.structuredContent,null==i||false===i?i:i.startDate),n)))+'&nbsp;</span>\n\t\t\t<span class="item-time item-time--24hr">';n={hash:{format:"H:mm"},data:t};a+=d((i=r["date-format"]||e["date-format"],i?i.call(e,(i=e.structuredContent,null==i||false===i?i:i.startDate),n):p.call(e,"date-format",(i=e.structuredContent,null==i||false===i?i:i.startDate),n)))+'&nbsp;</span>\n\t\t\t<span class="item-title">';if(s=r.title)s=s.call(e,{hash:{},data:t});else{s=e.title;s=typeof s===u?s.apply(e):s}(s||0===s)&&(a+=s);a+="</span>\n\t\t\t";s=r["if"].call(e,e.isMultiday,{hash:{},inverse:c.noop,fn:c.program(15,E,t),data:t});(s||0===s)&&(a+=s);a+="\n\t\t</a>\n\t</li>\n\t";return a}function _(e,t){return" item--multiday"}function C(e,t){return" item--ongoing"}function E(e,t){var a="",i,s;a+='<span class="item-enddate">&nbsp;';s={hash:{format:"ll"},data:t};a+=d((i=r["date-format"]||e["date-format"],i?i.call(e,(i=e.structuredContent,null==i||false===i?i:i.endDate),s):p.call(e,"date-format",(i=e.structuredContent,null==i||false===i?i:i.endDate),s)))+"</span>";return a}function w(e,t){return" flyoutitemlist--iseventscollection"}function A(e,t){return"\n\t\tflyoutitemlist--hasmorecontent\n\t"}function T(e,t){var a="",i,s;a+="\n\t\t";s={hash:{},inverse:c.noop,fn:c.program(22,I,t),data:t};if(i=r.events)i=i.call(e,s);else{i=e.events;i=typeof i===u?i.apply(e):i}r.events||(i=h.call(e,i,s));(i||0===i)&&(a+=i);a+="\n\t";return a}function I(e,t){var a="",i;a+="\n\t\t\t";i=r["if"].call(e,e.excerpt,{hash:{},inverse:c.program(25,k,t),fn:c.program(23,q,t),data:t});(i||0===i)&&(a+=i);a+="\n\t\t";return a}function q(e,t){return"\n\t\t\t\tflyoutitemlist--hasmorecontent\n\t\t\t"}function k(e,t){var a="",i,s;a+="\n\t\t\t\t";s=r["if"].call(e,(i=e.location,null==i||false===i?i:i.addressLine1),{hash:{},inverse:c.noop,fn:c.program(26,L,t),data:t});(s||0===s)&&(a+=s);a+="\n\t\t\t";return a}function L(e,t){return"\n\t\t\t\t\tflyoutitemlist--hasmorecontent\n\t\t\t\t"}function D(e,t){var a="",i,s;a+='\n\t<li class="flyoutitem';i=r["if"].call(e,e.isMultiday,{hash:{},inverse:c.noop,fn:c.program(29,N,t),data:t});(i||0===i)&&(a+=i);i=r["if"].call(e,e.isSubsequentDayOfMultidayEvent,{hash:{},inverse:c.noop,fn:c.program(31,R,t),data:t});(i||0===i)&&(a+=i);a+='">\n\t\t<h1 class="flyoutitem-title"><a href="';if(i=r.fullUrl)i=i.call(e,{hash:{},data:t});else{i=e.fullUrl;i=typeof i===u?i.apply(e):i}a+=d(i)+'" class="flyoutitem-link">';if(i=r.title)i=i.call(e,{hash:{},data:t});else{i=e.title;i=typeof i===u?i.apply(e):i}(i||0===i)&&(a+=i);i=r["if"].call(e,e.isMultiday,{hash:{},inverse:c.noop,fn:c.program(33,O,t),data:t});(i||0===i)&&(a+=i);a+='&nbsp;<span class="flyoutitem-link-arrow"></span></a></h1>\n\t\t<div class="flyoutitem-datetime flyoutitem-datetime--12hr">\n\t\t\t';i=r["if"].call(e,e.isMultiday,{hash:{},inverse:c.program(37,x,t),fn:c.program(35,P,t),data:t});(i||0===i)&&(a+=i);a+='\n\t\t</div>\n\t\t<div class="flyoutitem-datetime flyoutitem-datetime--24hr">\n\t\t\t';i=r["if"].call(e,e.isMultiday,{hash:{},inverse:c.program(41,M,t),fn:c.program(39,B,t),data:t});(i||0===i)&&(a+=i);a+='\n\t\t</div>\n\t\t<div class="flyoutitem-location">\n\t\t\t';s=r["if"].call(e,(i=e.location,null==i||false===i?i:i.addressTitle),{hash:{},inverse:c.noop,fn:c.program(43,F,t),data:t});(s||0===s)&&(a+=s);a+="\n\t\t\t";s=r["if"].call(e,(i=e.location,null==i||false===i?i:i.addressLine1),{hash:{},inverse:c.noop,fn:c.program(45,j,t),data:t});(s||0===s)&&(a+=s);a+="\n\t\t\t";s=r["if"].call(e,(i=e.location,null==i||false===i?i:i.addressLine2),{hash:{},inverse:c.noop,fn:c.program(47,U,t),data:t});(s||0===s)&&(a+=s);a+="\n\t\t\t";s=r["if"].call(e,(i=e.location,null==i||false===i?i:i.addressCountry),{hash:{},inverse:c.noop,fn:c.program(49,V,t),data:t});(s||0===s)&&(a+=s);a+="\n\t\t</div>\n\t\t";s=r["if"].call(e,e.excerpt,{hash:{},inverse:c.noop,fn:c.program(51,H,t),data:t});(s||0===s)&&(a+=s);a+="\n\t</li>\n\t";return a}function N(e,t){return" flyoutitem--multiday"}function R(e,t){return" flyoutitem--ongoing"}function O(e,t){var a="",i,s;a+=' <span class="flyoutitem-enddate">';s={hash:{format:"ll"},data:t};a+=d((i=r["date-format"]||e["date-format"],i?i.call(e,(i=e.structuredContent,null==i||false===i?i:i.endDate),s):p.call(e,"date-format",(i=e.structuredContent,null==i||false===i?i:i.endDate),s)))+"</span>";return a}function P(e,t){var a="",i,s;a+="\n\t\t\t\t";s={hash:{format:"ddd, MMM D, h:mma"},data:t};a+=d((i=r["date-format"]||e["date-format"],i?i.call(e,(i=e.structuredContent,null==i||false===i?i:i.startDate),s):p.call(e,"date-format",(i=e.structuredContent,null==i||false===i?i:i.startDate),s)))+" &ndash; ";s={hash:{format:"ddd, MMM D, h:mma"},data:t};a+=d((i=r["date-format"]||e["date-format"],i?i.call(e,(i=e.structuredContent,null==i||false===i?i:i.endDate),s):p.call(e,"date-format",(i=e.structuredContent,null==i||false===i?i:i.endDate),s)))+"\n\t\t\t";return a}function x(e,t){var a="",i,s;a+="\n\t\t\t\t";s={hash:{format:"LT"},data:t};a+=d((i=r["date-format"]||e["date-format"],i?i.call(e,(i=e.structuredContent,null==i||false===i?i:i.startDate),s):p.call(e,"date-format",(i=e.structuredContent,null==i||false===i?i:i.startDate),s)))+" &ndash; ";s={hash:{format:"LT"},data:t};a+=d((i=r["date-format"]||e["date-format"],i?i.call(e,(i=e.structuredContent,null==i||false===i?i:i.endDate),s):p.call(e,"date-format",(i=e.structuredContent,null==i||false===i?i:i.endDate),s)))+"\n\t\t\t";return a}function B(e,t){var a="",i,s;a+="\n\t\t\t\t";s={hash:{format:"ddd, MMM D, H:mm"},data:t};a+=d((i=r["date-format"]||e["date-format"],i?i.call(e,(i=e.structuredContent,null==i||false===i?i:i.startDate),s):p.call(e,"date-format",(i=e.structuredContent,null==i||false===i?i:i.startDate),s)))+" &ndash; ";s={hash:{format:"ddd, MMM D, H:mm"},data:t};a+=d((i=r["date-format"]||e["date-format"],i?i.call(e,(i=e.structuredContent,null==i||false===i?i:i.endDate),s):p.call(e,"date-format",(i=e.structuredContent,null==i||false===i?i:i.endDate),s)))+"\n\t\t\t";return a}function M(e,t){var a="",i,s;a+="\n\t\t\t\t";s={hash:{format:"H:mm"},data:t};a+=d((i=r["date-format"]||e["date-format"],i?i.call(e,(i=e.structuredContent,null==i||false===i?i:i.startDate),s):p.call(e,"date-format",(i=e.structuredContent,null==i||false===i?i:i.startDate),s)))+" &ndash; ";s={hash:{format:"H:mm"},data:t};a+=d((i=r["date-format"]||e["date-format"],i?i.call(e,(i=e.structuredContent,null==i||false===i?i:i.endDate),s):p.call(e,"date-format",(i=e.structuredContent,null==i||false===i?i:i.endDate),s)))+"\n\t\t\t";return a}function F(e,t){var a="",i;a+='<div class="flyoutitem-location-addresstitle">'+d((i=(i=e.location,null==i||false===i?i:i.addressTitle),typeof i===u?i.apply(e):i))+"</div>";return a}function j(e,t){var a="",i;a+='<div class="flyoutitem-location-address1">'+d((i=(i=e.location,null==i||false===i?i:i.addressLine1),typeof i===u?i.apply(e):i))+"</div>";return a}function U(e,t){var a="",i;a+='<div class="flyoutitem-location-address2">'+d((i=(i=e.location,null==i||false===i?i:i.addressLine2),typeof i===u?i.apply(e):i))+"</div>";return a}function V(e,t){var a="",i;a+='<div class="flyoutitem-location-addresscountry">'+d((i=(i=e.location,null==i||false===i?i:i.addressCountry),typeof i===u?i.apply(e):i))+"</div>";return a}function H(e,t){var a="",i;a+='<div class="flyoutitem-excerpt">';if(i=r.excerpt)i=i.call(e,{hash:{},data:t});else{i=e.excerpt;i=typeof i===u?i.apply(e):i}(i||0===i)&&(a+=i);a+="</div>";return a}o=r["if"].call(t,(n=(n=t.events,null==n||false===n?n:n[0]),null==n||false===n?n:n.systemDataId),{hash:{},inverse:c.noop,fn:c.program(1,g,i),data:i});(o||0===o)&&(s+=o);s+='\n\n<div class="marker">\n\t<div class="marker-dayname">';l={hash:{format:"ddd"},data:i};s+=d((n=r["day-of-month-format"]||t["day-of-month-format"],n?n.call(t,t.date,l):p.call(t,"day-of-month-format",t.date,l)))+'</div>\n\t<div class="marker-daynum">';l={hash:{format:"D"},data:i};s+=d((n=r["day-of-month-format"]||t["day-of-month-format"],n?n.call(t,t.date,l):p.call(t,"day-of-month-format",t.date,l)))+"</div>\n</div>\n\n";o=r["if"].call(t,t.events,{hash:{},inverse:c.noop,fn:c.program(7,b,i),data:i});(o||0===o)&&(s+=o);s+="\n";return s})})();var t="calendar-day.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},"./src/main/webapp/templates-v6/handlebars/connected-account.html":function(e,t){YUI.add("squarespace-connected-account-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["connected-account.html"]=e(function(e,t,s,a,i){this.compilerInfo=[4,">= 1.0.0"];s=this.merge(s,e.helpers);i=i||{};var n="",r,o,l,c="function",u=this.escapeExpression,d=this,p=s.helperMissing;function h(e,t){var a="",i;a+='\n    <div class="icon">\n      <img src="';if(i=s.iconUrl)i=i.call(e,{hash:{},data:t});else{i=e.iconUrl;i=typeof i===c?i.apply(e):i}a+=u(i)+'" />\n    </div>\n  ';return a}function g(e,t){var a="",i;a+='\n    <div class="icon default ';if(i=s.serviceName)i=i.call(e,{hash:{},data:t});else{i=e.serviceName;i=typeof i===c?i.apply(e):i}a+=u(i)+'"></div>\n  ';return a}function m(e,t){return'\n    <div class="unauthorized-message">\n      <strong>Unauthorized</strong> &mdash; Remove or <a class="reauthenticate">reauthenticate</a> this account for continued usage.\n    </div>\n  '}n+='<div class="';if(r=s.serviceName)r=r.call(t,{hash:{},data:i});else{r=t.serviceName;r=typeof r===c?r.apply(t):r}n+=u(r)+'">\n  ';r=s["if"].call(t,t.iconUrl,{hash:{},inverse:d.program(3,g,i),fn:d.program(1,h,i),data:i});(r||0===r)&&(n+=r);n+='\n  <div class="names">\n    <div class="user">';l={hash:{},data:i};n+=u((r=s.screenNameForDisplay||t.screenNameForDisplay,r?r.call(t,t,l):p.call(t,"screenNameForDisplay",t,l)))+'</div>\n    <div class="service ';if(o=s.serviceName)o=o.call(t,{hash:{},data:i});else{o=t.serviceName;o=typeof o===c?o.apply(t):o}n+=u(o)+'">';l={hash:{},data:i};n+=u((r=s.serviceNameForDisplay||t.serviceNameForDisplay,r?r.call(t,t,l):p.call(t,"serviceNameForDisplay",t,l)))+"</div>\n  </div>\n  ";o=s["if"].call(t,t.unauthorized,{hash:{},inverse:d.noop,fn:d.program(5,m,i),data:i});(o||0===o)&&(n+=o);n+="\n</div>";return n})})();var t="connected-account.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},"./src/main/webapp/templates-v6/handlebars/dialog-check.html":function(e,t){YUI.add("squarespace-dialog-check-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["dialog-check.html"]=e(function(e,t,a,i,s){this.compilerInfo=[4,">= 1.0.0"];a=this.merge(a,e.helpers);s=s||{};var n="",r,o,l="function",c=this.escapeExpression,u=this;function d(e,t){return"active"}function p(e,t){var a="",i;a+='\n    <div class="title">'+c((i=(i=e.strings,null==i||false===i?i:i.title),typeof i===l?i.apply(e):i))+"</div>\n  ";return a}function h(e,t){var a="",i,s;a+='\n    <div class="description">';s=(i=(i=e.strings,null==i||false===i?i:i.description),typeof i===l?i.apply(e):i);(s||0===s)&&(a+=s);a+="</div>\n  ";return a}n+='<div class="check-element ';r=a["if"].call(t,t.data,{hash:{},inverse:u.noop,fn:u.program(1,d,s),data:s});(r||0===r)&&(n+=r);n+='">\n  ';o=a["if"].call(t,(r=t.strings,null==r||false===r?r:r.title),{hash:{},inverse:u.noop,fn:u.program(3,p,s),data:s});(o||0===o)&&(n+=o);n+="\n  ";o=a["if"].call(t,(r=t.strings,null==r||false===r?r:r.description),{hash:{},inverse:u.noop,fn:u.program(5,h,s),data:s});(o||0===o)&&(n+=o);n+="\n</div>\n";return n})})();var t="dialog-check.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},"./src/main/webapp/templates-v6/handlebars/dialog-content-selector.html":function(e,t){YUI.add("squarespace-dialog-content-selector-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["dialog-content-selector.html"]=e(function(e,t,r,a,i){this.compilerInfo=[4,">= 1.0.0"];r=this.merge(r,e.helpers);i=i||{};var s="",n,o,l=this,c=r.helperMissing,u="function",d=this.escapeExpression,p=r.blockHelperMissing;function h(e,t,a){var i="",s;i+='\n  <div class="collection-group" data-title="';if(s=r.title)s=s.call(e,{hash:{},data:t});else{s=e.title;s=typeof s===u?s.apply(e):s}i+=d(s)+'">\n    <div class="collection-group-title">';if(s=r.title)s=s.call(e,{hash:{},data:t});else{s=e.title;s=typeof s===u?s.apply(e):s}i+=d(s)+"</div>\n\n    ";s=r.each.call(e,e.collectionObjects,{hash:{},inverse:l.noop,fn:l.programWithDepth(2,g,t,a),data:t});(s||0===s)&&(i+=s);i+="\n\n  </div>\n";return i}function g(e,t,a){var i="",s;i+='\n      <div class="collection-wrapper ';s=r["if"].call(e,e.filter,{hash:{},inverse:l.program(5,f,t),fn:l.program(3,m,t),data:t});(s||0===s)&&(i+=s);i+=" ";s=r["if"].call(e,e.selected,{hash:{},inverse:l.noop,fn:l.program(7,v,t),data:t});(s||0===s)&&(i+=s);i+='" data-url-id="';if(s=r.urlId)s=s.call(e,{hash:{},data:t});else{s=e.urlId;s=typeof s===u?s.apply(e):s}i+=d(s)+'" data-collection-id="';if(s=r.id)s=s.call(e,{hash:{},data:t});else{s=e.id;s=typeof s===u?s.apply(e):s}i+=d(s)+'">\n        <div class="collection ';if(s=r.className)s=s.call(e,{hash:{},data:t});else{s=e.className;s=typeof s===u?s.apply(e):s}i+=d(s)+'">\n          <span class="collection-title">';if(s=r.title)s=s.call(e,{hash:{},data:t});else{s=e.title;s=typeof s===u?s.apply(e):s}i+=d(s)+"</span>\n          ";s=r["if"].call(e,e.filter,{hash:{},inverse:l.noop,fn:l.program(9,b,t),data:t});(s||0===s)&&(i+=s);i+="\n\n          ";s=r["if"].call(e,e.dropdown,{hash:{},inverse:l.noop,fn:l.program(12,y,t),data:t});(s||0===s)&&(i+=s);i+="\n        </div>\n\n        ";s=r["if"].call(e,e.dropdown,{hash:{},inverse:l.noop,fn:l.programWithDepth(14,_,t,a),data:t});(s||0===s)&&(i+=s);i+="\n      </div>\n    ";return i}function m(e,t){return"has-content-stat-filter"}function f(e,t){return"no-filter"}function v(e,t){return"selected"}function b(e,t){var a="",i,s,n;a+='\n            \n            <span class="collection-filter-wrapper"><span class="collection-filter">';n={hash:{compare:"tag"},inverse:l.noop,fn:l.program(10,S,t),data:t};s=(i=r.if_eq||e.if_eq,i?i.call(e,(i=e.filter,null==i||false===i?i:i.type),n):c.call(e,"if_eq",(i=e.filter,null==i||false===i?i:i.type),n));(s||0===s)&&(a+=s);a+=d((i=(i=e.filter,null==i||false===i?i:i.name),typeof i===u?i.apply(e):i))+"</span></span>\n          ";return a}function S(e,t){return"#"}function y(e,t){return'\n            <div class="dropdown-button"></div>\n          '}function _(e,t,a){var i="",s;i+='\n          <div class="dropdown">\n            ';s=r["if"].call(e,e.categories,{hash:{},inverse:l.noop,fn:l.programWithDepth(15,C,t,a),data:t});(s||0===s)&&(i+=s);i+="\n\n            ";s=r["if"].call(e,e.tags,{hash:{},inverse:l.noop,fn:l.programWithDepth(19,A,t,a),data:t});(s||0===s)&&(i+=s);i+="\n          </div>\n        ";return i}function C(e,t,a){var i="",s,n;i+='\n              <div class="categories">\n                <div class="icon-title">'+d((s=(s=a.strings,null==s||false===s?s:s.chooseCategory),typeof s===u?s.apply(e):s))+'</div>\n                <select>\n                  <option value="none-selected">'+d((s=(s=a.strings,null==s||false===s?s:s.none),typeof s===u?s.apply(e):s))+"</option>\n                  ";n=r.each.call(e,e.categories,{hash:{},inverse:l.noop,fn:l.program(16,E,t),data:t});(n||0===n)&&(i+=n);i+="\n                </select>\n              </div>\n            ";return i}function E(e,t){var a="",i;a+='\n                    <option value="';if(i=r.name)i=i.call(e,{hash:{},data:t});else{i=e.name;i=typeof i===u?i.apply(e):i}a+=d(i)+'" ';i=r["if"].call(e,e.selected,{hash:{},inverse:l.noop,fn:l.program(17,w,t),data:t});(i||0===i)&&(a+=i);a+=">";if(i=r.name)i=i.call(e,{hash:{},data:t});else{i=e.name;i=typeof i===u?i.apply(e):i}a+=d(i)+"</option>\n                  ";return a}function w(e,t){return'selected="selected"'}function A(e,t,a){var i="",s,n;i+='\n              <div class="tags">\n                <div class="icon-title">'+d((s=(s=a.strings,null==s||false===s?s:s.chooseTag),typeof s===u?s.apply(e):s))+'</div>\n                <select>\n                  <option value="none-selected">'+d((s=(s=a.strings,null==s||false===s?s:s.none),typeof s===u?s.apply(e):s))+"</option>\n                  ";n=r.each.call(e,e.tags,{hash:{},inverse:l.noop,fn:l.program(16,E,t),data:t});(n||0===n)&&(i+=n);i+="\n                </select>\n              </div>\n            ";return i}function T(e,t){var a="",i;a+='\n  <div class="empty-message">'+d((i=(i=e.strings,null==i||false===i?i:i.emptyMessage),typeof i===u?i.apply(e):i))+"</div>\n";return a}n=r.each.call(t,t.collectionGroups,{hash:{},inverse:l.noop,fn:l.programWithDepth(1,h,i,t),data:i});(n||0===n)&&(s+=n);s+="\n\n\n";o={hash:{},inverse:l.program(21,T,i),fn:l.noop,data:i};if(n=r.collectionGroups)n=n.call(t,o);else{n=t.collectionGroups;n=typeof n===u?n.apply(t):n}r.collectionGroups||(n=p.call(t,n,o));(n||0===n)&&(s+=n);s+="\n";return s})})();var t="dialog-content-selector.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},"./src/main/webapp/templates-v6/handlebars/dialog-email-service-connect.html":function(e,t){YUI.add("squarespace-dialog-email-service-connect-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["dialog-email-service-connect.html"]=e(function(e,t,a,i,s){this.compilerInfo=[4,">= 1.0.0"];a=this.merge(a,e.helpers);s=s||{};var n="",r,o="function",l=this.escapeExpression;n+='<div class="sqs-content-inner">\n\n  <div class="text">\n    <div class="title">';if(r=a.title)r=r.call(t,{hash:{},data:s});else{r=t.title;r=typeof r===o?r.apply(t):r}n+=l(r)+'</div>\n    <div class="message">';if(r=a.sendingTo)r=r.call(t,{hash:{},data:s});else{r=t.sendingTo;r=typeof r===o?r.apply(t):r}n+=l(r)+'</div>\n  </div>\n\n  <div class="fields"></div>\n\n  <div class="connect">';if(r=a.connect)r=r.call(t,{hash:{},data:s});else{r=t.connect;r=typeof r===o?r.apply(t):r}n+=l(r)+'</div>\n  <div class="icon"></div>\n\n</div>\n';return n})})();var t="dialog-email-service-connect.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},"./src/main/webapp/templates-v6/handlebars/dialog-file-manager.html":function(e,t){YUI.add("squarespace-dialog-file-manager-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["dialog-file-manager.html"]=e(function(e,t,o,a,i){this.compilerInfo=[4,">= 1.0.0"];o=this.merge(o,e.helpers);i=i||{};var s="",n,l=this,c=o.helperMissing,u="function",d=this.escapeExpression;function r(e,t,a){var i="",s,n,r;i+='\n<div class="attachment ';r={hash:{compare:e.urlId},inverse:l.noop,fn:l.program(2,p,t),data:t};n=(s=o.if_eq||e.if_eq,s?s.call(e,a.selectedUrlId,r):c.call(e,"if_eq",a.selectedUrlId,r));(n||0===n)&&(i+=n);i+='" data-urlId="';if(n=o.urlId)n=n.call(e,{hash:{},data:t});else{n=e.urlId;n=typeof n===u?n.apply(e):n}i+=d(n)+'" data-id="';if(n=o.id)n=n.call(e,{hash:{},data:t});else{n=e.id;n=typeof n===u?n.apply(e):n}i+=d(n)+'">\n  <div class="filename">\n    <span class="filename-text">';if(n=o.filename)n=n.call(e,{hash:{},data:t});else{n=e.filename;n=typeof n===u?n.apply(e):n}i+=d(n)+'</span>\n    <input class="filename-editable" type="text" value="';if(n=o.filename)n=n.call(e,{hash:{},data:t});else{n=e.filename;n=typeof n===u?n.apply(e):n}i+=d(n)+'" />\n  </div>\n  <div class="buttons">\n    <div class="edit"><img src="//assets.squarespace.com/universal/images-v6/icons/icon-edit-12-dark.png" /></div>\n    <div class="remove"><img src="//assets.squarespace.com/universal/images-v6/icons/icon-close-9-dark.png" /></div>\n  </div>\n</div>\n';return i}function p(e,t){return"selected"}function h(e,t){var a="",i;a+="\n  ";i=o["if"].call(e,e.searchQuery,{hash:{},inverse:l.program(7,m,t),fn:l.program(5,g,t),data:t});(i||0===i)&&(a+=i);a+="\n";return a}function g(e,t){var a="",i;a+='\n  <div class="empty empty-search">\n    <div class="text">'+d((i=(i=e.strings,null==i||false===i?i:i.noResultsFound),typeof i===u?i.apply(e):i))+"</div>\n  </div>\n  ";return a}function m(e,t){var a="",i;a+='\n  <div class="empty empty-files">\n    <div class="icon"></div>\n    <div class="text">'+d((i=(i=e.strings,null==i||false===i?i:i.noFiles),typeof i===u?i.apply(e):i))+"</div>\n  </div>\n  ";return a}n=o.each.call(t,t.attachments,{hash:{},inverse:l.program(4,h,i),fn:l.programWithDepth(1,r,i,t),data:i});(n||0===n)&&(s+=n);s+="\n";return s})})();var t="dialog-file-manager.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},"./src/main/webapp/templates-v6/handlebars/dialog-labelled-value-table.html":function(e,t){YUI.add("squarespace-dialog-labelled-value-table-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["dialog-labelled-value-table.html"]=e(function(e,t,s,a,i){this.compilerInfo=[4,">= 1.0.0"];s=this.merge(s,e.helpers);i=i||{};var n,r="function",o=this.escapeExpression,l=this;function c(e,t){var a="",i;a+='\n\n  <div class="field-lhs top">\n    ';if(i=s.title)i=i.call(e,{hash:{},data:t});else{i=e.title;i=typeof i===r?i.apply(e):i}a+=o(i)+'\n  </div>\n  <div class="field-rhs">\n    <div class="field-description-wrapper">\n      <div class="field-description">\n        ';if(i=s.description)i=i.call(e,{hash:{},data:t});else{i=e.description;i=typeof i===r?i.apply(e):i}a+=o(i)+"\n      </div>\n    </div>\n\n    <table>\n      <thead>\n        <tr>\n          <th>\n            ";if(i=s.valueLabel)i=i.call(e,{hash:{},data:t});else{i=e.valueLabel;i=typeof i===r?i.apply(e):i}a+=o(i)+"\n          </th>\n          <th>\n            ";if(i=s.labelLabel)i=i.call(e,{hash:{},data:t});else{i=e.labelLabel;i=typeof i===r?i.apply(e):i}a+=o(i)+'\n          </th>\n        </tr>\n      </thead>\n      <tbody class="table-body">\n        <tr class="empty-message"><td colspan="2">';if(i=s.emptyMessage)i=i.call(e,{hash:{},data:t});else{i=e.emptyMessage;i=typeof i===r?i.apply(e):i}a+=o(i)+'</td></tr>\n      </tbody> \n    </table>\n\n    <div class="add-row">\n      <img src="//assets.squarespace.com/universal/images-v6/standard/icon_add_11_light.png" />\n    </div>\n\n  </div>\n';return a}n=s["with"].call(t,t.strings,{hash:{},inverse:l.noop,fn:l.program(1,c,i),data:i});return n||0===n?n:""})})();var t="dialog-labelled-value-table.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},"./src/main/webapp/templates-v6/handlebars/dialog-map.html":function(e,t){YUI.add("squarespace-dialog-map-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["dialog-map.html"]=e(function(e,t,a,i,s){this.compilerInfo=[4,">= 1.0.0"];a=this.merge(a,e.helpers);s=s||{};var n="",r,o="function",l=this.escapeExpression,c=this;function u(e,t){var a="",i;a+='\n      <input class="field-input map-address-title" type="text" placeholder="'+l((i=(i=e.strings,null==i||false===i?i:i.placeholderAddressTitle),typeof i===o?i.apply(e):i))+'" spellcheck="false" style="font-weight: 500;"/>\n    ';return a}n+='<div class="field-wrapper text-field-wrapper clear major">\n  <div class="map-address-fields">\n    ';r=a["if"].call(t,t.showTitle,{hash:{},inverse:c.noop,fn:c.program(1,u,s),data:s});(r||0===r)&&(n+=r);n+='\n    <input class="field-input map-address-line1" type="text" placeholder="'+l((r=(r=t.strings,null==r||false===r?r:r.placeholderAddress1),typeof r===o?r.apply(t):r))+'" spellcheck="false" />\n    <input class="field-input map-address-line2" type="text" placeholder="'+l((r=(r=t.strings,null==r||false===r?r:r.placeholderAddress2),typeof r===o?r.apply(t):r))+'" spellcheck="false" />\n    <input class="field-input map-address-country" type="text" placeholder="'+l((r=(r=t.strings,null==r||false===r?r:r.placeholderAddressCountry),typeof r===o?r.apply(t):r))+'" spellcheck="false" />\n  </div>\n</div>';return n})})();var t="dialog-map.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},"./src/main/webapp/templates-v6/handlebars/dialog-oembed.html":function(e,t){YUI.add("squarespace-dialog-oembed-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["dialog-oembed.html"]=e(function(e,t,a,i,s){this.compilerInfo=[4,">= 1.0.0"];a=this.merge(a,e.helpers);s=s||{};var n="",r,o,l="function",c=this.escapeExpression,u=this;function d(e,t){var a="",i;a+='\n  <div class="title">'+c((i=(i=e.strings,null==i||false===i?i:i.title),typeof i===l?i.apply(e):i))+"</div>\n";return a}function p(e,t){return'\n  <div class="manual">&nbsp;</div>\n'}function h(e,t){return"has-manual"}function g(e,t){var a;return c((a=(a=e.data,null==a||false===a?a:a.url),typeof a===l?a.apply(e):a))}o=a["if"].call(t,(r=t.strings,null==r||false===r?r:r.title),{hash:{},inverse:u.noop,fn:u.program(1,d,s),data:s});(o||0===o)&&(n+=o);n+="\n\n";o=a["if"].call(t,t.manual,{hash:{},inverse:u.noop,fn:u.program(3,p,s),data:s});(o||0===o)&&(n+=o);n+='\n\n<input class="input field-input ';o=a["if"].call(t,t.manual,{hash:{},inverse:u.noop,fn:u.program(5,h,s),data:s});(o||0===o)&&(n+=o);n+='" value="';o=a["if"].call(t,(r=t.data,null==r||false===r?r:r.url),{hash:{},inverse:u.noop,fn:u.program(7,g,s),data:s});(o||0===o)&&(n+=o);n+='"\n  placeholder="'+c((r=(r=t.strings,null==r||false===r?r:r.inputPlaceholder),typeof r===l?r.apply(t):r))+'" spellcheck="false" tabindex="1">\n\n<div class="status description"></div>';return n})})();var t="dialog-oembed.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},"./src/main/webapp/templates-v6/handlebars/dialog-pricing-placeholder.html":function(e,t){YUI.add("squarespace-dialog-pricing-placeholder-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["dialog-pricing-placeholder.html"]=e(function(e,t,a,i,s){this.compilerInfo=[4,">= 1.0.0"];a=this.merge(a,e.helpers);s=s||{};var n="",r,o,l="function",c=this.escapeExpression,u=this;function d(e,t){return'\n      <div class="variant-count"></div>\n    '}n+='<div class="field-lhs">\n  '+c((r=(r=t.strings,null==r||false===r?r:r.title),typeof r===l?r.apply(t):r))+'\n</div>\n\n  <div class="placeholder">\n\n    <div class="pricing"></div>\n\n    ';o=a["if"].call(t,t.hasVariants,{hash:{},inverse:u.noop,fn:u.program(1,d,s),data:s});(o||0===o)&&(n+=o);n+='\n\n    <div class="prompt">\n      '+c((r=(r=t.strings,null==r||false===r?r:r.prompt),typeof r===l?r.apply(t):r))+"&nbsp;&rarr;\n    </div>\n  </div>\n";return n})})();var t="dialog-pricing-placeholder.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},"./src/main/webapp/templates-v6/handlebars/dialog-slider.html":function(e,t){YUI.add("squarespace-dialog-slider-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["dialog-slider.html"]=e(function(e,t,s,a,i){this.compilerInfo=[4,">= 1.0.0"];s=this.merge(s,e.helpers);i=i||{};var n="",r,o,l="function",c=this.escapeExpression,u=this;function d(e,t){var a="",i;a+='\n<div class="title">'+c((i=(i=e.strings,null==i||false===i?i:i.title),typeof i===l?i.apply(e):i))+"</div>\n";return a}function p(e,t){return"sqs-slider-with-numeric-label"}function h(e,t){var a="",i;a+='style="width: ';if(i=s.labelWidth)i=i.call(e,{hash:{},data:t});else{i=e.labelWidth;i=typeof i===l?i.apply(e):i}a+=c(i)+"px";return a}function g(e,t){var a="",i;a+='style="margin-left: ';if(i=s.labelWidth)i=i.call(e,{hash:{},data:t});else{i=e.labelWidth;i=typeof i===l?i.apply(e):i}a+=c(i)+"px";return a}o=s["if"].call(t,(r=t.strings,null==r||false===r?r:r.title),{hash:{},inverse:u.noop,fn:u.program(1,d,i),data:i});(o||0===o)&&(n+=o);n+='\n<div class="slider ';o=s["if"].call(t,t.isNumericLabel,{hash:{},inverse:u.noop,fn:u.program(3,p,i),data:i});(o||0===o)&&(n+=o);n+='">\n  <div class="numeric-display" ';o=s["if"].call(t,t.isNumericLabel,{hash:{},inverse:u.noop,fn:u.program(5,h,i),data:i});(o||0===o)&&(n+=o);n+='"></div>\n  <div class="slider-container" ';o=s["if"].call(t,t.isNumericLabel,{hash:{},inverse:u.noop,fn:u.program(7,g,i),data:i});(o||0===o)&&(n+=o);n+='"></div>\n</div>\n<div class="description">'+c((r=(r=t.strings,null==r||false===r?r:r.description),typeof r===l?r.apply(t):r))+"</div>\n";return n})})();var t="dialog-slider.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},"./src/main/webapp/templates-v6/handlebars/dialog-subscription-details-placeholder.html":function(e,t){YUI.add("squarespace-dialog-subscription-details-placeholder-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["dialog-subscription-details-placeholder.html"]=e(function(e,t,a,i,s){this.compilerInfo=[4,">= 1.0.0"];a=this.merge(a,e.helpers);s=s||{};var n="",r,o="function",l=this.escapeExpression;n+='<div class="placeholder">\n\n  <div class="details-text">'+l((r=(r=t.strings,null==r||false===r?r:r.details),typeof r===o?r.apply(t):r))+'</div>\n\n  <div class="prompt">\n    '+l((r=(r=t.strings,null==r||false===r?r:r.prompt),typeof r===o?r.apply(t):r))+"&nbsp;&rarr;\n  </div>\n</div>\n";return n})})();var t="dialog-subscription-details-placeholder.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},"./src/main/webapp/templates-v6/handlebars/dialog-text-area.html":function(e,t){YUI.add("squarespace-dialog-text-area-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["dialog-text-area.html"]=e(function(e,t,a,i,s){this.compilerInfo=[4,">= 1.0.0"];a=this.merge(a,e.helpers);s=s||{};var n="",r,o,l="function",c=this.escapeExpression,u=this;function d(e,t){var a="",i;a+='\n  <div class="title">'+c((i=(i=e.strings,null==i||false===i?i:i.title),typeof i===l?i.apply(e):i))+"</div>\n";return a}function p(e,t){var a="",i;a+='\n  <div class="description">'+c((i=(i=e.strings,null==i||false===i?i:i.description),typeof i===l?i.apply(e):i))+"</div>\n";return a}o=a["if"].call(t,(r=t.strings,null==r||false===r?r:r.title),{hash:{},inverse:u.noop,fn:u.program(1,d,s),data:s});(o||0===o)&&(n+=o);n+='\n\n<textarea placeholder="'+c((r=(r=t.strings,null==r||false===r?r:r.placeholder),typeof r===l?r.apply(t):r))+'">';if(o=a.data)o=o.call(t,{hash:{},data:s});else{o=t.data;o=typeof o===l?o.apply(t):o}n+=c(o)+"</textarea>\n\n";o=a["if"].call(t,(r=t.strings,null==r||false===r?r:r.description),{hash:{},inverse:u.noop,fn:u.program(3,p,s),data:s});(o||0===o)&&(n+=o);n+="\n";return n})})();var t="dialog-text-area.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},"./src/main/webapp/templates-v6/handlebars/dialog-text.html":function(e,t){YUI.add("squarespace-dialog-text-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["dialog-text.html"]=e(function(e,t,s,a,i){this.compilerInfo=[4,">= 1.0.0"];s=this.merge(s,e.helpers);i=i||{};var n="",r,o,l="function",c=this.escapeExpression,u=this;function d(e,t){var a="",i;a+='\n  <div class="title">'+c((i=(i=e.strings,null==i||false===i?i:i.title),typeof i===l?i.apply(e):i))+"</div>\n";return a}function p(e,t){var a="",i;a+='maxlength="';if(i=s.maxLength)i=i.call(e,{hash:{},data:t});else{i=e.maxLength;i=typeof i===l?i.apply(e):i}a+=c(i)+'"';return a}function h(e,t){var a="",i;a+='name="';if(i=s.name)i=i.call(e,{hash:{},data:t});else{i=e.name;i=typeof i===l?i.apply(e):i}a+=c(i)+'"';return a}function g(e,t){var a="",i;a+='data-test="';if(i=s.testAttribute)i=i.call(e,{hash:{},data:t});else{i=e.testAttribute;i=typeof i===l?i.apply(e):i}a+=c(i)+'"';return a}function m(e,t){return'readonly="readonly"'}function f(e,t){return'onClick="this.select()"'}function v(e,t){var a="",i,s;a+='\n\n\t<div class="description">\n    ';s=(i=(i=e.strings,null==i||false===i?i:i.description),typeof i===l?i.apply(e):i);(s||0===s)&&(a+=s);a+="\n  </div>\n\n";return a}o=s["if"].call(t,(r=t.strings,null==r||false===r?r:r.title),{hash:{},inverse:u.noop,fn:u.program(1,d,i),data:i});(o||0===o)&&(n+=o);n+='\n\n<input type="text" ';o=s["if"].call(t,t.maxLength,{hash:{},inverse:u.noop,fn:u.program(3,p,i),data:i});(o||0===o)&&(n+=o);n+="\n       ";o=s["if"].call(t,t.name,{hash:{},inverse:u.noop,fn:u.program(5,h,i),data:i});(o||0===o)&&(n+=o);n+="\n       ";o=s["if"].call(t,t.testAttribute,{hash:{},inverse:u.noop,fn:u.program(7,g,i),data:i});(o||0===o)&&(n+=o);n+="\n       ";o=s["if"].call(t,t.readOnly,{hash:{},inverse:u.noop,fn:u.program(9,m,i),data:i});(o||0===o)&&(n+=o);n+="\n       ";o=s["if"].call(t,t.selectAllOnFocus,{hash:{},inverse:u.noop,fn:u.program(11,f,i),data:i});(o||0===o)&&(n+=o);n+="/>\n\n";o=s["if"].call(t,(r=t.strings,null==r||false===r?r:r.description),{hash:{},inverse:u.noop,fn:u.program(13,v,i),data:i});(o||0===o)&&(n+=o);n+="\n";return n})})();var t="dialog-text.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},"./src/main/webapp/templates-v6/handlebars/dialog-zapier-service-connect.html":function(e,t){YUI.add("squarespace-dialog-zapier-service-connect-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["dialog-zapier-service-connect.html"]=e(function(e,t,s,a,i){this.compilerInfo=[4,">= 1.0.0"];s=this.merge(s,e.helpers);i=i||{};var n="",r,o="function",l=this.escapeExpression,c=this;function u(e,t){var a="",i;a+='\n      <div class="message">';if(i=s.connectedMessage)i=i.call(e,{hash:{},data:t});else{i=e.connectedMessage;i=typeof i===o?i.apply(e):i}a+=l(i)+"</div>\n    ";return a}function d(e,t){var a="",i;a+="\n      ";i=s["if"].call(e,e.connectionInProgress,{hash:{},inverse:c.program(6,h,t),fn:c.program(4,p,t),data:t});(i||0===i)&&(a+=i);a+="\n    ";return a}function p(e,t){var a="",i;a+='\n        <div class="message">';if(i=s.pendingMessage)i=i.call(e,{hash:{},data:t});else{i=e.pendingMessage;i=typeof i===o?i.apply(e):i}a+=l(i)+"</div>\n      ";return a}function h(e,t){var a="",i;a+='\n        <div class="connect">';if(i=s.clickToConnect)i=i.call(e,{hash:{},data:t});else{i=e.clickToConnect;i=typeof i===o?i.apply(e):i}a+=l(i)+"</div>\n      ";return a}n+='<div class="sqs-content-inner">\n  <div class="text">\n    <div class="title">';if(r=s.title)r=r.call(t,{hash:{},data:i});else{r=t.title;r=typeof r===o?r.apply(t):r}n+=l(r)+"</div>\n\n    ";r=s["if"].call(t,t.connected,{hash:{},inverse:c.program(3,d,i),fn:c.program(1,u,i),data:i});(r||0===r)&&(n+=r);n+='\n  </div>\n\n  <div class="icon"></div>\n</div>\n';return n})})();var t="dialog-zapier-service-connect.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},"./src/main/webapp/templates-v6/handlebars/existing-content-link-tab.html":function(e,t){YUI.add("squarespace-existing-content-link-tab-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["existing-content-link-tab.html"]=e(function(e,t,a,i,s){this.compilerInfo=[4,">= 1.0.0"];a=this.merge(a,e.helpers);s=s||{};return'<div class="existing-content-link-tab">\n  <div class="content-options"></div>\n</div>\n'})})();var t="existing-content-link-tab.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},"./src/main/webapp/templates-v6/handlebars/external-link-tab.html":function(e,t){YUI.add("squarespace-external-link-tab-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["external-link-tab.html"]=e(function(e,t,a,i,s){this.compilerInfo=[4,">= 1.0.0"];a=this.merge(a,e.helpers);s=s||{};return'<div class="external-link-tab">\n  <div class="link">\n    <button class="visit" title="Visit URL"></button>\n  </div>\n</div>\n'})})();var t="external-link-tab.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},"./src/main/webapp/templates-v6/handlebars/file-manager-tab.html":function(e,t){YUI.add("squarespace-file-manager-tab-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["file-manager-tab.html"]=e(function(e,t,a,i,s){this.compilerInfo=[4,">= 1.0.0"];a=this.merge(a,e.helpers);s=s||{};return'<div class="file-manager-tab">\n  <div class="options"></div>\n  <div class="frames"></div>\n</div>\n'})})();var t="file-manager-tab.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},"./src/main/webapp/templates-v6/handlebars/flickr-oembed.html":function(e,t){YUI.add("squarespace-flickr-oembed-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["flickr-oembed.html"]=e(function(e,t,s,a,i){this.compilerInfo=[4,">= 1.0.0"];s=this.merge(s,e.helpers);i=i||{};var n="",r,o="function",l=this.escapeExpression,c=this;function u(e,t){var a="",i;a+='\n    <p><a href="';if(i=s.url)i=i.call(e,{hash:{},data:t});else{i=e.url;i=typeof i===o?i.apply(e):i}a+=l(i)+'">';if(i=s.title)i=i.call(e,{hash:{},data:t});else{i=e.title;i=typeof i===o?i.apply(e):i}a+=l(i)+"</a></p>\n  ";return a}n+='<div class="flickr-oembed">\n  <a href="';if(r=s.url)r=r.call(t,{hash:{},data:i});else{r=t.url;r=typeof r===o?r.apply(t):r}n+=l(r)+'">\n    <img src="';if(r=s["flickr-url"])r=r.call(t,{hash:{},data:i});else{r=t["flickr-url"];r=typeof r===o?r.apply(t):r}n+=l(r)+'" width="100%" />\n  </a>\n  ';r=s["if"].call(t,t.title,{hash:{},inverse:c.noop,fn:c.program(1,u,i),data:i});(r||0===r)&&(n+=r);n+="\n</div>";return n})})();var t="flickr-oembed.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},"./src/main/webapp/templates-v6/handlebars/flyout-error-message.html":function(e,t){YUI.add("squarespace-flyout-error-message-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["flyout-error-message.html"]=e(function(e,t,a,i,s){this.compilerInfo=[4,">= 1.0.0"];a=this.merge(a,e.helpers);s=s||{};var n="",r,o="function";n+='<div class="sqs-flyout-error-message">';if(r=a.message)r=r.call(t,{hash:{},data:s});else{r=t.message;r=typeof r===o?r.apply(t):r}(r||0===r)&&(n+=r);n+="</div>";return n})})();var t="flyout-error-message.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},"./src/main/webapp/templates-v6/handlebars/form-builder-field.html":function(e,t){YUI.add("squarespace-form-builder-field-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["form-builder-field.html"]=e(function(e,t,a,i,s){this.compilerInfo=[4,">= 1.0.0"];a=this.merge(a,e.helpers);s=s||{};var n="",r,o="function",l=this.escapeExpression;n+='<div class="field-control-bar">\n  <div class="field-drag-handle-wrapper">\n    <div class="field-drag-handle"></div>\n  </div>\n\n  <div class="field-type-icon '+l((r=(r=t.field,null==r||false===r?r:r.type),typeof r===o?r.apply(t):r))+'"></div>\n\n  <div class="field-title"></div>\n\n  <div class="field-controls">\n    <div class="edit-field">'+l((r=(r=t.strings,null==r||false===r?r:r.editText),typeof r===o?r.apply(t):r))+'</div>\n    <div class="remove-field">&times;</div>\n  </div>\n</div>\n\n<div class="editor-wrapper"></div>\n';return n})})();var t="form-builder-field.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},"./src/main/webapp/templates-v6/handlebars/image-picker.html":function(e,t){YUI.add("squarespace-image-picker-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["image-picker.html"]=e(function(e,t,a,i,s){this.compilerInfo=[4,">= 1.0.0"];a=this.merge(a,e.helpers);s=s||{};return'<div class="header">\n  <div class="instructions"></div>\n  <div class="controls">\n    <div class="cancel"></div>\n    <div class="confirm"></div>\n  </div>\n  <div class="information">\n    <div class="error"></div>\n    <div class="sqs-spin light extra-large"></div>\n  </div>\n  <div class="images"></div>\n  <div class="pagination">\n    <span class="prev"></span>\n    <span class="next"></span>\n  </div>\n  <div class="size-visualizer">\n      <div class="ruler height"></div>\n      <div class="ruler width"></div>\n      <div class="label height"></div>\n      <div class="label width"></div>\n  </div>\n</div>'})})();var t="image-picker.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},"./src/main/webapp/templates-v6/handlebars/instagram-oembed.html":function(e,t){YUI.add("squarespace-instagram-oembed-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["instagram-oembed.html"]=e(function(e,t,s,a,i){this.compilerInfo=[4,">= 1.0.0"];s=this.merge(s,e.helpers);i=i||{};var n="",r,o="function",l=this.escapeExpression,c=this;function u(e,t){var a="",i;a+='\n    <p><a href="';if(i=s.url)i=i.call(e,{hash:{},data:t});else{i=e.url;i=typeof i===o?i.apply(e):i}a+=l(i)+'">';if(i=s.title)i=i.call(e,{hash:{},data:t});else{i=e.title;i=typeof i===o?i.apply(e):i}a+=l(i)+"</a></p>\n  ";return a}n+='<div class="instagram-oembed">\n  <a href="';if(r=s.url)r=r.call(t,{hash:{},data:i});else{r=t.url;r=typeof r===o?r.apply(t):r}n+=l(r)+'">\n    <img src="';if(r=s["instagram-url"])r=r.call(t,{hash:{},data:i});else{r=t["instagram-url"];r=typeof r===o?r.apply(t):r}n+=l(r)+'" width="100%" />\n  </a>\n  ';r=s["if"].call(t,t.title,{hash:{},inverse:c.noop,fn:c.program(1,u,i),data:i});(r||0===r)&&(n+=r);n+="\n</div>";return n})})();var t="instagram-oembed.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},"./src/main/webapp/templates-v6/handlebars/mobile-info-bar.html":function(e,t){YUI.add("squarespace-mobile-info-bar-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["mobile-info-bar.html"]=e(function(e,t,s,a,i){this.compilerInfo=[4,">= 1.0.0"];s=this.merge(s,e.helpers);i=i||{};var n="",r,o="function",l=this.escapeExpression,c=this;function u(e,t){var a="",i;a+='\n    <div class="sqs-mobile-info-bar-trigger" data-type="contactEmail">\n      <a href="mailto:';if(i=s.contactEmail)i=i.call(e,{hash:{},data:t});else{i=e.contactEmail;i=typeof i===o?i.apply(e):i}a+=l(i)+'">\n        <span class="sqs-mobile-info-bar-trigger-icon"></span>\n        <span class="sqs-mobile-info-bar-trigger-label">'+l((i=(i=(i=e.strings,null==i||false===i?i:i.labels),null==i||false===i?i:i.email),typeof i===o?i.apply(e):i))+"</span>\n      </a>\n    </div>\n  ";return a}function d(e,t){var a="",i;a+='\n    <div class="sqs-mobile-info-bar-trigger" data-type="contactPhoneNumber">\n      <a href="tel:';if(i=s.contactPhoneNumber)i=i.call(e,{hash:{},data:t});else{i=e.contactPhoneNumber;i=typeof i===o?i.apply(e):i}a+=l(i)+'">\n        <span class="sqs-mobile-info-bar-trigger-icon"></span>\n        <span class="sqs-mobile-info-bar-trigger-label">'+l((i=(i=(i=e.strings,null==i||false===i?i:i.labels),null==i||false===i?i:i.phone),typeof i===o?i.apply(e):i))+"</span>\n      </a>\n    </div>\n  ";return a}function p(e,t){var a="",i;a+='\n    <div\n      tabindex="0"\n      role="button"\n      class="sqs-mobile-info-bar-trigger"\n      data-type="location"\n      data-overlay="true"\n    >\n      <span class="sqs-mobile-info-bar-trigger-icon"></span>\n      <span class="sqs-mobile-info-bar-trigger-label">'+l((i=(i=(i=e.strings,null==i||false===i?i:i.labels),null==i||false===i?i:i.location),typeof i===o?i.apply(e):i))+"</span>\n    </div>\n  ";return a}function h(e,t){var a="",i;a+='\n    <div\n      tabindex="0"\n      role="button"\n      class="sqs-mobile-info-bar-trigger"\n      data-type="businessHours"\n      data-overlay="true"\n    >\n      <span class="sqs-mobile-info-bar-trigger-icon"></span>\n      <span class="sqs-mobile-info-bar-trigger-label">'+l((i=(i=(i=e.strings,null==i||false===i?i:i.labels),null==i||false===i?i:i.hours),typeof i===o?i.apply(e):i))+"</span>\n    </div>\n  ";return a}n+='\n<div class="sqs-mobile-info-bar-triggers">\n\n  ';r=s["if"].call(t,t.contactEmail,{hash:{},inverse:c.noop,fn:c.program(1,u,i),data:i});(r||0===r)&&(n+=r);n+="\n\n\n  ";r=s["if"].call(t,t.contactPhoneNumber,{hash:{},inverse:c.noop,fn:c.program(3,d,i),data:i});(r||0===r)&&(n+=r);n+="\n\n\n  ";r=s["if"].call(t,t.location,{hash:{},inverse:c.noop,fn:c.program(5,p,i),data:i});(r||0===r)&&(n+=r);n+="\n\n\n  ";r=s["if"].call(t,t.businessHours,{hash:{},inverse:c.noop,fn:c.program(7,h,i),data:i});(r||0===r)&&(n+=r);n+='\n\n</div>\n\n<div\n  class="sqs-mobile-info-bar-overlay"\n  role="dialog"\n>\n  <div\n    tabindex="0"\n    role="button"\n    aria-label="'+l((r=(r=(r=t.strings,null==r||false===r?r:r.labels),null==r||false===r?r:r.close),typeof r===o?r.apply(t):r))+'"\n    class="sqs-mobile-info-bar-overlay-close"\n  >\n  </div>\n  <div class="sqs-mobile-info-bar-overlay-content"></div>\n</div>\n';return n})})();var t="mobile-info-bar.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},"./src/main/webapp/templates-v6/handlebars/pill-shopping-cart.html":function(e,t){YUI.add("squarespace-pill-shopping-cart-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["pill-shopping-cart.html"]=e(function(e,t,a,i,s){this.compilerInfo=[4,">= 1.0.0"];a=this.merge(a,e.helpers);s=s||{};return'<div class="icon"></div>\n\n<div class="details">\n  <span class="total-quantity"></span>\n  <span class="suffix"></span>\n</div>\n\n<span class="subtotal">\n  <span class="price"></span>\n</span>\n'})})();var t="pill-shopping-cart.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},"./src/main/webapp/templates-v6/handlebars/search-result.html":function(e,t){YUI.add("squarespace-search-result-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["search-result.html"]=e(function(e,t,s,a,i){this.compilerInfo=[4,">= 1.0.0"];s=this.merge(s,e.helpers);i=i||{};var n="",r,o="function",l=this.escapeExpression,c=this;function u(e,t){var a="",i;a+='\n<div\n  tabindex="0"\n  role="link"\n  class="search-result clear"\n  itemid="';if(i=s.id)i=i.call(e,{hash:{},data:t});else{i=e.id;i=typeof i===o?i.apply(e):i}a+=l(i)+'"\n>\n  <div class="sqs-search-container-item sqs-search-ui-item sqs-post ';i=s["if"].call(e,e.recordTypeName,{hash:{},inverse:c.noop,fn:c.program(2,d,t),data:t});(i||0===i)&&(a+=i);a+=" ";if(i=s.documentType)i=i.call(e,{hash:{},data:t});else{i=e.documentType;i=typeof i===o?i.apply(e):i}a+=l(i)+'">\n    ';i=s["if"].call(e,e.imageUrl,{hash:{},inverse:c.noop,fn:c.program(4,p,t),data:t});(i||0===i)&&(a+=i);a+='\n    <div class="sqs-main-content">\n      <div class="sqs-title">';if(i=s.title)i=i.call(e,{hash:{},data:t});else{i=e.title;i=typeof i===o?i.apply(e):i}(i||0===i)&&(a+=i);a+='</div>\n      <div class="sqs-content">\n        ';i=s.each.call(e,e.highlight,{hash:{},inverse:c.noop,fn:c.program(6,h,t),data:t});(i||0===i)&&(a+=i);a+="\n      </div>\n    </div>\n  </div>\n</div>\n";return a}function d(e,t){var a="",i;a+="sqs-post-type-";if(i=s.recordTypeName)i=i.call(e,{hash:{},data:t});else{i=e.recordTypeName;i=typeof i===o?i.apply(e):i}a+=l(i);return a}function p(e,t){var a="",i;a+='\n    <div class="sqs-main-image-container">\n      <div class="sqs-main-image-intrinsic">\n        <div class="sqs-main-image content-fill">\n          <img data-src="';if(i=s.imageUrl)i=i.call(e,{hash:{},data:t});else{i=e.imageUrl;i=typeof i===o?i.apply(e):i}a+=l(i)+'" data-image-focal-point="'+l((i=(i=e.mediaFocalPoint,null==i||false===i?i:i["x"]),typeof i===o?i.apply(e):i))+","+l((i=(i=e.mediaFocalPoint,null==i||false===i?i:i["y"]),typeof i===o?i.apply(e):i))+'"/>\n        </div>\n      </div>\n    </div>\n    ';return a}function h(e,t){var a="",i;a+="\n        <span>";i=typeof e===o?e.apply(e):e;(i||0===i)&&(a+=i);a+="</span>\n        <span>&hellip;</span>\n        ";return a}r=s.each.call(t,t.items,{hash:{},inverse:c.noop,fn:c.program(1,u,i),data:i});(r||0===r)&&(n+=r);n+="\n";return n})})();var t="search-result.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},"./src/main/webapp/templates-v6/handlebars/tab-view-tab-group.html":function(e,t){YUI.add("squarespace-tab-view-tab-group-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["tab-view-tab-group.html"]=e(function(e,t,s,n,a){this.compilerInfo=[4,">= 1.0.0"];s=this.merge(s,e.helpers);n=this.merge(n,e.partials);a=a||{};var i="",r,o=this,l="function",c=this.escapeExpression;function u(e,t){var a="",i;a+="\n      ";i=s.each.call(e,e.widgets,{hash:{},inverse:o.noop,fn:o.program(2,d,t),data:t});(i||0===i)&&(a+=i);a+="\n    ";return a}function d(e,t){var a="",i;a+="\n        ";i=s["if"].call(e,e.widgets,{hash:{},inverse:o.program(5,h,t),fn:o.program(3,p,t),data:t});(i||0===i)&&(a+=i);a+="\n      ";return a}function p(e,t){var a="",i;a+="\n          ";i=o.invokePartial(n["tab-view/tab-group.html"],"tab-view/tab-group.html",e,s,n,t);(i||0===i)&&(a+=i);a+="\n        ";return a}function h(e,t){var a="",i;a+="\n          ";i=o.invokePartial(n["tab-view/tab.html"],"tab-view/tab.html",e,s,n,t);(i||0===i)&&(a+=i);a+="\n        ";return a}i+='<div class="tab-group">\n  <div class="tab-group-label">';if(r=s.label)r=r.call(t,{hash:{},data:a});else{r=t.label;r=typeof r===l?r.apply(t):r}i+=c(r)+'</div>\n  <div class="tab-group-items">\n    ';r=s["if"].call(t,t.widgets,{hash:{},inverse:o.noop,fn:o.program(1,u,a),data:a});(r||0===r)&&(i+=r);i+="\n  </div>\n</div>";return i})})();var t="tab-view-tab-group.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},"./src/main/webapp/templates-v6/handlebars/tab-view-tab.html":function(e,t){YUI.add("squarespace-tab-view-tab-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["tab-view-tab.html"]=e(function(e,t,s,a,i){this.compilerInfo=[4,">= 1.0.0"];s=this.merge(s,e.helpers);i=i||{};var n,r="function",o=this.escapeExpression,l=this;function c(e,t){var a="",i;a+='\n  <div class="tab-view-tab ';if(i=s.id)i=i.call(e,{hash:{},data:t});else{i=e.id;i=typeof i===r?i.apply(e):i}a+=o(i)+'" data-tabId="';if(i=s.id)i=i.call(e,{hash:{},data:t});else{i=e.id;i=typeof i===r?i.apply(e):i}a+=o(i)+'">\n    <span class="label">';if(i=s.label)i=i.call(e,{hash:{},data:t});else{i=e.label;i=typeof i===r?i.apply(e):i}a+=o(i)+"</span>\n  </div>\n";return a}n=s["if"].call(t,t.id,{hash:{},inverse:l.noop,fn:l.program(1,c,i),data:i});return n||0===n?n:""})})();var t="tab-view-tab.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},"./src/main/webapp/templates-v6/handlebars/tab-view.html":function(e,t){YUI.add("squarespace-tab-view-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["tab-view.html"]=e(function(e,t,s,n,a){this.compilerInfo=[4,">= 1.0.0"];s=this.merge(s,e.helpers);n=this.merge(n,e.partials);a=a||{};var i="",r,o="function",l=this;function c(e,t){var a="",i;a+="\n  ";i=s["if"].call(e,e.title,{hash:{},inverse:l.noop,fn:l.program(2,u,t),data:t});(i||0===i)&&(a+=i);a+="\n  ";i=s["if"].call(e,e.description,{hash:{},inverse:l.noop,fn:l.program(4,d,t),data:t});(i||0===i)&&(a+=i);a+="\n";return a}function u(e,t){var a="",i;a+='\n    <div class="navigation-title">';if(i=s.title)i=i.call(e,{hash:{},data:t});else{i=e.title;i=typeof i===o?i.apply(e):i}(i||0===i)&&(a+=i);a+="</div>\n  ";return a}function d(e,t){var a="",i;a+='\n    <div class="navigation-description">';if(i=s.description)i=i.call(e,{hash:{},data:t});else{i=e.description;i=typeof i===o?i.apply(e):i}(i||0===i)&&(a+=i);a+="</div>\n  ";return a}function p(e,t){var a="",i;a+="\n    ";i=s["if"].call(e,e.widgets,{hash:{},inverse:l.program(9,g,t),fn:l.program(7,h,t),data:t});(i||0===i)&&(a+=i);a+="\n  ";return a}function h(e,t){var a="",i;a+="\n      ";i=l.invokePartial(n["tab-view-tab-group.html"],"tab-view-tab-group.html",e,s,n,t);(i||0===i)&&(a+=i);a+="\n    ";return a}function g(e,t){var a="",i;a+="\n      ";i=l.invokePartial(n["tab-view-tab.html"],"tab-view-tab.html",e,s,n,t);(i||0===i)&&(a+=i);a+="\n    ";return a}r=s["with"].call(t,t.strings,{hash:{},inverse:l.noop,fn:l.program(1,c,a),data:a});(r||0===r)&&(i+=r);i+='\n<div class="sqs-tab-view-self">\n  ';r=s.each.call(t,t.widgets,{hash:{},inverse:l.noop,fn:l.program(6,p,a),data:a});(r||0===r)&&(i+=r);i+="\n</div>";return i})})();var t="tab-view.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},"./src/main/webapp/templates-v6/handlebars/terms-of-service-overlay.html":function(e,t){YUI.add("squarespace-terms-of-service-overlay-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["terms-of-service-overlay.html"]=e(function(e,t,a,i,s){this.compilerInfo=[4,">= 1.0.0"];a=this.merge(a,e.helpers);s=s||{};var n="",r,o,l="function",c=this.escapeExpression;n+='<div class="overlay"></div>\n<div class="content">\n  <header class=\'title\'>\n    <h1>'+c((r=(r=t.strings,null==r||false===r?r:r.title),typeof r===l?r.apply(t):r))+'</h1>\n  </header>\n  <section>\n    <p>We have recently updated our Terms of Service. Please review them below.</p>\n    <div class=\'tos-frame\'>\n      <iframe name="tos-frame-iframe" src="';if(o=a.tosURL)o=o.call(t,{hash:{},data:s});else{o=t.tosURL;o=typeof o===l?o.apply(t):o}n+=c(o)+'?source=in-app" class="terms-of-service-frame" seamless="true" height="';if(o=a.iframeHeight)o=o.call(t,{hash:{},data:s});else{o=t.iframeHeight;o=typeof o===l?o.apply(t):o}n+=c(o)+'" width="100%">\n        <a href="';if(o=a.tosURL)o=o.call(t,{hash:{},data:s});else{o=t.tosURL;o=typeof o===l?o.apply(t):o}n+=c(o)+'" target="_blank">Squarespace Terms of Service</a>\n      </iframe>\n    </div>\n  <p>\n  By clicking \'I accept\' below you are agreeing to the <a href="';if(o=a.tosURL)o=o.call(t,{hash:{},data:s});else{o=t.tosURL;o=typeof o===l?o.apply(t):o}n+=c(o)+"\" target=\"_blank\">Squarespace Terms of Service</a>.\n  </p>\n  <div class='buttons'>\n      <div class='control button cancel'>\n        <a class='cancel' href='http://www.squarespace.com/'>"+c((r=(r=t.strings,null==r||false===r?r:r.cancel),typeof r===l?r.apply(t):r))+"</a>\n      </div>\n      <div class='control button primary accept'>\n        <a class='accept' href='#'>"+c((r=(r=t.strings,null==r||false===r?r:r.accept),typeof r===l?r.apply(t):r))+"</a>\n      </div>\n  </div>\n  </section>\n</div>\n";return n})})();var t="terms-of-service-overlay.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},"./src/main/webapp/templates-v6/handlebars/tourdates-bandsintown-list.html":function(e,t){YUI.add("squarespace-tourdates-bandsintown-list-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["tourdates-bandsintown-list.html"]=e(function(e,t,c,a,i){this.compilerInfo=[4,">= 1.0.0"];c=this.merge(c,e.helpers);i=i||{};var s="",n,u="function",d=this.escapeExpression,p=c.helperMissing,h=this,o=c.blockHelperMissing;function r(e,t){var a="",i;a+='\n    <div class="sqs-tourdates__noItems">'+d((i=(i=e.strings,null==i||false===i?i:i.loading),typeof i===u?i.apply(e):i))+"</div>\n  ";return a}function l(e,t,a){var i="",s,n;i+="\n    ";n=c["if"].call(e,(s=e.tourdates,null==s||false===s?s:s.length),{hash:{},inverse:h.program(34,R,t),fn:h.programWithDepth(4,g,t,e,a),data:t});(n||0===n)&&(i+=n);i+="\n  ";return i}function g(e,t,a,i){var s="",n,r;s+="\n      ";r={hash:{},inverse:h.noop,fn:h.programWithDepth(5,m,t,e,a,i),data:t};if(n=c.tourdates)n=n.call(e,r);else{n=e.tourdates;n=typeof n===u?n.apply(e):n}c.tourdates||(n=o.call(e,n,r));(n||0===n)&&(s+=n);s+="\n    ";return s}function m(e,t,a,i,s){var n="",r,o,l;n+='\n        <div class="sqs-tourdates__item">\n          <div class="sqs-tourdates__info">\n            <span class="sqs-tourdates__timeframe" data-tour-datetime="';if(r=c.datetime)r=r.call(e,{hash:{},data:t});else{r=e.datetime;r=typeof r===u?r.apply(e):r}n+=d(r)+'">\n              <span class="sqs-tourdates__date">';l={hash:{format:"date"},data:t};n+=d((r=c["tourdates-bit-datetime"]||e["tourdates-bit-datetime"],r?r.call(e,e.datetime,l):p.call(e,"tourdates-bit-datetime",e.datetime,l)))+'</span>\n              <span class="sqs-tourdates__weekday">';l={hash:{format:"weekday"},data:t};n+=d((r=c["tourdates-bit-datetime"]||e["tourdates-bit-datetime"],r?r.call(e,e.datetime,l):p.call(e,"tourdates-bit-datetime",e.datetime,l)))+'</span>\n            </span>\n            <div class="sqs-tourdates__venuelocation">\n              <div class="sqs-tourdates__venue">\n                <a href="https://bandsintown.com/e/';if(o=c.id)o=o.call(e,{hash:{},data:t});else{o=e.id;o=typeof o===u?o.apply(e):o}n+=d(o)+'" class="sqs-tourdates__venueLink" target="_blank" rel="noopener">\n                  <div class="sqs-tourdates__venue-name">\n                    ';o=c["if"].call(e,e.title,{hash:{},inverse:h.program(8,v,t),fn:h.program(6,f,t),data:t});(o||0===o)&&(n+=o);n+="\n                    @ ";l={hash:{format:"time"},data:t};n+=d((r=c["tourdates-bit-datetime"]||e["tourdates-bit-datetime"],r?r.call(e,e.datetime,l):p.call(e,"tourdates-bit-datetime",e.datetime,l)))+" ";o=c["if"].call(e,(r=e.venue,null==r||false===r?r:r.timezone),{hash:{},inverse:h.noop,fn:h.program(10,b,t),data:t});(o||0===o)&&(n+=o);n+="\n                  </div>\n                  ";l={hash:{compare:1},inverse:h.noop,fn:h.program(12,S,t),data:t};o=(r=c.if_gt||e.if_gt,r?r.call(e,(r=e.lineup,null==r||false===r?r:r.length),l):p.call(e,"if_gt",(r=e.lineup,null==r||false===r?r:r.length),l));(o||0===o)&&(n+=o);n+='\n                </a>\n              </div>\n              <div class="sqs-tourdates__location">\n                ';l={hash:{},inverse:h.program(18,E,t),fn:h.program(16,C,t),data:t};o=(r=c["equals-string"]||e["equals-string"],r?r.call(e,(r=e.venue,null==r||false===r?r:r.type),"Virtual",l):p.call(e,"equals-string",(r=e.venue,null==r||false===r?r:r.type),"Virtual",l));(o||0===o)&&(n+=o);n+='\n              </div>\n            </div>\n          </div>\n          <div class="sqs-tourdates__actions">\n            ';o=c.each.call(e,e.offers,{hash:{},inverse:h.noop,fn:h.programWithDepth(21,A,t,s),data:t});(o||0===o)&&(n+=o);n+="\n\n            ";l={hash:{},inverse:h.programWithDepth(32,N,t,a,i),fn:h.programWithDepth(27,k,t,a),data:t};o=(r=c["equals-string"]||e["equals-string"],r?r.call(e,(r=e.venue,null==r||false===r?r:r.type),"Virtual",l):p.call(e,"equals-string",(r=e.venue,null==r||false===r?r:r.type),"Virtual",l));(o||0===o)&&(n+=o);n+="\n          </div>\n        </div>\n      ";return n}function f(e,t){var a="",i;a+="\n                      ";if(i=c.title)i=i.call(e,{hash:{},data:t});else{i=e.title;i=typeof i===u?i.apply(e):i}a+=d(i)+"\n                    ";return a}function v(e,t){var a="",i;a+="\n                      "+d((i=(i=e.venue,null==i||false===i?i:i.name),typeof i===u?i.apply(e):i))+"\n                    ";return a}function b(e,t){var a="",i,s;a+=" ";s={hash:{},data:t};a+=d((i=c["tourdates-timezone-abbr"]||e["tourdates-timezone-abbr"],i?i.call(e,(i=e.venue,null==i||false===i?i:i.timezone),s):p.call(e,"tourdates-timezone-abbr",(i=e.venue,null==i||false===i?i:i.timezone),s)))+" ";return a}function S(e,t){var a="",i;a+='\n                    <div class="sqs-tourdates__lineup">';i=c.each.call(e,e.lineup,{hash:{},inverse:h.noop,fn:h.program(13,y,t),data:t});(i||0===i)&&(a+=i);a+="</div>\n                  ";return a}function y(e,t){var a,i,s;s={hash:{compare:0},inverse:h.noop,fn:h.program(14,_,t),data:t};i=(a=c.if_gt||e.if_gt,a?a.call(e,(a=t,null==a||false===a?a:a.index),s):p.call(e,"if_gt",(a=t,null==a||false===a?a:a.index),s));return i||0===i?i:""}function _(e,t){var a="";a+='<div class="sqs-tourdates__lineup-item">'+d(typeof e===u?e.apply(e):e)+"</div>";return a}function C(e,t){return"\n                "}function E(e,t){var a="",i,s;a+='\n                  <a href="https://bandsintown.com/e/';if(i=c.id)i=i.call(e,{hash:{},data:t});else{i=e.id;i=typeof i===u?i.apply(e):i}a+=d(i)+'" class="sqs-tourdates__venue-link" target="_blank" rel="noopener">\n                    '+d((i=(i=e.venue,null==i||false===i?i:i.city),typeof i===u?i.apply(e):i))+", ";s=c["if"].call(e,(i=e.venue,null==i||false===i?i:i.region),{hash:{},inverse:h.noop,fn:h.program(19,w,t),data:t});(s||0===s)&&(a+=s);a+=d((i=(i=e.venue,null==i||false===i?i:i.country),typeof i===u?i.apply(e):i))+"\n                  </a>\n                ";return a}function w(e,t){var a="",i;a+=d((i=(i=e.venue,null==i||false===i?i:i.region),typeof i===u?i.apply(e):i))+", ";return a}function A(e,t,a){var i="",s,n,r;i+="\n              ";r={hash:{},inverse:h.noop,fn:h.programWithDepth(22,T,t,a),data:t};n=(s=c["equals-string"]||e["equals-string"],s?s.call(e,e.status,"available",r):p.call(e,"equals-string",e.status,"available",r));(n||0===n)&&(i+=n);i+="\n            ";return i}function T(e,t,a){var i="",s,n,r;i+='\n                <a href="';if(s=c.url)s=s.call(e,{hash:{},data:t});else{s=e.url;s=typeof s===u?s.apply(e):s}i+=d(s)+'" class="sqs-editable-button sqs-tourdates__button';r={hash:{},inverse:h.noop,fn:h.program(23,I,t),data:t};n=(s=c["equals-string"]||e["equals-string"],s?s.call(e,e.type,"Sold Out",r):p.call(e,"equals-string",e.type,"Sold Out",r));(n||0===n)&&(i+=n);i+='" ';n=c["if"].call(e,a.newWindow,{hash:{},inverse:h.noop,fn:h.program(25,q,t),data:t});(n||0===n)&&(i+=n);i+=">\n                  ";if(n=c.type)n=n.call(e,{hash:{},data:t});else{n=e.type;n=typeof n===u?n.apply(e):n}i+=d(n)+"\n                </a>\n              ";return i}function I(e,t){return" sqs-tourdates__button--soldout"}function q(e,t){return'target="_blank" rel="noopener"'}function k(e,t,a){var i="",s,n,r;i+="\n              ";r={hash:{},inverse:h.programWithDepth(30,D,t,a),fn:h.program(28,L,t),data:t};n=(s=c["is-live"]||e["is-live"],s?s.call(e,e.offers,r):p.call(e,"is-live",e.offers,r));(n||0===n)&&(i+=n);i+="\n            ";return i}function L(e,t){return"\n              "}function D(e,t,a){var i="",s;i+='\n                <a class="sqs-editable-button sqs-tourdates__button" href="';if(s=c.url)s=s.call(e,{hash:{},data:t});else{s=e.url;s=typeof s===u?s.apply(e):s}i+=d(s)+'" ';s=c["if"].call(e,a.newWindow,{hash:{},inverse:h.noop,fn:h.program(25,q,t),data:t});(s||0===s)&&(i+=s);i+=">\n                  "+d((s=(s=a.strings,null==s||false===s?s:s.notifyMe),typeof s===u?s.apply(e):s))+"\n                </a>\n              ";return i}function N(e,t,a,i){var s="",n;s+='\n              <a class="sqs-editable-button sqs-tourdates__button" href="';if(n=c.url)n=n.call(e,{hash:{},data:t});else{n=e.url;n=typeof n===u?n.apply(e):n}s+=d(n)+'" ';n=c["if"].call(e,i.newWindow,{hash:{},inverse:h.noop,fn:h.program(25,q,t),data:t});(n||0===n)&&(s+=n);s+=">\n                "+d((n=(n=a.strings,null==n||false===n?n:n.rsvp),typeof n===u?n.apply(e):n))+"\n              </a>\n            ";return s}function R(e,t){var a="",i;a+='\n      <div class="sqs-tourdates__item-no-results">'+d((i=(i=e.strings,null==i||false===i?i:i.noResults),typeof i===u?i.apply(e):i))+"</div>\n    ";return a}s+='<script type="application/ld+json">';if(n=c.structuredData)n=n.call(t,{hash:{},data:i});else{n=t.structuredData;n=typeof n===u?n.apply(t):n}(n||0===n)&&(s+=n);s+='<\/script>\n<div class="sqs-tourdates">\n  ';n=c["if"].call(t,t.loading,{hash:{},inverse:h.programWithDepth(3,l,i,t),fn:h.program(1,r,i),data:i});(n||0===n)&&(s+=n);s+="\n</div>\n";return s})})();var t="tourdates-bandsintown-list.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},"./src/main/webapp/templates-v6/handlebars/widgets-list-base-item-view.html":function(e,t){YUI.add("squarespace-widgets-list-base-item-view-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["widgets-list-base-item-view.html"]=e(function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"];n=this.merge(n,e.helpers);i=i||{};var s="",r,o,l,c="function",u=this.escapeExpression,d=n.helperMissing,p=this,h=n.blockHelperMissing;function g(e,t){return" has-thumbnail"}function m(e,t){var a="",i;a+='\n      <div class="thumbnail" style="background-image: url(';if(i=n.coverImageUrl)i=i.call(e,{hash:{},data:t});else{i=e.coverImageUrl;i=typeof i===c?i.apply(e):i}a+=u(i)+'?format=100w)"></div>\n    ';return a}function f(e,t){return"has-title"}function v(e,t){return"no-title"}function b(e,t){var a;if(a=n.icon)a=a.call(e,{hash:{},data:t});else{a=e.icon;a=typeof a===c?a.apply(e):a}return u(a)}function S(e,t){var a;if(a=n.title)a=a.call(e,{hash:{},data:t});else{a=e.title;a=typeof a===c?a.apply(e):a}return u(a)}function y(e,t){var a;if(a=n.noTitle)a=a.call(e,{hash:{},data:t});else{a=e.noTitle;a=typeof a===c?a.apply(e):a}return u(a)}function _(e,t){var a="",i;a+='\n      <span class="status">';if(i=n.message)i=i.call(e,{hash:{},data:t});else{i=e.message;i=typeof i===c?i.apply(e):i}a+=u(i)+"</span>\n    ";return a}function C(e,t){var a="",i;a+='\n      <span class="event-date-descriptor">';if(i=n.eventDateDescriptor)i=i.call(e,{hash:{},data:t});else{i=e.eventDateDescriptor;i=typeof i===c?i.apply(e):i}(i||0===i)&&(a+=i);a+="</span>\n    ";return a}function E(e,t){var a="",i;a+="\n      ";i=n["if"].call(e,e.publishOn,{hash:{},inverse:p.program(22,A,t),fn:p.program(20,w,t),data:t});(i||0===i)&&(a+=i);a+="\n    ";return a}function w(e,t){var a="",i;a+='\n        <span class="publish-on">';if(i=n.publishOn)i=i.call(e,{hash:{},data:t});else{i=e.publishOn;i=typeof i===c?i.apply(e):i}a+=u(i)+"</span>\n      ";return a}function A(e,t){var a="",i;a+="\n        ";i=n["if"].call(e,e.addedOn,{hash:{},inverse:p.noop,fn:p.program(23,T,t),data:t});(i||0===i)&&(a+=i);a+="\n      ";return a}function T(e,t){var a="",i,s;a+='\n          <span class="added-on"';s={hash:{format:"ll"},data:t};a+=u((i=n["date-format"]||e["date-format"],i?i.call(e,e.addedOn,s):d.call(e,"date-format",e.addedOn,s)))+"</span>\n        ";return a}function I(e,t){var a="",i;a+='\n      <span class="separator">&nbsp;&middot;&nbsp;</span> <span class="display-name">'+u((i=(i=e.author,null==i||false===i?i:i.displayName),typeof i===c?i.apply(e):i))+"</span>\n    ";return a}function q(e,t){var a="",i;a+='\n    <div class="flag ';if(i=n.className)i=i.call(e,{hash:{},data:t});else{i=e.className;i=typeof i===c?i.apply(e):i}a+=u(i)+'">\n      ';if(i=n.message)i=i.call(e,{hash:{},data:t});else{i=e.message;i=typeof i===c?i.apply(e):i}a+=u(i)+"\n    </div>\n  ";return a}s+='<div class="list-item';r=n["if"].call(t,t.coverImageUrl,{hash:{},inverse:p.noop,fn:p.program(1,g,i),data:i});(r||0===r)&&(s+=r);s+='">\n    ';r=n["if"].call(t,t.coverImageUrl,{hash:{},inverse:p.noop,fn:p.program(3,m,i),data:i});(r||0===r)&&(s+=r);s+='\n\n  <header class="list-item-header">\n    <h2 class="';r=n["if"].call(t,t.title,{hash:{},inverse:p.program(7,v,i),fn:p.program(5,f,i),data:i});(r||0===r)&&(s+=r);s+='">\n    <span class="icon collection-icon ';r=n["if"].call(t,t.icon,{hash:{},inverse:p.noop,fn:p.program(9,b,i),data:i});(r||0===r)&&(s+=r);s+='"></span>\n    <span class="title">';r=n["if"].call(t,t.title,{hash:{},inverse:p.program(13,y,i),fn:p.program(11,S,i),data:i});(r||0===r)&&(s+=r);s+='</span>\n    </h2>\n  </header>\n\n  <div class="meta">\n    ';l={hash:{},inverse:p.noop,fn:p.program(15,_,i),data:i};if(r=n.flag)r=r.call(t,l);else{r=t.flag;r=typeof r===c?r.apply(t):r}n.flag||(r=h.call(t,r,l));(r||0===r)&&(s+=r);s+="\n\n    ";r=n["if"].call(t,t.eventDateDescriptor,{hash:{},inverse:p.program(19,E,i),fn:p.program(17,C,i),data:i});(r||0===r)&&(s+=r);s+="\n\n    ";o=n["if"].call(t,(r=t.author,null==r||false===r?r:r.displayName),{hash:{},inverse:p.noop,fn:p.program(25,I,i),data:i});(o||0===o)&&(s+=o);s+="\n  </div>\n\n  ";l={hash:{},inverse:p.noop,fn:p.program(27,q,i),data:i};if(o=n.flag)o=o.call(t,l);else{o=t.flag;o=typeof o===c?o.apply(t):o}n.flag||(o=h.call(t,o,l));(o||0===o)&&(s+=o);s+="\n</div>\n";return s})})();var t="widgets-list-base-item-view.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},"./src/main/webapp/templates-v6/handlebars/widgets-music-album-track.html":function(e,t){YUI.add("squarespace-widgets-music-album-track-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["widgets-music-album-track.html"]=e(function(e,t,a,i,s){this.compilerInfo=[4,">= 1.0.0"];a=this.merge(a,e.helpers);s=s||{};return'<span class="title"></span>\n<div class="meta">\n  <span class="artist-name"></span>\n  <span class="duration"></span>\n</div>\n<div class="utils">\n  <a class="remove">Remove</a>\n</div>'})})();var t="widgets-music-album-track.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},"./src/main/webapp/templates-v6/handlebars/youtube-oembed.html":function(e,t){YUI.add("squarespace-youtube-oembed-template",function(e){var a=e.Handlebars;(function(){var e=a.template,t=a.templates=a.templates||{};t["youtube-oembed.html"]=e(function(e,t,a,i,s){this.compilerInfo=[4,">= 1.0.0"];a=this.merge(a,e.helpers);s=s||{};var n="",r,o="function",l=this.escapeExpression;n+='<iframe src="';if(r=a.src)r=r.call(t,{hash:{},data:s});else{r=t.src;r=typeof r===o?r.apply(t):r}n+=l(r)+'" height="'+l((r=(r=t.data,null==r||false===r?r:r.height),typeof r===o?r.apply(t):r))+'" width="'+l((r=(r=t.data,null==r||false===r?r:r.width),typeof r===o?r.apply(t):r))+'" scrolling="no" frameborder="0" allowfullscreen>\n</iframe>';return n})})();var t="youtube-oembed.html";e.Handlebars.registerPartial(t.replace("/","."),a.templates[t])},"1.0",{requires:["handlebars-base"]})},"./src/main/webapp/universal/scripts-layout-engine/aspect-ratio-manager.js":function(e,t){YUI.add("@sqs/layout-engine/aspect-ratio-manager",function(i){var e=i.Base.create("AspectRatioManager",i.Base,[],{initializeBlock:function(e,t){var a=t;i.Lang.isObject(a)&&(a=a.aspectRatio);if(i.Lang.isValue(a)){e.addClass("sqs-intrinsic");e.setStyle("paddingBottom",a+"%");e.one("> div")&&e.one("> div").addClass("sqs-intrinsic-content")}},destroyBlock:function(e){var t=e.one(".sqs-intrinsic");if(t){t.removeClass("sqs-intrinsic");t.setStyle("padding-bottom",null);t.one(".sqs-intrinsic-content")&&t.one(".sqs-intrinsic-content").removeClass("sqs-intrinsic-content")}},initAllBlocks:function(){var e=i.all(".sqs-block[data-aspect-ratio]:not(.sqs-block-image)");e.each(function(e){i.SQS.LayoutEngine.AspectRatioManager.initializeBlock(e.one(".sqs-block-content"),i.JSON.parse(e.getAttribute("data-aspect-ratio")))},this)}});i.namespace("SQS.LayoutEngine");i.SQS.LayoutEngine.AspectRatioManager=new e;i.config.win.Squarespace&&i.config.win.Squarespace.onInitialize&&i.config.win.Squarespace.onInitialize(i,i.SQS.LayoutEngine.AspectRatioManager.initAllBlocks)},"1.0",{requires:["base"]})},"./src/main/webapp/universal/scripts-layout-engine/block-content/base.js":function(e,t){YUI.add("@sqs/layout-engine/block-content-base",function(a){var e=function(){};a.namespace("SQS.LayoutEngine.BlockContent");var t=a.SQS.LayoutEngine.BlockContent.Base=function e(){a.before(this._bindUIBlock,this,"bindUI");a.before(this._syncUIBlock,this,"syncUI")};t.prototype={_bindDOM:e,_bindUIBlock:function(){this.after("editableChange",this.syncUI,this)},_syncUIBlock:function(){this.syncEditable()},syncEditable:function(){var e=this.get("editable");var t=this.get("editor");if(!a.Lang.isValue(t))return;e&&!this.hasPlugin(t.NS)?this.plug(t):!e&&this.hasPlugin(t.NS)&&this.unplug(t)},toJSON:function(){var e=this.get("model").toJSON();delete e.id;return e},destructor:function(){this.unplug()},_onDocFocus:e};t.ATTRS={tabIndex:{value:null},editable:{value:false,lazyAdd:false}}},"1.0",{requires:[]})},"./src/main/webapp/universal/scripts-layout-engine/block-content/html-editor-base.js":function(e,t){YUI.add("@sqs/layout-engine/block-content-html-editor-base",function(l){var e=function(){};l.namespace("SQS.LayoutEngine.BlockContent");l.SQS.LayoutEngine.BlockContent.HtmlEditorBase=l.Base.create("contentHtmlEditor",l.Plugin.Base,[],{initializer:function(){var e=this.get("host");this.block=e.get("parent");this.initEngine(this.block);this.afterHostEvent("focusedChange",function(e){e.newVal?this._afterFocus(e):this._afterBlur(e)},this);this.once("initializedChange",this.syncEditorUI,this);e.get("boundingBox").addClass("sqs-editing")},syncEditorUI:e,_getVisualEditorData:function(){throw new Error("_getVisualEditorData() not implemented.")},initEngine:function(){var e=this.get("host").get("model").get("engine");switch(e){case"text":case"textNoBreak":this.initTextEngine();break;case"wysiwyg":case"visual":this.initVisualEngine();break}},initTextEngine:function(){var e=this.get("host");var t=e.get("model").get("engine");var a=e.get("placeholderText");var i=e.get("boundingBox");var s=e.get("contentBox");this.titleEditable=l.Node.create('<textarea class="sqs-textarea-editor" placeholder="'+a+'" autocapitalize="on">'+l.Escape.html(e.get("model").get("html"))+"</textarea>");i.appendChild(this.titleEditable);var n=this.textarea=i.one("textarea");var r=["font","text-align","text-rendering","letter-spacing","text-transform","color"];var o=this.get("host").get("referenceNode")||s;r.forEach(function(e){var t=o.getComputedStyle(e);n.setStyle(e,t);o!==s&&s.setStyle(e,t)},this);"textNoBreak"===t&&n.on("keydown",function(e){13===e.keyCode&&e.preventDefault()},this);n.on("valuechange",function(e){var t=l.Escape.html(e.target.get("value"));if(-1!==t.indexOf("\n")){t=t.replace(/\n/g," ");n.set("value",t)}this.get("host").get("model").set("html",e.target.get("value"));this.get("host").syncUI()},this)},initVisualEngine:function(){throw new Error("initVisualEngine() not implemented!")},_giveEditorFocus:e,_afterFocus:function(e){this._giveEditorFocus()},_afterBlur:function(e){this._save();this._fireContentUpdate()},_save:function(e){var t=this.get("host").get("model");this.visualEditor?"string"!==typeof e&&(e=this._getVisualEditorData()):this.textarea&&(e=this.textarea.get("value"));l.Lang.isValue(e)&&t.setAttrs({source:e,html:e});this.block&&this.block.get("isNewBlock")&&this.block.set("isNewBlock",false)},_fireContentUpdate:function(){this.block&&this.block.fire("widget:contentUpdate")},_destroyVisualEditor:function(){throw new Error("_destroyVisualEditor not implemented.")},destructor:function(){this.get("host").get("boundingBox").removeClass("sqs-editing");this._destroyVisualEditor();this.titleEditable&&this.titleEditable.remove()}},{NS:"contentEditor",ATTRS:{tabIndex:{value:0}}})},"2.0",{requires:["node","base","plugin"]})},"./src/main/webapp/universal/scripts-layout-engine/block-content/html.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./common/temp/node_modules/@sqs/utils/string/isBlankWithoutTags.js");YUI.add("@sqs/layout-engine/block-content-html",function(t){t.namespace("SQS.LayoutEngine.BlockContent");t.SQS.LayoutEngine.BlockContent.Html=t.Base.create("html",t.Widget,[t.WidgetChild,t.SQS.LayoutEngine.BlockContent.Base,t.SQS.LayoutEngine.Mixins.EventRegistrar],{initializer:function(e){e&&e.model||this.set("model",{});var t=this.get("boundingBox");t.addClass("sqs-dd-invalid-handle");if(this.get("copyReferenceNodeClassNames")){var a=this.get("referenceNode").get("className");t.addClass(a)}},bindUI:function(){this._registerEvent(this.get("model").after("change",this._syncEmptyState,this))},syncUI:function(){var e=this.get("model").get("html");var t=this.get("parent");(t&&t.get("editController").isMobileApp()||!this.get("editable")||-1===["visual","wysiwyg"].indexOf(this.get("model").get("engine")))&&this.get("contentBox").set("innerHTML",e);this.hasPlugin("contentEditor")&&this.contentEditor.syncEditorUI(e);this._syncEmptyState()},isEmpty:function(){return s(this.get("model").get("html"))},_syncEmptyState:function(){var e=this.get("boundingBox");e&&e.getDOMNode()&&e.toggleClass("sqs-empty",this.isEmpty())},setContent:function(e,t){this.get("model").set("html",e||"",t);this.syncUI();this.get("parent")&&this.get("parent").fire("widget:contentUpdate")}},{CSS_PREFIX:"sqs-html",ATTRS:{model:{lazyAdd:false,writeOnce:true,setter:function(e){if(t.instanceOf(e,t.SQS.LayoutEngine.ContentModel.Html))return e;if(t.Lang.isObject(e))return new t.SQS.LayoutEngine.ContentModel.Html(e)}},placeholderText:{value:i("Write here…")},editor:{},enableDelete:{value:false},isSingleLine:{value:false},hasHyperlink:{value:true},tabIndex:{value:null},type:{value:"full"},referenceNode:{},copyReferenceNodeClassNames:{value:false}}});t.namespace("SQS.LayoutEngine.ContentModel");t.SQS.LayoutEngine.ContentModel.Html=t.Base.create("HtmlContentModel",t.Model,[],{},{ATTRS:{engine:{value:"wysiwyg"},source:{value:""},html:{value:""}}})},"1.0",{requires:["base","model","@sqs/layout-engine/block-content-base","@sqs/layout-engine/event-registrar","widget","widget-child"]})},"./src/main/webapp/universal/scripts-layout-engine/block-content/image-editor-base.js":function(e,t,a){var i=a("./src/main/webapp/frontend/packages/enums/JobStatuses.js");YUI.add("@sqs/layout-engine/block-content-image-editor-base",function(o){o.namespace("SQS.LayoutEngine.BlockContent");o.SQS.LayoutEngine.BlockContent.ImageEditorBase=o.Base.create("ImageEditor",o.Plugin.Base,[],{initializer:function(){var e=this.get("host");var t=this._model=e.get("model");this._bb=e.get("boundingBox");this._cb=e.get("contentBox");t.on("aspectRatioChange",e.blur,this);t.after(["imageIdChange","isBase64Change"],this.syncUploadUI,this);this.syncUploadUI()},syncUploadUI:function(){console.info("ImageEditorBase: No syncUploadUI method provided")},jobUpdate:function(e){e.status==i.SUCCESS&&this._model.setAttrs({isBase64:false,processing:false})},uploadProgress:function(e){var t=e.lowresImage;var a=e.itemRepresentation;if(e.failed){this._updateModel({completed:null,processing:false,baseAssetUrl:null,isBase64:false,imageId:null});return}var i={completed:e.completed||0};o.Lang.isNumber(e.completed)&&1==e.completed&&(i.processing=true);if(o.Lang.isValue(t)){this._bb.toggleClass("uploading",1!==e.completed);var s=e.dimensions.split("x");var n=parseInt(s[0],10);var r=parseInt(s[1],10);i.isBase64=true;i.baseAssetUrl=t;i.completed=0;i.dimensions={width:n,height:r};i.aspectRatio=r/n*100}if(o.Lang.isObject(a)){i.baseAssetUrl=a.assetUrl;i.imageId=a.id}this._updateModel(i)},_updateModel:function(e){this._model.setAttrs(e);this.get("host").get("parent")&&this.get("host").get("parent").get("isNewBlock")&&this.get("host").get("parent").set("isNewBlock",false)},destructor:function(){this._model=null;this._cb=null;this._bb=null}},{NS:"contentEditor",ATTRS:{editing:{value:false},tabIndex:{value:0},focused:{value:false,readOnly:true}}})},"2.0",{requires:["node","base","plugin"]})},"./src/main/webapp/universal/scripts-layout-engine/block-content/image.js":function(e,t,a){var n=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var i=a("./src/main/webapp/frontend/packages/enums/MediaProcessingState.js");var s=a("./src/main/webapp/universal/src/shared/utils/Loggers.ts");var o=s.createLogger("block-content/image","orange",false);var l=s.createWarningLogger("block-content/image");var c=s.createGroup("%c[block-content/image]","orange",[],false);var u=[i.QUEUED,i.PROCESSING];var d=[i.ERROR,i.DOWNLOAD_ERROR,i.ERROR_TOO_LARGE,i.ERROR_FILE_NOT_FOUND,i.ERROR_UNSUPPORTED_IMAGE_TYPE];YUI.add("@sqs/layout-engine/block-content-image",function(r){r.namespace("SQS.LayoutEngine.BlockContent");var s=r.SQS.LayoutEngine.BlockContent.Image=r.Base.create("image",r.Widget,[r.WidgetChild,r.SQS.LayoutEngine.BlockContent.Base],{destructor:function(){this.emptyImageNode()},render:function(){o("ImageBlockContent - render");var t=this.get("model");if(!t.isEmpty()&&!t.isImageDataLoaded()){var a=r.Lang.isValue(this.get("parent"));if(a){var i=r.bind(function(){this.get("parent").set("stack",null)},this);var e=this.get("parent").get("stack");e&&(i=e.add(i))}o("ImageBlockContent - Loading image data");t.loadImageData().then(r.bind(function e(){o("ImageBlockContent - Loaded image data: ",{baseAssetUrl:t.get("baseAssetUrl"),dimensions:t.get("dimensions")});r.Lang.isValue(this.get("boundingBox"))&&r.Lang.isValue(this.get("boundingBox").getDOMNode())&&this.syncUI();a&&i();this.fire("image-loaded")},this))}s.superclass.render.apply(this,arguments)},syncUI:function(){if(!this.get("contentBox").getDOMNode()){o("ImageBlockContent - image contentBox no longer present to render into");return}c.group("syncUI");this._syncImageRendering();this._syncAspectRatio();this._syncStretch();this._adjustImage();c.groupEnd()},bindUI:function(){var s=this.get("model");s.after(["imageIdChange","completedChange","errorChange"],this.syncUI,this);s.after(["dimensionsChange","stretchChange"],function(e){if(e.silent)return;this._syncStretch()},this);s.after(["aspectRatioChange","dimensionsChange","stretchChange"],function(e){if(e.silent)return;this._syncAspectRatio()},this);s.after(["focalPointChange","aspectRatioChange","dimensionsChange","stretchChange"],function e(t){if(t.silent)return;this._syncImageRendering();this._adjustImage()},this);r.Lang.isValue(s.get("vSize"))&&s.after("vSizeChange",function(e){if(e.silent)return;var t=this.get("contentBox").get("offsetHeight");var a=this.get("contentBox").get("offsetWidth");var i=t/a*100;o("ImageBlockContent - vSizeChange - recalculating aspectRatio",i);s.set("aspectRatio",i)},this)},emptyImageNode:function(){if(this.imgNode){this.imgNode.remove(true);this.imgNode=null}},showEmptyImageState:function(){var t=this.get("model");var e=this.get("boundingBox");e.addClass("sqs-empty");this.emptyImageNode();if(t.get("error")){o("ImageBlockContent - Image emptied with error",t.get("error"));this.set("editing",false);if(!this.errorNode){e.addClass("sqs-error");this.errorNode=this.get("contentBox").appendChild('<div class="error-wrapper"><div class="message"></div><a href="#" class="clear">Clear</a></div>');this.errorNode.one("a.clear").on("click",function(e){e.halt();this.errorNode.remove();this.errorNode=null;this.set("editing",true);t.setAttrs({error:null,imageId:null})},this)}this.errorNode.one(".message").setContent(t.get("error"))}},_imageStateIsEmpty:function(){var e=this.get("model");return e.isEmpty()||e.get("error")||!e.get("isBase64")&&e.get("processing")},_syncImageRendering:function(){o("ImageBlockContent - _syncImageRendering");var e=this.get("boundingBox");if(!e.getDOMNode())return;if(this._imageStateIsEmpty()){this.showEmptyImageState();return}if(this.errorNode){this.errorNode.remove();this.errorNode=null;e.removeClass("sqs-error")}if(!this.imgNode){this.imgNode=r.Node.create("<img>");this.imgNode.on("load",this._fireContentUpdate,this);this.get("contentBox").append(this.imgNode)}e.removeClass("sqs-empty")},_syncAspectRatio:function(e){var t=this.get("model");var a=t.get("aspectRatio")||133;var i=t.get("dimensions");var s=this.get("contentBox");if(!s.getDOMNode())return;var n=t.get("vSize");if(r.Lang.isValue(n)){o("ImageBlockContent - Applying vSize value",n,"(pixel value: "+24*n+")");s.setStyle("paddingBottom",24*n);return}if(!a){o("ImageBlockContent - Image not loaded or missing aspect ratio, calculating...");if(i){o("ImageBlockContent - Applying evaluated aspectRatio (from dimensions)",a);a=i.height/i.width*100}else{o("ImageBlockContent - Evaluating `aspectRatio` to 133% (no dimensions found)");a=133}}a=parseFloat(a)+"%";o("ImageBlockContent - Applying aspectRatio",a);s.setStyle("paddingBottom",a)},_syncStretch:function(){var e=this.get("boundingBox");var t=this.get("model");var a=t.get("stretch");var i=t.get("dimensions");var s=!a&&r.Lang.isValue(i);if(!e.getDOMNode())return;e.setStyle("maxWidth",s?i.width:null);e.toggleClass("stretch",s)},_attemptToEvaluateDimensions:function(){var t=this.get("model");if(r.Lang.isValue(t.get("baseAssetUrl"))){o("ImageBlockContent - Dimensions missing, attempting to evaluate dimensions in the browser");var a=new Image;a.addEventListener("load",r.bind(function e(){o("ImageBlockContent - Image dimensions after load",{width:a.width,height:a.height});t.set("dimensions",{width:a.width,height:a.height});this.syncUI()},this));a.src=t.get("baseAssetUrl")}},_adjustImage:function(){if(!this.imgNode){l("_adjustImage called without an imgNode in existence.");return}o("ImageBlockContent - _adjustImage");var e=this.get("model");var t=this.get("boundingBox");if(e.isEmpty()||!e.isImageDataLoaded()||!t.getDOMNode())return;var a=e.get("dimensions");if(!r.Lang.isValue(a)){this._attemptToEvaluateDimensions();return}t.addClass("sqs-intrinsic intrinsic");var i=e.get("focalPoint").split(",");var s={x:parseFloat(i[0]),y:parseFloat(i[1])};var n={focalPoint:s,mode:"fill",fixedRatio:true,stretch:e.get("stretch"),useAdvancedPositioning:true};e.get("isBase64")||(n.source=e.get("baseAssetUrl"));e.get("dimensions")&&(n.dimensions=e.get("dimensions"));o("ImageBlockContent - Image adjusted, triggering load with ImageLoader",n);this.imgNode&&ImageLoader.load(this.imgNode,n)},_fireContentUpdate:function(){o("ImageBlockContent - _fireContentUpdate");this.get("parent")&&this.get("parent").fire("widget:contentUpdate")}},{CSS_PREFIX:"sqs-image",ATTRS:{model:{writeOnce:true,setter:function(e){if(r.Lang.isObject(e))return new r.SQS.LayoutEngine.ContentModel.Image(e);if(r.instanceOf(e,r.SQS.LayoutEngine.ContentModel.Image))return e},value:{},lazyAdd:false},tabIndex:{value:null},editor:{valueFn:function(){console.error("Must implement Image Editor")}}}});r.namespace("SQS.LayoutEngine.ContentModel");r.SQS.LayoutEngine.ContentModel.Image=r.Base.create("ImageContentModel",r.Model,[],{initializer:function(){this.setImageContentItem({id:this.get("imageId"),collectionId:this.get("collectionId")});this.after("imageIdChange",function(e){o("ImageContentModel - imageIdChange",{newId:e.newVal});if(!e.newVal){this.set("dimensions",null);this.set("processing",null);this.set("error",null);this.set("baseAssetUrl",null);this.set("aspectRatio",null);this.set("stretch",false);this.set("licensedAssetPreview",null);this.set("licensedAssetId",null);return}this.setImageContentItem({id:e.newVal,collectionId:this.get("collectionId")})},this)},setImageContentItem:function(e){var t=r.SQS.LayoutEngine.ContentItem.getCtor();this._imageContentItem=new t(e);this._imageContentItem.after("mediaProcessingStateChange",function(e){if(e.newVal===i.READY){o("ImageContentModel - image MediaProcessingState.READY");this.loadImageData()}},this);return this._imageContentItem},getImageContentItemField:function(e){return this._imageContentItem.get(e)},setItemData:function(e){this._imageContentItem.setAttrs(e);r.Lang.isString(e.id)&&this.set("imageId",e.id)},isEmpty:function(){return!this.get("imageId")&&!this.get("isBase64")},isImageDataLoaded:function(){var e=this.get("baseAssetUrl");return r.Lang.isValue(e)},loadImageData:function e(){var t=!r.Lang.isValue(this._itemPromise)||"pending"!==this._itemPromise.getStatus();if(!t)return this._itemPromise;o("ImageContentModel - loadImageData");this._itemPromise=new r.Promise(r.bind(function(t,e){this._imageContentItem.load(r.bind(function(e){c.group("ImageContentModel - content item loaded",this._imageContentItem);e?e.notFound?this.set("error",n("The requested image could not be found.")):this.set("error",e.error):this.applyAttrsFromContentItem(this._imageContentItem);c.groupEnd();t();this._itemPromise=null},this))},this));return this._itemPromise},applyAttrsFromContentItem:function(e){c.group("applyAttrsFromContentItem. Ensure no syncUIs!");var t=e.get("mediaProcessingState");if(-1!==d.indexOf(t))this.set("error",n("There was an error while processing the image."));else if(-1!==u.indexOf(t))this.set("processing",true);else{this.set("licensedAssetPreview",e.get("licensedAssetPreview"));this.set("licensedAssetId",e.get("licensedAssetId"));this.set("processing",false);this.set("baseAssetUrl",e.get("assetUrl"));this.set("dimensions",e.get("originalSize"),{silent:true});this.set("focalPoint",e.get("mediaFocalPoint"),{silent:true});this.set("filename",e.get("filename"));var a=this.get("dimensions");if(!r.Lang.isValue(this.get("aspectRatio"))&&r.Lang.isValue(a)){var i=a.height/a.width*100;this.set("aspectRatio",i,{silent:true})}}c.groupEnd()},saveFocalPoint:function(){this._imageContentItem.set("mediaFocalPoint",this.get("focalPoint"));this._imageContentItem.save({fields:["mediaFocalPoint"]})},reset:function(){this.set("aspectRatio",void 0);this.set("baseAssetUrl",void 0)}},{ATTRS:{imageId:{},isBase64:{},baseAssetUrl:{value:null},dimensions:{setter:function(e){if(r.Lang.isString(e)){var t=e.split("x");return{width:t[0],height:t[1]}}if(r.Lang.isValue(e))return e}},aspectRatio:{setter:function(e){e=parseFloat(e);return r.Lang.isNumber(e)?e:null}},focalPoint:{value:"0.5, 0.5",setter:function(e){if(r.Lang.isObject(e))return e.x+","+e.y;return e||"0.5, 0.5"}},scale:{value:"cover",setter:function(e){return"cover"===e||"contain"===e?e:"cover"}},filename:{value:null,validator:r.Squarespace.AttrValidators.isNullOrString},licensedAssetPreview:{value:null},licensedAssetId:{value:null,validator:r.Squarespace.AttrValidators.isNullOrString}}})},"1.0",{requires:["model","widget","widget-child","promise","@sqs/layout-engine/content-item-content-item","@sqs/layout-engine/block-content-base"]})},"./src/main/webapp/universal/scripts-layout-engine/block-label.js":function(e,t){YUI.add("@sqs/layout-engine/block-label",function(e){var t=e.namespace("SQS.LayoutEngine.Block").Label=e.Base.create("blockLabel",e.Widget,[e.WidgetChild],{renderUI:function(){t.superclass.renderUI.call(this);this.get("contentBox").empty();this.get("contentBox").setHTML(this.get("label"))}},{CSS_PREFIX:"sqs-blocklabel",NS:"blockLabel",ATTRS:{label:{value:null}}})},"1.0",{requires:["base","widget","widget-child"]})},"./src/main/webapp/universal/scripts-layout-engine/block-model/gallery.js":function(e,t){YUI.add("@sqs/layout-engine/block-model-gallery",function(a){a.namespace("SQS.LayoutEngine.BlockModel");var t=a.SQS.LayoutEngine.BlockModel.Gallery=a.Base.create("GalleryBlockModel",a.Model,[],{toJSON:function(){var e=t.superclass.toJSON.call(this);delete e.transientGallery;return e}},{ATTRS:{"active-alignment":{},"aspect-ratio":{},aspectRatio:{},"auto-crop":{value:true},autoplay:{},"autoplay-duration":{},blockAnimation:{value:"none"},collectionId:{},controls:{},design:{value:"grid"},existingGalleryId:{},lightbox:{},lightboxTheme:{},"max-width":{},"meta-position":{},padding:{},"show-meta":{value:true},"show-meta-basic":{value:true},"show-meta-only-title":{value:false},"show-meta-only-description":{value:false},"show-meta-on-hover":{},"square-thumbs":{value:true},"thumbnail-strip-height":{},"thumbnail-strip-margin":{},thumbnails:{},"thumbnails-per-row":{},vSize:{},transientGallery:{setter:function(e){var t=this.get("transientGallery");a.Lang.isValue(t)&&a.Lang.isFunction(t.destroy)&&t.destroy();if(!a.instanceOf(e,a.Model))return new a.Model(e);return e},value:{}},transientGalleryId:{getter:function(e){if(!a.Lang.isValue(e)&&a.Lang.isValue(this.get("transientGallery")))return this.get("transientGallery").get("id");return e}}}})},"1.0",{requires:["base","model"]})},"./src/main/webapp/universal/scripts-layout-engine/block-model/image.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/utils/TemplateVersionUtils.js");var s=a("./src/main/webapp/universal/src/shared/constants/BlockAnimations.js");var o=a("./src/main/webapp/universal/scripts-layout-engine/shared/utils/getAltText.js");var n=i.isSevenOne();YUI.add("@sqs/layout-engine/block-model-image",function(r){r.namespace("SQS.LayoutEngine.BlockModel");r.SQS.LayoutEngine.BlockModel.Image=r.Base.create("ImageBlockModel",r.Model,[],{initializer:function(){var e=this.get("description");e||this.set("description",{html:""});this._initializedImageId=this.get("imageId");this.on("imageIdChange",function(e){null!==e.newVal||this._isInitializedImageId(e.prevVal)||this._destroyImage(e.prevVal)});var t=this.get("title");t||this.set("title",{engine:"wysiwyg",source:"",html:""})},_isInitializedImageId:function(e){return this._initializedImageId===e},_destroyImage:function(e){var t=r.SQS.LayoutEngine.ContentItem.getCtor();new t({id:e}).destroy({remove:true})},sync:function(e,t,a){var i=r.SQS.LayoutEngine.ContentItem.getCtor();if("create"===e||"update"===e){var s=o(this.get("designLayout"),this.get("description.html"),this.get("filename"));new i({id:this.get("imageId"),filename:this.get("filename"),altText:s}).save({fields:["filename","altText"]})}if("delete"===e){var n=this.get("imageId");n&&!this._isInitializedImageId(n)&&this._destroyImage(n)}a()},toJSON:function(){return{imageId:this.get("imageId"),linkTo:this.get("linkTo"),newwindow:this.get("newwindow"),imageLink:this.get("imageLink"),buttonText:this.get("buttonText"),lightbox:this.get("lightbox"),lightboxTheme:this.get("lightboxTheme"),combinationAnimation:this.get("combinationAnimation"),individualImageAnimation:this.get("individualImageAnimation"),individualTextAnimation:this.get("individualTextAnimation"),vSize:this.get("vSize"),aspectRatio:this.get("aspectRatio"),layout:this.get("layout"),stretch:this.get("stretch"),description:this.get("description"),floatDir:this.get("floatDir"),hSize:this.get("hSize"),title:this.get("title"),subtitle:this.get("subtitle"),designLayout:this.get("designLayout"),imagePosition:this.get("imagePosition"),mapping:this.get("mapping")}}},{ATTRS:{layout:{value:"caption-below"},linkTo:{value:""},newwindow:{value:false},imageLink:{value:"none"},buttonText:{value:""},lightbox:{value:false},lightboxTheme:{value:"dark"},combinationAnimation:{valueFn:function(){return n?s.SITE_DEFAULT.value:s.NONE.value}},individualImageAnimation:{valueFn:function(){return n?s.SITE_DEFAULT.value:s.NONE.value}},individualTextAnimation:{valueFn:function(){return n?s.SITE_DEFAULT.value:s.NONE.value}},stretch:{value:false},filename:{value:null},mapping:{value:null},description:{setter:function(e){if(r.Lang.isString(e))return{engine:"wysiwyg",source:"",html:e};return e},value:{engine:"wysiwyg",source:"",html:""}},aspectRatio:{value:null},title:{setter:function(e){if(r.Lang.isString(e))return{engine:"wysiwyg",source:"",html:e};return e},value:{engine:"wysiwyg",source:"",html:""}},subtitle:{setter:function(e){if(r.Lang.isString(e))return{engine:"wysiwyg",source:"",html:e};return e},value:{engine:"wysiwyg",source:"",html:""}},designLayout:{value:"inline"},imagePosition:{value:"left"}}})},"1.0",{requires:["base","model","@sqs/layout-engine/content-item-content-item"]})},"./src/main/webapp/universal/scripts-layout-engine/block-model/quote.js":function(e,t,a){var i=a("./src/main/webapp/universal/scripts-layout-engine/shared/utils/JsonSchemaUtils.js");var s=a("./src/main/webapp/universal/src/shared/utils/TemplateVersionUtils.js");var n=a("./src/main/webapp/universal/src/shared/constants/BlockAnimations.js");var r=s.isSevenOne();YUI.add("@sqs/layout-engine/block-model-quote",function(e){e.namespace("SQS.LayoutEngine.BlockModel");e.SQS.LayoutEngine.BlockModel.Quote=e.Base.create("QuoteBlockModel",e.Model,[],{},{ATTRS:Object.assign(i.blockSchemaToYuiAttrs("quote"),{blockAnimation:{valueFn:function(){return r?n.SITE_DEFAULT.value:n.NONE.value}}})})},"1.0",{requires:["base","model"]})},"./src/main/webapp/universal/scripts-layout-engine/block-model/video.js":function(e,t){YUI.add("@sqs/layout-engine/block-model-video",function(n){n.namespace("SQS.LayoutEngine.BlockModel");n.SQS.LayoutEngine.BlockModel.Video=n.Base.create("VideoBlockModel",n.Model,[],{toJSON:function(){var t={blockAnimation:this.get("blockAnimation"),layout:this.get("layout"),overlay:this.get("overlay"),description:this.get("description"),hSize:this.get("hSize"),vSize:this.get("vSize"),floatDir:this.get("floatDir")};var e=this.get("customThumb");n.Lang.isValue(e)&&(t.customThumb=e.get("id"));var a=this.get("oembed");var i=n.Lang.isObject(a);var s=["html","url","width","height","providerName","thumbnailUrl","resolvedBy"];n.Array.forEach(s,function(e){t[e]=i?a[e]:this.get(e)},this);return t}},{ATTRS:{blockAnimation:{value:"none"},customThumb:{setter:function(e){if(n.Lang.isString(e)){var t=n.SQS.LayoutEngine.ContentItem.getCtor();return new t({id:e})}return e}},oembed:{},layout:{value:"caption-hidden"},overlay:{value:false},description:{value:{}}}})},"1.0",{requires:["base","model","@sqs/layout-engine/content-item-content-item"]})},"./src/main/webapp/universal/scripts-layout-engine/block-search.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("@sqs/layout-engine/block-search",function(t){t.namespace("SQS.LayoutEngine.Layout");var e=t.SQS.LayoutEngine.Layout.BlockSearch=t.Base.create("search",t.Widget,[t.WidgetChild,t.SQS.LayoutEngine.Mixins.EventRegistrar],{initializer:function(){this.publish("clear")},renderUI:function(){e.superclass.renderUI.call(this);this.get("contentBox").append('<input type="text">');this.get("contentBox").append('<div class="btn-clear hidden">Clear</div>');this._searchField=this.get("contentBox").one("input[type]");this._searchField.setAttribute("autocomplete","off");this._searchField.setAttribute("data-test",this.get("testAttribute"));this._searchField.setAttribute("name",this.get("name"));this._searchField.setAttribute("placeholder",this.get("placeHolderText"))},bindUI:function(){e.superclass.bindUI.call(this);this.after("dataChange",this._afterDataChange);this._searchField.after("valuechange",this._afterValueChange,this);this._searchField.on("click",function(e){e.halt()});this._searchField.after("keyup",function(e){if(13===e.keyCode){t.SQS.LayoutEngine.Events.fire("layout-engine:block-menu-search-query-enter",{query:this.get("data")});this.fire("submit")}else 27===e.keyCode?e.halt():this.fire("keyup",e)},this);this._registerEvent(this.get("contentBox").delegate("click",function(){this.fire("clear")},".btn-clear",this));this.on("clear",this.clearSearch,this,true);this.after("dataChange",this._checkForEmptySearch)},clearSearch:function(e){this.set("data","");e&&this.focus()},focus:function(){this._searchField.focus()},_afterValueChange:function(e){e.dataSync||this.set("data",e.newVal,{dataSync:true})},_afterDataChange:function(e){e.dataSync||this._searchField.set("value",e.newVal||"",{dataSync:true})},_checkForEmptySearch:function(e){this.get("contentBox").one(".btn-clear").toggleClass("hidden",""===e.newVal)}},{CSS_PREFIX:"sqs-search",ATTRS:{testAttribute:{value:"search"},placeHolderText:{value:i("Search Content Blocks")},name:{value:"search"}}})},"1.0",{requires:["base","widget","widget-child","@sqs/layout-engine/event-registrar","@sqs/layout-engine/events"]})},"./src/main/webapp/universal/scripts-layout-engine/block/base.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/universal/src/shared/utils/formatting/substituteString.js");var n=a("./src/main/webapp/frontend/packages/enums/BlockType.js");var r=false;var l=function(){};YUI.add("@sqs/layout-engine/block-base",function(o){o.namespace("SQS.LayoutEngine.Block");o.SQS.LayoutEngine.Block.Base=o.Base.create("block-base",o.Widget,[],{initializer:function(e){e&&e.model||this._setDefaultContent();o.before(this._renderUIBlock,this,"renderUI");o.after(this._bindUIBlock,this,"bindUI");o.after(this._syncUIBlock,this,"syncUI");this.publish("resized",{emitFacade:true,defaultFn:this._updateBlockSizing});this.publish("blockModelChange",{emitFacade:true});this.envInit()},envInit:function(){},_setDefaultContent:function(){var e=this.get("defaultContentModel");o.Lang.isValue(e)&&this.get("model").setAttrs(e)},_renderUIBlock:function(){this.get("boundingBox").addClass("sqs-block "+this.get("classNames"));this.get("contentBox").addClass("sqs-block-content");this.get("boundingBox").setAttribute("id","block-"+this.get("id"));this._addSizeAndFloatClasses()},_bindUIBlock:function(){this.get("model").after("*:change",this._fireModelChange,this);this.after("editableChange",this.syncEditable,this);this.after("visibleChange",this.syncVisible,this);this.after("focusedChange",this._syncFocused,this);this.after("selectedChange",this._syncSelected,this)},_syncUIBlock:function(){this.get("editable")&&this.syncEditable();this.syncVisible()},_sizeAttrChanged:o.SQS.LayoutEngine.Block.Utils.getWhitelistingFn(["floatDir","hSize","vSize","dimensions","aspectRatio"]),_fireModelChange:function(e){this._sizeAttrChanged(e.changed)&&this.fire("resized");this.fire("blockModelChange",{blockType:this.get("type"),changed:e.changed})},_bindDOM:l,syncEditable:function(){var e=this.get("editor");if(!e){console.warn("[le] No Editor configured for "+this.get("blockTypeName")+" block");return}var t=this.get("editable");if(t)if(this.hasPlugin(e.NS))r&&console.log("[le] There is no valid editor plugin for this block",this);else{r&&console.log("[le] Plugging in a new editor instance for block",this);this.plug(e,this.get("editorConfig"))}else if(this.hasPlugin(e.NS)){r&&console.log("[le] Unplugging editor for block",this);this.unplug(e.NS)}},syncVisible:function(){this.get("boundingBox").toggleClass("sqs-block-hidden",!this.get("visible"))},_syncFocused:function(e){this._uiSetFocused(e.newVal)},checkBlockInView:function(){var e=o.one(o.config.doc.body);var t=this.get("boundingBox");var a=t.getY();var i=a+t.get("offsetHeight");var s=e.get("docScrollY");var n=e.get("docScrollY")+e.get("winHeight");var r=s<=i&&n>=a;return r},_syncSelected:function(e){this._uiSetSelected(e.newVal)},_uiSetFocused:function(e,t){this.get("boundingBox").toggleClass("sqs-block-focused",!!e)},_uiSetSelected:function(e){this.get("boundingBox").toggleClass("sqs-selected",!!e)},_updateBlockSizing:function(){var e=this.get("model");this._removeSizeAndFloatClasses();this._addSizeAndFloatClasses();!e.get("floatDir")&&o.Lang.isValue(e.get("hSize"))&&e.set("hSize",null)},_removeSizeAndFloatClasses:function(){var e=this.get("boundingBox");var t=/(?:\s|^)(sqs-col-\d+?|sqs-float-\w+?|vsize-\d+?)(?=\s|$)/g;e.set("className",e.get("className").replace(t,""))},_addSizeAndFloatClasses:function(){var e=this.get("boundingBox");var t=this.get("model");var a=t.get("floatDir");var i=t.get("hSize");var s=t.get("vSize");a&&i&&e.addClass("sqs-float-"+a+" sqs-col-"+i);s&&e.addClass("vsize-"+s)},inPromotedLayout:function(){var e=this.get("contentBox");return o.Lang.isValue(e.ancestor('[data-type="promoted-block"]',false,function(e){return e.hasClass("sqs-layout")}))},toJSON:function(){var e={type:this.get("type"),id:this.get("id"),value:this.get("model").toJSON()};delete e.value.promoted;return e},queueForDestruction:function(e){e=e||{};this.hide();this.get("boundingBox").addClass("sqs-destroyme");e.coalescing||o.SQS.LayoutEngine.Events.fire("layout-engine:delete-block",this)},removeBlock:function(){var e=this.get("boundingBox");e.ancestor(".sqs-block-remover")&&e.unwrap();this.queueForDestruction();var t=this.get("boundingBox").ancestor(".sqs-layout");var a=this.get("editController");a.cleanGrids(t);a.alignInsertPoints(t)},isEmpty:function(){return false},destructor:function(){var e=this.get("id")+"|*";o.Global.detach(e);o.detach(e);this.unplug();this.get("boundingBox").purge(true);this.get("focusHandler")._blurAll()},getGuid:function(){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return e()+e()+e()+e()+e()},getProperty:function(e){var t=this.constructor;var a=this.constructor[e];while(o.Lang.isUndefined(a)){if(!t.superclass)break;t=t.superclass.constructor;if(o.Lang.isUndefined(t))break;a=t[e]}return a}},{THROTTLE_DATACHANGE_TIME_MS:1e4,MODEL:o.Model,ATTRS:{blockTypeName:{valueFn:function(){return this.name.split("block-")[1].replace(/-/g,"_").toUpperCase()}},type:{valueFn:function(){return n[this.get("blockTypeName")]}},id:{getter:function(e){var t=e;if(!o.Lang.isValue(t)){t=this.getGuid();this.set("id",t)}return t}},model:{writeOnce:true,lazyAdd:false,value:{},setter:function(e){if(o.instanceOf(e,o.Model))return e;return new(this.getProperty("MODEL"))(e||{})}},classNames:{valueFn:function(){var e=this.name.split("block-")[1];return e.replace(/(?:\-v\d)?$/,function(e,t,a){if(e)return s("-block {wholeString}-block",{wholeString:a});return"-block"})}},floatDir:{value:null},hSize:{value:null},vSize:{},tabIndex:{value:null},focused:{setter:function(e){if(!this.get("editable"))return false;return e}},editable:{value:false},editController:{writeOnce:true,validator:function(e){return o.instanceOf(e,o.SQS.LayoutEngine.EditControllerBase)}},editor:{readOnly:true,valueFn:function(){return o.SQS.LayoutEngine.Block.Editor.Base}},editMode:{writeOnce:true,validator:function(e){return o.SQS.LayoutEngine.Layout.EditMode.isValid(e)}},editOnStart:{value:false,validator:o.Lang.isBoolean},mobileEditor:{readOnly:true,value:null},editorConfig:{value:null},isWidgetParent:{readOnly:true,value:false},isNewBlock:{value:false},defaultContentModel:{},floatable:{value:true},focusHandler:{valueFn:function(){return o.SQS.LayoutEngine.Singletons.BlockFocusHandler}},lockedLayout:{valueFn:function(){var e=this.get("boundingBox");var t=o.Lang.isValue(e)?e.ancestor(".sqs-layout"):null;return o.Lang.isValue(t)&&t.hasClass("sqs-locked-layout")}},promoted:{value:false,validator:o.Lang.isBoolean},strings:{value:{promoteAction:i("Promote this block"),unpromoteAction:i("Unpromote this block")}}}});var e=o.SQS.LayoutEngine.Block.ParentBase=o.Base.create("block-parent-base",o.SQS.LayoutEngine.Block.Base,[o.WidgetParent],{syncEditable:function(){e.superclass.syncEditable.call(this);var t=this.get("editable");this.each(function(e){e.set("editable",t)},this)},toJSON:function(){return e.superclass.toJSON.apply(this,arguments)}},{ATTRS:{editor:{readOnly:true,value:null},isWidgetParent:{value:true},multiple:{value:true}}})},"1.0",{requires:["base","event","model","@sqs/layout-engine/block-editor-base","@sqs/layout-engine/layout-block-focus-handler","@sqs/layout-engine/block-utils","@sqs/layout-engine/edit-controller-base","@sqs/layout-engine/events","widget-parent","widget"]})},"./src/main/webapp/universal/scripts-layout-engine/block/editor-base.js":function(e,t,a){var i=a("./src/main/webapp/universal/scripts-layout-engine/shared/utils/ancestor.js");var n=a("./src/main/webapp/frontend/packages/enums/Flag.js");var r=a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts");YUI.add("@sqs/layout-engine/block-editor-base",function(s){var e=function(){};s.namespace("SQS.LayoutEngine.Block.Editor");s.SQS.LayoutEngine.Block.Editor.Base=s.Base.create("blockEditorBase",s.Plugin.Base,[s.SQS.LayoutEngine.Mixins.EventRegistrar],{_syncEditableButtons:e,_onFocus:e,_onBlur:e,_handleBlockFocusChange:e,beforeLayoutDrag:e,afterLayoutDrag:e,envInit:e,initializer:function(){var e=this.get("host");this._model=e.get("model");this._bb=e.get("boundingBox");this._cb=e.get("contentBox");this.editingEventListeners=[];this._createEditingOverlay();this._createEditingOutline();this._createLabel();this._addFlagClass();this._syncEditableButtons();this._bindEvents();this._executeOrBindPlugInsertPoint();this.once("initializedChange",this._onceInitializedChange,this);this.envInit();r.isFeatureEnabled(n.PAGE_INTERACTIONS_IMPROVEMENTS)&&s.one("body").addClass("redesign-page-interaction-improvements")},_bindEvents:function(){this._setEditingEvent(this.get("editingEvent"));this.on("editingButtonsChange",this._syncEditableButtons,this);this.onHostEvent("editableChange",this._onBlur,this);this.afterHostEvent("dropped",this._afterDropped,this);this.after("editingChange",this._afterEditingChange,this);this.on("editingEventChange",this._onEditingEventChange,this);this.after("dropZoneLockedChange",this._afterDropZoneLockedChange,this);this.after(["resizableChange","resizeNodeChange"],this._syncResizable,this);this.afterHostEvent("blockEditor|focusedChange",this._afterFocusedChange,this);this._handles.push(this._model.after("blockEditor|floatDirChange",this._floatChange,this));this._handles.push(this.get("host").get("focusHandler").on("blockFocusChange",function(e){this._handleBlockFocusChange(e.focusedBlock,e.lastFocusedBlock)},this));this._handles.push(this.get("host").get("boundingBox").on("gesturemovestart",function(e){i(".yui3-resize-handle",true)&&e.stopPropagation()}));this.on("remove",this.removeBlock,this)},_onceInitializedChange:function(){this._initFocused();this._syncResizable();this._initEditable();this._initLockedLayout();this._initLayoutDrop()},_initLockedLayout:function(){var e=this.get("host").get("boundingBox");e.toggleClass("sqs-block-locked-layout",this.get("lockedLayout"))},_createLabel:function(){var e=this.get("blockLabel");e&&e.appendTo(this._bb)},_addFlagClass:function(){r.isFeatureEnabled(n.PAGE_INTERACTIONS_IMPROVEMENTS)&&this._bb.addClass("with-page-interaction-flag")},_createEditingOverlay:function(){var e=this.get("editingOverlay");e&&e.appendTo(this._bb)},_createEditingOutline:function(){var e="sqs-block-outline";r.isFeatureEnabled(n.PAGE_INTERACTIONS_IMPROVEMENTS)&&(e+=" redesigned-block-outline");s.Node.create('<div class="'+e+'"></div>').appendTo(this._bb)},_executeOrBindPlugInsertPoint:function(){if(!this._layoutHasInsertPoints())return;if(this._canPlugInsertPointsNow())this._plugInsertPoint();else{this._handles.push(this.onceAfterHostEvent("renderedChange",function(e){this._canPlugInsertPointsNow()&&this._plugInsertPoint()},this));this.afterHostEvent("layout-rendered",this._plugInsertPoint,this)}},_canPlugInsertPointsNow:function(){var e=this.get("host");var t=e.get("contentBox");return e.get("rendered")&&!t.ancestor(".sqs-layout-rendering")},_updateModel:function(e){this._model.setAttrs(e);this.get("host").get("isNewBlock")&&this.get("host").set("isNewBlock",false)},_afterFocusedChange:function(e){if(e.newVal){this._onFocus();this._syncResizable()}else this._onBlur()},_afterEditingChange:function(e){s.Lang.isValue(this._bb.getDOMNode())&&this._bb.toggleClass("sqs-block-editing",e.newVal)},_initEditable:function(){var e=this.get("host");if(e.get("editable")){this._bb.addClass("sqs-block-editable");var t=this.get("defaultEditingMode");var a=e.get("editOnStart");t&&a&&this._enableEditing()}},_initFocused:function(){var e=this.get("host");(e.get("isNewBlock")||e.get("editOnStart"))&&e.get("focusHandler").giveBlockSyntheticFocus(e)},_syncResizable:function(){this._setBlockResizable(this.get("resizable")&&this.get("host").get("focused"))},_hasResizablePlugin:function(){var e=s.SQS.LayoutEngine.Block.Plugin.Resizable;var t=this.get("host");return t.hasPlugin(e.NS)},_setBlockResizable:function(e){var t=s.SQS.LayoutEngine.Block.Plugin.Resizable;var a=this.get("host");var i=this._hasResizablePlugin();e&&!i?a.plug(t,{resizeNode:this.get("resizeNode"),blockEditor:this}):!e&&i&&a.unplug(t.NS)},cleanBlock:function(){this._syncEditableButtons()},_initLayoutDrop:function(){this.get("lockedLayout")||(this.drop=new s.SQS.LayoutEngine.Layout.Drop({node:this._bb,groups:["blocks"],lock:!!this._model.get("floatDir")}))},_plugInsertPoint:function(){this.get("host").hasPlugin(s.SQS.LayoutEngine.Layout.InsertPoint.NS)||this.get("host").plug(s.SQS.LayoutEngine.Layout.InsertPoint,{layoutNode:this._bb.ancestor(".sqs-layout"),divideSelectors:this.get("selectorsForInsertPoints")})},_layoutHasInsertPoints:function(){return this.get("host").get("editController").get("supportsInsertPoints")&&!this.get("host").get("editController").isMobileApp()&&!this.get("lockedLayout")},_floatChange:function(){this.set("dropZoneLocked",!!this._model.get("floatDir"));this._bb.one(".sqs-helper")&&(this.get("host").get("model").get("floatDir")?this._bb.one(".sqs-helper").show():this._bb.one(".sqs-helper").hide())},_afterDropped:function(e){e.target.blockEditor.syncPromoteOverlay&&e.target.blockEditor.syncPromoteOverlay();var t=this._cb.ancestor(".sqs-layout").all(".sqs-block").getDOMNodes();s.Array.each(t,function(e){var t=s.Widget.getByNode(e);t.set("promoted",this._model.layout.isPromotedBlock(t))},this)},_afterDropZoneLockedChange:function(e){this.drop&&this.drop.set("lock",e.newVal)},_onEditingEventChange:function(e){this._setEditingEvent(e.newVal)},_setEditingEvent:function(e){if(this.editingEventListeners.length>0){s.Array.each(this.editingEventListeners,function(e){e.detach()});this.editingEventListeners=[]}if(e){s.Lang.isString(e)&&(e=[e]);s.Array.each(e,function(t){var e=this.get("host").get("boundingBox").on(t,function(e){"contextmenu"===t&&e.halt();this._enableEditing()},this);this.editingEventListeners.push(e)},this)}},_enableEditing:function(){this.set("editing",true)},_disableEditing:function(){this.set("editing",false)},removeBlock:function(e){var t=this.get("host");t.removeBlock(true===e);t.get("focusHandler").blurBlock(t);this._model.destroy({remove:true});this.destroy()},destructor:function(){this.get("host").detach("blockEditor|*");this.get("host").get("model").detach("blockEditor|*");if(this.editingEventListeners){s.Array.each(this.editingEventListeners,function(e){e.detach()});this.editingEventListeners=null}this.drop&&this.drop.destroy();var e=this.get("editingOverlay");s.Lang.isValue(e)&&e.remove(true);this.get("host").get("boundingBox").removeClass("sqs-block-editable");this.get("host").get("boundingBox").removeClass("sqs-block-editing");this.get("host").unplug(s.SQS.LayoutEngine.Layout.InsertPoint);this._setBlockResizable(false);this._editingButtons&&this._editingButtons.destroy();this._model=null;this._bb=null;this._cb=null}},{NS:"blockEditor",ATTRS:{editing:{value:false,setter:function(e){return!!(e&&this.get("host").get("editable"))}},editingOverlay:{valueFn:function(){return null},validator:function(e){return null===e||e instanceof s.Node}},blockLabel:{valueFn:function(){if(!r.isFeatureEnabled(n.PAGE_INTERACTIONS_IMPROVEMENTS))return null;if(this.get("blockName"))return s.Node.create('<span class="sqs-block-label-tag">'+this.get("blockName")+"</span>");return null},validator:function(e){return null===e||e instanceof s.Node}},dropZoneLocked:{value:false},lockedLayout:{getter:function(){return this.get("host").get("lockedLayout")}},selectorsForInsertPoints:{value:"",validator:s.Lang.isString},minHSize:{value:1,validator:s.Lang.isNumber},resizable:{value:false},resizeNode:{valueFn:function(){return this.get("host").get("boundingBox")}},resizeDefaultSize:{value:75},resizeSnapToDefaultSize:{value:true},snapToThreshold:{value:10,validator:s.Lang.isNumber},editingEvent:{value:null,lazyAdd:false},editingButtons:{value:false},includeEdit:{value:true},defaultEditingMode:{value:false}}})},"1.0",{requires:["base","plugin","@sqs/layout-engine/event-registrar","@sqs/layout-engine/layout-block-focus-handler","@sqs/layout-engine/layout-insert-point-controller","@sqs/layout-engine/block-plugin-resizable","@sqs/layout-engine/layout-drop","@sqs/layout-engine/layout-utils","@sqs/layout-engine/widget-resize"]})},"./src/main/webapp/universal/scripts-layout-engine/block/gallery.js":function(e,t,a){var s=a("./common/temp/node_modules/@sqs/rum-collector/timing.js");var n=a("./src/main/webapp/frontend/packages/enums/BlockType.js");var r=false;YUI.add("@sqs/layout-engine/block-gallery",function(i){i.namespace("SQS.LayoutEngine.Block");var e=i.SQS.LayoutEngine.Block.Gallery=i.Base.create("block-gallery",i.SQS.LayoutEngine.Block.ModelSyncBase,[i.SQS.LayoutEngine.Block.MixinAspectRatio,i.SQS.LayoutEngine.Block.MixinAnimatedBlock],{renderUI:function(e){if(r){console.group("[le] gallery block - renderUI");e&&console.log("[le] because model changed",e);console.groupEnd()}this._renderBlock(e)},bindUI:function(){this.get("model").after("change",this.renderUI,this);this.after("resized",this.syncUI,this);this.after("widgetContentChange",this._setWidgetContent,this)},show:function(){e.superclass.show.call(this,arguments);this._setWidgetContent()},_updateGalleryData:function(){var e=this.get("boundingBox");var t=this.get("model").getAttrs();r&&console.log("[le] updating bounding box block data from gallery model",e,t);e.setData("block",t)},_renderBlock:function(e){this._updateGalleryData();this._isRerenderNeeded(e)?this._queueRenderBlock():this.fire("widget:contentUpdate")},_queueRenderBlock:function(){this.requestingContent=true;if(this._pendingRenderRequest){i.config.win.clearTimeout(this._pendingRenderRequest);this._pendingRenderRequest=null}this._pendingRenderRequest=i.config.win.setTimeout(function(){e.superclass._renderBlock.call(this)}.bind(this),100)},_renderSuccess:function(e){this.requestingContent=false;this.set("widgetContent",e.html)},_setWidgetContent:function(){if(this.requestingContent){r&&console.log("[le] gallery - still requestingContent, skip _setWidgetContent");return}var e=this.get("contentBox");if(null===e.getDOMNode()){console.error("[le] gallery - missing contentBox dom node!",this);return}e.empty();var t=i.Node.create(this.get("widgetContent"));e.setHTML(t);this.get("model").get("aspectRatio")&&e.one(".sqs-state-message")&&e.one(".sqs-state-message").wrap("<div></div>");this._updateAspectRatio();i.Object.getValue(i,["SQS","Gallery","Manager"])?i.SQS.Gallery.Manager.initializeBlock(this.get("boundingBox")):console.error("[le] gallery - could not initialize the gallery block - yui-gallery manager not found.")},_isRerenderNeeded:function(e){var t=i.Lang.isValue(e)&&i.Object.hasKey(e,"changed");if(!t){r&&console.log("[le] gallery block - forced rerender");return true}var a=!i.SQS.LayoutEngine.Block.Utils.checkWhitelist(this.get("modelWhiteList"),e.changed);a&&r&&console.log("[le] gallery block - non-whitelisted attr was changed, rerender needed",e);return a},_shouldGetWidgetRendering:function(e){s.measure("deprecated_scriptsle_block_gallery_shouldGetWidgetRendering");return this._isRerenderNeeded(e)}},{ATTRS:{modelWhiteList:{setter:function(e){if(i.Lang.isArray(e))return e;if(i.Lang.isString(e))return[e];return[]},value:["active-alignment","aspectRatio","autoplay","autoplay-duration","lightbox","lightboxTheme","methodOption","padding","thumbnail-strip-height","thumbnail-strip-margin","thumbnails-per-row","transientGallery","vSize"]},type:{value:n.GALLERY},vSize:{valueFn:function(){return"slider"===this.get("model").get("design")?10:null}},widgetContent:{value:""}},MODEL:i.SQS.LayoutEngine.BlockModel.Gallery})},"1.0",{requires:["base","model","@sqs/layout-engine/block-model-sync-base","@sqs/layout-engine/block-utils","@sqs/layout-engine/block-model-gallery","@sqs/layout-engine/block-mixin-aspect-ratio","@sqs/layout-engine/block-mixin-animated-block","@sqs/yui-gallery/manager"]})},"./src/main/webapp/universal/scripts-layout-engine/block/generic-base.js":function(e,t,a){var i=a("./src/main/webapp/universal/scripts-layout-engine/shared/constants/BlockTypeStrings.js");YUI.add("@sqs/layout-engine/block/generic-base",function(t){var a=t.SQS.LayoutEngine.Block.GenericBase=t.Base.create("block-generic-base",t.SQS.LayoutEngine.Block.ModelSyncBase,[t.SQS.LayoutEngine.Mixins.EventRegistrar],{renderUI:function(){a.superclass.renderUI.call(this);var e="sqs-block-"+i.BlockTypeKebab[this.get("type")];this.get("boundingBox").addClass(e);this.get("contentBox").addClass(e+"-content")},bindUI:function(){a.superclass.bindUI.call(this);var e=0;this._registerEvent(this.get("boundingBox").on("click",function(){Date.now()-e<500&&t.SQS.LayoutEngine.Events.fire("layout-engine:edit-block",{block:this});e=Date.now()}.bind(this)))}},{CSS_PREFIX:"sqs-schema-block",ATTRS:{isSchemaBlock:{value:true}}})},"1.0",{requires:["base","@sqs/layout-engine/block-model-sync-base","@sqs/layout-engine/event-registrar","@sqs/layout-engine/events","@sqs/layout-engine/block-schema-editor-base"]})},"./src/main/webapp/universal/scripts-layout-engine/block/horizontal-rule.js":function(e,t,a){var i=a("./src/main/webapp/frontend/packages/enums/BlockType.js");YUI.add("@sqs/layout-engine/block-horizontal-rule",function(t){t.namespace("SQS.LayoutEngine.ContentModel").HorizontalRule=t.Base.create("HorizontalRuleContentModel",t.Model,[],{},{});t.namespace("SQS.LayoutEngine.Block").HorizontalRule=t.Base.create("block-horizontalrule",t.SQS.LayoutEngine.Block.Base,[],{renderUI:function(){var e=t.Node.create("<hr>");this.get("contentBox").appendChild(e)}},{CSS_PREFIX:"sqs-block-horizontalrule",MODEL:t.SQS.LayoutEngine.ContentModel.HorizontalRule,ATTRS:{type:{value:i.HORIZONTAL_RULE}}})},"1.0",{requires:["base","@sqs/layout-engine/block-base"]})},"./src/main/webapp/universal/scripts-layout-engine/block/html.js":function(e,t){YUI.add("@sqs/layout-engine/block-html",function(t){t.namespace("SQS.LayoutEngine.Block");t.SQS.LayoutEngine.Block.Html=t.Base.create("block-html-base",t.SQS.LayoutEngine.Block.ParentBase,[],{initializer:function(e){this.contentHtml=this.add({childType:t.SQS.LayoutEngine.BlockContent.Html,model:e.model,editable:e.editable,enableDelete:!this.get("lockedLayout"),type:"full"}).item(0);this.set("model",this.contentHtml.get("model"))},renderUI:function(){this.contentHtml.set("editor",this.get("blockContentEditor"));this.contentHtml.render(this.get("contentBox"))},syncUI:function(){this.get("rendered")&&this.contentHtml.syncUI()},appendHTML:function(e){var t=this.get("model").get("html");var a=t.trim()+e.trim();this.contentHtml.setContent(a)},isEmpty:function(){return!this.get("model").get("html")},toJSON:function(){return{type:this.get("type"),id:this.get("id"),value:this.contentHtml.toJSON()}}},{CSS_PREFIX:"sqs-block-html",MODEL:t.SQS.LayoutEngine.ContentModel.Html,ATTRS:{classNames:{value:"html-block"},blockContentEditor:{valueFn:function(){throw new Error("Must provide Block Content Editor constructor in HTML Block")}},type:{value:2},model:{getter:function(){return this.contentHtml.get("model")}},floatable:{value:true}}})},"1.0",{requires:["base","@sqs/layout-engine/block-base","@sqs/layout-engine/block-content-html"]})},"./src/main/webapp/universal/scripts-layout-engine/block/image.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/frontend/packages/enums/BlockType.js");var n=a("./src/main/webapp/universal/src/shared/utils/makeTextDynamic.js");var l=a("./src/main/webapp/universal/scripts-layout-engine/shared/utils/getAltText.js");var c={designLayout:"design-layout",imagePosition:"image-position",combinationAnimation:"combination-animation",individualImageAnimation:"individual-animation",individualTextAnimation:"individual-text-animation"};YUI.add("@sqs/layout-engine/block-image",function(r){var a=["caption-hidden","caption-below","caption-overlay","caption-overlay-hover"];r.namespace("SQS.LayoutEngine.Block");r.SQS.LayoutEngine.Block.Image=r.Base.create("block-image",r.SQS.LayoutEngine.Block.ParentBase,[r.SQS.LayoutEngine.Mixins.EventRegistrar,r.SQS.LayoutEngine.Block.MixinAnimatedBlock],{initializer:function(){this._debug=false},renderUI:function(e){var t=this.get("model");this._renderEditableImage();this._renderEditableCaption();this._toggleValidCaptionOrientationClass();var a=this.get("contentBox");var i="design-layout-"+t.get("designLayout")+" image-position-"+t.get("imagePosition");a.addClass(i);a.setAttribute("data-scrolled",true);this._renderTitles();this._renderButton();var s=t.get("designLayout");s&&s.match(/poster|card|overlap|collage|stack/)?a.addClass("image-block-v2"):a.removeClass("image-block-v2")},_renderEditableImage:function(e){var t=r.Node.create("<div></div>");var a=this.get("contentBox");a.appendChild(t);this.contentImage=this.add({editor:this.get("imageContentEditor"),childType:this.get("imageContentWidget"),editable:this.get("editable"),model:this._getImageContentModelJSON(),render:t}).item(0);this.contentImage.set("editing",true);this.contentImage.addTarget(this)},_renderEditableCaption:function(e){this.contentCaption=this.add({childType:r.SQS.LayoutEngine.BlockContent.Html,editor:this.get("htmlContentEditor"),editable:this.get("editable"),model:this._getHTMLContentModelJSON("description.html"),placeholderText:i("Write a caption here…"),type:this.get("htmlContentEditorType")||"simple"}).item(0);this.contentCaption.get("boundingBox").addClass("image-caption-wrapper sqs-image-caption");this.contentCaption.get("contentBox").addClass("image-caption");this.get("contentBox").addClass("image-block-outer-wrapper")},_toggleValidCaptionOrientationClass:function(){var t=this.get("contentBox");var e=this.get("editController").isMobileApp()?"caption-below":this.get("model").get("layout");r.Array.each(a,function(e){t.removeClass("layout-"+e)},this);t.addClass("layout-"+e)},_renderTitles:function(){this.cardWrapper=r.Node.create('<div class="image-card-wrapper sqs-image-card image-block-animation-text"></div>');this.card=r.Node.create('<div class="image-card sqs-dynamic-text-container"></div>');this.cardWrapper.appendChild(this.card);this.get("contentBox").appendChild(this.cardWrapper);this.contentTitle=this.add({childType:r.SQS.LayoutEngine.BlockContent.Html,editor:this.get("htmlContentEditor"),editable:this.get("editable"),model:this._getHTMLContentModelJSON("title.html"),placeholderText:i("Write a title here…"),render:this.card,type:this.get("htmlContentEditorType")||"simple"}).item(0);this.contentTitle.get("boundingBox").addClass("image-title-wrapper");this.contentTitle.get("contentBox").addClass("image-title sqs-dynamic-text");this.contentSubtitle=this.add({childType:r.SQS.LayoutEngine.BlockContent.Html,editor:this.get("htmlContentEditor"),editable:this.get("editable"),model:this._getHTMLContentModelJSON("subtitle.html"),placeholderText:i("Write a subtitle here…"),render:this.card,type:this.get("htmlContentEditorType")||"simple"}).item(0);this.contentSubtitle.get("boundingBox").addClass("image-subtitle-wrapper");this.contentSubtitle.get("contentBox").addClass("image-subtitle sqs-dynamic-text")},_renderButton:function(){var e=this.get("contentBox").one(".image-card");var t=this.get("model").get("buttonText");if(e&&!e.one(".image-button")){var a=t||this.get("addButtonText");var i=r.Node.create('<div class="image-button-wrapper"><div class="image-button sqs-dynamic-text"><div class="image-button-inner"><a href="">'+a+"</a></div></div></div>");e.appendChild(i);this._syncButtonVisibility()}},_syncButtonText:function(){var e=this.get("contentBox").one(".image-button a");var t=this.get("model").get("buttonText");e.setContent(t)},_syncButtonVisibility:function(){var e=this.get("contentBox").one(".image-button-wrapper");var t=this.get("model").get("imageLink");e&&"button"===t?e.setStyle("display","block"):e.setStyle("display","none")},_getImageContentModelJSON:function(){var e=this.get("model");var t=e.get("designLayout");var a;t&&!t.match(/inline|poster|stack/)||(a=e.get("aspectRatio"));var i={imageId:e.get("imageId"),aspectRatio:a,scale:e.get("scale"),collectionId:r.Lang.isValue(e.layout)?e.layout.get("collectionId"):null,stretch:e.get("stretch")};var s=e.get("vSize");r.Lang.isValue(s)&&(i.vSize=s);if(this.get("editController").isMobileApp()&&e.get("image")){i.baseAssetUrl=e.get("image.assetUrl");i.dimensions=e.get("image.originalSize");i.focalPoint=e.get("image.mediaFocalPoint")}return i},_getHTMLContentModelJSON:function(e){var t=this.get("model");return{html:t.get(e)||""}},bindUI:function(){var o=this.get("model");var a=this.contentImage.get("model");var e=this.contentCaption?this.contentCaption.get("model"):null;var t=this.contentTitle?this.contentTitle.get("model"):null;var i=this.contentSubtitle?this.contentSubtitle.get("model"):null;r.Array.each(["imageId","scale"],function(t){a.after(t+"Change",function(e){if(e.silent)return;this._debug&&console.log("[le/block/image] syncing to image block model "+t+"Change (prevVal: "+e.prevVal+") (newVal: "+e.newVal+")");o.set(t,e.newVal)},this)},this);a.on("aspectRatioChange",function(e){if(e.silent)return;this._debug&&console.log("[le/block/image] syncing `aspectRatio` to image block model (prevVal: %s) (newVal: %s)",e.prevVal,e.newVal);o.set("aspectRatio",e.newVal)},this);e&&e.after("htmlChange",function(e){o.set("description.html",e.newVal,{source:e.source})});this.after("editableChange",this.syncUI,this);var s=o.get("vSize");r.Lang.isValue(s)&&this._registerEvent(o.on("vSizeChange",function(e){a.set("vSize",e.newVal)},this));this._registerEvent(o.after("stretchChange",function(){a.set("stretch",o.get("stretch"));this._syncStretch()},this),a.after("dimensionsChange",function(){this._syncStretch()},this),o.after("layoutChange",function(){this._toggleValidCaptionOrientationClass()},this),o.after("filenameChange",function(e){a.setItemData({filename:e.newVal})}));t&&i&&this._registerEvent(t.after("htmlChange",function(e){o.set("title.html",e.newVal,{source:e.source})}),i.after("htmlChange",function(e){o.set("subtitle.html",e.newVal,{source:e.source})}));this._registerEvent(o.after("buttonTextChange",function(){this._syncButtonText()},this),o.after("imageLinkChange",function(){this._syncButtonVisibility();this._syncDynamicElements()},this));o.after(["designLayoutChange","imagePositionChange","combinationAnimationChange","individualTextAnimationChange","individualImageAnimationChange"],function e(t){var a=this.get("contentBox");var i=this._getImageContentModelJSON();var s=o.get("designLayout");this.contentImage.set("model",i);this.contentImage.get("model").setAttrs({designLayout:i.designLayout,aspectRatio:i.aspectRatio,imagePosition:i.imagePosition,combinationAnimation:i.combinationAnimation,individualImageAnimation:i.individualImageAnimation,individualTextAnimation:i.individualTextAnimation});s&&s.match(/poster|card|overlap|collage|stack/)?a.addClass("image-block-v2"):a.removeClass("image-block-v2");this.contentImage._adjustImage();this.updateAnimationClassname(t,c,a);var n="individualImageAnimation"===t.attrName||"individualTextAnimation"===t.attrName;if(n){var r=c.combinationAnimation+"-custom";a.addClass(r)}this.rerunAnimation(a)},this);var n=this.contentImage.get("boundingBox");this._registerEvent(n.delegate("click",this._onImageClick,"img",this));this._registerEvent(this.get("model").after("linkToChange",this._syncLinkTo,this));e&&this._updateInsertPointOnHeightChange();this._registerEvent(o.after("designLayoutChange",this._syncDynamicElements,this),r.SQS.LayoutEngine.Events.after("layout-engine:grid-cleaned",function(){r.later(1,this,this._syncDynamicElements)},this),r.Global.after("tweak:change",this._syncDynamicElements,this));this.contentCaption.on("blur",function(){var e=l(o.get("designLayout"),o.get("description.html"),o.get("filename")||a.get("filename"));var t=r.SQS.LayoutEngine.ContentItem.getCtor();new t({id:o.get("imageId"),altText:e}).save({fields:["altText"]})},this)},_updateInsertPointOnHeightChange:function(){var e=this.contentCaption.get("boundingBox");var t=e.getComputedStyle("transitionDuration");var a=r.Array.map(t.split(","),function(e){return 1e3*parseFloat(e,100)});var i=Math.max.apply(this,a);r.Lang.isNumber(i)&&i>0&&this.after("focusedChange",function(e){this.contentCaption.isEmpty()&&r.later(i,this,this.fire,"widget:contentUpdate")})},syncUI:function(){var e=this.get("model").get("layout");var t=!this.get("model").get("imageId")||!this.get("editable")&&("caption-hidden"===e||!this.contentCaption.get("model").get("html"));t?this.contentCaption.hide():this.contentCaption.show();this._syncLinkTo();this._syncStretch()},_syncStretch:function(){var e=this.contentCaption.get("boundingBox");if(!e.getDOMNode())return;if(this.get("model").get("stretch")){e.setStyle("maxWidth",null);return}var t=this.contentImage.get("model").get("dimensions");e.setStyle("maxWidth",t?t.width:null)},_onImageClick:function(){var e=this.get("model").get("linkTo");var t=this.get("model").get("newwindow");r.Lang.isString(e)&&e.length>0&&(t?window.open(e):window.top.location=e)},_syncLinkTo:function(){var e=this.contentImage.get("boundingBox").one("img");if(!r.Lang.isValue(e))return;var t=this.get("model").get("linkTo");r.Lang.isString(t)&&t.length>0?e.setStyle("cursor","pointer"):e.setStyle("cursor","auto")},_syncDynamicElements:function(){var e=this.get("contentBox");if(e.getDOMNode()){e.toggleClass("sqs-narrow-width",e.get("offsetWidth")<415);var t=e.one(".sqs-dynamic-text-container");t&&n(t.getDOMNode())}},destructor:function(){this.clearAnimationTimeout()}},{CSS_PREFIX:"sqs-block-image",MODEL:r.SQS.LayoutEngine.BlockModel.Image,ATTRS:{htmlContentEditor:{},htmlContentEditorType:{value:"simple"},defaultContentModel:{},imageContentWidget:{valueFn:function(){return r.SQS.LayoutEngine.BlockContent.Image}},stack:{},type:{value:s.IMAGE},addButtonText:{value:i("Add Button Text")}}})},"1.0",{requires:["base","model","widget-parent","@sqs/layout-engine/event-registrar","@sqs/layout-engine/block-model-image","@sqs/layout-engine/block-content-html","@sqs/layout-engine/block-content-image","@sqs/layout-engine/block-base","@sqs/layout-engine/block-mixin-animated-block"]})},"./src/main/webapp/universal/scripts-layout-engine/block/markdown.js":function(e,t,a){var i=a("./src/main/webapp/frontend/packages/enums/BlockType.js");var s=a("./common/temp/node_modules/marked/lib/marked.js");YUI.add("@sqs/layout-engine/block-block-markdown",function(e){e.namespace("SQS.LayoutEngine.ContentModel").MarkdownBlock=e.Base.create("MarkdownContentModel",e.Model,[],{},{ATTRS:{wysiwyg:{value:{engine:"code",mode:"markdown",isSource:false,source:""}},html:{value:""}}});e.namespace("SQS.LayoutEngine.Block").Markdown=e.Base.create("block-markdown",e.SQS.LayoutEngine.Block.Base,[],{initializer:function(){this.get("editController").isMobileApp()&&this._populateEmptyHtml()},bindUI:function(){this.get("model").on("change",this.syncUI,this)},syncUI:function(){var e=this.get("model").get("html");this.get("contentBox").empty();this.get("contentBox").setHTML(e);this.fire("widget:contentUpdate")},markdownToHTML:function(e,t){if(!e)return"";s.setOptions({breaks:!!t});return s(e)},_populateEmptyHtml:function(){var e=this.get("model");var t=e.get("wysiwyg.source");t&&!e.get("html")&&e.set("html",this.markdownToHTML(t))},isEmpty:function(){return!this.get("model").get("html")}},{CSS_PREFIX:"sqs-block-markdown",MODEL:e.SQS.LayoutEngine.ContentModel.MarkdownBlock,ATTRS:{editor:{valueFn:function(){return e.SQS.LayoutEngine.Block.Editor.Markdown}},type:{value:i.MARKDOWN}}})},"1.0",{requires:["base","model","@sqs/layout-engine/block-base"]})},"./src/main/webapp/universal/scripts-layout-engine/block/mixin-animated-block.js":function(e,t){YUI.add("@sqs/layout-engine/block-mixin-animated-block",function(e){var t=250;e.SQS.LayoutEngine.Block.MixinAnimatedBlock=e.Base.create("animatedBlock",e.Base,[],{clearAnimationTimeout:function(){this._retriggerAnimationTimeout&&window.clearTimeout(this._retriggerAnimationTimeout)},isInDefaultView:function(e){if(!e)return false;var t=e.getDOMNode();if(!t||!t.ownerDocument||!t.ownerDocument.defaultView)return false;return true},updateAnimationClassname:function e(t,a,i){if(!this.isInDefaultView(i))return;var s=i.getDOMNode().ownerDocument.documentElement;this._blockAnimationScrollTop=s.scrollTop;i.addClass("animation-disabled");var n=a[t.attrName];var r=n+"-"+t.prevVal;var o=n+"-"+t.newVal;i.removeClass(r);i.addClass(o)},rerunAnimation:function e(a){this.clearAnimationTimeout();if(!this.isInDefaultView(a))return;a.removeClass("animation-loaded");this._retriggerAnimationTimeout=window.setTimeout(function(){if(this.isInDefaultView(a)){a.removeClass("animation-disabled");if(this._blockAnimationScrollTop){var e=a.getDOMNode().ownerDocument.documentElement;var t=Math.max(this._blockAnimationScrollTop-1,0);e.scrollTo(e.scrollLeft,t);e.scrollTo(e.scrollLeft,this._blockAnimationScrollTop);this._blockAnimationScrollTop=null}a.addClass("animation-loaded")}}.bind(this),t)}},{})},"1.0",{requires:["base"]})},"./src/main/webapp/universal/scripts-layout-engine/block/mixin-aspect-ratio.js":function(e,t){YUI.add("@sqs/layout-engine/block-mixin-aspect-ratio",function(i){i.namespace("SQS.LayoutEngine.Block");i.SQS.LayoutEngine.Block.MixinAspectRatio=i.Base.create("aspectRatio",i.Base,[],{initializer:function(){this.get("boundingBox").addClass("sqs-aspect-ratio");this.after("intrinsicWrapperChange",this._swapIntrisincWrapper,this);i.after(this._bindAspectRatio,this,"bindUI");i.after(this._updateAspectRatio,this,"renderUI");i.after(this._updateAspectRatio,this,"syncUI");i.after(this._updateAspectRatio,this,"_renderSuccess")},_bindAspectRatio:function(){this.get("model").after("change",this._afterModelChange,this)},_afterModelChange:function(e){this._updateAspectRatio()},_swapIntrisincWrapper:function(e){var t=this.get("model").get("aspectRatio");i.Lang.isValue(e.prevVal)&&this.destroyBlock(e.prevVal);i.Lang.isValue(e.newVal)&&t&&this.initializeBlock(e.newVal,t)},_updateAspectRatio:function(e){var t=this.get("model").get("aspectRatio");var a=this.get("intrinsicWrapper");i.Lang.isValue(t)?!a.hasClass("sqs-intrinsic")||a.one("> div")&&!a.one("> div").hasClass("sqs-intrinsic-content")?this.initializeBlock(a,t):this._setPadding(t):this.destroyBlock(a)},_setPadding:function(e){this.get("intrinsicWrapper").setStyle("paddingBottom",e+"%")},initializeBlock:function(e,t){if(i.Lang.isValue(t)){e.addClass("sqs-intrinsic");e.setStyle("paddingBottom",t+"%");e.one("> div")&&e.one("> div").addClass("sqs-intrinsic-content")}},destroyBlock:function(e){if(e.hasClass("sqs-intrinsic")){e.removeClass("sqs-intrinsic");e.setStyle("padding-bottom",null);e.one(".sqs-intrinsic-content")&&e.one(".sqs-intrinsic-content").removeClass("sqs-intrinsic-content")}}},{ATTRS:{intrinsicWrapper:{getter:function(){return this.get("contentBox")}}}})},"1.0",{requires:["base","node","@sqs/layout-engine/aspect-ratio-manager"]})},"./src/main/webapp/universal/scripts-layout-engine/block/mixin-coalesceable.js":function(e,t){YUI.add("@sqs/layout-engine/block-mixin-coalesceable",function(i){i.namespace("SQS.LayoutEngine.Block");i.SQS.LayoutEngine.Block.MixinCoalesceable=i.Base.create("block-coalesceable",i.Base,[],{initializer:function(){this.get("host").get("editController").set("contentParentBlockSelector","."+this.get("host").getClassName());i.Do.after(this._attemptToCoalesce,this,"cleanBlock")},insertContentIntoModel:function(e){throw new Error("Coalesceable requires insertContentIntoModel method implementation")},_attemptToCoalesce:function(e){if(this.get("host").get("isNewBlock")||this.get("host").get("model").get("floatDir"))return;var t=this._getCoalescableSiblingGroup();t.length>1&&i.Widget.getByNode(t[0]).blockEditor.coalesceFollowingBlocks()},_getCoalescableSiblingGroup:function(e){var t=e||this._bb;var a=t.ancestor().get("children");var i=a.size();var s=a.indexOf(t);var n="."+this.get("host").getClassName()+":not(.sqs-destroyme)";var r=t.test(n)?[t]:[];var o;if(0===i)return r;if(s>0)for(o=s-1;o>=0&&a.item(o).test(n)&&this._isCoalesceable(a.item(o));o--)r.unshift(a.item(o));if(s<i-1)for(o=s+1;o<i&&a.item(o).test(n)&&this._isCoalesceable(a.item(o));o++)r.push(a.item(o));return r},_isCoalesceable:function(e){console.warn("Please implement the mixer's own _isCoalesceable method.");return true},coalesceFollowingBlocks:function(){var e=this._getCoalescableSiblingGroup();if(0!==e.indexOf(this._bb))return;var t=i.Array.reduce(e,"",function(e,t){var a=i.Widget.getByNode(t);t!==this._bb&&a.queueForDestruction({coalescing:true});return e+"\n"+a.get("model").get("html").trim()},this);this.insertContentIntoModel(t);this.get("host").syncUI()}})},"1.0",{requires:["base","node","widget"]})},"./src/main/webapp/universal/scripts-layout-engine/block/mixin-splitable.js":function(e,t){YUI.add("@sqs/layout-engine/block-mixin-splitable",function(s){var e=e||function(){};var t=["p","ul","ol","blockquote","h1","h2","h3","h4","h5","h6"];s.namespace("SQS.LayoutEngine.Block");s.SQS.LayoutEngine.Block.MixinSplitable=s.Base.create("block-splitable",s.Base,[],{initializer:function(){this.get("host").get("editController").set("contentParentBlockSelector","."+this.get("host").getClassName())},split:function(a,e){var t=a.ancestor().get("children");var i=false;a.ancestor(".sqs-block")&&a.ancestor(".sqs-block")===this._bb||(i=true);var s="";var n="";t.each(function(e,t){if(i)n+=e.getDOMNode().outerHTML;else{e===a&&(i=true);s+=e.getDOMNode().outerHTML}},this);if(n.length>0){var r=new(this.get("host").constructor)({editable:this.get("host").get("editable"),render:false,isNewBlock:false,editMode:this.get("host").get("editMode"),editorConfig:{defaultEditingMode:false},editController:this.get("host").get("editController")});r.render(this._bb.ancestor(".sqs-layout"));r.blockEditor.insertContentIntoModel(n);r.syncUI();this.insertContentIntoModel(s);this.get("host").syncUI();this._bb.insert(r.get("boundingBox"),"after");var o=this._bb.ancestor(".sqs-layout").LayoutBuilder;o.registerBlock(r)}this._bb.insert(e,"after")},insertContentIntoModel:function(e){throw new Error("Splitable requires insertContentIntoModel method implementation")},getBlockLevelElementsForDropZone:function(){var e=this.get("selectorsForDropZone");var t=this._cb.all(e);return t},getOverlays:function(){return this.get("host").get("boundingBox").all(".sqs-content-overlay")},_initLayoutDrop:e,_updateDropOverlays:function(){var e=s.DD.DDM.activeDrag;if(this.get("destroyed")||!e||!e.get("node").inDoc(s.config.doc))return;this.overlays&&this.overlays.length&&this._destroyDropOverlays();var i=new s.NodeList;e.get("node")!==this._bb&&(i=this.getBlockLevelElementsForDropZone());i.size()<1&&(i=s.all(this._bb));this.overlays=s.Array.map(this._addOverlayDOMNodes(i),function(e,t){var a=i.item(t);return{node:s.one(e),alignNode:a,regionData:this._getRegionData(a,i.item(t-1),i.item(t+1)),drop:null}},this);this._positionOverlayNodes()},_addOverlayDOMNodes:function(e){var t=e.size();var a=[];while(t-- >0)a.push(s.DOM.create('<div class="sqs-content-overlay">'));this._bb.append(a);return a},_getRegionData:function(e,t,a){var i=this._bb.get("region");var s=a?a.get("region"):{};var n=t?t.get("region"):{};var r=e.get("region");var o=t?r.top:i.top;n.height&&(o-=(o-n.bottom)/2);var l=a?r.bottom:i.bottom;s.height&&(l+=(s.top-r.bottom)/2);return{height:l-o,top:o-i.top,isFirstContent:!t,isLastContent:!a}},_positionOverlayNodes:function(){s.Array.each(this.overlays,function(e){var t=e.node;var a=e.regionData;t.setData("alignNode",e.alignNode);t.setData("isAdjacentToBlockEdge",{top:a.isFirstContent,bottom:a.isLastContent});t.setStyles({top:a.top,height:a.height});this.get("lockedLayout")||(e.drop=new s.SQS.LayoutEngine.Layout.Drop({node:t,groups:["blocks"],locked:false}));t.on("click",this._destroyDropOverlays,this)},this)},_destroyDropOverlays:function(){if(!this.overlays)return;s.Array.each(this.overlays,function(e){s.Lang.isValue(e.drop)&&e.drop.destroy();e.node.detach();e.node.remove(true)});this.overlays=null},beforeLayoutDrag:function(){this._updateDropOverlays()},afterLayoutDrag:function(){this._destroyDropOverlays()},_afterDropZoneLockedChange:function(t){s.Array.each(this._overlays,function(e){e.drop.set("lock",t.newVal)});t.newVal?this._destroyDropOverlays():this._updateDropOverlays()},destructor:function(){this._destroyDropOverlays()}},{ATTRS:{selectorsForInsertPoints:{valueFn:function(){return s.Array.map(t,function(e){return".sqs-block-content > "+e+", .sqs-html-content > "+e}).join(", ")}},selectorsForDropZone:{valueFn:function(){return s.Array.map(t,function(e){return".sqs-block-content > "+e+", .sqs-html-content:not(.rte) > "+e}).join(", ")}}}})},"1.0",{requires:["base","node","widget","@sqs/layout-engine/layout-drop"]})},"./src/main/webapp/universal/scripts-layout-engine/block/modelsync-base.js":function(e,t,a){var l=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var i=a("./src/main/webapp/universal/scripts-layout-engine/shared/constants/BlockTypeStrings.js");var s=a("./common/temp/node_modules/lodash/debounce.js");var n=a("./common/temp/node_modules/lodash/capitalize.js");var c=false;function u(e){return n(e.replace(/[-|_]/g," ").toLowerCase())}YUI.add("@sqs/layout-engine/block-model-sync-base",function(o){o.namespace("SQS.LayoutEngine.Block");o.SQS.LayoutEngine.Block.ModelSyncBase=o.Base.create("block-modelsync",o.SQS.LayoutEngine.Block.Base,[],{initializer:function(){"MODELSYNC"===this.get("blockTypeName")&&o.Lang.isValue(this.get("type"))&&this.set("blockTypeName",i.BlockTypeKeys[this.get("type")]);this._networkListener=o.Global.on("network:online",this._onNetworkReconnect.bind(this))},renderUI:function(){this._renderBlock()},bindUI:function(){this.get("model").after("change",s(function(e){c&&console.log("[le] modelsync-base - model changed",e);this._renderBlock(e)},this.get("contentRefreshRate"),true,true),this)},_onNetworkReconnect:function(){this.get("isDisplayingOfflineState")&&this._renderBlock()},_updateOfflineState:function(e){var t=e.error&&0===e.status;this.set("isDisplayingOfflineState",t)},_renderStarted:function(){c&&console.log("[le] modelsync-base - _renderBlock",this)},_renderFinished:function(){c&&console.log("[le] modelsync-base - _renderBlock finished",this);this.fire("widget:contentUpdate");this.set("stack",null)},_renderBlock:function e(){this._renderStarted();var t=u(this.get("blockTypeName"));var a=o.bind(this._renderFinished,this);var i=this.get("stack");i&&(a=i.add(a));try{var s={};var n=this.toJSON();n.value&&n.value.collectionId?s.collectionId=n.value.collectionId:this.get("collectionId")&&(s.collectionId=this.get("collectionId"));this.get("contentItemId")&&(s.contentItemId=this.get("contentItemId"));s.widgetJSON=JSON.stringify(n);o.Data.post({url:"/api/widget/GetWidgetRendering",data:s,success:function(e){c&&console.log("[le] modelsync-base - _renderBlock post success",e);if(null!==this.get("contentBox").getDOMNode()){this._renderSuccess(e);this._updateOfflineState(e);a();return}console.warn("[le] modelsync-base - _renderBlock post success - no dom node in response")},failure:function(e){c&&console.log("[le] modelsync-base - _renderBlock post failure",e);if(null!==this.get("contentBox").getDOMNode()){this._renderError(e);this._updateOfflineState(e);a();return}console.warn("[le] modelsync - _renderBlock post failure - no dom node")}},this)}catch(e){var r=l("Error: {blockName} Block could not be rendered.",{blockName:t});e instanceof TypeError&&console.warn(o.Lang.sub("Error: {message}",e));this._renderError({error:r})}},_cleanWidgetContent:function(){var e=this.get("contentBox").one(".sqs-state-message, .state-message");o.Lang.isValue(e)&&this.get("model").get("aspectRatio")&&e.wrap("<div></div>")},_setWidgetContent:function(){var e=this.get("contentBox");if(!e.getDOMNode())return;e.empty();e.insert(this.get("widgetContent"));this._cleanWidgetContent()},_renderSuccess:function(e){c&&console.log("[le] modelsync-base _renderSuccess",e);this.set("widgetContent",e.html);this._setWidgetContent()},_renderError:function(e){var t=l("Error: {sub1} Block could not be rendered.",{sub1:u(this.get("blockTypeName"))});var a=this._getNewStateMessageNode({classNames:"error",title:e&&e.title,message:e&&e.error||t});this.get("boundingBox").addClass("sqs-block-error");this.get("contentBox").empty();this.get("contentBox").append(a)},_getNewStateMessageNode:function(e){e=o.merge({classNames:"warning",message:l("There was an error.")},e);var t=o.Node.create('<div class="sqs-blockStatus"><div class="sqs-blockStatus-box">'+(e.title?'<div class="sqs-blockStatus-box-title">'+e.title+"</div>":"")+'<div class="sqs-blockStatus-box-message">'+e.message+"</div></div></div>");if(o.Lang.isValue(e.button)){e.button=o.merge({text:"OK",classNames:""},e.button);var a=o.Node.create('<div class="sqs-blockStatus-box-button">'+e.button.text+"</div>").appendTo(t.one(".sqs-blockStatus-box"));o.Lang.isFunction(e.button.onClick)&&a.on("click",e.button.onClick)}return t},_getStackFinished:function(){var e=this.get("stack");if(e)return e.add();return function(){}},destructor:function(){if(this._networkListener){this._networkListener.detach();this._networkListener=null}}},{CSS_PREFIX:"sqs-block-modelsync",MODEL:o.Model,ATTRS:{stack:{},widgetContent:{value:""},isDisplayingOfflineState:{value:false},collectionId:{},contentItemId:{},contentRefreshRate:{value:200}}})},"1.0",{requires:["base","model","node","@sqs/layout-engine/block-base"]})},"./src/main/webapp/universal/scripts-layout-engine/block/plugin-resizable.js":function(e,t){YUI.add("@sqs/layout-engine/block-plugin-resizable",function(f){f.namespace("SQS.LayoutEngine.Block.Plugin.Resizable");f.SQS.LayoutEngine.Block.Plugin.Resizable=f.Base.create("resizableBlock",f.Plugin.Base,[],{initializer:function(e){f.after(this._initResize,this,"renderUI");f.after(this._initResize,this,"syncUI");f.after(this._initResize,this,"_renderBlock");f.after(this._initResize,this,"_renderSuccess");this.get("host").get("rendered")?this._initResize():this.afterHostEvent("renderedChange",this._initResize,this)},destructor:function(){this._destroyResize()},_toggleResize:function(e){e?this._initResize():this._destroyResize()},_syncAspectRatio:function(){var e=this.get("model");var t=e.get("aspectRatio");var a=e.get("dimensions");var i=e.get("vSize");t=i?this._calculateAspectRatio():t||(a?a.height/a.width*100:75);this.get("host").get("model").set("aspectRatio",t,{silent:true})},_initResize:function(){var e;var t=this.get("host");var a=this.get("resizeNode");var i=t.hasPlugin(f.SQS.LayoutEngine.WidgetResize.NS);e={resizeNode:a,wrap:false,minHeight:1};t.plug(f.SQS.LayoutEngine.WidgetResize,e);var s=a.one(".yui3-resize-handles-wrapper");this.get("host").get("boundingBox").appendChild(s);i||this._bindResizeEvents()},_destroyResize:function(){var e=this.get("resizeNode");this.get("host").unplug(f.SQS.LayoutEngine.WidgetResize);if(!this.get("blockEditor").get("resizable")&&!f.Lang.isValue(this.get("model").get("aspectRatio"))){var t=e.one(".sqs-intrinsic");if(t){t.setStyle("paddingBottom",null);t.removeClass("sqs-intrinsic");var a=t.one(".sqs-intrinsic-content");a&&a.removeClass("sqs-intrinsic-content")}}e.setStyles({width:null,height:null,border:null,margin:null,padding:null});e.one(".yui3-resize-handles-wrapper")&&e.one(".yui3-resize-handles-wrapper").remove(true)},_bindResizeEvents:function(){var e=this.get("host")[f.SQS.LayoutEngine.WidgetResize.NS];e.on("resize:start",this._nullVSize,this);e.on("resize:resize",this._adjustNodePosition,this);e.on("resize:resize",this._updateAspectRatio,this);e.on("resize:end",this._resetMouseDelta,this);e.after("resize:end",this._updateAspectRatio,this);e.on("resize:start",this._disableInsertPoints,this);e.on("resize:end",this._enableInsertPoints,this)},_disableInsertPoints:function(){f.SQS.LayoutEngine.Singletons.InsertPointController.disable()},_enableInsertPoints:function(){f.SQS.LayoutEngine.Singletons.InsertPointController.enable()},_nullVSize:function(e){f.SQS.LayoutEngine.Singletons.InsertPointController.hide();var t=this.get("model");if(f.Lang.isValue(t.get("vSize"))){this._syncAspectRatio();t.set("vSize",null,{silent:true})}},_adjustNodePosition:function(e){var t=this.get("resizeNode");var a=t[f.Plugin.Resize.NS];var i=this.get("snapToThreshold");var s=t.get("region");var n=this.get("host").get("boundingBox").get("region");var r=a.get("activeHandleNode");var o=r.get("region");var l=this.get("model").get("dimensions");var c=a.delegate.dd;var u=c.mouseXY[1];f.Lang.isNumber(this._mouseDelta)||(this._mouseDelta=o.bottom-o.height/2-u);var d;var p;if(l){d=s.width/l.width;p=parseInt(l.height,10)*d}else{d=.75;p=s.height}var h=s.top+(n.bottom-s.bottom);var g=p+h;var m=g-o.height/2;u>g-i&&u<g+i&&(c.actXY[1]=m)},_calculateAspectRatio:function(){var e=this.get("resizeNode").get("region");var t=parseInt(this.get("resizeNode").getStyle("paddingLeft"),10);t+=parseInt(this.get("resizeNode").getStyle("paddingRight"),10);var a=parseInt(this.get("resizeNode").getStyle("paddingBottom"),10);a+=parseInt(this.get("resizeNode").getStyle("paddingTop"),10);f.Lang.isNumber(a)||(a=0);f.Lang.isNumber(t)||(t=0);return 100*(e.height-a)/(e.width-t)},_updateAspectRatio:function(e,t){var a=this._calculateAspectRatio();t?this.get("model").set("aspectRatio",a,{silent:true}):this.get("model").set("aspectRatio",a)},_resetMoustDelta:function(e){this.mouseDelta=null;this.get("host").get("editController").alignInsertPoints()}},{NS:"resizableBlock",ATTRS:{resizeNode:{valueFn:function(){return this.get("host").get("boundingBox")}},model:{valueFn:function(){return this.get("host").get("model")}},blockEditor:{value:null}}})},"1.0",{requires:["base","plugin","@sqs/layout-engine/widget-resize"]})},"./src/main/webapp/universal/scripts-layout-engine/block/quote.js":function(e,t){var s={blockAnimation:"block-animation"};YUI.add("@sqs/layout-engine/block-quote",function(e){e.namespace("SQS.LayoutEngine.Block");var t=e.SQS.LayoutEngine.Block.Quote=e.Base.create("block-quote",e.SQS.LayoutEngine.Block.ModelSyncBase,[e.SQS.LayoutEngine.Block.MixinAnimatedBlock],{bindUI:function(){t.superclass.bindUI.call(this);this.after("widget:contentUpdate",this.handleAnimationChange,this)},handleAnimationChange:function e(t){this.clearAnimationTimeout();var a=this.get("contentBox");var i=a.one("figure");this.updateAnimationClassname(t,s,i);this.rerunAnimation(i)},destructor:function(){this.clearAnimationTimeout()}},{CSS_PREFIX:"sqs-block-quote",MODEL:e.SQS.LayoutEngine.BlockModel.Quote,ATTRS:{}})},"1.0",{requires:["base","@sqs/layout-engine/block-model-sync-base","@sqs/layout-engine/block-model-quote","@sqs/layout-engine/block-mixin-animated-block"]})},"./src/main/webapp/universal/scripts-layout-engine/block/schema-editor-base.js":function(e,t,a){var i=a("./common/temp/node_modules/@sqs/block-schemas/build/index.js");var s=a("./common/temp/node_modules/lodash/camelCase.js");var n=a("./common/temp/node_modules/lodash/startCase.js");var r=a("./common/temp/node_modules/lodash/kebabCase.js");YUI.add("@sqs/layout-engine/block-schema-editor-base",function(a){a.namespace("SQS.LayoutEngine.Block.Editor").SchemaBase=a.Base.create("schema-editor-base",a.SQS.LayoutEngine.Block.Editor.Base,[],{initializer:function(){this.get("host").get("isNewBlock")&&this.onceAfter("initializedChange",function(){this.set("editing",true)},this);this.after("editingChange",this.syncEditor,this);this.get("host").get("model").after("change",this.updateHost,this);this.get("eventNames").forEach(function(e){this.publish(e,{prefix:"EditingDialog",broadcast:2,emitFacade:true})}.bind(this))},syncEditor:function(e){if(this.get("editing")){var t=this.getEditorConfig();this.setParams(t);this.openEditor();return}this.closeEditor()},getEditorConfigKey:function(){var e=this.get("host");var t=e.get("blockTypeName").toLowerCase();return t},getEditorConfig:function(){var e=this.getEditorConfigKey();var t=i[this.getEditorConfigKey()];if(!t){console.log("No schema for blockType:"+e);return}return a.merge(this.get("defaultEditorConfig"),t)},openEditor:function(){},closeEditor:function(){},updateHost:function(){this.get("host").syncUI()},setParams:function(e){if(!e)return;this.params=a.merge({},e)}},{NS:"blockEditor",ATTRS:{defaultEditorConfig:{valueFn:function(){return{name:"editor-block-"+r(this.get("blockTypeName")).replace(/(^legacy\-|\-legacy$|\-v2$)/,"")}}},editingButtons:{value:true},eventNames:{value:[]},blockTypeName:{valueFn:function(){return n(s(this.get("host").get("blockTypeName")))}}}})},"1.0",{requires:["@sqs/layout-engine/block-editor-base"]})},"./src/main/webapp/universal/scripts-layout-engine/block/unrenderable.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/universal/scripts-layout-engine/shared/constants/BlockTypeStrings.js").BlockTypeKeys;var n=a("./common/temp/node_modules/lodash/camelCase.js");var r=a("./common/temp/node_modules/lodash/startCase.js");YUI.add("@sqs/layout-engine/block-unrenderable",function(t){function a(e){if(e)return t.UA.mobile?i("{blockName} blocks cannot be rendered in the mobile editor.",{blockName:e}):i("{blockName} blocks cannot be rendered.",{blockName:e});return t.UA.mobile?i("This block cannot be rendered in the mobile editor."):i("This block cannot be rendered.")}t.namespace("SQS.LayoutEngine.Block");t.SQS.LayoutEngine.Block.Unrenderable=t.Base.create("block-unrenderable",t.SQS.LayoutEngine.Block.Base,[],{renderUI:function(){var e=this.get("blockType");this.get("contentBox").addClass("sqs-blockStatus-box").setHTML('<div class="sqs-blockStatus-box-message">'+a(e)+"</div>")}},{CSS_PREFIX:"sqs-blockStatus",ATTRS:{blockType:{valueFn:function(){return r(n(s[this.get("type")]))}}}})},"1.0",{requires:["base","@sqs/layout-engine/block-base"]})},"./src/main/webapp/universal/scripts-layout-engine/block/utils.js":function(e,t){YUI.add("@sqs/layout-engine/block-utils",function(a){a.namespace("SQS.LayoutEngine.Block");a.SQS.LayoutEngine.Block.Utils={getWhitelistingFn:function(t){return function(e){return a.SQS.LayoutEngine.Block.Utils.checkWhitelist(t,e)}},checkWhitelist:function(t,e){a.Lang.isArray(e)||(e=a.Object.keys(e));return a.Array.every(e,function(e){return-1!==a.Array.indexOf(t,e)})}}},"1.0",{requires:["base"]})},"./src/main/webapp/universal/scripts-layout-engine/block/video.js":function(e,t,a){var s=a("./src/main/webapp/frontend/packages/enums/BlockType.js");YUI.add("@sqs/layout-engine/block-video",function(n){n.namespace("SQS.LayoutEngine.Block");var i=n.SQS.LayoutEngine.Block.Video=n.Base.create("block-video",n.SQS.LayoutEngine.Block.ModelSyncBase,[n.SQS.LayoutEngine.Block.MixinAnimatedBlock],{bindUI:function(){i.superclass.bindUI.call(this);var e=this.get("model");var t=e.get("customThumb");t&&this._bindImageListeners(t);e.after("customThumbChange",function(e){e.prevVal&&e.prevVal.detach(this.get("id")+"|*");e.newVal&&this._bindImageListeners(e.newVal)},this)},syncUI:function(){this.get("contentBox").all(".intrinsic").addClass("sqs-intrinsic")},_renderBlock:function(){var e=this.get("model");var t=e.get("customThumb");if(t){var a=t.get("mediaProcessingState");if(a&&a!==n.Squarespace.MediaProcessingState.READY)return}return i.superclass._renderBlock.call(this)},_bindImageListeners:function(e){var t=this.get("id");e.after(t+"|mediaProcessingStateChange",function(e){e.newVal===n.Squarespace.MediaProcessingState.READY&&this._renderBlock(e)},this);e.after(t+"|mediaFocalPointChange",function(e){var t=this.get("contentBox").one(".sqs-video-overlay img");var a=t&&t.hasClass("loaded");var i=e.target.get("mediaProcessingState")===n.Squarespace.MediaProcessingState.READY;if(t&&(a||i)){var s=t.loader;t.setAttribute("data-image-focal-point",e.newVal.x+","+e.newVal.y);s.fire("refresh")}},this)}},{CSS_PREFIX:"sqs-block-video",MODEL:n.SQS.LayoutEngine.BlockModel.Video,ATTRS:{type:{value:s.VIDEO}}})},"1.0",{requires:["base","model","@sqs/layout-engine/block-model-sync-base","@sqs/layout-engine/block-model-video","@sqs/layout-engine/block-mixin-animated-block"]})},"./src/main/webapp/universal/scripts-layout-engine/content-item/content-item.js":function(e,t){YUI.add("@sqs/layout-engine/content-item-content-item",function(t){t.namespace("SQS.LayoutEngine.ContentItem");t.SQS.LayoutEngine.ContentItem.getCtor=function(){var e=t.Object.getValue(t,"Squarespace.Models.ContentItem".split("."));return e||t.SQS.LayoutEngine.ContentItem.Reference}},"1.0",{requires:["@sqs/layout-engine/content-item-reference"]})},"./src/main/webapp/universal/scripts-layout-engine/content-item/embed.js":function(e,t){YUI.add("@sqs/layout-engine/content-item/embed",function(e){e.namespace("SQS.LayoutEngine.ContentItem");e.SQS.LayoutEngine.ContentItem.Embed=e.Base.create("Embed",e.Model,[],{},{ATTRS:{_type:{value:"Embed",validator:function(e){return"Embed"===e},readOnly:true},embed:{value:null},oembed:{value:null},overlay:{value:true}}})},"1.0",{requires:["base","model"]})},"./src/main/webapp/universal/scripts-layout-engine/content-item/reference.js":function(e,t,a){var i=a("./src/main/webapp/frontend/packages/enums/MediaProcessingState.js");var n=a("./src/main/webapp/frontend/packages/enums/RecordType.js");var r=a("./src/main/webapp/frontend/packages/enums/WorkflowStates.js");var o=a("./src/main/webapp/frontend/packages/enums/CommentStates.js");YUI.add("@sqs/layout-engine/content-item-reference",function(s){s.namespace("SQS.LayoutEngine.ContentItem");var a=s.SQS.LayoutEngine.ContentItem.Reference=s.Base.create("Item",s.Model,[s.SQS.LayoutEngine.ModelSync.REST],{root:"content-items",url:"content-items/{id}",initializer:function(e){this._needsJobListener&&this._bindJobListener();this._updateNextDisplayIndex();s.Do.after(function(){var e=this.get("collectionId");var t="/api/";s.Lang.isValue(e)&&(t+="content-collections/"+e+"/");t+=s.Do.currentRetVal;return new s.Do.AlterReturn("Adding prefix to url.",t)},this,"getURL",this)},destructor:function(){this._jobListener&&this._jobListener.detach()},toJSON:function(){var e=a.superclass.toJSON.call(this);var t=e.structuredContent;s.Lang.isValue(t)&&(e.structuredContent=t.toJSON());e.items=[];return e},serialize:function(e){var t=this.toJSON();delete t.items;delete t.author;delete t.fullUrl;delete t.assetUrl;delete t.resolved;delete t.postItemInjectCode;delete t.promotedBlock;delete t.promotedBlockType;delete t.nextDisplayIndex;delete t.mediaIsUploading;delete t.hasFileData;delete t.isGlobalFakeContentItem;delete t.childrenGroups;return s.JSON.stringify(t)},save:function(e,t){this.isNew()||!(s.Lang.isObject(e)&&e.fields)?a.superclass.save.call(this,e,t):this._saveFields(e.fields,t)},autoSave:function(e,t){if(s.Lang.isFunction(e)){t=e;e={}}else s.Lang.isValue(e)||(e={});e.headers=s.merge(e.headers,{"X-AutoSave":true});this.save(e,t)},like:function(t){s.Data.post({url:this.getURL()+"/sentiment/like",success:function(e){s.Lang.isFunction(t)&&t(null,e)},failure:function(e){s.Lang.isFunction(t)&&t(e,null)}},this)},dislike:function(t){s.Data.post({url:this.getURL()+"/sentiment/dislike",success:function(e){s.Lang.isFunction(t)&&t(null,e)},failure:function(e){s.Lang.isFunction(t)&&t(e,null)}},this)},clearFileData:function(){this.setAttrs({systemDataId:null,systemDataOrigin:null,mediaProcessingState:null,systemDataSourceType:null,systemDataVariants:null,filename:null});s.Data.post({url:"/api/commondata/ClearEmbeddedAsset",data:{itemId:this.get("id")}})},clearChildGroup:function(e,t){s.Data.post({url:"/api/commondata/ClearChildGroup",data:{childType:e,itemId:this.get("id")},success:function(e){s.Lang.isFunction(t)&&t(null,e)},failure:function(e){s.Lang.isFunction(t)&&t(e,null)}})},getAssetUrlForFormat:function(e){return s.Lang.sub("{assetUrl}?format={format}",{assetUrl:this.get("assetUrl"),format:e})},getId:function(){return this.get("id")},_needsJobListener:function(){var e=this.get("mediaprocessingState");return e===i.QUEUED||e===i.PROCESSING},_bindJobListener:function(){if(!Static||!Static.JOB_MANAGER)return;this._jobListener=Static.JOB_MANAGER.on("completed",function(e){var t=this.get("id");var a=e.get("data.contentItemId");var i=e.get("data.globalContentItemId");if(a===t){this.load();this._jobListener.detach()}else if(s.Lang.isValue(i)&&i===t){s.Data.get({url:"/api/rest/global-content-items/"+i,success:function(e){this.set("assetUrl",e.assetUrl);this.setAttrs(e)}},this);this._jobListener.detach()}},this)},_updateNextDisplayIndex:function(){var e=0;this._set("nextDisplayIndex",e)},_saveFields:function(e,t){if(e.length>1)throw"Saving multiple fields is not currently supported.";var a=e[0];var i={field:a,itemId:this.get("id"),value:this.get(a)};s.Data.post({url:"/api/commondata/SaveItemField",data:s.merge({},i),success:function(e){s.Lang.isFunction(t)&&t(null,e.item)},failure:function(e){s.Lang.isFunction(t)&&t.call(e,null)}},this)},_getStructuredContentCtor:function(){switch(this.get("recordType")){case n.EMBED:case n.VIDEO:return s.SQS.LayoutEngine.ContentItem.Embed;default:return null}}},{ATTRS:{id:{value:null},collectionId:{value:null},parentId:{value:null},authorId:{valueFn:function(){var e=s.Object.getValue(Static,["SQUARESPACE_CONTEXT","authenticatedAccount"]);if(e)return e.id;return null}},proxyForId:{value:null},recordType:{value:n.TEXT,writeOnce:true},childType:{value:null},addedOn:{valueFn:function(){return(new Date).getTime()},writeOnce:"initOnly"},updatedOn:{value:null,writeOnce:"initOnly"},publishOn:{valueFn:function(){return(new Date).getTime()}},unsaved:{value:null},urlId:{value:null},title:{value:null},body:{value:null},excerpt:{value:null},displayIndex:{value:0},starred:{value:false},passthrough:{value:false},tags:{value:[]},categories:{value:[]},workflowState:{setter:function(e){return e},value:r.DRAFT},systemDataId:{value:null},systemDataVariants:{value:null},systemDataOrigin:{value:null},contentType:{value:null},filename:{value:null},dataSize:{value:null},sourceUrl:{value:null},mediaProcessingState:{value:null},mediaFocalPoint:{value:{x:.5,y:.5},setter:function(e){if(s.Lang.isString(e)){e=e.split(",");var t=parseFloat(e[0]);var a=parseFloat(e[1]);return{x:!isNaN(t)&&t<=1?t:.5,y:!isNaN(a)&&a<=1?a:.5}}return e}},colorData:{value:null},clickthroughUrl:{value:null},location:{value:null},customContent:{value:null},likeCount:{value:0},dislikeCount:{value:0},commentCount:{value:0},publicCommentCount:{value:0},commentState:{valueFn:function(){var e=s.Object.getValue(Static,["SQUARESPACE_CONTEXT","websiteSettings"]);var t=e.commentEnableByDefault;var a=e.commentsEnabled;if(t||a)return o.ENABLED;return o.DISABLED}},commentDisableOn:{valueFn:function(){var e=s.Object.getValue(Static,["SQUARESPACE_CONTEXT","websiteSettings","commentDisableAfterDaysDefault"]);if(e)return s.Date.addDays(new Date,e).getTime();return null}},pushedServices:{value:{}},shareStates:{value:[]},structuredContent:{valueFn:function(){var e=this._getStructuredContentCtor();if(s.Lang.isNull(e))return null;return new e},setter:function(e){if(e instanceof s.Model)return e;var t=this._getStructuredContentCtor();if(s.Lang.isNull(t))return null;return new t(e)}},childrenGroups:{value:{}},author:{value:null},fullUrl:{value:null},assetUrl:{value:null,getter:function(e){if(s.SQS.LayoutEngine.UrlUtils.isSecure())return s.SQS.LayoutEngine.UrlUtils.securifyURL(e);return e}},resolved:{value:false},postItemInjectCode:{value:null},promotedBlock:{value:null},promotedBlockType:{value:null},nextDisplayIndex:{value:0,readOnly:true},mediaIsUploading:{value:false},hasFileData:{getter:function(){var e=this.get("mediaProcessingState");var t=e===i.QUEUED;if(this.get("isGlobalFakeContentItem"))return!this.isNew();if("USER_UPLOAD"===this.get("systemDataOrigin")&&t)return true;if(t)return true;return s.Lang.isValue(this.get("systemDataId"))}},isGlobalFakeContentItem:{value:false}}})},"1.0",{requires:["base","json","model","@sqs/layout-engine/model-sync-rest","@sqs/layout-engine/content-item/embed","@sqs/layout-engine/url-utils"]})},"./src/main/webapp/universal/scripts-layout-engine/dd-overrides/tablet-dd-overrides.js":function(e,t){YUI.add("@sqs/layout-engine/tablet-dd-overrides",function(i){i.DD.Drag.START_EVENT="gesturemovestart";var t=i.DD.Drag.prototype._unprep;i.DD.Drag.prototype._unprep=function(){var e=this.get("node");t.call(this);e.detachAll("gesturemoveend")};var a="node";var s="dragNode";var n="offsetHeight";var r="offsetWidth";i.DD.DDM.set("throttleTime",30);i.mix(i.DD.DDM,{_pg_size:function(){if(this.activeDrag){var e=i.one("body");var t=e.get("docHeight");var a=e.get("docWidth");this._pg.setStyles({height:t+"px",width:a+"px"})}},_createPG:function(){var e=i.Node.create("<div></div>");var t=i.one("body");var a;e.setStyles({top:"0",left:"0",position:"absolute",zIndex:"9999",overflow:"hidden",backgroundColor:"red",display:"none",height:"5px",width:"5px"});e.set("id",i.stamp(e));e.addClass(i.DD.DDM.CSS_PREFIX+"-shim");t.prepend(e);this._pg=e;this._pg.on("pointerup",i.bind(this._end,this));a=i.one("win");i.on("window:resize",i.bind(this._pg_size,this));a.on("scroll",i.bind(this._pg_size,this))},_move:function(e){if(this.activeDrag){if(false===this._modernLongpress||!e._event.cancelable){i.DD.DDM.stopDrag();return}if(false===this.activeDrag.get("lock")){e.preventDefault();this.activeDrag._move.call(this.activeDrag,e);this._dropMove()}}},_setupListeners:function(){this._createPG();this._active=true;this._setupModernTouchListeners();i.one(i.config.doc).on("gesturemove",i.throttle(i.bind(this._move,this),this.get("throttleTime")));i.one(i.config.doc).on("pointercancel",this._end,this)},_setupModernTouchListeners:function(){var e=function(e){this._modernTouchTimer=window.setTimeout(function(){this._modernTouchmoved||(this._modernLongpress=true)}.bind(this),300)}.bind(this);i.config.doc.addEventListener("pointerdown",e,{passive:false});var t=function(e){this._modernLongpress?e.preventDefault():this._modernTouchmoved=true}.bind(this);i.config.doc.addEventListener("pointermove",t,{passive:false});var a=function(e){window.clearTimeout(this._modernTouchTimer);this._modernLongpress=false;this._modernTouchmoved=false}.bind(this);i.config.doc.addEventListener("pointerup",a);this.on("destroy",function(){i.config.doc.removeEventListener("pointerdown",e,{passive:false});i.config.doc.removeEventListener("pointermove",t,{passive:false});i.config.doc.removeEventListener("pointerup",a)})},_attachEventsOnPgActivate:function(){}},true);i.mix(i.DD.Drag.prototype,{initializer:function(){this.get(a).dd=this;if(!this.get(a).get("id")){var e=i.stamp(this.get(a));this.get(a).set("id",e)}this.actXY=[];this._invalids=i.clone(this._invalidsDefault,true);this._createEvents();this.get(s)||this.set(s,this.get(a));this.get("dragDelegate")||this.once("initializedChange",i.bind(this._prep,this));this.set("groups",this.get("groups"))},_prep:function(){this._dragThreshMet=false;var e=this.get("node");var t=i.DD.DDM;e.addClass(t.CSS_PREFIX+"-draggable");this.get("dragDelegate")||e.on(i.DD.Drag.START_EVENT,i.bind(this._handleMouseDownEvent,this),{minDistance:this.get("clickPixelThresh"),minTime:this.get("clickTimeThresh")});e.on("pointerup",i.bind(this._handleMouseUp,this),{standAlone:true});e.on("dragstart",i.bind(this._fixDragStart,this))},_handleMouseUp:function(e){this.fire("drag:mouseup");this._fixIEMouseUp();this.get("dragging")&&e.preventDefault();i.DD.DDM.activeDrag&&setTimeout(function(){i.DD.DDM._end()},0)}},true);i.mix(i.DD.Drop.prototype,{initializer:function(){i.later(100,this,this._createEvents);var e=this.get(a);var t;if(!e.get("id")){t=i.stamp(e);e.set("id",t)}e.addClass(i.DD.DDM.CSS_PREFIX+"-drop");this.set("groups",this.get("groups"));i.DD.DDM.activeDrag&&false===i.DD.DDM.activeDrag.get("lock")&&i.DD.DDM._addActiveShim(this)},_createShim:function(){if(!this.get(a)||!this.get(a)._node)return;var e=i.DD.DDM;if(!e._pg){i.later(10,this,this._createShim);return}if(this.shim)return;var t=this.get("node");if(this.get("useShim")){t=i.Node.create('<div id="'+this.get(a).get("id")+'_shim"></div>');t.setStyles({height:this.get(a).get(n)+"px",width:this.get(a).get(r)+"px",backgroundColor:"yellow",opacity:".5",zIndex:"1",overflow:"hidden",top:"-900px",left:"-900px",position:"absolute"});e._pg.appendChild(t);e.on("ddm:start",i.bind(this._handleOverEvent,this));e.on("ddm:end",i.bind(this._handleOutEvent,this))}this.shim=t},_handleOverEvent:function(){this.shim&&this.shim.getDOMNode()&&this.shim.setStyle("zIndex","999");i.DD.DDM._addActiveShim(this)},_handleOutEvent:function(){this.shim&&this.shim.getDOMNode()&&this.shim.setStyle("zIndex","1");i.DD.DDM._removeActiveShim(this)},_handleOut:function(e){var t=i.DD.DDM;if((!t.isOverTarget(this)||e)&&this.overTarget){this.overTarget=false;if(t.activeDrag){this.get(a).removeClass(t.CSS_PREFIX+"-drop-over");t.activeDrag.get(a).removeClass(t.CSS_PREFIX+"-drag-over");this.fire("drop:exit",{drop:this,drag:t.activeDrag});t.activeDrag.fire("drag:exit",{drop:this,drag:t.activeDrag});delete t.otherDrops[this]}}}},true);i.DD.DDM.on("drag:start",function(){var e=i.config.doc.activeElement;e&&e.blur()})},"1.0",{requires:["dd","@sqs/yui-dd-wrappers/dd-behaviors"]})},"./src/main/webapp/universal/scripts-layout-engine/dd-wrappers/src/copies/event-registrar.js":function(e,t){YUI.add("@sqs/yui-dd-wrappers/mixins-event-registrar",function(a){a.namespace("SQS.DDWrappers.Mixins");a.SQS.DDWrappers.Mixins.EventRegistrar=a.Base.create("eventRegistrar",a.Base,[],{destructor:function(){a.Array.invoke(this.get("eventListeners"),"detach")},_registerEvent:function(){if(a.Lang.isArray(arguments[0]))this._registerEvent.apply(this,arguments[0]);else for(var e=0,t=arguments.length;e<t;e++)a.Lang.isValue(arguments[e])&&this.get("eventListeners").push(arguments[e])}},{ATTRS:{eventListeners:{value:[]}}})},"1.0",{requires:["array-invoke","base"]})},"./src/main/webapp/universal/scripts-layout-engine/dd-wrappers/src/copies/position-animator.js":function(e,t){YUI.add("@sqs/yui-dd-wrappers/copies-position-animator",function(c){c.namespace("SQS.DDWrappers.Copies.PositionAnimator");c.SQS.DDWrappers.Copies.PositionAnimator=c.Base.create("PositionAnimator",c.Plugin.Base,[],{hold:function(){this.set("originalTop",this.get("host").get("offsetTop"));this.set("originalLeft",this.get("host").get("offsetLeft"));this.previousPosition=this.get("host").getStyle("position")},release:function(e){var t=this.get("host").get("offsetTop");var a=this.get("host").get("offsetLeft");var i=this.get("baseSpeed")+(e?0:.2*Math.random());var s=e?0:200*Math.random();var n=this.get("originalTop")-t;var r=this.get("originalLeft")-a;this.get("host").setStyles({position:"relative",top:n,left:r,transition:"none"});var o=this;var l=this.get("host").anim({top:0,left:0},{from:{top:n,left:r},duration:i,end:function(){if(!this.get("node")._node)return;this.get("node").setStyles({position:this.previousPosition,top:null,left:null,transition:null});o.get("releasedFn")&&o.get("releasedFn")();o.fire("released")}});c.later(s,l,l.run)},destructor:function(){}},{NS:"positionAnimator",ATTRS:{originalTop:{},originalLeft:{},releasedFn:{value:false},baseSpeed:{value:.2}}})},"1.0",{requires:["base","node","plugin"]})},"./src/main/webapp/universal/scripts-layout-engine/dd-wrappers/src/dd-behaviors.js":function(e,t){YUI.add("@sqs/yui-dd-wrappers/dd-behaviors",function(n){var r="node";var i="nodes";var o="offsetHeight";var l="offsetWidth";var c="dragNode";var u="dragging";var a="drag:afterMouseDown";var s="container";var d=300;n.mix(n.DD.DDM,{bindTouchEvents:function(){var a=false;var i;function e(t){return function(e){clearTimeout(i);if(Array.from(e.targetTouches)>1)return;if("touchstart"===e.type){i=setTimeout(function(){s(t,e);a=true},d);return}if("touchend"===e.type){s(t,e);a=false;return}if(!a){a=false;return}e.preventDefault();s(t,e)}}function s(e,t){var a=t.touches[0];var i=a?a.target:t.target;var s=n.config.doc.createEvent("Event");s.initEvent(e,true,true);Object.keys(t).forEach(function(e){s[e]=t[e]});a&&Object.keys(a.__proto__).forEach(function(e){s[e]=a[e]});i.dispatchEvent(s)}n.config.doc.addEventListener("touchstart",e("mousedown"),true);n.config.doc.addEventListener("touchmove",e("mousemove"),{passive:false});n.config.doc.addEventListener("touchend",e("mouseup"),true)},_setupListeners:function(){this._createPG();this._active=true;n.one(n.config.doc).on("gesturemove",n.throttle(n.bind(this._move,this),this.get("throttleTime")),{standAlone:true});n.UA.mobile&&this.bindTouchEvents()},_pg_size:function(){if(this.activeDrag){var e=n.one(document.documentElement);var t=Math.max(e.get("scrollHeight"),e.get("docHeight"));var a=Math.max(e.get("scrollWidth"),e.get("docWidth"));this._pg.setStyles({position:"fixed",height:t+"px",width:a+"px"})}},_move:function(e){if(this.activeDrag&&false===this.activeDrag.get("lock")&&this.activeDrag.get("dragNode")&&this.activeDrag.get("dragNode").getDOMNode()){this.activeDrag._move.call(this.activeDrag,e);this._dropMove()}},_createPG:function(){var e=n.Node.create("<div></div>"),t=n.one("body"),a;e.setStyles({top:"0",left:"0",position:"absolute",zIndex:"9999",overflow:"hidden",backgroundColor:"red",display:"none",height:"5px",width:"5px"});e.set("id",n.stamp(e));e.addClass(n.DD.DDM.CSS_PREFIX+"-shim");t.prepend(e);this._pg=e;a=n.one("win");n.on("window:resize",n.bind(this._pg_size,this));a.on("scroll",n.bind(this._pg_size,this))},_pg_activate:function(){this._pg||this._createPG();var e=this.activeDrag.get("activeHandle"),t="auto";e&&(t=e.getStyle("cursor"));"auto"===t&&(t=this.get("dragCursor"));this._pg_size();this._pg.setStyles({top:0,left:0,display:"block",opacity:this._debugShim?".5":"0",cursor:t});this._attachEventsOnPgActivate()},_pg_deactivate:function(){this._pg.setStyle("display","none");this._pg.detachAll();if(this._mouseEventsOutsideWindow){n.Array.invoke(this._mouseEventsOutsideWindow,"detachAll");this._mouseEventsOutsideWindow=[]}},_attachEventsOnPgActivate:function(){this._pg.on("mousemove",n.throttle(n.bind(this._move,this),this.get("throttleTime")));this._pg.on("mouseup",n.bind(this._end,this));this._mouseEventsOutsideWindow=[];this._pg.on("mouseleave",function(){var t=[0,0];var e=n.config.win;var a;var i;while(e.frameElement){a=e.frameElement.getClientRects()[0];t[0]+=a.left;t[1]+=a.top;e=e.parent;i=true}this._mouseEventsOutsideWindow.push(n.one(e).on("mousemove",n.throttle(n.bind(function(e){if(i){e.clientX-=t[0];e.clientY-=t[1];e.pageX=n.config.doc.body.scrollLeft+e.clientX;e.pageY=n.config.doc.body.scrollTop+e.clientY}this._move(e)},this),this.get("throttleTime"))),n.one(e).on("mouseup",n.bind(this._end,this)));this._pg.once("mouseenter",function(){if(this._mouseEventsOutsideWindow){n.Array.invoke(this._mouseEventsOutsideWindow,"detachAll");this._mouseEventsOutsideWindow=[]}},this)},this)}},true);var e=n.clone(n.DD.Drop.prototype._createShim);n.DD.Drop.prototype._createShim=function(){if(null===this.get(r)._node)return;if(!n.Env)return;e.call(this)};n.mix(n.DD.Drag.ATTRS,{dragDelegate:{value:null}},true);var t=n.clone(n.DD.Drag.prototype._unprep);n.mix(n.DD.Drag.prototype,{_prep:function(){this._dragThreshMet=false;var e=this.get(r);e.addClass(n.DD.DDM.CSS_PREFIX+"-draggable");this.get("dragDelegate")||e.on(n.DD.Drag.START_EVENT,n.bind(this._handleMouseDownEvent,this));e.on("mouseup",n.bind(this._handleMouseUp,this));e.on("dragstart",n.bind(this._fixDragStart,this))},_unprep:function(){if(null===this.get(r)._node)return;t.call(this)},start:function(){var e=n.DD.DDM;if(!this.get("lock")&&!this.get(u)){var t=this.get(r),a,i,s;this._startTime=(new Date).getTime();e._start();t.addClass(e.CSS_PREFIX+"-dragging");this.fire("drag:start",{pageX:this.nodeXY[0],pageY:this.nodeXY[1],startTime:this._startTime});t=this.get(c);if(this.proxy){this.get(r).removeClass(e.CSS_PREFIX+"-dragging");t.addClass(e.CSS_PREFIX+"-dragging")}s=this.nodeXY;a=t.get(l);i=t.get(o);this.get("startCentered")&&this._setStartPosition([s[0]+a/2,s[1]+i/2]);this.region={0:s[0],1:s[1],area:0,top:s[1],right:s[0]+a,bottom:s[1]+i,left:s[0]};this.set(u,true)}return this},_defMouseDownFn:function(e){var t=e.ev;this._dragThreshMet=false;this._ev_md=t;if(this.get("primaryButtonOnly")&&t.button>1)return false;if(this.validClick(t)){this._fixIEMouseDown(t);0!==n.DD.Drag.START_EVENT.indexOf("gesture")&&(this.get("haltDown")?t.halt():t.preventDefault());this._setStartPosition([t.pageX,t.pageY]);n.DD.DDM.activeDrag=this;!this.get("clickTimeThresh")&&this.get("clickPixelThresh")||(this._clickTimeout=n.later(this.get("clickTimeThresh"),this,this._timeoutCheck))}this.fire(a,{ev:t})}},true);n.mix(n.DD.Delegate.prototype,{initializer:function(){var e=this.get("container");e instanceof n.Node||!n.Lang.isFunction(e.getDOMNode)||this.set("container",n.Node(e.getDOMNode()));this._handles=[];var t=this.get(s);var a=n.merge({clickTimeThresh:this.get("clickTimeThresh"),clickPixelThresh:this.get("clickPixelThresh"),dragDelegate:this,bubbleTargets:this},this.get("dragConfig"));a.node=this.get("dragNode").cloneNode(true);this.get("handles")&&(a.handles=this.get("handles"));this.dd=new n.DD.Drag(a);this.dd.after("drag:end",n.bind(this._afterDragEnd,this));this.dd.on("dragNodeChange",n.bind(this._onNodeChange,this));this.dd.after("drag:mouseup",function(){this._unprep()});this._handles.push(n.delegate(n.DD.Drag.START_EVENT,n.bind(this._delMouseDown,this),t,this.get(i)));this._handles.push(n.on("mouseenter",n.bind(this._onMouseEnter,this),t));this._handles.push(n.on("mouseleave",n.bind(this._onMouseLeave,this),t));n.later(50,this,this.syncTargets);n.DD.DDM.regDelegate(this)}},true)},"1.0",{requires:["array-invoke","dd","dd-scroll","oop","plugin","@sqs/yui-dd-wrappers/copies-position-animator","@sqs/yui-dd-wrappers/dd-superproxy"]})},"./src/main/webapp/universal/scripts-layout-engine/dd-wrappers/src/dd-superproxy.js":function(e,t){YUI.add("@sqs/yui-dd-wrappers/dd-superproxy",function(p){var h="dd-flying-back";p.namespace("SQS.DDWrappers.Plugin").DDSuperProxy=p.Base.create("DDSuperProxy",p.Plugin.DDProxy,[],{_init:function(){var e=p.DD.DDM;if(!e._proxy){e._createFrame();p.on("domready",p.bind(this._init,this));return}this._hands||(this._hands=[]);var t,a,i=this.get("host"),s=i.get("dragNode");s.compareTo(i.get("node"))&&e._proxy&&i.set("dragNode",e._proxy);p.each(this._hands,function(e){e.detach()});t=e.on("ddm:start",p.bind(function(){e.activeDrag===i&&i.get("node").inDoc()&&e._setFrame(i)},this));a=i.on("drag:end",p.bind(function(){if(this.get("flyBack"))this._flyBackAndCleanupProxy();else{this.get("moveOnEnd")&&i.get("node").setXY(i.lastXY);this._cleanupProxy()}},this));this._hands=[t,a]},clone:function(){var e=this.get("host");var t=e.get("node");var a=t.cloneNode(true);delete a._yuid;a.setAttribute("id",p.guid());a.setStyle("position","absolute");a.all('input[type="radio"]').removeAttribute("name");this.get("cloneClass")&&a.addClass(this.get("cloneClass"));this.get("containerNode").appendChild(a);e.set("dragNode",a);if(this.get("hideOriginalNode")){this._originalHostVisiblity=t.getStyle("visibility");t.setStyles({visibility:"hidden"})}return a},_cleanupProxy:function(){var e=this.get("host");var t=e.get("node");var a=e.get("dragNode");this.get("hideOnEnd")?a.setStyle("display","none"):this.get("hideOriginalNode")&&t.setStyles({visibility:this._originalHostVisiblity||null});if(this.get("cloneNode")){a.remove();e.set("dragNode",p.DD.DDM._proxy)}},_flyBackAndCleanupProxy:function(){var e=this.get("host");var t=e.get("node");var a=e.get("dragNode");var i=t.getDOMNode().getBoundingClientRect();var s=a.getDOMNode().getBoundingClientRect();var n=s.top-i.top;var r=s.left-i.left;this._cleanupProxy();var o=[];t.addClass(h);t.setStyles({transition:"none",zIndex:Math.pow(10,6)});t.setStyles({transform:"translate("+r+"px, "+n+"px)"});var l=this.get("flyBackDuration");var c="transform";p.UA.webkit&&(c="-webkit-transform");o.push({requireTicks:1,transition:c+" "+l+"s cubic-bezier(0.445, 0.05, 0.55, 0.95)"});o.push({requireTicks:1,transform:"translate(0px, 0px)"});function u(){t.setStyles({zIndex:null,transition:null});t.removeClass(h)}function d(){if(0===o.length)return;if(p.Lang.isNumber(o[0].requireTicks)&&o[0].numTicks!==o[0].requireTicks){p.Lang.isNumber(o[0].numTicks)?o[0].numTicks++:o[0].numTicks=0;p.config.win.requestAnimationFrame(d);return}var e=o.shift();p.UA.webkit&&e.transform&&(e.webkitTransform=e.transform);t.setStyles(e);p.config.win.requestAnimationFrame(d);0===o.length&&p.later(44,this,function(){u()})}p.config.win.requestAnimationFrame(d)}},{NS:"proxy",ATTRS:{cloneNode:{value:true},hideOriginalNode:{value:true},cloneClass:{value:null},movingClass:{value:null},flyBack:{value:true},flyBackDuration:{value:.3},moveOnEnd:{value:true},hideOnEnd:{value:false},containerNode:{getter:function(e){return e||this.get("host").get("node").get("parentNode")}}}})},"1.0",{requires:["anim","dd-proxy"]})},"./src/main/webapp/universal/scripts-layout-engine/dd-wrappers/src/drag-drop/delegate.js":function(e,t){YUI.add("@sqs/yui-dd-wrappers/dd-delegate",function(o){o.namespace("SQS.DDWrappers.DD");var a=9;var t=o.Node.create("<div>Temp Node</div>");var e=false;e&&(o.DD.DDM._debugShim=true);var i=o.SQS.DDWrappers.DD.Delegate=o.Base.create("ddDelegate",o.DD.Delegate,[o.SQS.DDWrappers.Mixins.EventRegistrar],{initializer:function(e){this._syncDragReorderPlugin();this.after(["enableDragReorderChange","dragReorderConfigChange"],this._syncDragReorderPlugin);this._syncDragScrollPlugin();this.after(["enableDragScrollChange","dragScrollConfigChange","scrollNodeChange"],this._syncDragScrollPlugin);this._syncDragConstrainedPlugin();this.after(["enableDragConstrainedChange","dragConstrainedConfigChange"],this._syncDragConstrainedPlugin);this.on("scroll:end",function(){var e=o.Plugin.DDConstrained;this.dd[e.NS]&&this.dd[e.NS].resetCache()});this.on("reorder:sync",function(){o.later(300,this,this.syncTargets)})},destructor:function(){if(this._scrollListener){this._scrollListener.detach();this._scrollListener=null}this._cancelDragUnlockDelay();this.dd.unplug();this.unplug()},_syncDragReorderPlugin:function(){var e=o.SQS.DDWrappers.DD.Reorder;this._syncPlugin(e,this.get("dragReorderConfig"),this.get("enableDragReorder"))},_syncDragScrollPlugin:function(){var e=o.SQS.DDWrappers.DD.Scroll;this._syncPlugin(e,this.get("dragScrollConfig"),this.get("enableDragScroll"))},_syncDragConstrainedPlugin:function(){var e=o.Plugin.DDConstrained;this._syncPlugin(e,this.get("dragConstrainedConfig"),this.get("enableDragConstrained"))},_syncPlugin:function(e,t,a){var i=this.dd.hasPlugin(e.NS);a?i?this.dd[e.NS].setAttrs(t):this.dd.plug(e,o.merge(t,{bubbleTargets:this})):i&&this.dd.unplug(e.NS)},_onDragMouseDownMobile:function(){this._cancelDragUnlockDelay();this._preventDragStartOnScrollMobile();this.dd.set("lock",true);this._dragUnlockDelay=o.later(this.dd.get("clickTimeThresh"),this,function(){this.dd.set("lock",false)})},_cancelDragUnlockDelay:function(){if(this._dragUnlockDelay){this._dragUnlockDelay.cancel();this._dragUnlockDelay=null}},_preventDragStartOnScrollMobile:function(){var e=this.get("scrollEmitterNode");this._scrollListener&&this._scrollListener.detach();this._scrollListener=e.on(["scroll","overScroll"],function(){this._scrollListener.detach();this._cancelDragUnlockDelay()},this)},_afterDragEnd:function(){o.DD.DDM._noShim=this._shimState;var e=this.dd.get("node");this.set("lastNode",e);e&&o.Lang.isValue(e._node)&&e.removeClass(o.DD.DDM.CSS_PREFIX+"-dragging");this.dd._unprep();this.dd.set("node",t)},syncTargets:function(){i.superclass.syncTargets.apply(this,arguments);if(this.dd.get("dragging")){var e=o.Plugin.DDConstrained;this.dd[e.NS]&&this.dd[e.NS].resetCache();var t=o.SQS.DDWrappers.DD.Scroll;this.dd[t.NS]&&this.dd[t.NS].resetCache()}},createDrop:function(e,t){var a=this.dd.get("dragging");if(a){if(e===this.dd.get("dragNode")||e===this.dd.get("node"))return;i.superclass.createDrop.apply(this,arguments);e.drop._activateShim()}else i.superclass.createDrop.apply(this,arguments)},_delMouseDown:function(e){var t=e.currentTarget;var a=this.dd;var i=t;var s=this.get("dragConfig");var n=this.get("nodes");var r=this.get("invalidHandles");if(t.test(n)&&!t.test(this.get("invalid"))&&(!r||!e.target.ancestor(r,true,n))){this._shimState=o.DD.DDM._noShim;o.DD.DDM._noShim=true;this.set("currentNode",t);a.set("node",t);s&&s.dragNode?i=s.dragNode:a.proxy&&(i=o.DD.DDM._proxy);a.set("dragNode",i);a._prep();a.fire("drag:mouseDown",{ev:e})}}},{ATTRS:{invalidHandles:{value:""},enableDragReorder:{value:false},dragReorderConfig:{value:{},setter:function(e){return o.merge({nodesSelector:this.get("nodes"),container:this.get("container")},e)}},enableDragConstrained:{value:false},dragConstrainedConfig:{value:{},setter:function(e){return o.merge({constrain:this.get("container")},e)}},enableDragScroll:{valueFn:function(){return this.get("enableDragReorder")}},dragScrollConfig:{value:{},getter:function(e){var t=o.merge(e,{scrollNode:this.get("scrollNode"),scrollEmitterNode:this.get("scrollEmitterNode"),contentNode:this.get("container").one(this.get("nodes"))||this.get("container")});if(this.get("enableDragConstrained")){var a=this.get("dragConstrainedConfig.constrain");a instanceof o.Node&&t.scrollNode.contains(a)&&(t.constraintNode=a)}return t}},scrollNode:{valueFn:function(){return o.one(this.get("container")).ancestor(function(e){var t=e.getComputedStyle("overflowY");return"auto"===t||"scroll"===t},true)||o.one(o.config.doc.body)}},scrollEmitterNode:{valueFn:function(){var e=this.get("scrollNode");if(e.test("html, body")){var t=e.getDOMNode();while(t.nodeType!==a)t=t.parentNode;return o.one(t)}return e}},target:{value:true}}})},"1.0",{requires:["base","dd","dd-constrain","@sqs/yui-dd-wrappers/dd-behaviors","@sqs/yui-dd-wrappers/dd-reorder","@sqs/yui-dd-wrappers/dd-scroll","@sqs/yui-dd-wrappers/mixins-event-registrar"]})},"./src/main/webapp/universal/scripts-layout-engine/dd-wrappers/src/drag-drop/reorder.js":function(e,t){var l={globalGrid:22};function a(s,n,r){var o;return function(){var e=this,t=arguments;var a=function(){o=null;r||s.apply(e,t)};var i=r&&!o;clearTimeout(o);o=setTimeout(a,n);i&&s.apply(e,t)}}YUI.add("@sqs/yui-dd-wrappers/dd-reorder",function(u){var n="dd-drag-grouped-item";var r=2;u.namespace("SQS.DDWrappers.DD");var o=u.SQS.DDWrappers.DD.Reorder=u.Base.create("reorder",u.Plugin.Base,[u.SQS.DDWrappers.Mixins.EventRegistrar],{initializer:function(){this.publish("reorder");this.publish("reordered");this.publish("sync",{emitFacade:true,defaultFn:this._syncDropShims});this.onHostEvent("drag:start",this._onDragStart);this.onHostEvent("drag:enter",this._onDragEnter);this.onHostEvent("drag:align",this._onDragAlign);this.onHostEvent("drag:end",this._onDragEnd);this._plugProxyToHost()},_plugProxyToHost:function(){var e=this.get("host");var t=u.SQS.DDWrappers.Plugin.DDSuperProxy;var a=this.getAttrs(["movingClass","cloneClass"]);e.hasPlugin(t.NS)?e[t.NS].setAttrs(a):e.plug(t,a)},_onDragStart:function(){var t=this._getAllReorderableNodes();var e=this._filterReorderingNodesFrom(t);var a=e.length>1;var i=this.get("host").get("node");var s=this.get("host").get("dragNode");e.forEach(function(e){e.setData("startIndex",t.indexOf(e));a&&e!==i&&e.addClass(n)});if(a){e.length>1&&s.append(u.Lang.sub(o.TEMPLATE_ITEMS_COUNT,{count:e.length}));this.fire("sync")}this.set("reorderingNodes",e)},_filterReorderingNodesFrom:function(e){var t=this.get("selectedClassSelector");var a=this.get("host").get("node");var i=[a];if(this.get("enableGrouping")&&a.test(t)){var s=e.filter(function(e){e=u.one(e);return e!==a&&e.test(t)});i=i.concat(u.Array.map(s.getDOMNodes(),u.Node))}return i},_onDragEnter:function(e){if(e.drop.get("node").hasClass(n))return;var t=this._reorderNodes(e.drop.get("node"),e.drag.get("node"));this._fireReorderEvent(t)},_fireReorderEvent:function(a){var e=this.get("host");var i=e.get("node").getData("startIndex");var s=a;this.get("enableGrouping")&&u.Array.some(this.get("reorderingNodes").slice(1),function(e){var t=e.getData("startIndex");if(t<a||t===a&&t>i){s--;return false}return true});this.fire("reorder",{reorder:{node:e.get("node"),proxyNode:e.get("dragNode"),newIndex:a,visibleIndex:s}})},_onDragAlign:function(e){if(!this.get("enableGrouping"))return;var t=this.get("host").get("dragNode");var a={};a.top=parseInt(t.getComputedStyle("top"),10);a.left=parseInt(t.getComputedStyle("left"),10);var i=this.get("reorderingNodes");var s=i.length;var n=Math.pow(10,5);i.slice(1).forEach(function(e,t){if(t+1>r){e.setStyles({visibility:"hidden"});return}e.setStyles({top:a.top+(t+1)*l.globalGrid,left:a.left+(t+1)*l.globalGrid,zIndex:n+(s-t)})});t.setStyles({zIndex:n+s})},_onDragEnd:function(e){var t=this.get("reorderingNodes");t.length>1&&this._insertGroupNodesInOrder(t);var i=this._getAllReorderableNodes();var s=false;var a=u.Array.map(t,function(e){var t=e.getData("startIndex");var a=i.indexOf(e);e.clearData("startIndex");s||t===a||(s=true);return{node:e,newIndex:a,oldIndex:t}}).sort(function(e,t){return t.newIndex<e.newIndex});s&&this.fire("reordered",{reordered:this.get("enableGrouping")?a:a[0],allSiblings:i});this.set("reorderingNodes",[]);i.unplug(u.SQS.DDWrappers.Copies.PositionAnimator.NS)},_getAllReorderableNodes:function(){var e=this.get("nodesSelector");var t=this.get("cloneClass");t&&(e+=":not(."+t+")");this.get("enableGrouping")&&(e+=":not(."+n+")");return this.get("container").all(e)},_insertGroupNodesInOrder:function(e){u.Array.invoke(e,"removeClass",n);this._reorderNodes(e[0],e.slice(1));e.slice(1).forEach(function(e){e.setStyles({top:null,left:null,zIndex:null,visibility:null})})},_getNodesInBetween:function(e,t){var a=Math.min.apply(Math,e);var i=Math.max.apply(Math,e);var s=this.get("host").get("node").getDOMNode();return t.slice(a,i+1).filter(function(e){return e!==s})},_reorderNodes:function(t,e){var a=this._getAllReorderableNodes();var i=u.Lang.isArray(e);var s=i?e[0]:e;var n=a.indexOf(t);var r=a.indexOf(s);var o=[n,r];i&&o.push(a.indexOf(e[e.length-1]));var l=this._getNodesInBetween(o,a);this._rememberCurrentPosition(l);if(i){var c=t.getData("startIndex");e.forEach(function(e){if(e.getData("startIndex")<c)t.insert(e,"before");else{t.insert(e,"after");t=e}})}else t.insert(s,r<n?"after":"before");this._animateToMovedPosition(l);return n},_rememberCurrentPosition:function(e){e.each(function(e){e.positionAnimator||e.plug(u.SQS.DDWrappers.Copies.PositionAnimator,{releasedFn:this._syncDropShims});e.positionAnimator.hold()},this)},_animateToMovedPosition:function(e){e.each(function(e){e.positionAnimator.release(true)},this)},_syncDropShims:a(function(){u.DD.DDM.syncActiveShims(true)},30)},{TEMPLATE_ITEMS_COUNT:'<div class="dd-reorder-items-count">{count}</div>',NS:"dd-reorder",ATTRS:{container:{valueFn:function(){return this.get("host").get("container")},getter:function(e){if("string"===typeof e)return u.one(e);return e},validator:function(e){return"string"===typeof e||e instanceof u.Node}},nodesSelector:{value:""},selectedClassSelector:{value:".selected"},enableGrouping:{value:false},movingClass:{value:"yui3-dd-super-proxy-moving"},cloneClass:{value:"yui3-dd-super-proxy-clone"},reorderingNodes:{value:[]}}})},"1.0",{requires:["array-invoke","base","plugin","@sqs/yui-dd-wrappers/copies-position-animator","@sqs/yui-dd-wrappers/dd-superproxy","@sqs/yui-dd-wrappers/mixins-event-registrar"]})},"./src/main/webapp/universal/scripts-layout-engine/dd-wrappers/src/drag-drop/scroll.js":function(e,t){YUI.add("@sqs/yui-dd-wrappers/dd-scroll",function(r){r.namespace("SQS.DDWrappers.DD");var n={NONE:0,UP:-1,DOWN:1};var a={};r.Object.each(n,function(e,t){a[e]=t.toLowerCase()});var o=r.SQS.DDWrappers.DD.Scroll=r.Base.create("scroll",r.Plugin.Base,[r.SQS.DDWrappers.Mixins.EventRegistrar],{initializer:function(){this.publish("start");this.publish("end");this._registerEvent(this.get("host").before("drag:start",this._prepareScrollOnDragStart,this));this.onHostEvent("drag:drag",this._forceContentNodeDimension);this.onHostEvent("drag:end",this._cleanScrollPrep);this.onHostEvent("drag:enter",this._onDragEnterDropZone);this.onHostEvent("drag:exit",this._onDragExitDropZone);this.after("lockedChange",this._syncDirectionAndRelativeMouseY);this.after("directionChange",this._afterDirectionChange);this.after("scrollingChange",this._afterScrollingChange);this.set("isScrollNodeBody");this.after("scrollNodeChange",this.set.bind(this,"isScrollNodeBody"))},destructor:function(){this._cleanScrollPrep();this._stopScroll()},_afterScrollingChange:function(e){e.newVal?this.fire("start",{direction:a[this.get("direction")]}):this.fire("end",{isScrollLocked:this.get("locked")})},_prepareScrollOnDragStart:function(){var e=this.get("scrollNode");var t=this.get("contentNode");var a=this.get("isScrollNodeBody");var i=e.get("scrollHeight");var s=a?r.config.win.innerHeight:e.get("clientHeight");this._dragListener&&this._dragListener.detach();if(i>s){var n=e.get("region");a&&(n=r.merge(n,{bottom:n.top+s,height:s}));this._dragListener=this.onHostEvent("drag:drag",this._syncDirectionAndRelativeMouseY);this.setAttrs({scrollNodeRegion:n,scrollTopLimit:this._getScrollTopLimit(i,s),locked:Boolean(r.DD.DDM.activeDrop&&r.DD.DDM.activeDrop.get("lockScroll")),lockableTargets:r.Array.filter(r.DD.DDM.targets,function(e){return e.get("lockScroll")})})}this.setAttrs({contentNodeHeight:t.getComputedStyle("height"),contentNodeWidth:t.getComputedStyle("width")});e.setStyle("overflowX","hidden")},resetCache:function(){var e=this.get("scrollNode");var t=this.get("contentNode");var a=e.get("scrollHeight");var i=this.get("isScrollNodeBody")?r.config.win.innerHeight:e.get("clientHeight");this.setAttrs({scrollTopLimit:this._getScrollTopLimit(a,i),contentNodeHeight:t.getComputedStyle("height")})},_getScrollTopLimit:function(e,t){var a=0;var i=e-t;var s=this._getConstraintNodeOffset();if(s){a=o.clampValue(s.top,a,i);i=o.clampValue(s.bottom-t,a,i)}return{min:a,max:i}},_getConstraintNodeOffset:function(e){var t=this.get("constraintNode");if(!t)return null;var a=t.get("region");var i=this.get("contentNode").get("region");e="number"===typeof e?e:30;return{top:a.top-e-i.top,bottom:a.bottom+e-i.top}},_cleanScrollPrep:function(){if(this._dragListener){this._dragListener.detach();this._dragListener=null}if(this._delayTimer){this._delayTimer.cancel();this._delayTimer=null}this.set("direction",n.NONE);this.get("scrollNode").setStyle("overflowX",null);var e=this.get("contentNode");e&&e.getDOMNode()&&e.setStyles({height:null,width:null})},_afterDirectionChange:function(e){if(this._delayTimer){this._delayTimer.cancel();this._delayTimer=null}if(e.newVal===n.NONE){this._stopScroll();return}this._delayTimer=r.later(this.get("initialDelay"),this,this._startScroll)},_syncDirectionAndRelativeMouseY:function(){if(this.get("locked")){this.set("direction",n.NONE);return}this.set("relativeMouseY",this._getRelativeMouseY());this.set("direction",this._getNewScrollDirection())},_getRelativeMouseY:function(){var e=this.get("scrollNodeRegion");var t=this.get("host").mouseXY[1];this.get("isScrollNodeBody")&&(t+=e.top-this._getCurrentScrollTop());return{top:t-e.top,bottom:e.bottom-t}},_getNewScrollDirection:function(){var e=this.get("relativeMouseY");var t=this.get("pixelThreshold");var a=this.get("scrollTopLimit");var i=n.NONE;var s=this._getCurrentScrollTop();e.top<=t?s>a.min&&(i=n.UP):e.bottom<=t&&s<a.max&&(i=n.DOWN);return i},_startScroll:function(){if(r.Lang.isValue(this._scrollAnim))return;this._bindScrollEvents();this._scrollAnim=new r.Anim({node:this.get("scrollNode"),duration:.24,easing:"easeNone",to:{scroll:[0,this._getNextScrollTop()]}});this._scrollAnim.on("end",this._onScrollAnimEnd,this);this._scrollAnim.on("tween",this._getSyncActiveDragPosFn(),this);this.set("scrolling",true);this._scrollAnim.run()},_bindScrollEvents:function(){var e=this.get("scrollEmitterNode");var t=o.NS;e.detach(t+"|*");e.on(t+"|scroll",r.throttle(r.bind(function(){this._scrollAnim&&this._repositionLockableDropTargets()},this),20),this)},_getWeightedScrollSpeed:function(){var e=this.get("direction");var t=this.get("pixelThreshold");var a=this.get("relativeMouseY")[e===n.UP?"top":"bottom"];return Math.min(this.get("defaultSpeed")*(t-a)/t,this.get("maxSpeed"))},_getNextScrollTop:function(){var e=this.get("scrollTopLimit");var t=this.get("direction")*this._getWeightedScrollSpeed();return o.clampValue(this._getCurrentScrollTop()+t,e.min,e.max)},_getCurrentScrollTop:function(){return this.get("scrollNode").get("scrollTop")},_onScrollAnimEnd:function(){var e=this._getNextScrollTop();var t=this._getCurrentScrollTop();if(e!==t){this._scrollAnim.set("to.scroll",[0,e]);this._scrollAnim.run()}else{this.set("direction",n.NONE);this.set("scrolling",false)}},_getSyncActiveDragPosFn:function(){var a=this.get("host");var i=this._getCurrentScrollTop();if(!this.get("isScrollNodeBody"))return function(){a._alignNode(a.mouseXY)};return function(){var e=this._getCurrentScrollTop();var t=e-i;a.mouseXY=[a.mouseXY[0],a.mouseXY[1]+t];a._alignNode(a.mouseXY);i=e}},_stopScroll:function(){this.get("scrollEmitterNode").detach(o.NS+"|*");var e=this._scrollAnim;if(e){if(e.get("running")){e.detach("end");e.stop()}this._destroyScrollAnim()}this.set("scrolling",false);r.DD.DDM.syncActiveShims()},_destroyScrollAnim:function(){this._scrollAnim.destroy(true);this._scrollAnim=null},_onDragEnterDropZone:function(e){e.drop.get("lockScroll")&&this.set("locked",true)},_onDragExitDropZone:function(e){e.drop.get("lockScroll")&&this.set("locked",false)},_repositionLockableDropTargets:function(){r.Array.each(this.get("lockableTargets"),function(e){e.sizeShim()})},_forceContentNodeDimension:function(){this.get("contentNode").setStyles({width:this.get("contentNodeWidth"),height:this.get("contentNodeHeight")})}},{clampValue:function(e,t,a){return Math.max(t,Math.min(e,a))},NS:"ddScroll",ATTRS:{scrollNode:{value:null},isScrollNodeBody:{setter:function(){return this.get("scrollNode").test("body, html")}},scrollEmitterNode:{value:null,writeOnce:true},contentNode:{value:null,setter:function(e){var t=this.get("scrollNode");if(this.get("isScrollNodeBody"))return t;var a=e&&e.ancestor(function(e){return e&&e.ancestor()===t},true);a=a||(t.get("children").item(0)||t);return a}},constraintNode:{value:null},scrollNodeRegion:{value:null},contentNodeHeight:{value:"0px"},contentNodeWidth:{value:"0px"},scrollTopLimit:{value:{min:0,max:0}},relativeMouseY:{value:{top:0,bottom:0}},locked:{value:false},scrolling:{value:false},direction:{value:n.NONE},lockableTargets:{value:[]},initialDelay:{value:150},maxSpeed:{value:r.UA.mobile?300:800},defaultSpeed:{value:r.UA.mobile?150:400},pixelThreshold:{value:80}}})},"1.0",{requires:["base","@sqs/yui-dd-wrappers/mixins-event-registrar"]})},"./src/main/webapp/universal/scripts-layout-engine/dd-wrappers/src/drag-selection-selector-blacklist.js":function(e,t){YUI.add("@sqs/yui-dd-wrappers/drag-selection-selector-blacklist",function(t){t.namespace("SQS.DDWrappers");t.SQS.DDWrappers.DragSelectionSelectorBlackList=t.Base.create("dragSelectionSelectorBlackList",t.Base,[],{_getInvalidRegions:function(e){return e.concat(this.get("selectorBlacklist"))}},{ATTRS:{invalidRegions:{value:[],getter:"_getInvalidRegions"},selectorBlacklist:{valueFn:function(){var e=[".dialog-screen-overlay",".mode-visual",".mode-source",".content-title .add-content",".config-panel-wrapper","input","object",".dropdown select",".sqs-disable-drag-selection",".CodeMirror",".sqs-surrounding-overlay",".dialog-editproduct",".dialog-producttype",".sqs-action-tray",".sqs-layout-insert-point",".sqs-action-overlay","button",".sqs-uploader",".standard-dialog-wrapper > .main-container > .title-block",".standard-dialog-wrapper > .main-container > .controls-block",".cke_button",".cke_dialog",".cke_dialog_background_cover",".flyout-link-edit-content",".rte",".rte-menu"];t.SQS.DDWrappers.STANDARD_CONTROL_CLASSES&&(e=e.concat(t.SQS.DDWrappers.STANDARD_CONTROL_CLASSES));e=t.Array.dedupe(e);e=t.Array.filter(e,function(e){return".standard-dialog-wrapper"!==e});return e}}}})},"1.0",{requires:["base"]})},"./src/main/webapp/universal/scripts-layout-engine/dd-wrappers/src/drag-selection.js":function(e,t){YUI.add("@sqs/yui-dd-wrappers/drag-selection",function(c){c.namespace("SQS.DDWrappers").DragSelection=c.Base.create("dragSelection",c.Base,[c.SQS.DDWrappers.DragSelectionSelectorBlackList],{initializer:function(e){var t=this.get("id");this._debug=false;this._selectionNode=c.Node.create("<div></div>");this._selectionNode.addClass("squarespace-selection").setAttribute("data-selection-id",t);this._dragClassName="drag-selection-dragging";this.addcss("<style>.squarespace-selection {   background: rgba(0,0,0,0.08);   border: solid 1px white;   position: absolute;   z-index: 99999999999; } body.drag-selecting, body.drag-selection-dragging {   -webkit-user-select: none;   -moz-user-select: none; body.drag-selecting *, body.drag-selection-dragging * {   cursor: default !important; }</style>");this.publish("selection-started",{preventable:true,defaultFn:this._initSelection,context:this,broadcast:2});this._bindUI()},addcss:function(e){var t=c.config.doc.getElementsByTagName("head")[0];var a=c.config.doc.createElement("style");a.setAttribute("type","text/css");a.styleSheet?a.styleSheet.cssText=e:a.appendChild(c.config.doc.createTextNode(e));t.appendChild(a)},destructor:function(){c.Array.invoke(this.get("eventListeners"),"detach");this._selectionNode.remove(true);this._selectionNode=null;c.detachAll(this.get("id")+"|*");if(this._activationSub){this._activationSub.detach();this._activationSub=null}},_bindUI:function(){this._activationSub&&this._activationSub.detach();this._activationSub=this.get("node").on("mousedown",this._onMouseDown,this)},_onMouseDown:function(t){if(this.get("enabled")&&!t.target.hasClass("sqs-layout-insert-point")){if(this.get("dragging")||1!==t.button)return;this._origin={x:t.pageX,y:t.pageY};if(!this._pointInActivationRegion(this._origin.x,this._origin.y))return;if(!this._mouseDownInValidRegion(t))return;this._registerEvent(c.one(c.config.win).once("mouseup",this._endSelection,this));this._mouseMoveGuard=this.get("node").once("mousemove",function(e){this.fire("selection-started",{originalMousedown:t});this._debug&&console.info("selection-started")},this);this._registerEvent(this._mouseMoveGuard)}},_registerEvent:function(){if(c.Lang.isArray(arguments[0]))this._registerEvent.apply(this,arguments[0]);else for(var e=0,t=arguments.length;e<t;e++)c.Lang.isValue(arguments[e])&&this.get("eventListeners").push(arguments[e])},_initSelection:function(e){var t=e.originalMousedown;this._drawSelection(t.pageX,t.pageY);c.one("body").addClass(this._dragClassName).appendChild(this._selectionNode);this._mouseMoveSubscription=c.one(c.config.win).on("mousemove",this._dragSelection,this);this.clearTextSelection()},clearTextSelection:function(){c.config.win.getSelection?c.config.win.getSelection().empty?c.config.win.getSelection().empty():c.config.win.getSelection().removeAllRanges&&c.config.win.getSelection().removeAllRanges():c.config.doc.selection&&c.config.doc.selection.empty()},_dragSelection:function(e){if(!this.get("enabled"))return;if(!this._origin)return;e.halt();this._drawSelection(e.pageX,e.pageY);this.fire("selection-dragged",{region:this._selectionNode.get("region"),originalMousemove:e});this._debug&&console.info("selection-dragged")},_drawSelection:function(e,t){this._debug&&console.info("Updated selection drawing.");var a=this.get("boundingRegion");var i=this._origin;var s={x:e,y:t};var n=s.x>i.x?i.x:s.x;var r=s.x>i.x?s.x:i.x;var o=s.y>i.y?i.y:s.y;var l=s.y>i.y?s.y:i.y;if(a){a.top&&(o=o<a.top?a.top:o);a.bottom&&(l=l>a.bottom?a.bottom:l);a.left&&(n=n<a.left?a.left:n);a.right&&(r=r>a.right?a.right:r)}this._selectionNode.setStyles({top:o+1,left:n+1,right:c.config.doc.body.offsetWidth-r,bottom:c.config.win.innerHeight-l})},_endSelection:function(e){if(this._mouseMoveGuard){this._mouseMoveGuard.detach();this._mouseMoveGuard=null}e&&e.halt();if(this._mouseMoveSubscription){this._mouseMoveSubscription.detach();delete this._mouseMoveSubscription}this._origin&&delete this._origin;c.one("body").removeClass(this._dragClassName);this.fire("selection-complete",{region:this._selectionNode.get("region"),originalMouseup:e});this._selectionNode.setStyles({top:null,left:null,right:null,bottom:null});this._selectionNode.remove();this._debug&&console.info("selection-complete")},_mouseDownInValidRegion:function(e){var t=this.get("invalidRegions");for(var a=0;a<t.length;a++){var i=t[a];if(!i)continue;if("string"===typeof i){if(e.target.ancestor(i,true))return false}else{i=this._getRegion(i);if(this._pointInRegion(this._origin.x,this._origin.y,i))return false}}return true},_pointInActivationRegion:function(e,t){var a=this.get("activationRegion");if(!a)return true;return this._pointInRegion(e,t,a)},_pointInRegion:function(e,t,a){if(a.top&&a.right&&a.bottom&&a.left)return e>=a.left&&e<=a.right&&t>=a.top&&t<=a.bottom;if(a.left&&e<a.left)return false;if(a.right&&e>a.right)return false;if(a.top&&t<a.top)return false;if(a.bottom&&t>a.bottom)return false;return true},_getRegion:function(e){if(c.instanceOf(e,c.Node))return e.get("region");return e},_getNode:function(e){if(!e)throw new Error(this.name+": The node attr is required.");if(!c.Lang.isString(e)&&!c.instanceOf(e,c.Node))throw new Error(this.name+": The node attr must be a Y.Node instance or selector string.");c.Lang.isString(e)&&(e=c.one(e));return e},_getDragging:function(){var e=c.one("body");if(e)return e.hasClass(this._dragClassName);return false},_setEnabled:function(e){this._activationSub&&this._activationSub.detach();e?this._bindUI():this.get("dragging")&&this._endSelection();c.one("body").addClass(e?"drag-selection-enabled":"drag-selection-disabled").removeClass(e?"drag-selection-disabled":"drag-selection-enabled");return e},enable:function(){this.set("enabled",true)},disable:function(){this.set("enabled",false)}},{ATTRS:{node:{writeOnce:true,value:null,getter:"_getNode",validator:function(e){if(!c.Lang.isString&&!(e instanceof c.Node))throw new Error(this.name+": node attr must be a node or selector string.");return true}},boundingRegion:{value:null,getter:"_getRegion"},activationRegion:{value:null,getter:"_getRegion"},enabled:{value:true,setter:"_setEnabled"},eventListeners:{value:[]},dragging:{value:false,valueFn:"_getDragging",getter:"_getDragging",readOnly:true},invalidRegions:{value:[]}}})},"1.0",{requires:["anim","array-invoke","base","node","@sqs/yui-dd-wrappers/drag-selection-selector-blacklist"]})},"./src/main/webapp/universal/scripts-layout-engine/dimensions.js":function(e,t){YUI.add("@sqs/layout-engine/dimensions",function(i){"use strict";var t=null;var e=["marginLeft","borderLeftWidth","paddingLeft","paddingRight","borderRightWidth","marginRight"];var a=["marginTop","borderTopWidth","paddingTop","paddingBottom","borderBottomWidth","marginBottom"];i.Node.emToPx=function(e){if(!t){t=i.config.doc.createElement("div");t.style.position="absolute";t.style.top="-10000px";t.style.left="-10000px";t.style.visibility="hidden";t.style.width="10em";t.style.height="10em";i.config.doc.body.appendChild(t)}return(e||1)*(t.offsetWidth/10)};i.Node.prototype.totalWidth=function(){return this._node.offsetWidth+this.parseDimensionStyle("marginLeft")+this.parseDimensionStyle("marginRight")};i.Node.prototype.totalHeight=function(){return this._node.offsetHeight+this.parseDimensionStyle("marginTop")+this.parseDimensionStyle("marginBottom")};i.Node.prototype.insideWidth=function(){return this._node.clientWidth-this.parseDimensionStyle("paddingLeft")-this.parseDimensionStyle("paddingRight")};i.Node.prototype.insideHeight=function(){return this._node.clientHeight-this.parseDimensionStyle("paddingTop")-this.parseDimensionStyle("paddingBottom")};i.Node.prototype.horizMarginBorderPadding=function(){return i.Array.reduce(e,0,function(e,t){return e+this.parseDimensionStyle(t)},this)};i.Node.prototype.vertMarginBorderPadding=function(){return i.Array.reduce(a,0,function(e,t){return e+this.parseDimensionStyle(t)},this)};i.Node.prototype.parseDimensionStyle=function(e){var t=this.getComputedStyle(e);if(!t||!/^[0-9]/.test(t))return 0;var a=parseFloat(t,10);/em$/.test(t)&&(a*=i.Node.emToPx(1));return Math.round(a)}},"1.0",{requires:["node-style","array-extras"]})},"./src/main/webapp/universal/scripts-layout-engine/edit-controller-base.js":function(e,t,a){var i=a("./common/temp/node_modules/@sqs/utils/scroll/getDocScrollNode.js");var c=false;var s=function(){};YUI.add("@sqs/layout-engine/edit-controller-base",function(h){h.namespace("SQS.LayoutEngine.Layout").EditMode=h.SQS.LayoutEngine.enumFactory({WEB_APP:1,MOBILE_APP:2,SECTION:3});h.namespace("SQS.LayoutEngine");h.SQS.LayoutEngine.EditControllerBase=h.Base.create("editcontroller",h.Base,[h.SQS.LayoutEngine.Mixins.EventRegistrar],{initializer:function(){c&&console.log("[le] edit-controller-base - initializer");this._scrollNodes=[];this.changedLayouts=[];this.after("editingChange",this._syncEditing,this);this.after("dropInfoChange",this._afterDropInfoChange,this)},_syncEditing:function(e){if(e.silent)return;c&&console.log("[le] edit-controller-base - _syncEditing",e);e.newVal?this._enableEditing():this._disableEditing()},_afterDropInfoChange:function(e){e.newVal?this.alignInsertMarker(e.newVal):this.hideInsertMarker()},getLayoutNodes:function(){return h.all(".sqs-layout")},pluginLayoutBuilder:function(e,t,a,i){var s=h.SQS.LayoutEngine.Layout.Builder.NS;if(!e.hasPlugin(s)){h.Lang.isValue(a)||(a=this.get("defaultEditMode"));e.plug(h.SQS.LayoutEngine.Layout.Builder,{editController:this,layout:t,editMode:a,startupBlockId:i})}return e[s]},destroyLayoutBuilder:function(e){e.unplug(h.SQS.LayoutEngine.Layout.Builder.NS)},pluginLayoutEditor:function(e){c&&console.log("[le] edit-controller-base - plugin a layout editor for",e);var t=e.layoutNode;var a=e.layoutModel;var i=e.scrollNode||this.get("scrollNode");var s=e.editMode||this.get("defaultEditMode");var n=e.startupBlockId||null;var r=e.layoutTutorialPromise||h.when();var o=e.dragDropLock;this.get("editing")||this.set("editing",true,{silent:true});t.hasPlugin(h.SQS.LayoutEngine.Layout.Builder.NS)||this.pluginLayoutBuilder(t,a,s,n);var l=t.plug(h.SQS.LayoutEngine.Layout.Editor,{editMode:s,editController:this,scrollNode:i,forceSingleColumn:this.get("forceSingleColumn"),markdownMode:this.get("markdownMode"),columns:h.SQS.LayoutEngine.Layout.Utils.getValFromClass(t,"sqs-grid-"),startupBlockId:n,layoutTutorialPromise:r,dragDropLock:o})[h.SQS.LayoutEngine.Layout.Editor.NS];h.one(h.config.doc.body).addClass("sqs-layout-editing");this.initializeBlockTrash();return l},initializeBlockTrash:function(){if(this._blockTrashInstance)return;this._blockTrashInstance=new h.SQS.LayoutEngine.Layout.BlockTrash({editController:this})},getBlockTrashInstance:function(){this.initializeBlockTrash();return this._blockTrashInstance},destroyBlockTrashInstance:function(){if(this._blockTrashInstance){this._blockTrashInstance.destroy();this._blockTrashInstance=null}},destroyLayoutEditor:function(e){var t=h.SQS.LayoutEngine.Layout.Editor.NS;this.destroyLayoutBuilder(e);this._destroyInsertMarkerInstance();this._destroyInsertMenus();e.unplug(t);var a=this.getLayoutNodes().some(function(e){return e.hasPlugin(t)});a||h.one(h.config.doc.body).removeClass("sqs-layout-editing")},layoutBeforeDragStart:function(){this.getLayoutNodes().each(function(e){h.Lang.isObject(e.LayoutEditor)&&e.LayoutEditor.beforeDrag()},this)},layoutDragStart:function(e){h.one("html").addClass("sqs-dragging-block");this.changedLayouts.push(e);this.setInsertMarkerLayout(e)},processEdgeInfo:function(e){var t=e.newVal;if(!t||!h.DD.DDM.activeDrag){this.set("dropInfo",null);return}var a=this.get("dropBlockInfo");var i=this._getDropTarget(t.node);var s=a.ancestors;var n=a.parentLayout;var r=i.getData("isAdjacentToBlockEdge");var o=t.direction;var l=this.getType(i);var c=this._getClosestBlock(i);if(!a.blockNode||a.blockNode!==c){var u=".sqs-block, .sqs-col, .sqs-row, .sqs-layout";s=c.ancestors(u,true,".sqs-layout");n=s.shift();this.set("dropBlockInfo",{blockNode:c,parentLayout:n,ancestors:s})}var d=h.DD.DDM.activeDrag.get("dragWidget");if(!d)return;var p=d.get("floatable")&&"content"===l&&this._isHorizontalDirection(o);p||!this.get("forceSingleColumn")&&1!==n.LayoutEditor.get("columns")||(o=t.quad.y);if(this._isTraversableDirection(o,r)){i=this._getTraversedDropNode(i,o,t);l=this.getType(i);p=p&&"content"===l}if("content"===l){if(!p&&this._isHorizontalDirection(o)){i=i.ancestor(this.get("contentParentBlockSelector"));l=this.getType(i)}}else if("block"===l&&this._isHorizontalDirection(o)&&this._isOnlyBlockInColumn(i)){i=i.ancestor(".sqs-col");l=this.getType(i)}this.set("dropInfo",{node:i,type:l,direction:o,region:this._getDropRegion(i,t),shouldFloat:p,isSelf:"hidden"===i.getStyle("visibility")})},_getClosestBlock:function(e){var t=this.getType(e);if("content"===t)return e.ancestor(".sqs-block");return e},_getDropTarget:function(e){if(e.hasClass("sqs-content-overlay"))return e.getData("alignNode");return e},_getDropRegion:function(e,t){if(e===t.node)return t.region;return e.get("region")},_isTraversableDirection:function(e,t){var a=true;t&&void 0!==t[e]&&(a=t[e]);return a},_getTraversableDepth:function(e,t,a){var i=a.size();var s=0;while(e&&this._canTraverseToParent(e,t)){s++;e=a.item(--i)}return s},_canTraverseToParent:function(e,t){var a=e.hasClass("sqs-col");var i=!this.get("forceSingleColumn");return a&&this._isVerticalDirection(t)||i&&this._canTraverseHorizontallyFromColumn(t,e)||!a&&i&&this._isHorizontalDirection(t)||this._canTraverseVerticallyFromBlockOrRow(t,e)},_getTraversedDropNode:function(e,t,a){var i=this.get("dropBlockInfo.ancestors");this.get("forceSingleColumn")&&(i=i.filter(".sqs-block"));var s=this._getTraversableDepth(e,t,i);if(s){var n=i.size();var r=n-s;var o=Math.min(a.region.width,a.region.height)/4;var l=Math.floor(n*a.distance/o);l=Math.max(r,Math.min(n,l));e=i.item(l)||e}return e},_isHorizontalDirection:function(e){return"left"===e||"right"===e},_isVerticalDirection:function(e){return"top"===e||"bottom"===e},_canTraverseHorizontallyFromColumn:function(e,t){return"left"===e&&!t.previous(".sqs-col")||"right"===e&&!t.next(".sqs-col")},_canTraverseVerticallyFromBlockOrRow:function(e,t){return"top"===e&&!t.previous(".sqs-block, .sqs-row")||"bottom"===e&&!t.next(".sqs-block, .sqs-row")},_isOnlyBlockInColumn:function(e){return 0===e.siblings(".sqs-block:not(.sqs-float), .sqs-row").size()},getType:function(e){if(!e)return"unknown";if(e.hasClass("sqs-block")||e.hasClass("free-block"))return"block";if(e.hasClass("sqs-col"))return"column";if(e.hasClass("sqs-row"))return"row";if(e.ancestor(this.get("contentParentBlockSelector")))return"content"},layoutDragEnd:function(){h.one("html").removeClass("sqs-dragging-block");this.insertBlockToLayout(true);this.getLayoutNodes().each(function(e){e.hasPlugin(h.SQS.LayoutEngine.Layout.Editor.NS)&&e.LayoutEditor.afterDrag();e.hasPlugin(h.SQS.LayoutEngine.Layout.Builder.NS)&&e.LayoutBuilder.fire("widget:contentUpdate")},this);this.changedLayouts.length&&this.cleanGrids()},insertBlockToLayout:function(t){var a=this.get("dropInfo");var e=this.get("selection");if(!h.Lang.isValue(a)||!h.Lang.isValue(a.node)||!e)return;var i=this._getBlockNodeListFromSelection(e,a);if(i.size()){var s=a.node.ancestor(".sqs-layout");if(!s)return;var n=[];var r=false;i.each(function(e){s.LayoutEditor.insertBlock(e,a,t);n.push(h.Widget.getByNode(e))});h.Array.each(this.changedLayouts,function(e){e===s?r=true:e.LayoutBuilder.deregisterBlocks(n)});r||this.changedLayouts.push(s);this.cleanGrids();h.Array.each(n,function(e){if(e&&!e.get("destroyed")){s.LayoutBuilder.registerBlock(e);e.show()}});this.setAttrs({dropInfo:null,dropBlockInfo:{},selection:null})}},_getBlockNodeListFromSelection:function(e,t){if(e){if(h.SQS.LayoutEngine.Layout.Utils.isBlock(e)&&!e.hasClass("sqs-destroyme"))return new h.NodeList(e);if(!h.Lang.isValue(t))return new h.NodeList(e)}return new h.NodeList},cleanGrids:function(e){if(e)h.Lang.isArray(e)||(e=[e]);else{e=this.changedLayouts||[];this.changedLayouts=[]}e.forEach(function(e){e.LayoutEditor.cleanGrid()},this)},_enableEditing:function(){h.one("html").addClass("sqs-page-editing")},_disableEditing:function(){h.one("html").removeClass("sqs-page-editing");h.detach("editCtrl|*");this.getLayoutNodes().each(function(e){if(e.hasPlugin(h.SQS.LayoutEngine.Layout.Editor.NS)){var t=e.LayoutEditor.dragDelegate;t.detach("editCtrl|*");t.dd.detach("editCtrl|*");e.unplug(h.SQS.LayoutEngine.Layout.Editor)}},this)},enableInsertPoints:s,disableInsertPoints:s,alignInsertPoints:s,enableDragSelection:s,disableDragSelection:s,isMobileApp:function(){return false},getRenderableBlocks:function(e){var t=e.enumName;h.Lang.isValue(this._renderableBlockMap)||this._initRenderableBlocksMap();var a=this._renderableBlockMap[t];if(!h.Lang.isValue(a)){var i=this._renderableBlockCtorMap[t];if(!h.Lang.isValue(i))return null;a=this._renderableBlockMap[t]=new i}return a},getInsertMenu:function(e,t){h.Lang.isValue(this._insertMenuMap)||this._initInsertMenuCtorMap();if(h.Lang.isValue(t))return this._upsertInsertMenu(e,t);return this._insertMenuMap[e.enumName]},_upsertInsertMenu:function(e,t){var a=this._insertMenuMap[e.enumName];if(h.Lang.isValue(a))a.setAttrs(t);else{var i=this._insertMenuCtorMap[e.enumName];if(!h.Lang.isValue(i))return null;a=this._insertMenuMap[e.enumName]=new i(h.merge(t,{editController:this}))}return a},_destroyInsertMenus:function(){if(!this._insertMenuMap)return;Object.keys(this._insertMenuMap).forEach(function(e){this._insertMenuMap[e].destroy()}.bind(this));this._insertMenuMap={}},_initRenderableBlocksMap:function(){this._renderableBlockCtorMap={};this._renderableBlockMap={};h.Array.each(this.get("renderableBlockSet"),function(e){h.Lang.isValue(e.ctor)&&(this._renderableBlockCtorMap[e.editMode.enumName]=e.ctor)},this)},_initInsertMenuCtorMap:function(){this._insertMenuCtorMap={};this._insertMenuMap={};h.Array.each(this.get("insertMenuSet"),function(e){h.Lang.isValue(e.ctor)&&(this._insertMenuCtorMap[e.editMode.enumName]=e.ctor)},this)},_createInsertMarkerInstance:function(e){this._insertMarkerInstance=new h.SQS.LayoutEngine.Layout.InsertMarker({render:e})},setInsertMarkerLayout:function(e){var t=this._insertMarkerInstance;if(!t||t&&t.get("destroyed"))this._createInsertMarkerInstance(e);else if(e!==t.get("render")){this._destroyInsertMarkerInstance();this._createInsertMarkerInstance(e)}},_destroyInsertMarkerInstance:function(){if(this._insertMarkerInstance){this._insertMarkerInstance.destroy();delete this._insertMarkerInstance}},alignInsertMarker:function(e){var t=this._insertMarkerInstance;if(!h.Lang.isObject(e)||!t)return;if(!t.get("locked")){t.set("info",e);t.show()}},hideInsertMarker:function(){this._insertMarkerInstance&&this._insertMarkerInstance.hide()},toggleInsertMarkerLock:function(e){this._insertMarkerInstance&&this._insertMarkerInstance.set("locked",e)},updateInsertMarkerConstrainNode:function(e){var t=this._insertMarkerInstance;if(!t)return;h.Lang.isValue(e)&&t.set("constrainZIndex",e);t.positionConstrainNode()},hideBlockMenus:function(){h.Object.each(this._insertMenuMap,function(e){e.hide()})},destructor:function(){h.one(h.config.doc).detach("editCtrl|*");this.getLayoutNodes().each(function(e){this.destroyLayoutEditor(e)}.bind(this));h.Object.each(this._insertMenuMap,function(e){e.destroy(true)});this._insertMenuMap=null;this.set("editing",false)}},{ATTRS:{contentParentBlockSelector:{getter:function(e){if(!h.Lang.isValue(e))return"";return e},setter:function(e,t){var a=this.get(t);if(0===a.length)return e;if(a.indexOf(e)>-1)return a;return a+", "+e}},editing:{value:false},scrollNode:{valueFn:function(){return h.one(i(h.config.doc))},lazyAdd:false},dropInfo:{value:{node:null,direction:"",distance:0,quad:null,region:null}},dropBlockInfo:{value:{blockNode:null,ancestors:null,parentLayout:null}},selection:{},markdownMode:{value:false},forceSingleColumn:{value:false},renderableBlockSet:{valueFn:function(){console.error("Edit Controller Error: renderableBlockSet not implemented")}},insertMenuSet:{valueFn:function(){console.error("Edit Controller Error: insertMenuSet not implemented")}},supportsInsertPoints:{value:false}}})},"1.0",{requires:["array-invoke","base","event","json-parse","node","parallel","plugin","promise","@sqs/layout-engine/enum-factory","@sqs/layout-engine/event-registrar","@sqs/layout-engine/layout-builder","@sqs/layout-engine/layout-editor","@sqs/layout-engine/layout-insert-marker","@sqs/layout-engine/layout-utils","@sqs/layout-engine/layout-trash","@sqs/layout-engine/models-layout"]})},"./src/main/webapp/universal/scripts-layout-engine/edit-controller-web-app.js":function(e,t,a){var i=a("./common/temp/node_modules/lodash/debounce.js");var r=a("./common/temp/node_modules/@sqs/rosetta-tokens/build/lib/index.js");var o=a("./common/temp/node_modules/@sqs/rosetta-utilities/build/lib/index.js");YUI.add("@sqs/layout-engine/edit-controller-web-app",function(n){n.namespace("SQS.LayoutEngine");var s=n.SQS.LayoutEngine.EditControllerWebApp=n.Base.create("editcontroller",n.SQS.LayoutEngine.EditControllerBase,[],{initializer:function(){this._dragSelection=new n.SQS.DDWrappers.DragSelection({node:"body",enabled:false});n.on("key",this._onDeleteKeyHandler,n.config.doc,"down:backspace,46",this);this._registerEvent(n.SQS.LayoutEngine.Events.on("layout-engine:remove-confirmed",function(e){this._removeBlocks(e.selected)}.bind(this)),n.SQS.LayoutEngine.Events.on("layout-engine:open-block-menu",this.showBlockMenu.bind(this)))},pluginLayoutEditor:function(e){this.disableInsertPoints();var t=e.layoutNode;var a=s.superclass.pluginLayoutEditor.apply(this,arguments);var i=this._getNewDragRegionConfig(t);if(n.Lang.isValue(i)){this._destroyDragSelection();this._initializeDragSelection(i)}this._maintainDragSelectionRegion(t);this.enableDragSelection();this.enableInsertPoints();return a},enableDragSelection:function(){this._dragSelection.get("enabled")||this._dragSelection.set("enabled",true)},disableDragSelection:function(){this._dragSelection.get("enabled")&&this._dragSelection.set("enabled",false)},_getNewDragRegionConfig:function(e){var t=n.one("body");var a=e.ancestor(".sqs-content-manager-base");var i=e.ancestor(".sqs-dialog-layout-wrapper-content");var s=[".sqs-block",".standard-dialog-wrapper"];if(n.Lang.isValue(a))t=a;else if(n.Lang.isValue(i)){t=i;s=[".sqs-block","textarea","input"]}return{dragRegionNode:t,invalidRegions:s}},_initializeDragSelection:function(e){this._dragSelectionRegionNode=e.dragRegionNode;this._dragSelection.set("invalidRegions",e.invalidRegions);this._dragSelection.set("enabled",true);this._dragSelectionChangedEvent=this._dragSelection.on(["selection-complete","selection-dragged"],this._dragSelectionChanged,this)},_maintainDragSelectionRegion:function(e){n.Lang.isValue(this._contentChangedEvents)||(this._contentChangedEvents=[]);this._contentChangedEvents.push(e.LayoutBuilder.after("widget:contentUpdate",this._onContentUpdatePreserveDragSelection,this))},_onContentUpdatePreserveDragSelection:i(function(){if(!this._dragSelection||!this._dragSelectionRegionNode)return;this._dragSelection.set("boundingRegion",this._dragSelectionRegionNode.get("region"))},20),_destroyDragSelection:function(){this._onContentUpdatePreserveDragSelection.cancel();this._dragSelection.set("enabled",false);n.Lang.isValue(this._dragSelectionChangedEvent)&&this._dragSelectionChangedEvent.detach();this._dragSelectionRegionNode=null;n.Lang.isValue(this._contentChangedEvents)&&n.Array.each(this._contentChangedEvents,function(e){e.detach()})},_dragSelectionChanged:function(a){n.all(".sqs-layout.sqs-editing .sqs-block").each(function(e){var t=n.Widget.getByNode(e);if(!t)return;t.get("lockedLayout")||(e.intersect(a.region).inRegion?t.set("selected",1):t.set("selected",0))})},layoutDragStart:function(e){s.superclass.layoutDragStart.apply(this,[e]);this.disableInsertPoints()},layoutDragEnd:function(){s.superclass.layoutDragEnd.call(this);this.enableInsertPoints();this.alignInsertPoints(null,true)},_disableEditing:function(){this._destroyBlockMenu();this._destroyInsertPointController();this._destroyDragSelection();s.superclass._disableEditing.call(this)},destroyLayoutEditor:function(){this.disableInsertPoints();s.superclass.destroyLayoutEditor.apply(this,arguments);this._destroyDragSelection();this.enableInsertPoints()},_destroyBlockMenu:function(){n.SQS.LayoutEngine.Singletons.BlockMenu&&n.SQS.LayoutEngine.Singletons.BlockMenu.destroy()},showBlockMenu:function(e){e=n.merge({editMode:this.get("defaultEditMode"),direction:"bottom",type:"row",targetNode:null,layoutNode:null,scrollNode:null},e);var t=this.getInsertMenu(e.editMode,e);t.hide();t.show()},_onDeleteKeyHandler:function(e){if(e.target.ancestor("input, textarea, [contenteditable=true]",true))return;e.halt();function t(e){return".sqs-layout.sqs-editing ."+e+":not(.sqs-block-locked-layout)"}var a=n.all(t("sqs-block-focused")+", "+t("sqs-selected"));a.size()>0&&n.SQS.LayoutEngine.Events.fire("layout-engine:remove-requested",{selected:a})},_removeBlocks:function e(t){var i=[];t.each(function e(t){var a=n.Widget.getByNode(t);if(a){a.queueForDestruction();i.push(t.ancestor(".sqs-layout"))}});i=n.Array.unique(i);n.Array.each(i,function e(t){t.LayoutEditor.cleanGrid(true)})},_destroyInsertPointController:function(){n.SQS.LayoutEngine.Singletons.InsertPointController&&n.SQS.LayoutEngine.Singletons.InsertPointController.destroy()},enableInsertPoints:function(){n.SQS.LayoutEngine.Singletons.InsertPointController&&this.get("supportsInsertPoints")&&n.SQS.LayoutEngine.Singletons.InsertPointController.debouncedToggleDisabled(false)},disableInsertPoints:function(){if(!this.get("supportsInsertPoints"))return;n.SQS.LayoutEngine.Singletons.InsertPointController&&n.SQS.LayoutEngine.Singletons.InsertPointController.debouncedToggleDisabled(true);this.hideInsertMarker()},alignInsertPoints:function(e,t){n.SQS.LayoutEngine.Singletons.InsertPointController&&this.get("supportsInsertPoints")&&n.SQS.LayoutEngine.Singletons.InsertPointController.alignInsertPoints(e,t)},destructor:function(){this._destroyDragSelection();this._dragSelection.destroy();this._destroyInsertPointController()}},{ATTRS:{defaultEditMode:{readOnly:true,value:n.SQS.LayoutEngine.Layout.EditMode.WEB_APP},supportsInsertPoints:{valueFn:function(){var e=o.getBreakpoint(r.breakpoints);return"mobile"!==e.platform}}}})},"1.0",{requires:["base","event","json-parse","node","parallel","@sqs/yui-dd-wrappers/drag-selection","@sqs/layout-engine/edit-controller-base","@sqs/layout-engine/layout-editor","@sqs/layout-engine/layout-insert-point","@sqs/layout-engine/layout-insert-point-controller","@sqs/layout-engine/models-layout","@sqs/layout-engine/events"]})},"./src/main/webapp/universal/scripts-layout-engine/events.js":function(e,t){YUI.add("@sqs/layout-engine/events",function(e){e.namespace("SQS.LayoutEngine");var t=new e.EventTarget;t.publish("layout-engine:grid-cleaned");t.publish("layout-engine:remove-requested",{emitFacade:true,defaultFn:function(e){t.fire("layout-engine:remove-confirmed",e)}});t.publish("layout-engine:remove-confirmed");t.publish("layout-engine:open-block-menu");t.publish("layout-engine:block-menu-shown");t.publish("layout-engine:block-menu-hidden");t.publish("layout-engine:block-menu-search-query-change");t.publish("layout-engine:block-menu-search-query-enter");t.publish("layout-engine:edit-block");t.publish("layout-engine:insert-block");t.publish("layout-engine:delete-block");e.Lang.isValue(e.SQS.LayoutEngine.Events)||(e.SQS.LayoutEngine.Events=t)},"1.0",{requires:["event"]})},"./src/main/webapp/universal/scripts-layout-engine/layout-insert/block-icon-base.js":function(e,t){YUI.add("@sqs/layout-engine/layout-insert-block-icon-base",function(e){e.namespace("SQS.LayoutEngine.LayoutInsert");e.SQS.LayoutEngine.LayoutInsert.BlockIconBase=e.Base.create("blockIcon",e.Widget,[],{renderUI:function(){this.get("contentBox").setHTML('<div class="label">'+this.get("label")+"</div>")},queueForDestruction:function(){this.get("boundingBox").addClass("sqs-destroyme")}},{CSS_PREFIX:"sqs-blockicon",ATTRS:{categoryLabel:{},ctor:{value:null},defaultContentModel:{},floatable:{valueFn:function(){var e=this.get("ctor");var t=e.ATTRS.floatable||e.superclass.constructor.ATTRS.floatable;if(t&&void 0!==t.value)return t.value;return true}},id:{},label:{},tags:{},isReactDeleting:{}}})},"1.0",{requires:["base","widget"]})},"./src/main/webapp/universal/scripts-layout-engine/layout-insert/block-menu-mixin.js":function(e,t,a){var n=a("./common/temp/node_modules/@sqs/utils/scroll/scrollTo.js");var d=a("./common/temp/node_modules/@sqs/utils/scroll/getDocScrollNode.js");var i=a("./src/main/webapp/universal/scripts-layout-engine/shared/constants/Constants.js");var s=a("./src/main/webapp/frontend/packages/enums/Flag.js");var r=a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts");var o=function(){};YUI.add("@sqs/layout-engine/layout-insert-block-menu-mixin",function(u){u.namespace("SQS.LayoutEngine.Layout");u.SQS.LayoutEngine.Layout.InsertBlockMenuMixin=u.Base.create("layout-insert-block-menu-mixin",u.Base,[],{initializer:function(){this._icons=[];this._bb=this.get("boundingBox");this._cb=this.get("contentBox");this._ec=this.get("editController");window.MOBILEAPP||this._initDragDelegate(this._getDragDelegateConfig());this._initClickDelegate();this.on("focusedChange",this._onFocusedChange,this);this._bindInstrumentationEvents()},destructor:function(){this._destroyScrollAnim();this.dragDelegate&&this.dragDelegate.destroy();this._detachClickDelegate();this._bb=null;this._cb=null;this._ec=null;this.debouncedDragDrag&&this.debouncedDragDrag.cancel()},_bindInstrumentationEvents:function(){this.after("visibleChange",function(e){var t=u.Object.getValue(u.config.win,"Static.IN_BACKEND".split("."));var a=e.newVal?"layout-engine:block-menu-shown":"layout-engine:block-menu-hidden";u.SQS.LayoutEngine.Events.fire(a,{backend:t})},this)},renderUI:function(){this._renderMenuIcons(u.Array.filter(this._getInsertableBlockItems(),u.Lang.isValue))},_getInsertableBlockItems:function(){return[]},_renderMenuIcons:function(e){console.warn("Unimplemented method _renderMenuIcons.")},_getDragDelegateConfig:function(){return null},_initDragDelegate:function(e){var t=r.isFeatureEnabled(s.BLOCK_SELECTOR_REDESIGN)?this.get("reactNodes"):this.get("nodes");this.dragDelegate=new u.SQS.LayoutEngine.Layout.DragDelegate(u.merge({container:this._bb,nodes:t,dragConfig:{groups:["blocks"],clickTimeThresh:i.DRAG_CLICK_TIME_THRESHOLD},enableDragScroll:true,scrollNode:this.get("scrollNode"),dragProxyConfig:{cloneNode:true,hideOriginalNode:false,moveOnEnd:false,flyBack:false,containerNode:u.one(u.config.doc.body)},extraSyncShims:true,editController:this.get("editController")},e));this.dragDelegate.before("drag:start",this._ec.layoutBeforeDragStart,this._ec);this.dragDelegate.on("drag:start",this._dragStart,this);this.dragDelegate.on("drag:end",this._dragEnd,this);this.after("scrollNodeChange",function(e){this.dragDelegate.set("scrollNode",e.newVal)},this)},_initClickDelegate:function(){var e=u.UA.mobile?"tap":"click";this.clickDelegate=u.delegate(e,this._onClick,this._bb,this.get("nodes"),this)},_detachClickDelegate:function(){this.clickDelegate&&this.clickDelegate.detach()},_dragStart:function(e){this._detachClickDelegate();this._ec.set("selection",null);this._ec.set("dropInfo",null);this._ec.layoutDragStart(this.get("layoutNode"));this.hideMenu()},_dragDrag:function(e){var t=this.get("isDragging");t&&e.pageX>u.config.doc.body.offsetWidth-this._menuWidth/3?this.set("isDragging",false):!t&&e.pageX<u.config.doc.body.offsetWidth-this._menuWidth&&this.set("isDragging",true)},_dragEnd:function(e){this.hide();r.isFeatureEnabled(s.BLOCK_SELECTOR_REDESIGN)?this.handleReactDrop():this.createBlock(u.DD.DDM.activeDrag.get("node"),"dragDrop");this._ec.layoutDragEnd();this._initClickDelegate()},_onClick:function(e){e.preventDefault();this.hideMenu();this.createBlock(e.target,"click")},_getDefaultDropInfo:function(){return null},createBlock:function(e,t){"dragDrop"!==t&&this._ec.set("dropInfo",this._getDefaultDropInfo());if(!u.Object.getValue(this._ec.get("dropInfo"),["node","_node"])){console.warn("[block-menu] No target node to drop a new block around.");return}var a=this._instantiateNewBlock(e,t);if(!a)return;a.trackEngagementCreate&&a.trackEngagementCreate({interaction:t});this._ec.set("selection",a.get("boundingBox"));this._ec.insertBlockToLayout();this._afterNewBlockInsert(a)},_instantiateNewBlock:function(e,t){var a;var i;var s=!u.Widget.getByNode(e);var n=s?e:u.Widget.getByNode(e);var r=n.get("ctor");var o=true;var l={editable:false,visible:false,isNewBlock:true,editOnStart:o,editMode:this.get("editMode"),editController:this.get("editController")};if(!s&&e.hasClass("sqs-destroyme")){e.removeClass("sqs-destroyme");return null}if(s&&e.get("isReactDeleting"))return null;var c=this._ec.get("dropInfo").node;c&&(a=c.ancestor(".sqs-layout"));l.render=a||true;i=n.get("defaultContentModel");i&&(l.defaultContentModel=i);return new r(l)},_afterNewBlockInsert:function(e){var t=e.get("boundingBox");var a=this.get("layoutNode")||t.ancestor(".sqs-layout");var i=a[u.SQS.LayoutEngine.Layout.Builder.NS].get("layout");e.onceAfter("editableChange",function(){setTimeout(this._scrollToBlockNode.bind(this,t),300)},this);e.setAttrs({editable:true,collectionId:u.Lang.isValue(i)?i.get("collectionId"):null})},_scrollToBlockNode:function(e){this._destroyScrollAnim();var t=this.get("scrollNode").getDOMNode();var a=e.getDOMNode();if(!t||!a)return;var i=this._getScrollOffsets(a,t);if(!i)return;var s={onEnd:this._destroyScrollAnim.bind(this)};this._scrollAnim=n(t,i,s)},_getScrollOffsets:function(e,t){var a=0;var i=0;if(d(u.config.doc)===t){var s=u.config.win.innerHeight;var n=e.getBoundingClientRect();var r=44;if(n.top>0&&n.top<s-r)return;var o=u.config.doc.documentElement.getBoundingClientRect();var l=66;a=n.left-o.left;i=n.top-o.top-l}else{var c=22;a=e.offsetLeft;i=e.offsetTop-c}return{left:a,top:i}},_destroyScrollAnim:function(){if(this._scrollAnim){this._scrollAnim.isRunning()&&this._scrollAnim.pause();this._scrollAnim=null}},hideMenu:o,_onFocusedChange:o,handleReactDrop:o},{ATTRS:{nodes:{value:".sqs-blockicon"},reactNodes:{value:".sqs-react-blockicon"},scrollNode:{},layoutNode:{},editController:{valueFn:function(){console.error("Block Menu Error, must pass editController instance")}}}})},"1.0",{requires:["anim","anim-easing","base","@sqs/layout-engine/block/generic-base","@sqs/layout-engine/layout-drag"]})},"./src/main/webapp/universal/scripts-layout-engine/layout-insert/block-menu-web-base.js":function(e,t,a){var c=a("./common/temp/node_modules/normalize-strings/index.js");var i=a("./common/temp/node_modules/@sqs/utils/scroll/getDocScrollNode.js");var u=a("./src/main/webapp/universal/scripts-layout-engine/shared/constants/BlockTypeStrings.js");var d=a("./src/main/webapp/universal/scripts-layout-engine/shared/constants/BlockVariantTypeKeys.js");var s=a("./src/main/webapp/universal/src/shared/utils/isAppleiPadOS13.js");var n=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var r=a("./common/temp/node_modules/react/index.js");var o=a("./common/temp/node_modules/react-dom/index.js");var p=a("./src/main/webapp/universal/src/apps/App/components/Blocks/BlockSelector.js");var h=a("./src/main/webapp/frontend/packages/enums/Flag.js");var g=a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts");YUI.add("@sqs/layout-engine/layout-insert-block-menu-web-base",function(l){l.namespace("SQS.LayoutEngine.Layout");var e=l.SQS.LayoutEngine.Layout.InsertBlockMenuWebBase=l.Base.create("layoutInsertBlockMenuBase",l.Overlay,[l.WidgetParent,l.SQS.LayoutEngine.Layout.InsertBlockMenuMixin],{initializer:function(){l.Event.defineOutside("mousedown");this._bb=this.get("boundingBox");this._cb=this.get("contentBox");this._bb.set("dataset.test","insert-block-menu");if(g.isFeatureEnabled(h.BLOCK_SELECTOR_REDESIGN)){this._bb.addClass("react-block-selector");this.selectorContainer=l.Node.create("<div></div>");this._cb.append(this.selectorContainer)}else{this._search=new l.SQS.LayoutEngine.Layout.BlockSearch;this._search.set("placeHolderText",this.get("searchPlaceHolderText"));this.add(this._search)}this._cb.plug(l.SQS.LayoutEngine.Copies.Plugin.ScrollLock)},bindUI:function(){this.get("boundingBox").on("mousedownoutside",this._onMouseDownOutside,this);this.after("search:dataChange",this._searchFilter,this);this.on("search:submit",this._selectIcon,this)},renderUI:function(){if(!g.isFeatureEnabled(h.BLOCK_SELECTOR_REDESIGN)){this._search.render(this._cb);this._renderMenuIcons(this._getInsertableBlockItems())}this.get("visible")||this._cb.hide()},renderReactBlockSelector:function(e){o.render(r.createElement(p,{categories:this._getInsertableBlockItems(),iconConfigs:this.getIconConfigs(),handleIconSelect:this.handleIconSelect.bind(this),isOpen:e}),this.selectorContainer.getDOMNode())},getIconConfigs:function(){var a=this.get("editController").getRenderableBlocks(this.get("editMode"));var i=l.merge(u.BlockTypeKeys,d);var e=this._getInsertableBlockItems();var s={};l.Array.each(e,function(e){l.Array.each(e.items,function(e){var t=a.get(i[e]);s[e]=t},this)},this);this._iconConfigs=s;return s},createIconNode:function(e,t){var a=this.get("blockIcon");var i=new a(e);i.set("categoryLabel",t);i.set("defaultContentModel",e.defaultContentModel);return i},handleIconSelect:function(e,t,a){var i=this.createIconNode(e,t);this.createBlock(i,a);this.hideMenu()},handleReactDrop:function(){var e=l.DD.DDM.activeDrag.get("node");var t=e.getAttribute("data-icon-id");var a=e.getAttribute("data-category-label");var i=this._iconConfigs[t];var s=this.createIconNode(i,a);e.hasClass("sqs-destroyme")&&s.set("isReactDeleting",true);this.createBlock(s,"dragDrop")},destructor:function(){this.get("contentBox").unplug(l.SQS.LayoutEngine.Plugin.ScrollLock);this._search=null;this._selectedIcon=null;this._noResultBlock=null;this._hideOnScroll&&this._hideOnScroll.detach()},_onMouseDownOutside:function(e){this.get("align.node")&&e.target.getDOMNode()===this.get("align.node").getDOMNode()||this.hide()},_searchFilter:function(e){l.SQS.LayoutEngine.Events.fire("layout-engine:block-menu-search-query-change",{query:e.newVal});if(e.newVal){l.Array.invoke(this._categoryLabels,"hide");this._cb.addClass("sqs-searching")}else{l.Array.invoke(this._categoryLabels,"show");this._cb.removeClass("sqs-searching")}this._selectedIcon=null;var i=[];var s="string"===typeof e.newVal?c(e.newVal.replace().trim().toLowerCase()):"";l.Array.each(this._icons,function(e){var t=[e.get("label")].concat(e.get("tags"));var a=l.Array.find(t,function(e){return"string"===typeof e&&c(e.toLowerCase()).indexOf(s)>-1});if(s&&!a)e.hide();else{i.push(e);e.show()}},this);var t=i.length>0;var a=s.length>2;if(a&&t){var n=l.Array.map(i,function(e){return e.get("label")});var r=[];for(var o=0;o<n.length;o++)-1!=n.slice(o+1).indexOf(n[o])&&r.push(n);r.length>0&&l.Array.each(i,function(e){e.get("categoryLabel").show()})}if(t){this._selectedIcon=i[0];this._noResultBlock.hide()}else this._noResultBlock.show()},_selectIcon:function(){if(this._selectedIcon){var e=this._selectedIcon.get("boundingBox");this.hideMenu();this.createBlock(e,"search");this._selectedIcon=null}},_getInsertableBlockItems:function(){throw new Error("_getInsertableBlockItems not implemented")},_getBlockLabelInstance:function(e){return l.SQS.LayoutEngine.Block.Label},_renderMenuIcons:function(e){var n=this.get("editController").getRenderableBlocks(this.get("editMode"));var r=this.get("blockIcon");var o=l.merge(u.BlockTypeKeys,d);this._categoryLabels=[];l.Array.each(e,function(e){var i=this.add({type:this._getBlockLabelInstance(e),label:e.label,meta:e.meta||{},render:this._cb}).item(0);var s=l.Node.create('<div class="sqs-block-icon-container"></div>');this._categoryLabels.push(i);this._cb.append(s);l.Array.each(e.items,function(e){var t=n.get(o[e]);var a=new r(t);a.set("categoryLabel",i);a.set("defaultContentModel",t.defaultContentModel);a.render(s);this._icons.push(a)},this)},this);this._noResultBlock=l.Node.create('<div class="sqs-no-results-block">'+this.get("noResultsText")+"</div>");this._cb.append(this._noResultBlock);this._noResultBlock.hide()},_getDefaultDropInfo:function(){var e=this.get("targetNode");return{node:e,region:e.get("region"),direction:this.get("direction"),layout:this.get("layoutNode").LayoutEditor}},_onScroll:function(){var s=this._cb.get("region").top;var e=l.Array.map(this._categoryLabels,function(e,t){var a=e.get("boundingBox").get("region");var i=s-a.top;return i>0?i:null},this);for(var t=this._categoryLabels.length-1;t>=0;t--)this._categoryLabels[t].get("contentBox").setStyle("top",e[t])},show:function(){l.Lang.isValue(this.get("zIndexBase"))&&this.set("zIndex",this.get("zIndexBase")+1);this._cb.show();e.superclass.show.call(this);this._bindHideOnScroll();g.isFeatureEnabled(h.BLOCK_SELECTOR_REDESIGN)?this.renderReactBlockSelector(true):this.autoFocusSearch()},autoFocusSearch:function(){if(s())return;l.later(50,this,function(){this._search.focus()})},hide:function(){e.superclass.hide.call(this);this._cb.show();this._search&&this._search.clearSearch(false);this._cb.set("scrollTop",0);l.Lang.isValue(this._hideOnScroll)&&l.Lang.isFunction(this._hideOnScroll.detach)&&this._hideOnScroll.detach();g.isFeatureEnabled(h.BLOCK_SELECTOR_REDESIGN)&&this.renderReactBlockSelector(false)},hideMenu:function(){this._cb.hide();this._cb.set("scrollTop",0);l.DD.DDM.activeDrag||this.hide()},_bindHideOnScroll:function(){var t=this.get("layoutScrollNode");var a=t.get("scrollTop");var i=15;l.Lang.isValue(this._hideOnScroll)&&l.Lang.isFunction(this._hideOnScroll.detach)&&this._hideOnScroll.detach();this._hideOnScroll=t.on("scroll",function(){var e=Math.abs(t.get("scrollTop")-a);if(e>i){this._hideOnScroll.detach();this.hide()}},this)}},{CSS_PREFIX:"sqs-layout-insert-block-menu",ATTRS:{render:{value:true},blockIcon:{valueFn:function(){return l.SQS.LayoutEngine.LayoutInsert.BlockIconBase}},constrain:{value:true},tabIndex:{value:0},visible:{value:false},noResultsText:{value:n("No Results")},width:{value:420},height:{value:542},zIndex:{value:30011},direction:{value:"top"},targetNode:{getter:function(e){if(e)return e;var t=this.get("layoutNode");if(t&&t.getDOMNode()){var a=t.get("children").filter(".sqs-row");return a.item(a.size()-1)}}},scrollNode:{getter:function(e){var t=this.get("layoutNode").ancestor(".sqs-layout-scroll");return t||l.one(i(l.config.doc))}},layoutScrollNode:{getter:function(){var e=this.get("layoutNode").ancestor(".sqs-layout-scroll");return e||l.one(l.config.doc)}},layoutNode:{},zIndexBase:{}}})},"1.0",{requires:["@sqs/layout-engine/block-label","@sqs/layout-engine/block-search","@sqs/layout-engine/events","@sqs/layout-engine/layout-insert-block-icon-base","@sqs/layout-engine/layout-insert-block-menu-mixin","@sqs/layout-engine/plugin-scroll-lock","array-invoke","event-outside","overlay","widget-parent"]})},"./src/main/webapp/universal/scripts-layout-engine/layout-insert/marker.js":function(e,t,a){var s=a("./src/main/webapp/frontend/packages/enums/Flag.js");var n=a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts");YUI.add("@sqs/layout-engine/layout-insert-marker",function(d){var p=d.SQS.LayoutEngine.Layout.Utils.convertToValueInPixel;var a=d.namespace("SQS.LayoutEngine.Layout").InsertMarker=d.Base.create("insert-marker",d.Overlay,[],{renderUI:function(){this.get("boundingBox").addClass("redesign-insert-marker");this.constrainNode=this._createConstrainNode();d.soon(this.positionConstrainNode.bind(this))},bindUI:function(){var a=this.get("boundingBox");var i=n.isFeatureEnabled(s.PAGE_INTERACTIONS_IMPROVEMENTS);var e=this.getClassName("hover-redesign");a.toggleClass(e,i);this.after("infoChange",this._syncInfoToMarker,this);this.after("lockedChange",this._onLockedChange,this);this.on("floatChange",function(e){var t=i?this.getClassName("float-redesign"):this.getClassName("float");a.toggleClass(t,!!e.newVal)},this);d.DD.DDM.on("insertMarker|ddm:end",this.hide,this)},_onLockedChange:function(e){e.newVal?this.hide():this.show()},positionConstrainNode:function(){if(!this.constrainNode)return;var e=this.get("boundingBox");if(!e||!e.inDoc())return;var t=e.get("parentNode");if(!t)return;var a=t.ancestor(".sqs-layout",true)||d.one(".sqs-layout.sqs-editing");if(!a)return;var i=d.one(d.config.doc.body);var s=a.ancestor(".sqs-layout-wrapper")||a.ancestor(".sqs-content-manager")||i;var n=s.get("region");var r=s===i?0:n.top;this.constrainNode.setStyles({left:Math.max(n.left,0),right:Math.max(d.config.win.innerWidth-n.right,0),top:Math.max(r,0),bottom:Math.max(d.config.win.innerHeight-n.bottom,0),height:"auto",zIndex:this.get("constrainZIndex")})},_createConstrainNode:function(){var e=a.CSS_PREFIX+"-constrain";n.isFeatureEnabled(s.PAGE_INTERACTIONS_IMPROVEMENTS)&&(e+=" redesign-insert-marker");var t=d.Node.create('<div class="'+e+'"></div>');d.one("body").append(t);return t},_syncInfoToMarker:function(){var e=this.get("info");if(!e||!e.node){console.warn("There is no marker info nor info node.");return}if(this.get("locked"))return;var t=e.node;var a=e.type;var i=e.direction;var s=e.region;var n=d.WidgetPositionAlign;var r=false;var o;var l;var c={node:t,points:[]};switch(i){case"top":c.points=[n.LC,n.TL];r=true;break;case"bottom":c.points=[n.LC,n.BL];r=true;break;case"left":c.points=[n.TC,n.TL];break;case"right":c.points=[n.TC,n.TR]}var u;if(e.isSelf){u=d.DD.DDM.activeDrag.get("dragNodeRegion");l=u.width;o=u.height;c.points=[n.TL,n.TL];this.set("float",true)}else if(e.shouldFloat){u=d.DD.DDM.activeDrag.get("dragNodeRegion");l=s.width/2;o=u&&0!==u.height?l*(u.height/u.width):l*(9/16);c.points[0]="left"===i?n.TL:n.TR;this.set("float",true)}else{if(r){o=this.get("lineThickness");l="content"===a?t.ancestor(".sqs-block").get("clientWidth"):s.width}else{o="column"===a?s.height:s.bottom-s.top;l=this.get("lineThickness")}this.set("float",false)}this.setAttrs({width:l,height:o,align:c})},destructor:function(){this.constrainNode&&this.constrainNode.remove();d.DD.DDM.detach("insertMarker|*")},_getRegion:function(e){var t;if(e){e=d.Node.one(e);e&&(t=e.get("region"))}else{t=this._posNode.get("viewportRegion");t.height=d.config.win.innerHeight;t.bottom=t.height+d.config.win.pageYOffset}return t},_getCollapsedVerticalMargin:function(e,t,a){var i=0;switch(a){case"top":i=Math.max(p(t.getStyle("marginBottom")),p(e.getStyle("marginTop")));break;case"bottom":i=Math.max(p(e.getStyle("marginBottom")),p(t.getStyle("marginTop")))}return i},move:function(){var e="xy";var t=arguments;var a=d.Lang.isArray(t[0])?t[0]:[t[0],t[1]];var i=d.one("html");if(i.hasClass("scrolling"))return;var s=this.get("info");var n=s.node;var r="content"===s.type;if(r){var o=n.ancestor(".sqs-block");var l;var c=0;var u=0;o&&(c="right"===s.direction?p(o.getStyle("paddingRight")):-1*p(o.getStyle("paddingLeft")));if("top"===s.direction||this.get("float")){l=n.previous();u=null===l&&o?-1*p(o.getStyle("paddingTop")):l?-1*this._getCollapsedVerticalMargin(n,l,s.direction)/2:-1*p(n.getStyle("marginTop"))/2}else if("bottom"===s.direction){l=n.next();u=null===l&&o?p(o.getStyle("paddingBottom")):l?this._getCollapsedVerticalMargin(n,l,s.direction)/2:p(n.getStyle("marginBottom"))/2}a=[a[0]+c,a[1]+u]}this.set(e,a)}},{CSS_PREFIX:"sqs-layout-insert-marker",ATTRS:{zIndex:{value:8950},constrainZIndex:{valueFn:function(){this.get("zIndex")},validator:function(e){return d.Lang.isString(e)||d.Lang.isNumber(e)}},info:{value:{node:null,type:"",direction:"",region:null,shouldFloat:false,isSelf:false},lazyAdd:false},locked:{value:false},lineThickness:{valueFn:function(){return d.UA.mobile?2:3}}}})},"1.0",{requires:["node","event","overlay","@sqs/layout-engine/layout-utils"]})},"./src/main/webapp/universal/scripts-layout-engine/layout-insert/point-controller.js":function(e,t,a){var i=a("./common/temp/node_modules/lodash/debounce.js");var s=a("./src/main/webapp/frontend/packages/enums/Flag.js");var n=a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts");function r(a){return function(e){for(var t=e.target;t&&t!==this;t=t.parentNode)if(t.classList&&t.classList.contains("sqs-block")){a(e);break}}}YUI.add("@sqs/layout-engine/layout-insert-point-controller",function(u){u.namespace("SQS.LayoutEngine.Layout");u.SQS.LayoutEngine.Layout.InsertPointController=u.Base.create("insertPointController",u.Base,[],{initializer:function(){this._insertPointGroups=[];this._insertPointsByNodeId={};this._layoutNodesToAlign=[];this._resizeEmitter=new u.SQS.LayoutEngine.ResizeEmitter;this.after("visibleChange",this._afterVisibleChange,this);this.after("enabledChange",this._afterEnabledChange,this)},destructor:function(){this.debouncedToggleDisabled.cancel();this._disable();this._resizeEmitter.destroy();this._debounceAlignInsertPoints.cancel();this.destroyAllInsertPoints()},registerInsertPoint:function(e,t){if(!t){console.log("[IPC] No layout node found.");e.destroy();return}var a=this._findInsertPointGroup(t);u.Lang.isNull(a)&&(a=this._initNewInsertPointGroup(t));a.insertPoints.push(e);var i=n.isFeatureEnabled(s.PAGE_INTERACTIONS_IMPROVEMENTS);i&&this._buildInsertPointsByNodeIdObject();this._setInsertPointNodes();a.events.push(e.after("insertPointsChange",function(){this._setInsertPointNodes();i&&this._buildInsertPointsByNodeIdObject()},this))},_buildInsertPointsByNodeIdObject:function(){this._insertPointsByNodeId={};u.each(this._insertPointGroups,function(e){u.each(e.insertPoints,function(e){this._attachInsertPointsByBlockObject(e.get("insertPoints"))},this)},this)},_attachInsertPointsByBlockObject:function(e){u.Array.each(e,function(a){u.each(a.triggerNodes,function(e){if(!e.inDoc())return;var t=e.generateID();this._insertPointsByNodeId[t]=this._insertPointsByNodeId[t]||[];this._insertPointsByNodeId[t].push(a.node)},this)},this)},deregisterInsertPoint:function(e,t){var a=n.isFeatureEnabled(s.PAGE_INTERACTIONS_IMPROVEMENTS);var i=this._findInsertPointGroup(t);if(!u.Lang.isNull(i)){i.insertPoints.remove(e);a&&this._removeInsertPointsFromBlockObject(e.get("insertPoints"));0===i.insertPoints.length&&this._deleteInsertPointGroup(i)}},_removeInsertPointsFromBlockObject:function(e){u.Array.each(e,function(s){u.each(s.triggerNodes,function(e){var t=e.generateID();this._insertPointsByNodeId[t]=this._insertPointsByNodeId[t]||[];var a=this._insertPointsByNodeId[t];var i=a.indexOf(s.node);-1!==i&&a.splice(i,1)},this)},this)},_findInsertPointGroup:function(t){return u.Array.find(this._insertPointGroups,function(e){return e.layoutNode===t})},_initNewInsertPointGroup:function(e){var t={layoutNode:e,insertPoints:[],events:[]};e.LayoutBuilder&&t.events.push(e.LayoutBuilder.on("widget:contentUpdate",function(){this.alignInsertPoints(e)},this));e.LayoutEditor&&t.events.push(e.LayoutEditor.on("destroy",function(){this.destroyAllInsertPoints(e)},this));this._insertPointGroups.push(t);return t},_deleteInsertPointGroup:function(e){u.Array.each(e.events,function(e){e.detach()});this._insertPointGroups.remove(e)},destroyAllInsertPoints:function(t){var e=this._insertPointGroups;e.length>1&&u.Lang.isValue(t)&&(e=u.Array.filter(e,function(e){return e.layoutNode===t}));u.Array.each(e,function(e){u.Array.each(e.insertPoints,function(e){e.destroy()});this._deleteInsertPointGroup(e)},this)},alignInsertPoints:function(e,t){u.Lang.isValue(e)&&-1===u.Array.indexOf(this._layoutNodesToAlign,e)&&this._layoutNodesToAlign.push(e);t?this._alignInsertPoints(true):this._debounceAlignInsertPoints()},_alignInsertPoints:function(t){if(!t&&!this.get("enabled"))return;var e=this._insertPointGroups;var a=this._layoutNodesToAlign;e.length>1&&a.length&&(e=u.Array.filter(e,function(e){return u.Array.indexOf(a,e.layoutNode)>-1}));u.Array.each(e,function(e){u.Array.each(e.insertPoints,function(e){e.align(t)})},this);this.set("visible",true);this._layoutNodesToAlign=[]},_debounceAlignInsertPoints:i(function(){this._alignInsertPoints()},50),_setInsertPointNodes:function(){this.set("insertPointNodes",u.all(".sqs-layout-insert-point"))},hide:function(){this.set("visible",false)},show:function(){this.set("visible",true);this.alignInsertPoints()},_afterEnabledChange:function(e){e.newVal?this._enable():this._disable()},_afterVisibleChange:function(e){this.toggleVisible(e.newVal)},toggleVisible:function(e){u.one("html").toggleClass("sqs-hide-insert-points",!e)},debouncedToggleDisabled:i(function(e){this._toggleDisabled(e)},30),_toggleDisabled:function(e){if(e){this.disable();return}u&&u.config&&u.config.doc&&!u.config.doc.querySelector(".sqs-block-editing:not(.sqs-block-html)")&&this.enable()},disable:function(){this.setAttrs({visible:false,enabled:false})},_disable:function(){this._mousemove&&this._mousemove.detach();if(this._mouseenter){u.config.doc.removeEventListener("mouseenter",this._mouseenter);this._mouseenter=null}if(this._mouseleave){u.config.doc.removeEventListener("mouseleave",this._mouseleave);this._mouseleave=null}if(this._onResizeStart){this._onResizeStart.detach();this._onResizeStart=null}if(this._onResizeEnd){this._onResizeEnd.detach();this._onResizeEnd=null}},enable:function(){this.set("enabled",true)},_enable:function(){this.alignInsertPoints();if(n.isFeatureEnabled(s.PAGE_INTERACTIONS_IMPROVEMENTS)){this._mouseenter=u.config.doc.addEventListener("mouseenter",r(this._onTriggerNodeMouseenter.bind(this)),true);this._mouseleave=u.config.doc.addEventListener("mouseleave",r(this._onTriggerNodeMouseleave.bind(this)),true);u.all(".sqs-block:hover").each(function(e){var t=e.generateID();this._showInsertPointsForNodeId(t)},this)}else this._mousemove=u.one(u.config.doc).on("mousemove",u.throttle(this._onMouseMove,100),this);this._onResizeStart=this._resizeEmitter.on("resize:start",this.hide,this);this._onResizeEnd=this._resizeEmitter.on("resize:end",this.show,this)},_onTriggerNodeMouseenter:function(e){var t=e.target.id;this._showInsertPointsForNodeId(t)},_showInsertPointsForNodeId:function(e){var t=this._insertPointsByNodeId[e]||[];u.each(t,function(e){e.addClass("sqs-fullsize")})},_onTriggerNodeMouseleave:function(e){var t=e.target.id;this._insertPointsByNodeId[t]&&u.each(this._insertPointsByNodeId[t],function(e){e.removeClass("sqs-fullsize")})},_onMouseMove:function(e){var n=e.pageX;var r=e.pageY;var o=80;var l=80;var c=12;u.Lang.isValue(this.get("insertPointNodes"))&&this.get("insertPointNodes").each(function(e){var t=e.getXY();var a=n-(t[0]+c);var i=r-(t[1]+c);var s;s=Math.abs(i)<=l&&"row"===e.getData("ipType")?1:Math.floor(1/(Math.pow(a,2)/Math.pow(o,2)+Math.pow(i,2)/Math.pow(l,2)));if(s!==e.lastScale){e.toggleClass("sqs-fullsize",s>=1);e.set("dataset.visible",s>=1?"true":null);e.lastScale=s}})}},{ATTRS:{enabled:{value:false},visible:{value:false},insertPointNodes:{}}});u.namespace("SQS.LayoutEngine.Singletons");u.SQS.LayoutEngine.Singletons.InsertPointController=new u.SQS.LayoutEngine.Layout.InsertPointController},"1.0",{requires:["base","node","event","@sqs/layout-engine/resize-emitters","@sqs/layout-engine/layout-insert-block-menu-web-base"]})},"./src/main/webapp/universal/scripts-layout-engine/layout-insert/point.js":function(e,t,a){var i=a("./src/main/webapp/universal/scripts-layout-engine/shared/constants/Constants.js");var v=a("./src/main/webapp/frontend/packages/enums/Flag.js");var b=a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts");YUI.add("@sqs/layout-engine/layout-insert-point",function(m){var f=false;m.namespace("SQS.LayoutEngine.Layout");var h=m.SQS.LayoutEngine.Layout.InsertPoint=m.Base.create("LayoutInsertPoint",m.Plugin.Base,[],{initializer:function(){var e=this.get("host");this._blockNode=e.get("boundingBox");this.after("insertPointsChange",this._bindInsertPointEvents);this._bindInsertPointEvents();this.onHostEvent("destroy",function(){this.get("controller").alignInsertPoints(this._getLayoutNode())},this);this.onHostEvent("resized",function(e){"columnChanged"===e.source&&this.align(true)},this);this.afterHostEvent("dropped",this._getInsertPoints,this);this.get("controller").get("enabled")&&this.align();this.registerWithController();this.publish("click",{broadcast:2,emitFacade:true})},destructor:function(){this._clearInsertPointNodes();this._clearInsertPointEvents();this.deregisterWithController()},_getEditMode:function(){return this.get("host").get("editMode")},_getLayoutNode:function(){var e=this.get("layoutNode");if(!e){e=this._blockNode.ancestor(".sqs-layout");e&&this.set("layoutNode",e)}return e},_getNewInsertPointNode:function(e,t){var a;var i=h.CSS_PREFIX;if(b.isFeatureEnabled(v.PAGE_INTERACTIONS_IMPROVEMENTS)){var s=[i,"redesigned-insert-point",i+"-type-"+e,i+"-position-"+t].join(" ");a=m.DOM.create('<div class="'+s+'"><button class="'+i+'-button"><span class="insert-point-icon"></span></button><span class="sqs-layout-insert-point-line"></span></div>')}else a=m.DOM.create('<div class="'+i+'"></div>');this._docFrag.appendChild(a);return m.one(a)},_buildInsertPointConfig:function(e){var t=e.type;var a=e.anchorNode;var i=e.position;var s=e.lastIP;var n=e.contentNodeIndex;var r=this._getNewInsertPointNode(t,i);var o=[];o.push(a.ancestor(".sqs-block",true));var l=b.isFeatureEnabled(v.PAGE_INTERACTIONS_IMPROVEMENTS);if("block"===t&&!l){if("top"===i){var c=a.previous(".sqs-block");c&&o.push(c)}if("bottom"===i){var u=a.next(".sqs-block");u&&o.push(u);r.addClass(h.CSS_PREFIX+"-topmost")}}if("row"===t){if("top"===i){var d=a.previous();d&&(d.hasClass("sqs-block")||d.hasClass("sqs-row"))&&o.push(d)}if("bottom"===i){var p=a.next();p&&(p.hasClass("sqs-block")||p.hasClass("sqs-row"))&&o.push(p)}}r.setData("ipType",t);f&&console.log("[IP] creating an IP for "+t+" "+i,"lastIP?: "+s);return{type:t,position:i,alignTo:a,node:r,triggerNodes:o,offset:"row"===t?[-10,0]:null,contentNodeIndex:n}},_getInitInsertPoints:function(){var e=this.get("host");var t=[];var a=this._getLayoutNode();if(!a||!e||!e.get("boundingBox")){console.warn("Could not init insert points",this.getAttrs());return t}this._blockNode||(this._blockNode=e.get("boundingBox"));this._docFrag=m.config.doc.createDocumentFragment();var i=this._blockNode;var s=i.ancestor(".sqs-col");var n=s?s.ancestor(".sqs-row"):null;if(!s){f&&console.log("[IP] Block is not inserted into a column");return}var r=b.isFeatureEnabled(v.PAGE_INTERACTIONS_IMPROVEMENTS);if(r){t.push(this._buildInsertPointConfig({type:"block",anchorNode:i,position:"top"}));var o=this._isLastBlockInColumn()&&this._isLastRowInLayout(n);t.push(this._buildInsertPointConfig({type:"block",anchorNode:i,position:"bottom",lastIP:o}))}else{t.push(this._buildInsertPointConfig({type:"block",anchorNode:i,position:"top"}));if(this._isInMultiColumnRow(s)){this._isLastBlockInColumn()&&t.push(this._buildInsertPointConfig({type:"block",anchorNode:i,position:"bottom"}));if(this._isFirstColumnInRow(s)){this._isFirstBlockInColumn()&&t.push(this._buildInsertPointConfig({type:"row",anchorNode:n,position:"top"}));this._isLastBlockInColumn()&&t.push(this._buildInsertPointConfig({type:"row",anchorNode:n,position:"bottom",lastIP:this._isLastRowInLayout(n)}))}}else this._isLastBlockInColumn()&&this._isLastRowInLayout(n)&&t.push(this._buildInsertPointConfig({type:"block",anchorNode:i,position:"bottom",lastIP:true}))}this.get("divideSelectors")&&(t=t.concat(this._getDivideInsertPoints()));var l=a.one("."+h.CSS_PREFIX+"-container");if(!l){l=m.Node.create('<div class="'+h.CSS_PREFIX+'-container"></div>');a.appendChild(l)}l.appendChild(this._docFrag);this._docFrag=null;return t},_getAlignNodeForInsertPoint:function(e){var t=e.alignTo;if(t&&t.inDoc())return t;if(e.contentNodeIndex)return this._getDivideNodeAtIndex(e.contentNodeIndex);return null},_isFirstColumnInRow:function(e){return!e.previous(".sqs-col")},_isInMultiColumnRow:function(e){return e.siblings(".sqs-col").size()>0},_isLastRowInLayout:function(e){while(e){if(e.next(".sqs-row, .sqs-block"))return false;e=e.ancestor(".sqs-row",false,".sqs-layout")}if(this._blockNode.next(".sqs-row"))return false;return true},_isFirstBlockInColumn:function(){return!this._blockNode.previous(".sqs-block:not(.sqs-destroyme)")},_isLastBlockInColumn:function(){return!this._blockNode.next(".sqs-block:not(.sqs-destroyme)")},_getDivideInsertPoints:function(){var e=this.get("divideSelectors");var t=this._savedDivideNodes=this._blockNode.all(e);var a=[];t.size()>1&&t.each(function(e,t){0!==t&&a.push(this._buildInsertPointConfig({type:"content",anchorNode:e,position:"top",contentNodeIndex:t}))},this);return a},_getDivideNodeAtIndex:function(e){var t=this.get("divideSelectors");var a=this._savedDivideNodes=this._blockNode.all(t);return a.item(e)},_getInsertPoints:function(e){var t=this._blockNode;var a=t.hasClass("sqs-float-left")||t.hasClass("sqs-float-right");var i=this._isInMultiColumnRow(t.ancestor(".sqs-col"));var s=this.get("insertPoints")||[];var n=this.get("divideSelectors");var r=n?t.all(n):null;var o=this.get("host").get("editController");var l=o.getInsertMenu(this._getEditMode());if(m.Lang.isValue(l)&&l.get("visible"))return s;s.length||a?a?s=[]:!r||this._savedDivideNodes&&this._listsAreEqual(r,this._savedDivideNodes)?(e||i)&&(s=this._getInitInsertPoints()):s=this._getInitInsertPoints():s=this._getInitInsertPoints();this.get("insertPoints")!==s&&this.set("insertPoints",s);return s},_listsAreEqual:function(e,t){return e.size()===t.size()&&!e.some(function(e){return-1===t.indexOf(e)})},_bindInsertPointEvents:function(){this._insertPointEvents||(this._insertPointEvents=[]);m.Array.each(this.get("insertPoints"),function(t){var e=t.node;if(!e||!e.getDOMNode())return;this._insertPointEvents.push(e.on("click",function(e){this._onClick(t)},this));this._insertPointEvents.push(e.on("mouseenter",function(){this._onMouseEnter(t)},this));this._insertPointEvents.push(e.on("mouseleave",this._onMouseLeave,this))},this)},_clearInsertPointNodes:function(e){e=e||this.get("insertPoints")||[];m.Array.each(e,function(e){e.node&&e.node.getDOMNode()&&e.node.remove()})},_clearInsertPointEvents:function(){if(this._insertPointEvents)for(var e=0,t=this._insertPointEvents.length;e<t;e++)this._insertPointEvents[e].detach();this._insertPointEvents=[]},align:function(e){var t=this._blockNode;if(!t||!t.getDOMNode()){this.destroy();return}if(!e&&!this.get("controller").get("enabled"))return;var a=this._getInsertPoints(e);var i=a.length;a=m.Array.filter(a,function(e){var t=this._getAlignNodeForInsertPoint(e);if(!t||!t.ancestor()){console.warn("No node to align insert point to.");e.node.remove();return false}return true},this);var g=b.isFeatureEnabled(v.PAGE_INTERACTIONS_IMPROVEMENTS);var s=m.Array.map(a,function(e){var t=this._getAlignNodeForInsertPoint(e);var a="bottom"===e.position?"bottom":"top";var i=e.node.get("region");var s="content"===e.type;var n=!g&&s?this._blockNode:t;var r=n.get("region").left;var o=t.get("region")[a];s&&t.previous()&&(o-=(o-t.previous().get("region").bottom)/2);var l=t.get("region").width;if(g){var c=m.Array.some(e.triggerNodes,function(e){return e._node.matches(":hover")},this);e.node.toggleClass("sqs-fullsize",c)}else{r-=i.width/2;o-=i.height/2;var u=getComputedStyle(e.node._node);var d=parseFloat(u.getPropertyValue("left"));d=isNaN(d)?0:d;var p=e.node._node.getBoundingClientRect().x;var h=p-d;h+r<0&&(r=-h);if(e.offset){r+=e.offset[0];o+=e.offset[1]}}f&&console.log("[insert-point align] (x: "+r+", y: "+o+")",t._node);return{node:e.node._node,width:l,xy:[r,o]}},this);this._massSetXY(s);a.length!==i&&this.set("insertPoints",a)},_massSetXY:function(e){var t=b.isFeatureEnabled(v.PAGE_INTERACTIONS_IMPROVEMENTS);var a=m.DOM;var i="position";var s="top";var n="left";var r="width";m.Array.each(e,function(e){e.pos=a.getStyle(e.node,i);e.delta=a._getOffset(e.node);e.currentXY=a.getXY(e.node)});m.Array.each(e,function(e){if(e.node&&e.xy){null!==e.xy[0]&&a.setStyle(e.node,n,e.xy[0]-e.currentXY[0]+e.delta[0]+"px");null!==e.xy[1]&&a.setStyle(e.node,s,e.xy[1]-e.currentXY[1]+e.delta[1]+"px");t&&a.setStyle(e.node,r,e.width+"px")}},this)},registerWithController:function(){this.get("controller").registerInsertPoint(this,this._getLayoutNode())},deregisterWithController:function(){this.get("controller").deregisterInsertPoint(this,this._getLayoutNode())},_onMouseEnter:function(e){var t=this._getAlignNodeForInsertPoint(e);if(!t||!t.inDoc()){console.warn("no alignNode",t);this.align();return}var a=b.isFeatureEnabled(v.PAGE_INTERACTIONS_IMPROVEMENTS);if(!a){var i=e.position;var s=e.type;var n=this.get("host").get("editController");n.setInsertMarkerLayout(this._getLayoutNode());n.alignInsertMarker({node:t,direction:i,region:t.get("region"),type:s})}this._hideOtherInsertPoints()},_onMouseLeave:function(){this.get("host").get("editController").hideInsertMarker();this._unhideOtherInsertPoints()},_onClick:function(t){this.fire("click",{backend:m.Object.getValue(m.config.win,"Static.IN_BACKEND".split("."))});var a=h.CSS_PREFIX+"-active";t.node.addClass(a);this.openBlockMenu(t);this.toggleInsertPointsDisabled(true);var e=this.get("host").get("editController");var i=e.getInsertMenu(this._getEditMode());i.after("insertPoint|visibleChange",function(e){if(!e.newVal){i.detach("insertPoint|visibleChange");t.node.removeClass(a);this.toggleInsertPointsDisabled(false)}},this);this._logMaxNumBlocks()},_hideOtherInsertPoints:function(){m.one("html").addClass("sqs-insert-point-focused")},_unhideOtherInsertPoints:function(){m.one("html").removeClass("sqs-insert-point-focused")},_logMaxNumBlocks:function(){var e=this._getLayoutNode().all(".sqs-block:not(.sqs-block-html,.sqs-destroyme)").size();e>i.MAX_BLOCKS_PER_LAYOUT&&console.warn("Appears to have "+e+" blocks in this layout.")},openBlockMenu:function(e){var t={align:{node:e.node,points:[m.WidgetPositionAlign.LC,m.WidgetPositionAlign.RC]},targetNode:this._getAlignNodeForInsertPoint(e),direction:e.position,type:e.type,layoutNode:this._getLayoutNode(),scrollNode:this._getLayoutNode().LayoutEditor.get("scrollNode"),editMode:this._getEditMode()};m.SQS.LayoutEngine.Events.fire("layout-engine:open-block-menu",t)},toggleInsertPointsDisabled:function(e){var t=this.get("host").get("editController");e?t.disableInsertPoints():t.enableInsertPoints()}},{NS:"insertPoint",CSS_PREFIX:"sqs-layout-insert-point",ATTRS:{insertPoints:{valueFn:"_getInitInsertPoints",setter:function(e){this._clearInsertPointNodes();this._clearInsertPointEvents();return e}},layoutNode:{value:null,validator:function(e){return null===e||m.instanceOf(e,m.Node)}},controller:{valueFn:function(){return m.SQS.LayoutEngine.Singletons.InsertPointController}},divideSelectors:{value:""}}})},"1.0",{requires:["plugin","@sqs/layout-engine/events","@sqs/layout-engine/layout-insert-point-controller"]})},"./src/main/webapp/universal/scripts-layout-engine/layout/block-focus-handler.js":function(e,t,a){var n=a("./common/temp/node_modules/lodash/get.js");var l=a("./src/main/webapp/universal/scripts-layout-engine/shared/utils/ancestor.js");var c=a("./src/main/webapp/frontend/packages/enums/Flag.js");var u=a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts");YUI.add("@sqs/layout-engine/layout-block-focus-handler",function(r){r.namespace("SQS.LayoutEngine.Singletons");r.namespace("SQS.LayoutEngine.Block");var i=false;var s=["#avpw_holder",".dialog-choose-image-picker-url",".dialog-content-type.flyout",".dialog-minimal-video-editor.flyout",".dialog-screen-overlay",".image-picker-overlay",".ReactModal__Overlay",".sqs-image-picker",".sqs-item-view",".sqs-prevent-block-focus-change",".sqs-widgets-confirmation",".sqs-widgets-confirmation-overlay",".sqs-wysiwyg-toolbar-mobile",".sqsp-tooltip",".workflow-flyout",".CCModalOverlay"].join(", ");var o=r.SQS.LayoutEngine.Block.BlockFocusHandler=r.Base.create("BlockFocusHandler",r.Base,[],{mouseMoveThreshold:10,initializer:function(){var e=r.SQS.LayoutEngine._hDocFocus;this._ensureDefaultFocusIsRemoved();if(!e){e={};e=r.SQS.LayoutEngine._hDocFocus=r.one(r.config.doc).on("gesturemovestart",r.bind(this._onDocMouseDown,this));r.config.doc.addEventListener("click",this._captureClicks.bind(this),{capture:true});e.listeners={count:0}}e.listeners[r.stamp(this,true)]=true;e.listeners.count++;u.isFeatureEnabled(c.PAGE_INTERACTIONS_IMPROVEMENTS)&&(this._onScroll=r.on("scroll",r.throttle(r.bind(this._checkFocusedBlockInView,this),30)))},_captureClicks:function e(t){if(this.isClosingDialog){if(t.target.className.indexOf("confirmation-button")>-1)return;t.preventDefault();t.stopImmediatePropagation();t.stopPropagation()}},isSquarespaceApp:function(){return r.Object.hasKey(window,"MOBILEAPP")},_getBlockDialog:function(e){return n(e,"blockEditor.configDialog")},_isDialogOpen:function(e){var t=this._getBlockDialog(e);return t&&t.get("visible")},_getBlockFromNode:function(e){var t=r.Lang.isValue(e)?l(e,".sqs-block",true):null;return r.Widget.getByNode(t)},_getContentItemFromNode:function(e){var t=null;r.Lang.isValue(e)&&(t=l(e,".sqs-html, .sqs-image",true,".sqs-block"));return r.Widget.getByNode(t)},getCurrentlyFocused:function(){return{block:o._activeBlock,content:o._activeContentItem,target:o._activeTarget}},_ensureDefaultFocusIsRemoved:function(){r.Widget._hDocFocus&&r.Widget._hDocFocus.detach()},mouseUpPropagationStopped:function(e){this.fire("mouseUpStopped",e)},preventBlockFocus:function(){this._detachMouseEvents()},_isSelectBlockEvent:function(e){return e&&("macintosh"===r.UA.os&&e.metaKey||"macintosh"!==r.UA.os&&e.ctrlKey)},_isFocusMaintainingEvent:function(e){return e&&l(e.target,s,true)},_isActiveBlockDialogEvent:function(e){var t=o._activeBlock;if(!e||!t)return false;if(!this._isDialogOpen(t))return false;var a=this._getBlockDialog(t).get("dialog");var i=[a].concat(a.childDialogs);for(var s=0;s<i.length;s++){var n=i[s];if(n.el&&(n.el===e.target||n.el.contains(e.target)))return true}return false},_onDocMouseDown:function(e){var t=r.one(r.config.doc);this._touchPos={x:e.pageX,y:e.pageY,scrollTop:r.config.doc.body.scrollTop};this._detachMouseEvents();this._ensureDefaultFocusIsRemoved();this._hDocMouseMove=t.on("gesturemove",r.bind(this._onDocMouseMove,this));this._hDocMouseUp=t.on("gesturemoveend",r.bind(this._onDocMouseUp,this));this._preventedMouseup=this.on("mouseUpStopped",this._onMouseUpStopped,this)},_onDocMouseMove:function(e){var t=this._touchPos;var a=this.mouseMoveThreshold;var i=Math.abs(t.x-e.pageX);var s=Math.abs(t.y-e.pageY);(i>a||s>a)&&(!this.isSquarespaceApp()&&e&&l(e.target,".sqs-block-html .sqs-wysiwyg-editor",true)?this._onDocMouseUp(e):this._detachMouseEvents())},_onDocMouseUp:function(e){this._detachMouseEvents();this._onDocFocus(e)},_onMouseUpStopped:function(e){e.target=e.details[0].target;this._onDocMouseUp(e)},_handleFocusChange:function(t){if(!t||!t.target)return;var a=this._getBlockFromNode(t.target);var i=o._activeBlock;if(!a&&!i)return;if(i===a){this._handleContentItemFocusChange(t);return}var e=function(){var e=u.isFeatureEnabled(c.PAGE_INTERACTIONS_IMPROVEMENTS);e&&i?this._blurAll():this._handleBlockFocusChange(i,a,t);i!==o._activeBlock&&this.fire("blockFocusChange",{focusedBlock:o._activeBlock,lastFocusedBlock:i})}.bind(this);this._isDialogOpen(i)?this._handleDialogOpenFocusChange(t,e):e()},_blurAll:function(){o._activeBlock&&this._blurBlock(o._activeBlock);o._activeContentItem&&this._blurChild(o._activeContentItem);o._activeTarget=null},_handleContentItemFocusChange:function(e){var t=r.Lang.isValue(e)?this._getContentItemFromNode(e.target):null;var a=o._activeContentItem;if(this._shouldBlockContentItemFocusChange(t,a,e)){a&&this._blurChild(a);t&&this._focusChild(t)}},_handleDialogOpenFocusChange:function(e,t){this.isClosingDialog=true;var a=this._getBlockDialog(o._activeBlock).get("dialog");var i=r.bind(function(){this.isClosingDialog=false;t()},this);var s=r.bind(function(){this.isClosingDialog=false},this);this._onDialogClose(a,i,s);a.close(e,false)},_handleBlockFocusChange:function(e,t,a){t&&this._focusBlock(t,a);if(e){this._blurBlock(e,a);if(!t){o._activeBlock=null;this._toggleActiveBlockHoverStatesClass(false)}}},_onDocFocus:function(e){if(this.isSquarespaceApp())return;if(this._isFocusMaintainingEvent(e))return;if(this._isActiveBlockDialogEvent(e))return;var t=e?e.target:null;o._activeTarget=t;var a=this._isSelectBlockEvent(e);a||this._handleFocusChange(e);if(!r.UA.mobile){var i=this._getBlockFromNode(t);var s=r.Lang.isValue(i)&&i.get("selected")>0;if(!s){if(!a){this._deselectAllSelectedBlocks();return}this._toggleBlockSelected(i)}}},giveBlockSyntheticFocus:function(e){var t=o._activeBlock;if(t===e)return false;this._handleBlockFocusChange(t,e)},_shouldBlockContentItemFocusChange:function(e,t,a){if(void 0===a)return true;if(l(a.target,s,true))return false;if(e===t||!r.Lang.isValue(e)&&!r.Lang.isValue(t))return false;return true},_focusBlock:function(e,t){e._domFocus=true;e._set("focused",true,{src:"ui"});if(e.get("isWidgetParent")&&r.Lang.isValue(t)){var a=this._getContentItemFromNode(t.target);this._shouldBlockContentItemFocusChange(a,o._activeContentItem,t)&&this._focusChild(a)}o._activeBlock=e;this._toggleActiveBlockHoverStatesClass(true);i&&console.log("[BlockFocusHandler]","focusing block",e._cssPrefix)},_focusChild:function(e){if(!e)return;e._domFocus=true;e._set("focused",true,{src:"ui"});e.get("boundingBox").addClass("sqs-content-item-focused");o._activeContentItem=e;i&&console.log("[BlockFocusHandler]","focusing content",e._cssPrefix)},focusBlock:function(e){var t=null;var a=null;if(e instanceof r.Node){a=e;t=r.Widget.getByNode(l(a,".sqs-block",true))}else e instanceof r.SQS.LayoutEngine.Block.Base&&(t=e);if(!r.Lang.isValue(t)){console.warn("[BlockFocusHandler] Could not find a block to focus.",e);return}this._focusBlock(t,{target:a})},_blurChild:function(e){e._domFocus=false;var t=e.get("boundingBox");if(!e.get("destroyed")&&t.getDOMNode()){e._set("focused",false,{src:"ui"});t.removeClass("sqs-content-item-focused")}else console.warn("Not blurring ... childWidget is either destroyed or its boundingBox no longer exists.");o._activeContentItem===e&&(o._activeContentItem=null)},_blurActiveNodeInside:function(e,t){var a=r.one(r.config.doc.activeElement);var i=e.get("boundingBox").getDOMNode();var s=r.Lang.isValue(a)&&r.Lang.isValue(l(a,function(e){return e===i},true));var n=t&&l(t.target,"textarea, input, [contenteditable=true]",true);s&&!n&&a.blur()},_blurBlock:function(e,t){e._domFocus=false;e.get("boundingBox").getDOMNode()?e._set("focused",false,{src:"ui"}):console.warn("Not blurring ... block boundingBox no longer exists.");e.get("isWidgetParent")&&e.each(this._blurChild,this);this._blurActiveNodeInside(e,t);if(o._activeBlock===e){o._activeBlock=null;this._toggleActiveBlockHoverStatesClass(false)}},blurBlock:function(e){e instanceof r.Node&&(e=r.Widget.getByNode(e));this._blurBlock(e)},blurAllBlocks:function(){this._onDocFocus()},_selectBlock:function(e){if(!r.Lang.isValue(e))return;if(e.get("selected")>0)return;e._set("selected",1,{src:"ui"})},_deselectBlock:function(e){if(!r.Lang.isValue(e))return;if(!e.get("selected"))return;e.get("focused")&&this._blurBlock(e);e._set("selected",0,{src:"ui"})},_toggleBlockSelected:function(e){if(!r.Lang.isValue(e))return;if(e.get("selected")>0){this._deselectBlock(e);return}this._selectBlock(e)},_deselectAllSelectedBlocks:function(){var e=r.all(".sqs-selected.sqs-block");e.size()>0&&e.each(function(e){var t=r.Widget.getByNode(e);this._deselectBlock(t)},this)},_onDialogClose:function(e,t,a){var i;var s;i=e.once("dismiss",function e(){s.detach();"function"===typeof t&&t()},this);s=e.once("cancel-close",function e(){i.detach();"function"===typeof a&&a()},this)},_checkFocusedBlockInView:function(){var e=this.getCurrentlyFocused().block;if(!e)return;e.checkBlockInView()||this._blurAll()},_detachMouseEvents:function(){this._hDocMouseMove&&this._hDocMouseMove.detach();this._hDocMouseUp&&this._hDocMouseUp.detach();this._preventedMouseup&&this._preventedMouseup.detach()},destructor:function(){r.Widget.prototype._unbindDOM.call(this);this._detachMouseEvents();this._onScroll&&this._onScroll.detach()},_toggleActiveBlockHoverStatesClass:function(e){var t=u.isFeatureEnabled(c.PAGE_INTERACTIONS_IMPROVEMENTS)?"redesigned-active-block-hover-states":"active-block-hover-states";r.one("body").toggleClass(t,e)}});r.namespace("SQS.LayoutEngine.Singletons");r.SQS.LayoutEngine.Singletons.BlockFocusHandler=new o},"1.0",{requires:["base","model","event","widget","widget-parent"]})},"./src/main/webapp/universal/scripts-layout-engine/layout/builder.js":function(e,t,a){var S=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var k=a("./src/main/webapp/universal/src/shared/utils/formatting/substituteString.js");var y=a("./src/main/webapp/frontend/packages/enums/BlockType.js");var p=a("./src/main/webapp/universal/scripts-layout-engine/shared/constants/BlockTypeStrings.js");YUI.add("@sqs/layout-engine/layout-builder",function(q){q.namespace("SQS.LayoutEngine.Layout");q.SQS.LayoutEngine.Layout.Builder=q.Base.create("LayoutBuilder",q.Plugin.Base,[q.SQS.LayoutEngine.Mixins.EventRegistrar],{initializer:function(e){this.publish("layoutRendered",{defaultFn:function(e){e.layout.all(".sqs-block:not(.yui3-dd-dragging)").getDOMNodes().forEach(function(e){q.Widget.getByNode(e).fire("layout-rendered")});q.SQS.LayoutEngine.Events.fire("layout-engine:layout-rendered",{node:e.layout})},emitFacade:true});this._blockSet=new i;this._registerEvent(this._blockSet.on("add",this._onBlockSetAdd,this),this._blockSet.on("remove",this._onBlockSetRemove,this));var t=this.get("host");var a=this._getContent();t.addClass("sqs-layout sqs-grid-"+this.get("columns"));if(!a){a=this.toJSON();this._setContent(a)}t.empty();this._cleanupImportedHTML(a);this.fromJSON(t,a)},_onBlockSetAdd:function(e){var t=e.block;t.addTarget(this);t.get("model").layout=this.get("layout");this._registerEvent(t.get("model").after("change",this.syncDOMToContent,this),t.after("destroy",function(){var e=this.get("host").LayoutEditor;e&&e.cleanGrid()},this))},_onBlockSetRemove:function(e){var t=e.block;t.removeTarget(this);this.syncDOMToContent()},fromJSON:function(e,t){var a=this.get("host");var i=new q.Parallel;this._isBuildingFromJSON=true;var s=this._fromJSON(e,t,i);this._isBuildingFromJSON=false;a.addClass("sqs-layout-rendering");setTimeout(function(){i.done(q.bind(function(){a.removeClass("sqs-layout-rendering");this.fire("layoutRendered",{layout:e});this.syncDOMToContent(true);this.fire("syncContentFromJSON")},this))}.bind(this),0);return s},_fromJSON:function(e,t,a){var i=null;var s=null;q.Lang.isString(t.collectionId)&&(i=t.collectionId);q.Lang.isString(t.contentItemId)&&(s=t.contentItemId);this.blocks=[];t.blocks?this._renderBlocks(t.blocks,e,a,i,s):t.rows?this._renderRows(t.rows,e,a,i,s):t.columns&&this._renderColumns(t.columns,e,a,i,s);return e},_renderRows:function(e,a,i,s,n){e.forEach(function(e){var t=this.createRow();a.append(t);e.collectionId=s;e.contentItemId=n;this._fromJSON(t,e,i)},this)},_renderColumns:function(a,i,s,n,r){a.forEach(function(e){var t=this.createColumn(null,a.length>1?e.span:null);i.append(t);e.collectionId=n;e.contentItemId=r;this._fromJSON(t,e,s)},this)},_renderBlocks:function(e,t,a,i,s){var n=this.get("editController").get("blogApp");e.forEach(function(e){e.collectionId=i;e.contentItemId=s;this._renderBlock(e,t,a)},this)},_renderBlock:function(e,t,a){var i;if(!q.Lang.isNumber(e.type))return;var s=p.BlockTypeKeys;var n=this.get("editController");var r=n.getRenderableBlocks(this.get("editMode"));var o=n.get("blogApp");var l=o&&o.get("isNewPost");var c=s[e.type];var u=c?r.get(c):null;if(q.Lang.isValue(u)){var d=u.isSchemaBlock?q.SQS.LayoutEngine.SchemaBase:u.ctor;i=new d({editMode:this.get("editMode"),editController:n,id:e.id,model:e.value,stack:a,type:e.type,isNewBlock:e.isNewBlock||l,collectionId:e.collectionId,contentItemId:e.contentItemId});this.registerBlock(i);this._registerEvent(i.on("save",this.syncDOMToContent,this))}else i=new q.SQS.LayoutEngine.Block.Unrenderable({editMode:this.get("editMode"),editController:n,id:e.id,model:e.value,stack:a,type:e.type});i.render(t);return i},createRow:function(e){return q.Node.create('<div class="sqs-row"></div>').setContent(e)},createColumn:function(e,t){q.Lang.isValue(t)||(t=this.get("columns"));var a=Math.min(t,this.get("columns"));return q.Node.create('<div class="sqs-col sqs-col-'+a+'"></div>').setContent(e)},toJSON:function(e){e=e||this.get("host");var i={};if(!e)throw new Error("Invalid node passed toJSON().");if(e.hasClass("sqs-row")){i.columns=[];e.get("children").filter(".sqs-col").each(function(e){i.columns.push(this.toJSON(e))},this)}else if(e.hasClass("sqs-col")||e.hasClass("sqs-layout")){e.test("[class*='sqs-col-']")?i.span=q.SQS.LayoutEngine.Layout.Utils.getValFromClass(e,"sqs-col-"):e.test("[class*='sqs-grid-']")?i.span=q.SQS.LayoutEngine.Layout.Utils.getValFromClass(e,"sqs-grid-"):e.test("[class*='columns-']")?i.span=q.SQS.LayoutEngine.Layout.Utils.getValFromClass(e,"columns-"):console.error("Cannot find r.span from the wrappers");var s=[];var n=[];e.get("children").each(function(e){if(e.test(".sqs-row")){if(0!==s.length){n.push({columns:[{span:i.span,blocks:q.clone(s,true)}]});s=[]}n.push(this.toJSON(e))}else if(e.test(".sqs-block")){var t=q.Widget.getByNode(e);var a;a=t?t.toJSON():{id:e.getAttribute("id"),type:e.getData("block-type"),value:q.JSON.parse(e.getData("block-json"))};if(!a)throw new Error("Block has no JSON.");s.push(a)}},this);if(0===n.length)i.blocks=s;else{if(0!==s.length){(q.Lang.isUndefined(i.span)||q.Lang.isNull(i.span))&&console.error("Block column span is invalid: ",i.span);n.push({columns:[{span:i.span,blocks:q.clone(s,true)}]})}i.rows=n}}if(i.rows&&0===i.rows.length||i.columns&&0===i.columns.length){delete i.rows;delete i.columns;i.blocks=[];e.get("children").filter(".sqs-block").each(function(e){var t=e.getData("block");t&&i.blocks.push(t.toJSON())},this)}return i},syncDOMToContent:function(e){if(this._isBuildingFromJSON)return;this._setContent(this.toJSON(),true===e)},syncBlockContentFromJSON:function(e,i){var t=q.SQS.LayoutEngine.Layout.Utils.getBlocksFromJSON(e);t.forEach(function(e){var t=this._blockSet.getById(e.id);t.set("editable",true);var a=JSON.stringify(t.get("model").toJSON())===JSON.stringify(e.value);if(!a){t.get("model").setAttrs(e.value,{silent:i||false});i&&t._renderBlock&&t._renderBlock()}}.bind(this));this._setContent(e)},_setContent:function(e,t){this.get("layout").setAttrs(e,{silent:t})},_getContent:function(){return this.get("layout").toJSON()},registerBlock:function(e){this._blockSet.add(e)},deregisterBlock:function(e){this._blockSet.remove(e)},deregisterBlocks:function(e){q.Array.each(e,function(e){this._blockSet.remove(e)},this)},_cleanupImportedHTML:function(e){if(e.rows)this._cleanupImportedHTML(e.rows);else if(q.Lang.isArray(e.columns))this._cleanupImportedHTML(e.columns);else if(q.Lang.isArray(e))for(var t=0;t<e.length;t++)this._cleanupImportedHTML(e[t]);else if(e.blocks){var a=[];for(var i=0;i<e.blocks.length;i++)if(e.blocks[i].type==y.HTML&&e.blocks[i].value&&e.blocks[i].value.html){var s=q.guid();var n=e.blocks[i].value.html;var r=n.toLowerCase();if((-1!==r.indexOf("<iframe")||-1!==r.indexOf("<img"))&&m(r,"<iframe")+m(r,"<img")<125){var o;var l=q.Node.create('<div id="'+s+'"/>');try{l.setContent("<div>"+n+"</div>")}catch(e){console.error("Skipping over error while trying to clean import html: ",e);continue}var c=v(l,"iframe, img");c=q.one(c);if(c.get("id")!=s){var u=f(c.get("childNodes"),l,this.get("editController").isMobileApp());a.push({find:e.blocks[i],replaceWith:u})}}}if(a.length>0)for(var d=0;d<a.length;d++){var p=a[d];var h=[e.blocks.indexOf(p.find),1];for(var g=0;g<p.replaceWith.length;g++)h.push(p.replaceWith[g]);e.blocks.splice.apply(e.blocks,h)}}function m(e,t){return e.split(t).length-1}function f(e,c,u){var d=[];var p;var h=new RegExp("/static/([a-z0-9]{24})/([a-z0-9]{24})/([a-z0-9]{24})/[a-z0-9]{13}","i");e.each(function(e){if(q.one(e).test("iframe")){p=q.SQS.LayoutEngine.PageLayoutTools.makeBlock(y.EMBED,{html:e.get("outerHTML"),resolvedBy:"manual",title:"",url:""});d.push(p)}else if(q.one(e).test("img")&&h.test(e.get("src"))){var t=c.one('img[src="'+e.getAttribute("src")+'"]');var a=null;if(t){a=t.ancestor("a");a&&a.test("a")||(a=null)}var i=e.get("src").match(h);var s=[];for(var n=0;n<i.length;n++)24==i[n].length&&s.push(i[n]);var r=null;3==s.length&&(r=s[2]);if(!r){window.trackClientError&&window.trackClientError({url:document.location.href,message:S("Error creating image block from imported html. Could not find valid objectId."),file:"builder.js",line:"LayoutBuilder._cleanupImportedHTML / makeNewBlocks"});console.error("Error cleaning up an image: ",e);return}var o="";""!=q.Lang.trim(e.get("title"))?o=e.get("title"):""!=q.Lang.trim(e.get("alt"))&&(o=e.get("alt"));var l={description:o,linkTo:a?a.getAttribute("href"):"",newwindow:!!a&&a.hasAttribute("_blank"),imageId:r};u&&(l.image={assetUrl:e.get("src"),id:r});p=q.SQS.LayoutEngine.PageLayoutTools.makeBlock(y.IMAGE,l);d.push(p)}else if(q.one(e).test("img")){p=q.SQS.LayoutEngine.PageLayoutTools.makeBlock(y.CODE,{wysiwyg:{engine:"code",mode:"htmlmixed",isSource:false,source:""},html:'<img src="'+e.get("src")+'" title="'+e.get("title")+'" alt="'+e.get("alt")+'"/>'});d.push(p)}else if(!!e.getContent()&&""!==b(e)){if(!p||p.type==y.EMBED||p.type==y.IMAGE||p.type==y.CODE){p=q.SQS.LayoutEngine.PageLayoutTools.makeBlock(y.HTML,{html:"",wysiwyg:{html:""}});d.push(p)}p.value.html+=e.get("outerHTML")}});return d}function v(e,l){var c=[];var t=["h1","h2","h3","h4","h5","h6","p","ul","ol","li","blockquote"];var a=["a","strong","em","b","i","cite"];var i={ul:["li","ol","ul"],ol:["li","ul","ol"],li:["ol","ul","li"],blockquote:["ul","ol","li","p"]};var s={li:["ul","ol"]};var n=["br","table","tr","div"];var r=q.Node.create("<div></div>");var u=[];var d="";var p=[];var o="";var h=false;function g(e,t){t(e);e=e.firstChild;while(e){g(e,t);e=e.nextSibling}}function m(e){var t=e.tagName;t=t?t.toLowerCase():"textNode";t="b"===t?"strong":t;t="i"===t?"em":t;return t}function f(e){return q.Array.indexOf(a,m(e))>=0}function v(e){return q.Array.indexOf(t,m(e))>=0}function b(e){return q.Array.indexOf(n,m(e))>=0}function S(e){return 3==e.nodeType&&""!=q.Lang.trim(q.one(e).get("text"))}function y(e,t,a){var i=[];var s=[];for(var n=t.length-1;n>=0;n--){var r=t[n];var o=false;h&&n===t.length-1&&r===m(e)?o=true:"strong"!==r||a.ancestor(r)?"em"!==r||a.ancestor(r)?a.ancestor(r)||(o=true):a.ancestor("i")||(o=true):a.ancestor("b")||(o=true);o?s.push(r):i.unshift(r)}return{closed:s,nodes:i}}function _(e,t){return q.Array.indexOf(t,m(e))>=0}function C(){var e;var t;for(e=u.length-1;e>=0;e--)T(u[e]);for(e=p.length-1;e>=0;e--){t=0===e;w(p[e],t)}}function E(e,t){if(0===p.length)if(s.hasOwnProperty(e)){o+="<p>";p.push("p")}else{o+="<"+e+">";p.push(e)}else if(i.hasOwnProperty(p[p.length-1])&&q.Array.indexOf(i[p[p.length-1]],e)>=0)if(d.length>0)I(e);else{o+="<"+e+">";p.push(e)}}function w(e,t){T(null,true);o+="</"+e+">";c.push(o);o="";t&&p.pop();0===p.length&&h&&(h=false)}function A(e,t){u.push(e);if("a"==e){var a=t.getAttribute("target");var i="";q.Lang.isValue(a)&&a.length>0&&(i=k(' target="{targetAttribute}"',{targetAttribute:a}));d+='<a href="'+t.get("href")+'"'+i+">"}else d+="<"+e+">"}function T(e,t){e&&(d+="</"+e+">");if(t){o+=d;d=""}}function I(e){o+=d;d="";p.push(e);c.push(o);o="<"+e+">";h=true}g(e._node,function(e){var t;var a=q.one(e);var i=m(e);var s=a.get("text");var n=y(e,u,a);var r=y(e,p,a);if(n.closed.length>0){u=n.nodes;for(t=0;t<n.closed.length;t++)T(n.closed[t])}if(r.closed.length>0){p=r.nodes;for(t=0;t<r.closed.length;t++)w(r.closed[t])}if(a.test(l))c.push(a.get("outerHTML"));else if(f(e)){if("a"===i&&a.one(">"+l))return;_(e,u)||A(i,a)}else if(v(e))E(i,e);else if(S(e)){if(""!=q.Lang.trim(s)){p.length||E("p",e);s=s.replace(/</g,"&lt;").replace(/>/g,"&gt;");d+=s}}else if(b(e))if(p.length>0){var o=p[p.length-1];w(o,true);E(o,e)}else if(d.length>0){for(t=u.length-1;t>=0;t--)T(u[t]);E("p",e);w("p",true)}});C();c.length<=1&&c.push("<p></p>");r.append(q.Node.create(c.join("")));return q.Node.create(r.get("innerHTML"))._node}}},{NS:"LayoutBuilder",ATTRS:{columns:{valueFn:function(){return this.get("layout").get("columns")}},editController:{writeOnce:true,validator:function(e){return q.instanceOf(e,q.SQS.LayoutEngine.EditControllerBase)}},layout:{writeOnce:true,validator:function(e){return q.instanceOf(e,q.SQS.LayoutEngine.Models.PageLayout)}},editMode:{writeOnce:true,validator:function(e){return q.SQS.LayoutEngine.Layout.EditMode.isValid(e)}}}});var i=q.Base.create("BlockSet",q.Base,[],{initializer:function(){this._blockMap={}},add:function(e){if(this._containsBlock(e))return;this._blockMap[e.get("id")]=e;e.after("destroy",function(){this.remove(e)},this);this.fire("add",{block:e})},getById:function(e){var t=this._blockMap[e];if(q.Lang.isValue(t))return t;return null},_containsBlock:function(e){return e&&q.Lang.isValue(this._blockMap[e.get("id")])},remove:function(e){if(!this._containsBlock(e))return;delete this._blockMap[e.get("id")];this.fire("remove",{block:e})}});q.SQS.LayoutEngine.PageLayoutTools={sanitizeImportedECB:function(e){if(this.isEmptyECB(e)&&q.Lang.isValue(e.get("html"))){var t=e.get("html");e.get("layout").setAttrs({rows:[{columns:[{span:12,rows:[{columns:[{span:12,blocks:[this.makeBlock(y.HTML,{html:t,wysiwyg:{html:t}})]}]}]}]}]})}},isEmptyECB:function(e){var t=this.getBlocks(e.get("layout").toJSON());if(0===t.length)return true;if(1===t.length){var a=t[0];if(a.type===y.HTML){if(!a.value)return true;return""===a.value.html}}return false},convertLayoutToNewColumnCount:function(e,t){e.set("columns",t);e.get("rows").each(a);function a(e){var t=[];q.Array.each(e.columns||e.get("columns"),i)}function i(e){e.span=t;e.rows&&q.Array.each(e.rows,a)}},getBlocks:function(e){var t=[];if(e&&e.rows)for(var a=0;a<e.rows.length;a++)t=t.concat(this._getBlocksRow(e.rows[a]));return t},_getBlocksRow:function(e){var t=[];if(e.columns)for(var a=0;a<e.columns.length;a++)t=t.concat(this._getBlocksColumn(e.columns[a]));return t},_getBlocksColumn:function(e){var t=[];if(e.rows)for(var a=0;a<e.rows.length;a++)t=t.concat(this._getBlocksRow(e.rows[a]));e.blocks&&(t=t.concat(e.blocks));return t},getSimpleEditableContentBlock:function(e){var t={columns:12,rows:[{columns:[{span:12,rows:[{columns:[{span:12,blocks:Array.prototype.slice.call(arguments)}]}]}]}]};e||(t=q.JSON.stringify(t));return{layout:t,legacyPromotedLayout:false}},getSimpleHTMLEditableContentBlock:function(e,t){return this.getSimpleEditableContentBlock(q.SQS.LayoutEngine.PageLayoutTools.makeBlock(y.HTML,{engine:"wysiwyg",html:e,source:e},t))},makeBlock:function(e,t){return{type:e,id:q.Squarespace.Utils.getGuid(),value:t}}};function e(e){return!m.node.get("children").item("0").compareTo(e)}function b(e){var t=[];if(3==e.get("nodeType"))return e.get("nodeValue");e.get("childNodes").each(function(e){t.push(b(e))});return t.join(" ")}},"1.0",{requires:["array-invoke","base","json","node","squarespace-util","@sqs/layout-engine/layout-utils","@sqs/layout-engine/block/generic-base","@sqs/layout-engine/edit-controller-base","@sqs/layout-engine/event-registrar","@sqs/layout-engine/layout-utils","@sqs/layout-engine/models-layout"]})},"./src/main/webapp/universal/scripts-layout-engine/layout/drag.js":function(e,t){YUI.add("@sqs/layout-engine/layout-drag",function(S){S.namespace("SQS.LayoutEngine.Layout");S.SQS.LayoutEngine.Layout.DragDelegate=S.Base.create("LayoutDragDelegate",S.SQS.DDWrappers.DD.Delegate,[],{initializer:function(){this.dd.plug(S.SQS.DDWrappers.Plugin.DDSuperProxy,this.get("dragProxyConfig"));this.before("drag:start",this._beforeDragStart);this.after("drag:start",this._afterDragStart);this.on("drag:over",this._dragOver);this.on("drag:end",this._dragEnd);this.on("scroll:start",this._onDDScrollStart);this.on("scroll:end",this._onDDScrollEnd);S.UA.mobile&&this.get("preventScrollOnTouch")&&this._preventScrollOnTouch();var e=this.get("editController");this.after("edgeInfoChange",e.processEdgeInfo,e)},_preventScrollOnTouch:function(){this.on("drag:mouseDown",function(e){e.ev.preventDefault()},this);this.get("container").on("touchmove",function(e){this.dd.get("lock")||e.preventDefault()},this)},_beforeDragStart:function(){S.DD.DDM.syncActiveShims();this.get("blockFocusHandler").preventBlockFocus();this.get("blockFocusHandler").blurAllBlocks();var e=S.DD.DDM.activeDrag.get("node");var t=S.Widget.getByNode(e);this.dd.setAttrs({dragWidget:t,dragNodeRegion:e.get("region")})},_afterDragStart:function(){this.get("extraSyncShims")&&S.later(250,this,function(){S.DD.DDM.syncActiveShims()})},_dragOver:function(e){if(e.drop.get("lock"))return;var t=this.getNearestEdge();t&&this.set("edgeInfo",t)},_dragEnd:function(){var e=S.DD.DDM.activeDrag.get("node");S.Object.getValue(e,"_node")&&e.setStyles({position:null,top:null,left:null});this.dd.setAttrs({dragWidget:null,dragNodeRegion:null})},getNearestEdge:function(){var e=null;var t=S.DD.DDM.activeDrop;var a=t.get("node");var i=a.ancestor(".sqs-block:not(.sqs-destroyme)",true,".sqs-layout");if(!i)return e;var s=a.get("region");var n=s.left;var r=s.top;var o=s.width+parseInt(a.getComputedStyle("marginLeft"),10)+parseInt(a.getComputedStyle("marginRight"),10);var l=s.height+parseInt(a.getComputedStyle("marginTop"),10)+parseInt(a.getComputedStyle("marginBottom"),10);var c=S.DD.DDM.activeDrag.mouseXY;var u={x:c[0]<n+o/2?"left":"right",y:c[1]<r+l/2?"top":"bottom"};var d="left"===u.x?c[0]-n:n+o-c[0];var p="top"===u.y?c[1]-r:r+l-c[1];var h=o;var g=Math.min(o,l);var m=d/h*100;var f=p/g*100;var v=m<f?u.x:u.y;var b=m<f?d:p;isNaN(b)||(e={node:a,direction:v,distance:b,quad:u,region:s});return e},_onDDScrollStart:function(e){this.set("edgeInfo",null);this._updateInsertMarkerLock(true);S.one("html").addClass("scrolling scrolling-"+e.direction)},_onDDScrollEnd:function(e){e.isScrollLocked||this._updateInsertMarkerLock(false);var t=S.one("html");t.removeClass("scrolling");t.removeClass("scrolling-down");t.removeClass("scrolling-up")},_updateInsertMarkerLock:function(e){var t=this.get("editController");t&&t.toggleInsertMarkerLock(e)}},{ATTRS:{container:{valueFn:function(){return S.one(S.config.doc.body)},lazyAdd:false},nodes:{value:".sqs-block"},groups:{value:null,lazyAdd:false},invalid:{value:".sqs-dd-invalid",validator:S.Lang.isString},editController:{value:null},edgeInfo:{value:{node:null,direction:"",distance:0,quad:null,region:null}},extraSyncShims:{value:false,validator:S.Lang.isBoolean},scrollNode:{setter:function(e){return e.hasClass("sqs-layout")&&e.ancestor(".sqs-layout-scroll")||e}},preventScrollOnTouch:{value:false},dragProxyConfig:{value:{}},blockFocusHandler:{valueFn:function(){return S.SQS.LayoutEngine.Singletons.BlockFocusHandler}}}})},"1.0",{requires:["base","@sqs/layout-engine/layout-block-focus-handler","@sqs/yui-dd-wrappers/dd-delegate","@sqs/yui-dd-wrappers/dd-superproxy","@sqs/layout-engine/scroll-into-view"]})},"./src/main/webapp/universal/scripts-layout-engine/layout/drop.js":function(e,t){YUI.add("@sqs/layout-engine/layout-drop",function(p){p.namespace("SQS.LayoutEngine.Layout").Drop=p.Base.create("LayoutDrop",p.DD.Drop,[],{initializer:function(){p.DD.DDM.activeDrag&&this._activateShim()},_activateShim:function(){var e=p.DD.DDM;var t="node";if(!e.activeDrag)return false;if(this.get("lock"))return false;var a=this.get(t);if(this.inGroup(e.activeDrag.get("groups"))){a.removeClass(e.CSS_PREFIX+"-drop-active-invalid");a.addClass(e.CSS_PREFIX+"-drop-active-valid");e._addValid(this);this.overTarget=false;this.get("useShim")||(this.shim=this.get(t));this.sizeShim()}else{e._removeValid(this);a.removeClass(e.CSS_PREFIX+"-drop-active-valid");a.addClass(e.CSS_PREFIX+"-drop-active-invalid")}},sizeShim:function(){var e=p.DD.DDM;var t="node";var a="offsetHeight";var i="offsetWidth";if(!e.activeDrag)return false;if(this.get("lock"))return false;if(!this.shim){p.later(100,this,this.sizeShim);return false}var s=this.get(t);var n=s.get(a);var r=s.get(i);var o=this.get("padding");var l=s.getXY();var c,u,d;r=r+o.left+o.right;n=n+o.top+o.bottom;l[0]=l[0]-o.left;l[1]=l[1]-o.top;if(e.activeDrag.get("dragMode")===e.INTERSECT){c=e.activeDrag;u=c.get(t).get(a);d=c.get(t).get(i);n+=u;r+=d;l[0]=l[0]-(d-c.deltaXY[0]);l[1]=l[1]-(u-c.deltaXY[1])}this.get("useShim")&&this.shim.setStyles({height:n+"px",width:r+"px",top:l[1]+"px",left:l[0]+"px"});this.region={0:l[0],1:l[1],area:0,top:l[1],right:l[0]+r,bottom:l[1]+n,left:l[0]}}},{ATTRS:{lockScroll:{value:false}}})},"1.0",{requires:["base","dd-drop"]})},"./src/main/webapp/universal/scripts-layout-engine/layout/editor.js":function(e,t,a){var o=a("./src/main/webapp/frontend/packages/enums/BlockType.js");var l=a("./src/main/webapp/universal/scripts-layout-engine/shared/constants/BlockTypeStrings.js").BlockTypeKeys;var n=a("./src/main/webapp/universal/scripts-layout-engine/shared/constants/Constants.js");var s=a("./common/temp/node_modules/@sqs/utils/scroll/getDocScrollNode.js");var r=a("./src/main/webapp/frontend/packages/enums/Flag.js");var c=a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts");var u=false;var d=new RegExp("^[\\s]*$");var p="[\\u200B-\\u200D\\uFEFF]";YUI.add("@sqs/layout-engine/layout-editor",function(m){var i=m.SQS.LayoutEngine.Layout.Utils.getValFromClass;m.namespace("SQS.LayoutEngine.Layout");m.SQS.LayoutEngine.Layout.Editor=m.Base.create("LayoutEditor",m.Plugin.Base,[],{initializer:function(e){this._host=this.get("host");this._builder=this._host.LayoutBuilder;this._layout=this._builder.get("layout");this.toggleBlocksEditable(true);this.cleanGrid();if(!window.MOBILEAPP&&!this.get("dragDropLock")){this._initDD(e);this._initColumnResizer();this._initFloatResizer()}this._host.addClass("sqs-editing");this.get("layoutTutorialPromise").then(function(){!this.get("destroyed")&&this._layout.isBlank()&&this._toggleInsertPointGuide(true)}.bind(this))},destructor:function(){this.get("editController").hideBlockMenus();this._host.removeClass("sqs-editing");this.toggleBlocksEditable(false);this._toggleInsertPointGuide(false);if(this._insertPointClickedListener){this._insertPointClickedListener.detach();this._insertPointClickedListener=null}this._destroyDD();this._destroyFloatResizer();this._destroyColumnResizer();this._destroyResizeHelperNodes();this._handleEmptyLayoutOnDestroy();this._host=null},_isBlogApp:function(){return this.get("editController").isMobileApp()},_initDD:function(e){if(this.get("lockedLayout"))return;var t=[".sqs-dd-invalid",".sqs-edit-dialog-open",".sqs-helper",".sqs-block-locked-layout"];var a=[".sqs-dd-invalid-handle",".sqs-block-focused .sqs-dd-invalid-handle-on-focus",".sqs-selected .sqs-dd-invalid-handle-on-focus"];var i=this._isBlogApp();var s=this.dragDelegate=new m.SQS.LayoutEngine.Layout.DragDelegate({container:this._host,nodes:".sqs-block",invalid:t.join(", "),invalidHandles:a.join(", "),dragConfig:{groups:["blocks"],clickTimeThresh:i?600:n.DRAG_CLICK_TIME_THRESHOLD,haltDown:!i&&null},extraSyncShims:!i,enableDragScroll:true,scrollNode:this.get("scrollNode"),editController:this.get("editController"),dragProxyConfig:{cloneNode:true,hideOriginalNode:true,moveOnEnd:false,flyBack:false}});s.dd.removeInvalid("textarea");s.before("drag:mouseDown",this._beforeDragMousedown,this);s.before("drag:start",this._beforeDragStart,this);s.on("drag:start",this._onDragStart,this);s.after("drag:end",this._afterDragEnd,this);this.on("dragDropLockChange",function(t){s.set("lockTarget",t.newVal);m.Array.each(m.DD.DDM.targets,function(e){if(this._host.contains(e.get("node")))if(t.newVal){e.set("lock",true);e._deactivateShim()}else{e.set("lock",false);e._activateShim()}},this);this.get("editController").toggleInsertMarkerLock(t.newVal)},this)},_destroyDD:function(){if(this.dragDelegate){this.dragDelegate.destroy();this.dragDelegate=null}},_initColumnResizer:function(){this.resizers=new m.DD.Delegate({container:this._host,nodes:".sqs-helper",invalid:".no-editing .sqs-helper, .sqs-float-right .sqs-helper, .sqs-float-left .sqs-helper",dragConfig:{groups:["resizers"],move:false}});this.resizers.on("drag:mouseDown",this._onResizerDragMousedown,this);this.resizers.on("drag:start",this._onResizerDragStart,this);this.resizers.on("drag:drag",this._onResizerDragDrag,this);this.resizers.on("drag:end",this._onResizerDragEnd,this)},_destroyColumnResizer:function(){if(this.resizers){this.resizers.destroy();this.resizers=null}},_onResizerDragMousedown:function(e){var t=e.target.get("node");var a=t.ancestor(".sqs-row",true);this.calcGridStops(a)},calcGridStops:function(e){var t=parseInt(e.getStyle("width"),10);var a=parseInt(e.getStyle("paddingLeft"),10);var i=e.ancestor(".sqs-col");var s=this.get("columns");var n=i?this.getElSize(i):s;var r=t/n;var o=e.getXY()[0];this.gridStops=[];for(var l=0;l<s-1;l++)this.gridStops.push(o+a+Math.round(r*(l+1)))},_onResizerDragStart:function(e){var t=e.target.get("node");var a=e.target.nodeXY[0];var i=this.get("gutterSize");m.one("html").addClass("sqs-resizing-column");this.leftColumn=t.ancestor(".sqs-col");this.rightColumn=this.leftColumn.next();this.leftOrigSize=this.getElSize(this.leftColumn);this.rightOrigSize=this.getElSize(this.rightColumn);this.origResizerPos=this.xToColumn(a+i/2);this._host.addClass("sqs-resizing");this.leftColumn.addClass("sqs-resizing sqs-resizing-left");this.rightColumn.addClass("sqs-resizing sqs-resizing-right");this.saveOriginalSizes(t.ancestor(".sqs-row"));this.get("editController").disableInsertPoints();this.get("editController").disableDragSelection()},xToColumn:function(e){var t=(this.gridStops[1]-this.gridStops[0])/2;var a=this.gridStops[0];var i=this.gridStops[this.gridStops.length];if(e<a)return 0;if(e>i)return this.get("columns")-1;for(var s=0;s<this.gridStops.length;s++){var n=this.gridStops[s];if(e>n-t&&e<n+t)return s}},_onResizerDragDrag:function(e){var t;var a;var i;var s;var n;var r;var o;var l=e.target.mouseXY[0];var c=this.gridStops[1]-this.gridStops[0];var u=this.get("columns");for(var d=0,p=this.gridStops.length;d<p;d++){var h=this.gridStops[d];if(l<this.gridStops[0]-c){t=this.getMinColSize(this.leftColumn);a=this.rightOrigSize+this.leftOrigSize-t;this.setElSize(this.leftColumn,t);this.setElSize(this.rightColumn,a)}else if(l>this.gridStops[this.gridStops.length-1]+c){a=this.getMinColSize(this.rightColumn);t=this.leftOrigSize+this.rightOrigSize-a;this.setElSize(this.leftColumn,t);this.setElSize(this.rightColumn,a)}else if(l>h-c/2&&l<h+c/2){o=d-this.origResizerPos;t=this.leftOrigSize+o;a=this.rightOrigSize-o;i=this.getMinColSize(this.leftColumn);s=this.getMinColSize(this.rightColumn);n=this.getMaxColSize(this.leftColumn);r=this.getMaxColSize(this.rightColumn);if(t<i||t>n||a<s||a>r)break;if(t===this.getElSize(this.leftColumn))break;t=Math.min(Math.max(1,t),u);a=Math.min(Math.max(1,a),u);this.setElSize(this.leftColumn,t);this.setElSize(this.rightColumn,a);break}}},_onResizerDragEnd:function(){var e=this._host.all(".sqs-col");m.one("html").removeClass("sqs-resizing-column");this._host.all(".sqs-col.sqs-resizing").each(function(e){var i=this.getElSize(e);e.get("children").filter(".sqs-float-left, .sqs-float-right").each(function(e){var t=this.getElSize(e);if(t>i+1){var a=m.Widget.getByNode(e);a&&a.get("model").set("floatDir",null)}},this);e.all(".sqs-block").each(function(e){m.Widget.getByNode(e).fire("resized")})},this);this._host.removeClass("sqs-resizing");e.removeClass("sqs-resizing-left");e.removeClass("sqs-resizing-right");e.removeClass("sqs-resizing");this.cleanGrid();this.get("editController").enableInsertPoints();this.get("editController").enableDragSelection()},getBlockNodes:function(e){var t=this._host.all(".sqs-block:not(.sqs-destroyme)");var a=this._host.all(".sqs-block-markdown .sqs-block").getDOMNodes();var i=t.filter(function(e){return-1===a.indexOf(e)});return e?i.filter(e):i},getBlocks:function(){var a=[];var e=this.getBlockNodes();e.each(function(e){var t=m.Widget.getByNode(e);t&&a.push(t)},this);return a},beforeDrag:function(){m.Array.each(this.getBlocks(),function(e){e.blockEditor&&e.blockEditor.beforeLayoutDrag()},this)},afterDrag:function(){m.Array.each(this.getBlocks(),function(e){e.blockEditor&&e.blockEditor.afterLayoutDrag()},this)},toggleBlocksEditable:function(t){u&&console.log("[le] editor - toggleBlogsEditable",t,this);m.Array.each(this.getBlocks(),function(e){u&&console.log("[le] editor - toggleBlogsEditable block",e);t?this._enableEditingBlock(e):this._disableEditingBlock(e)},this)},_enableEditingBlock:function(e){var t=e.get("boundingBox").getAttribute("id");var a=this.get("startupBlockId");var i={editOnStart:t===a,editable:true,promoted:this._layout.isPromotedBlock(e)};t===a&&m.Lang.isFunction(e.ensureLoadedThenShowDialog)?e.ensureLoadedThenShowDialog(function(){e.setAttrs(i)}):e.setAttrs(i)},_disableEditingBlock:function(e){e.setAttrs({editable:false,promoted:this._layout.isPromotedBlock(e),isNewBlock:false})},_beforeDragStart:function(e){this.get("editController").layoutBeforeDragStart()},_beforeDragMousedown:function(e){if(!c.isFeatureEnabled(r.PAGE_INTERACTIONS_IMPROVEMENTS))return;var t=e.ev.currentTarget;var a=m.Widget.getByNode(t);if(!a)return;var i=a.get("focusHandler").getCurrentlyFocused();i.block&&i.block!==a&&e.halt()},_onDragStart:function(){var e=m.DD.DDM.activeDrag.get("node");var a=m.Widget.getByNode(e);var t=m.all(".sqs-selected");var i=this.get("editController");i.set("selection",e);t.each(function(e){var t=m.Widget.getByNode(e);m.Lang.isValue(t)&&t!==a&&t.set("selected",0)});i.layoutDragStart(this.get("host"))},_afterDragEnd:function(){this.get("editController").layoutDragEnd()},_initFloatResizer:function(){this.floatResizers=new m.DD.Delegate({container:this.get("host"),nodes:".sqs-float-right .sqs-helper, .sqs-float-left .sqs-helper",invalid:".no-editing .sqs-helper",dragConfig:{move:false}});this.floatResizers.dd.addToGroup("floaters");this.floatResizers.on("drag:mouseDown",this._onFloatResizerDragMousedown,this);this.floatResizers.on("drag:start",this._onFloatResizerDragStart,this);this.floatResizers.on("drag:drag",this._onFloatResizerDragDrag,this);this.floatResizers.on("drag:end",this._onFloatResizerDragEnd,this)},_onFloatResizerDragMousedown:function(e){this.get("editController").layoutBeforeDragStart()},_onFloatResizerDragStart:function(e){m.one("html").addClass("sqs-dragging-block");var t=e.target.get("node").ancestor(".sqs-col");var a=m.Widget.getByNode(e.target.get("node"));this._currentWidth=a.get("model").get("hSize");this._minWidth=Math.max(a.blockEditor.get("minHSize"),1);this._maxWidth=parseInt(i(t,"sqs-col-"),10);this._steps=parseInt(t.get("region").width/this._maxWidth,10);this.get("editController").disableInsertPoints();this.get("editController").disableDragSelection()},_onFloatResizerDragDrag:function(e){var t=m.Widget.getByNode(e.target.get("node"));var a=Math.floor((e.target.mouseXY[0]-e.target.startXY[0])/this._steps);this._isFloatingRight(t)&&(a*=-1);var i=a+this._currentWidth;if(i>=this._minWidth&&i<=this._maxWidth){this._newHSize=i;this._removeHSizeClasses(t);t.get("boundingBox").addClass("sqs-col-"+i)}},_isFloatingRight:function(e){return"right"===e.get("model").get("floatDir")},_removeHSizeClasses:function(e){var t=e.get("boundingBox");var a=/(?:\s|^)(sqs-col-\d+?)(?=\s|$)/g;t.set("className",t.get("className").replace(a,""))},_onFloatResizerDragEnd:function(e){var t=m.Widget.getByNode(e.target.get("node"));var a={hSize:this._newHSize};this._newHSize===this._maxWidth&&(a.floatDir=null);t.get("model").setAttrs(a);t.get("boundingBox").removeClass("yui3-dd-dragging");m.one("html").removeClass("sqs-dragging-block");this.afterDrag();this.get("editController").enableInsertPoints();this.get("editController").enableDragSelection();this._builder.syncDOMToContent();this._newHSize=null},_destroyFloatResizer:function(){if(this.floatResizers){this.floatResizers.destroy();this.floatResizers=null}},getBlockByNode:function(e){return m.Widget.getByNode(e.ancestor(".sqs-block",true))},_handleColumnInsertBlock:function(t,e){"left"===t.direction||"right"===t.direction?this.insertColumn(t.node,e,t.direction):"bottom"===t.direction?t.node.append(e):"top"===t.direction&&(e.filter?t.node.prepend(e.filter(function(e){return!t.node.get("children").item("0").compareTo(e)})):t.node.prepend(e))},_unfloatBlockByNode:function(e){if(this._blockIsFloating(e)){var t=m.Widget.getByNode(e);t&&t.get("model").set("floatDir",null)}},_handleFloatingBlockEdgeCases:function(e,t){var a=e.node.previous();a===t&&(this._blockIsFloating(a)||this._unfloatBlockByNode(a.previous()));this._blockIsFloating(a)&&(e.node=this._getTopFloatingBlock(a))},_handleBlockInsertBlock:function(e,t){if("top"===e.direction){this._handleFloatingBlockEdgeCases(e,t);e.node.insert(t,"before")}else"bottom"===e.direction?e.node.insert(t,"after"):"left"!==e.direction&&"right"!==e.direction||(0===e.node.siblings("*:not(.sqs-helper)").size()?this.insertColumn(e.node.ancestor(".sqs-col",true),t,e.direction):this.splitBlock(e.node,t,e.direction))},_handleContentInsertBlock:function(e,t){var a=e.node.getData("alignNode")||e.node;var i=this.getBlockByNode(a);var s=i.get("boundingBox");var n=s.previous();if("bottom"===e.direction)a.next()?i.blockEditor.split(a,t):s.insert(t,"after");else{if(a.previous())i.blockEditor.split(a.previous(),t);else if(n&&n.test("[class*=sqs-float-]")){n=n.previous(".sqs-block:not(.sqs-float-left):not(.sqs-float-right)")||n;n.insert(t,"after")}else s.insert(t,"before");if("left"===e.direction||"right"===e.direction){var r=Math.floor(this.getParentSize(s)/2);r>0&&m.Widget.getByNode(t).get("model").setAttrs({hSize:r,floatDir:e.direction})}}},_handleRowBlockInsert:function(e,t){"left"===e.direction?this.insertColumn(e.node.one(".sqs-col:first-child"),t,e.direction):"right"===e.direction?this.insertColumn(e.node.one(".sqs-col:last-child"),t,e.direction):"top"!==e.direction&&"bottom"!==e.direction||this.insertRow(e.node,t,e.direction)},_blockShouldFloatInContent:function(e){if("left"===e.direction||"right"===e.direction){var t=e.node.getData("alignNode")||e.node;var a=this.getBlockByNode(t);var i=a?a.get("boundingBox"):t;var s=Math.floor(this.getParentSize(i)/2);return s>0}return false},_getTopFloatingBlock:function(e){if(!e||!e.previous()||this._blockIsFloating(e)&&!this._blockIsFloating(e.previous()))return m.Lang.isValue(e)?e:null;return this._getTopFloatingBlock(e.previous())},_blockIsFloating:function(e){var t=m.Widget.getByNode(e);return m.Lang.isValue(t)&&!!(t.get("model")&&t.get("model").get("floatDir"))},insertBlock:function(e,t,a){var i=false;var s=t;var n=m.Widget.getByNode(e);this._builder.registerBlock(n);m.Object.getValue(s,"type")||(s.type=this.getType(s.node));if(!s||!s.type||!n)return;var r=m.SQS.LayoutEngine.Layout.Utils.getColumnWidth(n.get("contentBox"));if("content"===s.type){i=this._blockShouldFloatInContent(s);this._handleContentInsertBlock(s,e)}else"block"===s.type?this._handleBlockInsertBlock(s,e):"column"===s.type?this._handleColumnInsertBlock(s,e):"row"===s.type&&this._handleRowBlockInsert(s,e);i||n.get("model").setAttrs({hSize:null,floatDir:null});this._builder.syncDOMToContent();n.fire("dropped",{dropInfo:s,floating:!!i,oldCol:r});n.set("visible",true);m.SQS.LayoutEngine.Events.fire("layout-engine:insert-block",{blockWidget:n,isMoveBlock:a})},insertRow:function(e,t,a){var i=this._builder;var s=i.get("columns");var n=i.createColumn(t,s);var r=i.createRow(n);var o="top"===a?"before":"after";e.insert(r,o)},insertColumn:function(e,t,a){var i=e.ancestor(".sqs-row");var s=i.get("children").filter(".sqs-col");var n=s.size();var r=this.getMaxAvailableSpace(e)-this._getMinColumnsWidth(s);var o=Math.floor(this.getParentSize(e)/(n+1));t.test(".sqs-block")?o=Math.max(o,this.getMinBlockSize(t)):t.test(".sqs-col")&&(o=Math.max(o,this.getMinColSize(t)));var l=o<1||o>r;if(l){"left"===a?e.prepend(t):"right"===a&&e.append(t);return false}var c=this._builder.createColumn(t,0);e.insert(c,"left"===a?"before":"after");this.saveOriginalSizes(e.ancestor(".sqs-row"));this.resizeColumn(c,Math.round(o));return true},getParentSize:function(e){var t=e.ancestor(".sqs-col");return null!==t?this.getElSize(t):this._builder.get("columns")},getMaxAvailableSpace:function(e){if(e.ancestor(".sqs-col"))return this.getMaxColSize(e.ancestor(".sqs-col"));return this.getMaxColSize(e)},getElSize:function(e){return i(e,"sqs-col-")},_foldColumnsSize:function(e,t){var a=0;e.each(function(e){a+=parseInt(t.call(this,e),10)},this);return a},_getMinColumnsWidth:function(e){return this._foldColumnsSize(e,this.getMinColSize)},_getColumnsWidth:function(e){return this._foldColumnsSize(e,this.getElSize)},resizeColumn:function(t,e,n){var r=this.getParentSize(t);var a=t.ancestor(".sqs-row").get("children").filter(".sqs-col");var i=a.filter(function(e){return e!==t.getDOMNode()});var s=r-this._getMinColumnsWidth(i);if(!n&&(0===e||0===i.size()||s<1))return false;this.saveOriginalSizes(t.ancestor(".sqs-row"));var o=this.getElSize(t);var l=o+e;var c=Math.min(s,l);var u=this._getResizeInfo(i);var d=this._getColumnsWidth(i);var p;var h=e;var g=e>0?-1:1;while(h!==p&&0!==h){p=h;m.Array.each(u,function(e,t){var a=e.node;var i=this.getElSize(a);var s=this.getMinColSize(a);if(0!==h&&i+g>=s&&r>=d+g){this.setElSize(a,i+g,n);h+=g}else while(0!==h&&i+g<s&&g>0&&r>=d+g){i+=g;this.setElSize(a,i,n);h+=g}},this)}i.each(function(e){e.all(" > .sqs-block").each(function(e){var t=m.Widget.getByNode(e);t&&t.fire("resized")})});0!==h&&console.error("[le] Column resizing has leftovers");this.setElSize(t,c,n)},_getResizeInfo:function(e){var a=[];e.each(function(e,t){a.push({node:e,idx:t,min:this.getMinColSize(e),size:this.getElSize(e)})},this);a.length>1&&a.sort(function(e,t){return e.size-e.min-(t.size-t.min)});return a},getMinColSize:function(e){var t=e.get("children").filter(".sqs-row");var s=1;t>0&&0!==s?t.each(function(e,t){var a=e.get("children").filter(".sqs-col");var i=a.size();a.each(function(e){i+=this.getMinColSize(e)-1},this);s=Math.max(s,i)},this):e.all(".sqs-block").each(function(e){var t=m.Widget.getByNode(e);t.blockEditor&&(s=Math.max(s,this.getMinBlockSize(t)))},this);return parseInt(s,10)},getMinBlockSize:function(e){e instanceof m.Node&&(e=m.Widget.getByNode(e));if(!m.Lang.isValue(e)){console.warn("[le] Error, cannot get minimum block size of a non-block");return 1}if(!m.Lang.isValue(e.blockEditor))return 1;return parseInt(e.blockEditor.get("minHSize")||1,10)},getMaxColSize:function(e){var t=e.ancestor(".sqs-col");var a=t?this.getElSize(t):this.get("columns");e.siblings(".sqs-col").each(function(e){a-=this.getMinColSize(e)},this);return a},saveOriginalSizes:function(e){e.all(".sqs-col").each(function(e){this.cleanOriginalSizes(e);e.addClass("origsize-"+this.getElSize(e))},this);e.all(".sqs-block").each(function(e){if(this.getElSize(e)){this.cleanOriginalSizes(e);e.addClass("origsize-"+this.getElSize(e))}},this)},getElOrigSize:function(e){return i(e,"origsize-")},setElSize:function(e,a,t){var i=this.getElSize(e);var c=this.getElOrigSize(e)||i;var s=this.getMinColSize(e);a=!t&&a<s?s:a;e.all(".sqs-block").each(function(e){var t=this.getElOrigSize(e);t&&this.setElSize(e,Math.max(1,Math.floor(a/c*t)))},this);this.updateColumnSize(e,a,i);e.get("children").filter(".sqs-row").each(function(e){var o=a-c;var l=o;e.get("children").filter(".sqs-col").each(function(e,t){var a=this.getElOrigSize(e)||this.getElSize(e);var i=this.getMinColSize(e);var s=a/c;var n=o>0?Math.min(l,Math.ceil(s*o)):Math.max(l,Math.floor(s*o));var r=Math.max(i,a+n);n=r-a;r=a+n;l-=n;this.setElSize(e,r)},this)},this)},updateColumnSize:function(e,t,a){if(!e||t===a)return;m.Lang.isValue(a)&&e.removeClass("sqs-col-"+a);e.addClass("sqs-col-"+t);this._builder.syncDOMToContent()},getColSpace:function(e){return this.getElSize(e)-this.getMinColSize(e)},splitBlock:function(e,t,a){var i=this.getParentSize(e);var s="left"===a?"before":"after";if(0===Math.floor(i/2)){e.insert(t,s);return}var n=this._builder.createRow();e.insert(n,"before");var r=this._builder.createColumn(e,i);var o=this._builder.createColumn(t,0);n.append(r);r.insert(o,s);this.resizeColumn(o,Math.round(i/2))},getClassName:function(e){return m.ClassNameManager.getClassName(e)},getType:function(e){if(e.hasClass("sqs-block")||e.hasClass("free-block"))return"block";if(e.hasClass("sqs-col"))return"column";if(e.hasClass("sqs-row"))return"row";if(e.ancestor(this.get("editController").get("contentParentBlockSelector"),true))return"content";if(e.hasClass("sqs-layout"))return"layout";e.hasClass("sqs-layout-insert-point")||e.hasClass("sqs-layout-insert-point-container")||console.log("Unknown node type (tagName: %s, class: %s, id: %s)",e.get("tagName"),e.get("class"),e.get("id"))},cleanGrid:function(e){this.get("forceSingleColumn")&&this.collapseGrid();this.cleanBlocks();this.cleanColumns();this.cleanRows();m.SQS.LayoutEngine.Events.fire("layout-engine:grid-cleaned")},collapseGrid:function(){var e=this._host.all(".sqs-row > .sqs-col");if(e.size()<2)return;var t=this._host.one(".sqs-row").one("> .sqs-col");var a=this._host.all(".sqs-row > .sqs-col > *");a.each(function(e){t.appendChild(e)},this);e.each(function(e){e!==t&&e.remove()},this);this.resizeColumn(t,12,true)},cleanBlocks:function(){var e=this.getBlockNodes();this._handleEmptyLayout(e);e.each(function(e){var t=m.Widget.getByNode(e);if(!t)throw new Error("[cleanBlocks] Could not find the corresponding block widget for node");if(t.get("destroyed"))return;if(e.hasClass("sqs-col-Infinity")){e.removeClass("sqs-col-Infinity");this.cleanOriginalSizes(e)}t.blockEditor&&t.blockEditor.cleanBlock();t.get("model").get("floatDir")&&!this._isBlockFloatValid(e)&&t.get("model").set("floatDir",null);var a=e.get("children").filter(".sqs-helper").item(0);t.get("model").get("floatDir")?m.Lang.isNull(a)&&this._appendResizerNodeTo(e):a&&a.remove()},this);this.deleteQueuedBlocks()},_handleEmptyLayout:function(e){var t=0===e.size();var a=m.Array.some(e.getDOMNodes(),function(e){e=m.one(e);return!e.hasClass("sqs-float-left")&&!e.hasClass("sqs-float-right")});this.get("lockedLayout")||!t&&a||this._insertTextBlockAtEnd(this._host.one(".sqs-row .sqs-col"));this._host.toggleClass("empty",t)},_handleEmptyLayoutOnDestroy:function(){var e=this.get("host");var t=this.getBlockNodes();var a=t.size();var i=this.get("markdownMode")?"markdown":"html";(0===a||1===a&&t.item(0).hasClass("sqs-block-"+i)&&this._isBlank(t.item(0).get("textContent")))&&e.addClass("empty")},_isBlank:function(e){return!m.Lang.isValue(e)||d.test(e.replace(/&nbsp;/g,"").replace(new RegExp(p,"g"),""))},_toggleInsertPointGuide:function(e){this._host.toggleClass("le-guide-on",e);if(this._insertPointClickedListener){this._insertPointClickedListener.detach();this._insertPointClickedListener=null}e&&(this._insertPointClickedListener=m.Global.once("LayoutInsertPoint:click",this._toggleInsertPointGuide.bind(this,false)))},_isBlockFloatValid:function(e){var t=e.next();if(!t)return false;var a=m.Widget.getByNode(t);if(!a)return false;var i=a.get("model");if(i&&i.get("floatDir"))return this._isBlockFloatValid(t);return t.test(this.get("editController").get("contentParentBlockSelector"))},deleteQueuedBlocks:function(){var e=this.get("host");var t=e.all(".sqs-destroyme");var a=false;if(0===t.size())return;t.each(function(e){var t=m.Widget.getByNode(e);a||e.next(".sqs-block, .sqs-row")||(a=true);if(t&&!t.get("destroyed")){t.destroy();this._builder.deregisterBlock(t)}},this);a&&this.get("editController").alignInsertPoints(e,true)},_insertTextBlockAtEnd:function(e){var t=m.Widget.getByNode(e.all(".sqs-block").pop());var a=t&&parseInt(t.get("type"),10);if(!t||m.Lang.isNumber(a)&&a!==o.HTML&&a!==o.MARKDOWN){var i=this.get("markdownMode")?o.MARKDOWN:o.HTML;var s=this.get("editController").getRenderableBlocks(this.get("editMode"));var n=s.get(l[i]).ctor;var r=new n({editable:true,render:e,visible:true,editMode:this.get("editMode"),editController:this.get("editController")});this._builder.registerBlock(r);this._builder.syncDOMToContent()}},_appendResizerNodeTo:function(e){e.appendChild('<div class="sqs-helper"><div class="sqs-resizer"><div class="sqs-line"></div></div></div>')},_destroyResizeHelperNodes:function(){this.get("host").all(".sqs-helper").remove(true)},cleanColumns:function(){this._host.all(".sqs-row > .sqs-col").each(function(e,t){var a=0===e.all("> *:not(.sqs-helper)").size();var i=this._host.all(".sqs-col").size()>1;if(a&&i){this.resizeColumn(e,-1*this.getElSize(e),true);var s=e.siblings(".sqs-col");e.remove();s.each(function(e){e.all(".sqs-block").each(function(e){var t=m.Widget.getByNode(e);t&&t.fire("resized",{source:"columnChanged"})})});return}this.cleanOriginalSizes(e);this._isBlogApp()&&this._insertTextBlockAtEnd(e);e.one("> .sqs-helper")||this._appendResizerNodeTo(e)},this)},cleanOriginalSizes:function(t){var e=t.get("className").split(" ");m.Array.each(e,function(e){"origsize"===e.substring(0,8)&&t.removeClass(e)},this)},cleanRows:function(){this._host.all(".sqs-row").each(function(t){var e=t.get("parentNode");var a=t.get("children").filter(".sqs-col");var i=t.next()&&"row"===this.getType(t.next())?t.next():null;var s=i?i.get("children").filter(".sqs-col"):null;if(0===t.all(".sqs-block").size()&&this._host.all(".sqs-row").size()>1){t.remove();return}if("column"===this.getType(e)&&1===a.size()){a.each(function(e){e.get("children").filter(".sqs-helper").remove();t.insert(e.get("children"),"after")},this);t.remove()}if(1===a.size()&&i&&1===s.size()){i.one(".sqs-col").prepend(t.one(".sqs-col").get("children"));t.remove()}},this)}},{NS:"LayoutEditor",ATTRS:{scrollNode:{valueFn:function(){return m.one(s(m.config.doc))},lazyAdd:false},columns:{value:12},gutterSize:{value:24},dragDropLock:{value:false},lockedLayout:{valueFn:function(){return this.get("host").hasClass("sqs-locked-layout")},readOnly:true},id:{valueFn:function(){return"layout-"+m.Squarespace.Utils.getGuid()}},forceSingleColumn:{value:false},markdownMode:{getter:function(){return!!m.Object.getValue(window,"Static.SQUARESPACE_CONTEXT.websiteSettings.markdownMode".split("."))}},editController:{writeOnce:true,validator:function(e){return m.instanceOf(e,m.SQS.LayoutEngine.EditControllerBase)}},editMode:{writeOnce:true,validator:function(e){return m.SQS.LayoutEngine.Layout.EditMode.isValid(e)}},layoutTutorialPromise:{value:m.when()},startupBlockId:{value:null,validator:m.Lang.isString}}})},"2.0",{requires:["base","dd-delegate","dd-scroll","event-custom-base","plugin","promise","squarespace-util","@sqs/layout-engine/layout-block-focus-handler","@sqs/yui-dd-wrappers/dd-behaviors","@sqs/layout-engine/edit-controller-base","@sqs/layout-engine/layout-builder","@sqs/layout-engine/layout-drag","@sqs/layout-engine/events","@sqs/layout-engine/layout-insert-marker","@sqs/layout-engine/layout-utils","@sqs/layout-engine/scroll-into-view"]})},"./src/main/webapp/universal/scripts-layout-engine/layout/trash.js":function(e,t){YUI.add("@sqs/layout-engine/layout-trash",function(t){t.namespace("SQS.LayoutEngine.Layout");t.SQS.LayoutEngine.Layout.BlockTrash=t.Base.create("blocktrash",t.Widget,[],{initializer:function(){var e=this.get("id");this.blockToRemove=null;this.drop=new t.SQS.LayoutEngine.Layout.Drop({node:this.get("boundingBox"),groups:["blocks"],lockScroll:true});this.drop.on(["drop:enter","drop:over"],this._onDropOver,this);this.drop.on("drop:hit",this._onDropHit,this);this.drop.on("drop:exit",this._onDropExit,this);t.DD.DDM.before(e+"|ddm:end",this._beforeDDMEnd,this);this.after("markerLockChange",this._updateMarkerLock,this)},_onDropOver:function(){this.blockToRemove=t.DD.DDM.activeDrag.get("node");this.set("markerLock",true)},_onDropExit:function(){this.blockToRemove=null;this.set("markerLock",false)},_beforeDDMEnd:function(){var e=t.Widget.getByNode(this.blockToRemove);e&&(e.queueForDestruction?e.queueForDestruction():this.blockToRemove.addClass("sqs-destroyme"));this.set("markerLock",false);t.one(t.config.doc).detach(this.get("id")+"|scroll");this.blockToRemove=null},_updateMarkerLock:function(e){this.get("editController").toggleInsertMarkerLock(e.newVal)},destructor:function(){var e=this.get("id");this.drop.detach();this.drop.destroy();t.DD.DDM.detach(e+"|*");t.one(t.config.doc).detach(e+"|scroll")}},{CSS_PREFIX:"sqs-blocktrash",ATTRS:{render:{value:true},markerLock:{value:false},editController:{value:null},winHeight:{valueFn:function(){return t.config.win.innerHeight},lazyAdd:false}}})},"1.0",{requires:["dd","widget","@sqs/layout-engine/layout-drop","@sqs/layout-engine/layout-insert-marker"]})},"./src/main/webapp/universal/scripts-layout-engine/models/layout.js":function(e,t,a){var u=a("./src/main/webapp/frontend/packages/enums/BlockType.js");var d=a("./common/temp/node_modules/@sqs/utils/string/isEmpty.js");var p=a("./common/temp/node_modules/@sqs/utils/string/isBlankWithoutTags.js");YUI.add("@sqs/layout-engine/models-layout",function(r){var i={type:u.HTML,value:{html:""}};var s={type:u.MARKDOWN};var n=[u.HTML,u.MARKDOWN];var o=function(e){if(!e.rows)return[];var t=[];var a=function(e){if(t.length>2)return;e.columns&&e.columns.length>0&&e.columns.forEach(function(e){if(t.length>2)return;e.rows&&e.rows.length>0&&e.rows.forEach(a);e.blocks&&e.blocks.length>0&&(t=t.concat(e.blocks))})};e.rows.forEach(a);return t.slice(0,2)};var l=r.namespace("SQS.LayoutEngine.Models").PageLayout=r.Base.create("PageLayout",r.Model,[],{toJSON:function(){var e=l.superclass.toJSON.call(this);e.rows=this.get("rows").toJSON();delete e.promotedBlockTypes;delete e.parentLayout;return e},isEmpty:function(){var e=o(this.toJSON());if(1!==e.length)return 0===e.length;var t=e[0];var a=t.value&&t.value.html||"";return n.includes(t.type)&&d(a)},isBlank:function(){var e=o(this.toJSON());if(1!==e.length)return 0===e.length;var t=e[0];var a=t.value&&t.value.html||"";return(t.type===s.type||t.type===i.type)&&p(a)},_getDefaultRows:function(){return[{columns:[{span:this.get("columns"),blocks:[this._getDefaultBlock()]}]}]},_getDefaultBlock:function(){var e=window.Static||{};if(r.Object.getValue(e,"SQUARESPACE_CONTEXT.websiteSettings.markdownMode".split(".")))return s;return i},togglePromote:function(e){var t;var a;if(this.get("legacyPromotedLayout")){var i=this._getPromotedBlockInfo(this.toJSON(),this.get("promotedBlockTypes"));r.Lang.isValue(i)&&(t=i.block.id)}else t=this.get("promotedBlockId");if(r.Lang.isValue(t)){var s=r.one("#block-"+t);a=r.Widget.getByNode(s)}if(a===e){this.set("promotedBlockId",null);e.set("promoted",false)}else{this.set("promotedBlockId",e.get("id"));e.set("promoted",true);r.Lang.isValue(a)&&a.set("promoted",false)}this.set("legacyPromotedLayout",false)},isPromotedBlock:function(e){var t=this.get("promotedBlockId");var a=this.get("legacyPromotedLayout");if(r.Lang.isValue(e)&&e.inPromotedLayout){var i=e.get("id");if(a)return e.inPromotedLayout();return t===i}return false},_getPromotedBlockInfo:function(e,t){if(!this.get("legacyPromotedLayout"))return this._findBlockById(this.get("promotedBlockId"),e);if(r.Lang.isArray(e.rows)&&e.rows.length>0)return this._getPromotedBlockInfo(e.rows[0],t);if(r.Lang.isArray(e.columns)&&e.columns.length>0)return this._getPromotedBlockInfo(e.columns[0],t);if(r.Lang.isArray(e.blocks)&&e.blocks.length>0){var a=e.blocks[0];if(r.Lang.isValue(a.floatDir))return false;if(-1===t.indexOf(a.type))return false;return{block:a,span:e.span,parentBlocksList:e.blocks}}},_findBlockById:function(t,e){var a=function(e){return e.id===t};var i=[e];while(i.length>0){var s=i.shift();if(r.Lang.isArray(s.rows))i.push.apply(i,s.rows);else if(r.Lang.isArray(s.columns))i.push.apply(i,s.columns);else if(r.Lang.isArray(s.blocks)){var n=r.Array.find(s.blocks,a,this);if(r.Lang.isValue(n))return{block:n,span:s.span,parentBlocksList:s.blocks}}}return false},_findPromotedBlock:function(e){r.Array.find(e.blocks,function(e){return e.get("id")===this.get("promotedBlockId")})},getMainPageLayout:function(e){var t=r.clone(this.toJSON());var a=this._getPromotedBlockInfo(t,e);r.Lang.isObject(a)&&a.span==this.get("columns")&&a.parentBlocksList.remove(a.block);var i=new l(r.merge(t,{columns:this.get("columns"),parentLayout:this,promotedBlockId:this.get("promotedBlockId"),legacyPromotedLayout:this.get("legacyPromotedLayout"),span:this.get("span")}));return i},getPromotedPageLayout:function(e){var t=this.toJSON();var a=this._getPromotedBlockInfo(t,e);if(!r.Lang.isObject(a)||a.span!==this.get("columns"))return new l({columns:this.get("columns"),parentLayout:this,promotedBlockId:this.get("promotedBlockId"),legacyPromotedLayout:this.get("legacyPromotedLayout"),span:this.get("span")});var i=r.clone(a.block);var s=new l({rows:[{columns:[{blocks:[i],span:a.span}]}],parentLayout:this,promotedBlockId:this.get("promotedBlockId"),legacyPromotedLayout:this.get("legacyPromotedLayout"),span:this.get("span")});return s}},{ATTRS:{rows:{valueFn:"_getDefaultRows",setter:function(e){if(r.Lang.isArray(e)){0===e.length&&(e=this._getDefaultRows());return new c({items:e})}if(r.instanceOf(e,c))return e}},columns:{value:12},legacyPromotedLayout:{value:true,validator:r.Lang.isBoolean,getter:function(e){var t=this.get("parentLayout");if(r.Lang.isValue(t))return t.get("legacyPromotedLayout");return e},setter:function(e){var t=this.get("parentLayout");if(r.Lang.isValue(t))return t.set("legacyPromotedLayout",e);return e}},promotedBlockId:{value:null,getter:function(e){var t=this.get("parentLayout");if(r.Lang.isValue(t))return t.get("promotedBlockId");return e},setter:function(e){var t=this.get("parentLayout");if(r.Lang.isValue(t))return t.set("promotedBlockId",e);return e}},promotedBlockTypes:{value:[],validator:r.Lang.isArray},parentLayout:{value:null},collectionId:{value:null},parentItemId:{value:null}}});var t=r.namespace("SQS.LayoutEngine.Models").EditableContentBlock=r.Base.create("EditableContentBlock",r.Model,[],{toJSON:function(){var e=t.superclass.toJSON.call(this);e.layout=this.get("layout").toJSON();r.Lang.isValue(e.updatedOn)||(e.updatedOn=new Date);e.updatedOn=e.updatedOn.getTime();return e},_setLayout:function(e,t,a){var i=this.get("layout");if(r.instanceOf(i,l)){i.setAttrs(e,a);return i}if(r.instanceOf(e,l))return e;return new l(e)}},{ATTRS:{layout:{valueFn:function(){return new l},setter:"_setLayout"},updatedOn:{setter:function(e){if(r.Lang.isNumber(e))return new Date(e);if(r.Lang.isDate(e))return e;console.warn("Invalid updatedOn field set: ",e);return r.Attribute.INVALID_VALUE}}}});var a=r.Base.create("BlockList",r.ModelList,[],{});r.Base.create("Column",r.Model,[],{},{ATTRS:{blocks:{value:[],setter:function(e){if(r.Lang.isArray(e))return new a({items:e});if(r.instanceOf(e,a))return e}}}});var e=r.Base.create("Row",r.Model,[],{});var c=r.Base.create("RowList",r.ModelList,[],{model:e})},"1.0",{requires:["base","model","model-list"]})},"./src/main/webapp/universal/scripts-layout-engine/plugin-resize-grid.js":function(e,t){YUI.add("@sqs/layout-engine/plugin-resize-grid",function(t){t.namespace("SQS.LayoutEngine.Plugin.ResizeGrid");var a=t.SQS.LayoutEngine.Plugin.ResizeGrid=t.Base.create("resizeGrid",t.Plugin.Base,[t.SQS.LayoutEngine.Mixins.EventRegistrar],{initializer:function(){var e=t.Array.filter(["resizeNode","contentNode","layoutNode"],function(e){return!this.get(e)},this);if(e.length)console.log("Warning - The following properties are missing and required for %s: %s",a.NS,e.join());else{this._bindResizeEvents();this._bindMouseEvents()}},_updateContentOffsets:function(){var e=this.get("resizeNode").getDOMNode().getBoundingClientRect();var t=this.get("contentNode").getDOMNode().getBoundingClientRect();var a=this.get("layoutNode").getDOMNode().getBoundingClientRect();var i=e.bottom-t.bottom;var s=(t.top-a.top)%this.get("gridSize");this.setAttrs({contentGridOffset:s,contentPaddingOffset:i})},_bindResizeEvents:function(){var e=this.get("host");this._registerEvent(e.on("resize:start",this._updateContentOffsets,this),e.after("resize:align",this._afterResizeAlign,this))},_bindMouseEvents:function(){this._registerEvent(t.one("body").on("mousemove",function(e){this.set("enabled",e.shiftKey)},this))},_afterResizeAlign:function(){this._checkHeight()},_snapHeightToGrid:function(e){var t=this.get("gridSize");var a=this.get("contentPaddingOffset");var i=this.get("contentGridOffset");var s=a-i;return Math.round((e-s)/t)*t+s},_checkHeight:function(){if(this.get("enabled")){var e=this.get("host");var t=e.info;var a=this._snapHeightToGrid(t.offsetHeight);t.offsetHeight!==a&&e._checkSize("offsetHeight",a)}}},{NS:"resizeGrid",ATTRS:{gridSize:{value:20},contentPaddingOffset:{value:null},contentGridOffset:{value:null},resizeNode:{value:null},contentNode:{value:null},layoutNode:{value:null},enabled:{value:false}}})},"1.0",{requires:["base","plugin","@sqs/layout-engine/event-registrar"]})},"./src/main/webapp/universal/scripts-layout-engine/scroll-into-view.js":function(e,t){YUI.add("@sqs/layout-engine/scroll-into-view",function(p){"use strict";p.Node.prototype.scrollIntoView=function(){var e=p.Node.getDOMNode(this.get("offsetParent"));if(!e)return this;var t={top:this.get("offsetTop"),bottom:this.get("offsetTop")+this.get("offsetHeight"),left:this.get("offsetLeft"),right:this.get("offsetLeft")+this.get("offsetWidth")};t.move=function(e,t){this.top+=t;this.bottom+=t;this.left+=e;this.right+=e};while(1){while(1){var a=null===e.offsetParent;var i=p.one(e),s=p.Node.getDOMNode(i)===p.config.doc.body,n=s?p.DOM.winWidth():e.clientWidth,r=s?p.DOM.winHeight():e.clientHeight;if(e.scrollWidth-i.horizMarginBorderPadding()>n||e.scrollHeight-i.vertMarginBorderPadding()>r)break;if(a)return this;t.move(e.offsetLeft-e.scrollLeft,e.offsetTop-e.scrollTop);e=e.offsetParent||e.parentNode}var o=a?p.config.doc.documentElement.scrollLeft||p.config.doc.body.scrollLeft:e.scrollLeft;var l=a?p.config.doc.documentElement.scrollTop||p.config.doc.body.scrollTop:e.scrollTop;var c={top:l,bottom:l+(a?p.DOM.winHeight():e.clientHeight),left:o,right:o+(a?p.DOM.winWidth():e.clientWidth)};var u=0;"hidden"==i.getStyle("overflowY")||(t.top<c.top?u=t.top-c.top:t.bottom>c.bottom&&(u=Math.min(t.bottom-c.bottom,t.top-c.top)));var d=0;"hidden"==i.getStyle("overflowX")||(t.left<c.left?d=t.left-c.left:t.right>c.right&&(d=Math.min(t.right-c.right,t.left-c.left)));if(a){(d||u)&&window.scrollBy(d,u);break}e.scrollLeft+=d;e.scrollTop+=u;t.move(e.offsetLeft-e.scrollLeft,e.offsetTop-e.scrollTop);e=e.offsetParent}return this}},"1.0",{requires:["dom-screen","@sqs/layout-engine/dimensions"]})},"./src/main/webapp/universal/scripts-layout-engine/shared/constants/BlockTypeStrings.js":function(e,t,a){var i=a("./common/temp/node_modules/lodash/invert.js");var s=a("./common/temp/node_modules/lodash/mapValues.js");var n=a("./common/temp/node_modules/lodash/camelCase.js");var r=a("./common/temp/node_modules/lodash/kebabCase.js");var o=a("./common/temp/node_modules/lodash/startCase.js");var l=a("./src/main/webapp/frontend/packages/enums/BlockType.js");var c=i(l);var u=s(c,n);var d=s(c,r);var p=s(c,o);e.exports={BlockTypeKeys:c,BlockTypeName:u,BlockTypeLabels:p,BlockTypeKebab:d}},"./src/main/webapp/universal/scripts-layout-engine/shared/constants/BlockVariantTypeKeys.js":function(e,t,a){var i=a("./common/temp/node_modules/lodash/invert.js");var s=a("./src/main/webapp/universal/scripts-layout-engine/shared/constants/BlockVariantTypes.js");e.exports=i(s)},"./src/main/webapp/universal/scripts-layout-engine/shared/constants/BlockVariantTypes.js":function(e,t){var a={GALLERY_SLIDESHOW:1e3,GALLERY_CAROUSEL:1002,GALLERY_GRID:1003,GALLERY_STACK:1004,SUMMARY_WALL:1005,SUMMARY_CAROUSEL:1006,SUMMARY_LIST:1007,SUMMARY_GRID:1008,CHART_BAR:1009,CHART_LINE:1010,CHART_PIE:1011,IMAGE_INLINE:1012,IMAGE_POSTER:1013,IMAGE_CARD:1014,IMAGE_OVERLAP:1015,IMAGE_COLLAGE:1016,IMAGE_STACK:1017};e.exports=a},"./src/main/webapp/universal/scripts-layout-engine/shared/constants/Constants.js":function(e,t){var a={README_PAGE_NAME:"readme",MAX_SMUGMUG_GALLERY_COUNT:20,MAX_SMUGMUG_GALLERY_SIZE:50,MAX_BLOCKS_PER_LAYOUT:60,MAX_TRACKS_IN_ALBUM:60,MAX_ITEMS_IN_USER_ORDERABLE_COLLECTION:250,MAX_PRODUCTS_IN_COLLECTION:200,NESTED_CATEGORIES_LIMIT:1e4,SQUARESPACE_SEVEN_PREVIEW_COOKIE:"squarespace_seven_preview",SQUARESPACE_SIX_OVERRIDE_COOKIE:"squarespace_six_override",PREVIEW_FRAME_EXPANDED_COOKIE:"seven_frame_expanded",DISABLE_USER_SCRIPTS_COOKIE:"disable-user-scripts",IGNORED_ITEM_ANNOTATION_SELECTORS:["sqs-simple-like","sqs-add-to-cart-button","product-variants","product-quantity-input","sqs-suppress-edit-mode"],REGISTERED_ACTIONS_FOR_NEXT_LOAD_STORE_KEY:"sqs_actions_for_next_load",DAMASK_URL_PREVIEW_SEPARATOR:"|",MAX_TAG_LENGTH:50,MAX_CATEGORY_LENGTH:25,PASSWORD_MASK:"__MASKED_FIELD__",DRAG_CLICK_TIME_THRESHOLD:300};e.exports=a},"./src/main/webapp/universal/scripts-layout-engine/shared/copies/enum-factory.js":function(e,t){YUI.add("@sqs/layout-engine/enum-factory",function(n){n.namespace("SQS.LayoutEngine").enumFactory=function(e){var i=function(){throw new Error("Can't Instantiate Enumerations")};var s=i.prototype={constructor:i,toString:function(){return this.enumName},valueOf:function(){return this.value},toJSON:function(){return this.enumName}};i.values=[];n.Object.each(e,function(e,t){var a=function(){};a.prototype=s;a.enumName=t;a.value=e;i[t]=a;i.values.push(a)});i.each=function(t,a){n.Array.each(this.values,function(e){t.call(a,e)})};i.isValid=function(e){if(!n.Lang.isValue(e))return false;var t=i[e.enumName];return n.Lang.isValue(t)&&e===t};return i}},"1.0",{requires:[]})},"./src/main/webapp/universal/scripts-layout-engine/shared/copies/event-registrar.js":function(e,t){YUI.add("@sqs/layout-engine/event-registrar",function(a){a.namespace("SQS.LayoutEngine.Mixins");a.SQS.LayoutEngine.Mixins.EventRegistrar=a.Base.create("event-registrar",a.Base,[],{destructor:function(){a.Array.invoke(this.get("eventListeners"),"detach")},_registerEvent:function(){if(a.Lang.isArray(arguments[0]))this._registerEvent.apply(this,arguments[0]);else for(var e=0,t=arguments.length;e<t;e++)a.Lang.isValue(arguments[e])&&this.get("eventListeners").push(arguments[e])}},{ATTRS:{eventListeners:{value:[]}}})},"1.0",{requires:["array-invoke","base"]})},"./src/main/webapp/universal/scripts-layout-engine/shared/copies/model-sync-rest.js":function(e,t){YUI.add("@sqs/layout-engine/model-sync-rest",function(o){function e(){this._ioConfigCache={}}e.prototype={sync:function(e,t,a){o.Lang.isValue(t.timeout)||(t.timeout=1e7);o.ModelSync.REST.prototype.sync.apply(this,arguments)},_storeRequest:function(e,t){this._ioConfigCache[e.id]=o.merge(t,{})},_retrieveAndEvict:function(e){var t=this._ioConfigCache[e];this._ioConfigCache[e]=null;return t},_isCrumbFailure:function(e){return e&&e.crumbFail&&e.crumb},_sendSyncIORequest:function(e){var t=o.ModelSync.REST.prototype._sendSyncIORequest.apply(this,arguments);this._storeRequest(t,e);return t},_onSyncIOEnd:function(e,t){this._retrieveAndEvict(e);o.ModelSync.REST.prototype._onSyncIOEnd.apply(this,arguments)},_onSyncIOSuccess:function(e,t,a){var i=this._retrieveAndEvict(e);var s={};var n=t.responseText;o.Lang.isValue(n)&&n.trim()&&(s=o.JSON.parse(n));if(this._isCrumbFailure(s)){var r=s.crumb;o.ModelSync.REST.CSRF_TOKEN=r;o.Env.CSRF_TOKEN=r;i.headers["X-CSRF-Token"]=r;this._sendSyncIORequest(i)}else o.ModelSync.REST.prototype._onSyncIOSuccess.apply(this,arguments)},_onSyncIOFailure:function(e,t,a){var i=a.callback;if(i){var s={};var n=t.responseText;o.Lang.isValue(n)&&n.trim()&&(s=o.JSON.parse(n));i({code:t.status,msg:t.statusText,responseJSON:s},t)}}};o.mix(e,o.ModelSync.REST,false,null,1);o.namespace("SQS.LayoutEngine.ModelSync");o.SQS.LayoutEngine.ModelSync.REST=e},"1.0",{requires:["model-sync-rest"]})},"./src/main/webapp/universal/scripts-layout-engine/shared/copies/plugin-scroll-lock.js":function(e,t){YUI.add("@sqs/layout-engine/plugin-scroll-lock",function(o){o.namespace("SQS.LayoutEngine.Copies.Plugin").ScrollLock=o.Base.create("ScrollLock",o.Plugin.Base,[],{initializer:function(e){var n=this.get("host");var r=n.getDOMNode();this.listener=function(e){e.stopPropagation();if(!o.Lang.isNumber(r.scrollTop)){e.preventDefault();return false}var t=parseInt(n.getComputedStyle("height"),10);var a=r.scrollTop;var i=r.scrollHeight-t;var s=e.wheelDelta||-e.detail;if(a<=0&&s>0||a>=i&&s<0){e.preventDefault();return false}};if(r.addEventListener){r.addEventListener("mousewheel",this.listener);r.addEventListener("DOMMouseScroll",this.listener);r.addEventListener("MozMousePixelScroll",this.listener)}else r.attachEvent&&r.attachEvent("onmousewheel",this.listener)},destructor:function(){var e=this.get("host").getDOMNode();if(e.removeEventListener){e.removeEventListener("mousewheel",this.listener);e.removeEventListener("DOMMouseScroll",this.listener);e.removeEventListener("MozMousePixelScroll",this.listener)}else e.detachEvent&&e.detachEvent("onmousewheel",this.listener)}},{NS:"ScrollLock",ATTRS:{}})},"1.0",{requires:["base","node","plugin"]})},"./src/main/webapp/universal/scripts-layout-engine/shared/copies/resize-emitters.js":function(e,t){YUI.add("@sqs/layout-engine/resize-emitters",function(s){s.namespace("SQS.LayoutEngine");s.SQS.LayoutEngine.ResizeEmitter=s.Base.create("ResizeEmitter",s.Base,[],{initializer:function(){this.resizeEvent=s.on("resize",this._handleResize,s.config.win,this);this.after("resizingChange",this._afterResizingChange);if(this._requiresSizeCalculating()){this.on("resize:end",this._resetSize);this._resetSize()}},destructor:function(){if(this.timer){this.timer.cancel();this.timer=null}this.resizeEvent.detach();this.resizeEvent=null},_resetSize:function(){this.setAttrs({width:s.config.win.innerWidth,height:s.config.win.innerHeight})},_afterResizingChange:function(e){var t=e.newVal?"resize:start":"resize:end";this.fire(t)},_getWindowDiff:function(e){var t=s.config.win["inner"+e.capitalize()];var a=this.get(e);return Math.abs(t-a)},_requiresSizeCalculating:function(){return this.get("threshold")>0||s.Lang.isValue(this.get("axis"))},_canEmitResizeEvent:function(){var e;var t;var a=this.get("axis");var i=this.get("threshold");if(s.Lang.isValue(a)){t=a===this.constructor.AXES.X?"width":"height";e=this._getWindowDiff(t)>i}else e=this._getWindowDiff("width")>i||this._getWindowDiff("height")>i;return e},_handleResize:function(){if(!this.get("resizing")){if(this._requiresSizeCalculating()&&!this._canEmitResizeEvent())return;this.set("resizing",true)}this.timer&&this.timer.cancel();this.timer=s.later(this.get("timeout"),this,function(){if(!s.Env)return;this.set("resizing",false)});this.fire("resize")}},{AXES:{X:"x",Y:"y"},ATTRS:{axis:{validator:function(e){return s.Object.values(this.constructor.AXES).includes(e)}},height:{},resizing:{validator:s.Lang.isBoolean,value:false},threshold:{validator:s.Lang.isNumber,value:0},timeout:{value:300},width:{}}})},"1.0",{requires:["base","event","node"]})},"./src/main/webapp/universal/scripts-layout-engine/shared/copies/url-utils.js":function(e,t){YUI.add("@sqs/layout-engine/url-utils",function(e){e.namespace("SQS.LayoutEngine");var a="https:";var i=new RegExp("^((https?:)?//)+","i");var s=e.SQS.LayoutEngine.UrlUtils={isSecure:function(e){var t=null;0===arguments.length?t=window.location.protocol:e&&(t=(e+"").toLowerCase().substring(0,6));return t===a},securifyURL:function(e){if(!e||e.startsWith("data:"))return e;return a+"//"+this._stripProtocolAndSlashes(e)},toRelativeProtocol:function(e){if(!e)return e;return"//"+this._stripProtocolAndSlashes(e)},securifyBlockEmbed:function(e,i){if(!this.isSecure()||!e)return;var t=e.all("object embed, iframe");var s=t.size();t.each(function(e,t){var a=e.getAttribute("src");a&&e.setAttribute("src",this.securifyURL(a));if(i&&s===t+1){e.setStyle("display","none");e.setStyle("display",null)}},this)},_stripProtocolAndSlashes:function(e){return(e+"").replace(i,"")},ensureProtocol:function(e){e=e.search(/^https?:\/\//i)<0?"http://"+e.replace(/^(\/\/)+/,""):e.replace(i,function(e,t){return t});return e},isSlash:function(e){return"/"===e},isProperUrl:function(e){var t=/^(https?:)?(\/\/)?[a-zA-Z0-9][a-zA-Z0-9_\-\.]*\.[a-zA-Z]{2,3}(\S*)?$/i;return e.search(t)>-1},isIP:function(e){return e.search(/^(https?:)?(\/\/)?[0-9]+\.[0-9]+\.[0-9]+\.[0-9]+/i)>-1},isAnchor:function(e){return s._doesStringStartWith(e,"#")&&e.length<100},isTel:function(e){return s._doesStringStartWith(e,"tel:")&&e.length<50},isMailto:function(e){return s._doesStringStartWith(e,"mailto:")&&e.length<1e3},isJavascript:function(e){return s._doesStringStartWith(e,"javascript:")&&e.length<250},isFtp:function(e){return s._doesStringStartWith(e,"ftp:")&&e.length<100},isInternalUrl:function(e){return s._doesStringStartWith(e,"\\/[^\\/]")&&e.length<150},_doesStringStartWith:function(e,t){return!!e&&0===e.search(new RegExp("^"+t+".+"))},addQueryParam:function(e,t,a){var i;var s=e.split("#");if(s.length>1){i=s.slice(1).join();e=s[0]}var n=-1!==e.indexOf("?")?"&":"?";e+=n+t+"="+a;i&&(e+="#"+i);return e},isLinkExternal:function(e){if(!e.match(i))return false;var t=this._stripProtocolAndSlashes(e);var a=t.split("/")[0];return a.toLowerCase()!==location.host.toLowerCase()},_getNode:function(e){var t=document.createElement("a");t.href=e;return t},getPath:function(e){e=this._getNode(e);return e.pathname},getSearch:function(e){e=this._getNode(e);return e.search},getHash:function(e){e=this._getNode(e);return e.hash},pathMatches:function(e,t){e=this._getNode(e);t=this._getNode(t);return e.pathname==t.pathname},createUrl:function(e,t){var a=e;t&&(a+=t);a=a.replace(/\//g,"");return s.createUrlWithSlash(a)},createUrlWithSlash:function(e){e=e.trim().replace(new RegExp("[ ]+","g")," ").replace(new RegExp("[ ]","g"),"-").replace(new RegExp("[^a-zA-Z0-9/\\-]","g"),"").replace(new RegExp("[\\.\\-]{2,}","g"),"-").replace(new RegExp("[\\.\\/]{2,}","g"),"/").toLowerCase();return e}}},"1.0",{requires:[]})},"./src/main/webapp/universal/scripts-layout-engine/shared/utils/JsonSchemaUtils.js":function(e,t,a){var s=a("./common/temp/node_modules/@sqs/block-schemas/build/index.js");var n=a("./common/temp/node_modules/@sqs/jsf-utils/lib/es/main.js");var o=a("./common/temp/node_modules/lodash/each.js");var l=a("./common/temp/node_modules/lodash/times.js");var r=a("./common/temp/node_modules/lodash/set.js");var i={};var c=function(e,n){var r=function(e){var i={};var s=[];o(e,function(e,t,a){if("array"===e.type){l(e.cycles,function(){s.push(r(a[t].items));i[t]=s});return}if("object"===e.type){if(!t){i=r(a[t].properties);return i}i[t]=r(a[t].properties);return i}i[t]=n||null});return i};return r(e.properties)};i.blockSchemaToYuiAttrs=function(e){if(!e){console.warn("No blockName provided");return}var t=s[e];if(!t){console.warn("No definition for blockName"+e);return}var a=n.objectUtils.flatten(t.defaultData||{});var i=c(t.schema,{value:null});Object.keys(a).forEach(function(e){r(i,e,{value:a[e]})});return i};e.exports=i},"./src/main/webapp/universal/scripts-layout-engine/shared/utils/ancestor.js":function(e,t,a){var r=a("./common/temp/node_modules/@sqs/utils/dom/findClosest.js");e.exports=function e(t,a,i,s){var n=t.getDOMNode?t.getDOMNode():t;i||(n=n&&n.parentElement);if(!n)return null;return r(n,a,s)}},"./src/main/webapp/universal/scripts-layout-engine/shared/utils/chartjs-helpers.js":function(e,t,a){var C=a("./common/temp/node_modules/lodash/isEmpty.js");var E=a("./common/temp/node_modules/lodash/noop.js");var w=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var A=a("./common/temp/node_modules/@sqs/chart.js/Chart.js");var T=a("./src/main/webapp/universal/scripts-layout-engine/shared/constants/BlockVariantTypes.js");YUI.add("@sqs/layout-engine/chartjs-helpers",function(h){h.namespace("ChartJS");var t=500;var n=[];var c=h.ChartJS.getDefaultChartData=function(e){switch(parseInt(e,10)){case T.CHART_BAR:return{data:[[150],[250],[150]],sampleLabels:[w("New York"),w("Las Vegas"),w("San Francisco")],seriesLabels:[w("Population")]};case T.CHART_LINE:return{data:[[150,100],[250,200],[150,350]],sampleLabels:[w("New York"),w("Las Vegas"),w("San Francisco")],seriesLabels:[w("Population"),w("GDP")]};case T.CHART_PIE:return{data:[[150],[200],[150]],sampleLabels:[w("New York"),w("Las Vegas"),w("San Francisco")],seriesLabels:[w("Population")]}}};function r(e){n.push(e)}function e(e){n.remove(e)}function o(){var e=n.map(function(e){return null===e.node.getDOMNode()?e:null});e.filter(function(e){return e}).forEach(function(e){e.destroy()})}function l(e,t,a){var i={default:[[121,121,121],[191,191,191],[229,229,229],[156,156,156],[0,0,0]],Cobblestone:[[41,31,22],[180,158,146],[127,112,105],[76,61,48],[69,45,35]],Italia:[[124,184,200],[2,100,171],[2,155,59],[227,2,27],[202,180,130]],Muted:[[52,43,43],[112,105,100],[156,148,131],[212,207,198],[240,226,208]],Primary:[[240,82,59],[247,180,19],[36,128,196],[144,187,98],[134,95,144]],Warm:[[153,0,0],[226,71,45],[233,148,48],[248,220,171],[251,243,171]],Cool:[[16,44,99],[7,75,230],[81,146,235],[158,173,211],[225,220,252]],"Tea Party":[[115,13,3],[182,125,44],[234,195,148],[231,144,72],[64,2,18]],Highway:[[176,201,217],[166,166,166],[89,72,57],[191,108,59],[230,134,50]],Shops:[[227,227,230],[69,78,89],[95,205,217],[113,153,138],[213,230,69]],Suburbs:[[73,33,48],[227,227,227],[69,84,115],[206,208,159],[236,101,102]],"DB-Nine":[[134,135,136],[168,182,111],[169,143,119],[227,126,94],[100,138,189]],"M-Three":[[98,140,187],[209,191,78],[90,98,105],[13,76,136],[188,199,208]],Thunderbird:[[217,60,73],[103,189,218],[231,231,192],[227,170,179],[177,202,123]]};var s={dark:1,medium:.75,light:.5,xlight:.2,off:0};e in i||(e="default");var n=i[e];return"rgba("+n[t%n.length]+","+s[a]+")"}function u(e){return{scaleFontFamily:e.getComputedStyle("font-family"),scaleFontSize:parseInt(e.getComputedStyle("font-size"),10),scaleFontStyle:e.getComputedStyle("font-style"),tooltipFontFamily:e.getComputedStyle("font-family"),tooltipFontSize:.8*parseInt(e.getComputedStyle("font-size"),10),tooltipFontStyle:e.getComputedStyle("font-style"),tooltipTitleFontFamily:e.getComputedStyle("font-family"),tooltipTitleFontSize:parseInt(e.getComputedStyle("font-size"),10),tooltipTitleFontStyle:"bold",scaleLabel:"<%= '  ' + value%>"}}function d(e){var t=e;"CANVAS"!==t.get("tagName")&&(t=t.one("canvas"));return t}function p(a,e){if(e){var t=a.sampleLabels;a.sampleLabels=a.seriesLabels;a.seriesLabels=t;a.data=h.Array(a.data[0]).map(function(e,t){return h.Array(a.data).map(function(e){return e[t]})})}var i=Math.min(a.data.length,a.sampleLabels.length);var s=Math.min(a.data[0].length,a.seriesLabels.length);a.sampleLabels=a.sampleLabels.slice(0,i);a.seriesLabels=a.seriesLabels.slice(0,s);a.data=a.data.slice(0,i);for(var n=0;n<a.data.length;n++)a.data[n]=a.data[n].slice(0,s);return a}function a(e,t,a){var i=e.datasets[0][t].length;var s=a.sampleLabels.length-i;var n=e.datasets.length;var r=a.seriesLabels.length-n;return r||s&&r}function i(e,t,a){var i=e.datasets.length;var s=a.seriesLabels.length-i;var n=0;if(s>0){var r=e.datasets[i-1];for(n=0;n<s;n++)e.datasets.push(h.clone(r))}else s<0&&(e.datasets=e.datasets.slice(0,a.seriesLabels.length));var o=e.datasets[0][t].length;var l=a.sampleLabels.length-o;if(l>0){var c=o;for(n=0;n<l;n++){var u=h.Array(a.seriesLabels).map(function(){return 0});e.addData(u,a.sampleLabels[c++])}}else if(l<0)for(n=0;n>l;n--)e.removeData();var d=0;for(d=0;d<a.sampleLabels.length;d++)e.scale.xLabels[d]=a.sampleLabels[d];for(d=0;d<e.datasets.length;d++){e.datasets[d].label=a.seriesLabels[d];for(n=0;n<e.datasets[d][t].length;n++){var p=a.data[n][d];(isNaN(p)||null===p||void 0===p)&&(p=0);e.datasets[d][t][n].value=[p];e.datasets[d][t][n].label=a.sampleLabels[n]}}e.update()}function g(i,s){return function(e){var t="";t+='<ul class="'+h.Escape.html(e.name.toLowerCase())+'-legend">';for(var a=0;a<e[i].length;a++){t+='<li><span style="background-color:'+e[i][a][s]+'"></span>';e[i][a].label&&(t+=h.Escape.html(e[i][a].label));t+="</li>"}t+="</ul>";return t}}var s=function(e,t,a,i,s){this.node=e;this._options=s||{};this._canvas=d(e);this._narrow=false;this._palette=a;this._flip=i;this._data=p(h.clone(t,true),this._flip);this._makeChart();this.generateLegend();this.resize();r(this)};s.prototype={destroy:function(){this._chart.destroy();e(this)},resize:function(){var e=this._canvas.getDOMNode();if(e){if(e.parentNode.clientWidth>0){this._chart.stop();this._chart.resize(this._chart.render,true);if(e.parentNode.clientWidth<t){if("Bar"===this._chart.name&&!this._narrow){this._options=h.merge(this._options,{barValueSpacing:5,barDatasetSpacing:1});this._rebuildChart()}this.node.addClass("narrow-chart");this._narrow=true}else{if("Bar"===this._chart.name&&this._narrow){this._options=h.merge(this._options,{barValueSpacing:20,barDatasetSpacing:5});this._rebuildChart()}this.node.removeClass("narrow-chart");this._narrow=false}}}else o()},generateLegend:function(){this.node.all(".legend-content").each(function(e){e.empty();e.append(this._chart.generateLegend())},this)},_rebuildChart:function(){this._chart.destroy();this._makeChart()}};var m=h.namespace("ChartJS").BarChart=h.extend(function(){s.apply(this,arguments)},s,{_makeChart:function(){var e=h.merge(u(this.node),{barShowStroke:true,datasetStrokeWidth:3,animationSteps:25,barValueSpacing:20,barDatasetSpacing:5,legendTemplate:g("datasets","fillColor")},this._options);var t={labels:this._data.sampleLabels,datasets:[]};for(var a=0;a<this._data.seriesLabels.length;a++){var i=[];for(var s=0;s<this._data.sampleLabels.length;s++)i.push(this._data.data[s][a]);t.datasets.push({label:this._data.seriesLabels[a],data:i,fillColor:l(this._palette,a,"dark"),strokeColor:"rgba(0,0,0,0)",highlightFill:l(this._palette,a,"medium"),highlightStroke:"rgba(0,0,0,0)"})}this._canvas.empty();var n=this._canvas.getDOMNode().getContext("2d");this._chart=new A(n).Bar(t,e)},sync:function(e){C(e)?this._data=c(T.CHART_BAR):this._data=p(h.clone(e,true),this._flip);a(this._chart,"bars",this._data)?this._rebuildChart():i(this._chart,"bars",this._data);this.generateLegend();this.resize()}});var f=h.ChartJS.LineChart=h.extend(function(){s.apply(this,arguments)},s,{_makeChart:function(){var e=h.merge(u(this.node),{datasetFill:false,animationSteps:25,legendTemplate:g("datasets","strokeColor")},this._options);var t={labels:this._data.sampleLabels,datasets:[]};for(var a=0;a<this._data.seriesLabels.length;a++){var i=[];for(var s=0;s<this._data.sampleLabels.length;s++)i.push(this._data.data[s][a]);t.datasets.push({label:this._data.seriesLabels[a],data:i,fillColor:"rgba(0,0,0,0)",strokeColor:l(this._palette,a,"dark"),pointColor:l(this._palette,a,"dark"),pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:l(this._palette,a,"medium")})}var n=this._canvas.getDOMNode().getContext("2d");this._chart=new A(n).Line(t,e)},sync:function(e){C(e)?this._data=c(T.CHART_LINE):this._data=p(h.clone(e,true),this._flip);a(this._chart,"points",this._data)?this._rebuildChart():i(this._chart,"points",this._data);this.generateLegend();this.resize()}});function v(e){var t=h.Array(e.data).reduce(function(e,t){return e+(t.length>0?t[0]:0)},0);0===t&&(e.data=h.Array(e.data).map(function(e){return h.Array(e).map(function(e,t){return 0===t?1:e})}));return e}var b=h.ChartJS.PieChart=h.extend(function(){s.apply(this,arguments)},s,{_makeChart:function(){var e=h.merge(u(this.node),{datasetFill:false,percentageInnerCutout:60,animationSteps:25,legendTemplate:g("segments","fillColor")},this._options);var t=[];for(var a=0;a<this._data.sampleLabels.length;a++)t.push({label:this._data.sampleLabels[a],value:this._data.data[a][0],color:l(this._palette,a,"dark"),highlight:l(this._palette,a,"medium")});var i=this._canvas.getDOMNode().getContext("2d");this._chart=new A(i).Pie(t,e)},sync:function(e){var t=0;C(e)?this._data=c(T.CHART_PIE):this._data=v(p(h.clone(e,true),this._flip));var a=this._chart;var i=this._data;var s=a.segments.length;var n=i.sampleLabels.length-s;if(n>0){var r=s;for(t=0;t<n;t++){a.addData({value:0,label:i.sampleLabels[r],color:l(this._palette,r,"dark"),highlight:l(this._palette,r,"medium")});r++}}else if(n<0)for(t=0;t>n;t--)a.removeData();for(var o=0;o<a.segments.length;o++){a.segments[o].value=i.data[o][0];a.segments[o].label=i.sampleLabels[o]}a.update();this.generateLegend();this.resize()}});h.ChartJS.createChart=function(e,t,a,i,s){function n(e){switch(e){case T.CHART_BAR:return m;case T.CHART_LINE:return f;case T.CHART_PIE:return b}}var r=parseInt(e,10);a&&a.data&&0!==a.data.length||(a=c(r));var o=n(r);var l=new o(t,a,i,s);return l};var S=h.ChartJS.initializeCharts=function(){function e(e){o();var t=n.map(function(e){return e.node});var a=t.indexOf(e)>=0;if(!a){var i=e.getAttribute("data-settings")||"{}";try{var s=JSON.parse(i.replace(/\&quot;/g,'"'));h.ChartJS.createChart(s.chartType,e,s.dataTable,s.palette,s.flip)}catch(e){if(!(e instanceof SyntaxError))throw e;console.error("[layout-engine/chartjs-helpers] Failed to render chart. Parse error.")}}}h.all(".sqs-block.chart-block .chart-block-container").each(e)};var y;function _(){function e(){clearTimeout(y);y=setTimeout(function(){n.forEach(function(e){e.resize()})},50)}h.one(h.config.win).after("resize",e)}h.config.win.Squarespace=h.config.win.Squarespace||{onInitialize:E,onDestroy:E};h.config.win.Squarespace.onInitialize(h,function(){S();_()});h.config.win.Squarespace.onDestroy(h,function(){clearTimeout(y);n.forEach(function(e){e.destroy()})})},"1.0",{requires:[]})},"./src/main/webapp/universal/scripts-layout-engine/shared/utils/getAltText.js":function(e,t){e.exports=function e(t,a,i){var s=a.replace(/<br>/g," ").replace(/<[^>]*>/g,"");return(!t||"inline"===t)&&s||i||""}},"./src/main/webapp/universal/scripts-layout-engine/shared/utils/layout-utils.js":function(e,t,a){var s=a("./common/temp/node_modules/lodash/isPlainObject.js");YUI.add("@sqs/layout-engine/layout-utils",function(i){i.namespace("SQS.LayoutEngine.Layout");i.SQS.LayoutEngine.Layout.Utils={getBlocksFromJSON:function(e){var a=[];var i=function(t){t&&t.blocks&&Array.isArray(t.blocks)?a=a.concat(t.blocks):(s(t)||Array.isArray(t))&&Object.keys(t).forEach(function(e){i(t[e])})};i(e);return a},getValFromClass:function(e,t){return parseInt((e.get("className").match(new RegExp("(?:\\s|^)"+t+"(\\d+?)(?:\\s|$)"))||["",""])[1],10)},isBlock:function(e){e=e instanceof i.Widget?e.get("boundingBox"):i.one(e);return null!==e&&e.test(".sqs-block")},getColumnWidth:function(e){return i.SQS.LayoutEngine.Layout.Utils.getValFromAncestralClass(e,"sqs-col-")},getValFromAncestralClass:function(e,t){if(e.ancestor('[class*="'+t+'"]',true))return i.SQS.LayoutEngine.Layout.Utils.getValFromClass(e.ancestor('[class*="'+t+'"]',true),t);return-1},convertToValueInPixel:function(e){if(i.Lang.isNumber(e))return e;var t={px:1,em:16,pt:4/3,"%":.16};var a=(e.match(/\D+$/)||["px"])[0];return(parseInt(e,10)||0)*(t[a]||1)}}},"1.0",{requires:["base"]})},"./src/main/webapp/universal/scripts-layout-engine/widget-resize.js":function(e,t){YUI.add("@sqs/layout-engine/widget-resize",function(n){n.namespace("SQS.LayoutEngine").WidgetResize=n.Base.create("widget-resize",n.Plugin.Base,[],{initializer:function(){this._timers=[];this._host=this.get("host");this.on("resizeNodeChange",this._removeOldPlugin,this);this.on(["resizeVerticallyChange","resizeNodeChange"],this._resizeVerticallyChange,this);this.on("resize:start",this._onResizeStart,this);this.on("resize:resize",this._onResizeResize,this);this.on("resize:end",this._onResizeEnd,this);this.on("resize:mouseUp",this._onResizeMouseUp,this);this.once("resize:ready",this._initSyntheticDblClick,this);this._resizeVerticallyChange();this._initSyntheticDblClick()},_initSyntheticDblClick:function(){var t=null;var a=null;var i=this.get("resizeNode").resize;var s=n.bind(function(){if(a){a.detach();a=null}t=t||i.delegate.on("drag:mouseDown",function(e){t.detach();t=null;a=i.delegate.on("drag:mouseDown",function(e){i.fire("handle-dblclick");s()},this);n.later(300,this,s)},this)},this);s()},_resizeVerticallyChange:function(){var e=this.get("resizeVertically");var t=this.get("resizeNode");if(e&&t&&!t.resize){this.resizeV&&this.resizeV.destroy();t.plug(n.Plugin.Resize,{handles:this.get("handles"),wrap:this.get("wrap"),defMinHeight:this.get("minHeight")});this.resizeV=t.resize;this.resizeV.plug(n.SQS.LayoutEngine.Plugin.ResizeGrid,{contentNode:this.get("contentNode"),resizeNode:this.get("resizeNode"),layoutNode:this.get("layoutNode")});t.resize.on("resize:start",this.fire,this);t.resize.after("resize:resize",this.fire,this);t.resize.on("resize:end",this.fire,this)}this._timers.push(n.later(0,this,this.resetResizeWrapperSize))},_removeOldPlugin:function(e){e.prevVal&&e.prevVal.hasPlugin(n.Plugin.Resize.NS)&&e.prevVal.unplug(n.Plugin.Resize)},_onResizeStart:function(e){var t=this._host.get("boundingBox");t.addClass("sqs-resizing")},_onResizeResize:function(e){var t=this._host.get("boundingBox").get("region");var a=t.height/t.width*100;this.set("aspectRatio",a)},_onResizeEnd:function(e){this._host.get("boundingBox").removeClass("sqs-resizing");this.resetResizeWrapperSize()},resetResizeWrapperSize:function(){this._timers.push(n.later(0,this,function(){var e=this.get("resizeNode");var t=this._host.get("boundingBox");var a={height:null,width:null};e.setStyles(a);e!==t&&t.setStyles(a);this.resizeV&&this.resizeV.get("wrapper").setStyles(a)}))},destructor:function(){this.get("resizeNode").unplug(n.Plugin.Resize);this._host=null;while(0!==this._timers.length)this._timers.shift().cancel();this._timers=null}},{NS:"WidgetResize",ATTRS:{aspectRatio:{value:null},handles:{value:["b"],validator:n.Lang.isArray},minHeight:{value:50,validator:n.Lang.isNumber},resizeVertically:{value:true,lazyAdd:false},resizeNode:{valueFn:function(){this.get("host").get("boundingBox")}},contentNode:{valueFn:function(){var e=this.get("resizeNode");if(e.hasClass("sqs-block"))return e.one(".sqs-block-content");return e}},layoutNode:{valueFn:function(){return this.get("resizeNode").ancestor(".sqs-layout")}},wrap:{value:true}}})},"1.0",{requires:["resize","resize-plugin","@sqs/layout-engine/plugin-resize-grid"]})},"./src/main/webapp/universal/scripts-v6/album-player.js":function(e,t,a){var n=a("./common/temp/node_modules/@sqs/site-rendering/AlbumPlayer/index.js").AlbumPageViewBinder;YUI.add("squarespace-album-player",function(a){var i=[];var s=function(e){var t=e.one(".album-cover img");t&&a.config.win.ImageLoader.load(t,{load:true});e.removeClass("loading")};a.on("windowresize",function(){a.all(".sqs-audio-playlist").each(function(e){s(e)})});a.config.win.Squarespace.onInitialize(a,function(){a.all(".sqs-audio-playlist").each(function(e){var t=new n;i.push(t);t.connectToNode(e.getDOMNode());s(e)})});a.config.win.Squarespace.onDestroy(a,function(){i.forEach(function(e){e.destroy()});i.length=0})},"1.0",{requires:["event-resize"]})},"./src/main/webapp/universal/scripts-v6/anim-raf.js":function(e,t){YUI.add("squarespace-anim-raf",function(e){var t=e.config.win;var a=t.requestAnimationFrame;var i=t.cancelAnimationFrame||t.cancelRequestAnimationFrame;var s=["moz","webkit"];var n;for(n=0;n<s.length&&!a;n++){a=t[s[n]+"RequestAnimationFrame"];i=t[s[n]+"CancelAnimationFrame"]||t[s[n]+"CancelRequestAnimationFrame"]}if(i&&a){var r=null;e.Anim._startTimer=function(){r=r||a(e.Anim._runAnimFrame)};e.Anim._stopTimer=function(){if(r){i(r);r=null}};e.Anim._runAnimFrame=function(){if(r){r=a(e.Anim._runAnimFrame);e.Anim._runFrame()}}}},"1.0",{requires:["anim"]})},"./src/main/webapp/universal/scripts-v6/animations.js":function(e,t){YUI.add("squarespace-animations",function(l){l.namespace("Squarespace.Animations");var i="display-status-",t="-plugged",r="shown",o="hidden";l.Squarespace.Animations.Expandable=l.Base.create("expandable",l.Plugin.Base,[],{initializer:function(e){this.doBefore("show",this.open);this.doBefore("hide",this.close);this._running=false},close:function(e){var t=this.get("host"),a=this.get("easing"),i=this.get("duration"),s,n;e=!t.inDoc()||e;t.fire("close");if(e)this._hardClose();else if(!this._running){this._running=true;t.wrap('<div class="expandable-plugin-wrapper"></div>');n=t.ancestor(".expandable-plugin-wrapper");n.setStyles({overflow:"hidden",height:t.get("offsetHeight")});this._closeWrapper=n;s=new l.Anim({node:n,to:{height:0},easing:a,duration:i});s.on("end",function(){if(t.inDoc()){t.setStyles({height:0,overflow:"hidden",display:"none"});t.unwrap();t.addClass("expandable-hidden")}this._running=false;t.fire("closed")},this);this._closeAnim=s;s.run()}return new l.Do.Prevent("Expandable prevented default hide.")},_hardClose:function(){var e=this.get("host");e.setStyles({height:0,overflow:"hidden",display:"none"});e.addClass("expandable-hidden");e.fire("closed")},_hardOpen:function(){var e=this.get("host");e.setStyles({height:null,display:null});e.removeClass("expandable-hidden");e.fire("opened")},open:function(e){var t=this.get("host"),a=this.get("easing"),i=this.get("duration"),s,n,r,o;e=!t.inDoc()||e;t.fire("open");if(e)this._hardOpen();else if(!this._running){this._running=true;"none"===t.getComputedStyle("display")&&t.setStyle("display",null);r=t.cloneNode(true);r.setStyles({height:"auto",visibility:"hidden",display:null,position:"absolute",width:t.get("offsetWidth")});t.insert(r,"before");n=r.get("offsetHeight")+parseInt(r.getComputedStyle("marginTop"),10)+parseInt(r.getComputedStyle("marginBottom"),10);r.remove(true);t.wrap('<div class="expandable-plugin-wrapper"></div>');o=t.ancestor(".expandable-plugin-wrapper");o.setStyles({overflow:"hidden",height:0});t.setStyles({height:null,overflow:null});this._openWrapper=o;s=new l.Anim({node:o,to:{height:n},easing:a,duration:i});s.on("end",function(){var e=this.get("host");if(e){this._running=false;e.unwrap();e.removeClass("expandable-hidden");e.fire("opened")}},this);this._openAnim=s;s.run()}return new l.Do.Prevent("Expandable prevented default show.")},destructor:function(){this._closeWrapper&&this._closeWrapper.remove(true);this._openWrapper&&this._openWrapper.remove(true);this._openAnim&&this._openAnim.stop().destroy();this._closeAnim&&this._closeAnim.stop().destroy()}},{NS:"expandablePlugin",ATTRS:{duration:{value:.3,validator:l.Lang.isNumber},easing:{value:l.Easing.easeOutStrong}}});l.Squarespace.Animations.Fadeable=l.Base.create("fadeable",l.Plugin.Base,[],{initializer:function(e){this.beforeHostMethod("show",this.show);this.beforeHostMethod("hide",this.hide);this.get("host").addClass(this.name+t);this._onlyUseOpacity=void 0!==e.onlyUseOpacity&&e.onlyUseOpacity;this._running=false},destructor:function(){this._anim&&this._anim.stop().destroy();this.get("host").removeClass(this.name+t)},show:function(e){return this._changeVisibility(true,e)},hide:function(e){return this._changeVisibility(false,e)},_changeVisibility:function(e,t){var a=this.get("host");t=!a.inDoc()||t;e&&a.removeClass(i+"hidden");if(t)this._hardChangeVisibility(e);else{if(this._anim){this._anim.stop().destroy();this._anim=null}e&&"none"===a.getComputedStyle("display")&&a.setStyle("display",null);this._anim=new l.Anim({node:a,to:{opacity:e?this.get("opacity"):0},easing:this.get("easing"),duration:this.get("duration")});this._anim.onceAfter("end",function(){this._hardChangeVisibility(e);this._running=false;e||this._onlyUseOpacity||!a.getDOMNode()||a.setStyle("display","none");a.fire(e?"shown":"hidden");delete this._anim},this);this._anim.run()}return new l.Do.Prevent("Fadeable prevented default "+(e?"show":"hide")+" and used its own.")},_hardChangeVisibility:function(e){var t=this.get("host");e||t.addClass(i+"hidden");t.setStyles({opacity:e?this.get("opacity"):0});this._anim=null;t.fire(e?r:o)}},{NS:"fadeablePlugin",ATTRS:{duration:{value:.3,validator:l.Lang.isNumber},easing:{value:l.Easing.easeOutStrong},opacity:{value:1}}});l.Squarespace.Animations.Scalable=l.Base.create("scalable",l.Plugin.Base,[],{initializer:function(e){this.doBefore("show",this.show);this.doBefore("hide",this.hide);this._running=false},show:function(e){return this._changeVisibility(true,e)},hide:function(e){return this._changeVisibility(false,e)},_changeVisibility:function(e,t){var a=this.get("host"),i=this.get("duration");this.fire(e?"show":"hide");a.fire(e?"show":"hide");e&&a.removeClass("sqs-scalable-hidden");t=!a.inDoc()||t;if(t){this._hardChangeVisibility(e);e||a.addClass("sqs-scalable-hidden")}else if(!this._running){this._running=true;var s=false;var n=l.bind(function(){if(s)return;s=true;if(!a.getDOMNode())return;this._running=false;e||a.addClass("sqs-scalable-hidden");this.fire(e?r:o);a.fire(e?r:o)},this);a.setStyles({transition:["opacity "+i+"s ease-out","visibility "+i+"s ease-out","transform "+i+"s ease-out"].join(", ")});l.config.win.setTimeout(function(){if(!a)return;e?a.setStyles({opacity:1,visibility:"visible",transform:"scale(1)"}):a.setStyles({opacity:0,visibility:"hidden",transform:"scale(0.94)"})},1);l.config.win.setTimeout(function(){n()},1e3*i)}return new l.Do.Prevent("Scalable prevented default "+(e?"show":"hide")+" and used its own.")},_hardChangeVisibility:function(e){var t=this.get("host");var a=!!(this.get("host").getDOMNode().style.transitionDuration||l.DOM.CUSTOM_STYLES.transitionDuration);a?t.setStyles({visibility:e?"visible":"hidden",opacity:e?1:0,transform:"scale("+(e?"1":"0.94")+")"}):t.setStyles({visibility:e?"visible":"hidden",opacity:e?1:0});t.fire(e?r:o)}},{NS:"scalablePlugin",ATTRS:{duration:{value:.3,validator:l.Lang.isNumber},easing:{value:l.Easing.easeOutStrong},opacity:{value:1}}})},"1.0",{requires:["anim","anim-easing","base","plugin","transition"]})},"./src/main/webapp/universal/scripts-v6/anims.js":function(e,t,a){YUI.add("squarespace-anims",function(a){a.namespace("Squarespace");function t(e){t.superclass.constructor.apply(this,arguments)}a.Squarespace.Anims=a.extend(t,a.Base,{initializer:function(){this._items=[]},destructor:function(){var t=[];this.each(function(e){t.push(e)});a.Array.each(t,function(e){e.get("running")&&e.stop(false);e.destroy()});a.detach(this.get("id")+"|*")},add:function(t){if(!t.get("node"))throw new Error(this.name+": Animation doesn't specify a node");false;t.on(this.get("id")+"|end",function(e){this.remove(t)},this);this._items.push(t)},remove:function(e){if(a.Lang.isNumber(e))return this._items.splice(e,1);var t=this._items.indexOf(e);if(-1!==t)return this._items.splice(this._items.indexOf(e),1)}},{NAME:"anims"});a.augment(t,a.ArrayList)},"1.0",{requires:["arraylist","base","base-build"]})},"./src/main/webapp/universal/scripts-v6/announcement-bar.js":function(e,t,a){var n=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var r=a("./src/main/webapp/frontend/packages/enums/AnnouncementBarStyle.js");var c=a("./src/main/webapp/universal/src/shared/utils/WebsiteOverlaysUtils.js");var u={READY:"announcementBar:event:ready",UPDATE:"announcementBar:event:update",RESET_VISIBILITY:"announcementBar:event:resetVisibility",CLOSE:"announcementBar:event:close"};YUI.add("squarespace-announcement-bar",function(o){var l="closed";var i="squarespace-announcement-bar";o.namespace("Squarespace.Widgets");var s=o.Squarespace.Widgets.AnnouncementBar=o.Base.create("AnnouncementBar",o.Squarespace.Widgets.SSWidget,[],{initializer:function(){this._bb=this.get("boundingBox");this._cb=this.get("contentBox");this._publishEvents();this._addActionListeners()},destructor:function(){o.Array.invoke(this.eventListeners,"detach");this.eventListeners=[]},render:function(e){var t=e||this._checkIfNewMessage();if(t){var a=this._getDropzone();s.superclass.render.call(this,a)}else this._bindTweakEvents()},bindUI:function(){s.superclass.bindUI.call(this);this.get("boundingBox").delegate("click",this._closeBar,"."+this.getClassName("close"),this);this.get("boundingBox").delegate("keydown",function(e){13!==e.keyCode&&32!==e.keyCode||this._closeBar(e)},"."+this.getClassName("close"),this);this._bindTweakEvents();this.after(["textChange","clickthroughUrlChange"],function(){this.get("contentBox").empty();this.get("contentBox").prepend(this.renderTemplate())});this.on("visibleChange",this._checkIfNewMessage,this)},syncUI:function(){s.superclass.syncUI.call(this);var e=parseInt(this.get("style"),10);var t=this.get("text");o.Lang.isObject(t)&&(t=t.html);e!==r.NONE&&t?this.show():this.hide()},getHeight:function(){return this._bb.get("clientHeight")},_bindTweakEvents:function(){o.Global.on("tweak:beforeopen",this._onTweakOpen,this)},_onTweakOpen:function(){var e=this.get("rendered");e||this.render(true);this.show()},_closeBar:function(e){if(o.namespace("Squarespace.Widgets.AnnouncementBar").isClosed())return;e&&e.preventDefault();this.hide();var t=o.one("[data-first-focusable-element]");t&&t.focus();this._recordClose()},_getDropzone:function(){var e=o.one(this.get("dropzone"));if(!o.Lang.isNull(e)){var t=o.Node.create('<div class="sqs-announcement-bar-custom-location"></div>');e.insert(t,0);e=t;this.set("isCustomPositioned",true)}return e},_checkIfNewMessage:function(){var e=true;var t=false;if(localStorage){var a={text:this.get("text"),clickthroughUrl:this.get("clickthroughUrl")};var i=this._getLocalStorageData();if(i){var s=i[l];delete i[l];null===a.clickthroughUrl&&delete a.clickthroughUrl;var n=o.JSON.stringify(a);var r=o.JSON.stringify(i);n===r&&true===s?e=false:t=true}else t=true;if(true===t){a[l]=false;this._saveToLocalStorage(a)}}return e},_getLocalStorageData:function(){var e=i;var t=null;if(localStorage)try{var a=localStorage.getItem(e);t=o.JSON.parse(a)}catch(e){t=null}return t},_saveToLocalStorage:function(e){var t=i;if(localStorage){"string"!==typeof e&&(e=o.JSON.stringify(e));try{localStorage.setItem(t,e)}catch(e){false}}},_recordClose:function(){var e=this._getLocalStorageData();if(e){e[l]=true;this._saveToLocalStorage(e)}},_publishEvents:function(){this.publish(u.RESET_VISIBILITY);this.publish(u.UPDATE);this.publish(u.CLOSE);o.Global.publish(u.READY)},_addActionListeners:function(){this.eventListeners=[this.on(u.RESET_VISIBILITY,function(){o.Squarespace.Widgets.AnnouncementBar.resetVisibility();this.render(true);this.syncUI()}.bind(this)),this.on(u.UPDATE,function(e){this.setAttrs({text:e.text.html.toString(),style:e.style,clickthroughUrl:e.clickthroughUrl});this.get("rendered")||this.render();this.syncUI()}.bind(this)),this.on(u.CLOSE,function(){this._closeBar()}.bind(this))];o.Global.fire(u.READY,{bar:this})}},{CSS_PREFIX:"sqs-announcement-bar",HANDLEBARS_TEMPLATE:"announcement-bar.html",EVENTS:u,ATTRS:{text:{value:null},closeButtonLabel:{value:n("Close Announcement")},isCustomPositioned:{value:false},clickthroughUrl:{value:null},dropzone:{value:".sqs-announcement-bar-dropzone"}}});o.namespace("Squarespace.Widgets.AnnouncementBar").resetVisibility=function(){if(localStorage)try{localStorage.removeItem(i)}catch(e){false}};o.namespace("Squarespace.Widgets.AnnouncementBar").isClosed=function(){var e=false;if(localStorage)try{var t=localStorage.getItem(i);var a=o.JSON.parse(t);o.Lang.isNull(a)||(e=a[l])}catch(e){false}return e};o.config.win.Squarespace.onInitialize(o,function(){var e=o.config.win.Static.SQUARESPACE_CONTEXT.websiteSettings.announcementBarSettings||{style:1,text:""};o.namespace("Squarespace.Singletons");if(!o.Squarespace.Singletons.AnnouncementBar){var t=e.text;o.Lang.isObject(t)&&(t=t.html);o.Squarespace.Singletons.AnnouncementBar=new s({text:t,clickthroughUrl:e.clickthroughUrl});var a=c.shouldShowAnnouncementBar({settings:o.config.win.Static.SQUARESPACE_CONTEXT.websiteSettings.announcementBarSettings,context:{pageType:o.config.win.Static.SQUARESPACE_CONTEXT.pageType,collection:o.config.win.Static.SQUARESPACE_CONTEXT.collection}});a&&o.Squarespace.Singletons.AnnouncementBar.render()}})},"1.0",{requires:["base","json","node","squarespace-announcement-bar-template","squarespace-ss-widget"]})},"./src/main/webapp/universal/scripts-v6/async-form.js":function(e,t,a){var o=a("./src/main/webapp/frontend/packages/enums/Flag.js");var l=a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts");var c=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var i=a("./src/main/webapp/universal/src/shared/utils/evaluateJsonTemplate.js");var u=a("./src/main/webapp/universal/src/shared/components/forms/CharacterCounter.js");var d=a("./src/main/webapp/universal/src/shared/utils/FormHandler.js");var p=a("./src/main/webapp/universal/src/shared/utils/census/CensusUtils.ts");YUI.add("squarespace-async-form",function(r){r.namespace("Squarespace.Widgets");var n=r.Squarespace.Widgets.AsyncForm=r.Base.create("AsyncForm",r.Squarespace.Widgets.SSWidget,[],{initializer:function(){this.publish("submission");this._typeGetterMap={date:this._getMultiFieldVal,name:this._getMultiFieldVal,time:this._getMultiFieldVal,address:this._getMultiFieldVal,checkbox:this._getOptionFieldVal,likert:this._getLikertFieldVal,radio:this._getRadioFieldVal,select:this._getSelectVal,phone:this._getPhoneFieldVal};this._typeSetterMap={date:this._setMultiFieldVal,name:this._setMultiFieldVal,time:this._setMultiFieldVal,address:this._setMultiFieldVal,checkbox:this._setOptionFieldVal,likert:this._setLikertFieldVal,radio:this._setRadioFieldVal,select:this._setSelectVal,phone:this._setPhoneFieldVal};this._defaultGetter=this._getSingleFieldVal;this._defaultSetter=this._setSingleFieldVal},renderUI:function(){n.superclass.renderUI.call(this);var e=this.get("form");var t=e.fields;r.Lang.isString(t[0])&&(t=r.Array.map(t,r.JSON.parse));p.trackFormRender(e.id);var a={showTitle:this.get("showTitle"),preventSubmit:this.get("preventDefaultSubmit")||this.get("preventAllSubmits"),hideSubmitButton:this.get("hideSubmitButton"),formId:e.id,formName:this.get("formName"),formFields:t,formSubmitButtonText:this.get("formSubmitButtonText"),formSubmissionMessage:e.parsedSubmissionMessage,formSubmissionHTML:e.submissionHTML,successRedirect:e.successRedirect,disclaimerMessage:e.parsedDisclaimerMessage,captchaEnabled:e.captchaEnabled,captchaTheme:e.captchaTheme,captchaAlignment:e.captchaAlignment};var i=this.get("contentBox");var s=this.evaluateTemplate(a);i.append(s);this._formEl=i.one("form");this._setFormData();u(this._formEl.getDOMNode())},_onSubmit:function e(t){if(this.get("preventDefaultSubmit")&&!this.get("preventAllSubmits")){this._clearErrors();var a=null;var i;if(l.isFeatureEnabled(o.VANILLA_FORM_HANDLER)){var s=this._formEl.getDOMNode();a=new d(r.config.win,s);i=a.validate()}else i=this._validateForm();if(i.errors.length>0)this._renderErrors(i.errors);else{var n=a?a.getSanitizedFieldValues():i.data;this.fetchValidatedFormSubmission(a,this.get("form").id,r.bind(function(){this.fire("submission",{data:n})},this),r.bind(function(e){var a=[];r.Object.each(e.errors,function(e,t){a.push({fieldId:t,message:e})});this._renderErrors(a)},this))}}t.halt()},bindUI:function(){this._formEl.on("submit",this._onSubmit,this);this.after("formDataChange",this._setFormData,this)},setStateSaving:function(){var e=this.get("contentBox");e.addClass("saving");e.one('input[type="submit"]').set("value",c("Saving…"))},setStateEditing:function(){var e=this.get("contentBox");var t=this.get("formSubmitButtonText");e.one('input[type="submit"]').set("value",t);e.removeClass("saving")},fetchValidatedFormSubmission:function(e,t,a,i){var s=e?e.getSanitizedFieldValues():this.getFormData();var n=JSON.stringify(s);r.Data.post({url:"/api/rest/forms/validate/"+t,headers:{"Content-Type":"application/json"},data:n,success:a,failure:i})},getFormData:function(){return this._validateForm().data},_renderErrors:function(e){r.Array.each(e,function(e){this.get("contentBox").one("#"+e.fieldId).one(".title").insert('<div class="field-error">'+e.message+"</div>","before")},this)},_clearErrors:function(){this.get("contentBox").all(".field-error").remove(true)},_validateForm:function(){var s={};var n=[];this._formEl.all(".form-item").each(function(e){var t=e.getAttribute("id");var a=this._getFieldData(e);if(!a)return;var i=a.error;i&&n.push({fieldId:t,message:i});s[t]=a.data},this);return{data:s,errors:n}},_getFieldData:function(e){var t=e.get("className").split(" ");var a=null;var i;var s=false;r.Array.each(t,function(e){if(r.Object.hasKey(this._typeGetterMap,e)){a=e;i=this._typeGetterMap[a]}else"section"===e&&(s=true)},this);if(s)return;null===a&&(i=this._defaultGetter);return i.call(this,e)},_getSingleFieldVal:function(e){var t=e.one(".field-element");if(t){var a=t.get("value");var i;var s=!r.Lang.isValue(a)||""===a;e.hasClass("required")&&s&&(i=c("Required"));return{data:t.get("value"),error:i}}return null},_getMultiFieldVal:function(e){var a=[];var t;var i=false;e.all(".field-element").each(function(e){var t=e.get("value");r.Lang.isValue(t)&&""!==t&&(i=true);a.push(e.get("value"))});e.hasClass("required")&&!i&&(t=c("Required"));return{data:a,error:t}},_getOptionFieldVal:function(e){var t=[];var a;e.all("input").each(function(e){e.get("checked")&&t.push(e.get("value"))},this);e.hasClass("required")&&0===t.length&&(a="Required");return{data:t,error:a}},_getLikertFieldVal:function(e){var a={};var t;e.all(".item").each(function(e){var t;e.all("input").each(function(e){e.get("checked")&&(t=e.get("value"))});r.Lang.isValue(t)&&(a[e.getAttribute("data-question")]=t)});return{data:a,error:t}},_getRadioFieldVal:function(e){var t;var a;e.all("input").each(function(e){e.get("checked")&&(t=e.get("value"))},this);e.hasClass("required")&&!r.Lang.isValue(t)&&(a=c("Required"));return{data:t,error:a}},_getSelectVal:function(e){var t=e.one("select").get("value");var a;var i=!r.Lang.isValue(t)||""===t;e.hasClass("required")&&i&&(a=c("Required"));return{data:t,error:a}},_getPhoneFieldVal:function(e){var t=this._getMultiFieldVal(e);var a=t.data;a&&3===a.length&&a.unshift("");return t},_setFormData:function(){var s=this.get("formData");if(null===s)return;this._formEl.all(".form-item").each(function(e){var t=s[e.getAttribute("id")];if(t){var a=t.value;var i=r.Lang.isValue(a)?a:t.values||[];this._setFieldData(e,i)}},this)},_setFieldData:function(t,a){var e=t.get("className").split(" ");var i=null;var s;var n;r.Array.each(e,function(e){if(r.Object.hasKey(this._typeSetterMap,e)){i=e;s=this._typeSetterMap[i]}else"section"===e&&(n=true);if(n)return;null===i&&(s=this._defaultSetter);return s.call(this,t,a)},this)},_setSingleFieldVal:function(e,t){var a=e.one(".field-element");if(a)return a.set("value",t)},_setMultiFieldVal:function(e,t){var a=e.all(".field-element");a.each(function(e){e.set("value",t[e.getData("title")])})},_setOptionFieldVal:function(e,t){var a=e.all("input");a.each(function(e){-1!==t.indexOf(e.get("value"))&&e.setAttribute("checked","checked")},this)},_setLikertFieldVal:function(e,s){var t=e.all(".item");t.each(function(e){var t=e.getAttribute("data-question");var a=s[t];if(!r.Lang.isValue(a)||""===a)return;var i=parseInt(a,10)+2;e.all("input").item(i).setAttribute("checked","checked")})},_setRadioFieldVal:function(e,t){var a=e.all("input");a.each(function(e){e.get("value")===t&&e.setAttribute("checked","checked")},this)},_setSelectVal:function(e,t){e.one("select").set("value",t)},_setPhoneFieldVal:function(e,t){3===e.all(".field").size()&&4===t.length&&t.shift();this._setMultiFieldVal(e,t)},evaluateTemplate:function(e){var t=this.get("formTemplate");try{return i(t.html,r.merge({},e,{localizedStrings:t.localizedStrings}))}catch(e){return e.message}}},{CSS_PREFIX:"sqs-async-form",ATTRS:{form:{value:{fields:[]},validator:r.Lang.isValue},formTemplate:{value:null},hideSubmitButton:{value:false},formSubmitButtonText:{value:c("Add to Cart")},formName:{value:c("My Form Name")},formData:{value:null},showTitle:{value:true},preventDefaultSubmit:{value:true},preventAllSubmits:{value:false}}})},"1.0",{requires:["base","json","node","squarespace-ss-widget"]})},"./src/main/webapp/universal/scripts-v6/async-task-synchronizer.js":function(e,t){YUI.add("squarespace-async-task-synchronizer",function(o){o.namespace("Squarespace").AsyncTaskSynchronizer=o.Base.create("asyncTaskSynchronizer",o.Base,[],{initializer:function(){this._idsToCompleted={};this.before(this.get("id")+"|completedChange",function(e){if(!e.newVal){e.preventDefault();e.stopPropagation();e.stopImmediatePropagation()}},this);this.after(this.get("id")+"|completedChange",function(e){var t=this.get("completionCallback"),a=this.get("callbackContext");e.newVal&&t&&(a?t.call(a):t());this.destroy()},this)},destructor:function(){this.detach(this.get("id")+"|*");this._idsToCompleted=null},add:function(e,t,a,i){if(this.get("destroyed"))throw new Error(this.name+": This synchonizer has been used and destroyed");if(!e)throw new Error(this.name+": No eventTarget(s) provided.");1===arguments.length&&o.Lang.isArray(e)?e.forEach(function(e){this.add.apply(this,e)},this):o.Lang.isArray(e)?e.forEach(function(e){this._waitForEvent(e,t,a,i)},this):this._waitForEvent(e,t,a,i)},_allTasksCompleted:function(){return o.Array.every(o.Object.values(this._idsToCompleted),function(e){return e})},_markCompleted:function(e){if(this.get("destroyed"))return;this._idsToCompleted[e]=true;this._allTasksCompleted()&&this._set("completed",true)},_waitForEvent:function(t,e,a,i){var s=o.guid("task-"),n=false;this._idsToCompleted[s]=false;if(o.Lang.isFunction(a)){i&&o.bind(a,i);n=a(t,e)}if(n)this._markCompleted(s);else{var r=o.bind(function(e){t.on(this.get("id")+"|"+e,function(e){this._markCompleted(s)},this)},this);o.Lang.isArray(e)?o.Array.each(e,function(e){r(e)},this):r(e)}return s}},{ATTRS:{completed:{value:false,readOnly:true},completionCallback:{value:null,validator:o.Lang.isFunction},callbackContext:{value:null}}})},"1.0",{requires:["base"]})},"./src/main/webapp/universal/scripts-v6/async-wrappers/cover-page-editors-for-standalone.js":function(e,t,a){var p=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-async-wrappers-cover-page-editors-for-standalone",function(o){o.namespace("Squarespace.AsyncWrappers");var l={action:function(e,t){return{strings:{title:p("Action"),description:p("Your Cover Page should have a clear goal. Choose which type best meets your needs.")},slideSummary:e,sliceAreas:t.filterBySliceTypes(o.Squarespace.SliceTypeGroups.ACTION),sliceTypeOrdering:[o.Squarespace.SliceType.ACTION,o.Squarespace.SliceType.CUSTOM_FORM]}},"social-links":function(e,t){return{strings:{title:p("Social Links"),description:p("Configure your social icons that are used on your cover page.")},slideSummary:e,sliceAreas:t.filterBySliceTypes(o.Squarespace.SliceTypeGroups.SOCIAL_ICONS),sliceTypeOrdering:[o.Squarespace.SliceType.SOCIAL_ICONS]}},audio:function(e,t){return{strings:{title:p("Audio"),description:p("Add one or more tracks to create a playlist of songs. Then organize your tracks to create an album.")},slideSummary:e,sliceAreas:t.filterBySliceTypes(o.Squarespace.SliceTypeGroups.AUDIO),sliceTypeOrdering:[o.Squarespace.SliceType.ALBUM]}},video:function(e,t){return{strings:{title:p("Video"),description:p("Paste the URL of a video (Vimeo, YouTube, Animoto, Wistia, etc.) you'd like to embed, and Squarespace will attempt to locate and format this video for your site.")},slideSummary:e,sliceAreas:t.filterBySliceTypes(o.Squarespace.SliceTypeGroups.VIDEO),sliceTypeOrdering:[o.Squarespace.SliceType.VIDEO]}},location:function(e,t){return{strings:{title:p("Map Location"),description:p("Input your address into the fields below to let people know where you, your business, or your next event can be found. To edit how this location appears in text, navigate to the Branding & Text panel.")},slideSummary:e,sliceAreas:t.filterBySliceTypes(o.Squarespace.SliceTypeGroups.LOCATION),sliceTypeOrdering:[o.Squarespace.SliceType.MAP]}},twitter:function(e,t){return{strings:{title:p("Twitter"),description:p("Pick the account below you would like to import content from, or press Add Account to connect a new one.")},slideSummary:e,sliceAreas:t.filterBySliceTypes(o.Squarespace.SliceTypeGroups.TWITTER),sliceTypeOrdering:[o.Squarespace.SliceType.TWITTER]}}};var t;function a(){if(!t){var e=o.config.win.Static.SQUARESPACE_CONTEXT.coverPageCollection;t=o.Squarespace.ContentCollectionCache.getCollectionFromData(e)}return t}var c;function i(e){if(c){e();return}var t=new o.Squarespace.Models.SlideSummary({url:o.Lang.sub("{root}content-collections/{collectionId}/slide-summary",{root:o.Squarespace.API_ROOT,collectionId:a().get("id")}),slideType:o.Squarespace.SlideType.COVER_PAGE});t.load(function(){c=t;e()})}var u;function s(e){if(u){e();return}var t=new o.Squarespace.Models.SlideLayoutList({slide:c.get("slide")});t.load(function(){u=t;e()})}var n;function r(e){if(n){e();return}var t=c.get("slide");var a=t.get("layoutIdentifier");var i=u.getByIdentifier(a);c.get("slices").updateForLayout(i,t);c.after("load",function(){c.get("slices").updateForLayout(i,t)});n=true;e()}function d(e){i(function(){s(function(){r(e)})})}o.Squarespace.AsyncWrappers.CoverPageEditorForStandalone=o.Base.create("CoverPageEditor",o.Squarespace.Damask.Panel.AsyncDataPanel,[],{getPanel:function(e,n,t){var a=this.get("location.pathname");var r=a.slice(a.lastIndexOf("/")).substr(1);d(function(){var e=c.get("slide");var t=e.get("layoutIdentifier");var a=u.getByIdentifier(t);var i=a.get("sliceAreas");var s=l[r](c,i);setTimeout(function(){n(new o.Squarespace.Widgets.SliceGroupEditor(s))})})}})},"1.0",{requires:["base","squarespace-damask-panel-async-data-panel"]})},"./src/main/webapp/universal/scripts-v6/async-wrappers/domains.js":function(e,t,a){var r=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-async-wrappers-domains",function(n){n.namespace("Squarespace.AsyncWrappers");function a(s){return n.Squarespace.Promises.create(function(t,a){var i=new n.Squarespace.Domains.ViewModels.DomainList;i.load(function(){var e=i.getByName(decodeURIComponent(s));if(!e){a(r("Could not find domain: {domainName}",{domainName:decodeURIComponent(s)}));return}t(e)})})}n.Squarespace.AsyncWrappers.ManagedDNSPanel=n.Base.create("ManagedDNSPanel",n.Squarespace.Damask.Panel.AsyncDataPanel,[],{getPanel:function(e,t){a(e.name).then(function(e){t(new n.Squarespace.Domains.Manage.DNS.Edit({domain:e}))})}});n.Squarespace.AsyncWrappers.LinkedDNSPanel=n.Base.create("LinkedDNSPanel",n.Squarespace.Damask.Panel.AsyncDataPanel,[],{getPanel:function(e,t){a(e.name).then(function(e){t(new n.Squarespace.Domains.Manage.DNS.Setup({model:e}))})}})},"1.0",{requires:["base","squarespace-damask-panel-async-data-panel","squarespace-domains-manage-dns-edit","squarespace-domains-manage-dns-setup","squarespace-domains-view-models-domain-list","squarespace-domains-view-models-domain","squarespace-promises"]})},"./src/main/webapp/universal/scripts-v6/attr-validators.js":function(e,t,a){YUI.add("squarespace-attr-validators",function(s){s.namespace("Squarespace");function n(e,t,a,i){var s;false}var t=s.Squarespace.AttrValidators={isBoolean:function(e,t){if(!s.Lang.isBoolean(e)){n.call(this,"boolean",e,t);return false}return true},isNumber:function(e,t){if(!s.Lang.isNumber(e)){n.call(this,"number",e,t);return false}return true},isString:function(e,t){if(!s.Lang.isString(e)){n.call(this,"string",e,t);return false}return true},isNonArrayObject:function(e,t){if(s.Lang.isArray(e)){n.call(this,"Array",e,t,"[{attrName}] Validation Error: Expected {expectedVal}, got Array instead.");return false}if(!s.Lang.isObject(e)){n.call(this,"Object",e,t);return false}return true},isObject:function(e,t){if(!s.Lang.isObject(e)){n.call(this,"Object",e,t);return false}return true},isArray:function(e,t){if(!s.Lang.isArray(e)){n.call(this,"Array",e,t);return false}return true},isFunction:function(e,t){if(!s.Lang.isFunction(e)){n.call(this,"Function",e,t);return false}return true},isNode:function(e,t){if(!s.instanceOf(e,s.Node)){n.call(this,"Node",e,t);return false}return true},isNodeList:function(e,t){if(!s.instanceOf(e,s.NodeList)){n.call(this,"NodeList",e,t);return false}return true},isNullOr:function(a){if(!s.Lang.isFunction(a)){console.error("The validator function argument is required.");return false}return function(e,t){if(s.Lang.isNull(e))return true;return a(e,t)}},isInstanceOf:function(a){if(!a){false;return false}if(s.Lang.isString(a)){a=a.split(".");return function(e,t){if(e instanceof s.Squarespace.Damask.ContextGlobals.fromTop(a)||e instanceof s.Squarespace.Damask.ContextGlobals.fromFrame(a))return true;n.call(this,a.join("."),e,t,"[{attrName}] Validation Error: {actualVal} is not an instance of {expectedVal}.");return false}}return function(e,t){if(e instanceof a)return true;n.call(this,a,e,t,"[{attrName}] Validation Error: {actualVal} is not an instance of {expectedVal}.");return false}},isExtensionOf:function(i){if(!s.Lang.isFunction(i)){false;return false}return function(e,t){var a=s.Lang.isFunction(e.prototype._getClasses)&&e.prototype._getClasses();if(a&&-1!==s.Array.indexOf(a,i))return true;n.call(this,i,e,t,"[{attrName}] Validation Error: {actualVal} is not an extension of the {expectedVal}.");return false}},isTypeOf:function(a){if(!a){false;return false}return function(e,t){if(typeof e===a)return true;n.call(this,a,e,t,'[{attrName}] Validation Error: {actualVal} is not of type "{expectedVal}".');return false}},isValueIn:function(a){if(!s.Lang.isObject(a)){false;return false}if(s.Lang.isArray(a))return function(e,t){if(-1!==s.Array.indexOf(a,e))return true;n.call(this,a,e,t,"[{attrName}] Validation Error: {actualVal} is not a value in {expectedVal}");return false};return function(e,t){if(-1!==s.Object.values(a).indexOf(e))return true;n.call(this,a,e,t,"[{attrName}] Validation Error: {actualVal} is not a value in {expectedVal}");return false}}};t.isNullOrInstanceOf=function(e){return t.isNullOr(t.isInstanceOf(e))};t.isNullOrExtensionOf=function(e){return t.isNullOr(t.isExtensionOf(e))};t.isNullOrOfType=function(e){return t.isNullOr(t.isTypeOf(e))};t.isNullOrValueIn=function(e){return t.isNullOr(t.isValueIn(e))};t.isDate=t.isInstanceOf(Date);t.isNullOrString=t.isNullOr(t.isString);t.isNullOrDate=t.isNullOr(t.isDate);t.isNullOrBoolean=t.isNullOr(t.isBoolean);t.isNullOrNumber=t.isNullOr(t.isNumber);t.isNullOrObject=t.isNullOr(t.isObject);t.isNullOrNonArrayObject=t.isNullOr(t.isNonArrayObject);t.isNullOrArray=t.isNullOr(t.isArray);t.isNullOrFunction=t.isNullOr(t.isFunction);t.isNullOrNode=t.isNullOr(t.isNode);t.isNullOrNodeList=t.isNullOr(t.isNodeList)},"1.0",{requires:["squarespace-damask-context-globals"]})},"./src/main/webapp/universal/scripts-v6/audio-player.js":function(e,t,a){var s=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var n=a("./src/main/webapp/universal/src/shared/utils/humanizeDuration.js");var r=a("./common/temp/node_modules/@sqs/site-rendering/TrackManager/index.js");var d=a("./src/main/webapp/universal/src/shared/utils/UrlUtils.js");var i=a("./src/main/webapp/universal/src/shared/utils/Keyboard.js");var o=i.isArrowLeftKey;var l=i.isArrowUpKey;var p=i.isArrowRightKey;var h=i.isArrowDownKey;var g=a("./src/main/webapp/universal/src/shared/utils/KeyboardScrubber.js");var m=a("./common/temp/node_modules/@sqs/utils/number/clamp.js");YUI.add("squarespace-audio-player",function(c){c.namespace("Squarespace.Widgets");var u=c.Squarespace.Widgets.AudioPlayer=c.Base.create("audioPlayer",c.Squarespace.Widgets.SSWidget,[],{initializer:function(e){var t=this.get("render");c.Lang.isBoolean(t)?t=null:c.Lang.isString(t)&&(t=c.one(t));if(t){t._audioPlayer&&t._audioPlayer.destroy();t._audioPlayer=this;c.Object.each(t.getData(),function(e,t){e&&this.set(t,e)},this)}},destructor:function(){if(this._audio){this.stop();this._audio=null}r.player.pause();this._deregisterKeyboardScrubber&&this._deregisterKeyboardScrubber()},renderUI:function(){u.superclass.renderUI.apply(this,arguments);var e=this.get("boundingBox");var t=e.one(".placeholder");var a=this.get("title"),i=this.get("author");a&&i?t.setContent(c.Node.create('<div class="wrapper"><div class="audio-author">'+i+'</div><div class="audio-title">'+a+"</div></div>")):a?t.setContent(c.Node.create('<div class="wrapper"><div class="audio-title">'+a+"</div></div>")):t.setContent(c.Node.create('<div class="wrapper">'+this.get("strings.placeholder")+"</div>"));if("true"===this.get("show-download")&&this.get("url")){var s=d.addQueryParam(this.get("url"),"download","true");var n='<div class="download"><a href="'+s+'" target="_blank">'+this.get("strings.download")+"</a></div>";this.get("contentBox").append(n);e.addClass("download")}e.one(".progress-inner").setStyle("width","0px");var r=this._volumeNode=e.one(".volume");if(!r)throw new Error(this.name+": No div.volume in template.");var o=this.get("volumeLevels");for(var l=o;l>0;l--)r.prepend('<div class="bar level-"'+l+'" data-volume-level="'+l+'"></div>');e.one(".duration").setContent(this.get("strings.durationPlaceHolder"))},bindUI:function(){var e=this.get("id");var t=this.get("boundingBox");t.one(".controls").on("keydown",function(e){var t=13===e.keyCode;var a=32===e.keyCode;if((t||a)&&!this.get("disabled")){e.halt();this._onControlsButtonClick()}},this);t.on(e+"|click",this._onClick,this);this.after(e+"|volumeChange",function(e){this._setVolume(e.newVal)},this);this.after(e+"|playStateChange",this._uiUpdateWrapperClass,this);this.after(e+"|readyStateChange",this._afterReadyStateChange,this);this.after(e+"|disabledChange",function(e){var t=e.newVal;t&&this.stop()},this);c.on(e+"|audioPlayer:stopAll",function(e){var t=e?e.container:null;t&&c.Lang.isString(t)&&(t=c.one(t));(!e||!e.hasOwnProperty("container")||t instanceof c.Node&&t.contains(this.get("boundingBox")))&&this.stop()},this);this._deregisterKeyboardScrubber=g({element:this.get("boundingBox").one(".progress"),getDuration:function(){return this._audio.duration}.bind(this),getPosition:function(){return this._audio.position}.bind(this),isPlaying:function(){return this.get("playState")===this.getProperty("PLAY_STATES").PLAYING}.bind(this),play:this.play.bind(this),pause:this.pause.bind(this),setPosition:function(e){this.seek(e/this._audio.duration*100)}.bind(this)});var a=this.get("boundingBox").one(".volume");a.on("keydown",function(e){var t;if(o(e)||h(e))t=-1;else{if(!p(e)&&!l(e))return;t=1}e.preventDefault();var a=this._getVolumeLevel();var i=m(a+t,0,this.get("volumeLevels"));this._setVolumeLevel(i)},this)},syncUI:function(){this._uiUpdateWrapperClass();this._uiUpdateVolumeLevel();var e=this.get("boundingBox");if(e.ancestor(".sqs-editing")){r.player.pause();this.pause()}e.toggleClass("tiny",e.get("offsetWidth")<300)},play:function(){var e=this.getProperty("PLAY_STATES");r.player.setVolume(this.get("volume")/100);if(this._audio)this.get("playState")!==e.PLAYING&&this._audio.play();else{this._registerTrack();this._audio.play()}this._set("playState",e.PLAYING)},pause:function(){this._audio&&this._audio.pause()},stop:function(){var e=this.get("playState"),t=this.getProperty("PLAY_STATES");e===t.PLAYING&&this._audio&&this._audio.pause()},seek:function(e){if(e>100||e<0){console.warn(this.name+": seek() - Percentage between 0-100 required.");return}if(!this._audio){this._registerTrack();this.play()}this._audio.seek(this._audio.duration*(e/100))},setVolume:function(e){this.set("volume",e)},_setVolume:function(e){this._audio&&r.player.setVolume(e/100);this._set("volume",e);this._uiUpdateVolumeLevel()},_setVolumeLevel:function(e){this._setVolume(Math.round(e/this.get("volumeLevels")*100))},_registerTrack:function(){if(!this._audio){var e=this.get("boundingBox");var t=this.get("fixedUrl");e.addClass("loading");if(!t){this._showError(s("No URL provided."));return}this._audio=r.createTrack(t);this._audio.on("pause",c.bind(this._onPause,this));this._audio.on("ended",c.bind(this._onStop,this));this._audio.on("inactive",c.bind(this._onPause,this));this._audio.on("positionChange",c.bind(this._onWhilePlaying,this));this._audio.on("ready",c.bind(this._onLoad,this));return!!this._audio}return false},_getVolumeLevel:function(){var e=this.get("volumeLevels"),t=this.get("volume");return Math.round(t/100*e)},_uiUpdateVolumeLevel:function(){var e=this._volumeNode.get("children"),a=this._getVolumeLevel();e.each(function(e){var t=parseInt(e.getAttribute("data-volume-level"),10);t<=a?e.addClass("active"):e.removeClass("active")},this)},_uiUpdateWrapperClass:function(){var e=this.getProperty("READY_STATES"),t=this.getProperty("PLAY_STATES"),a=this.get("boundingBox"),i=a.getAttribute("class").split(" ");var s;for(s in t)i.remove("play-state-"+t[s]);for(s in e)i.remove("ready-state-"+e[s]);a.addClass("ready-state-"+this.get("readyState"));a.setAttribute("class",i.join(" ")).addClass("play-state-"+this.get("playState")).addClass("ready-state-"+this.get("readyState"))},_onClick:function(e){if(c.UA.ios){window.location.href=this.get("url");return}if(e.target.ancestor().hasClass("download"))return;e.halt();e.stopImmediatePropagation();if(this.get("disabled"))return;if(e.target.hasClass("duration"))return;if(e.target.ancestor(".volume")){this._setVolumeLevel(parseInt(e.target.getAttribute("data-volume-level"),10));return}if(e.target.ancestor(".placeholder",true)){this.play();return}e.target.ancestor(".controls",true)&&this._onControlsButtonClick();var t=this.get("boundingBox").one(".progress").get("region");e.pageX>=t.left&&e.pageX<=t.right&&this.seek((e.pageX-t.left)/t.width*100)},_onControlsButtonClick:function(){var e=this.get("playState"),t=this.getProperty("PLAY_STATES");switch(e){case t.PLAYING:this.pause();return;case t.PAUSED:case t.STOPPED:this.play();return;default:false}},_afterReadyStateChange:function(e){var t=this.getProperty("READY_STATES"),a=this.get("readyState"),i=this.get("strings"),s=false;switch(a){case t.INITIALIZED:this.enable();break;case t.FLASH_BLOCKED:s=i.soundManagerFlashFail;break;case t.SECURITY_ERROR:s=i.soundManagerSecurityFail;this._reportAudioError(t.SECURITY_ERROR);break;case t.SOUND_LOAD_FAILED:s=i.soundManagerURLFail;this._reportAudioError(t.SOUND_LOAD_FAILED);break;case t.SOUND_LOADED:break;default:console.warn(this.name+": Invalid ready state ("+a+").");break}if(s){false;this._showError(s);this.disable()}this._uiUpdateWrapperClass()},_reportAudioError:function(e){try{var t=this.get("url");t.indexOf("assets.squarespace.com")>0&&c.Squarespace.Analytics.trackInternal("system_audio_play_error",{readyState:this.get("readyState"),url:t})}catch(e){}},_getPlaytimeString:function(e){if(!this._audio)return this.get("strings.durationPlaceHolder");var t="0:00";var a="0:00";t=this._getMinSecString(this._audio.duration);e&&(a=this._getMinSecString(e));return a+" / "+t},_getMinSecString:function(e){return n(1e3*e)},_showError:function(e){this.get("boundingBox").addClass("error");this.get("boundingBox").one(".placeholder").setContent("Error: "+e)},_onWhilePlaying:function(e){if(this.get("destroyed"))return;var t=this.get("boundingBox");t.one(".duration").setContent(this._getPlaytimeString(e.position));var a=this.getProperty("READY_STATES");this.get("readyState")!==a.SOUND_LOADED&&this._set("readyState",a.SOUND_LOADED);var i=t.one(".progress-inner");var s=e.position/this._audio.duration*100;t.removeClass("loading");i&&i.setStyle("width",s+"%")},_onStop:function(){this._set("playState",this.getProperty("PLAY_STATES").STOPPED)},_onPause:function(){this._set("playState",this.getProperty("PLAY_STATES").PAUSED)},_onDataError:function(){this.stop();this._set("playState",this.getProperty("PLAY_STATES").STOPPED)},_onLoad:function(e){e||(this._loadFailTimer=c.later(1e4,this,function(){this.stop();this._set("readyState",this.getProperty("READY_STATES").SOUND_LOAD_FAILED)}))}},{CSS_PREFIX:"sqs-audio-player",PLAY_STATES:{PLAYING:"playing",PAUSED:"paused",STOPPED:"stopped"},READY_STATES:{INITIALIZED:"initialized",FLASH_BLOCKED:"flash-blocked",SECURITY_ERROR:"security-error",SOUND_LOAD_FAILED:"sound-load-failed",SOUND_LOADED:"sound-loaded"},TEMPLATE:'<div class="controls" tabindex="0"></div><div class="placeholder"></div><div class="progress" tabindex="0"><div class="progress-inner"><div class="scrubber"></div></div></div><div class="duration"></div><div class="volume" tabindex="0"></div>',ATTRS:{strings:{value:{placeholder:s("Click to play…"),download:s("Download"),durationPlaceHolder:"0:00 / 0:00",loadFail:s("Unable to load sound at the URL"),soundManagerFlashFail:s("Sorry, could not load because flash is blocked."),soundManagerSecurityFail:s("Sorry, there was a JavaScript security error."),soundManagerURLFail:s("Unable to access audio stream.")}},fixedUrl:{getter:function(){var e=this.get("url");e&&e.indexOf(Static.SQUARESPACE_CONTEXT.appDomain)>0&&(e=e.replace(/^(http:\/\/|https:\/\/|\/\/)/i,window.location.protocol+"//"));return e},readOnly:true},playState:{lazyAdd:false,valueFn:function(){return this.getProperty("PLAY_STATES").STOPPED},readOnly:true},readyState:{lazyAdd:false,valueFn:function(){return this.getProperty("READY_STATES").INITIALIZED},readOnly:true},url:{value:null},volume:{validator:function(e){(e<0||e>100&&false)&&console.warn(this.name+": Volume must be between 0 and 100, volume remains unchanged.");return true},value:66},volumeLevels:{value:6,writeOnce:"initOnly"},stopOthersOnPlay:{value:true},render:{value:true}}});var i=[];c.Squarespace.Widgets.AudioPlayer.initializeNode=function(e){if(e.get("children").size()>0)return;if(!c.Widget.getByNode(e.one("."+c.Squarespace.Widgets.AudioPlayer.CSS_PREFIX))){var t=c.Object.getValue(e.getData(),"design-style")||"minimal";var a;switch(t){case"legacy":a=new c.Squarespace.Widgets.AudioPlayer({render:e});break;default:a=new c.Squarespace.Widgets.AudioPlayerMinimal({render:e})}i.push(a)}};c.config.win.Squarespace.onInitialize(c,function(){c.all(".sqs-audio-embed").each(c.Squarespace.Widgets.AudioPlayer.initializeNode)});c.config.win.Squarespace.onDestroy(c,function(){i.forEach(function(e){e.destroy()});i.length=0})},"1.0",{requires:["base","event","node","squarespace-album-player","squarespace-ss-widget","squarespace-util","squarespace-widgets-audio-player"]})},"./src/main/webapp/universal/scripts-v6/basic-check.js":function(e,t){YUI.add("squarespace-basic-check",function(a){var e=function(t){return function(e){e.halt();t.call(this,e)}};a.namespace("Squarespace.Widgets");var t=a.Squarespace.Widgets.BasicCheck=a.Base.create("basicCheck",a.Squarespace.Widgets.DataWidget,[],{bindUI:function(){t.superclass.bindUI.call(this);this.get("boundingBox").on("click",e(this._toggleActive),this)},renderUI:function(){var e=this.get("contentBox");a.Lang.isValue(this.get("title"))&&e.append('<div class="title">'+this.get("title")+"</div>");var t=a.Node.create('<div class="check-element"></div>');e.append(t);a.Lang.isValue(this.get("label"))&&t.append('<div class="label">'+this.get("label")+"</div>")},syncUI:function(){t.superclass.syncUI.call(this);var e=this.get("contentBox");e.one(".check-element").toggleClass("active",this.get("data"))},_toggleActive:function(){this.set("data",!this.get("data"))}},{CSS_PREFIX:"sqs-basic-check",ATTRS:{data:{value:false,validator:a.Lang.isBoolean},name:{value:null},title:{value:null},label:{value:null}}})},"1.0",{requires:["base","squarespace-dialog-check-template","squarespace-widgets-data-widget"]})},"./src/main/webapp/universal/scripts-v6/beforeunload.js":function(e,t){YUI.add("squarespace-beforeunload",function(s){var n="gallery-dom0beforeunload",r=s.config.win.onbeforeunload;s.config.win.onbeforeunload=function(e){var t=e||s.config.win.event;r&&r(t);var a=new s.DOMEventFacade(t),i;s.fire(n,a);i=a.returnValue;if(i){t.returnValue=i;return i}s.config.win.onbeforeunload=r};s.Env.evt.plugins.beforeunload={on:function(e,t){var a=s.Array(arguments,0,true);a[0]=n;return s.on.apply(s,a)}}},"1.0",{requires:[]})},"./src/main/webapp/universal/scripts-v6/block-content/html-editor.js":function(e,t,a){var i=a("./common/temp/node_modules/lodash/debounce.js");var s=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var n=a("./src/main/webapp/universal/src/shared/constants/TextEditor.js");var r=a("./src/main/webapp/universal/src/shared/utils/TemplateVersionUtils.js");var c=a("./src/main/webapp/universal/src/shared/utils/RteUtils.js");var u=a("./common/temp/node_modules/@sqs/rosetta-tokens/build/lib/index.js").breakpoints;var d=a("./common/temp/node_modules/@sqs/rosetta-utilities/build/lib/index.js").getBreakpoint;var p=a("./src/main/webapp/frontend/packages/universal-flags/lib/index.js").isRosettaRichTextToolbarLayoutEngineEnabled;var h=r.isSevenOne();var o={full:n.SchemaTypes.CLASSIC,simple:n.SchemaTypes.SIMPLE};var g=["left","center","right","justify"];var m={command:"removeBlock",title:s("Remove Block"),icon:"trashcan"};YUI.add("squarespace-block-content-html-editor",function(l){l.namespace("Squarespace.Content");l.Squarespace.Content.HtmlEditor=l.Base.create("contentHtmlEditor",l.SQS.LayoutEngine.BlockContent.HtmlEditorBase,[l.Squarespace.Mixins.EventRegistrar],{initializer:function(){this._debouncedSetData=i(function(e){!this.get("destroyed")&&this.visualEditor&&this.visualEditor.setData(e)}.bind(this),50)},destructor:function(){var e=this.get("host").get("contentBox");this._debouncedSetData.cancel();this._destroyVisualEditor();e.detachAll()},beforeLayoutDrag:function(){this.get("host").blur();this.block.blur();this.hideEditor()},afterLayoutDrag:function(){l.soon(this.showEditor.bind(this))},hideEditor:function(){var e=this.get("host");var t=e.get("contentBox");if(!this.visualEditor)return;var a=this.visualEditor.get("boundingBox");this.visualEditor.blur();t.setHTML(this.visualEditor.getData());t.inDoc(t.get("ownerDocument"))||a.get("parentElement").insertBefore(t,a);a.setStyles({display:"none",visibility:"hidden"});a.removeClass("sqs-html-content")},showEditor:function(){if(!this.visualEditor)return;var e=this.get("host");var t=e.get("contentBox");var a=this.visualEditor.get("boundingBox");t.inDoc(t.get("ownerDocument"))&&t.get("parentElement").removeChild(t);a.setStyles({display:"",visibility:""});a.addClass("sqs-html-content")},syncEditorUI:function(e){var t=this.get("host").get("contentBox");this._debouncedSetData("string"===typeof e?e:t.getHTML());"string"===typeof e&&t.setHTML(e)},getEditorType:function(){var e=this.get("host");var t=e.get("type");return o[t]},initEngine:function(e){var t=this.get("host");var a=this.getEditorType();var i=t.get("contentBox");this._sanitizeOldAlignClasses();this.visualEditor=new l.Squarespace.TextEditor({initialData:i,render:true,replaceNode:i,contentNode:t.get("boundingBox"),placeholder:t.get("placeholderText"),editable:t.get("editable"),type:a,commands:{removeBlock:this._handleRemoveBlockRequest.bind(this)},MenuConstructor:l.Squarespace.Singletons.TextEditorToolbar,menuItems:this._getEditorMenuItems()});this._bindEditorEvents();this.showEditor()},_sanitizeOldAlignClasses:function(){var s=false;var e=this.get("host").get("contentBox");e.all('[class*="text-align-"]').each(function(e){var t=e.get("className").split(/\s+/);var a=l.Array.find(t,function(e){return 0===e.indexOf("text-align-")});if(a){var i=a.replace("text-align-","");if(g.indexOf(i)>-1){s=true;e.setStyle("textAlign",i)}}});s&&this.get("host").get("model").set("html",e.getHTML(),{silent:true})},_getEditorMenuItems:function(){var e=this.get("host");var t=this.getEditorType();var a=false;var i=false;try{a="IMAGE"===e.get("parent").get("blockTypeName")}catch(e){}if(a)try{i=e.get("srcNode").hasClass("image-caption")}catch(e){}var s=h&&a&&!i;var n={type:t,hasAlignment:!s,hasLink:e.get("hasHyperlink")};var r=p(d(u))?c.getItems(n):l.Squarespace.Singletons.TextEditorToolbar.getItems(n);var o=e.get("enableDelete");return o?r.concat(m):r},_bindEditorEvents:function(){this.visualEditor.on("mouseDown",function(e){if(!this.get("host").get("focused")){this.block.get("focusHandler")._onDocFocus({target:this.get("host").get("boundingBox")});this.block.get("editController").hideBlockMenus()}},this);this.visualEditor.on("contentUpdated",function(e){this.visualEditor.isEmpty()?this._save(""):this._save(e.content)},this);this.afterHostEvent("editableChange",function(e){this.visualEditor&&this.visualEditor.set("editable",e.newVal)})},_afterBlur:function(){this.constructor.superclass._afterBlur.apply(this,arguments);this.visualEditor&&this.visualEditor.blur()},_handleRemoveBlockRequest:function(){if(!this.get("host").get("enableDelete"))return;var e=new l.Squarespace.Widgets.Confirmation({"strings.title":s("Remove Block"),"strings.message":s("Are you sure you wish to remove this block?")});e.on("confirm",function(){this.block.removeBlock()},this)},_getVisualEditorData:function(){if(this.visualEditor){if(this.visualEditor.isEmpty())return"";return this.visualEditor.getData(true)}},setEditorData:function(e){if("string"===typeof e){var t=this.get("host").get("contentBox");t.setHTML(e);this._debouncedSetData(e)}},_giveEditorFocus:function(e){if(this.visualEditor)return this.visualEditor.focus(e?{left:e.pageX,top:e.pageY}:null)},_destroyVisualEditor:function(){if(l.Lang.isValue(this.visualEditor)){this.visualEditor.destroy();this.visualEditor=null}}},{NS:"contentEditor"})},"2.0",{requires:["base","@sqs/layout-engine/block-content-html-editor-base","squarespace-widgets-confirmation","squarespace-text-editor-base","squarespace-text-editor-rosetta","squarespace-text-editor-damask","squarespace-text-editor","squarespace-text-editor-toolbar","squarespace-mixins-event-registrar"]})},"./src/main/webapp/universal/scripts-v6/block-content/image-editor.js":function(e,t,a){var i=a("./common/temp/node_modules/lodash/invert.js");var s=a("./src/main/webapp/frontend/packages/enums/LicensedAssetSource.js");var n=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var u=a("./src/main/webapp/universal/src/shared/constants/UploadModes.js");var d=a("./src/main/webapp/universal/src/shared/dispatchers/alt/index.ts");var p=a("./common/temp/node_modules/alt-utils/lib/ActionListeners.js");var h=a("./src/main/webapp/universal/src/shared/actions/JobActions.js");var g=a("./src/main/webapp/universal/src/shared/stores/JobStore.js");var m=a("./src/main/webapp/universal/src/shared/utils/VisualUtils.js").getFocalPoint;var f=a("./src/main/webapp/universal/src/shared/utils/performance.js").notifyUserTiming;var v=a("./common/temp/node_modules/@sqs/rum-collector/timing.js");var r=a("./src/main/webapp/universal/src/shared/utils/Loggers.ts");var b=r.createLogger("block-content/image-editor","orange",false);YUI.add("squarespace-block-content-image-editor",function(o){var e="/api/uploads/images";var a=o.UA.mobile?"dbltap":"dblclick";var r="image-upload-";var l={FILE:0,GETTY:s.GETTY,UNSPLASH:s.UNSPLASH};var c=i(l);o.namespace("Squarespace.Content.Image");o.Squarespace.Content.Image.Editor=o.Base.create("ImageEditor",o.SQS.LayoutEngine.BlockContent.ImageEditorBase,[],{initializer:function e(){var t=this.get("host");this._bb=t.get("boundingBox");this._cb=t.get("contentBox");this._model=t.get("model");this.bbListener=this._bb.on(a,this.onBoundingBoxDoubleClick,this);this.after("editingChange",this.afterEditingChange,this);this.modelListeners=[];this.modelListeners.push(this._model.after(["completedChange","processingChange"],this.renderState,this),this._model.after(["stretchChange","dimensionsChange"],this.renderOverlay,this),this._model.after("imageIdChange",this.afterImageIdChange,this));this.actionListener=new p(d);this.actionListener.addActionListener(h.COMPLETE,this.onJobComplete.bind(this));if(this._isPerformanceSupported()){o.Global.on("dialogFileImage:uploadStart",function(){if(this._model&&!this._model.get("imageId")){this.set("trackingStartMark","start-"+r+this._model.get("clientId"));v.mark(this.get("trackingStartMark"))}}.bind(this));this._model.on("processingChange",this.onProcessingChange,this);this.on("trackingInProgressChange",this.onTrackingInProgressChange,this)}},destructor:function e(){this.destroyUploader();this.bbListener&&this.bbListener.detach(a,this.onBoundingBoxDoubleClick,this);this.modelListeners.forEach(function(e){e.detach()})},destroyUploader:function e(){this.uploader&&this.uploader.destroy();this.uploader=null},onBoundingBoxDoubleClick:function(){var e=o.Lang.isValue(this._model.get("imageId"));if(!e)return;var t=this._model.get("processing");if(t)return;this.set("editing",true)},afterImageIdChange:function(e){if(null!==e.newVal){this.get("trackingInProgress")||this.set("trackingInProgress",true);h.monitor([e.newVal])}else this.clearTrackingState()},onJobComplete:function(e){if(!this._model)return;var t=this._model.get("imageId");var a=o.Array.find(e,function(e){return e===t});if(this.get("trackingInProgress"))for(var i=0;i<e.length;++i){var s=g.getJobById(e[i]);var n=s&&s.data&&s.data.contentItemId;var r=s&&s.data&&s.data.processorConfig;if(t===n&&r){this.set("trackingJobProcessor",r);break}}a&&this._model.loadImageData()},onProcessingChange:function(e){if(e.newVal!==e.prevVal){e.newVal&&!this.get("trackingInProgress")&&this.set("trackingInProgress",true);this.get("trackingInProgress")&&(e.newVal?this.set("trackingWasProcessed",true):false===e.newVal&&this.set("trackingInProgress",false))}},onTrackingInProgressChange:function(e){if(e.newVal!==e.prevVal)if(e.newVal&&!this.get("trackingStartMark")){this.set("trackingStartMark","start-"+r+this._model.get("clientId"));v.mark(this.get("trackingStartMark"))}else if(!e.newVal&&e.prevVal&&this.get("trackingStartMark")){this.set("trackingEndMark","end-"+r+this._model.get("clientId"));v.mark(this.get("trackingEndMark"));this._createUploadMeasureName().then(function(e){v.measure(e,{start:this.get("trackingStartMark"),end:this.get("trackingEndMark")});this.clearTrackingState();f()}.bind(this)).catch(function(){this.clearTrackingState()}.bind(this))}},syncUploadUI:function(){if(!this._model)return;this._model.get("imageId")||this.removeImageOverlay();if(!this._model.isEmpty()){this.destroyUploader();this.get("host").render();return}this.uploader||this.createUploader()},createUploader:function(){this.uploader=new o.Squarespace.Uploader({uploadURL:e,multipleFiles:false,appendNewFiles:false,isTransient:u.TRANSIENT,isGlobal:false,autoUpload:true,addPlaceholder:o.bind(this.addPlaceholder,this),selectButtonLabel:n("Add Image"),dragAndDropArea:this._bb,fileFilters:[{description:n("Images"),extensions:"*.jpg;*.jpeg;*.png;*.gif;*.ico",acceptTypes:"image/png, image/gif, image/jpeg"}],maxSize:20,processFile:o.bind(this.processFile,this),createJob:o.bind(this.createImageProcessingJob,this),jobComplete:o.bind(this.jobComplete,this),render:this._cb});this.uploader.on("fileuploadstart",function(){this.clearTrackingState();this.set("trackingInProgress",true);this.uploadProgress({completed:0})},this);this.uploader.after("uploadprogress",function(e){this.uploadProgress({completed:e.percentLoaded})},this);this.uploader.get("boundingBox").removeClass("sqs-uploader");this.uploader.get("boundingBox").addClass("sqs-image-uploader")},addPlaceholder:function(e){return this._cb},createImageProcessingJob:function(e,t){if(!t.job){console.warn("[image-editor] response.job missing, not creating aux job",t);return null}var a=o.merge(t.job,{started:true});var i=new o.Squarespace.ImageProcessingJob(a);this.uploadProgress({completed:1,itemRepresentation:t.media[0]});return i},jobComplete:function(e,t){var a=o.bind(function e(){this.jobUpdate({status:t.get("status"),data:t.get("data")})},this);t.get("status")===o.Squarespace.JobStatuses.SUCCESS?this._model.loadImageData().then(a):a()},processFile:function(e){if(e.invalid){this.alertInvalidFiledata();return}e.postData={process:true,contentType:"image"}},alertInvalidFiledata:function(e){var t=e.invalid[0];var a=t.title;var i=t.message;if(this.get("strings.invalidDrop")){a=this.get("strings.invalidDrop.title");i=this.get("strings.invalidDrop.message")}new o.Squarespace.Widgets.Alert({position:o.Squarespace.Widgets.Alert.ANCHOR.ELEMENT,anchor:this.get("contentBox"),"strings.title":a,"strings.message":i})},renderState:function e(){if(!this._cb.getDOMNode())return;var t=this._model.get("completed");if(o.Lang.isValue(t)&&t<1){this.setUploadingState();return}var a=o.Lang.isValue(this.get("host").get("parent"));if(this._model.get("processing")&&a){this.setProcessingState();return}this.clearProcessingState()},clearModel:function(){this._model.setAttrs({completed:null,processing:false,baseAssetUrl:"",imageId:null,isBase64:false})},clearProcessingState:function(){b("imageEditor cleanProcessingState");if(!this._cb.getDOMNode())return;this.clearProgressBar();this.clearProcessingSpinner();this.unbindProgressCancellation();this._cb.removeClass(this.get("host").getClassName("processing"))},clearTrackingState:function(){this._isPerformanceSupported()&&this.setAttrs({trackingStartMark:null,trackingEndMark:null,trackingWasProcessed:false,trackingInProgress:false,trackingJobProcessor:"legacy"})},unbindProgressCancellation:function(){this._progressCancel&&this._progressCancel.detach();this._progressCancel=null},setUploadingState:function(){var e=100*this._model.get("completed");b("imageEditor uploading",{completion:e});var t=this._cb.plug(o.Squarespace.Plugin.ProgressBar,{progress:e})[o.Squarespace.Plugin.ProgressBar.NS];this.unbindProgressCancellation();this._progressCancel=t.on("cancel",this.unbindProgressCancellation,this);this._cb.addClass(this.get("host").getClassName("processing"))},clearProgressBar:function(){this._cb.hasPlugin(o.Squarespace.Plugin.ProgressBar.NS)&&this._cb.unplug(o.Squarespace.Plugin.ProgressBar)},clearProcessingSpinner:function(){this._cb.hasPlugin(o.Squarespace.Plugin.ProgressSpinner.NS)&&this._cb.unplug(o.Squarespace.Plugin.ProgressSpinner)},setProcessingState:function(){b("imageEditor setProcessingState");this.clearProcessingState();this._cb.addClass(this.get("host").getClassName("processing"));this._cb.plug(o.Squarespace.Plugin.ProgressSpinner);this._progressCancel=this._cb.one(".cancel-process").on("click",this.onCancelProcessingClick,this)},onCancelProcessingClick:function(e){e.halt();this.clearModel();this.clearProcessingState();this.clearTrackingState()},afterEditingChange:function(e){if(!this._model.get("imageId"))return;var t=this.get("editing");if(t){this.enableOverlay();return}this.disableOverlay()},destroyOverlay:function(){this.overlay&&this.overlay.destroy();this.overlay=null},enableOverlay:function(){if("inline"===this._model.get("designLayout")){if(this.overlay&&o.Lang.isValue(this.get("host").imgNode)){var e=this.overlay.get("contentBox").one("img").getAttribute("src");var t=this.get("host").imgNode.getAttribute("src");e!==t&&this.destroyOverlay()}this.overlay||this.createOverlay();this.overlay.get("boundingBox").setStyles({position:"absolute",opacity:1});this.overlay.show();this.renderOverlay()}this._bb.on("clickoutside",this.onBoundingBoxOutsideClick,this);this.mousedown=this._bb.on("mousedown",this._imgDragMousedown,this)},disableOverlay:function(){this._bb.detach("clickoutside");this.mousedown&&this.mousedown.detach();this.imgDragMove&&this.imgDragMove.detach();this.imgDragUpInnerFrame&&this.imgDragUpInnerFrame.detach();this.imgDragUpOuterFrame&&this.imgDragUpOuterFrame.detach();this.set("positioning",false);this.hideOverlay()},renderOverlay:function e(){if(!this.overlay)return;var t=this.overlay.get("align.node").get("region");b("imageEditor renderOverlay",{alignNodeRegion:t});this.overlay.setAttrs({height:t.height,width:t.width});this.overlay.align()},onBoundingBoxOutsideClick:function(e){false===this.get("editing")||e.target.ancestor(".dialog-editor-block-image",true)||this.set("editing",false)},hideOverlay:function(e){if(!this.overlay)return;this.overlay.hide()},createOverlay:function(){var e="inline"===this._model.get("designLayout");var t=this.overlay;if(!e||t)return;var a=o.Node.create('<img class="sqs-image-overlay">');a.setAttribute("src",this.get("host").imgNode.getAttribute("src"));a.setStyles({height:"100%",width:"100%",opacity:.2});this.overlay=new o.Overlay({bodyContent:a,zIndex:1,align:{node:this.get("host").imgNode,points:["cc","cc"]}});this.get("host").imgNode.on("load",this.renderOverlay,this);this.overlay.on("visibleChange",this.renderOverlay,this);this.afterOverlayFocalPointChange=this._model.after("focalPointChange",this.renderOverlay,this);this.overlay.get("boundingBox").addClass("sqs-imageoverlay");this.overlay.get("bodyContent").setStyle("height",null);var i=this._bb.ancestor(".sqs-block");i=i||"body";this.overlay.render(i);this.overlay.hide()},removeImageOverlay:function(){this.afterOverlayFocalPointChange&&this.afterOverlayFocalPointChange.detach();this.destroyOverlay()},_imgDragMousedown:function e(t){if(this.get("editing")&&!this._model.isEmpty()){o.DD.DDM.stopDrag();t.halt();this.startX=t.pageX;this.startY=t.pageY;this.startFocal=this._model.get("focalPoint").split(",");this.bbR=this.get("host").get("boundingBox").get("region");this.imgR=this.get("host").imgNode.get("region");this.imgDragMove&&this.imgDragMove.detach();this.imgDragUpInnerFrame&&this.imgDragUpInnerFrame.detach();this.imgDragUpOuterFrame&&this.imgDragUpOuterFrame.detach();var a=this.get("id");var i=o.one(o.config.win);this.imgDragMove=i.on([a+"|mousemove",a+"|touchmove"],this._imgDragDrag,this);this.imgDragUpInnerFrame=i.on([a+"|mouseup",a+"|touchend"],this._imgDragEnd,this);this.imgDragUpOuterFrame=i.on([a+"|mouseup",a+"|touchend"],this._imgDragEnd,this);this.set("positioning",true)}},_imgDragDrag:function e(t){var a=this.imgR;var i=this.bbR;var s=t.pageX-this.startX;var n=t.pageY-this.startY;var r=parseFloat(this.startFocal[0]);var o=parseFloat(this.startFocal[1]);var l=m({distance:s,imgSize:a.width,containerSize:i.width,startFocal:r});var c=m({distance:n,imgSize:a.height,containerSize:i.height,startFocal:o});this._model.set("focalPoint",l+","+c)},_imgDragEnd:function e(t){this.imgDragMove&&this.imgDragMove.detach();this.imgDragUpInnerFrame&&this.imgDragUpInnerFrame.detach();this.imgDragUpOuterFrame&&this.imgDragUpOuterFrame.detach();this.set("positioning",false);this._model.saveFocalPoint()},_createUploadMeasureName:function(){return o.Squarespace.Promises.create(function(t,e){var a=this._model.get("licensedAssetId");var i=this._model.get("licensedAssetPreview");var s=this.get("trackingJobProcessor");var n=r;this.get("trackingWasProcessed")?n+=s+"-":n+="imported-";a?o.Squarespace.LicensedAssets.Manager.getById(a).then(function(e){t(n+c[e.source].toLowerCase())}).catch(e):t(i?n+c[l.GETTY].toLowerCase():n+c[l.FILE].toLowerCase())}.bind(this))},_isPerformanceSupported:function(){var e=window.Y.config.win.performance;return e&&e.mark&&e.measure&&e.clearMarks}},{NS:"contentEditor",ATTRS:{trackingWasProcessed:{value:false,validator:o.Squarespace.AttrValidators.isBoolean},trackingInProgress:{value:false,validator:o.Squarespace.AttrValidators.isBoolean},trackingStartMark:{value:null,validator:o.Squarespace.AttrValidators.isNullOrString},trackingEndMark:{value:null,validator:o.Squarespace.AttrValidators.isNullOrString},trackingJobProcessor:{value:"legacy",validator:o.Squarespace.AttrValidators.isString}}})},"1.0",{requires:["node","base","overlay","anim","event-touch","event-tap","dd-delegate","@sqs/layout-engine/block-content-image-editor-base","squarespace-plugin-progress-bar","squarespace-plugin-progress-spinner","squarespace-uploader","squarespace-jobs","squarespace-job-manager","squarespace-event-dbltap","squarespace-models-content-item","squarespace-widgets-alert","squarespace-licensed-assets-manager"]})},"./src/main/webapp/universal/scripts-v6/block/acuity-editor.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/universal/src/shared/constants/HelpLinks.js");var n=a("./src/main/webapp/universal/src/shared/utils/validation/urlValidator.js");YUI.add("squarespace-block-acuity-editor",function(e){e.namespace("Squarespace.Block.Editor");e.Squarespace.Block.Editor.Acuity=e.Base.create("acuity-block-editor-dialog",e.Squarespace.Block.Editor.Dialog,[],{initializer:function(){var e=this.configDialog.get("dialog");e.on("shown",this.initializeDialog,this)},initializeDialog:function e(){var t=this.configDialog.get("dialog");var a=t.getField("acuityUrl");a.after("dataChange",this.sanitizeUrl,this)},sanitizeUrl:function(e){var t=e.newVal.trim();if(!n(t)){i.set("data",e.prevVal);return}var a=this.configDialog.get("dialog");var i=a.getField("acuityUrl");i.set("data",t)},_getModelEditor:function(){return e.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Acuity")}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Appointment Scheduling")}}});e.namespace("Squarespace.Block.ModelEditorDialog");e.Squarespace.Block.ModelEditorDialog.Acuity=e.Base.create("block-acuity-editor",e.Squarespace.ModelEditorDialog,[],{_getDialogConfig:function(){return{width:490,height:290,discardChangesConfirmation:false,initialDataByReference:true,tabs:[{title:i("Appointment Scheduling"),icon:"/universal/images-v6/icons/icon-button-16-light.png",scroll:true,fields:[{ctor:e.Squarespace.DialogFields.HTML,config:{className:"description",content:i('<p>Allow visitors to book appointments and classes directly on your site with <a href="{acuityLink}" target="_blank">Acuity Scheduling</a>.</p><p>If you already use Acuity, add the link to your scheduling page, calendar, or appointment type. <a href="{kbArticleLink}" target="_blank">Learn More</a></p>',{kbArticleLink:s.ACUITY_SCHEDULER,acuityLink:"https://www.acuityscheduling.com/?utm_source=sqsp&utm_medium=referral&utm_campaign=block&kw=sqsp-block"})}},{ctor:e.Squarespace.DialogFields.Text,config:{name:"acuityUrl","strings.title":i("Acuity Scheduling Page Link"),"strings.placeholder":"https://app.acuityscheduling.com/schedule.php?owner=125982"}},{ctor:e.Squarespace.DialogFields.HTML,config:{content:i('If you don\'t have an account, <a href="{acuitySignupLink}" target="_blank">sign up for Acuity Scheduling</a>.',{acuitySignupLink:"https://acuityscheduling.com/signup.php?action=form&type=professional&freeTrial=1&lite=1&btn=sqsp-block&utm_source=sqsp&utm_medium=referral&utm_campaign=block&kw=sqsp-block"})}}]}]}}},{ATTRS:{dialogConfig:{valueFn:"_getDialogConfig",validator:e.Lang.isObject}}})},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-damask-context-globals","squarespace-dialog-html","squarespace-dialog-slider","squarespace-dialog-text","squarespace-dialog-hidden","squarespace-model-editor"]})},"./src/main/webapp/universal/scripts-v6/block/acuity.js":function(e,t,a){var i=a("./src/main/webapp/frontend/packages/enums/BlockType.js");var n=a("./common/temp/node_modules/lodash/debounce.js");YUI.add("squarespace-block-acuity",function(e){var t={};var s=e.namespace("Squarespace.Block").Acuity=e.Base.create("block-acuity",e.SQS.LayoutEngine.Block.ModelSyncBase,[e.Squarespace.Block.PremiumBlockMixin],{initializer:function(){this._debouncedRender=n(function(e){var t=this.get("contentBox");this._renderBlock(e);t.removeClass(s.CSS_IS_RENDERING)},this.get("contentRefreshRate"))},bindUI:function(){var t=this.get("contentBox");this._registerEvent(this.get("model").on("change",function(e){t.addClass(s.CSS_IS_RENDERING)}));this._registerEvent(this.get("model").after("change",function(e){this._debouncedRender(e)},this))},_renderSuccess:function(e){s.superclass._renderSuccess.call(this,e);var t=this.get("contentBox");var a=t.one("script").getAttribute("src");var i=document.createElement("script");i.src=a;t.append(i)}},{CSS_PREFIX:"sqs-block-acuity",CSS_IS_RENDERING:"is-rendering",ATTRS:{editor:{valueFn:function(){return e.Squarespace.Block.Editor.Scheduling}},type:{value:i.ACUITY},defaultContentModel:{value:t},contentRefreshRate:{value:800}}})},"1.0",{requires:["base","@sqs/layout-engine/block-model-sync-base","squarespace-block-acuity-editor","squarespace-block-scheduling-editor","squarespace-block-schema-editor","squarespace-premium-block-mixin"]})},"./src/main/webapp/universal/scripts-v6/block/amazon-editor.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/universal/src/shared/constants/HelpLinks.js");YUI.add("squarespace-block-amazon-editor",function(a){a.namespace("Squarespace.Block.Editor").Amazon=a.Base.create("amazon-block-editor-dialog",a.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Amazon")}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Amazon")}}});a.namespace("Squarespace.Block.ModelEditorDialog").Amazon=a.Base.create("blockAmazonEditor",a.Squarespace.ModelEditorDialog,[],{},{ATTRS:{dialogConfig:{valueFn:function(){var e=this.get("model").get("showPrice");var t={width:420,primaryTabs:[{title:i("Amazon Product"),icon:"/universal/images-v6/icons/icon-amazon-16-light.png",scroll:false,fields:[{ctor:a.Squarespace.DialogFields.Description,text:i('Display and link to an item on Amazon. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:s.AMAZON_EDITOR})},{ctor:a.Squarespace.DialogFields.ProductChooser,name:"amazonProduct",mode:"amazon",maxResults:3,acConfig:{queryDelay:500}},{ctor:a.Squarespace.DialogFields.Select,config:{"strings.title":i("Alignment"),name:"alignment",description:i("Select alignment for this block."),className:"thin dark",defaultValue:"left",options:[{value:"left",label:i("Left")},{value:"center",label:i("Center")},{value:"right",label:i("Right")}]}},{ctor:a.Squarespace.DialogFields.Check,config:{name:"showImage",strings:{title:i("Show Image"),description:i("Show a thumbnail image of this product.")}}},{ctor:a.Squarespace.DialogFields.Check,config:{name:"showTitle",strings:{title:i("Show Title"),description:i("Show the title of this product.")}}},{ctor:a.Squarespace.DialogFields.Check,config:{name:"showAuthor",strings:{title:i("Show Author"),description:i("Show the author of this product.")}}},{ctor:a.Squarespace.DialogFields.Check,$when:function(){return e},config:{name:"showPrice",strings:{title:i("Show Price"),description:i("Display the current price of this product from Amazon.")}}},{ctor:a.Squarespace.DialogFields.Check,config:{name:"showBuyButton",strings:{title:i("Add Buy Button"),description:i("Add a button below this product to buy it on Amazon.com.")}}}]}]};return t}}}})},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-damask-context-globals","squarespace-dialog-check","squarespace-dialog-product-chooser","squarespace-dialog-select"]})},"./src/main/webapp/universal/scripts-v6/block/amazon.js":function(e,t,a){var i=a("./src/main/webapp/frontend/packages/enums/BlockType.js");var s=a("./src/main/webapp/universal/src/apps/App/shared/utils/BlockEditorUtils.js");YUI.add("squarespace-block-amazon",function(e){var t=e.Base.create("AmazonModel",e.Model,[],{},{ATTRS:{alignment:{value:"left"},showImage:{validator:e.Lang.isBoolean,value:true},showTitle:{validator:e.Lang.isBoolean,value:true},showAuthor:{validator:e.Lang.isBoolean,value:true}}});e.namespace("Squarespace.Block").Amazon=e.Base.create("block-amazon",e.SQS.LayoutEngine.Block.ModelSyncBase,[e.Squarespace.Block.PremiumBlockMixin],{},{CSS_PREFIX:"sqs-block-amazon",MODEL:t,ATTRS:{type:{value:i.AMAZON},editor:{valueFn:function(){return s.isBlockEditorV2Enabled(this.get("blockTypeName"))?e.Squarespace.Block.Editor.Schema:e.Squarespace.Block.Editor.Amazon}}}})},"1.0",{requires:["base","model","@sqs/layout-engine/block-model-sync-base","squarespace-block-amazon-editor","squarespace-premium-block-mixin"]})},"./src/main/webapp/universal/scripts-v6/block/archive-editor.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-block-archive-editor",function(e){e.namespace("Squarespace.Block.Editor").Archive=e.Base.create("archive-block-editor-dialog",e.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return e.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Archive")}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Archive")}}})},"1.0",{requires:["base","squarespace-block-archive-model-editor","squarespace-damask-context-globals"]})},"./src/main/webapp/universal/scripts-v6/block/archive-model-editor.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/frontend/packages/enums/CollectionTypes.js");var n=a("./src/main/webapp/frontend/packages/enums/CollectionOrdering.js");var r=a("./src/main/webapp/frontend/packages/enums/AggregationGroupSortByTypes.js");var o=a("./src/main/webapp/frontend/packages/enums/AggregationTypes.js");var l=a("./src/main/webapp/universal/src/shared/constants/HelpLinks.js");var c=a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts");var u=a("./src/main/webapp/frontend/packages/enums/Flag.js");var d=o.MONTH;YUI.add("squarespace-block-archive-model-editor",function(a){a.namespace("Squarespace.Block.ModelEditorDialog");a.Squarespace.Block.ModelEditorDialog.Archive=a.Base.create("ArchiveModelEditorDialog",a.Squarespace.ModelEditorDialog,[],{initializer:function(){this.get("dialog").on("ready",function(){this._setMultiColumnsFieldVisibility();this._setSortAndOrderFieldVisibility();this._setOrderAscendingFieldVisibility();this._setShowDateFieldVisibility();this._setDropdownTitleFieldVisibility();this._setTextAlignmentFieldVisibility();if(c.isFeatureEnabled(u.NESTED_CATEGORIES)){var e=this.get("dialog").getField("collectionId");e.after("dataChange",this._toggleGroupByCategoryOption,this)}},this);this.get("model").after("layoutChange",function(){this._setMultiColumnsFieldVisibility();this._setOrderAscendingFieldVisibility();this._setShowDateFieldVisibility();this._setDropdownTitleFieldVisibility();this._setTextAlignmentFieldVisibility()},this);this.get("model").after("groupByChange",function(){this._setSortAndOrderFieldVisibility();this._setOrderAscendingFieldVisibility()},this)},_toggleGroupByCategoryOption:function(){var e=this.get("dialog");var t=e.getField("groupBy");var a=t.get("options");var i=a.find(function(e){return e.value===o.CATEGORY});if(this._userHasSelectedProductCollection()){t.getValue()===o.CATEGORY&&t.setValue(d);i.disabled=true}else delete i.disabled;t.set("options",a)},_userHasSelectedProductCollection:function(){var e=this.get("dialog").getField("collectionId").getValue();var t=a.Squarespace.ContentCollectionCache.getById(e);return t&&a.Squarespace.ContentCollectionUtils.isProduct(t)},_setMultiColumnsFieldVisibility:function(){var e=this.get("model").get("layout");var t="index"===e||"list"===e;this.get("dialog").getField("multiColumns").set("visible",t)},_setSortAndOrderFieldVisibility:function(){var e=this.get("dialog");e.getField("authorSortBy").set("visible",this.isGroupByAuthor());e.getField("categoryAndTagSortBy").set("visible",this.isGroupByCategory()||this.isGroupByTag());var t=""===this.get("model").get("collectionId");e.getField("authorSortBy").get("boundingBox").toggleClass("disabled",t);e.getField("categoryAndTagSortBy").get("boundingBox").toggleClass("disabled",t)},_setOrderAscendingFieldVisibility:function(){var e="index"===this.get("model").get("layout");var t=this.isGroupByMonth()||this.isGroupByYear();this.get("dialog").getField("orderAscending").set("visible",t||e);var a=""===this.get("model").get("collectionId");this.get("dialog").getField("orderAscending").get("boundingBox").toggleClass("disabled",a)},_setShowDateFieldVisibility:function(){var e="index"===this.get("model").get("layout");this.get("dialog").getField("showDate").set("visible",e)},_setDropdownTitleFieldVisibility:function(){var e="dropdown"===this.get("model").get("layout");this.get("dialog").getField("dropdownTitle").set("visible",e)},_setTextAlignmentFieldVisibility:function(){var e="dropdown"!==this.get("model").get("layout");this.get("dialog").getField("textAlignment").set("visible",e)},isGroupByAuthor:function(){return this.get("model").get("groupBy")===o.AUTHOR},isGroupByCategory:function(){return this.get("model").get("groupBy")===o.CATEGORY},isGroupByTag:function(){return this.get("model").get("groupBy")===o.TAG},isGroupByMonth:function(){return this.get("model").get("groupBy")===o.MONTH},isGroupByYear:function(){return this.get("model").get("groupBy")===o.YEAR},_getDefaultDialogConfig:function(){var e=a.Squarespace.ObjectBuilder.makeArray([{tabTitle:i("Content"),icon:"/universal/images-v6/icons/icon-tagcloud-16-light-solid.png",scroll:true,fields:[{ctor:a.Squarespace.DialogFields.Description,config:{text:i('Create an organized list of links to blog posts, gallery images, products, or events. You can choose to group links by date, category, tag, or author in the <strong>Display</strong> tab. <a href="{helpLink}" target="_blank">Learn more</a><br><br>Start by selecting one of your pages below: ',{helpLink:l.ARCHIVE_EDITOR})}},{ctor:a.Squarespace.DialogFields.ContentIdSelector,config:{name:"collectionId",showCollectionTagsAndCategories:false,showGroupTitles:true,collectionFilter:{collectionType:[s.PRODUCTS,s.COLLECTION_TYPE_GENERIC],ordering:[n.USER,n.CHRONOLOGICAL,n.CALENDAR],folder:false},emptyMessage:i("No pages yet. Go to the pages panel and click a + to add new content.")}},{ctor:a.Squarespace.DialogFields.Hidden,config:{name:"blockId"}}]},{tabTitle:i("Display"),scroll:true,fields:[{ctor:a.Squarespace.DialogFields.Select,config:{"strings.title":i("Layout"),name:"layout",className:"thin dark",defaultValue:"index",options:[{value:"index",label:i("Index")},{value:"list",label:i("List")},{value:"dropdown",label:i("Dropdown")}]}},{ctor:a.Squarespace.DialogFields.Check,name:"multiColumns",config:{"strings.title":i("Break Into Multiple Columns")}},{ctor:a.Squarespace.DialogFields.Select,config:{"strings.title":i("Text Alignment"),name:"textAlignment",className:"thin dark",defaultValue:"left",options:[{value:"left",label:i("Left")},{value:"center",label:i("Center")},{value:"right",label:i("Right")}]}},{ctor:a.Squarespace.DialogFields.Text,config:{"strings.title":i("Dropdown Title"),name:"dropdownTitle",className:"thin dark",defaultValue:i("Archive")}},{ctor:a.Squarespace.DialogFields.Select,config:{"strings.title":i("Group By"),name:"groupBy",className:"thin dark",defaultValue:d,options:[{value:o.MONTH,label:i("Month")},{value:o.YEAR,label:i("Year")},{value:o.AUTHOR,label:i("Author")},{value:o.CATEGORY,label:i("Category")},{value:o.TAG,label:i("Tag")}]}},{ctor:a.Squarespace.DialogFields.Select,config:{"strings.title":i("Sort By"),name:"authorSortBy",className:"thin dark",defaultValue:r.FIRSTNAME,options:[{value:r.FIRSTNAME,label:i("First Name")},{value:r.LASTNAME,label:i("Last Name")},{value:r.COUNT,label:i("Count")},{value:r.ACTIVITY,label:i("Activity")}]}},{ctor:a.Squarespace.DialogFields.Select,config:{"strings.title":i("Sort By"),name:"categoryAndTagSortBy",className:"thin dark",defaultValue:r.NAME,options:[{value:r.NAME,label:i("Name")},{value:r.COUNT,label:i("Count")},{value:r.ACTIVITY,label:i("Activity")}]}},{ctor:a.Squarespace.DialogFields.Check,name:"orderAscending",config:{"strings.title":i("Sort Dates Ascending")}},{ctor:a.Squarespace.DialogFields.Check,name:"showDate",config:{"strings.title":i("Show Item Date")}},{ctor:a.Squarespace.DialogFields.Check,name:"showCount",config:{"strings.title":i("Show Group Count")}}]}]);return{title:i("Archive"),width:400,height:550,loadingText:i("Editing Archive Block…"),initialDataByReference:true,tabs:e}}},{ATTRS:{dialogConfig:{valueFn:"_getDefaultDialogConfig",validator:a.Lang.isObject}}})},"1.0",{requires:["base","model","squarespace-dialog-check","squarespace-dialog-content-selector","squarespace-dialog-hidden","squarespace-dialog-select","squarespace-dialog-slider","squarespace-dialog-text","squarespace-model-editor","squarespace-object-builder"]})},"./src/main/webapp/universal/scripts-v6/block/archive.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/frontend/packages/enums/BlockType.js");var n=a("./src/main/webapp/frontend/packages/enums/AggregationGroupSortByTypes.js");var r=a("./src/main/webapp/frontend/packages/enums/AggregationTypes.js");var o=a("./src/main/webapp/universal/src/apps/App/shared/utils/BlockEditorUtils.js");YUI.add("squarespace-block-archive",function(e){e.namespace("Squarespace.Block").Archive=e.Base.create("block-archive",e.SQS.LayoutEngine.Block.ModelSyncBase,[e.Squarespace.Block.PremiumBlockMixin],{_getDefaultContent:function(){return{collectionId:"",layout:"index",blockId:e.Squarespace.Utils.getGuid(),groupBy:r.MONTH,dropdownTitle:i("Archive"),authorSortBy:n.FIRSTNAME,categoryAndTagSortBy:n.NAME,orderAscending:false,showDate:true,showCount:false,multiColumns:true}}},{CSS_PREFIX:"sqs-block-archive",ATTRS:{editor:{valueFn:function(){return o.isBlockEditorEnabled(this.get("blockTypeName"))?e.Squarespace.Block.Editor.Schema:e.Squarespace.Block.Editor.Archive}},type:{value:s.ARCHIVE},defaultContentModel:{valueFn:"_getDefaultContent"}}})},"1.0",{requires:["base","model","squarespace-block-archive-editor","squarespace-block-schema-editor","@sqs/layout-engine/block-model-sync-base","squarespace-util","squarespace-premium-block-mixin"]})},"./src/main/webapp/universal/scripts-v6/block/audio-editor.js":function(e,t,a){var r=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var o=a("./src/main/webapp/universal/src/shared/constants/HelpLinks.js");YUI.add("squarespace-block-audio-editor",function(i){var e=352;var t={FULL:"full",TRAILER:"trailer",BONUS:"bonus"};var a={};a[t.FULL]=r("A complete episode.");a[t.TRAILER]=r("A short preview of an episode.");a[t.BONUS]=r("Extra content for a show.");var s={title:r("Audio"),initialDataByReference:true,width:420,height:600,tabs:[{tabTitle:r("Embed"),icon:"/universal/images-v6/icons/icon-audio-16-light-solid.png",scroll:true,fields:[{ctor:i.Squarespace.DialogFields.Description,config:{text:r('Add an audio player to the page for a single .mp3 file. You can upload a file from your computer or link to an externally hosted file. <a href="{url}" target="_blank">Learn more</a>',{url:o.AUDIO_BLOCK_SUPPORT})}},{ctor:i.Squarespace.DialogFields.MultiOption,config:{name:"file-location",className:"round icon20",ignoreChanges:true,titleStyle:"top",options:[{icon:"importing",title:r("Upload File"),value:"embedded"},{icon:"gallery",title:r("External File"),value:"external"}]}},{ctor:i.Squarespace.DialogFields.MultiFrame,config:{name:"file-location-frame",width:e,variableHeight:true,frames:[{name:"embedded",fields:[{ctor:i.Squarespace.DialogFields.FileAudio,config:{width:352,height:220,max:200,transientStore:true,recordType:i.Squarespace.RecordType.AUDIO,contentLabel:r("an audio track"),maxSize:160,assetConstrainMethod:"contain",contentType:"audio",name:"audioAsset",uploadUrl:"/api/uploads/audio"}}]},{name:"external",fields:[{ctor:i.Squarespace.DialogFields.Text,config:{name:"audioAssetExternalUrl",maxlength:100,className:"thin",strings:{title:r("Audio File URL"),placeholder:r("http://…")}}},{ctor:i.Squarespace.DialogFields.Text,config:{name:"audioAssetLength",maxlength:100,strings:{title:r("File Size (In Bytes)")}}},{ctor:i.Squarespace.DialogFields.Select,config:{name:"audioAssetMimeTypeSelector",strings:{title:r("Audio File Mime Type")},options:[{label:r("audio/mpeg (.mp3)"),value:"audio/mpeg"},{label:r("Other"),value:""}]}},{ctor:i.Squarespace.DialogFields.Text,config:{name:"audioAssetMimeType",maxlength:100}}]}]}},{ctor:i.Squarespace.DialogFields.Text,config:{name:"title",maxLength:100,className:"thin",strings:{title:r("Title")}}},{ctor:i.Squarespace.DialogFields.Text,config:{name:"iTunesAuthor",maxLength:100,className:"thin",strings:{title:r("Author / Artist")}}}]},{tabTitle:r("Podcasting"),scroll:true,fields:[{ctor:i.Squarespace.DialogFields.Description,config:{text:r("These fields become tags for your podcast's RSS feed. Squarespace uses Apple Podcasts' standard format. <a href=\"{url}\">Learn more</a>",{url:o.PODCASTING_SUPPORT}),padding:[0,10]}},{ctor:i.Squarespace.DialogFields.Text,config:{name:"iTunesTitle",maxLength:300,strings:{title:r("Title"),description:r("The name of this episode.")},className:"thin"}},{ctor:i.Squarespace.DialogFields.Text,config:{name:"iTunesSubtitle",maxLength:300,strings:{title:r("Subtitle"),description:r("A brief description of this episode.")},className:"thin"}},{ctor:i.Squarespace.DialogFields.TextArea,config:{name:"iTunesSummary",maxLength:4e3,strings:{title:r("Summary"),description:r("A full description of the episode with detailed information.")},className:"thin"}},{ctor:i.Squarespace.DialogFields.Wysiwyg,config:{name:"iTunesEpisodeNote",editorHeight:175,description:r("A formatted description of this episode, supported by Apple Podcasts. Other podcasting platforms may display this description differently."),strings:{title:r("Episode Note")}}},{ctor:i.Squarespace.DialogFields.Select,config:{name:"iTunesEpisodeType",className:"thin dark",defaultValue:t.FULL,options:[{value:t.FULL,label:r("Full (default)")},{value:t.TRAILER,label:r("Trailer")},{value:t.BONUS,label:r("Bonus")}],strings:{title:r("Episode Type")}}},{ctor:i.Squarespace.DialogFields.Text,config:{name:"iTunesSeason",maxLength:300,strings:{title:r("Season Number"),description:r("Apple Podcasts only displays season numbers for podcasts with more than one season."),validationFailMessage:r("Season must be greater than 0.")},className:"thin",validator:function(e){return""===e||null===e||void 0===e||parseInt(e,10)>0}}},{ctor:i.Squarespace.DialogFields.Text,config:{name:"iTunesEpisode",maxLength:300,strings:{title:r("Episode Number"),description:r("An episode number. This sets the recommended order for your podcast episodes."),validationFailMessage:r("Episode must be greater than 0.")},className:"thin",validator:function(e){return""===e||null===e||void 0===e||parseInt(e,10)>0}}},{ctor:i.Squarespace.DialogFields.Text,config:{name:"iTunesDuration",maxLength:20,strings:{title:r("Episode Duration (hh:mm:ss)"),description:r("The duration of this episode.")},className:"thin"}},{ctor:i.Squarespace.DialogFields.Check,config:{name:"iTunesExplicit",strings:{title:r("Explicit Content"),description:r("This episode contains explicit content.")}}},{ctor:i.Squarespace.DialogFields.Text,config:{name:"podcastingUrlPrefix",maxLength:300,strings:{title:r("Podcast Analytics URL"),description:r('To track analytics for this episode using a third-party service, enter its URL. <a href="{kbUrl}">Learn more</a>.',{kbUrl:o.AUDIO_ANALYTICS}),placeholder:"https://..."},className:"thin"}}]},{tabTitle:r("Design"),scroll:true,fields:[{ctor:i.Squarespace.DialogFields.Check,config:{name:"showDownload",strings:{title:r("Show Download Link"),description:r("Allow the user to download a copy of this track.")}}},{ctor:i.Squarespace.DialogFields.Select,config:{name:"designStyle",className:"thin dark",defaultValue:"minimal",options:[{value:"legacy",label:r("Classic")},{value:"minimal",label:r("Minimal")}],strings:{title:r("Player Style")}}},{ctor:i.Squarespace.DialogFields.Select,config:{name:"colorTheme",defaultValue:"dark",className:"thin dark",options:[{value:"dark",label:r("Dark")},{value:"light",label:r("Light")}],strings:{title:r("Player Color")}}}]}]};i.namespace("Squarespace.Block");i.namespace("Squarespace.Block.Editor");i.namespace("Squarespace.Block.ModelEditorDialog");i.Squarespace.Block.Editor.Audio=i.Base.create("audio-block-editor-dialog",i.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return i.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Audio")}},{NS:"blockEditor",ATTRS:{blockName:{value:r("Audio")}}});var n=i.Squarespace.Block.ModelEditorDialog.Audio=i.Base.create("blockAudioEditor",i.Squarespace.ModelEditorDialog,[],{initializer:function(){var a=this.get("dialog");a.on("ready",function(){a.getField("audioAsset").set("height",220);a.getField("file-location").setAttrs({optionClickCb:function(e){a.getField("file-location-frame").switchFrames(e)}});var e=a.getField("designStyle");"classic"===e.get("data")&&e.set("data","minimal");if(i.Lang.isValue(e)){e.after("dataChange",function(e){this._toggleColorTheme(e.newVal)},this);this._toggleColorTheme(e.get("data"))}this._externalFileFields=i.Array.map(["audioAssetExternalUrl","audioAssetLength","audioAssetMimeType"],function(e){return a.getField(e)});a.getField("audioAsset").on("dataChange",this._bindMediaEvent,this);var t=a.getField("file-location-frame");"external"!==t.get("data")&&i.Array.each(this._externalFileFields,function(e){e.disable()});t.after("dataChange",function(e){var t="external"===e.newVal?"enable":"disable";i.Array.each(this._externalFileFields,function(e){e[t]()})},this);a.getField("audioAssetMimeTypeSelector").after("dataChange",function(e){var t=a.getField("audioAssetMimeType");if(""===e.newVal)t.show();else{t.set("data",e.newVal);t.hide()}},this);this._syncAudioMimeTypeAssetFreeformInputVisibility();this.bindEpisodeType()},this)},bindEpisodeType:function(){this.get("dialog").getField("iTunesEpisodeType").after("dataChange",this.updateEpisodeTypeDescription,this);this.updateEpisodeTypeDescription()},updateEpisodeTypeDescription:function(){var e=this.get("dialog").getField("iTunesEpisodeType");var t=e.get("data");a.hasOwnProperty(t)?e.set("strings.description",a[t]):e.set("strings.description",r("Select the type of content in this episode. Some podcasting platforms use this to organize episodes for listeners."))},destructor:function(){i.Lang.isValue(this._mediaEvent)&&this._mediaEvent.detach()},_syncAudioMimeTypeAssetFreeformInputVisibility:function(){var e=this.get("dialog");var t=e.getField("audioAssetMimeTypeSelector");var a=e.getField("audioAssetMimeType");var i=t.get("options").filter(function(e){return e.value.length>0}).map(function(e){return e.value});if(i.indexOf(a.get("data"))>-1){t.set("data",a.get("data"),{silent:true});a.hide()}else{t.set("data","",{silent:true});a.show()}},_toggleColorTheme:function(e){"minimal"===e?this.get("dialog").getField("colorTheme").show():this.get("dialog").getField("colorTheme").hide()},getDialogData:function(){var e=n.superclass.getDialogData.call(this);var t="embedded";var a=e.audioAssetExternalUrl;i.Lang.isString(a)&&a.length>0&&(t="external");e["file-location"]=t;e["file-location-frame"]=t;i.Lang.isString(e.audioAssetId)&&e.audioAssetId.length>0&&(e.audioAsset=new i.Squarespace.Models.ContentItem({id:e.audioAssetId}));return e},sanitizeDialogData:function(e){var t=e["file-location-frame"];if("external"===t)delete e.audioAsset;else{e.audioAssetExternalUrl=null;e.audioAssetLength=null;e.audioAssetMimeTypeSelector=null;e.audioAssetMimeType=null}delete e["file-location"];delete e["file-location-frame"];if(e.audioAsset){e.audioAssetId=e.audioAsset.get("id");delete e.audioAsset}else e.audioAssetId="";return e},_bindMediaEvent:function(e){var t=e.newVal;if(!i.Lang.isValue(t))return;this._mediaEvent=t.on("mediaProcessingStateChange",function(e){if(e.newVal!==i.Squarespace.MediaProcessingState.READY)return;t.once("load",this._fetchDataFromAudioFile,this)},this)},_fetchDataFromAudioFile:function(e){var t=e.target.get("structuredContent");var a=this.get("dialog");var i=a.getField("title").get("data").length;i||a.getField("title").set("data",t.get("title")||"");var s=a.getField("iTunesAuthor").get("data").length;s||a.getField("iTunesAuthor").set("data",t.get("artistName")||"")}},{ATTRS:{dialogConfig:{valueFn:function(){return s}}}})},"1.0",{requires:["base","squarespace-audio-player","squarespace-block-editor-dialog","squarespace-damask-context-globals","squarespace-dialog-check","squarespace-dialog-description","squarespace-dialog-file","squarespace-dialog-file-audio","squarespace-dialog-multi-option","squarespace-dialog-multi-frame","squarespace-dialog-text","squarespace-dialog-text-area","squarespace-models-content-item","squarespace-dialog-wysiwyg"]})},"./src/main/webapp/universal/scripts-v6/block/audio.js":function(e,t,a){var s=a("./src/main/webapp/frontend/packages/enums/BlockType.js");var n=a("./src/main/webapp/universal/src/apps/App/shared/utils/BlockEditorUtils.js");YUI.add("squarespace-block-audio",function(a){var e=a.Base.create("AudioBlockModel",a.Model,[],{},{ATTRS:{designStyle:{getter:function(e){if(!a.Lang.isValue(e))return"minimal";return e}},colorTheme:{getter:function(e){if(!a.Lang.isValue(e))return"dark";return e}}}});var i=a.namespace("Squarespace.Block").Audio=a.Base.create("block-audio",a.SQS.LayoutEngine.Block.ModelSyncBase,[a.Squarespace.Block.PremiumBlockMixin],{_renderSuccess:function(e){i.superclass._renderSuccess.call(this,e);var t=this.get("contentBox").one(".sqs-audio-embed");if(a.Lang.isValue(t))if(a.Squarespace.Widgets.AudioPlayer)switch(this.get("model").get("designStyle")){case"legacy":new a.Squarespace.Widgets.AudioPlayer({render:t});break;default:new a.Squarespace.Widgets.AudioPlayerMinimal({render:t})}else Squarespace&&Squarespace.addLoadTrigger&&Squarespace.addLoadTrigger(".sqs-audio-embed",["squarespace-audio-player"])}},{CSS_PREFIX:"sqs-block-audio",MODEL:e,ATTRS:{type:{value:s.AUDIO},editor:{valueFn:function(){return n.isBlockEditorV2Enabled(this.get("blockTypeName"))?a.Squarespace.Block.Editor.Schema:a.Squarespace.Block.Editor.Audio}},defaultContentModel:{value:{designStyle:"minimal",colorTheme:"dark"}}}})},"1.0",{requires:["base","model","@sqs/layout-engine/block-model-sync-base","squarespace-block-audio-editor","squarespace-premium-block-mixin"]})},"./src/main/webapp/universal/scripts-v6/block/base-custom-embed.js":function(e,t,a){var o=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var i=a("./src/main/webapp/universal/src/shared/utils/UrlUtils.js");YUI.add("squarespace-block-base-custom-embed",function(r){r.namespace("Squarespace.Block");r.Squarespace.Block.CustomEmbedBase=r.Base.create("block-customembed",r.SQS.LayoutEngine.Block.ModelSyncBase,[],{initializer:function(){this.get("safeguardEmbeddedScripts")&&this._bindSafePreviewModeChange()},_bindSafePreviewModeChange:function(){this.after("safePreviewModeChange",function(e){true===e.newVal?this._renderContentInSafePreview():true!==e.silent&&this._renderBlock()})},_getWidgetContent:function(e){if(!e)return null;var t=r.Node.create("<div></div>");t.insert(e);i.securifyBlockEmbed(t);this.get("safeguardEmbeddedScripts")&&!this.get("safePreviewMode")&&this._filterOutEmbeddedScripts(t);return t},_filterOutEmbeddedScripts:function(e){var t=e.all("script");if(t.size()>0){t.each(function(e){e.replace('<div class="removed-script"></div>')});var a=this._getNewStateMessageNode({title:o("Embedded Scripts"),classNames:"warning",message:o("This block contains embedded scripts. Embedded scripts are disabled while you're logged in and editing your site."),button:{text:o("Preview in safe mode"),onClick:r.bind(function(e){e.halt();this.safePreviewOn()},this)}});e.prepend(a)}},_renderContentInSafePreview:function(){var e=this.get("contentBox");var t=this._getCurrentContentDimensions();var a=r.Node.create('<iframe class="embedded-scripts-preview"></iframe>');var i=r.Lang.isValue(a.get("srcdoc"));var s=this.get("widgetContent");var n={allowfullscreen:true,width:t.width,height:t.height,srcdoc:s&&s.get("innerHTML")||"",seamless:"seamless",sandbox:this.get("defaultSandboxMode")};if(!i){n.sandbox+=" allow-same-origin";n.src='javascript: window.frameElement.getAttribute("srcdoc")'}a.plug(r.Squarespace.NodeDestroyNotifier,{onDestroy:r.bind(this.safePreviewOff,this,true)});e.empty().append(this._getNewStateMessageNode({title:o("Safe Preview"),message:o("Please view the page after logging out for accurate rendering."),button:{text:o("Exit safe preview"),onClick:r.bind(function(e){e.halt();this.safePreviewOff()},this)}})).append(a.setAttrs(n));i||a.setAttribute("sandbox",this.get("defaultSandboxMode"))},_getCurrentContentDimensions:function(){var e=this.get("contentBox");var t=e.one(".sqs-state-message");var a=parseInt(e.getComputedStyle("width"),10);var i=parseInt(e.getComputedStyle("height"),10);r.Lang.isValue(t)&&(i-=t.invoke("getBoundingClientRect").height);return{width:a,height:i}},safePreviewOn:function(){this.set("safePreviewMode",true)},safePreviewOff:function(e){this.set("safePreviewMode",false,{silent:true===e})}},{ATTRS:{widgetContent:{value:"",getter:"_getWidgetContent"},safeguardEmbeddedScripts:{value:false,writeOnce:"initOnly"},defaultSandboxMode:{value:"allow-forms allow-popups allow-scripts",readOnly:true},safePreviewMode:{value:false}}})},"1.0",{requires:["@sqs/layout-engine/block-model-sync-base","base","squarespace-plugin-node-destroy-notifier"]})},"./src/main/webapp/universal/scripts-v6/block/block-animation-analytics.js":function(e,t){YUI.add("squarespace-block-mixin-block-animation-analytics",function(l){l.namespace("Squarespace.Block.Mixins");l.Squarespace.Block.Mixins.BlockAnimationAnalytics=l.Base.create("BlockAnimationAnalytics",l.Base,[],{addLastChangedAnimationData:function(e){var t=this.get("model");var a=t.lastChange||{};var i=l.Array.find(l.Object.keys(a),function(e){return/animation/i.test(e)});var s=a[i]||{};var n=s.prevVal||null;var r=s.newVal||null;var o={lastChangedAnimationName:i,lastChangedAnimationPrevVal:n,lastChangedAnimationNewVal:r};return l.merge({},e,o)},trackAnimationFieldsChange:function(a){var e=a.fields.filter(l.Lang.isValue);e.forEach(function e(t){t.after("dataChange",function e(){var t=this.addLastChangedAnimationData(l.Lang.isFunction(a.dataInitializer)?a.dataInitializer.call(this):{});l.Squarespace.Analytics.trackInternal(a.eventName,t)},this)}.bind(this))},trackAnimationFieldsSave:function(e){l.Lang.isFunction(e.dataInitializer)&&l.Squarespace.Analytics.trackInternal(e.eventName,e.dataInitializer.call(this))}},{})},"1.0",{requires:["base","squarespace-util"]})},"./src/main/webapp/universal/scripts-v6/block/button-editor.js":function(e,t,a){var s=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var n=a("./src/main/webapp/universal/src/shared/constants/HelpLinks.js");var r=a("./src/main/webapp/universal/src/apps/App/shared/components/YUICompatibleLinkEditor/index.js");var o=a("./src/main/webapp/universal/src/shared/utils/TemplateVersionUtils.js");YUI.add("squarespace-block-button-editor",function(i){i.namespace("Squarespace.Block.Editor").Button=i.Base.create("button-block-editor-dialog",i.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return i.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Button")}},{NS:"blockEditor",ATTRS:{blockName:{value:s("Button")}}});function e(e){var t=s("Create a button that links to any URL. To change the button's fonts and colors, navigate to <strong>Home &rsaquo; Design &rsaquo; Style Editor</strong> in the left-hand panel.")+' <a href="'+n.BUTTON_EDITOR+'" target="_blank">'+s("Learn more")+"</a>";var a=s("Create a button that links to any URL.");return{width:335,height:400,discardChangesConfirmation:false,initialDataByReference:true,tabs:[{title:s("Button"),icon:"/universal/images-v6/icons/icon-button-16-light.png",scroll:true,fields:[{ctor:i.Squarespace.DialogFields.HTML,config:{className:"description",content:o.isSevenOne()?a:t}},{ctor:i.Squarespace.DialogFields.Text,config:{name:"buttonText","strings.title":s("Text"),className:"thin dark"}},{ctor:i.Squarespace.DialogFields.HTML,config:{name:"clickThroughLabel",content:"<strong>"+s("Clickthrough URL")+"</strong>"}},{ctor:i.Squarespace.DialogFields.ReactDialogField,config:{name:"clickThrough",component:r,props:e.getLinkEditorProps(),className:"core-components-link-editor"}},{ctor:i.Squarespace.DialogFields.Select,config:{name:"buttonSize","strings.title":s("Size"),className:"thin dark",defaultValue:"medium",options:[{value:"small",label:s("Small")},{value:"medium",label:s("Medium")},{value:"large",label:s("Large")}]}},{ctor:i.Squarespace.DialogFields.Select,config:{name:"buttonAlignment","strings.title":s("Alignment"),className:"thin dark",defaultValue:"center",options:[{value:"left",label:s("Left")},{value:"center",label:s("Center")},{value:"right",label:s("Right")}]}}]}]}}i.namespace("Squarespace.Block.ModelEditorDialog").Button=i.Base.create("block-button-editor",i.Squarespace.ModelEditorDialog,[],{getDialogData:function(){var e=this.get("model").toJSON();var t=e.buttonLink;i.Lang.isString(t)&&(e.clickThrough={url:t,newWindow:e.newWindow});return e},getLinkEditorProps:function(){return{zIndex:3e5,isDark:true,flush:true,showVisitLink:false,value:function(){var e=this.getDialogData();return{url:e.buttonLink,newWindow:e.newWindow}}.bind(this),onChange:function(e){var t=this.get("model");t.setAttrs({buttonLink:e.url,newWindow:e.newWindow})}.bind(this)}},sanitizeDialogData:function(e){var t=this.getDialogData();return{buttonText:e.buttonText,buttonLink:t.buttonLink,newWindow:t.newWindow,buttonAlignment:e.buttonAlignment,buttonSize:e.buttonSize}}},{ATTRS:{dialogConfig:{valueFn:function(){return e(this)}}}})},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-damask-context-globals","squarespace-dialog-html","squarespace-dialog-select","squarespace-dialog-text","squarespace-react-dialog-field","squarespace-model-editor"]})},"./src/main/webapp/universal/scripts-v6/block/button.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/frontend/packages/enums/BlockType.js");var n=a("./src/main/webapp/universal/src/apps/App/shared/utils/BlockEditorUtils.js");YUI.add("squarespace-block-button",function(e){var t={buttonText:i("Learn more"),buttonLink:"",newWindow:false,buttonAlignment:"center",buttonSize:"medium"};e.namespace("Squarespace.Block").Button=e.Base.create("block-button",e.SQS.LayoutEngine.Block.ModelSyncBase,[e.Squarespace.Block.PremiumBlockMixin],{},{CSS_PREFIX:"sqs-block-button",ATTRS:{editor:{valueFn:function(){return n.isBlockEditorEnabled(this.get("blockTypeName"))?e.Squarespace.Block.Editor.Schema:e.Squarespace.Block.Editor.Button}},type:{value:s.BUTTON},defaultContentModel:{value:t}}})},"1.0",{requires:["base","@sqs/layout-engine/block-model-sync-base","squarespace-block-button-editor","squarespace-block-schema-editor","squarespace-premium-block-mixin"]})},"./src/main/webapp/universal/scripts-v6/block/calendar-editor.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/frontend/packages/enums/CollectionTypes.js");var n=a("./src/main/webapp/universal/src/shared/constants/HelpLinks.js");YUI.add("squarespace-block-calendar-editor",function(e){var t={width:335,height:420,tabs:[{title:i("Calendar"),icon:"/universal/images-v6/icons/icon-event-16-light.png",scroll:true,fields:[{ctor:e.Squarespace.DialogFields.Description,config:{text:i('Display events, blog posts, products, or gallery images as a calendar. <a href="{helpLink}" target="_blank">Learn more</a><br><br>Start by selecting one of your pages below:',{helpLink:n.CALENDAR_EDITOR}),padding:[0,0]}},{ctor:e.Squarespace.DialogFields.ContentIdSelector,config:{name:"collectionId",showCollectionTagsAndCategories:false,showGroupTitles:true,collectionFilter:{collectionType:[s.PRODUCTS,s.COLLECTION_TYPE_GENERIC],folder:false},emptyMessage:i("No pages yet. Go to the pages panel and click a + to add new content.")}}]}]};e.namespace("Squarespace.Block.Editor").CalendarDialog=e.Base.create("calendar-block-editor-dialog",e.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return e.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Calendar")},afterLayoutDrag:function(){this.get("host").fire("resized")}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Calendar")},minHSize:{value:4}}});e.namespace("Squarespace.Block.ModelEditorDialog").Calendar=e.Base.create("blockCalendarEditor",e.Squarespace.ModelEditorDialog,[],{},{ATTRS:{dialogConfig:{valueFn:function(){return t}},strings:{value:{title:i("Index"),description:i("Select a collection below.")}}}})},"1.0",{requires:["base","model","squarespace-block-calendar-model","squarespace-calendar-block-renderer","squarespace-damask-context-globals","squarespace-dialog-description","squarespace-dialog-content-selector","squarespace-models-content-collection"]})},"./src/main/webapp/universal/scripts-v6/block/calendar-model.js":function(e,t){YUI.add("squarespace-block-calendar-model",function(e){e.namespace("Squarespace.ContentModel").CalendarBlock=e.Base.create("CalendarBlockModel",e.Model,[],{},{ATTRS:{collectionId:{value:null}}})},"1.0",{requires:["base","model"]})},"./src/main/webapp/universal/scripts-v6/block/calendar.js":function(e,t,a){var i=a("./src/main/webapp/frontend/packages/enums/BlockType.js");var r=a("./src/main/webapp/universal/src/apps/App/shared/utils/BlockEditorUtils.js");YUI.add("squarespace-block-calendar",function(s){var n=s.namespace("Squarespace.Block").Calendar=s.Base.create("block-calendar",s.SQS.LayoutEngine.Block.ModelSyncBase,[s.Squarespace.Block.PremiumBlockMixin],{initializer:function(e){this._calendarInstance=false},bindUI:function(){n.superclass.bindUI.call(this);this.after("resized",function(){this._calendarInstance.calendarPlugin&&this._calendarInstance.calendarPlugin._syncUI()})},destructor:function(){this._calendarInstance&&this._calendarInstance.destroy()},_renderSuccess:function(e){n.superclass._renderSuccess.call(this,e);var t=this.get("model").get("collectionId");var a=this.get("contentBox");var i=this.get("collectionId");this._calendarInstance=s.Squarespace.CalendarBlockRenderer.renderCalendar(a,t,i)}},{MODEL:s.Squarespace.ContentModel.CalendarBlock,ATTRS:{editor:{valueFn:function(){return r.isBlockEditorEnabled(this.get("blockTypeName"))?s.Squarespace.Block.Editor.Schema:s.Squarespace.Block.Editor.CalendarDialog}},type:{value:i.CALENDAR}},CSS_PREFIX:"sqs-block-calendar"})},"1.0",{requires:["base","model","squarespace-calendar-block-renderer","squarespace-block-calendar-editor","squarespace-block-calendar-model","squarespace-block-schema-editor","squarespace-premium-block-mixin"]})},"./src/main/webapp/universal/scripts-v6/block/chart-editor.js":function(e,t,a){var o=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var l=a("./src/main/webapp/universal/src/shared/constants/BlockVariantTypes.js");var c=a("./src/main/webapp/universal/src/shared/constants/HelpLinks.js");YUI.add("squarespace-block-chart-editor",function(a){var e=25;var t=25;var i=22;var s=5*i;var n=3*i;var r={width:4*s+3*i+n,height:579,title:o("Chart"),tabs:[{tabTitle:o("Data"),scroll:false,fields:[{ctor:a.Squarespace.DialogFields.Description,text:o('Add compelling data visualizations to your site by entering the data below or pasting it from a .csv file in the <strong>Import/Export</strong> tab. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:c.CHART_EDITOR})},{ctor:a.Squarespace.DialogFields.Select,config:{name:"chartType","strings.placeholder":o("Select a Chart Type"),"strings.title":o("Chart Type"),options:[{value:l.CHART_BAR,label:o("Bar Chart")},{value:l.CHART_LINE,label:o("Line Chart")},{value:l.CHART_PIE,label:o("Pie Chart")}]}},{ctor:a.Squarespace.DialogFields.Check,config:{name:"flip","strings.title":o("Flip X And Y Axes")}},{ctor:a.Squarespace.DialogFields.DataTable,config:{name:"dataTable","strings.title":o("Chart Data"),maxSeries:e,maxSamples:t}}]},{tabTitle:o("Design"),scroll:true,fields:[{ctor:a.Squarespace.DialogFields.Text,"strings.title":o("Chart Title"),config:{name:"title"}},{ctor:a.Squarespace.DialogFields.Text,"strings.title":o("Caption"),config:{name:"caption"}},{ctor:a.Squarespace.DialogFields.Check,config:{name:"showLegend","strings.title":o("Show Legend")}},{ctor:a.Squarespace.DialogFields.Select,config:{name:"palette","strings.title":o("Color Palette"),options:[{value:"default",label:o("Grayscale")},{value:"Primary",label:o("Primary")},{value:"Warm",label:o("Warm")},{value:"Cool",label:o("Cool")},{value:"Muted",label:o("Muted")},{value:"Cobblestone",label:o("Cobblestone")},{value:"Shops",label:o("Shops")},{value:"Suburbs",label:o("Suburbs")},{value:"Tea Party",label:o("Tea Party")},{value:"Highway",label:o("Highway")},{value:"DB-Nine",label:o("DB-Nine")},{value:"Italia",label:o("Italia")},{value:"M-Three",label:o("M-Three")},{value:"Thunderbird",label:o("Thunderbird")}]}}]},{tabTitle:o("Import / Export"),scroll:false,fields:[{ctor:a.Squarespace.DialogFields.TableImport,"strings.title":o("Import / Export"),config:{name:"_iodata",maxSeries:e,maxSamples:t}}]}]};a.namespace("Squarespace.Block.Editor").Chart=a.Base.create("chart-block-editor-dialog",a.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Chart")},afterLayoutDrag:function(){this.get("host").fire("resized")}},{NS:"blockEditor",ATTRS:{blockName:{value:o("Chart")},disableRenderAnchorEvent:{value:false}}});a.namespace("Squarespace.Block.ModelEditorDialog").Chart=a.Base.create("block-chart-editor",a.Squarespace.ModelEditorDialog,[],{initializer:function(){this.get("dialog").after("ready",function(){this._dialogReady()},this);this.plug(a.Squarespace.ModelEditorPlugins.LoadBeforeShowing)},getDialogData:function(){var e=this.get("model");var t=a.clone(e.toJSON(),true);t._iodata=a.clone(t.dataTable);return t},_dialogReady:function(){var e=this.get("dialog");var t=e.getField("dataTable");t.set("oneDimension",this.get("oneDimension"));t.populateTable(this.get("model").get("dataTable"));this._bindDialogFields()},_bindDialogFields:function(){var e=this.get("dialog");var t=e.getField("_iodata");var a=e.getField("dataTable");var i=e.getField("chartType");i._registerEvent(i.after("dataChange",this._resetDataTableDialog,this));a._registerEvent(a.after("dataChange",function(e){t.set("data",e.newVal,{silent:true})},this));t._registerEvent(t.after("importTable",function(e){var t=e.data;a.set("data",t);a.set("oneDimension",this.get("oneDimension"));a.populateTable(t)},this))},_resetDataTableDialog:function(){var e=this.getDialogData().dataTable;var t=this.get("dialog").getField("dataTable");t.set("oneDimension",this.get("oneDimension"));t.populateTable(e)}},{ATTRS:{dialogConfig:{valueFn:function(){return r}},oneDimension:{getter:function(){var e=parseInt(this.get("model").get("chartType"));return e===l.CHART_PIE},readOnly:true}}})},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-dialog-data-table","squarespace-dialog-table-import","squarespace-dialog-radio"]})},"./src/main/webapp/universal/scripts-v6/block/chart.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/apps/App/shared/utils/BlockEditorUtils.js");YUI.add("squarespace-block-chart",function(o){o.namespace("Squarespace.ContentModel");o.Squarespace.ContentModel.Chart=o.Base.create("block-chart-model",o.Model,[],{initializer:function(){this._dataTable=new o.Squarespace.Models.DataTable},destructor:function(){false;this._dataTable&&this._dataTable.destroy({remove:true})},sync:function(e,t,i){if("update"===e||"create"===e){var a=this.getAttrs();this._dataTable.setAttrs(a.dataTable);this._dataTable.save(t,o.bind(function(e,t){var a=o.JSON.parse(t.response);this.set("dataTableId",a.id);i(e)},this))}else if("read"===e){var s=this.get("dataTableId");if(s){this._dataTable.set("id",s);this._dataTable.load(t,o.bind(function(e,t){this.set("dataTable",this._dataTable.getAttrs());i(e)},this))}else i()}else"delete"===e&&this._dataTable.destroy({remove:true},o.bind(function(e){i(e)},this))},toJSON:function(){var e=o.Squarespace.ContentModel.Chart.superclass.toJSON.call(this);delete e._iodata;return e}},{ATTRS:{dataTableId:{value:null,validator:o.Squarespace.AttrValidators.isNullOrString},title:{value:"",validator:o.Squarespace.AttrValidators.isString},legend:{value:"none",validator:o.Squarespace.AttrValidators.isValue},caption:{value:"",validator:o.Squarespace.AttrValidators.isString},palette:{value:"default",validator:o.Squarespace.AttrValidators.isString},flip:{value:false,validator:o.Squarespace.AttrValidators.isBoolean},dataTable:{value:{},validator:o.Squarespace.AttrValidators.isObject},chartType:{value:"",validator:o.Squarespace.AttrValidators.isValue},showLegend:{getter:function(){return this.get("legend")&&"none"!==this.get("legend")},setter:function(e){this.set("legend",e?"visible":"none",{silent:true});return e}}}});o.namespace("Squarespace.Block");o.Squarespace.Block.Chart=o.Base.create("block-chart",o.SQS.LayoutEngine.Block.Base,[o.Squarespace.Block.PremiumBlockMixin],{initializer:function(){this._chart=null},destructor:function(){this._chart&&this._chart.destroy()},renderUI:function(){o.Squarespace.Block.Chart.superclass.renderUI.call(this);var e=this.get("model");var t="";e.get("caption")&&(t="<figcaption>"+e.get("caption")+"</figcaption>");var a=o.Node.create('<div class="chart-block-container chart-type-'+e.get("chartType")+'"><h2>'+e.get("title")+'</h2><div class="chart-block-body legend-'+e.get("legend")+'"><div class="chart-block-legend attach1"><figcaption class="legend-content"></figcaption></div><div class="chart-block-content"><div><canvas></canvas></div></div><div class="chart-block-legend attach2"><figcaption class="legend-content"></figcaption></div></div><div class="chart-block-caption">'+t+"</div></div>");this.get("contentBox").append(a);this.get("model").load(o.bind(this._createChart,this))},bindUI:function(){var e=this.get("model");e.after("titleChange",this._renderTitle,this);e.after("legendChange",this._renderLegend,this);e.after("captionChange",this._renderCaption,this);e.after("dataTableChange",this._renderChartContent,this);e.after("chartTypeChange",function(){this._renderChartType();this._createChart(true)},this);e.after("paletteChange",function(e){this._createChart(true)},this);e.after("flipChange",function(e){this._createChart(true)},this);this.after("resized",function(){this._chart&&this._chart.resize()},this)},syncUI:function(){this._renderTitle();this._renderLegend();this._renderChartType();this._renderCaption();this._renderChartContent()},_renderTitle:function(){var e=this.get("model").get("title");this.get("contentBox").one("h2").setHTML(o.Escape.html(e))},_renderLegend:function(){var e=this.get("model").get("legend");this.get("contentBox").one(".chart-block-body").set("className","chart-block-body legend-"+e)},_renderChartType:function(){var e=this.get("model").get("chartType");this.get("contentBox").one(".chart-block-container").set("className","chart-block-container chart-type-"+e)},_renderCaption:function(){var e=this.get("model").get("caption");e?this.get("contentBox").one(".chart-block-caption").setHTML("<figcaption>"+o.Escape.html(e)+"</figcaption>"):this.get("contentBox").one(".chart-block-caption").empty()},_renderChartContent:function(){if(this._chart){var e=this.get("model").get("dataTable");this._chart.sync(e);this._chart.resize()}},_createChart:function(e){if(this._chart){if(!e)return;this._chart.destroy()}var t=this.get("model");var a=t.get("chartType");var i=t.get("dataTable");var s=t.get("palette");var n=t.get("flip");var r=this.get("contentBox").one(".chart-block-container");this._chart=o.ChartJS.createChart(a,r,i,s,n)}},{MODEL:o.Squarespace.ContentModel.Chart,ATTRS:{editor:{valueFn:function(){return i.isBlockEditorEnabled(this.get("blockTypeName"))?o.Squarespace.Block.Editor.Schema:o.Squarespace.Block.Editor.Chart}}}})},"1.0",{requires:["base","escape","node","squarespace-models-data-table","@sqs/layout-engine/block-base","squarespace-block-chart-editor","squarespace-block-schema-editor","squarespace-chartjs-helpers","squarespace-premium-block-mixin"]})},"./src/main/webapp/universal/scripts-v6/block/code-editor.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/universal/src/shared/constants/HelpLinks.js");var r=a("./src/main/webapp/universal/src/apps/App/shared/stores/BillingStatusStore.js");var o=a("./src/main/webapp/universal/src/apps/App/shared/stores/FeaturesStore.js");var l=a("./src/main/webapp/frontend/packages/enums/Features.js");var c=a("./src/main/webapp/universal/src/shared/utils/network.js");var u=a("./common/temp/node_modules/lodash/debounce.js");YUI.add("squarespace-block-code-editor",function(n){var e=["img","frame","iframe","object","video","audio","embed","svg",'input[type="image"]',"map"].join(",");n.namespace("Squarespace.Block.Editor");n.Squarespace.Block.Editor.Code=n.Base.create("code-block-editor-dialog",n.Squarespace.Block.Editor.Dialog,[],{initializer:function(){this.afterHostMethod("_setWidgetContent",this._afterSetContent,this);if("block-code"===this.get("host").name){this._bindSaveListener();o.isFeatureGated(l.BLOCK_CODE_WITH_MEDIA)&&this._bindCheckCodeValidListener()}this.refreshPremiumMessage=u(this.rawRefreshPremiumMessage.bind(this),1e3,{leading:false,trailing:true})},_getModelEditor:function(){return n.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Code")},_afterSetContent:function(){this._cb.all(e).each(function(e){this._handles.push(e.on("load",this._fireContentUpdate,this))},this)},_fireContentUpdate:function(){this.get("host").fire("widget:contentUpdate")},_bindSaveListener:function(){var s=this.get("host").get("model");s.on("save",function(){var e=s.toJSON();if(e.wysiwyg){var t=5e3;var a=e.wysiwyg.mode;var i=e.wysiwyg.isSource?e.wysiwyg.source:e.html;n.Squarespace.Analytics.trackInternal("code_block_editor_save",{source:i.substr(0,t),mode:a})}})},_bindCheckCodeValidListener:function(){var e=this.configDialog.get("dialog");var a=this.get("host").get("model");e.on("ready",function(){var t=e.getField("error");t.set("visible",a.get("hasRenderError"));a.after("hasRenderErrorChange",function(e){e.newVal!==e.prevVal&&t.set("visible",e.newVal)});this.codeMirrorInstance=e.getField("wysiwyg").editor.editor;this.codeMirrorInstance.on("change",function(){this.refreshPremiumMessage()}.bind(this));this.refreshPremiumMessage()},this)},rawRefreshPremiumMessage:function(){if(!this.codeMirrorInstance)return;var e=this.configDialog.get("dialog");if(!e.isOpen())return;var t=e.getField("premiumPlanError");if(this.get("host").get("model").get("wysiwyg.isSource")){e.getField("premiumPlanError").set("visible",false);return}if(!o.isFeatureGated(l.BLOCK_CODE_WITH_MEDIA))return;var a=this.codeMirrorInstance.getValue();if(this.pending){this.invalidateNextAndRetry=true;return}this.pending=true;c.post("/api/code-block-input-validation",{code:a}).then(function(e){this.pending=false;if(this.invalidateNextAndRetry){this.invalidateNextAndRetry=false;this.refreshPremiumMessage();return}t.set("visible",e.data.hasPremiumTags)}.bind(this)).catch(function(){this.pending=false;if(this.invalidateNextAndRetry){this.invalidateNextAndRetry=false;this.refreshPremiumMessage()}t.set("visible",false)}.bind(this))}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Code")}}});n.namespace("Squarespace.Block.ModelEditorDialog");n.Squarespace.Block.ModelEditorDialog.Code=n.Base.create("block-code-editor",n.Squarespace.ModelEditorDialog,[],{sanitizeDialogData:function(e){if(e.wysiwyg&&e.wysiwyg.wysiwyg){var t=e.text||"";e=e.wysiwyg;e.text=t;delete e.id;return e}e.wysiwyg.isSource||"htmlmixed"!==e.wysiwyg.mode&&"html"!==e.wysiwyg.mode?n.Lang.isUndefined(e.wysiwyg.rendered)||(e.html=e.wysiwyg.rendered):e.html=e.wysiwyg.source;delete e.wysiwyg.rendered;return e},getDialogData:function(){var e=this.get("model").toJSON();return{text:e.source,wysiwyg:e}},_isCodeValid:function(){return!this.get("model").get("hasRenderError")},_getDialogConfig:function(){var e=i('Add custom CSS, HTML, JavaScript, Markdown, or Plain Text to this page.<br /><a href="{link}" target="_blank">Learn more</a>',{link:s.CODE_BLOCK});o.isFeatureEnabled(l.BLOCK_CODE_WITH_MEDIA)||(e=i('Add CSS, HTML, or plain text to this page. To embed JavaScript or iframes, upgrade to the Business plan. <a href="{link}" target="_blank">Learn more</a>',{link:s.CODE_BLOCK}));var t=i("JavaScript and iframe embeds aren’t supported in your plan. This code was removed from the block.");r.isTrial()&&(t=i('JavaScript and iframe embeds are only supported in the Business plan. <a href="{link}" target="_blank">Learn more</a>',{link:s.CODE_BLOCK}));return{width:575,height:this.get("height"),tabs:[{title:i("Code"),icon:"/universal/images-v6/icons/icon-code-16-light.png",fields:[{type:"description",text:e},{type:"error",name:"error",visible:false,text:i('You’ve reached the character limit for Code Blocks. If you need more advanced customization, learn if the <a href="{link}" target="_blank">Developer Platform</a> is right for you.',{link:s.DEVELOPER_SDK})},{type:"error",name:"premiumPlanError",visible:false,text:t},{type:"wysiwyg",height:this.get("wysiwygHeight"),width:525,countHeight:true,name:"wysiwyg",title:i("HACK THE PLANET"),titleStyle:"inline",engine:"code",menuConfig:"code",validationErrorMsg:i("You’ve reached the character limit for Code Blocks."),validator:this._isCodeValid.bind(this)}]}]}}},{ATTRS:{dialogConfig:{valueFn:"_getDialogConfig"},height:{value:380},wysiwygHeight:{valueFn:function(){return this.get("height")-130}}}})},"1.0",{requires:["squarespace-block-editor-dialog","squarespace-damask-context-globals","squarespace-dialog-legacy-wysiwyg"]})},"./src/main/webapp/universal/scripts-v6/block/code.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/universal/src/apps/App/shared/utils/BlockEditorUtils.js");YUI.add("squarespace-block-code",function(e){var t={wysiwyg:{engine:"code",mode:"htmlmixed",isSource:false,source:""},html:i("<p>Hello, World!</p>")};var a=e.namespace("Squarespace.Block").Code=e.Base.create("block-code",e.Squarespace.Block.CustomEmbedBase,[e.Squarespace.Block.PremiumBlockMixin],{_renderSuccess:function(){this._toggleErrorState(false);a.superclass._renderSuccess.apply(this,arguments)},_renderError:function(){this._toggleErrorState(true);a.superclass._renderError.apply(this,arguments)},_toggleErrorState:function(e){this.get("model").set("hasRenderError",e)}},{CSS_PREFIX:"sqs-block-code",ATTRS:{defaultContentModel:{value:t},editor:{valueFn:function(){return s.isBlockEditorEnabled(this.get("blockTypeName"))?e.Squarespace.Block.Editor.Schema:e.Squarespace.Block.Editor.Code}},contentRefreshRate:{value:600},safeguardEmbeddedScripts:{value:true}}})},"1.0",{requires:["@sqs/layout-engine/block-mixin-aspect-ratio","squarespace-block-base-custom-embed","squarespace-block-code-editor","squarespace-block-schema-editor","squarespace-premium-block-mixin"]})},"./src/main/webapp/universal/scripts-v6/block/collection-link-editor.js":function(e,t,a){var o=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var i=a("./src/main/webapp/universal/src/shared/constants/HelpLinks.js");YUI.add("squarespace-block-collection-link-editor",function(r){r.namespace("Squarespace.Block.Editor").CollectionLink=r.Base.create("collection-link-block-editor-dialog",r.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return r.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.CollectionLink")}},{NS:"blockEditor",ATTRS:{blockName:{value:o("Content Link")}}});var t=r.namespace("Squarespace.Block.ModelEditorDialog").CollectionLink=r.Base.create("blockCollectionLinkEditor",r.Squarespace.ModelEditorDialog,[],{_showDialog:function(){t.superclass._showDialog.call(this);var e=this.get("dialog").getField("collectionId");e.set("collectionGroups",this._getCollectionGroups());e.syncUI()},_getCollectionGroups:function(){var e=r.Squarespace.ContentCollectionUtils;var t=r.Squarespace.ContentCollectionCache;var a=t.filter(e.isGenericOrProduct);var i=t.filter(e.isPage);var s=t.filter(e.isIndex);var n=e.groupCollectionsByTypeName(a);n.push({title:o("Pages"),collections:i});n.push({title:o("Index"),collections:s});return n},_getDialogConfig:function(){return{width:335,height:400,discardChangesConfirmation:false,initialDataByReference:true,tabs:[{title:o("Content Link"),icon:"/universal/images-v6/icons/icon-link-16-light-solid.png",scroll:true,fields:[{type:"description",text:o('Create a visual link to a page within your site that includes its associated title, thumbnail, and description. <a href="{helpLink}" target="_blank">Learn more</a><br><br>Start by selecting one of your pages below:',{helpLink:i.CONTENT_LINK_BLOCK})},{ctor:r.Squarespace.DialogFields.ContentIdSelector,config:{mode:"page",showCollectionTagsAndCategories:false,showGroupTitles:true,name:"collectionId",collectionGroups:[]}}]}]}}},{ATTRS:{dialogConfig:{valueFn:"_getDialogConfig"}}})},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-content-collection-utils","squarespace-damask-context-globals","squarespace-dialog-content-item-grid","squarespace-dialog-gallery-options","squarespace-dialog-multi-option","squarespace-dialog-multi-frame","squarespace-models-content-collection","squarespace-plugin-actionoverlay"]})},"./src/main/webapp/universal/scripts-v6/block/collection-link.js":function(e,t,a){var i=a("./src/main/webapp/frontend/packages/enums/BlockType.js");var s=a("./src/main/webapp/universal/src/apps/App/shared/utils/BlockEditorUtils.js");YUI.add("squarespace-block-collection-link",function(t){var e={linkTitle:"",linkTarget:"",newWindow:false};var a=t.namespace("Squarespace.Block").CollectionLink=t.Base.create("block-collection-link",t.SQS.LayoutEngine.Block.ModelSyncBase,[],{_renderSuccess:function(e){a.superclass._renderSuccess.call(this,e);this._plugImageLoader()},_plugImageLoader:function(){this.get("contentBox").all("img").each(function(e){e.hasPlugin(t.Squarespace.Loader2.NS)||e.plug(t.Squarespace.Loader2)})}},{CSS_PREFIX:"sqs-block-collectionlink",ATTRS:{editor:{valueFn:function(){return s.isBlockEditorEnabled(this.get("blockTypeName"))?t.Squarespace.Block.Editor.Schema:t.Squarespace.Block.Editor.CollectionLink}},type:{value:i.COLLECTION_LINK},defaultContentModel:{value:e}}})},"1.0",{requires:["base","squarespace-image-loader","@sqs/layout-engine/block-model-sync-base","squarespace-block-collection-link-editor","squarespace-block-schema-editor"]})},"./src/main/webapp/universal/scripts-v6/block/donation-editor.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/universal/src/shared/constants/FormBuilderFields.js");var n=a("./src/main/webapp/universal/src/shared/constants/HelpLinks.js");YUI.add("squarespace-block-donation-editor",function(e){e.namespace("Squarespace.Block.Editor").Donation=e.Base.create("donation-block-editor-dialog",e.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return e.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Donation")}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Donation")}}});var t={width:520,height:440,primaryTabs:[{title:i("Donation"),tabTitle:i("Description"),icon:"/universal/images-v6/icons/icon-donation-18-light-solid.png",scroll:true,fields:[{ctor:e.Squarespace.DialogFields.Description,text:i('Add a button that will take visitors to a page where they can make a contribution to your cause or organization.<br><br>You can view and manage donations by navigating to <strong>Home &rsaquo; Donations</strong> in the left-hand panel. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:n.DONATION_EDITOR})},{ctor:e.Squarespace.DialogFields.Text,name:"title",config:{className:"thin","strings.title":i("Title"),"strings.placeholder":i('e.g. "The Squarespace Education Fund"'),"strings.description":i("The name of your cause or organization to display on the Donate page and Donation Thank You email")}},{ctor:e.Squarespace.DialogFields.TextArea,name:"description",config:{"strings.title":i("Short Description"),"strings.placeholder":i("e.g. 100% of every donation goes directly to programming. We deeply appreciate your support!"),"strings.description":i("Information about your cause to display on the Donation page")}},{ctor:e.Squarespace.DialogFields.Text,name:"buttonLabel",config:{className:"thin",defaultValue:i("Donate"),"strings.title":i("Custom Button Label"),"strings.placeholder":i('The label on the button, e.g. "Donate"'),"strings.description":i("Edit the text on the button")}},{ctor:e.Squarespace.DialogFields.Select,config:{"strings.title":i("Button Alignment"),name:"buttonAlignment",defaultValue:"left",className:"thin dark",options:[{value:"left",label:i("Left")},{value:"center",label:i("Center")},{value:"right",label:i("Right")}]}}]},{tabTitle:i("Amounts"),scroll:true,fields:[{ctor:e.Squarespace.DialogFields.LabelledValueTable,name:"suggestedContributions",config:{"strings.title":i("Suggested Contribution Amounts"),"strings.description":i("Squarespace recommends the below suggested amounts. You have the option to label these amounts: e.g. “Gold Sponsor” or “Feeds 10 cats”. Donors will also be able to enter their own amount."),"strings.valueLabel":i("Amount"),"strings.labelLabel":i("Label (optional)"),"strings.emptyMessage":i("No suggested contributions. Visitors can enter any amount."),valueKey:"amountCents",labelKey:"label",valueInputPlugin:e.Squarespace.Plugin.MoneyFormatter}}]},{tabTitle:i("Additional"),scroll:true,fields:[{ctor:e.Squarespace.DialogFields.HTML,config:{name:"formBuilderTitle",className:"description",content:'<div class="description-label">'+i("Additional Information")+"</div> "+i("Prompt your donors to submit additional information as they make a contribution. (e.g. you can provide the option to make a donation in honor of someone or choose a gift as a thank you for their donation)")}},{ctor:e.Squarespace.DialogFields.FormBuilder,config:{name:"customForm",minimumLength:0,excludedFieldTypes:[s.HIDDEN]}}]}]};e.namespace("Squarespace.Block.ModelEditorDialog").Donation=e.Base.create("blockDonationEditor",e.Squarespace.ModelEditorDialog,[],{initializer:function(){this.plug(e.Squarespace.ModelEditorPlugins.LoadBeforeShowing)}},{ATTRS:{dialogConfig:{valueFn:function(){return t}}}})},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-damask-context-globals","squarespace-dialog-html","squarespace-dialog-text","squarespace-dialog-text-area","squarespace-dialog-labelled-value-table","squarespace-dialog-form-builder","squarespace-plugin-money-formatter","squarespace-util-authenticated"]})},"./src/main/webapp/universal/scripts-v6/block/donation.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var d=a("./src/main/webapp/universal/src/shared/actions/WebsiteAchievementActions.js");var p=a("./src/main/webapp/frontend/packages/enums/AchievementType.js");var s=a("./src/main/webapp/frontend/packages/enums/BlockType.js");var n=a("./src/main/webapp/universal/src/apps/App/shared/utils/BlockEditorUtils.js");YUI.add("squarespace-block-donation",function(u){var e=u.Base.create("DonationModel",u.Model,[],{sync:function(e,t,i){var s=this.get("donatePageId");var a="create"===e;var n="update"===e;if(a||n){var r=this.toJSON();n&&(r=u.merge(r,{id:s}));var o=new u.Squarespace.Models.DonatePage(r);o.save(t,u.bind(function(e,t){var a=u.JSON.parse(t.response);s=a.id;this.set("donatePageId",a.id);d.grantAchievement(p.ADDED_DONATION_BLOCK);i(e)},this))}else if("delete"===e){var l=new u.Squarespace.Models.DonatePage({id:s});l.destroy({remove:true},i)}else if("read"===e&&u.Lang.isValue(s)){var c=new u.Squarespace.Models.DonatePage({id:s});c.load(i)}else i()},isNew:function(){return!u.Lang.isValue(this.get("donatePageId"))}},{ATTRS:{suggestedContributions:{valueFn:function(){if(!this.get("donatePageId"))return[{amountCents:1e3,label:""},{amountCents:2500,label:""},{amountCents:5e3,label:""},{amountCents:1e4,label:""}]}},buttonLabel:{value:i("Donate")},queuedSubmitEnabled:{value:false}}});u.namespace("Squarespace.Block").Donation=u.Base.create("block-donation",u.SQS.LayoutEngine.Block.ModelSyncBase,[u.Squarespace.Block.PremiumBlockMixin],{bindUI:function(){this.get("model").after("change",function(e){var t=this.get("contentBox");var a=t.one(".sqs-donate-button");e.changed.donatePageId&&a.setAttribute("data-donate-page-id",e.changed.donatePageId.newVal);if(e.changed.buttonAlignment){var i=e.changed.buttonAlignment;var s="sqs-donate-button-wrapper--align-";t.get("children").replaceClass(s+i.prevVal,s+i.newVal)}e.changed.buttonLabel&&a.setHTML(e.changed.buttonLabel.newVal)},this);this.get("boundingBox").delegate("click",function(e){this.get("editable")||u.Squarespace.Commerce.goToDonatePage(e.target.getAttribute("data-donate-page-id"))},".sqs-donate-button",this)}},{CSS_PREFIX:"sqs-block-donation",MODEL:e,ATTRS:{editor:{valueFn:function(){return n.isBlockEditorEnabled(this.get("blockTypeName"))?u.Squarespace.Block.Editor.Schema:u.Squarespace.Block.Editor.Donation}},type:{value:s.DONATION}}})},"1.0",{requires:["base","@sqs/layout-engine/block-model-sync-base","squarespace-block-donation-editor","squarespace-block-schema-editor","squarespace-models-donate-page","squarespace-premium-block-mixin"]})},"./src/main/webapp/universal/scripts-v6/block/editor-button-container.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/universal/src/shared/utils/BlockFeatureGatingUtils.js");YUI.add("squarespace-block-editor-button-container",function(t){t.namespace("Squarespace.Block.Editor");var a=t.Base.create("label",t.Squarespace.Widgets.SSWidget,[t.WidgetChild],{renderUI:function(){a.superclass.renderUI.apply(this,arguments);var e=t.Lang.sub(this.get("strings.labelTemplate"),this.toJSON());this.get("contentBox").append(e)},toJSON:function(){return{blockName:this.get("blockName")}}},{CSS_PREFIX:"sqs-label",ATTRS:{blockName:{validator:t.Squarespace.AttrValidators.isString},"strings.labelTemplate":{value:"{blockName}",readOnly:true}}});t.Squarespace.Block.Editor.ButtonContainer=t.Base.create("button",t.Squarespace.Widgets.SSWidget,[t.WidgetParent],{initializer:function(){this.publish("edit");this.publish("remove")},renderUI:function(){this.add(this.get("buttonConfigLabel"));var e=this.get("blockType");e&&s.isBlockTypeFeatureGated(e)&&s.renderLogo({node:this.get("contentBox").getDOMNode(),blockType:e});this.get("includeEdit")&&this.add(this.get("buttonConfigEdit"));this.get("includeRemove")&&this.add(this.get("buttonConfigRemove"))},_onEditClicked:function(){this.fire("edit")},_onRemoveClicked:function(){var e=new t.Squarespace.Widgets.Confirmation({"strings.title":i("Remove This Block?"),"strings.message":i("This will delete the block and its content. This cannot be undone."),"strings.confirm":i("Yes"),"strings.cancel":i("No")});e.on("confirm",function(){this.fire("remove")},this)}},{CSS_PREFIX:"sqs-block-editor-button-container",ATTRS:{zIndex:{value:1010},blockName:{validator:t.Squarespace.AttrValidators.isString,writeOnce:"initOnly"},blockType:{validator:t.Squarespace.AttrValidators.isNumber},includeRemove:{value:true,validator:t.Squarespace.AttrValidators.isBoolean},includeEdit:{value:true,validator:t.Squarespace.AttrValidators.isBoolean},buttonConfigLabel:{getter:function(){return{type:a,blockName:this.get("blockName")}},readOnly:true},buttonConfigEdit:{valueFn:function(){return{type:t.Squarespace.Widgets.VanillaButton,strings:{systemName:"edit",text:i("Edit")},onClick:t.bind(this._onEditClicked,this)}},readOnly:true},buttonConfigRemove:{valueFn:function(){return{type:t.Squarespace.Widgets.VanillaButton,strings:{systemName:"remove",text:i("Remove")},onClick:t.bind(this._onRemoveClicked,this)}},readOnly:true}}})},"1.0",{requires:["base","node","overlay","squarespace-attr-validators","squarespace-dialog-button","squarespace-ss-widget","widget-parent"]})},"./src/main/webapp/universal/scripts-v6/block/editor-dialog.js":function(e,t,a){var n=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var r=a("./common/temp/node_modules/lodash/camelCase.js");var o=a("./common/temp/node_modules/lodash/startCase.js");var l=a("./common/temp/node_modules/lodash/kebabCase.js");var c=a("./common/temp/node_modules/react/index.js");var u=a("./common/temp/node_modules/react-dom/index.js");var d=a("./src/main/webapp/universal/src/apps/App/shared/stores/AuthenticatedAccountStore.js");var p=a("./src/main/webapp/universal/src/shared/utils/BlockFeatureGatingUtils.js");var h=a("./src/main/webapp/universal/src/shared/components/FeatureGate/ConfirmationModal/index.jsx");var g=a("./src/main/webapp/universal/src/apps/App/shared/stores/BillingStatusStore.js");var m=a("./src/main/webapp/universal/src/apps/App/shared/stores/PageSectionsStore.js");var f=a("./src/main/webapp/universal/src/shared/stores/DeviceViewStore.js");var v=a("./src/main/webapp/universal/src/shared/constants/DeviceViewType.js");var b=a("./src/main/webapp/universal/src/shared/utils/CMSV7EventsCollectionHelpers.js");var S=a("./src/main/webapp/universal/src/shared/constants/BlockTypeStrings.js");var y="tutorial-add-premium-block";var _="CMSV7Events";YUI.add("squarespace-block-editor-dialog",function(i){i.namespace("Squarespace.Block.Editor");i.Squarespace.Block.Editor.OPEN_DIALOGS=[];var s=i.Squarespace.Block.Editor.Dialog=i.Base.create("block-editor-dialog",i.SQS.LayoutEngine.Block.Editor.Base,[],{initializer:function(){this.configDialog=this._initConfigDialog();this._bindDialogEvents()},destructor:function(){if(this.configDialog){this.configDialog.destroy();this.configDialog=null}this._model.detach(_+"|*:change")},_afterEditingChange:function(e){var t=this.get("host");if(e.newVal&&this.configDialog){var a=p.isBlockTypeFeatureGated(t.get("type"));var i=!d.isTutorialCompleted(y);a&&i?this._showPremiumConfirmationThenShowDialog():this._showDialog()}s.superclass._afterEditingChange.apply(this,arguments);t.hasPlugin("insertPoint")&&t.insertPoint.toggleInsertPointsDisabled(e.newVal)},_showDialog:function(){var e=this.get("host");this.configDialog.setAttrs({anchorNode:this.get("dialogEditorAnchorNode"),flyoutPointerDirection:this.get("dialogFlyoutPointerDirection")});this.configDialog.set("visible",true);var t=this.configDialog.get("dialog");if(p.renderMenu({node:t.bodyEl.getDOMNode(),blockType:e.get("type"),isEditing:true})){var a=t.bodyEl.getDOMNode();var i=a.querySelector(".sqs-featuregate-menu")||{};var s=i.clientHeight||0;t.bodyEl.setHeight(a.clientHeight+s)}},_showPremiumConfirmationThenShowDialog:function(){if(!this.confirmationModalContainer){this.confirmationModalContainer=document.createElement("div");document.body.appendChild(this.confirmationModalContainer)}var e=c.createElement(h,{isOpen:true,isTrial:g.isTrial(),onRequestClose:function(){d.markTutorialCompleted(y);u.unmountComponentAtNode(this.confirmationModalContainer);this.confirmationModalContainer.remove();this.confirmationModalContainer=null;this._showDialog()}.bind(this)});u.render(e,this.confirmationModalContainer)},_plugInsertPoint:function(){s.superclass._plugInsertPoint.call(this);this.get("host").insertPoint.toggleInsertPointsDisabled(this.get("editing"))},_getModelEditor:function(){console.error("No Model Editor configured for: "+this.get("blockName"))},_initConfigDialog:function(){var e=this._getModelEditor();if(!i.Lang.isValue(e))return null;var t=new e({id:"editorDialog",model:this._model,anchorNode:this.get("dialogEditorAnchorNode"),flyoutPointerDirection:this.get("dialogFlyoutPointerDirection"),zIndex:9e3});var a=i.merge(this.get("defaultEditorConfig"),t.get("dialogConfig"));t.set("dialogConfig",a);return t},_bindDialogEvents:function(){if(i.Lang.isNull(this.configDialog))return;var e=this.configDialog.get("dialog");e.on("shown",function(){this._bb.addClass("sqs-edit-dialog-open");while(i.Squarespace.Block.Editor.OPEN_DIALOGS.length)i.Squarespace.Block.Editor.OPEN_DIALOGS.shift().dialog.close();i.Squarespace.Block.Editor.OPEN_DIALOGS.push({dialog:e,layout:this.get("host").get("boundingBox").ancestor(".sqs-layout")});this.bindInstrumentation()},this);e.on("dismiss",this._onModelEditorDismiss,this);this.configDialog.on("nonSavingClose",function(){if(this.get("revertResizingOnCancel")){this._model.get("vSize")!==e.getData().vSize&&this._model.set("vSize",e.getData().vSize,{silent:true});this._model instanceof i.SQS.LayoutEngine.BlockModel.Image||this._model.get("aspectRatio")!==e.getData().aspectRatio&&this._model.set("aspectRatio",e.getData().aspectRatio)}},this);e.on("render-anchor",function e(t){this._updateModel(this.configDialog.sanitizeDialogData(t))},this);e.on("remove-requested",function(){new i.Squarespace.Widgets.Confirmation({"strings.title":n("Remove Block"),"strings.message":n("Are you sure you want to remove this block?"),className:"sqs-prevent-block-focus-change question",render:e.el&&e.el.ancestor("body")||true}).on("confirm",function(){e.close(e,true);this.fire("remove")},this)},this)},_onModelEditorDismiss:function(e){var a=this.configDialog.get("dialog");this._disableEditing();this._bb.removeClass("sqs-edit-dialog-open");i.Squarespace.Block.Editor.OPEN_DIALOGS=i.Array.filter(i.Squarespace.Block.Editor.OPEN_DIALOGS,function(e,t){return e.dialog!==a},this);this._model.detach(_+"|*:change")},bindInstrumentation:function(){this.keysQueued=[];this.keysSent=[];this.instrumentationBindingTimer=i.config.win.setTimeout(function(){this.instrumentationBindingTimer=null;this.instrumentModel()}.bind(this),1e3)},instrumentModel:function(){this._model.detach(_+"|*:change");this._model.after(_+"|*:change",function(e){if(this.get("host").get("isNewBlock"))return;this.queueFieldForInstrumentation(Object.keys(e.changed))},this)},queueFieldForInstrumentation:function(e){if(this.instrumentationTimer){i.config.win.clearTimeout(this.instrumentationTimer);this.instrumentationTimer=null}e.forEach(function(e){if(this.keysSent.includes(e))return;if(this.keysQueued.includes(e))return;this.keysQueued.push(e)}.bind(this));this.keysQueued.length>0&&(this.instrumentationTimer=i.config.win.setTimeout(function(){var t=this.get("host");var a=S.BlockTypeKeys[t.get("type")];var i=this._model.layout.get("collectionId");if(!i){var e=m.getState().collectionId;e&&(i=e)}this.keysQueued.forEach(function(e){b.editBlockField({blockId:t.get("id"),blockType:a,fieldName:e,collectionId:i});this.keysSent.push(e)}.bind(this));this.keysQueued=[]}.bind(this),100))}},{NS:"blockEditor",ATTRS:{blockName:{valueFn:function(){return o(r(this.get("host").get("blockTypeName")))}},editing:{value:false},editingEvent:{valueFn:function(){return["dblclick"]}},editingButtons:{value:true},editingOverlay:{valueFn:function(){return i.Node.create('<div class="sqs-editing-overlay"></div>')}},dialogEditorAnchorNode:{getter:function(){if(f.getState().view===v.PHONE)return i.one(i.config.win.top.document.body.querySelector("#sqs-site-frame"));return this.get("host").get("contentBox")}},dialogFlyoutPointerDirection:{getter:function(){if(f.getState().view===v.PHONE)return"left";return null}},revertResizingOnCancel:{value:true},defaultEditingMode:{value:true},defaultEditorConfig:{valueFn:function(){var e=l(this.get("host").get("blockTypeName"));var t=[{title:n("Cancel"),type:"cancel"},{title:n("Apply"),type:"saveAndClose"}];return{name:"editor-block-"+e.replace(/(^legacy\-|\-legacy$|\-v2$)/,""),buttons:t,closeOthers:false,style:"flyout",flyoutPointerDirection:"hidden",draggable:9!==i.UA.ie&&10!==i.UA.ie}}}}})},"1.0",{requires:["base","plugin","@sqs/layout-engine/block-image","@sqs/layout-engine/block-editor-base","@sqs/layout-engine/block-model-image","squarespace-dialog","squarespace-model-editor","squarespace-widgets-confirmation"]})},"./src/main/webapp/universal/scripts-v6/block/embed-editor.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/universal/src/shared/constants/HelpLinks.js");YUI.add("squarespace-block-embed-editor",function(e){e.namespace("Squarespace.Block.Editor").Embed=e.Base.create("embed-block-editor-dialog",e.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return e.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Embed")}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Embed")}}});var t={width:470,height:190,tabs:[{title:i("Embed"),icon:"/universal/images-v6/icons/icon-embed-16-light.png",scroll:false,fields:[{ctor:e.Squarespace.DialogFields.Oembed,name:"embed",config:{"strings.description":i('Paste the URL of the item you\'re embedding, and we\'ll attempt to locate the content and format it for your site. If the content doesn\'t appear, enter the embed code manually by clicking the <strong>&lt;/&gt;</strong> icon.<br /><a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:s.EMBED_EDITOR})}}]}]};e.namespace("Squarespace.Block.ModelEditorDialog").Embed=e.Base.create("blockEmbedEditor",e.Squarespace.ModelEditorDialog,[],{getDialogData:function(){return{embed:this.get("model").toJSON()}},sanitizeDialogData:function(e){return e.embed}},{ATTRS:{dialogConfig:{valueFn:function(){return t}}}})},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-damask-context-globals","squarespace-dialog-oembed","squarespace-model-editor"]})},"./src/main/webapp/universal/scripts-v6/block/embed.js":function(e,t,a){var i=a("./src/main/webapp/frontend/packages/enums/BlockType.js");var s=a("./src/main/webapp/universal/src/apps/App/shared/utils/BlockEditorUtils.js");YUI.add("squarespace-block-embed",function(e){e.namespace("Squarespace.Block").Embed=e.Base.create("block-embed",e.Squarespace.Block.CustomEmbedBase,[e.Squarespace.Block.PremiumBlockMixin],{},{CSS_PREFIX:"sqs-block-embed",ATTRS:{editor:{valueFn:function(){return s.isBlockEditorEnabled(this.get("blockTypeName"))?e.Squarespace.Block.Editor.Schema:e.Squarespace.Block.Editor.Embed}},type:{value:i.EMBED},safeguardEmbeddedScripts:{value:true}}})},"1.0",{requires:["squarespace-block-base-custom-embed","squarespace-block-embed-editor","squarespace-block-schema-editor","squarespace-premium-block-mixin"]})},"./src/main/webapp/universal/scripts-v6/block/fivehundredpix-editor.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/frontend/packages/enums/CollectionTypes.js");var n=a("./src/main/webapp/frontend/packages/enums/ExternalServiceProviders.js");YUI.add("squarespace-block-fivehundredpix-editor",function(e){e.namespace("Squarespace.Block.Editor");e.namespace("Squarespace.Block.ModelEditorDialog");e.Squarespace.Block.Editor.Fivehundredpix=e.Base.create("fivehundredpix-block-editor-dialog",e.Squarespace.Block.Editor.Gallery,[],{_getModelEditor:function(){return e.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Fivehundredpix")}},{NS:"blockEditor",ATTRS:{blockName:{value:i("500px")}}});e.Squarespace.Block.ModelEditorDialog.Fivehundredpix=e.Base.create("FivehundredpixModelEditorDialog",e.Squarespace.Block.ModelEditorDialog.SummaryGallery,[],{initialize:function(){this.after("collectionSynced",this._afterSyncAccount,this)},_onSendRequested:function(e){var t=this._getAccount();if(t&&!t.get("pullEnabled")){t.set("pullEnabled",true);t.after("save",function(){this.fire("collectionSynced")},this);t.save()}else this.fire("collectionSynced")},_getServiceId:function(){return n.FIVEHUNDREDPIX}},{ATTRS:{dialogConfig:{valueFn:"_getDefaultDialogConfig"},icon:{value:"fivehundredpix"},socialAccountType:{value:n.FIVEHUNDREDPIX},collectionType:{value:s.FIVEHUNDREDPIX},strings:{value:{name:"500px",itemTypePlural:"photos",itemType:"photo"}}}})},"1.0",{requires:["base","squarespace-block-summary-gallery-model-editor","squarespace-block-fivehundredpix-model","squarespace-damask-context-globals"]})},"./src/main/webapp/universal/scripts-v6/block/fivehundredpix-model.js":function(e,t){YUI.add("squarespace-block-fivehundredpix-model",function(e){e.namespace("Squarespace.ContentModel").FivehundredpixBlock=e.Base.create("fiveHundredPixModel",e.Squarespace.ContentModel.SummaryGalleryBlock,[],{},{})},"1.0",{requires:["base","model","squarespace-block-summary-gallery-model"]})},"./src/main/webapp/universal/scripts-v6/block/fivehundredpix.js":function(e,t,a){var i=a("./src/main/webapp/frontend/packages/enums/BlockType.js");var s=a("./src/main/webapp/universal/src/apps/App/shared/utils/BlockEditorUtils.js");YUI.add("squarespace-block-fivehundredpix",function(e){e.namespace("Squarespace.Block").Fivehundredpix=e.Base.create("block-fivehundredpix",e.Squarespace.Block.SummaryGallery,[e.Squarespace.Block.PremiumBlockMixin],{},{CSS_PREFIX:"sqs-block-fivehundredpix",MODEL:e.Squarespace.ContentModel.FivehundredpixBlock,ATTRS:{editor:{valueFn:function(){return s.isBlockEditorEnabled(this.get("blockTypeName"))?e.Squarespace.Block.Editor.Schema:e.Squarespace.Block.Editor.Fivehundredpix}},type:{value:i.FIVEHUNDREDPIX}}})},"1.0",{requires:["base","squarespace-block-summary-gallery","squarespace-block-fivehundredpix-editor","squarespace-block-fivehundredpix-model","squarespace-block-schema-editor","squarespace-premium-block-mixin"]})},"./src/main/webapp/universal/scripts-v6/block/flickr-editor.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/frontend/packages/enums/CollectionTypes.js");var n=a("./src/main/webapp/frontend/packages/enums/ExternalServiceProviders.js");YUI.add("squarespace-block-flickr-editor",function(e){e.namespace("Squarespace.Block.ModelEditorDialog");e.namespace("Squarespace.Block.Editor").Flickr=e.Base.create("flickr-block-editor-dialog",e.Squarespace.Block.Editor.Gallery,[],{_getModelEditor:function(){return e.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Flickr")}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Flickr")}}});e.Squarespace.Block.ModelEditorDialog.Flickr=e.Base.create("FlickrModelEditorDialog",e.Squarespace.Block.ModelEditorDialog.SummaryGallery,[],{_getServiceId:function(){return n.FLICKR}},{ATTRS:{icon:{value:"flickr"},socialAccountType:{value:n.FLICKR},collectionType:{value:s.FLICKR},strings:{value:{name:"Flickr",itemTypePlural:"photos",itemType:"photo"}}}})},"1.0",{requires:["base","squarespace-block-summary-gallery-model-editor","squarespace-block-flickr-model","squarespace-damask-context-globals"]})},"./src/main/webapp/universal/scripts-v6/block/flickr-model.js":function(e,t){YUI.add("squarespace-block-flickr-model",function(e){e.namespace("Squarespace.ContentModel").FlickerBlock=e.Base.create("FlickerModel",e.Squarespace.ContentModel.SummaryGalleryBlock,[],{},{})},"1.0",{requires:["base","model","squarespace-block-summary-gallery-model"]})},"./src/main/webapp/universal/scripts-v6/block/flickr.js":function(e,t,a){var i=a("./src/main/webapp/frontend/packages/enums/BlockType.js");var s=a("./src/main/webapp/universal/src/apps/App/shared/utils/BlockEditorUtils.js");YUI.add("squarespace-block-flickr",function(e){e.namespace("Squarespace.Block").Flickr=e.Base.create("block-flickr",e.Squarespace.Block.SummaryGallery,[e.Squarespace.Block.PremiumBlockMixin],{},{CSS_PREFIX:"sqs-block-flickr",MODEL:e.Squarespace.ContentModel.FlickrBlock,ATTRS:{editor:{valueFn:function(){return s.isBlockEditorEnabled(this.get("blockTypeName"))?e.Squarespace.Block.Editor.Schema:e.Squarespace.Block.Editor.Flickr}},type:{value:i.FLICKR}}})},"1.0",{requires:["base","squarespace-block-summary-gallery","squarespace-block-flickr-editor","squarespace-block-flickr-model","squarespace-block-schema-editor","squarespace-premium-block-mixin"]})},"./src/main/webapp/universal/scripts-v6/block/form-editor.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/universal/src/shared/utils/FormDialogConfigBuilder.js");YUI.add("squarespace-block-form-editor",function(r){r.namespace("Squarespace.Block.Editor");var t=r.Squarespace.Block.Editor.Form=r.Base.create("form-block-editor-dialog",r.Squarespace.Block.Editor.Dialog,[],{_enableEditing:function(e){e&&"contextmenu"===e.type&&e.preventDefault();t.superclass._enableEditing.call(this)},_getModelEditor:function(){return r.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Form")}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Form")}}});r.namespace("Squarespace.Block.ModelEditorDialog");var o=r.Squarespace.Block.ModelEditorDialog.Form=r.Base.create("blockFormEditor",r.Squarespace.ModelEditorDialog,[r.Squarespace.Block.FormModelEditorMixin],{initializer:function(){var e=this.get("dialog");e.on("ready",this.bindDialogFields,this);e.on("shown",this.renderCaptchaFields,this);e.on(["cancel-click","cancel"],this._cancelChanges,this);this.plug(r.Squarespace.ModelEditorPlugins.LoadBeforeShowing)},_cancelChanges:function(){var e=this.get("dialog");var t=e.getInitialData();if(t&&t.fields){var a=this.get("model");a.set("fields",t.fields)}},bindDialogFields:function(){this.fireBlockModelChangeOnFieldsChanged();this.bindCaptchaFields()},fireBlockModelChangeOnFieldsChanged:function(){var t=this.get("model");var e=this.get("dialog");var a=e.getField("fields");a&&a.after("change",function(e){t.fire("change",{changed:{fields:{prevVal:e.prevVal,newVal:e.newVal}}})},this)},bindCaptchaFields:function(){var e=this.get("dialog");var t=e.getField("captchaEnabled");if(!t)return;t.after("dataChange",this.renderCaptchaFields,this)},renderCaptchaFields:function(){var e=this.get("dialog");var t=e.getField("captchaEnabled");if(!t)return;var a=t.get("data");var i=false===a;if(i){e.getField("captchaTheme").hide();e.getField("captchaAlignment").hide()}else{e.getField("captchaTheme").show();e.getField("captchaAlignment").show()}},getSuccessRedirectData:function(){var e=this.get("model");var t=e.getFormModel();var a=t.get("successRedirect");r.Lang.isString(a)&&(a={url:a,newWindow:false});return a},getDataFromFormModel:function(){var e=this.get("model");var i=e.getFormModel();var t=e.constructor.FORM_MODEL_FIELDS.reduce(function e(t,a){t[a]="successRedirect"===a?this.getSuccessRedirectData():i.get(a);return t}.bind(this),{});return t},getDialogData:function(){var e=this.get("model");var t=this.getDataFromFormModel();var a=r.merge({useLightbox:e.get("useLightbox"),lightboxHandleText:e.get("lightboxHandleText"),buttonAlignment:e.get("buttonAlignment")},this.getConnectionData(e));var i=r.merge({},a,t);return i},sanitizeDialogData:function(e){e.successRedirect&&e.successRedirect.url?e.successRedirect=e.successRedirect.url:e.successRedirect="";return e},_saveResponseHandler:function(e,t,a,i,s){var n=this.get("dialog");if(e&&("validate"===e.src||"storageBackends"===e.src||"form"===e.src)){n.allowEditing();return new r.Squarespace.Widgets.Alert({"strings.title":e.title,"strings.message":e.message})}o.superclass._saveResponseHandler.call(this,e,t,a,i,s)}},{ATTRS:{dialogConfig:{valueFn:function(){return s.getConfig(r)}},dialogConfigContext:{valueFn:function(){return s.getConfigContext(r)}}}})},"1.0",{requires:["base","model","squarespace-damask-context-globals","squarespace-dialog-check","squarespace-dialog-code","squarespace-dialog-create-link","squarespace-dialog-description","squarespace-dialog-email-service-connect","squarespace-dialog-google-docs-service-connect","squarespace-dialog-mailchimp-service-connect","squarespace-dialog-campaigns-service-connect","squarespace-dialog-wysiwyg","squarespace-widgets-alert","squarespace-util-authenticated","squarespace-models-form","squarespace-block-form-model-editor-mixin"]})},"./src/main/webapp/universal/scripts-v6/block/form-model-editor-mixin.js":function(e,t,a){var c=a("./src/main/webapp/frontend/packages/enums/FormBackendConnectionType.js");var u=a("./src/main/webapp/frontend/packages/enums/FormBackendConnectionState.js");var d=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/universal/src/shared/utils/FormConnections.js");YUI.add("squarespace-block-form-model-editor-mixin",function(l){l.namespace("Squarespace.Block.FormModelEditorMixin");l.Squarespace.Block.FormModelEditorMixin=l.Base.create("FormModelEditorMixin",l.Base,[],{getConnectionData:function(e){var t=e.getFormModel();var a=t.get("connectedBackends")||[];var i=s.getFromModel({formId:t.get("id"),connections:a,legacyDefaults:{googleSpreadsheetName:e.get("googleDocsConnect.spreadsheetName"),mailchimpUsername:e.get("mailchimpConnect.username")}});if(i.errors){l.Array.each(i.errors,function(e){l.Squarespace.Logger.log(d("Unrecognized Connected Backend Type"),{storageBackend:e})});delete i.errors}return i},_getConnectFieldInitialData:function(){var r={};var o=this._model;var e=o.getFormModel();var t=e.get("connectedBackends");t&&l.Array.each(t,function(e){var t=e.backendId;if(!l.Lang.isValue(t))return;var a=e.socialConfig;switch(e.backendType){case c.CAMPAIGNS:r.campaignsConnect={connectionState:u.CONNECTED,listId:t};break;case c.EMAIL:r.emailConnect={connectionState:e.connectionState,email:t};break;case c.ZAPIER:r.zapierConnect={connectionState:e.connectionState,url:t};break;case c.GOOGLE:var i=e.config.spreadsheetName;l.Lang.isValue(i)||(i=o.get("googleDocsConnect.spreadsheetName"));r.googleDocsConnect={connectionState:e.connectionState,username:a.profileUserName,socialConfig:a,spreadsheetName:i};break;case c.MAILCHIMP:var s=a.profileUserName;var n=!!(e.config&&"true"===e.config.useSingleOptIn);l.Lang.isValue(s)||(s=o.get("mailchimpConnect.username"));r.mailchimpConnect={connectionState:e.connectionState,username:s,socialConfig:a,list:t,useSingleOptIn:n};break;default:l.Squarespace.Logger.log(d("Unrecognized Connected Backend Type"),{storageBackend:e});break}},this);r.emailConnect||l.Lang.isValue(e.get("id"))||(r.emailConnect={connectionState:u.CONNECTED,email:Static.SQUARESPACE_CONTEXT.authenticatedAccount.email});return r}})},"1.0",{requires:["base","model","squarespace-damask-context-globals","squarespace-models-form","squarespace-util-authenticated"]})},"./src/main/webapp/universal/scripts-v6/block/form-model.js":function(e,t,a){var o=a("./common/temp/node_modules/lodash/get.js");var i=a("./src/main/webapp/frontend/packages/enums/FormBackendConnectionState.js");var l=a("./src/main/webapp/frontend/packages/enums/FormBackendConnectionType.js");var c=a("./src/main/webapp/frontend/packages/enums/FormType.js");var u=a("./src/main/webapp/frontend/packages/enums/GoogleReCaptchaAlignmentType.js");var d=a("./src/main/webapp/frontend/packages/enums/GoogleReCaptchaThemeType.js");var p=a("./src/main/webapp/universal/src/shared/constants/FormBuilderFields.js");var h=a("./src/main/webapp/universal/src/shared/constants/HelpLinks.js");var g=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/universal/src/shared/utils/Loggers.ts");var m=s.createLogger("form-model","#456");YUI.add("squarespace-block-form-model",function(n){var s=g("Error Saving Form");var t=g("An error occurred while attempting to save the form.");var a={"spreadsheetName must be provided.":g("A spreadsheet name must be provided.")};function r(e){return e&&a[e]||t}n.namespace("Squarespace.Models");n.Squarespace.Models.BlockFormModel=n.Base.create("BlockFormModel",n.Model,[],{initializer:function(){this._formModel=this.createFormModel();this._saveCallbacks=[]},toJSON:function(){return{formId:this.get("formId"),useLightbox:this.get("useLightbox"),lightboxHandleText:this.get("lightboxHandleText"),buttonAlignment:this.get("buttonAlignment"),hSize:this.get("hSize"),vSize:this.get("vSize"),floatDir:this.get("floatDir")}},getFormModel:function e(){return this._formModel},createFormModel:function e(){var t=[n.merge({},p.NAME,{required:true}),n.merge({},p.EMAIL,{required:true}),n.merge({},p.TEXT,{title:g("Subject"),required:true}),n.merge({},p.TEXT_AREA,{title:g("Message"),maxLength:"",required:true})];t.forEach(function(e){n.Squarespace.FormEditingUtils.resolveFieldId(e,t)});return new n.Squarespace.Models.Form({id:null,name:g("New Form"),fields:t,submitButtonText:g("Submit"),submissionMessage:{html:g("Thank you!")},successRedirect:"",captchaEnabled:false,captchaTheme:d.LIGHT,captchaAlignment:u.LEFT})},setBackends:function(e){e.set("backendConnectionConfigs",{campaignsConnect:this.get("campaignsConnect"),googleDocsConnect:this.get("googleDocsConnect"),mailchimpConnect:this.get("mailchimpConnect"),emailConnect:this.get("emailConnect"),zapierConnect:this.get("zapierConnect")})},setBackendsAndSave:function(e){m("#setBackendsAndSave",this,e);this.setBackends(e);e.save(n.bind(this._onModelSave,this))},saveFormModel:function e(t){m("#saveFormModel");this._saveCallbacks.push(t);if(this._saveCallbacks.length>1)return;this.setBackendsAndSave(this.getFormModel())},_onModelSave:function e(t){var a=this._saveCallbacks;this._saveCallbacks=[];var i=this.getFormModel();if(!i){this._onModelSaveError({},a);return}if(n.Lang.isValue(t)){this._onModelSaveError(t,a);return}this.set("formId",i.get("id"));a.forEach(function e(t){t()})},_onModelSaveError:function e(a,t){var i=a?o(a,"responseJSON.message",""):"";t.forEach(function e(t){t({title:s,message:r(i),code:a.code,src:"form"})})},sync:function e(t,a,i){if("read"===t){var s=this.get("formId");if(n.Lang.isValue(s)){this.syncRead(s,i);return}if(a&&a.skipSaveOnLoad){i();return}this.saveFormModel(i);return}"create"!==t&&"update"!==t||this.syncWrite(i)},syncRead:function e(t,a){m("#syncRead start",t);var i=this.getFormModel();i.set("id",t);i.load(function e(){m("#syncRead complete - form model loaded");a()})},syncWrite:function e(t){m("#syncWrite");var a=this.constructor.FORM_MODEL_FIELDS;this.getFormModel().setAttrs(this.getAttrs(a));this.saveFormModel(t)},validate:function e(t,a){var i=this.validateFormBlockModel();if(i){a(i);return}a()},validateFormBlockModel:function(){if(!this.hasValidStorageConnected()){var e={title:g("Add Storage to this Form"),message:g('Tell us where to save form submissions in the <strong>Storage</strong> tab. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:h.FORM_AND_NEWSLETTER_STORAGE}),src:"validate"};return e}},isNewsletterBlockFormModel:function(){return this.getFormModel().get("type")===c.NEWSLETTER_BLOCK},hasValidStorageConnected:function(){var e=this.isNewsletterBlockFormModel()?[this.get("campaignsConnect.connectionState"),this.get("googleDocsConnect.connectionState"),this.get("mailchimpConnect.connectionState"),this.get("zapierConnect.connectionState")]:[this.get("googleDocsConnect.connectionState"),this.get("mailchimpConnect.connectionState"),this.get("emailConnect.connectionState"),this.get("zapierConnect.connectionState")];return-1!==e.indexOf(i.CONNECTED)||-1!==e.indexOf(i.PENDING)}},{FORM_MODEL_FIELDS:["captchaAlignment","captchaEnabled","captchaTheme","disclaimerMessage","fields","name","submissionHTML","submissionMessage","submitButtonText","successRedirect"],ATTRS:{emailConnect:{setter:function(e){e&&(e.backendType=l.EMAIL)},valueFn:function(){if(!n.Lang.isValue(this.get("formId"))&&n.Lang.isValue(Static.SQUARESPACE_CONTEXT.authenticatedAccount.email))return{connectionState:i.CONNECTED,email:Static.SQUARESPACE_CONTEXT.authenticatedAccount.email}}},googleDocsConnect:{setter:function(e){e&&(e.backendType=l.GOOGLE)}},mailchimpConnect:{setter:function(e){e&&(e.backendType=l.MAILCHIMP)}},campaignsConnect:{setter:function(e){e&&(e.backendType=l.CAMPAIGNS)}},zapierConnect:{setter:function(e){e&&(e.backendType=l.ZAPIER)}}}})},"1.0",{requires:["base","model","squarespace-enum","squarespace-form-editing-utils","squarespace-models-form"]})},"./src/main/webapp/universal/scripts-v6/block/form.js":function(e,t,a){var i=a("./src/main/webapp/frontend/packages/enums/BlockType.js");var s=a("./src/main/webapp/universal/src/apps/App/shared/utils/BlockEditorUtils.js");var n=false;YUI.add("squarespace-block-form",function(a){a.namespace("Squarespace.Block");var t=a.Squarespace.Block.Form=a.Base.create("block-form",a.SQS.LayoutEngine.Block.ModelSyncBase,[a.Squarespace.Block.PremiumBlockMixin],{initializer:function(){this._formPreview=new a.Squarespace.Widgets.FormPreview({form:this.get("model").getFormModel()});this.publish("formData-loaded",{fireOnce:true,async:true})},renderUI:function e(){var t=this._getStackFinished();var a=this.get("editController").get("editing");this.get("model").load({skipSaveOnLoad:!a},function(){this.onBlockModelLoad();t()}.bind(this))},onBlockModelLoad:function(){false;this.fire("formData-loaded");this._renderBlock()},bindUI:function(){var e=this.get("model");e.after(["change","save"],function(e){false;this._renderBlock()},this);e.after("save",this.syncUI,this);this.after("editableChange",this._afterEditableChange,this)},_afterEditableChange:function(e){this._shouldRerenderBlockFromServer(e)&&t.superclass._renderBlock.call(this)},syncUI:function e(t){false;var a=this.get("model");this._formPreview.set("useLightbox",a.get("useLightbox"));this._formPreview.set("lightboxHandleText",a.get("lightboxHandleText"));this._formPreview.set("buttonAlignment",a.get("buttonAlignment"))},ensureLoadedThenShowDialog:function(e){var t=this.get("model").get("formId");t?this.after("formData-loaded",e):e()},_renderBlock:function e(){var t=this.get("model");if(this._formPreview.get("rendered")){if(!a.Lang.isUndefined(t.get("fields"))){false;t.getFormModel().set("fields",t.get("fields"));this.syncUI()}}else{false;this._formPreview.render(this.get("contentBox"))}this._syncModelFieldWithPreview("captchaEnabled");this._syncModelFieldWithPreview("captchaTheme");this._syncModelFieldWithPreview("captchaAlignment");this.fire("widget:contentUpdate")},_syncModelFieldWithPreview:function(e){var t=this.get("model");var a=t.get(e);void 0!==a&&t.getFormModel().set(e,a)},_shouldRerenderBlockFromServer:function(e){if(e.newVal)return false;var t=this.get("model");var a=t.hasValidStorageConnected();return!a}},{CSS_PREFIX:"sqs-block-form",MODEL:a.Squarespace.Models.BlockFormModel,ATTRS:{editor:{valueFn:function(){return s.isBlockEditorEnabled(this.get("blockTypeName"))?a.Squarespace.Block.Editor.Schema:a.Squarespace.Block.Editor.Form}},type:{value:i.FORM}}})},"1.0",{requires:["base","model","squarespace-block-form-model","squarespace-block-form-editor","squarespace-form-editing-utils","squarespace-form-preview","squarespace-models-form","squarespace-premium-block-mixin"]})},"./src/main/webapp/universal/scripts-v6/block/foursquare-editor.js":function(e,t,a){var s=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var n=a("./src/main/webapp/frontend/packages/enums/CollectionTypes.js");var r=a("./src/main/webapp/universal/src/shared/constants/HelpLinks.js");YUI.add("squarespace-block-foursquare-editor",function(a){a.namespace("Squarespace.Block.ModelEditorDialog");a.namespace("Squarespace.Block.Editor").Foursquare=a.Base.create("foursquare-block-editor-dialog",a.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Foursquare")}},{NS:"blockEditor",ATTRS:{blockName:{value:s("Foursquare Swarm")}}});var i=a.Squarespace.Block.ModelEditorDialog.Foursquare=a.Base.create("FoursquareSummaryModelEditorDialog",a.Squarespace.Block.ModelEditorDialog.SocialSummary,[],{_getServiceId:function(){return a.Squarespace.ExternalServiceProviders.FOURSQUARE},_getDefaultDialogConfig:function(){var e=i.superclass._getDefaultDialogConfig.call(this);var t=e.tabs[0].fields;t.unshift({ctor:a.Squarespace.DialogFields.Description,text:s('Display a feed of check-ins from a personal Foursquare Swarm account. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:r.FOURSQUARE})});return e}},{ATTRS:{icon:{value:"foursquare"},socialAccountType:{value:a.Squarespace.ExternalServiceProviders.FOURSQUARE},collectionType:{value:n.FOURSQUARE},strings:{value:{name:s("Foursquare Swarm"),itemTypePlural:s("check-ins"),itemType:s("check-in")}}}})},"1.0",{requires:["base","model","squarespace-block-foursquare-model","squarespace-block-summary-model-editor","squarespace-damask-context-globals","squarespace-dialog-select","squarespace-dialog-button","squarespace-dialog-slider","squarespace-model-editor"]})},"./src/main/webapp/universal/scripts-v6/block/foursquare-model.js":function(e,t){YUI.add("squarespace-block-foursquare-model",function(e){e.namespace("Squarespace.ContentModel").FoursquareBlock=e.Base.create("FoursquareBlockModel",e.Squarespace.ContentModel.SummaryGalleryBlock,[],{},{ATTRS:{}})},"1.0",{requires:["base","model","squarespace-block-summary-gallery-model"]})},"./src/main/webapp/universal/scripts-v6/block/foursquare.js":function(e,t,a){var i=a("./src/main/webapp/frontend/packages/enums/BlockType.js");var s=a("./src/main/webapp/universal/src/apps/App/shared/utils/BlockEditorUtils.js");YUI.add("squarespace-block-foursquare",function(e){e.namespace("Squarespace.Block").Foursquare=e.Base.create("block-foursquare",e.Squarespace.Block.SocialSummaryBase,[e.Squarespace.Block.PremiumBlockMixin],{},{CSS_PREFIX:"sqs-block-foursquare",MODEL:e.Squarespace.ContentModel.FoursquareBlock,ATTRS:{editor:{valueFn:function(){return s.isBlockEditorV2Enabled(this.get("blockTypeName"))?e.Squarespace.Block.Editor.Schema:e.Squarespace.Block.Editor.Foursquare}},type:{value:i.FOURSQUARE}}})},"1.0",{requires:["base","squarespace-block-social-summary","squarespace-block-foursquare-editor","squarespace-block-foursquare-model","squarespace-premium-block-mixin"]})},"./src/main/webapp/universal/scripts-v6/block/gallery-editor.js":function(e,t,a){var r=a("./src/main/webapp/frontend/packages/enums/BlockType.js");var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var o=a("./src/main/webapp/universal/src/shared/constants/GalleryBlockConstants.js");YUI.add("squarespace-block-gallery-editor",function(n){n.namespace("Squarespace.Block.Editor");function s(e){if("grid"===e)return i("Grid");if("slider"===e)return i("Carousel");if("stacked"===e)return i("Stacked");if("slideshow"===e)return i("Slideshow");return i("Gallery")}var t=n.Squarespace.Block.Editor.Gallery=n.Base.create("galleryEditor",n.Squarespace.Block.Editor.Dialog,[],{initializer:function(e){var t=this.get("host");var a=t.get("model");var i=this.configDialog.get("dialog");i.on("ready",function(){var e=i.getField("options");e.after("options-changed",this._syncGallery,this);t.get("type")!==r.INSTAGRAM&&i.setAndUpdateTitle(s(a.get("design")))},this);a.after("change",function(e){this.set("resizable",this.isSlider())},this);this.onHostEvent("resized",function(e){"columnChanged"===e.source&&"slideshow"===a.get("design")&&t._setWidgetContent()});this.onHostEvent("dropped",function(e){e.oldCol!==n.SQS.LayoutEngine.Layout.Utils.getColumnWidth(t.get("contentBox"))&&t._setWidgetContent()});this.after("editingChange",function(e){e.newVal&&"dummyCollection"===a.get("collectionId")&&a.set("collectionId",void 0)});this.afterHostEvent(["dropped","resized","widget:contentUpdate"],function(){this._setExtraDesignStyles();this.updateWidgetAttrs()});a.on("designChange",function(e){i.setAndUpdateTitle(s(e.newVal))});this.configDialog.on("gallery-refresh",t._renderBlock,t);this.configDialog.on("focalPointChanged",this._refreshFocalPoint,this);this._bindHeightLocking()},_bindHeightLocking:function(){this.beforeHostMethod("_renderBlock",this._lockBlockHeight);this.onHostEvent("widget:contentUpdate",function(e){this.get("host").requestingContent||this._unlockBlockHeight()})},_getModelEditor:function(){return n.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Gallery")},_lockBlockHeight:function(){var e=this.get("host").get("boundingBox");if(!e.test(".sqs-locked-height")){e.addClass("sqs-locked-height");e.setStyles({maxHeight:e.get("region").height,overflow:"hidden"})}},_unlockBlockHeight:function(e){var t=this.get("host").get("boundingBox");t.removeClass("sqs-locked-height");t.setStyles({maxHeight:null,overflow:null})},_setExtraDesignStyles:function(){var e=this._model.getAttrs();switch(e.design){case"grid":this.configDialog.renderGridCSS(this.get("host").get("contentBox"),e);break;case"slideshow":this.configDialog.renderSlideshowCSS(this.get("host").get("contentBox"),e);break}},_refreshFocalPoint:function(e){var t=this.get("host").get("boundingBox").one('img[data-image-id="'+e.imageId+'"]');if(n.Lang.isNull(t)){false;return}var a=t.loader;if(a){a.set("focalPoint",e.mediaFocalPoint);a.fire("refresh")}},updateWidgetAttrs:function(){var e=this.get("host");var t=e.get("contentBox").one(".sqs-gallery");if(!t)return;var a=t.getData("gallery");if(!a)return;var i=e.get("model").getAttrs(o.RERENDER_ATTR_WHITELIST);var s=n.SQS.Gallery.Manager.dataToAttrs(i);a.setAttrs(s);a.refresh()},isSlider:function(){return"slider"===this.get("host").get("model").get("design")},_syncGallery:function(e,t){var a=this.get("host");var i=e.get("name");var s=this.get("host").get("contentBox");this.configDialog.syncGalleryOptions(i,s);"lightboxTheme"===i&&a._renderBlock()},_setBlockResizable:function(e){t.superclass._setBlockResizable.apply(this,arguments);if(!e)return;this._registerEvent(this.get("resizeNode").resize.on("handle-dblclick",this._resetOriginalAspectRatio,this))},_resetOriginalAspectRatio:function(){this.get("host").get("model").set("aspectRatio",o.DEFAULT_SLIDER_ASPECT_RATIO)}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Gallery")},resizeNode:{valueFn:function(){return this.get("host").get("boundingBox")}},resizable:{valueFn:function(){return this.isSlider()}}}})},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-block-mixin-gallery-option-sync","squarespace-content-collection-utils","squarespace-damask-context-globals","squarespace-dialog-content-item-grid","squarespace-dialog-gallery-options","squarespace-dialog-multi-frame","squarespace-dialog-multi-option","@sqs/layout-engine/layout-utils","squarespace-models-content-collection","squarespace-plugin-actionoverlay"]})},"./src/main/webapp/universal/scripts-v6/block/gallery-model-editor.js":function(e,t,a){var r=a("./src/main/webapp/frontend/packages/enums/Flag.js");var o=a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts");var l=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var c=a("./src/main/webapp/frontend/packages/enums/CollectionTypes.js");var u=a("./src/main/webapp/frontend/packages/enums/CollectionOrdering.js");var i=a("./src/main/webapp/universal/src/shared/constants/HelpLinks.js");var s=false;YUI.add("squarespace-block-gallery-model-editor",function(s){s.namespace("Squarespace.Block.ModelEditorDialog");var n=s.Squarespace.Block.ModelEditorDialog.Gallery=s.Base.create("blockGalleryModelEditorDialog",s.Squarespace.ModelEditorDialog,[s.Squarespace.Block.Mixins.BlockAnimationAnalytics,s.Squarespace.Block.Mixins.Gallery,s.Squarespace.Mixins.EventRegistrar],{initializer:function(e){var t=s.Squarespace.ContentCollectionCache;if(0===t.size()){t.after("load",this._syncPlugin,this);t.load()}var a=this.get("dialog");a.on("ready",function(e){this._bindTransientEvents();o.isFeatureEnabled(r.GALLERY_BLOCK_ANIMATIONS)&&this.trackAnimationFieldsChange({fields:[a.getField("blockAnimation")],eventName:"gallery_animation_selection_change",dataInitializer:this._prepareAnimationTrackingData})},this)},save:function e(t,a,i){o.isFeatureEnabled(r.GALLERY_BLOCK_ANIMATIONS)&&this.trackAnimationFieldsSave({eventName:"gallery_animation_selection_save",dataInitializer:this._prepareAnimationTrackingData});n.superclass.save.apply(this,arguments)},sanitizeDialogData:function(e){if(s.Object.hasKey(e,"options")){e=s.merge(e,e.options);delete e.options}switch(e.methodOption){case"existing":e.collectionId=e.existingGallery;e.existingGalleryId=e.existingGallery;break;case"transient":e.collectionId=e.transientGallery.get("id");e.transientGalleryId=e.transientGallery.get("id");break;default:false}"slider"!==e.design?e.aspectRatio=null:delete e.aspectRatio;e.vSize=null;delete e.methodFrame;delete e.transientGallery;return e},getDialogData:function(){var e=this.get("model").toJSON();var t=s.merge(e,{options:e,methodOption:e.methodFrame=this._usesTransientCollection()?"transient":"existing"});var a=l("Gallery Block {galleryBlockId}",{galleryBlockId:s.Squarespace.Utils.getGuid()});var i={id:e.transientGalleryId||null,typeName:"gallery-block",type:c.GALLERY_BLOCK,title:a,navigationTitle:a,urlId:s.Squarespace.Utils.getGuid(),ordering:u.USER,enabled:true};t.transientGallery=new s.Squarespace.Models.ContentCollection(i);t.transientGallery.get("id")?t.transientGallery.load():t.transientGallery.setAttrs({itemCount:0,calculatedItemCount:0});this.get("model").get("transientGallery").get("id")||this.get("model").set("transientGallery",i,{silent:true});return t},_usesTransientCollection:function(){var e=this.get("model").get("collectionId");if(e){var t=s.Squarespace.ContentCollectionCache.getById(e);var a=s.Squarespace.ContentCollectionCache.filter(function(e){var t=e.getTemplateConfiguration();return!!(t&&t.get("collectionType")===c.COLLECTION_TYPE_GENERIC&&t.get("ordering")===u.USER)});return-1===a.indexOf(t)}return true},_prepareAnimationTrackingData:function(){var e=this.get("model");var t=this.get("dialog");var a=e?e.layout.get("collectionId"):null;var i=t.getField("blockAnimation").get("data");var s={collectionId:a,blockAnimationSelection:i};return s},_bindTransientEvents:function(){var e=this.get("dialog");var t=e.getField("transientGallery");var a=t.get("data");if(a.isNew()){a.once("save",function(){var e=a.get("id");this.get("model").setAttrs({collectionId:e,transientGalleryId:e})},this);t.set("uploadPreflight",function(e){a.save(e)})}var i=["create","add","remove","reordered","group-reordered","*:mediaProcessingStateChange","*:titleChange","bulk-remove"];a.items.after(i,this._transientGalleryChanged,this);a.items.after("*:mediaFocalPointChange",this._focalPointChanged,this);this._registerEvent(a.items.once("*:save",function(){false;this.fire("gallery-refresh")},this))},_transientGalleryChanged:function(e){if(e.onReorder||"bulk-remove"===e.source)return;if("Item:titleChange"===e.type){var t=e.prevVal||"";var a=e.newVal||"";if(a===t)return}false;this.fire("gallery-refresh")},_focalPointChanged:function(e){this.fire("focalPointChanged",{imageId:e.target.get("id"),mediaFocalPoint:e.target.get("mediaFocalPoint")})},_getDefaultDialogConfiguration:function(){var t=this.get("dialog");var e=[{title:l("Gallery"),tabTitle:l("Content"),icon:"/universal/images-v6/icons/icon-gallery-16-light-solid.png",name:"content",scroll:false,fields:[{ctor:s.Squarespace.DialogFields.Description,config:{text:l('Create a gallery of your images, videos, or Getty Images. You can also display content from a Gallery Page you\'ve created. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:i.GALLERY_EDITOR})}},{ctor:s.Squarespace.DialogFields.MultiOption,config:{name:"methodOption",optionClickCb:{$valueFn:function(){return function(e){t.getField("methodFrame").switchFrames(e)}}},options:[{value:"transient",title:l("Upload Media"),icon:"upload-media"},{value:"existing",title:l("Use Existing Gallery"),icon:"existing-gallery"}]}},{ctor:s.Squarespace.DialogFields.MultiFrame,config:{name:"methodFrame",width:440,height:{$valueFn:function(){return 390}},frames:[{name:"transient",fields:[{ctor:s.Squarespace.DialogFields.ContentItemGrid,config:{collectionConfiguration:{acceptTypes:["image","video"],addText:l("Add Media")},name:"transientGallery",showAddIcon:true,renderOnShow:true,pageSize:250,addText:l("Add Content"),imageSize:140,"contentItemImageOptions.actionOverlayButtons":[s.Squarespace.ActionOverlayButtons.IMAGE_INFO,s.Squarespace.ActionOverlayButtons.EDIT_IMAGE,s.Squarespace.ActionOverlayButtons.REMOVE_IMAGE],dataState:"loading"}}]},{name:"existing",fields:[{ctor:s.Squarespace.DialogFields.ContentIdSelector,config:{name:"existingGallery",showCollectionTagsAndCategories:false,showGroupTitles:false,emptyMessage:l("No Gallery Pages yet. Go to the pages panel and click a + to add new content."),collectionFilter:{collectionType:c.COLLECTION_TYPE_GENERIC,ordering:u.USER,folder:false}}}]}]}}]},{title:l("Gallery"),icon:"/universal/images-v6/icons/icon-gallery-16-light-solid.png",tabTitle:l("Design"),name:"design",scroll:true,fields:[{ctor:s.Squarespace.DialogFields.GalleryOptions,name:"options",config:{options:{$valueFn:s.bind(this._getGalleryOptions,this)},width:450}}]}];o.isFeatureEnabled(r.GALLERY_BLOCK_ANIMATIONS)&&e.push({tabTitle:l("Animations"),fields:[{ctor:s.Squarespace.DialogFields.Select,config:{name:"blockAnimation","strings.title":l("Animate Gallery Block"),className:"thin dark",defaultValue:"none",options:[{value:"none",label:l("None")},{value:"fade-in",label:l("Fade In")},{value:"focus-in",label:l("Focus In")},{value:"slide-up",label:l("Slide Up")},{value:"reveal",label:l("Reveal")}]}}]});var a={title:l("Gallery"),width:500,height:{$valueFn:function(){return 652}},loadingText:l("Editing Gallery…"),initialDataByReference:true,tabs:e};return a},_getDefaultContent:function(){var e={methodOption:"transient"};var t=this._defaultGalleryOptions();return s.merge(t,e)}},{ATTRS:{dialogConfig:{valueFn:"_getDefaultDialogConfiguration",validator:s.Lang.isObject}}})},"1.0",{requires:["base","squarespace-block-mixin-gallery-option-sync","squarespace-models-content-collection","squarespace-content-collection-utils","squarespace-plugin-actionoverlay","squarespace-dialog-content-item-grid","squarespace-dialog-gallery-options","squarespace-dialog-multi-option","squarespace-dialog-multi-frame","squarespace-dialog-select","squarespace-block-editor-dialog","squarespace-mixins-event-registrar","squarespace-block-mixin-block-animation-analytics"]})},"./src/main/webapp/universal/scripts-v6/block/gallery.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/apps/App/shared/utils/BlockEditorUtils.js");YUI.add("squarespace-block-gallery",function(e){e.namespace("Squarespace.Block");e.Squarespace.Block.Gallery=e.Base.create("block-gallery",e.SQS.LayoutEngine.Block.Gallery,[e.Squarespace.Block.PremiumBlockMixin],{},{ATTRS:{editor:{valueFn:function(){return i.isBlockEditorEnabled(this.get("blockTypeName"))?e.Squarespace.Block.Editor.Schema:e.Squarespace.Block.Editor.Gallery}}},CSS_PREFIX:"sqs-block-gallery",MODEL:e.SQS.LayoutEngine.BlockModel.Gallery})},"1.0",{requires:["base","model","@sqs/layout-engine/block-model-gallery","@sqs/layout-engine/block-gallery","squarespace-block-gallery-editor","squarespace-block-gallery-model-editor","squarespace-dialog-content-item-grid","squarespace-dialog-content-selector","squarespace-dialog-fields","squarespace-dialog-gallery-options","squarespace-dialog-multi-frame","squarespace-dialog-multi-option","squarespace-models-content-collection","squarespace-premium-block-mixin"]})},"./src/main/webapp/universal/scripts-v6/block/horizontal-rule-editor.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-block-horizontal-rule-editor",function(e){e.namespace("Squarespace.Block.Editor");e.Squarespace.Block.Editor.HorizontalRule=e.Base.create("horizontal-rule-block-editor-dialog",e.SQS.LayoutEngine.Block.Editor.Base,[],{},{NS:"blockEditor",ATTRS:{blockName:{value:i("Line")},editingButtons:{value:true},includeEdit:{value:false}}})},"1.0",{requires:["base","@sqs/layout-engine/block-editor-base"]})},"./src/main/webapp/universal/scripts-v6/block/horizontal-rule.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/apps/App/shared/utils/BlockEditorUtils.js");YUI.add("squarespace-block-horizontal-rule",function(t){t.namespace("Squarespace.Block").HorizontalRule=t.Base.create("block-horizontalrule",t.SQS.LayoutEngine.Block.HorizontalRule,[],{renderUI:function(){var e=t.Node.create("<hr>");this.get("contentBox").appendChild(e)}},{CSS_PREFIX:"sqs-block-horizontalrule",ATTRS:{editor:{valueFn:function(){return i.isBlockEditorEnabled(this.get("blockTypeName"))?t.Squarespace.Block.Editor.Schema:t.Squarespace.Block.Editor.HorizontalRule}}}})},"1.0",{requires:["base","@sqs/layout-engine/block-horizontal-rule","squarespace-block-horizontal-rule-editor","squarespace-block-schema-editor"]})},"./src/main/webapp/universal/scripts-v6/block/html-editor.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-block-html-editor",function(a){var e=["p","ul","ol","blockquote","h1","h2","h3","h4","h5","h6"];a.namespace("Squarespace.Block.Editor").Html=a.Base.create("block-html-editor",a.SQS.LayoutEngine.Block.Editor.Base,[a.SQS.LayoutEngine.Block.MixinSplitable,a.SQS.LayoutEngine.Block.MixinCoalesceable],{insertContentIntoModel:function(e){this._model.set("source",e);this._model.set("html",e)},_onBlur:function(){this._disableEditing()},beforeLayoutDrag:function(){var e=this.get("host").contentHtml.contentEditor;e&&e.beforeLayoutDrag();a.SQS.LayoutEngine.Block.MixinSplitable.prototype.beforeLayoutDrag.call(this)},afterLayoutDrag:function(){a.SQS.LayoutEngine.Block.MixinSplitable.prototype.afterLayoutDrag.call(this);var e=this.get("host").contentHtml.contentEditor;e&&e.afterLayoutDrag()},getBlockLevelElements:function(){var t=this.get("selectorsForInsertPoints");return new a.NodeList(a.Array.filter(this._cb.one(".sqs-html-content").get("children").getDOMNodes(),function(e){e=a.one(e);return e.test(t)&&e.getContent()}))},_afterEditingChange:function(e){this._bb.toggleClass("sqs-block-editing",!!e.newVal)},_isCoalesceable:function(e){var t=a.Widget.getByNode(e);return!t.get("isNewBlock")&&!t.get("model").get("floatDir")&&e.get("text")!==t.contentHtml.get("placeholderText")},_handleBlockFocusChange:function(e,t){var a=this.get("host");var i=a.contentHtml.contentEditor;if(!i)return;e?e===a?i.showEditor():i.hideEditor():t&&t!==a&&i.showEditor()}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Text")},editingEvent:{value:"focus"},editingButtons:{value:true},includeEdit:{value:false},minHSize:{value:1},selectorsForInsertPoints:{valueFn:function(){return a.Array.map(e,function(e){return".sqs-html-content > "+e}).join(", ")}},selectorsForDropZone:{valueFn:function(){return a.Array.map(e,function(e){return".sqs-html-content:not(.rte) > "+e}).join(", ")}}}})},"1.0",{requires:["base","@sqs/layout-engine/block-editor-base","@sqs/layout-engine/block-mixin-coalesceable","@sqs/layout-engine/block-mixin-splitable","@sqs/layout-engine/layout-drop"]})},"./src/main/webapp/universal/scripts-v6/block/html.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/apps/App/shared/utils/BlockEditorUtils.js");YUI.add("squarespace-block-html",function(e){e.namespace("Squarespace.Block");e.Squarespace.Block.Html=e.Base.create("block-html",e.SQS.LayoutEngine.Block.Html,[e.Squarespace.Block.PremiumBlockMixin],{},{CSS_PREFIX:"sqs-block-html",ATTRS:{blockContentEditor:{valueFn:function(){return e.Squarespace.Content.HtmlEditor}},editor:{valueFn:function(){return i.isBlockEditorV2Enabled(this.get("blockTypeName"))?e.Squarespace.Block.Editor.Schema:e.Squarespace.Block.Editor.Html}}}})},"1.0",{requires:["@sqs/layout-engine/block-html","base","squarespace-block-content-html-editor","squarespace-block-html-editor","squarespace-premium-block-mixin"]})},"./src/main/webapp/universal/scripts-v6/block/icon.js":function(e,t){YUI.add("squarespace-block-icon",function(t){t.namespace("Squarespace.Block");var a=t.Squarespace.Block.Icon=t.Base.create("blockIcon",t.SQS.LayoutEngine.LayoutInsert.BlockIconBase,[t.Squarespace.Block.PremiumBlockMixin],{renderUI:function(){var e=t.ClassNameManager.getClassName("sqs","blockicon",this.get("id"),true);this.get("boundingBox").addClass(e);this.get("contentBox").setHTML('<div class="label">'+this.get("label")+"</div>")},bindUI:function(){this.after("pressedChange",this._afterPressedChange,this)},_afterPressedChange:function(e){this.get("boundingBox").toggleClass(a.CSS_PREFIX+"-pressed",!!e.newVal)}},{CSS_PREFIX:"sqs-blockicon",ATTRS:{pressed:{value:false}}})},"1.0",{requires:["base","@sqs/layout-engine/layout-insert-block-icon-base","squarespace-premium-block-mixin"]})},"./src/main/webapp/universal/scripts-v6/block/image-base.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/utils/TemplateVersionUtils.js");YUI.add("squarespace-block-image-base",function(n){n.namespace("Squarespace.Block");var e=n.Squarespace.Block.ImageBase=n.Base.create("block-image-base",n.SQS.LayoutEngine.Block.Image,[n.Squarespace.Block.PremiumBlockMixin],{bindUI:function(){e.superclass.bindUI.call(this);this.on("editableChange",function(){this.get("contentBox").removeClass("sqs-text-ready")},this);this.get("model").after("imageIdChange",this.toggleContentCaption,this);this.get("model").after("descriptionChange",this.setCaptionFromGetty,this)},ensureLoadedThenShowDialog:function(e){var t=this.get("model").get("imageId");t?this.contentImage.after("image-loaded",e):e()},setCaptionFromGetty:function(e){if("getty"!==e.source)return;var t=e.newVal.html;var a=e.prevVal.html;if(t===a)return;var i=this.get("collectionId");if(!n.Lang.isString(i))return;var s=n.Squarespace.ContentCollectionCache.getById(i);s&&n.Squarespace.ContentCollectionUtils.isBlog(s)&&this.contentCaption.setContent(t)},toggleContentCaption:function(e){var t=e.newVal;this.contentCaption&&(t?this.contentCaption.show():this.contentCaption.hide())}},{ATTRS:{isImageBlockCardsEnabled:{getter:function(){var e=this.get("model").layout;var t=e?e.get("collectionId"):null;if(!t)return false;var a=n.Squarespace.ContentCollectionCache.getById(t);var i=a?n.Squarespace.ContentCollectionUtils.isPage(a):null;return!!i}},htmlContentEditor:{valueFn:function(){return n.Squarespace.Content.HtmlEditor}},htmlContentEditorType:{valueFn:function(){return i.isSevenOne()?"full":"simple"}}}})},"1.0",{requires:["base","@sqs/layout-engine/block-image","squarespace-block-image-editor","squarespace-block-content-html-editor","squarespace-block-content-image-editor","squarespace-content-collection-utils","squarespace-premium-block-mixin"]})},"./src/main/webapp/universal/scripts-v6/block/image-editor-base.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-block-image-editor-base",function(e){e.namespace("Squarespace.Block.Editor");var t=e.Squarespace.Block.Editor.ImageBase=e.Base.create("image-block-editor-dialog-base",e.Squarespace.Block.Editor.Dialog,[],{initializer:function(){var t=this.get("host");var e=t.get("model");var a=e.get("layout");if("inline"===a){var i=t.contentCaption;this._registerEvent(i.after("focusedChange",this._ensureOverlayCaptionIsVisible,this))}this._registerEvent(t.contentImage.get("model").after("imageIdChange",function(e){t.contentImage.emptyImageNode()},this));this._registerEvent(t.contentImage.get("model").after(["imageIdChange","processingChange"],function e(){this.syncUI()},this));this.onHostEvent("focusedChange",function(e){t.get("editController").alignInsertPoints()},this)},destructor:function(){if(this.drop){this.drop.destroy();this.drop=null}this.get("host").get("model").detach("blockEditor|*");this.get("host").contentImage.detach("blockEditor|*");this.get("host").contentCaption&&this.get("host").contentCaption.detach("blockEditor|*")},_bindDialogEvents:function(){t.superclass._bindDialogEvents.call(this);this.configDialog.get("dialog").on("dismiss",function(e){this._getContentItemEditor().set("editing",false)},this)},_getContentItemEditor:function(){return this.get("host").contentImage.contentEditor},_ensureOverlayCaptionIsVisible:function(e){var t=this.get("host").get("model").get("layout");if(t.indexOf("overlay")>-1&&e.newVal){this._editingButtons.hide();this.set("editingEvent",null)}else{this._editingButtons.show();this.get("editingEvent")||this.set("editingEvent",["dblclick","contextmenu"])}}},{ATTRS:{blockName:{value:i("Image")},editing:{value:false},editingOverlay:{valueFn:function(){return null}},editingTrueOnNewBlock:{value:false},editingEvent:{value:["dblclick"]}}})},"1.0",{requires:["base","squarespace-model-editor","@sqs/layout-engine/block-editor-base","squarespace-block-editor-dialog"]})},"./src/main/webapp/universal/scripts-v6/block/image-editor-resize-mixin.js":function(e,t){YUI.add("squarespace-image-editor-resize-mixin",function(s){s.namespace("Squarespace.Block.Editor").ImageResizeMixin=s.Base.create("image-resize-mixin",s.Base,[],{initializer:function(){this._initOverlay()},_initOverlay:function(){var e=this.get("host").contentImage;this._overlay=s.Node.create('<div class="sqs-editing-overlay"></div>');e.get("contentBox").append(this._overlay);this._editingChangeHandle=e.on("editingChange",function(e){e.newVal?this._overlay.hide():this._overlay.show()},this)},_syncResizable:function(){var e=this.get("host").contentImage.get("model");var t=e.get("imageId");var a=e.get("processing");var i=t&&!a&&s.Lang.isValue(this._model);i?this.constructor.superclass._syncResizable.apply(this,arguments):this._setBlockResizable(false)},_setBlockResizable:function(e){var t=this._hasResizablePlugin();this.constructor.superclass._setBlockResizable.apply(this,arguments);e&&!t&&this._bindResizeEvents()},_bindResizeEvents:function(){var e=this._model.get("designLayout");if(!this._model.get("imageId")||["card","overlap","collage"].includes(e))return;var t=this.get("host").contentImage.get("boundingBox").resize;this._registerEvent(t.on("handle-dblclick",this._resetOriginalAspectRatio,this),t.on("resize:start",this._resetEditingState,this),t.on("resize:end",this._restoreEditingState,this),t.after("resize:resize",this._updateAspectRatio,this),t.after("resize:end",this._updateAspectRatio,this))},_updateAspectRatio:function(){var e=this.get("host").contentImage;var t=e.get("boundingBox").get("region");var a=t&&t.height/t.width*100;e.get("model").set("aspectRatio",a)},_resetOriginalAspectRatio:function(){var e=this.get("host").contentImage;var t=e.get("model").get("dimensions");var a=t&&t.height/t.width*100;e.get("model").set("aspectRatio",a)},_resetEditingState:function(){var e=this.get("host").contentImage.contentEditor;this.resizeStartEditingState=e.get("editing");e.set("editing",false)},_restoreEditingState:function(){if("boolean"===typeof this.resizeStartEditingState){var e=this.get("host").contentImage.contentEditor;e.set("editing",this.resizeStartEditingState||false)}},destructor:function(){this._editingChangeHandle.detach();this._overlay.remove(true)}},{NS:"blockEditor",ATTRS:{resizable:{value:true},resizeNode:{valueFn:function(){var e=this.get("host").contentImage;return e.get("boundingBox")}}}})},"1.0",{requires:["base"]})},"./src/main/webapp/universal/scripts-v6/block/image-editor-web-dialog.js":function(e,t,a){var y=a("./common/temp/node_modules/lodash/compact.js");var _=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var C=a("./src/main/webapp/universal/src/shared/constants/BlockAnimations.js");var i=a("./src/main/webapp/universal/src/shared/constants/LayoutEngineClassnames.js");var s=a("./src/main/webapp/universal/src/shared/utils/Loggers.ts");var E=a("./src/main/webapp/universal/src/shared/utils/TemplateVersionUtils.js");var w=a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts");var A=a("./src/main/webapp/universal/src/apps/App/shared/components/ImagePicker/constants/LicensedAssetDestination.js");var T=a("./src/main/webapp/frontend/packages/enums/Flag.js");var I=a("./src/main/webapp/universal/src/apps/App/shared/components/YUICompatibleLinkEditor/index.js");var l=a("./src/main/webapp/universal/src/shared/utils/CMSV7Events.js");var p=s.createLogger("image-editor-web-dialog","orange",false);YUI.add("squarespace-block-image-editor-web-dialog",function(S){S.namespace("Squarespace.Block.ModelEditorDialog");var s=S.Squarespace.Block.ModelEditorDialog.Image=S.Base.create("blockImageEditorDialog",S.Squarespace.ModelEditorDialog,[S.Squarespace.Block.Mixins.BlockAnimationAnalytics],{_showDialog:function e(){var o=this.get("dialog");var t=this.get("id");o.detach(t+"|ready");o.on(t+"|ready",function(e){var t=o.getField("lightbox");var a=o.getField("imageLink");var i=o.getField("designLayout");var s=o.getField("combinationAnimation");var n=o.getField("individualImageAnimation");var r=o.getField("individualTextAnimation");this._syncOptionalFields();S.Lang.isValue(t)&&t.after("dataChange",this._syncOptionalFields,this);S.Lang.isValue(a)&&a.after("dataChange",this._syncOptionalFields,this);S.Lang.isValue(i)&&i.after("dataChange",this._syncOptionalFields,this);S.Lang.isValue(s)&&s.after("dataChange",this._syncOptionalFields,this);this.trackAnimationFieldsChange({fields:[s,n,r],eventName:"image_animation_selection_change",dataInitializer:this._prepareAnimationTrackingData});this._syncContentImage();o.getField("image").after("dataChange",function e(){this._syncContentImage()},this)},this);o.on("gettyImageCaptionUpdate",function(e){this.get("model").set("description.html",e.caption,{source:"getty"})},this);var a=this.get("imageContentModel");a.on("focalPointChange",function(e){var t=o.getField("image");t&&t.setFocalPointPluginValue(e.newVal)});a.after("imageIdChange",this.imageContentModelAfterImageIdChange,this);a.after("filenameChange",this.imageContentModelAfterFilenameChange,this);s.superclass._showDialog.call(this)},imageContentModelAfterImageIdChange:function(e){var t=this.get("dialog");if(!t)return;var a=t.getField("image");if(!a)return;if(!e.newVal){p("imageContentModel.after imageIdChange clear");a.set("data",null);return}p("imageContentModel.after imageIdChange new image",{newId:e.newVal});var i=this.get("imageContentModel");var s=new S.Squarespace.Models.ContentItem({inDialog:true,id:i.getImageContentItemField("id"),mediaProcessingState:S.Squarespace.MediaProcessingState.QUEUED});s.load(function e(){p("Created new ContentItem for image");a.set("data",s);a.syncUI()})},imageContentModelAfterFilenameChange:function(e){p("imageContentModel.after afterFilenameChange");var t=this.get("dialog");if(!t)return;var a=t.getField("filename");if(!a||!a.getValue)return;if(a.getValue()===e.prevVal||!a.getValue()){a.set("data",e.newVal);a.syncUI()}},getDialogData:function(){var e=this.get("model").toJSON();var t=e.linkTo;S.Lang.isString(t)&&(e.clickThrough={url:t,newWindow:e.newwindow});e.image=new S.Squarespace.Models.ContentItem({inDialog:true,id:e.imageId});e.filename=this.get("imageContentModel").getImageContentItemField("filename");return e},sanitizeDialogData:function(e){var t=this.getDialogData();if(e.lightbox){e.linkTo="";e.newwindow=false}else if(t.linkTo){e.linkTo=t.linkTo;e.newwindow=t.newwindow}else{e.linkTo="";e.newwindow=false}S.Lang.isValue(e.image)?e.imageId=e.image.get("id"):e.imageId=null;return{linkTo:e.linkTo,newwindow:e.newwindow,imageLink:e.imageLink,buttonText:e.buttonText,lightbox:e.lightbox,lightboxTheme:e.lightboxTheme,mapping:e.mapping,layout:e.layout,stretch:e.stretch,filename:e.filename,aspectRatio:e.aspectRatio,designLayout:e.designLayout,imagePosition:e.imagePosition,combinationAnimation:e.combinationAnimation,individualImageAnimation:e.individualImageAnimation,individualTextAnimation:e.individualTextAnimation}},_syncContentImage:function e(){p("_syncContentImage");var t=this.get("dialog");var a=t.getData();var i=null;var s=a.image;if(S.Lang.isValue(s)){i=s.get("id");var n=this.get("id");s.detach(n+"|*");s.after(n+"|mediaProcessingStateChange",function(e){p("imageContentItem.after mediaProcessingStateChange",{newState:e.newVal});this.get("imageContentModel").applyAttrsFromContentItem(s);e.newVal!==S.Squarespace.MediaProcessingState.READY&&this.get("imageContentWidget").syncUI()},this);s.after(n+"|assetUrlChange",function e(t){p("imageContentItem.after assetUrlChange",{newUrl:t.newVal});t.prevVal&&this.get("imageContentModel").set("aspectRatio",null,{silent:true});this.get("imageContentModel").applyAttrsFromContentItem(s);this.get("imageContentWidget").syncUI();this.get("imageContentWidget").contentEditor.set("editing",S.Lang.isValue(this.get("imageContentWidget").imgNode))},this);s.after(n+"|mediaFocalPointChange",function(e){p("imageContentItem.after mediaFocalPointChange",{newFocalPoint:e.newVal});this.get("imageContentModel").set("focalPoint",e.newVal)},this)}this.get("imageContentModel").setAttrs({imageId:i})},toggleLinkEditorVisibility:function(e){var t="sqs-select-hidden";var a=".cc-link-editor-image-block-label";var i=".cc-link-editor-image-block";var s=document.querySelector(i);var n=document.querySelector(a);if(e){n&&n.classList.remove(t);s&&s.classList.remove(t)}else{n&&n.classList.add(t);s&&s.classList.add(t)}},getLinkEditorProps:function(){return{zIndex:3e5,isDark:true,flush:true,className:i.NONINTERACTIVE_CLASSNAME,modalclassName:i.NONINTERACTIVE_CLASSNAME,pageDropdownClassName:i.NONINTERACTIVE_CLASSNAME,onChange:function(e){var t=this.get("model");var a=this.get("dialog");t.setAttrs({linkTo:e.url,newwindow:e.newWindow});a.getField("clickThrough").set("isDirty",true)}.bind(this),value:function(){var e=this.getDialogData();return{url:e.linkTo,newWindow:e.newwindow}}.bind(this)}},_syncOptionalFields:function e(){p("_syncOptionalFields");var t=this.get("dialog");var a=t.getField("lightbox");var i=!!(a&&a.get("data"));t.getField("lightboxTheme").set("visible",i);this.toggleLinkEditorVisibility(!i);var s=t.getField("imageLink");var n=s?s.get("data"):null;var r=t.getField("designLayout");var o=r?r.get("data"):null;var l=t.getField("combinationAnimation");var c=t.getField("individualImageAnimation");var u=t.getField("individualTextAnimation");var d=l&&"custom"===l.get("data");t.getField("imagePosition").set("visible",false);if(r&&"inline"!==o){t.getField("lightbox").setAttrs({visible:false,data:false});t.getField("lightboxTheme").set("visible",false);t.getField("layout").set("visible",false);t.getField("stretch").set("visible",false);t.getField("imageLink").set("visible",true);if("button"===n){this.toggleLinkEditorVisibility(true);t.getField("buttonText").set("visible",true)}else if("image"===n){this.toggleLinkEditorVisibility(true);t.getField("buttonText").set("visible",false)}else{this.toggleLinkEditorVisibility(false);t.getField("buttonText").set("visible",false)}}else{t.getField("lightbox").set("visible",true);t.getField("layout").set("visible",true);t.getField("stretch").set("visible",true);t.getField("imageLink").set("visible",false);t.getField("buttonText").set("visible",false)}["card","overlap","collage"].includes(o)&&t.getField("imagePosition").set("visible",true);c&&c.set("visible",d);u&&u.set("visible",d)},_prepareAnimationTrackingData:function(){var e=this.get("model");var t=this.get("dialog");var a=e?e.get("designLayout"):null;var i=e?e.layout.get("collectionId"):null;var s=t.getField("combinationAnimation").get("data");var n=t.getField("individualImageAnimation").get("data");var r=t.getField("individualTextAnimation").get("data");var o={imageBlockLayout:a,collectionId:i,combinationAnimationSelection:s,individualImageAnimationSelection:n,individualTextAnimationSelection:r};l.userSelectImageAnimationOverride(s);return o},save:function e(t,a,i){this._syncContentImage();this.trackAnimationFieldsSave({eventName:"image_animation_selection_save",dataInitializer:this._prepareAnimationTrackingData});s.superclass.save.apply(this,arguments)},_getDialogConfig:function(){var e={title:_("Image"),initialDataByReference:true,width:400,height:470,tabs:[{title:_("Image"),icon:"/universal/images-v6/icons/icon-image-16-light.png"}]};var t={ctor:S.Squarespace.DialogFields.FileImageLicensed,transientStore:true,height:168,contentType:"image",name:"image",autoSaveFocalPoint:true,uploadUrl:"/api/uploads/images",imageDestination:A.IMAGE_BLOCK};var a={ctor:S.Squarespace.DialogFields.Select,config:{name:"layout",className:"thin dark",defaultValue:"caption-below",options:[{value:"caption-hidden",label:_("Do Not Display Caption")},{value:"caption-below",label:_("Caption Below")},{value:"caption-overlay",label:_("Caption Overlay")},{value:"caption-overlay-hover",label:_("Caption Overlay on Hover")}]}};var i={ctor:S.Squarespace.DialogFields.Text,config:{name:"filename",strings:{title:_("Filename (Optional)"),placeholder:_("image.jpg")},className:"thin dark"}};var s=E.isSevenOne()&&w.isFeatureEnabled(T.SECTION_ADMIN);var n={ctor:S.Squarespace.DialogFields.Text,config:{name:"mapping",strings:{title:_("Semantic Mapping (Optional)"),placeholder:_("hero-image")},className:"thin dark"}};var r={ctor:S.Squarespace.DialogFields.Check,config:{name:"stretch",strings:{title:_("Stretch"),description:_("Stretch the image to span the container.")}}};var o={ctor:S.Squarespace.DialogFields.Check,config:{name:"lightbox",strings:{title:_("Enable Lightbox"),description:_("Clicking on the image will enlarge the image into a lightbox.")}}};var l={ctor:S.Squarespace.DialogFields.Select,config:{name:"lightboxTheme","strings.title":_("Lightbox Theme"),className:"thin dark",defaultValue:"dark",options:[{value:"dark",label:_("Dark Overlay")},{value:"light",label:_("Light Overlay")}]}};var c={ctor:S.Squarespace.DialogFields.Select,config:{name:"imageLink","strings.title":_("Image Link"),defaultValue:"none",options:[{value:"none",label:_("None")},{value:"image",label:_("On Image")},{value:"button",label:_("Button")}]}};var u=E.isSevenOne();var d={ctor:S.Squarespace.DialogFields.Select,config:{name:"combinationAnimation","strings.title":_("Animate Image Block"),className:"thin dark",options:y([u&&C.SITE_DEFAULT,u&&C.NO_ANIMATION,!u&&C.NONE,C.FADE_IN,C.SLIDE_UP,C.HORIZONTAL_CLIP,C.VERTICAL_CLIP,C.TILT_UP,C.TILT_DOWN,C.FOCUS_IN,C.COLLIDE,C.REVEAL,C.CUSTOM])}};var p={ctor:S.Squarespace.DialogFields.Select,className:"image-editor-web-individual-image-animation",config:{name:"individualImageAnimation","strings.title":_("Animate Image"),options:y([C.NONE,C.FADE_IN,C.SLIDE_UP,C.SLIDE_DOWN,C.SLIDE_FROM_LEFT,C.SLIDE_FROM_RIGHT,C.HORIZONTAL_CLIP,C.VERTICAL_CLIP,C.TILT_UP,C.TILT_DOWN,C.FOCUS_IN])}};var h={ctor:S.Squarespace.DialogFields.Select,className:"image-editor-web-individual-text-animation",config:{name:"individualTextAnimation","strings.title":_("Animate Image Text"),options:y([C.NONE,C.FADE_IN,C.SLIDE_UP,C.SLIDE_DOWN,C.SLIDE_FROM_LEFT,C.SLIDE_FROM_RIGHT,C.FOCUS_IN])}};var g={ctor:S.Squarespace.DialogFields.Text,config:{name:"buttonText",strings:{title:_("Button Text"),placeholder:_("Click Here")},className:"thin dark"}};var m={ctor:S.Squarespace.DialogFields.HTML,config:{name:"clickThroughLabel",className:"cc-link-editor-image-block-label",content:"<strong>"+_("Clickthrough URL")+"</strong>"}};var f={ctor:S.Squarespace.DialogFields.ReactDialogField,config:{component:I,name:"clickThrough","strings.title":_("Clickthrough URL"),className:"cc-link-editor-image-block",props:this.getLinkEditorProps.bind(this),isDirty:false}};var v={ctor:S.Squarespace.DialogFields.MultiOption,className:"image-editor-web-design-layout",config:{name:"designLayout",defaultValue:"inline",columns:3,options:[{title:_("Inline"),value:"inline",icon:"inline"},{title:_("Poster"),value:"poster",icon:"poster"},{title:_("Card"),value:"card",icon:"card"},{title:_("Overlap"),value:"overlap",icon:"overlap"},{title:_("Collage"),value:"collage",icon:"collage"},{title:_("Stack"),value:"stack",icon:"stack"}]}};var b={ctor:S.Squarespace.DialogFields.Select,config:{name:"imagePosition",className:"thin dark",defaultValue:"left",options:[{value:"left",label:_("Left")},{value:"right",label:_("Right")}],strings:{title:_("Image Position")}}};e.tabs=[{tabTitle:_("Content"),fields:[t,i,s?n:null]},{tabTitle:_("Design"),fields:[v,b,a,r,o,l,c,g,m,f]}];e.tabs.push({tabTitle:_("Animations"),fields:[d,p,h]});return e},destructor:function(){var e=this.get("dialog").getData();e.image&&e.image.detach(this.get("id")+"|*")}},{CSS_PREFIX:"sqs-image-editor-web-dialog",ATTRS:{dialogConfig:{valueFn:"_getDialogConfig"},imageContentModel:{},imageContentWidget:{}}})},"1.0",{requires:["base","squarespace-dialog-check","squarespace-dialog-file-image","squarespace-dialog-file-image-licensed","squarespace-dialog-multi-option","squarespace-dialog-select","squarespace-dialog-slider","squarespace-dialog-text","squarespace-dialog-wysiwyg","squarespace-model-editor","squarespace-block-mixin-block-animation-analytics","squarespace-dialog-html","squarespace-react-dialog-field"]})},"./src/main/webapp/universal/scripts-v6/block/image-editor-web.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-block-image-editor",function(e){var a=e.namespace("Squarespace.Block.Editor").Image=e.Base.create("image-block-editor-dialog-web",e.Squarespace.Block.Editor.ImageBase,[e.Squarespace.Block.Editor.ImageResizeMixin],{syncUI:function(){if(!this.get("host").get("boundingBox").getDOMNode())return;this._syncResizable()},_getModelEditor:function(){return e.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Image")},_initConfigDialog:function(){var e=a.superclass._initConfigDialog.call(this);var t=this.get("host").contentImage;e.setAttrs({imageContentModel:t.get("model"),imageContentWidget:t});return e}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Image")}}})},"1.0",{requires:["base","squarespace-block-image-editor-base","squarespace-block-image-editor-web-dialog","squarespace-damask-context-globals","squarespace-image-editor-resize-mixin"]})},"./src/main/webapp/universal/scripts-v6/block/image.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/universal/src/apps/App/shared/utils/BlockEditorUtils.js");var n=a("./src/main/webapp/universal/src/shared/utils/Loggers.ts");var r=n.createLogger("block/image","orange",false);YUI.add("squarespace-block-image",function(n){n.namespace("Squarespace.Block");var t=n.Base.create("image-block-schema-editor-resize",n.Squarespace.Block.Editor.Schema,[n.Squarespace.Block.Editor.ImageResizeMixin],{},{NS:"blockEditor",ATTRS:{editingOverlay:{valueFn:function(){return null}}}});var a=n.Squarespace.Block.Image=n.Base.create("block-image",n.Squarespace.Block.ImageBase,[],{bindUI:function(){a.superclass.bindUI.call(this);this.get("model").after("imageIdChange",this.syncContentImage,this);this.get("model").after("lightboxChange",this.syncLightbox,this)},syncUI:function e(){a.superclass.syncUI.call(this);this.syncLightbox()},syncContentImage:function e(t){var a=t.newVal;var i=this.contentImage.get("model");var s=i.get("imageId");if(s!==a){r("syncContentImage (from model imageIdChange)",{nextImageId:a,prevImageId:s});i.reset();i.set("imageId",a)}},syncLightbox:function(){this.get("contentBox").unplug(n.Squarespace.Lightbox2Plug.NS);var e=this.get("model");if(this.get("editable")||!e.get("lightbox"))return;var t=e.get("description.html")||"";var a=this.contentImage.get("model");var i=n.Node.create("<img/>");i.setAttribute("data-src",a.get("baseAssetUrl"));i.setAttribute("data-image-focal-point",a.get("focalPoint"));var s=a.get("dimensions");n.Lang.isObject(s)&&i.setAttribute("data-image-dimensions",s.width+"x"+s.height);this.get("contentBox").plug(n.Squarespace.Lightbox2Plug,{lightboxOptions:{theme:e.get("lightboxTheme"),content:i,meta:t}})}},{ATTRS:{editor:{valueFn:function(){var e=s.isBlockEditorEnabled(this.get("blockTypeName"))?t:n.Squarespace.Block.Editor.Image;return e}},imageContentEditor:{valueFn:function(){return n.Squarespace.Content.Image.Editor}},addButtonText:{value:i("Add Button Text")}}})},"2.0",{requires:["base","squarespace-block-image-base","squarespace-block-image-editor","squarespace-block-schema-editor","squarespace-block-content-image-editor","squarespace-image-editor-resize-mixin"]})},"./src/main/webapp/universal/scripts-v6/block/instagram-editor.js":function(e,t,a){var c=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var i=a("./src/main/webapp/frontend/packages/enums/CollectionTypes.js");var s=a("./src/main/webapp/frontend/packages/enums/ExternalServiceProviders.js");var u=a("./src/main/webapp/universal/src/shared/constants/HelpLinks.js");YUI.add("squarespace-block-instagram-editor",function(o){o.namespace("Squarespace.Block.Editor");var t=o.Squarespace.Block.Editor.Instagram=o.Base.create("instagram-block-editor-dialog",o.Squarespace.Block.Editor.Gallery,[],{_getModelEditor:function(){return o.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Instagram")},_initConfigDialog:function(){var e=this._model.layout.get("contentItemId");o.Lang.isValue(e)||(e=this._model.layout.get("parentItemId"));this._model.setAttrs({pageCollectionId:this._model.layout.get("collectionId"),containingItemId:e});return t.superclass._initConfigDialog.apply(this,arguments)},_getServiceId:function(){return s.INSTAGRAM}},{NS:"blockEditor",ATTRS:{blockName:{value:c("Instagram")}}});o.namespace("Squarespace.Block.ModelEditorDialog");var l=o.Squarespace.Block.ModelEditorDialog.Instagram=o.Base.create("InstagramModelEditorDialog",o.Squarespace.Block.ModelEditorDialog.SearchGallery,[],{_getServiceId:function(){return s.INSTAGRAM},_isValidAccountForSearch:function(){var e=this._getCurrentAccount();if(!e)return false;var t=e.get("oauthScopes");if(!t)return false;return o.Array.indexOf(t,"public_content")>=0},_isSocialSearchEnabled:function(){var e=this.get("model");return!!e&&!!e.get("enable-search")},_getSocialFieldNames:function(){var e=l.superclass._getSocialFieldNames.call(this);e.push("search-deprecated-warning");return e},_getDefaultDialogConfig:function(){var e=this.get("model").toJSON();var t=l.superclass._getDefaultDialogConfig.call(this);var a=t.tabs[0].fields;t.name="instagram-block-editor";a.unshift({ctor:o.Squarespace.DialogFields.WarningBanner,name:"search-deprecated-warning",config:{"strings.warningMessage":c("Instagram search results are no longer supported. To use the Instagram block, remove the search."),visible:this._isSocialVisible()}});a.unshift({ctor:o.Squarespace.DialogFields.Description,text:c('Display your own Instagram feed on your site and choose between four different layout styles in the Design tab. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:u.INSTAGRAM})});a.push({ctor:o.Squarespace.DialogFields.Text,name:"searchTerm",config:{"strings.placeholder":c("Search Instagram for…"),data:e.searchTerm,maxLength:100,className:"thin",visible:this._isSocialVisible()}});a.push({ctor:o.Squarespace.DialogFields.Button,name:"refresh",config:{"strings.text":c("Refresh"),className:"thin",visible:this._isSocialVisible()}});var i=t.tabs[1].fields[0];delete i.config.options["show-meta-only-title"];var s=c("Show Caption");i.config.options["show-meta"].title=s;i.config.options["show-meta-basic"].title=s;var n=c("Caption Position");i.config.options["meta-position"].title=n;var r=c("Show the caption only on hover");i.config.options["show-meta-on-hover"].description=r;return t}},{ATTRS:{icon:{value:"instagram"},socialAccountType:{value:s.INSTAGRAM},collectionType:{value:i.INSTAGRAM},strings:{value:{name:"Instagram",itemTypePlural:"photos",itemType:"photo"}}}})},"1.0",{requires:["base","squarespace-block-search-gallery-model-editor","squarespace-block-instagram-model","squarespace-damask-context-globals","squarespace-dialog-warning-banner"]})},"./src/main/webapp/universal/scripts-v6/block/instagram-model.js":function(e,t){YUI.add("squarespace-block-instagram-model",function(e){e.namespace("Squarespace.ContentModel").InstagramBlock=e.Base.create("InstagramModel",e.Squarespace.ContentModel.SummaryGalleryBlock,[],{},{})},"1.0",{requires:["base","model","squarespace-block-summary-gallery-model"]})},"./src/main/webapp/universal/scripts-v6/block/instagram.js":function(e,t,a){var i=a("./src/main/webapp/frontend/packages/enums/BlockType.js");var s=a("./src/main/webapp/universal/src/apps/App/shared/utils/BlockEditorUtils.js");YUI.add("squarespace-block-instagram",function(e){e.namespace("Squarespace.Block");e.Squarespace.Block.Instagram=e.Base.create("block-instagram",e.Squarespace.Block.SummaryGallery,[e.Squarespace.Block.PremiumBlockMixin],{},{CSS_PREFIX:"sqs-block-instagram",MODEL:e.Squarespace.ContentModel.InstagramBlock,ATTRS:{editor:{valueFn:function(){return s.isBlockEditorEnabled(this.get("blockTypeName"))?e.Squarespace.Block.Editor.Schema:e.Squarespace.Block.Editor.Instagram}},type:{value:i.INSTAGRAM}}})},"1.0",{requires:["base","squarespace-block-summary-gallery","squarespace-block-instagram-editor","squarespace-block-instagram-model","squarespace-block-collection-link-editor","squarespace-block-schema-editor","squarespace-premium-block-mixin"]})},"./src/main/webapp/universal/scripts-v6/block/link-editor.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-block-link-editor",function(e){var t={width:335,tabs:[{title:i("Edit External Link"),icon:"/universal/images-v6/icons/icon-link-16-light-solid.png",scroll:true,fields:[{ctor:e.Squarespace.DialogFields.Description,config:{text:i("Below, enter the title and the URL of the link you would like to add.")}},{type:"text",name:"linkTitle",submitOnEnter:true,title:i("Link Title"),titleStyle:"inline",style:"title"},{type:"text",name:"linkTarget",submitOnEnter:true,title:i("http://…"),titleStyle:"inline",style:"normal"},{ctor:e.Squarespace.DialogFields.Check,config:{type:"check",name:"newWindow",title:i("Open in New Window"),description:i("When clicked, open this link in a new window.")}}]}]};e.namespace("Squarespace.Block.Editor").Link=e.Base.create("link-block-editor-dialog",e.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return e.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Link")}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Link")}}});e.namespace("Squarespace.Block.ModelEditorDialog").Link=e.Base.create("block-link-editor",e.Squarespace.ModelEditorDialog,[],{_sanitizeURL:function(e){if(null===e.match(/^[(?!\/\/)(http:\/\/|https:\/\/|\/|mailto:)].*/i))return"http://"+e;return e},sanitizeDialogData:function(e){e.linkTarget&&e.linkTarget.length>4&&(e.linkTarget=this._sanitizeURL(e.linkTarget));return e}},{ATTRS:{dialogConfig:{valueFn:function(){return t}}}})},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-damask-context-globals","squarespace-dialog-check","squarespace-dialog-description"]})},"./src/main/webapp/universal/scripts-v6/block/link.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/apps/App/shared/utils/BlockEditorUtils.js");YUI.add("squarespace-block-link",function(e){var t={linkTitle:"",linkTarget:"",newWindow:false};e.namespace("Squarespace.Block").Link=e.Base.create("block-link",e.SQS.LayoutEngine.Block.ModelSyncBase,[e.Squarespace.Block.PremiumBlockMixin],{},{CSS_PREFIX:"sqs-block-link",ATTRS:{editor:{valueFn:function(){return i.isBlockEditorEnabled(this.get("blockTypeName"))?e.Squarespace.Block.Editor.Schema:e.Squarespace.Block.Editor.Link}},defaultContentModel:{value:t}}})},"1.0",{requires:["@sqs/layout-engine/block-model-sync-base","squarespace-block-link-editor","squarespace-block-collection-link-editor","squarespace-block-schema-editor","squarespace-premium-block-mixin"]})},"./src/main/webapp/universal/scripts-v6/block/map-editor.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/universal/src/shared/constants/HelpLinks.js");var n=a("./src/main/webapp/universal/src/shared/utils/GoogleMapsUtils.js");var r="https://maps.google.com/help/terms_maps.html";var o="https://policies.google.com/privacy";YUI.add("squarespace-block-map-editor",function(e){var t={width:375,height:460,title:i("Map"),tabs:[{tabTitle:i("Address"),icon:"/universal/images-v6/icons/icon-map-16-light.png",fields:[{ctor:e.Squarespace.DialogFields.Description,config:{text:i('Enter an address to drop a pin on this map. To resize the map, drag the bottom handle.<br><a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:s.MAP_EDITOR})}},{ctor:e.Squarespace.DialogFields.Map,config:{anchorMap:true,height:150,countHeight:true,name:"location",title:i("Location"),titleStyle:"inline",googleTrackingContext:{productPage:"block-editor",productSection:"main"}}},{ctor:e.Squarespace.DialogFields.Description,config:{text:i('Your use of Google Maps is subject to the Google Maps/Google Earth <a href="{termsOfService}" target="_blank">Additional Terms of Service</a> and the Google <a href="{privacyPolicy}" target="_blank">Privacy Policy</a>.',{termsOfService:r,privacyPolicy:o})}}]},{tabTitle:i("Design"),fields:[{ctor:e.Squarespace.DialogFields.Select,config:{className:"thin dark",name:"style",numeric:true,defaultValue:n.Styles.GRAYSCALE,options:[{value:n.Styles.ORIGINAL,label:i("Original")},{value:n.Styles.GRAYSCALE,label:i("Grayscale")},{value:n.Styles.SATELLITE,label:i("Satellite")},{value:n.Styles.MINIMAL_LIGHT,label:i("Minimal Light")},{value:n.Styles.MINIMAL_DARK,label:i("Minimal Dark")},{value:n.Styles.MINIMAL_BLUE,label:i("Minimal Blue")}]}},{ctor:e.Squarespace.DialogFields.Check,config:{"strings.title":i("Show Labels"),name:"labels",defaultValue:true}},{ctor:e.Squarespace.DialogFields.Check,config:{"strings.title":i("Show Terrain"),name:"terrain",defaultValue:false}},{ctor:e.Squarespace.DialogFields.Check,config:{"strings.title":i("Show Controls"),name:"controls",defaultValue:false}}]}]};e.namespace("Squarespace.Block.Editor");e.Squarespace.Block.Editor.Map=e.Base.create("block-map-editor",e.Squarespace.Block.Editor.Dialog,[],{initializer:function(){this.after("editingChange",this._onMapEditingChange,this);this.afterHostEvent("markerChange",this._sendMarkerEvent,this)},_getModelEditor:function(){return e.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Map")},_sendMarkerEvent:function(){e.one(this.get("mapNode")).fire("marker-created")},_onMapEditingChange:function(e){e.newVal?this._startEditing():this._stopEditing()},afterLayoutDrag:function(){this.get("host").fire("resized")},_startEditing:function(){var e=this.get("mapView");e&&n.updateUiOptions(e,{draggable:true,scrollwheel:true,disableDefaultUI:false,markerDraggable:true,linkOnClick:false})},_stopEditing:function(){var e=this.get("mapView");e&&n.updateUiOptions(e,{draggable:false,scrollwheel:false,disableDefaultUI:true,markerDraggable:false,linkOnClick:true})}},{NS:"blockEditor",ATTRS:{resizable:{value:true},resizeNode:{valueFn:function(){return this.get("host").get("boundingBox")}},dialogEditorAnchorNode:{getter:function(){return e.one(this.get("host").get("mapNode"))}},map:{getter:function(e){return this.get("mapNode").__map}},mapNode:{valueFn:function(){return this.get("host").get("mapNode")}},blockName:{value:i("Map")}}});e.namespace("Squarespace.Block.ModelEditorDialog");e.Squarespace.Block.ModelEditorDialog.Map=e.Base.create("block-map-model-editor",e.Squarespace.ModelEditorDialog,[],{initializer:function(){this.get("dialog").on("ready",function(){this._bindMapStyleChange();this._toggleTerrainField()},this)},destructor:function(){n.destroyUpdater(this.get("mapView"))},sanitizeDialogData:function(e){delete e.aspectRatio;this.get("model").get("aspectRatio")&&delete e.vSize;return e},_bindMapStyleChange:function(){var e=this.get("dialog");e.getField("style").after("dataChange",this._updateMapStyle,this);e.getField("style").after("dataChange",this._toggleTerrainField,this);e.getField("labels").after("dataChange",this._updateMapStyle,this);e.getField("terrain").after("dataChange",this._updateMapStyle,this);e.getField("controls").after("dataChange",this._updateMapStyle,this)},_toggleTerrainField:function(){var e=this.get("dialog");var t=e.getField("style").get("data");var a=e.getField("terrain");n.getStyleById(t).satellite?a.hide():a.show()},_updateMapStyle:function(){var e=this.get("dialog");var t=this.get("dialog").fields.location._mapDisplay;var a=t.__view;n.updateUiOptions(a,{style:n.getStyleById(e.getField("style").get("data")),showLabels:e.getField("labels").get("data"),showTerrain:e.getField("terrain").get("data"),showControls:e.getField("controls").get("data")})}},{ATTRS:{dialogConfig:{valueFn:function(){return t}}}})},"1.0",{requires:["squarespace-block-editor-dialog","squarespace-damask-context-globals","squarespace-dialog-description","squarespace-dialog-map","squarespace-model-editor"]})},"./src/main/webapp/universal/scripts-v6/block/map.js":function(e,t,a){var i=a("./common/temp/node_modules/lodash/debounce.js");var o=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/universal/src/shared/utils/GoogleMapsUtils.js");var l=a("./src/main/webapp/universal/src/shared/utils/analytics/trackInternal.ts");var n=a("./src/main/webapp/universal/src/shared/i18n/resolvedLocales.ts");var r=a("./common/temp/node_modules/@sqs/site-rendering/Maps/index.js");var c=a("./src/main/webapp/universal/src/apps/App/shared/utils/BlockEditorUtils.js");var u=r.MapView;var d=r.loadGoogleMapsApi;var p=window.atob("QUl6YVN5QkxmSzJJUWtNZElfOG9oN2lGSjk5czNaRU5Vd3hNTnVz");var h=60;YUI.add("squarespace-block-map",function(r){var t={location:{mapLat:40.7207559,mapLng:-74.0007613,mapZoom:12},vSize:12,style:s.Styles.GRAYSCALE,labels:true,terrain:false,controls:false};if(Static.SQUARESPACE_CONTEXT){var e=Static.SQUARESPACE_CONTEXT.website;e&&e.location&&(t.location=r.merge(t.location,e.location))}r.namespace("Squarespace.Block");r.Squarespace.Block.Map=r.Base.create("block-map",r.SQS.LayoutEngine.Block.ModelSyncBase,[r.SQS.LayoutEngine.Block.MixinAspectRatio,r.Squarespace.Block.PremiumBlockMixin],{initializer:function(e){this._mapHolder=r.Node.create("<div class='sqs-map-wrapper'>");this.get("contentBox").append(this._mapHolder);this.set("mapNode",this._mapHolder.getDOMNode());this.after("resized",this._onResize,this);e.model&&this._isMapDataBad(e.model.location)&&this._restoreBadData()},destructor:function(){this.updateMapPosition.flush();if(this.queuedRender){this.queuedRender.flush();this.queuedRender=null}},renderUI:function(){this._renderBlock()},_onResize:function(){if(this.queuedRender)return;try{var e=this.get("mapView");r.Lang.isValue(e)&&e.redraw()}catch(e){console.log("google does not exist for map resizing")}},_renderBlock:function(){if(this.queuedRender)return;if(!this.get("rendered")){this.after("renderedChange",this._renderBlock,this);return}if(this.get("mapView")){this.updateMapPosition();this.fire("widget:contentUpdate")}else{var t=this._getViewData();var a=n.setResolvedWebsiteLocaleFromContext();var i=this._getStackFinished();this.queuedRender=r.later(h,this,function e(){this.updateMapPosition.flush();l("google_maps_map_load_on_site");u.createView(t.ui,t.location,this._mapHolder.getDOMNode(),a).then(r.bind(function(e){this.set("mapView",e);this._mapHolder.__view=e;this._mapHolder.fire("map-ready");this.fire("widget:contentUpdate");this.queuedRender=null;i()},this),function e(){console.log("Could not load Maps")}).catch(function(e){console.error(e)})})}},updateMapPosition:i(function(){var e=this.get("model").toJSON();var t=e.location;var a=this.get("mapView");this._didMapCenterChange()&&a.updateCenter(t.mapLat,t.mapLng);a.marker&&this._didMarkerPositionChange()&&a.updateMarker(t.markerLat,t.markerLng);r.Lang.isValue(t.mapZoom)&&a.setZoom(t.mapZoom);a.updateUIOptions(this._getViewData().ui)},h),_didMapCenterChange:function(){var e=this.get("mapView").getCenter();var t=this.get("model").toJSON().location;return e.lat!==t.mapLat||e.lng!==t.mapLng},_didMarkerPositionChange:function(){var e=this.get("mapView").getMarkerPosition();var t=this.get("model").toJSON().location;return e.lat!==t.markerLat||e.lng!==t.markerLng},_getSearchableAddress:function(e){var t=[];e.addressLine1&&t.push(e.addressLine1);e.addressLine2&&t.push(e.addressLine2);e.addressTitle&&!t.length&&t.unshift(e.addressTitle);e.addressCountry&&t.push(e.addressCountry);if(!t.length)return"";return t.join(", ")},_isMapDataBad:function(e){return!e||!r.Lang.isValue(e.mapLat)||!r.Lang.isValue(e.mapLng)||!r.Lang.isValue(e.mapZoom)},_restoreBadData:function(){var i={location:{}};var s=i.location;var e=this.get("model").toJSON().location;var n=this._getSearchableAddress(e);if(!e||!n){s=t.location;this.get("model").setAttrs(i);return}r.Lang.isValue(e.mapZoom)||(s.mapZoom=t.location.mapZoom);if(r.Lang.isValue(e.markerLat)&&r.Lang.isValue(e.markerLng)){s.markerLat=s.mapLat;s.markerLng=s.mapLng;this.get("model").setAttrs(i);return}l("google_maps_map_api_load_on_site");d("en-US",p).then(r.bind(function(e){var t=new e.Geocoder;var a={address:n};l("google_maps_map_api_geocode_on_site");t.geocode(a,r.bind(function(e,t){if(t===r.config.win.google.maps.GeocoderStatus.OK){var a=e[0].geometry.location;s.mapLat=a.lat();s.mapLng=a.lng();this.get("model").setAttrs(i)}else new r.Squarespace.Widgets.Alert({"strings.title":o("Lookup Failed"),"strings.message":o("Address lookup was not successful: {geocodeResponseStatus}",{geocodeResponseStatus:t})})}))},this))},_getViewData:function(){return s.mapModelToViewConfig(this.get("model").toJSON())}},{CSS_PREFIX:"sqs-block-map",ATTRS:{editor:{valueFn:function(){return c.isBlockEditorEnabled(this.get("blockTypeName"))?r.Squarespace.Block.Editor.Schema:r.Squarespace.Block.Editor.Map}},defaultContentModel:{value:t},mapNode:{valueFn:function(){return this.get("contentBox").getDOMNode()}},mapView:{value:null,validator:r.Squarespace.AttrValidators.isNullOrInstanceOf(u)}}})},"1.0",{requires:["@sqs/layout-engine/block-model-sync-base","@sqs/layout-engine/block-mixin-aspect-ratio","squarespace-block-map-editor","squarespace-widgets-alert","squarespace-premium-block-mixin"]})},"./src/main/webapp/universal/scripts-v6/block/markdown-editor.js":function(e,t,a){var c=a("./common/temp/node_modules/@sqs/styles/variables/baseDamask.js").GRID_PX;var u=a("./common/temp/node_modules/@sqs/utils/string/isBlankWithoutTags.js");var d=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var p=a("./src/main/webapp/universal/src/shared/constants/HelpLinks.js");YUI.add("squarespace-block-markdown-editor",function(i){var e=["p","ul","ol","blockquote","h1","h2","h3","h4","h5","h6"];var t='<div class="sqs-placeholder">'+d("Double-click to edit…")+"</div>";i.namespace("Squarespace.Block.Editor");i.Squarespace.Block.Editor.Markdown=i.Base.create("markdown-block-editor-dialog",i.Squarespace.Block.Editor.Code,[i.SQS.LayoutEngine.Block.MixinSplitable,i.SQS.LayoutEngine.Block.MixinCoalesceable],{initializer:function(){this.placeholder=i.Node.create(t);this._bb.appendChild(this.placeholder);this.on("editingChange",this._togglePlaceholder,this);this._togglePlaceholder();"markdown"!==this._model.get("wysiwyg").mode&&(this._model.get("wysiwyg").mode="markdown")},destructor:function(){this.placeholder.remove(true);this.placeholder=null},insertContentIntoModel:function(e){var t=new RegExp(' id="yui[^"]+"',"g");var a=e.replace(t,"");this._model.get("wysiwyg").source=i.Squarespace.Lang.markdownFromHTML(a);this._model.set("html",a);this._togglePlaceholder()},_togglePlaceholder:function(e){var t=e||{};var a=false;u(this._model.get("html"))&&!t.newVal&&(a=true);a?this.placeholder.show():this.placeholder.hide()},_isCoalesceable:function(e){var t=i.Widget.getByNode(e);return!t.get("model").get("floatDir")&&e.one(".sqs-block-content").get("text").length>0},getBlockLevelElementsForDropZone:function(){var e=this.get("selectorsForDropZone");var t=this._cb.get("children").filter(e);return t},_getModelEditor:function(){return i.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Markdown")}},{NS:"blockEditor",ATTRS:{blockName:{value:d("Markdown")},selectorsForInsertPoints:{valueFn:function(){return e.join(",")}},selectorsForDropZone:{valueFn:function(){return e.join(",")}}}});var a=575;var s=660;var n=1.5*c;var r=a-2*n;var o=s-5*c;var l={width:a,height:s,forcePosition:"fixed",tabs:[{title:d("Markdown"),icon:"/universal/images-v6/icons/icon-code-16-light.png",fields:[{type:"description",text:'<a href="'+p.MARKDOWN_CHEAT_SHEET+'" target="_blank">'+d("Syntax Cheatsheet")+"</a>"},{type:"wysiwyg",height:o,width:r,countHeight:true,name:"wysiwyg",titleStyle:"inline",engine:"markdown",menuConfig:"markdown",markEmbeddedHTML:true}]}]};i.namespace("Squarespace.Block.ModelEditorDialog");i.Squarespace.Block.ModelEditorDialog.Markdown=i.Base.create("block-markdown-editor",i.Squarespace.Block.ModelEditorDialog.Code,[],{initializer:function(){this.updateWysiwygHeightEvent=i.Do.after(this._updateWysiwygHeight,this.get("dialog"),"moveIntoView",this)},_updateWysiwygHeight:function(){var e=this.get("dialog");var t=e.getField("wysiwyg");if(!t)return;var a=e.getBodyHeight()-e.bodyHeight;var i=t.config.height;if(a>0){var s=30+i-a;t.containerHeight=s;t.editor.set("height",s+"px")}},destructor:function(){this.updateWysiwygHeightEvent.detach()}},{ATTRS:{dialogConfig:{valueFn:function(){return l}}}})},"1.0",{requires:["base","@sqs/layout-engine/block-mixin-coalesceable","@sqs/layout-engine/block-mixin-splitable","squarespace-block-code-editor","squarespace-damask-context-globals","squarespace-markdown"]})},"./src/main/webapp/universal/scripts-v6/block/markdown.js":function(e,t,a){var i=a("./common/temp/node_modules/@sqs/cookie-cutter/index.js");var s=a("./src/main/webapp/universal/src/shared/constants/Constants.js");var n=a("./src/main/webapp/universal/src/apps/App/shared/utils/BlockEditorUtils.js");YUI.add("squarespace-block-markdown",function(e){var t=e.namespace("Squarespace.Block").Markdown=e.Base.create("block-markdown",e.SQS.LayoutEngine.Block.Markdown,[e.Squarespace.Block.PremiumBlockMixin],{syncUI:function(){if(i.get(s.DISABLE_USER_SCRIPTS_COOKIE)){this.get("contentBox").empty();this.get("contentBox").setHTML('<div class="sqs-state-message">Embedded Code: This block contains embedded code that has been disabled.</div>');this.fire("widget:contentUpdate");return}t.superclass.syncUI.apply(this,arguments)}},{ATTRS:{editor:{valueFn:function(){return n.isBlockEditorV2Enabled(this.get("blockTypeName"))?e.Squarespace.Block.Editor.Schema:e.Squarespace.Block.Editor.Markdown}}}})},"1.0",{requires:["base","model","squarespace-block-markdown-editor","@sqs/layout-engine/block-block-markdown","squarespace-premium-block-mixin"]})},"./src/main/webapp/universal/scripts-v6/block/member-area-editor.js":function(e,t,a){var i=a("./src/main/webapp/frontend/packages/enums/Flag.js");var s=a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts");var n=a("./src/main/webapp/universal/src/apps/App/shared/utils/MemberAreasAPI.js");var r=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var o=a("./src/main/webapp/universal/src/shared/constants/HelpLinks.js");YUI.add("squarespace-block-member-area-editor",function(t){t.namespace("Squarespace.Block.Editor.MemberArea");t.Squarespace.Block.Editor.MemberArea=t.Base.create("member-area-block-editor-dialog",t.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return t.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.MemberArea")},initializer:function(){var e=this.configDialog.get("dialog");e.on("ready",this._fetchData.bind(this))},_fetchData:function(){this._renderSpinner();n.readWebsiteMemberAreas().then(function(e){if(200!==e.status){this.showError(r("Something went wrong. Please close this modal and try again."));return}this._destroySpinner();var t=e.data;var a=t.map(function(e){return{value:e.memberAreaId,label:this._sanitizeLabel(e.title)}},this);this.set("memberAreaIds",a);var i=this.configDialog.get("dialog");i.getField("memberAreaId").set("options",a);this._updateDisplayFields()}.bind(this))},_renderSpinner:function(){var e=this.configDialog.get("dialog").el.one(".body-block");this._loadingSpinner=new t.Squarespace.Spinner({color:"dark",size:"extra-large",render:e});this._loadingSpinner.addClass("member-area-editor-spinner")},_destroySpinner:function(){this._loadingSpinner&&this._loadingSpinner.destroy(true)},_sanitizeLabel:function(e){return e.replace(/\</g,"&lt;")},_updateDisplayFields:function(){var t=this._hasMemberAreas();var a=s.isFeatureEnabled(i.MEMBER_AREAS_BETA_V2)||s.isFeatureEnabled(i.MEMBER_AREAS_FEATURE);this._getEnableFeatureFields().forEach(function(e){e.set("visible",!t&&!a)});this._getEmptyStateFields().forEach(function(e){e.set("visible",!t&&a)});this._getMemberAreaFields().forEach(function(e){e.set("visible",t)})},_getEnableFeatureFields:function(){var e=this.configDialog.get("dialog");return[e.getField("enableFeatureDescription"),e.getField("enableFeatureButton")]},_getEmptyStateFields:function(){var e=this.configDialog.get("dialog");return[e.getField("addMemberAreasDescription"),e.getField("addMemberAreasButton")]},_getMemberAreaFields:function(){var e=this.configDialog.get("dialog");return[e.getField("blockDescription"),e.getField("memberAreaId"),e.getField("showTitle"),e.getField("showDescription"),e.getField("showPrice"),e.getField("showJoinButton"),e.getField("joinButtonText"),e.getField("alignment")]},_hasMemberAreas:function(){return 0!==this.get("memberAreaIds").length}},{NS:"blockEditor",ATTRS:{blockName:{value:r("Member Sign Up")}}});var e={width:420,height:460,primaryTabs:[{title:r("Member Sign Up"),icon:"/universal/images-v6/icons/icon-products-18-light-solid.png",scroll:false,fields:[{ctor:t.Squarespace.DialogFields.Description,text:r("Member Areas lets you share online content for members. This is where visitors can sign up for your Member Area. To add this block, turn on the feature in settings. {learnMoreLink}",{learnMoreLink:'<a href="#" target="_blank">'+r("Learn More")+"</a>"}),config:{name:"enableFeatureDescription",visible:false}},{ctor:t.Squarespace.DialogFields.Button,config:{name:"enableFeatureButton","strings.text":r("Go To Settings"),onClick:function(){window.location.href="/config/settings/member-areas"},visible:false}},{ctor:t.Squarespace.DialogFields.Description,text:r("This allows visitors to sign up for your member area.  To add this block, create a member area first. {learnMoreLink}",{learnMoreLink:'<a href="#" target="_blank">'+r("Learn More")+"</a>"}),config:{name:"addMemberAreasDescription",visible:false}},{ctor:t.Squarespace.DialogFields.Button,config:{name:"addMemberAreasButton","strings.text":r("Create Member Area"),onClick:function(){window.location.href="/config/pages"},visible:false}},{ctor:t.Squarespace.DialogFields.Description,text:r('Promote a member area by adding this block to your pages. To use this block, you\'ll need at least one Member Area. <a href="{kbLinkAction}" target="_blank" >Learn More</a>',{kbLinkAction:o.MEMBER_AREAS_SIGN_UP_BLOCK}),config:{name:"blockDescription",visible:false}},{ctor:t.Squarespace.DialogFields.SelectMemberArea,config:{name:"memberAreaId",options:[],visible:false}},{ctor:t.Squarespace.DialogFields.Check,config:{name:"showTitle","strings.title":r("Show Title"),visible:false}},{ctor:t.Squarespace.DialogFields.Check,config:{name:"showDescription","strings.title":r("Show Description"),visible:false}},{ctor:t.Squarespace.DialogFields.Check,config:{name:"showPrice","strings.title":r("Show Price"),visible:false}},{ctor:t.Squarespace.DialogFields.Check,config:{name:"showJoinButton","strings.title":r("Show Join Button"),visible:false}},{ctor:t.Squarespace.DialogFields.Text,config:{name:"joinButtonText","strings.title":r("Button Text"),className:"thin dark",visible:false}},{ctor:t.Squarespace.DialogFields.Select,config:{visible:false,name:"alignment","strings.title":r("Alignment"),defaultValue:"left",options:[{value:"left",label:r("Left")},{value:"center",label:r("Center")},{value:"right",label:r("Right")}]}}]}]};t.namespace("Squarespace.Block.ModelEditorDialog.MemberArea");t.Squarespace.Block.ModelEditorDialog.MemberArea=t.Base.create("blockMemberAreaEditor",t.Squarespace.ModelEditorDialog,[],{},{ATTRS:{dialogConfig:{valueFn:function(){return e}},memberAreaIds:[]}})},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-damask-context-globals","squarespace-dialog-select","squarespace-dialog-text","squarespace-dialog-select-member-area","squarespace-model-editor","squarespace-spinner"]})},"./src/main/webapp/universal/scripts-v6/block/member-area-model.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-block-member-area-model",function(e){e.namespace("Squarespace.ContentModel.MemberArea");e.Squarespace.ContentModel.MemberArea=e.Base.create("MemberAreaModel",e.Model,[],{},{ATTRS:{showTitle:{value:true},showPrice:{value:true},showDescription:{value:true},showJoinButton:{value:true},joinButtonText:{value:i("Sign Up")}}})},"1.0",{requires:["base","model"]})},"./src/main/webapp/universal/scripts-v6/block/member-area.js":function(e,t,a){var i=a("./src/main/webapp/frontend/packages/enums/BlockType.js");var s=a("./src/main/webapp/universal/src/apps/App/shared/utils/BlockEditorUtils.js");YUI.add("squarespace-block-member-area",function(e){e.namespace("Squarespace.Block.MemberArea");e.Squarespace.Block.MemberArea=e.Base.create("block-member-area",e.SQS.LayoutEngine.Block.ModelSyncBase,[],{},{CSS_PREFIX:"sqs-block-member-area",MODEL:e.Squarespace.ContentModel.MemberArea,ATTRS:{editor:{valueFn:function(){return s.isBlockEditorV2Enabled(this.get("blockTypeName"))?e.Squarespace.Block.Editor.Schema:e.Squarespace.Block.Editor.MemberArea}},type:{value:i.MEMBER_AREA}}})},"1.0",{requires:["base","@sqs/layout-engine/block-model-sync-base","squarespace-block-member-area-model","squarespace-block-member-area-editor"]})},"./src/main/webapp/universal/scripts-v6/block/menu-editor.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/universal/src/shared/constants/HelpLinks.js");YUI.add("squarespace-block-menu-editor",function(t){t.namespace("Squarespace.Block.Editor").Menu=t.Base.create("menu-block-editor-dialog",t.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return t.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Menu")}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Menu")}}});var e={width:465,height:505,tabs:[{title:i("Menu"),tabTitle:i("Menu"),icon:"/universal/images-v6/icons/icon-menu-20-light-solid.png",scroll:true,fields:[{ctor:t.Squarespace.DialogFields.Description,text:i('Add your menu items, descriptions, and prices. When you follow the format patterns below, your text will transform into different menu sections. Click the <strong>Formatting Help</strong> tab for tips. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:s.MENU_EDITOR})},{ctor:t.Squarespace.DialogFields.TextArea,name:"raw",description:i('Add your menu items, descriptions, and prices. When you follow the format patterns below, your text will transform into different menu sections. Click the <strong>Formatting Help</strong> tab for tips. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:s.MENU_EDITOR}),height:440}]},{tabTitle:i("Design"),scroll:true,fields:[{ctor:t.Squarespace.DialogFields.Select,config:{"strings.title":i("Menu Style"),"strings.description":i("Choose a layout style for your menu."),name:"menuStyle",className:"thin dark",defaultValue:"simple",options:[{value:"simple",label:i("Simple (Centered)")},{value:"classic",label:i("Classic (Multi-column)")}]}},{ctor:t.Squarespace.DialogFields.Select,config:{"strings.title":i("Currency Symbol"),name:"currencySymbol","strings.description":i("Choose a currency symbol to display on your menu items."),defaultValue:"$",className:"thin dark",options:[{value:"",label:i("None")},{value:"$",label:"$"},{value:"€",label:"€"},{value:"£",label:"£"},{value:"¥",label:"¥"}]}}]},{tabTitle:i("Formatting Help"),scroll:true,fields:[{ctor:t.Squarespace.DialogFields.Description,config:{text:i("<strong>Menu Sections.</strong> Sections define groups of items on your menu. Section descriptions are optional. To create a section, type: <pre>Section\n-------\nOptional section description.</pre>")+i("<strong>Menu Items.</strong> To add an item to your menu, type in the following format. Separate multiple menu items with 2 spaces. Options can be added to an item by using the '+' format on a new line. Both prices and descriptions are optional. <pre>Title of Menu Item\nDescription of food item.\n$10\n\nAnother of Menu Item\nA different description.\n$20\n+ Option\n+ Another Option</pre>")+i("<strong>Price Variants.</strong> You can also define multiple prices for variants on your items in the following format: <pre>Wine Bottle Example\nDescription of the wine\n$9 glass / $40 bottle\n\nSalad Example\nA great, low-carb salad.\n$9 small / $15 large</pre>")+i("<strong>Multiple Menus.</strong> Menu blocks can contain multiple menus at once (lunch, dinner, etc.). Menus will be turned into tabs upon rendering. To create a menu within a block, type: <pre>Lunch\n=======\nOptional menu description.</pre>")}}]}]};t.namespace("Squarespace.Block.ModelEditorDialog").Menu=t.Base.create("block-menu-editor",t.Squarespace.ModelEditorDialog,[],{sanitizeDialogData:function(e){e&&e.raw&&(e.menus=t.Squarespace.Block.MenuParser.parse(e.raw));return e}},{ATTRS:{dialogConfig:{valueFn:function(){return e}}}})},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-block-menu-parser","squarespace-damask-context-globals"]})},"./src/main/webapp/universal/scripts-v6/block/menu-parser.js":function(e,t){YUI.add("squarespace-block-menu-parser",function(e){var g="(\\$|£|€|¥)";function n(e){if(0===e.search(g))return e.substring(1);return e}function m(e){e=e.split("/");var t=[];for(var a=0;a<e.length;++a){var i=e[a].trim().split(" ");var s={price:n(i[0].trim())};if(-1===s.price.search("[0-9]")){delete s.price;s.title=n(i.join(" ")).trim()}else if(i.length>1){i.splice(0,1);s.title=i.join(" ").trim()}t.push(s)}return t}e.namespace("Squarespace.Block.MenuParser").parse=function(e){var t=[];var a={title:null,description:null,items:[]};var i={title:null,description:null,sections:[]};var s=false;var n=false;var r=e.split("\n");for(var o=0;o<r.length;o++){var l=r[o].trim();if(!l)continue;if(0===l.indexOf("===")){if(s){i.sections.push(a);t.push(i);a={title:null,description:null,items:[]};i={title:null,description:null,sections:[]};n=false}else s=true;o-1>=0&&(i.title=r[o-1].trim());if(o+1<r.length&&r[o+1].trim().length>0){i.description=r[o+1].trim();++o}}else if(0===l.indexOf("---")){if(n){i.sections.push(a);a={title:null,description:null,items:[]}}else n=true;o-1>=0&&(a.title=r[o-1].trim());if(o+1<r.length&&r[o+1].trim().length>0){a.description=r[o+1].trim();++o}}else{if(o+1<r.length&&r[o+1].trim().length>0){var c=r[o+1].trim();if(0===c.indexOf("---")||0===c.indexOf("==="))continue}n=true;s=true;var u=l.search(g),d;if(-1!==u){var p=l.substring(0,u).trim();var h=l.substring(u);d={title:p,variants:m(h)}}else d={title:l,variants:null};if(o+1<r.length&&r[o+1].trim().length>0&&-1===r[o+1].search(g)){d.description=r[o+1].trim();++o}if(!d.variants&&o+1<r.length&&r[o+1].trim().length>0){d.variants=m(r[o+1].trim());++o}while(o+1<r.length&&r[o+1].trim().length>0&&0===r[o+1].indexOf("+")){d.options||(d.options=[]);d.options.push(r[o+1].substring(1).trim());++o}a.items.push(d)}}i.sections.push(a);t.push(i);return t}},"1.0",{requires:[]})},"./src/main/webapp/universal/scripts-v6/block/menu.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/constants/menuDemoContent.js");var s=a("./src/main/webapp/universal/src/apps/App/shared/utils/BlockEditorUtils.js");YUI.add("squarespace-block-menu",function(e){e.namespace("Squarespace.Block").Menu=e.Squarespace.Block.Menu=e.Base.create("block-menu",e.SQS.LayoutEngine.Block.ModelSyncBase,[e.Squarespace.Block.PremiumBlockMixin],{},{CSS_PREFIX:"sqs-block-menu",ATTRS:{editor:{valueFn:function(){return s.isBlockEditorV2Enabled(this.get("blockTypeName"))?e.Squarespace.Block.Editor.Schema:e.Squarespace.Block.Editor.Menu}},defaultContentModel:{value:{raw:i,menus:e.Squarespace.Block.MenuParser.parse(i),menuStyle:"classic",currencySymbol:"$"}},floatable:{value:false}}})},"1.0",{requires:["@sqs/layout-engine/block-model-sync-base","squarespace-block-menu-parser","squarespace-block-menu-editor","squarespace-premium-block-mixin"]})},"./src/main/webapp/universal/scripts-v6/block/mixin-gallery-option-sync.js":function(e,t,a){var s=a("./src/main/webapp/universal/src/shared/constants/GalleryOptions.js");var o=a("./src/main/webapp/universal/src/shared/constants/GalleryBlockConstants.js");var i=a("./common/temp/node_modules/lodash/mapValues.js");var n=a("./common/temp/node_modules/lodash/clone.js");YUI.add("squarespace-block-mixin-gallery-option-sync",function(d){d.namespace("Squarespace.Block.Mixins");d.Squarespace.Block.Mixins.Gallery=d.Base.create("GalleryManagment",d.Base,[],{_defaultGalleryOptions:function(){return i(s,function(e){return e.defaultValue})},_getGalleryOptions:function(){var e=n(s);var i=this.get("model");d.Object.each(e,function(e,t){var a=i.get(t);if(void 0!==a){e.data=a;e.defaultValue=a}else e.defaultValue=a||e.defaultValue},this);return e},syncGalleryOptions:function(e,t){var a=this.get("dialog");var i=a.getField("options");var s=this.get("model");var n={};n[e]=i.get("data")[e];if("design"===e){var r=null;"slider"===n.design&&(r=s.get("aspectRatio")||o.DEFAULT_SLIDER_ASPECT_RATIO);s.set("aspectRatio",r,{silent:true})}void 0===i.get("data")[e]?s.setAttrs(n,{silent:true}):s.setAttrs(n)},unsetVSize:function(){this.get("model").set("vSize",null)},renderGridCSS:function(e,t){var a=e.one(".sqs-gallery-container");if(d.Lang.isNull(a))return;var i=this._getDefaultContent();var s=a.get("className").split(" ");var n=d.Array.find(s,function(e){return e.startsWith("sqs-gallery-thumbnails-per-row-")});var r=t.padding;var o=t["thumbnails-per-row"];d.Lang.isValue(o)||(o=i.thumbsPerRow);d.Lang.isValue(r)||(r=i.padding);var l=".sqs-block-content#"+e.get("id");var c=e.one("#design-grid-css");var u=l+" .sqs-gallery-design-grid { margin-right: -"+r+"px; } "+l+" .sqs-gallery-design-grid .sqs-gallery-design-grid-slide .margin-wrapper { margin-right: "+r+"px; margin-bottom: "+r+"px; };";n&&a.removeClass(n);a.addClass("sqs-gallery-thumbnails-per-row-"+o);c&&c.setContent(u)},renderSlideshowCSS:function(e,t){var a=e;var i=a.one(".sqs-gallery-thumbnails");var s;if(i){s=this._getDefaultContent();d.Lang.isNumber(t["thumbnail-strip-height"])||(t["thumbnail-strip-height"]=s["thumbnail-strip-height"]);d.Lang.isNumber(t["thumbnail-strip-margin"])||(t["thumbnail-strip-margin"]=s["thumbnail-strip-margin"]);i.setStyles({marginTop:t["thumbnail-strip-margin"],height:t["thumbnail-strip-height"]});var n=i.getData("gallery");n["gallery-design"].syncUI()}}},{ATTRS:{NS:"gallerySynchronizer"}})},"1.0",{requires:["base","plugin","squarespace-dialog-gallery-options"]})},"./src/main/webapp/universal/scripts-v6/block/newsletter-editor.js":function(e,t,a){var i=a("./src/main/webapp/frontend/packages/enums/Features.js");var r=a("./src/main/webapp/frontend/packages/enums/FormBackendConnectionType.js");var n=a("./src/main/webapp/universal/src/shared/constants/HelpLinks.js");var o=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var l=a("./src/main/webapp/universal/src/shared/utils/FormDialogConfigBuilder.js");var c=a("./src/main/webapp/universal/src/shared/utils/GoogleReCaptchaAPIAuthenticated.js").isCaptchaEnabled;var s=a("./src/main/webapp/universal/src/shared/utils/Loggers.ts");var u=a("./src/main/webapp/universal/src/apps/App/shared/stores/FeaturesStore.js");var d=a("./src/main/webapp/universal/src/shared/components/Verification/index.js");var p=a("./src/main/webapp/universal/src/shared/stores/CampaignsVerificationStore.js");var h=a("./src/main/webapp/universal/src/shared/actions/CampaignsVerificationActions.js");var g=a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts");var m=a("./src/main/webapp/frontend/packages/enums/Flag.js");var f=false;var v=s.createLogger("newsletter-editor","#456",f);YUI.add("squarespace-block-newsletter-editor",function(s){s.namespace("Squarespace.Block.ModelEditorDialog");s.namespace("Squarespace.Block.Editor");s.Squarespace.Block.Editor.Newsletter=s.Base.create("newsletter-block-dialog",s.Squarespace.Block.Editor.Dialog,[],{destructor:function(){this._showAfterConnected&&this._showAfterConnected.detach()},_showDialog:function(){var e=this.get("host").get("model");var t=e.getFormModel();t.get("connectedBackends")?this.constructor.superclass._showDialog.call(this):this._showAfterConnected=t.onceAfter("connectedBackendsChange",function(e){v("connectedBackends ready",e);this.constructor.superclass._showDialog.call(this)},this)},_getModelEditor:function(){return s.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Newsletter")},afterLayoutDrag:function(){this.get("host").fire("resized")}},{NS:"blockEditor",ATTRS:{blockName:{value:o("Newsletter")}}});var e=function(){var e=this.get("dialog");return{loadingText:o("Editing Newsletter Block…"),title:o("Newsletter"),width:500,height:525,initialDataByReference:true,tabs:[{tabTitle:o("Display"),scroll:true,fields:[{ctor:s.Squarespace.DialogFields.Description,text:o('Add a sign-up to your site to begin collecting mailing list subscribers. <a href="{helpLink}" target="_blank">Learn more</a>.',{helpLink:n.NEWSLETTER_EDITOR})},{ctor:s.Squarespace.DialogFields.LabeledText,config:{name:"name","strings.label":o("Form Name"),submitOnEnter:true}},{ctor:s.Squarespace.DialogFields.Text,config:{name:"title",className:"thin","strings.title":o("Title")}},{ctor:s.Squarespace.DialogFields.Wysiwyg,config:{name:"description",editorHeight:125,classNames:"description","strings.title":o("Description")},isNullable:true},{ctor:s.Squarespace.DialogFields.Check,config:{name:"showName","strings.title":o("Require Name Field"),"strings.description":o("Display inputs for the subscriber's first and last name.")}},{ctor:s.Squarespace.DialogFields.Wysiwyg,config:{name:"disclaimer",editorHeight:125,classNames:"description","strings.title":o("Disclaimer"),description:o("Displayed below the input field.")},isNullable:true},{ctor:s.Squarespace.DialogFields.Text,config:{name:"submitButtonText",className:"thin","strings.title":o("Submit Button Label"),"strings.placeholder":o("Submit")}},{ctor:s.Squarespace.DialogFields.Select,config:{name:"alignment",defaultValue:"alignCenter","strings.title":o("Alignment"),options:[{value:"alignLeft",label:o("Left")},{value:"alignCenter",label:o("Center")},{value:"alignRight",label:o("Right")}]}},{ctor:s.Squarespace.DialogFields.Select,config:{name:"layout",defaultValue:"layoutFloat","strings.title":o("Layout"),options:[{value:"layoutFloat",label:o("Float Fields")},{value:"layoutStack",label:o("Stack Fields")}]}}]},{tabTitle:o("Storage"),fields:[{$include:"connectFieldConfigsByName.description"},{$include:"connectFieldConfigsByName.campaigns"},{ctor:s.Squarespace.DialogFields.Description,config:{name:"showOtherStorageOptions",text:o("Connect other services"),className:"showOtherStorageOptionsLink"}},{$include:"connectFieldConfigsByName.mailchimp",$when:function(e){return u.isFeatureEnabled(i.MAILCHIMP_INTEGRATION)}},s.merge(l.getMailchimpSignupConfig(s),{$when:function(e){if(!u.isFeatureEnabled(i.MAILCHIMP_INTEGRATION))return false;var t=e.getFormModel();var a=t.getConnBackend(r.MAILCHIMP);return 0===a.length}}),{$include:"connectFieldConfigsByName.email",$when:function(e){var t=e.getFormModel();var a=t.getConnBackend(r.EMAIL);return a.length>0}},{$include:"connectFieldConfigsByName.zapier",$when:function(e){return u.isFeatureEnabled(i.FORMS_API)}},{$include:"connectFieldConfigsByName.googleDocs"}]},{tabTitle:o("Captcha"),fields:{$include:"captchaFieldConfigs"},$when:function(e){return g.isFeatureEnabled(m.NEWSLETTER_BLOCK_CAPTCHA)&&c()&&!g.isFeatureEnabled(m.CAMPAIGNS_SINGLE_OPT_IN)}},{tabTitle:o("Verification"),reactData:{component:d,props:{initialData:{$valueFn:function(e){var t=e.getFormModel();var a=t.get("connectedBackends");var i=a.length?a.filter(function(e){return e.backendType===r.CAMPAIGNS}):[];i=i.length&&i[0];var s=i.connected&&i.config&&i.config.useSingleOptIn;return{isCampaignsConnected:i.connected,captchaEnabled:t.get("captchaEnabled"),captchaTheme:t.get("captchaTheme"),captchaAlignment:t.get("captchaAlignment"),useSingleOptIn:"true"===s}}},formId:{$valueFn:function(e){return e.getFormModel().get("id")}},fireDataChange:{$valueFn:function(){return function(){e.fire("datachange")}}},getData:function(){var e=p.getVerificationData(this.formId);return{captchaEnabled:e.captchaEnabled,captchaAlignment:e.captchaAlignment,captchaTheme:e.captchaTheme,backendConnectionConfigs:{campaignsConnect:{useSingleOptIn:e.useSingleOptIn}},isDirty:e.isDirty}}}},$when:function(){return p.isSingleOptInEnabled()}},{tabTitle:o("Post-Submit"),scroll:true,fields:[{ctor:s.Squarespace.DialogFields.Select,config:{name:"buttonAlignment","strings.title":o("Button Alignment"),defaultValue:"left",className:"thin dark",options:[{value:"left",label:o("Left")},{value:"center",label:o("Center")},{value:"right",label:o("Right")}]}},{ctor:s.Squarespace.DialogFields.Description,config:{name:"successRedirectDescription",title:o("Post-Submit Redirect"),text:o("If provided, the user will be redirected upon form submission.")}},{ctor:s.Squarespace.DialogFields.CreateLink,config:{name:"successRedirect",disableNewWindow:true,condensed:true,required:false,renderTabs:{content:true,external:true,files:false}}},{ctor:s.Squarespace.DialogFields.Description,config:{name:"submissionMessageDescription",title:o("Post-Submit Message"),text:o("Display this message to users after they submit your form.")}},{ctor:s.Squarespace.DialogFields.Wysiwyg,config:{name:"submissionMessage",editorHeight:175,classNames:"submissionMessage"},isNullable:true},{ctor:s.Squarespace.DialogFields.Description,config:{name:"submissionHTMLDescription",title:o("Post-Submit HTML"),text:o("HTML to be rendered in addition to the Post-Submit Message.")}},{ctor:s.Squarespace.DialogFields.HtmlCode,config:{name:"submissionHTML"}}]}]}};var a=s.Squarespace.Block.ModelEditorDialog.Newsletter=s.Base.create("newsletter-block-dialog-model-editor",s.Squarespace.Block.ModelEditorDialog.Form,[],{initializer:function(){var e=a.superclass;e.initializer.call(this);var t=this.get("dialog");t.on("shown",function(){t.bodyEl.delegate("click",function(){this.set("showOtherStorageOptions",true)},".showOtherStorageOptionsLink",this);if(this.isCampaignsOnlyVisible()){this.on("visibleChange",this._toggleOtherStorageOptions,this);this.after("showOtherStorageOptionsChange",this._toggleOtherStorageOptions,this)}else t.bodyEl.addClass("showOtherStorageOptions")},this);t.on("canceled",function(){var e=this.get("model");var t=e.getFormModel();p.isSingleOptInEnabled()&&h.reset(t.get("id"))},this)},_toggleOtherStorageOptions:function(e){var t=this.get("dialog");e.newVal&&!this.isCampaignsOnlyVisible()?t.bodyEl.addClass("showOtherStorageOptions"):t.bodyEl.removeClass("showOtherStorageOptions")},getDialogData:function(){var e=this.get("model");var t=this.getDataFromFormModel();var a=s.merge({showName:e.get("showName"),title:e.get("title"),description:e.get("description"),disclaimer:e.get("disclaimer"),alignment:e.get("alignment"),layout:e.get("layout")},this.getConnectionData(e));var i=s.merge({},t,a);v("getDialogData",i);return i},isCampaignsOnlyVisible:function(){if(this.get("showOtherStorageOptions"))return false;var e=this.get("model");var t=e.getFormModel();var a=t.getConnBackend(r.ZAPIER);var i=t.getConnBackend(r.GOOGLE);var s=t.getConnBackend(r.MAILCHIMP);var n=a.length||i.length||s.length;return!n}},{ATTRS:{showOtherStorageOptions:false,dialogConfig:{valueFn:function(){return e.call(this)}}}})},"1.0",{requires:["squarespace-block-form-editor","squarespace-damask-context-globals","squarespace-dialog-select","squarespace-dialog-wysiwyg","squarespace-model-editor"]})},"./src/main/webapp/universal/scripts-v6/block/newsletter-model.js":function(e,t,a){var r=a("./src/main/webapp/frontend/packages/enums/FormBackendConnectionState.js");var o=a("./src/main/webapp/frontend/packages/enums/FormBackendConnectionType.js");var l=a("./src/main/webapp/frontend/packages/enums/GoogleReCaptchaAlignmentType.js");var c=a("./src/main/webapp/frontend/packages/enums/GoogleReCaptchaThemeType.js");var u=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var d=a("./src/main/webapp/universal/src/shared/actions/CampaignsConfigActions.js");var p=a("./src/main/webapp/universal/src/shared/actions/CampaignsVerificationActions.js");var h=a("./src/main/webapp/universal/src/shared/stores/CampaignsVerificationStore.js");var g=a("./src/main/webapp/universal/src/shared/constants/FormBuilderFields.js");var i=a("./src/main/webapp/universal/src/shared/utils/Loggers.ts");var m=a("./src/main/webapp/universal/src/apps/App/shared/stores/WebsiteStore/index.js");var f=a("./src/main/webapp/universal/src/shared/constants/HelpLinks.js");var v=i.createLogger("newsletter-model","#456");YUI.add("squarespace-block-newsletter-model",function(i){var a=u("Email Address");var s=a;var e="<p>"+u("We respect your privacy.")+"</p>";var t="<p>"+u("Sign up with your email address to receive news and updates.")+"</p>";i.namespace("Squarespace.Models");var n=i.Squarespace.Models.BlockNewsletterModel=i.Base.create("BlockNewsletterModel",i.Squarespace.Models.BlockFormModel,[],{toJSON:function(){return{alignment:this.get("alignment"),useModelInsteadOfFormModel:1,captchaEnabled:this.get("captchaEnabled"),captchaTheme:this.get("captchaTheme"),captchaAlignment:this.get("captchaAlignment"),description:this.get("description"),disclaimer:this.get("disclaimer"),floatDir:this.get("floatDir"),formId:this.get("formId"),hSize:this.get("hSize"),layout:this.get("layout"),showName:this.get("showName"),successRedirect:this.get("successRedirect"),title:this.get("title")}},createFormModel:function e(){v("#createFormModel");var t=[i.merge({},g.EMAIL,{title:s,placeholder:a,required:true,locked:true}),g.NAME];t.forEach(function(e){i.Squarespace.FormEditingUtils.resolveFieldId(e,t)},this);return new i.Squarespace.Models.Form({id:null,type:i.Squarespace.FormType.NEWSLETTER_BLOCK,name:u("Newsletter Form"),fields:t,submitButtonText:u("Sign Up"),captchaEnabled:false,captchaTheme:c.LIGHT,captchaAlignment:l.CENTER})},useFirstList:function(e){v("Autoconnect to first campaign",e);if(!e||!e.results||0===e.results.length)return;this.set("campaignsConnect",{backendType:o.CAMPAIGNS,connectionState:r.CONNECTED,listId:e.results[0].id})},hasValidCaptchaKeys:function(){var e=h.getCaptchaConfig();if(e&&(e.captchaConfigSiteKey&&!e.captchaConfigSecret||!e.captchaConfigSiteKey&&e.captchaConfigSecret))return false;return true},validateFormBlockModel:function(){var e=n.superclass.validateFormBlockModel.call(this);if(e)return e;if(h.isSingleOptInEnabled()&&!this.hasValidCaptchaKeys()){var t={title:u("Add reCAPTCHA Keys"),message:u('Your Site Key and Secret Key are required to turn on reCAPTCHA. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:f.GOOGLE_RECAPTCHA_LEARN_MORE}),src:"validate"};return t}},saveCaptchaConfig:function(){v("#saveCaptchaConfig");var e=h.isSingleOptInEnabled()&&h.getCaptchaConfig();if(e&&e.captchaKeysChanged){var t={secretKey:e.captchaConfigSecret,siteKey:e.captchaConfigSiteKey};var a={captchaSettings:t};return m.save(a)}return i.Promise.resolve()},saveFormModel:function e(t){v("#saveFormModel");this._saveCallbacks.push(t);if(this._saveCallbacks.length>1)return;var a=this.getFormModel();var i=function e(){this.setBackendsAndSave.call(this,a)}.bind(this);if(!a.get("id")){v("Created a new form",a);d.connect().then(this.useFirstList.bind(this)).then(this.saveCaptchaConfig.bind(this)).then(i,i);return}this.saveCaptchaConfig().then(i,i)},setBackends:function(e){var t={};if(h.isSingleOptInEnabled()){var a=h.getVerificationData(e.get("id"));t.useSingleOptIn=a.useSingleOptIn}e.set("backendConnectionConfigs",{campaignsConnect:i.merge({},this.get("campaignsConnect"),t),googleDocsConnect:this.get("googleDocsConnect"),mailchimpConnect:this.get("mailchimpConnect"),emailConnect:this.get("emailConnect"),zapierConnect:this.get("zapierConnect")})},_onModelSave:function e(t){var a=this.getFormModel();!i.Lang.isValue(t)&&h.isSingleOptInEnabled()&&a&&p.saveSuccess(a.get("id"));n.superclass._onModelSave.call(this,t)}},{FORM_MODEL_FIELDS:["captchaAlignment","captchaEnabled","captchaTheme","name","submissionHTML","submissionMessage","submitButtonText","successRedirect"],ATTRS:{showName:false,title:{value:u("Subscribe")},description:{value:{engine:"wysiwyg",html:t,source:t}},disclaimer:{value:{engine:"wysiwyg",html:e,source:e}},formId:{value:null},successRedirect:{value:null},emailConnect:{value:null},alignment:{value:"alignCenter"},layout:{value:"layoutFloat"},floatDir:{value:null},hSize:{value:null}}})},"1.0",{requires:["base","model","squarespace-enum","squarespace-form-editing-utils","squarespace-models-form","squarespace-block-form-model"]})},"./src/main/webapp/universal/scripts-v6/block/newsletter.js":function(e,t,a){var i=a("./src/main/webapp/frontend/packages/enums/BlockType.js");var n=a("./src/main/webapp/frontend/packages/enums/Flag.js");var r=a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts");var o=a("./src/main/webapp/universal/src/shared/utils/GoogleReCaptchaAPIAuthenticated.js");var l=a("./src/main/webapp/universal/src/shared/utils/GoogleReCaptchaAPI.js");var c=a("./src/main/webapp/universal/src/apps/App/shared/utils/BlockEditorUtils.js");YUI.add("squarespace-block-newsletter",function(s){s.namespace("Squarespace.Block");var t=s.Squarespace.Block.Newsletter=s.Base.create("block-newsletter",s.SQS.LayoutEngine.Block.ModelSyncBase,[s.Squarespace.Block.PremiumBlockMixin],{initializer:function(){this.publish("formData-loaded",{fireOnce:true,async:true})},bindUI:function(){t.superclass.bindUI.call(this);this.after(["resized","widget:contentUpdate"],this._fitToContainer,this);this.get("model").after("save",this._renderBlock,this);this.after("widget:contentUpdate",this.renderCaptcha,this)},renderUI:function(){var e=this._getStackFinished();this.get("model").load(s.bind(function(){this.fire("formData-loaded");this._renderBlock();e()},this))},renderCaptcha:function(){if(!r.isFeatureEnabled(n.NEWSLETTER_BLOCK_CAPTCHA))return;if(!o.isCaptchaEnabled())return;var e=this.get("model");if(!e.get("captchaEnabled"))return;var t=this.get("contentBox");if(!t)return;var a=t.one(".captcha-container");var i=a.getDOMNode();if(!i)return;l.render(s.config.win,i)},ensureLoadedThenShowDialog:function(e){var t=this.get("model").get("formId");t?this.on("formData-loaded",e):e()},_renderBlock:function(){var e=this.get("model");if(!e.get("formId"))return;t.superclass._renderBlock.call(this)},_fitToContainer:function(){var e=this.get("boundingBox");var t=e.one(".newsletter-form");if(t){e.toggleClass("newsletter-form-has-small-container",t.get("offsetWidth")<320);e.addClass("rendered")}}},{CSS_PREFIX:"sqs-block-newsletter",MODEL:s.Squarespace.Models.BlockNewsletterModel,ATTRS:{editor:{valueFn:function(){return c.isBlockEditorV2Enabled(this.get("blockTypeName"))?s.Squarespace.Block.Editor.Schema:s.Squarespace.Block.Editor.Newsletter}},type:{value:i.NEWSLETTER}}})},"1.0",{requires:["base","@sqs/layout-engine/block-model-sync-base","squarespace-block-newsletter-model","squarespace-block-newsletter-editor","squarespace-premium-block-mixin"]})},"./src/main/webapp/universal/scripts-v6/block/opentable-editor.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/universal/src/shared/constants/HelpLinks.js");YUI.add("squarespace-block-opentable-editor",function(e){e.namespace("Squarespace.Block.Editor").OpenTable=e.Base.create("opentable-block-editor-dialog",e.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return e.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.OpenTable")}},{NS:"blockEditor",ATTRS:{blockName:{value:i("OpenTable")}}});e.namespace("Squarespace.Block.ModelEditorDialog").OpenTable=e.Base.create("blockOpenTableEditor",e.Squarespace.ModelEditorDialog,[],{},{ATTRS:{dialogConfig:{valueFn:function(){return t}}}});var t={width:375,height:290,tabs:[{title:i("OpenTable"),icon:"/universal/images-v6/icons/icon-opentable-20-light-solid.png",scroll:true,fields:[{ctor:e.Squarespace.DialogFields.Description,text:i('Add restaurant reservation booking to your site. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:s.OPENTABLE})},{ctor:e.Squarespace.DialogFields.Text,config:{name:"restaurantId",maxLength:10,className:"thin",submitOnEnter:true,strings:{title:i("OpenTable Restaurant ID"),placeholder:"0000",description:i("Your OpenTable restaurant ID.  You can locate your restaurant ID on the OpenTable website.")},required:true}},{ctor:e.Squarespace.DialogFields.Check,config:{name:"hideTitle",strings:{title:i("Hide Title"),description:i("Hide the title above the open table form.")}}}]}]};e.namespace("Squarespace.Block.ModelEditorDialog").OpenTable=e.Base.create("blockOpenTableEditor",e.Squarespace.ModelEditorDialog,[],{},{ATTRS:{dialogConfig:{valueFn:function(){return t}}}})},"1.0",{requires:["base","squarespace-damask-context-globals","squarespace-dialog-text","squarespace-model-editor"]})},"./src/main/webapp/universal/scripts-v6/block/opentable-v2-editor.js":function(e,t,a){var s=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var i=a("./src/main/webapp/universal/src/shared/constants/HelpLinks.js");var n=a("./src/main/webapp/universal/src/shared/utils/network.js");YUI.add("squarespace-block-opentable-v2-editor",function(t){var a=t.namespace("Squarespace.Block.Editor").OpenTableV2=t.Base.create("opentable-v2-block-editor-dialog",t.Squarespace.Block.Editor.Dialog,[],{initializer:function(){var e=this.configDialog.get("dialog");var a=this._model;e.on("shown",function(){var t=e.getField("userEnteredRestaurantId");t.set("data",a.get("restaurantId"));t.after("dataChange",function(e){this.validateUserEnteredRestaurantId(e.newVal)},this);e.getField("domain").after("dataChange",function(e){this.validateUserEnteredRestaurantId(t.get("data"))},this);e.getField("lang").after("dataChange",function(e){this.validateUserEnteredRestaurantId(t.get("data"))},this)},this)},_updateModel:function(e){e=t.clone(e);delete e.userEnteredRestaurantId;a.superclass._updateModel.call(this,e)},validateUserEnteredRestaurantId:function(a){a=a.trim();if(this._pendingValidation){t.config.win.clearTimeout(this._pendingValidation);this._pendingValidation=null}var e=this._model;if(e.get("restaurantId")===a)return;if(0===a.length)return;var i=this.configDialog.get("dialog");this._pendingValidation=t.config.win.setTimeout(function(){n.get("https://oc-registry.opentable.com/v2/reservation-widget-standard/2.3.12",{headers:{Accept:"application/vnd.oc.unrendered+json"},params:{rid:a,type:"standard",domain:e.get("domain"),lang:e.get("lang"),theme:"wide",overlay:"true",__oc_Retry:0}}).then(function(e){var t=e.data.data;if(!t||t.error){i.getField("userEnteredRestaurantId").showError(s("Invalid Restaurant ID!"));i.getField("restaurantId").set("data","");i.getField("restaurantName").set("visible",false)}else{i.getField("restaurantId").set("data",a);i.getField("restaurantName").set("visible",true);i.getField("restaurantName").set("text",s("Restaurant identified: {restaurantName}",{restaurantName:t.omniture.vars.prop32}))}})},800)},_getModelEditor:function(){return t.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.OpenTableV2")}},{NS:"blockEditor",ATTRS:{blockName:{value:s("OpenTable")}}});var e={title:s("OpenTable"),width:375,height:396,tabs:[{title:s("OpenTable"),tabTitle:s("Content"),icon:"/universal/images-v6/icons/icon-opentable-20-light-solid.png",scroll:true,fields:[{ctor:t.Squarespace.DialogFields.Description,text:s('Add restaurant reservation booking to your site. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:i.OPENTABLE})},{ctor:t.Squarespace.DialogFields.Text,config:{name:"userEnteredRestaurantId",maxLength:10,className:"thin",submitOnEnter:true,strings:{title:s("OpenTable Restaurant ID"),description:s('Your OpenTable restaurant ID. You can locate your restaurant ID on the OpenTable website. <a href="{kbArticleUrl}">Learn more</a>',{kbArticleUrl:i.OPENTABLE_RESTAURANT_ID})}}},{ctor:t.Squarespace.DialogFields.Description,config:{text:"",visible:false,name:"restaurantName"}},{ctor:t.Squarespace.DialogFields.Hidden,config:{name:"restaurantId"}},{ctor:t.Squarespace.DialogFields.Select,config:{"strings.title":s("Location (Domain)"),name:"domain",className:"thin dark",defaultValue:"com",options:[{value:"com",label:s("US and Canada - opentable.com")},{value:"commx",label:s("Mexico - opentable.com.mx")},{value:"couk",label:s("United Kingdom - opentable.co.uk")},{value:"ie",label:s("Ireland - opentable.ie")},{value:"comau",label:s("Australia and New Zealand - opentable.com.au")},{value:"de",label:s("Germany - opentable.de")},{value:"jp",label:s("Japan - opentable.jp")}]}},{ctor:t.Squarespace.DialogFields.Select,config:{"strings.title":s("Language"),name:"lang",className:"thin dark",defaultValue:"en",options:[{value:"en",label:s("English")},{value:"fr",label:s("French")},{value:"es",label:s("Spanish")},{value:"de",label:s("German")},{value:"ja",label:s("Japanese")}]}}]},{title:s("OpenTable"),tabTitle:s("Design"),icon:"/universal/images-v6/icons/icon-opentable-20-light-solid.png",scroll:true,fields:[{ctor:t.Squarespace.DialogFields.Check,config:{"strings.title":s("Hide Title"),name:"hideTitle"}},{ctor:t.Squarespace.DialogFields.Check,config:{"strings.title":s("Hide Icons"),name:"hideIcons"}},{ctor:t.Squarespace.DialogFields.Check,config:{"strings.title":s("Hide OpenTable Logo"),name:"hideOpenTableLogo"}}]}]};t.namespace("Squarespace.Block.ModelEditorDialog").OpenTableV2=t.Base.create("blockOpenTableEditor",t.Squarespace.ModelEditorDialog,[],{},{ATTRS:{dialogConfig:{valueFn:function(){return e}}}})},"1.0",{requires:["base","squarespace-damask-context-globals","squarespace-dialog-text","squarespace-dialog-select","squarespace-model-editor"]})},"./src/main/webapp/universal/scripts-v6/block/opentable-v2.js":function(e,t,a){var i=a("./src/main/webapp/frontend/packages/enums/BlockType.js");var s=a("./src/main/webapp/universal/src/shared/utils/OpenTableV2BlockInitializer.js");var n=a("./src/main/webapp/universal/src/apps/App/shared/utils/BlockEditorUtils.js");YUI.add("squarespace-block-opentable-v2",function(e){var t=e.Base.create("OpenTableBlockV2Model",e.Model,[],{},{ATTRS:{restaurantId:{value:""},domain:{value:"com"},lang:{value:"en"},hideTitle:{value:false},hideIcons:{value:false},userEnteredRestaurantId:{validator:function(){return false}},hideOpenTableLogo:{value:false}}});var a=e.namespace("Squarespace.Block").OpenTableV2=e.Base.create("block-opentable-v2",e.SQS.LayoutEngine.Block.ModelSyncBase,[e.Squarespace.Block.PremiumBlockMixin],{_renderSuccess:function(e){this.get("boundingBox").removeClass("loaded");a.superclass._renderSuccess.call(this,e);s(this.get("boundingBox").getDOMNode())}},{CSS_PREFIX:"sqs-block-opentable-v2",MODEL:t,ATTRS:{editor:{valueFn:function(){return n.isBlockEditorV2Enabled(this.get("blockTypeName"))?e.Squarespace.Block.Editor.Schema:e.Squarespace.Block.Editor.OpenTableV2}},type:{value:i.OPENTABLE_V2}}})},"1.0",{requires:["base","@sqs/layout-engine/block-model-sync-base","squarespace-block-opentable-v2-editor","squarespace-premium-block-mixin"]})},"./src/main/webapp/universal/scripts-v6/block/opentable.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var n=a("./src/main/webapp/frontend/packages/enums/BlockType.js");var r=a("./src/main/webapp/universal/src/apps/App/shared/utils/BlockEditorUtils.js");YUI.add("squarespace-block-opentable",function(l){var s=l.namespace("Squarespace.Block").OpenTable=l.Base.create("block-opentable",l.SQS.LayoutEngine.Block.ModelSyncBase,[l.Squarespace.Block.PremiumBlockMixin],{bindUI:function(){s.superclass.bindUI.call(this);this.get("contentBox").on("click",this._alertPreviewOnlyOnClick)},_renderSuccess:function(t){var a="https:"===document.location.protocol;var i=this.get("contentBox");this.get("model").get("hideTitle")?i.addClass("sqs-block-opentable-hide-title"):i.removeClass("sqs-block-opentable-hide-title");this._getExtractedHtml(t.html,a).then(l.bind(function(e){t.html=e;s.superclass._renderSuccess.call(this,t);a&&i.all(".sqs-block-opentable-hidden").removeClass("sqs-block-opentable-hidden")},this),l.bind(this._renderNoId,this))},_renderNoId:function(){this._renderError({title:i("No OpenTable Restaurant ID"),error:i("To allow customers to make reservations on your site, enter your restaurant ID.")})},_getExtractedHtml:function(r,o){return new l.Promise(l.bind(function(a,i){var e=this._createIFrameWith(r);var s=e.contentDocument||e.contentWindow.document;var t;if(o)a(s.body.innerHTML);else{var n=l.Array(s.getElementsByTagName("script"));t=l.Array.map(n,function(t){return new l.Promise(function(e){t.addEventListener("load",e);t.addEventListener("error",e)})});l.Promise.all(t).then(function(){var e=s.getElementsByTagName("form")[0];var t=e&&e.outerHTML;t?a(t):i()})}},this))},_createIFrameWith:function(e){var t=l.config.doc.createElement("iframe");this.get("contentBox").append(t);var a=t.contentDocument||t.contentWindow.document;a.open();a.write(e);a.close();return t},_alertPreviewOnlyOnClick:function(e){if(e.target.ancestor("input, a",true)){e.preventDefault();new l.Squarespace.Widgets.Alert({"strings.title":i("Preview Only"),"strings.message":i("Please log out of your Squarespace account in order to use the OpenTable Block.")})}}},{CSS_PREFIX:"sqs-block-opentable",MODEL:l.Model,ATTRS:{editor:{valueFn:function(){return r.isBlockEditorEnabled(this.get("blockTypeName"))?l.Squarespace.Block.Editor.Schema:l.Squarespace.Block.Editor.OpenTable}},type:{value:n.OPENTABLE}}})},"1.0",{requires:["base","@sqs/layout-engine/block-model-sync-base","squarespace-block-opentable-editor","squarespace-block-schema-editor","squarespace-premium-block-mixin"]})},"./src/main/webapp/universal/scripts-v6/block/post-group-editor.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-block-posts-by-editor",function(e){e.namespace("Squarespace.Block.Editor");e.namespace("Squarespace.Block.ModelEditorDialog");e.Squarespace.Block.Editor.PostsByMonth=e.Base.create("posts-by-month-block-editor-dialog",e.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return e.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.PostsByMonth")}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Month List")}}});e.Squarespace.Block.ModelEditorDialog.PostsByMonth=e.Base.create("blockPostByMonthEditor",e.Squarespace.Block.ModelEditorDialog.PostsBy,[],{},{NS:"postsByMonthEditor",ATTRS:{strings:{value:{title:i("Month List"),description:i("Select a collection to index.")}}}});e.Squarespace.Block.Editor.PostsByCategory=e.Base.create("posts-by-category-editor-dialog",e.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return e.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.PostsByCategory")}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Category List")}}});e.Squarespace.Block.ModelEditorDialog.PostsByCategory=e.Base.create("blockPostByCategoryEditor",e.Squarespace.Block.ModelEditorDialog.PostsBy,[],{},{NS:"postsByCategoryEditor",ATTRS:{strings:{value:{title:i("Category List"),description:i("Select a collection below to collect categories from.")}}}});e.Squarespace.Block.Editor.PostsByTag=e.Base.create("posts-by-tag-editor-dialog",e.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return e.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.PostsByTag")}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Tag List")}}});e.Squarespace.Block.ModelEditorDialog.PostsByTag=e.Base.create("blockPostByTagEditor",e.Squarespace.Block.ModelEditorDialog.PostsBy,[],{},{NS:"postsByTagTagEditor",ATTRS:{strings:{value:{title:i("Tag List"),description:i("Select a collection below to collect tags from.")}}}});e.Squarespace.Block.Editor.PostsByAuthor=e.Base.create("posts-by-author-editor-dialog",e.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return e.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.PostsByAuthor")}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Author List")}}});e.Squarespace.Block.ModelEditorDialog.PostsByAuthor=e.Base.create("blockPostByAuthorEditor",e.Squarespace.Block.ModelEditorDialog.PostsBy,[],{},{NS:"postsByAuthorEditor",ATTRS:{strings:{value:{title:i("Author List"),description:i("Select a collection below to collect authors from")}}}})},"1.0",{requires:["base","model","squarespace-block-editor-dialog","squarespace-block-posts-by-model","squarespace-block-posts-by-model-editor-base","squarespace-damask-context-globals"]})},"./src/main/webapp/universal/scripts-v6/block/post-group-model-editor-base.js":function(e,t,a){var s=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var n=a("./src/main/webapp/frontend/packages/enums/CollectionTypes.js");YUI.add("squarespace-block-posts-by-model-editor-base",function(i){i.namespace("Squarespace.Block.ModelEditorDialog").PostsBy=i.Base.create("blockPostsByEditor",i.Squarespace.ModelEditorDialog,[],{initializer:function(){var e=this.get("dialog");var t=i.Squarespace.ContentCollectionCache;this._dialogReady=false;this._collectionsLoaded=0===t.size();this._collectionsLoaded&&t.load(i.bind(this._onCollectionsLoaded,this));i.Lang.isValue(e)&&e.after("ready",this._onDialogLoaded,this)},_getDefaultAndProductCollections:function(){var e=i.Squarespace.ContentCollectionCache.filter(function(e){var t=e.getTemplateConfiguration();if(t){var a=t.get("collectionType");return(a===n.PRODUCTS||a===n.COLLECTION_TYPE_GENERIC)&&false===t.get("folder")}return false});return this._filterOutCalendarCollections(e)},_filterOutCalendarCollections:function(e){return i.Array.filter(e,function(e){var t=e.getTemplateConfiguration();if(t.get("ordering")===i.Squarespace.CollectionOrdering.CALENDAR)return false;return true})},_onDialogLoaded:function(e){this._dialogReady=true;this._collectionsLoaded&&this._setCollections()},_onCollectionsLoaded:function(e){this._collectionsLoaded=true;this._dialogReady&&this._setCollections()},_setCollections:function(){var e=this.get("dialog");var t=this._getDefaultAndProductCollections();var a=i.Squarespace.ContentCollectionUtils.groupCollectionsByTypeName(t);e.getField("collectionId").set("collectionGroups",a)},_getDefaultDialogConfiguration:function(){var e=this.get("strings.description");var t=this.get("strings.title");return{title:s("Edit List"),width:300,height:450,tabs:[{title:t,icon:"/universal/images-v6/icons/icon-tagcloud-16-light-solid.png",scroll:true,fields:[{ctor:i.Squarespace.DialogFields.Description,config:{title:e,text:"",padding:[0,0]}},{ctor:i.Squarespace.DialogFields.ContentIdSelector,config:{name:"collectionId",showCollectionTagsAndCategories:false,showGroupTitles:true,collectionFilter:{folder:false}}}]}]}}},{NS:"postsByEditor",ATTRS:{dialogConfig:{valueFn:"_getDefaultDialogConfiguration",validator:i.Lang.isObject},strings:{value:{title:s("Index"),description:s("Select a collection below.")}}}})},"1.0",{requires:["base","squarespace-block-posts-by-model","squarespace-models-content-collection","squarespace-dialog-description","squarespace-dialog-content-selector"]})},"./src/main/webapp/universal/scripts-v6/block/post-group-model.js":function(e,t){YUI.add("squarespace-block-posts-by-model",function(e){e.namespace("Squarespace.ContentModel").PostsByBlock=e.Base.create("PostsByBlockModel",e.Model,[],{},{ATTRS:{}});e.namespace("Squarespace.ContentModel").PostsByTag=e.Base.create("PostsByTagModel",e.Squarespace.ContentModel.PostsByBlock,[],{},{});e.namespace("Squarespace.ContentModel").PostsByCategory=e.Base.create("PostsByCategoryModel",e.Squarespace.ContentModel.PostsByBlock,[],{},{});e.namespace("Squarespace.ContentModel").PostsByAuthor=e.Base.create("PostsByAuthorModel",e.Squarespace.ContentModel.PostsByBlock,[],{},{});e.namespace("Squarespace.ContentModel").PostsByMonth=e.Base.create("PostsByMonthModel",e.Squarespace.ContentModel.PostsByBlock,[],{},{})},"1.0",{requires:["base","model"]})},"./src/main/webapp/universal/scripts-v6/block/post-group.js":function(e,t,a){var i=a("./src/main/webapp/frontend/packages/enums/BlockType.js");var s=a("./src/main/webapp/universal/src/apps/App/shared/utils/BlockEditorUtils.js");YUI.add("squarespace-block-posts-by",function(e){var t=e.namespace("Squarespace.Block").PostsByBase=e.Base.create("block-posts-by",e.SQS.LayoutEngine.Block.ModelSyncBase,[e.Squarespace.Block.PremiumBlockMixin],{initializer:function(){false}},{MODEL:e.Squarespace.ContentModel.PostsByBlock,ATTRS:{editor:{valueFn:function(){return s.isBlockEditorV2Enabled(this.get("blockTypeName"))?e.Squarespace.Block.Editor.Schema:e.Squarespace.Block.Editor.Dialog}}},CSS_PREFIX:"sqs-block-posts-by"});e.namespace("Squarespace.Block").PostsByAuthor=e.Base.create("block-posts-by-author",t,[],{},{MODEL:e.Squarespace.ContentModel.PostsByAuthor,ATTRS:{type:{value:i.POSTS_BY_AUTHOR},editor:{valueFn:function(){return s.isBlockEditorV2Enabled(this.get("blockTypeName"))?e.Squarespace.Block.Editor.Schema:e.Squarespace.Block.Editor.PostsByAuthor}}},CSS_PREFIX:"sqs-block-postsbyauthor"});e.namespace("Squarespace.Block").PostsByTag=e.Base.create("block-posts-by-tag",t,[],{},{MODEL:e.Squarespace.ContentModel.PostsByTag,ATTRS:{type:{value:i.POSTS_BY_TAG},editor:{valueFn:function(){return s.isBlockEditorV2Enabled(this.get("blockTypeName"))?e.Squarespace.Block.Editor.Schema:e.Squarespace.Block.Editor.PostsByTag}}},CSS_PREFIX:"sqs-block-postsbytag"});e.namespace("Squarespace.Block").PostsByCategory=e.Base.create("block-posts-by-category",t,[],{},{MODEL:e.Squarespace.ContentModel.PostsByCategory,ATTRS:{type:{value:i.POSTS_BY_CATEGORY},editor:{valueFn:function(){return s.isBlockEditorV2Enabled(this.get("blockTypeName"))?e.Squarespace.Block.Editor.Schema:e.Squarespace.Block.Editor.PostsByCategory}}},CSS_PREFIX:"sqs-block-postsbycategory"});e.namespace("Squarespace.Block").PostsByMonth=e.Base.create("block-posts-by-month",t,[],{},{MODEL:e.Squarespace.ContentModel.PostsByMonth,ATTRS:{type:{value:i.POSTS_BY_MONTH},editor:{valueFn:function(){return s.isBlockEditorV2Enabled(this.get("blockTypeName"))?e.Squarespace.Block.Editor.Schema:e.Squarespace.Block.Editor.PostsByMonth}}},CSS_PREFIX:"sqs-block-postsbymonth"})},"1.0",{requires:["base","model","squarespace-block-posts-by-editor","squarespace-block-posts-by-model","squarespace-premium-block-mixin"]})},"./src/main/webapp/universal/scripts-v6/block/premium-block-mixin.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/utils/BlockFeatureGatingUtils.js");YUI.add("squarespace-premium-block-mixin",function(e){e.namespace("Squarespace.Block").PremiumBlockMixin=e.Base.create("premium-block-mixin",e.Base,[],{initializer:function(){this._afterRenderHandle=e.Do.after(this._afterRenderSuccess,this,"_renderSuccess",this)},destructor:function(){this._afterRenderHandle.detach()},_afterRenderSuccess:function(){i.renderBlockWrapper({blockType:this.get("type"),node:this.get("boundingBox").getDOMNode()})}},{})},"1.0",{requires:["base"]})},"./src/main/webapp/universal/scripts-v6/block/product-editor.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var n=a("./src/main/webapp/universal/src/shared/constants/HelpLinks.js");var r=a("./src/main/webapp/universal/src/shared/utils/ProductsUtils.js");YUI.add("squarespace-block-product-editor",function(e){var s="sqs-product-editor-quickview";e.namespace("Squarespace.Block.Editor");e.Squarespace.Block.Editor.Product=e.Base.create("product-block-editor-dialog",e.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return e.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Product")},initializer:function e(){var t=this.configDialog.get("model");var a=this.configDialog.get("dialog");a.on("ready",function(){this.toggleQuickViewFields(!!t.get("productId"))},this);t.after("productIdChange",this.onDialogModelProductIdChange,this)},toggleQuickViewFields:function e(t){var a=!!t&&r.isQuickViewSupported();var i=this.configDialog.get("dialog");if(!i.el)return;i.el.all(".sqs-dialog-field."+s).each(function e(t){t.toggleClass("hidden",!a)})},onDialogModelProductIdChange:function e(t){var a=t.newVal;this.toggleQuickViewFields(!!a)}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Product")}}});var t={width:420,height:460,primaryTabs:[{title:i("Product"),icon:"/universal/images-v6/icons/icon-products-18-light-solid.png",scroll:false,fields:[{ctor:e.Squarespace.DialogFields.Description,text:i('Display a single product from one of your Products Pages. To use this block, you\'ll need a Products Page with at least one product. <a href="{helpLink}" target="_blank" >Learn more</a>',{helpLink:n.PRODUCT_EDITOR})},{ctor:e.Squarespace.DialogFields.ProductChooser,name:"productId",mode:"squarespace",maxResults:15},{ctor:e.Squarespace.DialogFields.Check,config:{name:"showImage","strings.title":i("Show Image"),"strings.description":i("Show a thumbnail image of this product.")}},{ctor:e.Squarespace.DialogFields.Check,config:{name:"showTitle","strings.title":i("Show Title"),"strings.description":i("Show the name of this product")}},{ctor:e.Squarespace.DialogFields.Check,config:{name:"showPrice","strings.title":i("Show Price"),"strings.description":i("Display the current price of this product.")}},{ctor:e.Squarespace.DialogFields.Check,config:{name:"showExcerpt","strings.title":i("Show Description"),"strings.description":i("Show the brief description of this product.")}},{ctor:e.Squarespace.DialogFields.Check,config:{name:"showBuyButton","strings.title":i("Show Add To Cart Button"),"strings.description":i("Show a button that lets customers add this to their cart.")}},{ctor:e.Squarespace.DialogFields.Check,config:{className:["hidden",s].join(" "),name:"productQuickViewEnabled","strings.title":i("Enable Quick View"),"strings.description":i("On hover, a button will appear that lets customers dynamically access product details without leaving the page.")}},{ctor:e.Squarespace.DialogFields.Select,config:{name:"alignment","strings.title":i("Alignment"),defaultValue:"left",options:[{value:"left",label:i("Left")},{value:"center",label:i("Center")},{value:"right",label:i("Right")}]}}]}]};e.namespace("Squarespace.Block.ModelEditorDialog");e.Squarespace.Block.ModelEditorDialog.Product=e.Base.create("blockProductEditor",e.Squarespace.ModelEditorDialog,[],{},{ATTRS:{dialogConfig:{valueFn:function(){return t}}}})},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-damask-context-globals","squarespace-dialog-product-chooser","squarespace-dialog-select","squarespace-model-editor"]})},"./src/main/webapp/universal/scripts-v6/block/product-model.js":function(e,t){YUI.add("squarespace-block-product-model",function(e){var t=e.namespace("Squarespace.ContentModel").ProductBlock=e.Base.create("ProductModel",e.Model,[],{},{ATTRS:{showImage:{value:true},showTitle:{value:true},showPrice:{value:true},showExcerpt:{value:false},showBuyButton:{value:false},productQuickViewEnabled:{value:false}}})},"1.0",{requires:["base","model"]})},"./src/main/webapp/universal/scripts-v6/block/product.js":function(e,t,a){var i=a("./src/main/webapp/frontend/packages/enums/BlockType.js");var s=a("./src/main/webapp/universal/src/apps/App/shared/utils/BlockEditorUtils.js");YUI.add("squarespace-block-product",function(t){var a=t.namespace("Squarespace.Block").Product=t.Base.create("block-product",t.SQS.LayoutEngine.Block.ModelSyncBase,[t.Squarespace.Block.PremiumBlockMixin],{_renderSuccess:function(e){a.superclass._renderSuccess.call(this,e);this._plugImageLoader();var t=this.get("contentBox").one(".sqs-add-to-cart-button-wrapper");t&&t.setStyle("visibility","visible")},_plugImageLoader:function(){this.get("contentBox").all("img").each(function(e){e.hasPlugin(t.Squarespace.Loader2.NS)||e.plug(t.Squarespace.Loader2)})}},{CSS_PREFIX:"sqs-block-product",MODEL:t.Squarespace.ContentModel.ProductBlock,ATTRS:{editor:{valueFn:function(){return s.isBlockEditorEnabled(this.get("blockTypeName"))?t.Squarespace.Block.Editor.Schema:t.Squarespace.Block.Editor.Product}},type:{value:i.PRODUCT}}})},"1.0",{requires:["base","squarespace-image-loader","@sqs/layout-engine/block-model-sync-base","squarespace-block-product-model","squarespace-block-product-editor","squarespace-block-schema-editor","squarespace-premium-block-mixin"]})},"./src/main/webapp/universal/scripts-v6/block/quote-editor.js":function(e,t,a){var n=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var r=a("./src/main/webapp/universal/src/shared/constants/HelpLinks.js");var o=a("./common/temp/node_modules/lodash/compact.js");var l=a("./src/main/webapp/universal/src/shared/utils/TemplateVersionUtils.js");var c=a("./src/main/webapp/universal/src/shared/constants/BlockAnimations.js");var u=a("./src/main/webapp/universal/src/shared/utils/CMSV7Events.js");YUI.add("squarespace-block-quote-editor",function(i){i.namespace("Squarespace.Block.Editor");i.Squarespace.Block.Editor.Quote=i.Base.create("block-quote-editor",i.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return i.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Quote")}},{NS:"blockEditor",ATTRS:{blockName:{value:n("Quote")}}});i.namespace("Squarespace.Block.ModelEditorDialog");var s=i.Squarespace.Block.ModelEditorDialog.Quote=i.Base.create("blockQuoteEditor",i.Squarespace.ModelEditorDialog,[i.Squarespace.Block.Mixins.BlockAnimationAnalytics],{save:function e(t,a,i){this.trackAnimationFieldsSave({eventName:"quote_animation_selection_save",dataInitializer:this._prepareAnimationTrackingData});s.superclass.save.apply(this,arguments)},_showDialog:function e(){var t=this.get("dialog");var a=this.get("id");t.detach(a+"|ready");t.on(a+"|ready",function(e){this.trackAnimationFieldsChange({fields:[t.getField("blockAnimation")],eventName:"quote_animation_selection_change",dataInitializer:this._prepareAnimationTrackingData})},this);s.superclass._showDialog.call(this)},_prepareAnimationTrackingData:function(){var e=this.get("model");var t=this.get("dialog");var a=e?e.layout.get("collectionId"):null;var i=t.getField("blockAnimation").get("data");var s={collectionId:a,blockAnimationSelection:i};u.userSelectQuoteAnimationOverride(i);return s},_getDialogConfig:function(){var e={title:n("Quote"),icon:"/universal/images-v6/icons/icon-quote-16-light-solid.png",scroll:true,fields:[{ctor:i.Squarespace.DialogFields.Description,config:{text:n('Add a quote that stands out on the page. In most templates, you can change its font and color by navigating to <strong>Home &rsaquo; Design &rsaquo; Style Editor</strong>. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:r.QUOTE_EDITOR})}},{ctor:i.Squarespace.DialogFields.TextArea,config:{name:"quote","strings.placeholder":n("Enter quote…"),height:110}},{ctor:i.Squarespace.DialogFields.Text,config:{name:"source",submitOnEnter:true,"strings.placeholder":n("Enter source…")}}]};var t=[e];var a=l.isSevenOne();t.push({tabTitle:n("Animations"),fields:[{ctor:i.Squarespace.DialogFields.Select,config:{name:"blockAnimation","strings.title":n("Animate Quote Block"),className:"thin dark",options:o([a&&c.SITE_DEFAULT,a&&c.NO_ANIMATION,!a&&c.NONE,c.FADE_IN,c.FOCUS_IN,c.SLIDE_UP,c.REVEAL])}}]});return{width:420,tabs:t}}},{ATTRS:{dialogConfig:{valueFn:"_getDialogConfig"}}})},"1.0",{requires:["base","@sqs/layout-engine/block-editor-base","squarespace-damask-context-globals","squarespace-dialog-select","squarespace-dialog-text-area","squarespace-block-mixin-block-animation-analytics"]})},"./src/main/webapp/universal/scripts-v6/block/quote.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/apps/App/shared/utils/BlockEditorUtils.js");YUI.add("squarespace-block-quote",function(e){e.namespace("Squarespace.Block");e.Squarespace.Block.Quote=e.Base.create("block-quote",e.SQS.LayoutEngine.Block.Quote,[e.Squarespace.Block.PremiumBlockMixin],{},{ATTRS:{editor:{valueFn:function(){return i.isBlockEditorEnabled(this.get("blockTypeName"))?e.Squarespace.Block.Editor.Schema:e.Squarespace.Block.Editor.Quote}}}})},"1.0",{requires:["base","@sqs/layout-engine/block-quote","@sqs/layout-engine/block-model-quote","squarespace-block-quote-editor","squarespace-block-schema-editor","squarespace-premium-block-mixin"]})},"./src/main/webapp/universal/scripts-v6/block/rss-editor.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/frontend/packages/enums/CollectionTypes.js");var n=a("./src/main/webapp/universal/src/shared/constants/HelpLinks.js");YUI.add("squarespace-block-rss-editor",function(e){e.namespace("Squarespace.Block.Editor").Rss=e.Base.create("rss-block-editor-dialog",e.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return e.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Rss")}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Rss")}}});e.namespace("Squarespace.Block.ModelEditorDialog").Rss=e.Base.create("blockRssEditor",e.Squarespace.ModelEditorDialog,[],{_getDefaultDialogConfig:function(){return{width:350,height:320,primaryTabs:[{title:i("RSS Block"),icon:"/universal/images-v6/icons/icon-rss-16-light-solid.png",scroll:true,fields:[{ctor:e.Squarespace.DialogFields.Description,config:{text:i('Create a link to your Blog Page\'s RSS feed to encourage visitors to subscribe using their RSS reader. <a href="{helpLink}" target="_blank">Learn more</a><br><br>Start by selecting one of your pages below:',{helpLink:n.RSS_EDITOR})}},{ctor:e.Squarespace.DialogFields.ContentIdSelector,config:{name:"collectionId",showCollectionTagsAndCategories:false,showGroupTitles:false,collectionFilter:{collectionType:s.COLLECTION_TYPE_GENERIC,ordering:e.Squarespace.CollectionOrdering.CHRONOLOGICAL,folder:false},emptyMessage:i("No Blog Pages yet. Go to the pages panel and click a + to add new content.")}}]}]}}},{NS:"rssEditor",ATTRS:{dialogConfig:{valueFn:"_getDefaultDialogConfig",validator:e.Lang.isObject}}})},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-content-collection-utils","squarespace-damask-context-globals","squarespace-dialog-content-selector","squarespace-dialog-description","squarespace-models-content-collection"]})},"./src/main/webapp/universal/scripts-v6/block/rss.js":function(e,t,a){var i=a("./src/main/webapp/frontend/packages/enums/BlockType.js");var s=a("./src/main/webapp/universal/src/apps/App/shared/utils/BlockEditorUtils.js");YUI.add("squarespace-block-rss",function(e){e.namespace("Squarespace.ContentModel").RSSBlock=e.Base.create("RSSBlockModel",e.Model,[],{},{ATTRS:{collectionId:{}}});e.namespace("Squarespace.Block").Rss=e.Base.create("block-rss",e.SQS.LayoutEngine.Block.ModelSyncBase,[e.Squarespace.Block.PremiumBlockMixin],{},{MODEL:e.Squarespace.ContentModel.RSSBlock,ATTRS:{editor:{valueFn:function(){return s.isBlockEditorEnabled(this.get("blockTypeName"))?e.Squarespace.Block.Editor.Schema:e.Squarespace.Block.Editor.Rss}},type:{value:i.RSS}},CSS_PREFIX:"sqs-block-rss"})},"1.0",{requires:["base","model","@sqs/layout-engine/block-model-sync-base","squarespace-models-content-collection","squarespace-block-rss-editor","squarespace-block-schema-editor","squarespace-premium-block-mixin"]})},"./src/main/webapp/universal/scripts-v6/block/scheduling-editor.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var r=a("./common/temp/node_modules/lodash/cloneDeep.js");var s=a("./src/main/webapp/universal/src/apps/App/components/SchedulingEditorDialog/index.js");var n=a("./src/main/webapp/universal/src/apps/App/components/SchedulingEditorDialog/actions/SchedulingEditorDialogActions.js");var o=a("./src/main/webapp/universal/src/apps/App/components/SchedulingEditorDialog/stores/SchedulingEditorDialogStore.js");var l=a("./src/main/webapp/universal/src/apps/App/components/SchedulingEditorDialog/stores/selectors.js").isDirty;var c=a("./src/main/webapp/universal/src/apps/App/components/SchedulingEditorDialog/utils/transformStateToDatabaseFormat.js");var u=a("./src/main/webapp/universal/src/shared/utils/validation/schedulingUrlValidator.js");var d=null;YUI.add("squarespace-block-scheduling-editor",function(e){e.namespace("Squarespace.Block.Editor");e.Squarespace.Block.Editor.Scheduling=e.Base.create("scheduling-block-editor-dialog",e.Squarespace.Block.Editor.Dialog,[],{initializer:function(){this.prevState=null;var e=this.configDialog.get("dialog");e.on("show",this.initializeDialog,this);e.on("cancel",this.onCancel,this);e.on("preClose",this.handleUrlValidation,this);e.on("button-saveAndClose",this.onSaveAndClose,this);e.on("send-requested",this.onSaveAndClose,this);this.onStateChange=this.onStateChange.bind(this);this.onWindowFocus=this.onWindowFocus.bind(this);this.onAlertConfirm=this.onAlertConfirm.bind(this);o.listen(this.onStateChange);window.addEventListener("focus",this.onWindowFocus)},onCancel:function(){var e=this.configDialog.get("model");n.revertEdits(e.get("clientId"))},handleUrlValidation:function(){var e=this.configDialog.get("model");var t=e.get("acuityUrl");if(!u(t)){n.change(e.get("clientId"),{urlValidationErrorMessage:i("Link should be a valid scheduling link from Squarespace or Acuity Scheduling.")});return false}return true},onSaveAndClose:function(){var e=this.configDialog.get("model");n.commitEdits(e.get("clientId"))},destructor:function(){o.unlisten(this.onStateChange);var e=this.configDialog.get("model");n.reset.defer(e.get("clientId"));window.removeEventListener("focus",this.onWindowFocus)},onWindowFocus:function(){n.maybeFetchData()},onStateChange:function(e){var t=this.prevState;this.prevState=r(e);t&&t.userDataRequestFailed||!e.userDataRequestFailed||this.showErrorAlert();if(!e.userDataRequestResolved)return;var a=this.configDialog.get("model");var i=a.get("clientId");var s=e.selectionState[i];if(!s)return;var n=c(e,i);setTimeout(function(){e.userData&&a.set("userId",e.userData.userId);a.setAttrs(n)})},showErrorAlert:function(){if(d)return;d=new e.Squarespace.Widgets.Alert({position:e.Squarespace.Widgets.Confirmation.ANCHOR.CENTER,"strings.title":i("Connection Error"),"strings.message":i("Make sure you’re connected to the Internet and try again. If the problem persists, contact us.")});d.on("confirm",this.onAlertConfirm)},onAlertConfirm:function(){n.resolveFetchDataFailure();d=null},initializeDialog:function e(){var t=this.configDialog.get("model").getAttrs();n.startEditing(t)},_getModelEditor:function(){return e.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Scheduling")}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Scheduling")}}});e.namespace("Squarespace.Block.ModelEditorDialog");e.Squarespace.Block.ModelEditorDialog.Scheduling=e.Base.create("block-scheduling-editor",e.Squarespace.ModelEditorDialog,[],{_getDialogConfig:function(){return{width:340,height:425,discardChangesConfirmation:true,initialDataByReference:true,tabs:[{title:i("Scheduling"),name:"scheduling",reactData:{component:s,props:{clientId:{$valueFn:function(){return this.get("model").get("clientId")}.bind(this)},getData:{$valueFn:function(){return function(){return{isDirty:l(o.getState(),this.get("model").get("clientId"))}}.bind(this)}.bind(this)}}}}]}}},{ATTRS:{dialogConfig:{valueFn:"_getDialogConfig",validator:e.Lang.isObject}}})},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-damask-context-globals","squarespace-model-editor"]})},"./src/main/webapp/universal/scripts-v6/block/schema-editor-base.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/utils/BlockSchemasUtils.js");var s=a("./src/main/webapp/universal/src/shared/utils/mediaQueries.js");YUI.add("squarespace-block-schema-editor-base",function(e){e.namespace("Squarespace.Block.Editor");var t=e.Squarespace.Block.Editor.SchemaBase=e.Base.create("squarespace-block-schema-editor-base",e.SQS.LayoutEngine.Block.Editor.SchemaBase,[],{initializer:function(){t.superclass.initializer.call(this);this._registerEvent(this.after("isBlockEditorOpenChange",this._renderEditor,this))},_renderEditor:function(){throw new Error("_renderEditor not implemented")},openEditor:function(){this.fire("show");this.set("isBlockEditorOpen",true)},closeEditor:function(){this.fire("dismiss");this.set("editing",false);this.set("isBlockEditorOpen",false)},handleOnChange:function(e){this.get("host").get("model").setAttrs(e);this.fire("render-anchor",e)}},{NS:"blockEditor",ATTRS:{blockName:{valueFn:function(){var e=this.get("host").get("blockTypeName");return i.meta.getTitle(e)}},eventNames:{value:["show","dismiss"]},editingEvent:{value:s.isMobile()?["click"]:["dblclick"]},editingButtons:{value:!s.isMobile()},isBlockEditorOpen:{value:false,validator:e.Squarespace.AttrValidators.isBoolean}}})},"1.0",{requires:["@sqs/layout-engine/block-schema-editor-base","@sqs/layout-engine/block-editor-base"]})},"./src/main/webapp/universal/scripts-v6/block/schema-editor.js":function(e,t,a){var n=a("./common/temp/node_modules/react/index.js");var r=a("./common/temp/node_modules/react-dom/index.js");var o=a("./src/main/webapp/universal/src/apps/App/components/Blocks/BlockEditor.js");var l=a("./src/main/webapp/universal/src/shared/utils/BlockSchemasUtils.js");var i=a("./common/temp/node_modules/@sqs/block-schemas/build/index.js");var s=a("./common/temp/node_modules/@sqs/block-editor-schemas/dist/cjs/index.js");var c=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var u=a("./src/main/webapp/universal/src/shared/utils/mediaQueries.js");var d=a("./src/main/webapp/universal/src/apps/App/shared/utils/BlockEditorUtils.js");function p(e,t){return e.handlers&&e.handlers[t]&&"function"===typeof e.handlers[t]}YUI.add("squarespace-block-schema-editor",function(a){a.namespace("Squarespace.Block.Editor");a.Squarespace.Block.Editor.Schema=a.Base.create("EditingDialog",a.Squarespace.Block.Editor.SchemaBase,[],{_renderEditor:function(){var e=this.get("host");var t=this.getEditorConfig();p(t,"onBeforeMount")?t.handlers.onBeforeMount(e,this.get("isBlockEditorOpen")).then(this._doRenderEditor.bind(this)):this._doRenderEditor()},_doRenderEditor:function(){var e=this.get("host");var t=e.get("srcNode").getDOMNode();var a=this.get("isBlockEditorOpen");var i=e.get("boundingBox");var s=this.getEditorConfig();e.hasPlugin("insertPoint")&&e.insertPoint.toggleInsertPointsDisabled(a);i.toggleClass("sqs-edit-dialog-open",a);r.render(n.createElement(o,{host:e,hostNode:t,id:e.get("id"),blockTypeName:this.getEditorConfigKey(),config:s,initialValue:l.getValueWithDefaults(e.get("model").toJSON(),s.defaultData),isOpen:a,onRequestClose:this.closeEditor.bind(this),onChange:this.handleOnChange.bind(this)}),this.getEditorHost())},destructor:function(){var e=this.getEditorHost();r.unmountComponentAtNode(e);e.parentNode&&e.parentNode.removeChild(e)},getEditorHost:function(){var e=this.get("host").get("id");var t="editor"+e;var a=document.getElementById(t);if(a)return a;a=document.createElement("div");a.id=t;document.body.appendChild(a);return a},getEditorConfig:function(){var e=this.getEditorConfigKey();var t=i[e+"_web"]||i[e];d.isBlockEditorV2Enabled(e)&&(t=s.blocks[e]);if(!t.uiSchema||0===t.uiSchema.length)return this.getConfigWithEditingButtons({meta:t.meta,uiSchema:[{type:"context",title:c("Unsupported block"),properties:{description:c("Currently, editing this block is not supported.<br>Visit Squarespace from your desktop computer to edit this block.")}}]});return a.merge(this.get("defaultEditorConfig"),this.getConfigWithEditingButtons(t))},getConfigWithEditingButtons:function(e){return u.isMobile()?Object.assign({},e,{uiSchema:e.uiSchema.concat([{type:"spacer",properties:{gridMultiplier:2}},{type:"button",properties:{color:"warning",label:c("Remove block"),withConfirmation:{leftButtonLabel:c("No"),rightButtonLabel:c("Yes"),title:c("Remove this block?"),message:c("This will delete the block and its content. This cannot be undone.")},onClick:this.removeBlock.bind(this)}}])}):e}},{NS:"blockEditor",ATTRS:{editingOverlay:{valueFn:function(){return a.Node.create('<div class="sqs-editing-overlay"></div>')}}}})},"1.0",{requires:["squarespace-block-schema-editor-base"]})},"./src/main/webapp/universal/scripts-v6/block/search-editor.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/frontend/packages/enums/CollectionTypes.js");var n=a("./src/main/webapp/universal/src/shared/constants/HelpLinks.js");YUI.add("squarespace-block-search-editor",function(a){a.namespace("Squarespace.Block.Editor");a.Squarespace.Block.Editor.Search=a.Base.create("search-block-editor-dialog",a.Squarespace.Block.Editor.Dialog,[],{initializer:function(e){var t=this.configDialog.get("dialog");this._dialogReady=false;a.Lang.isValue(t)?t.on("ready",function(){var e=t.getField("collectionFilter");if(e){e.after("dataChange",this._onCollectionFilterCheckChange,this);false===t.getField("collectionFilter").get("data")&&t.getField("collectionId").hide()}},this):this._dialogReady=true},_onCollectionFilterCheckChange:function(e){var t=this.configDialog.get("dialog");var a=t.getField("collectionId");var i=true!==e.newVal;if(i){a.clearSelected();a.set("data",{urlId:null,filter:null,id:null});a.hide()}else a.show()},_getModelEditor:function(){return a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Search")}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Search")}}});var e={title:i("Search"),width:335,height:350,tabs:[{tabTitle:i("Content"),icon:"/universal/images-v6/icons/icon-search-16-light.png",scroll:true,fields:[{ctor:a.Squarespace.DialogFields.Description,config:{text:i('Add a search field to your page that returns results from across your site, or limited to one page. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:n.SEARCH_EDITOR}),padding:[0,20]}},{ctor:a.Squarespace.DialogFields.Check,name:"collectionFilter",config:{"strings.title":i("Search Specific Page"),"strings.description":i("Limit results to one page.")}},{ctor:a.Squarespace.DialogFields.ContentIdSelector,config:{name:"collectionId",showCollectionTagsAndCategories:false,showGroupTitles:true,collectionFilter:{collectionType:[s.COLLECTION_TYPE_GENERIC,s.PRODUCTS],ordering:[a.Squarespace.CollectionOrdering.USER,a.Squarespace.CollectionOrdering.CHRONOLOGICAL,a.Squarespace.CollectionOrdering.CALENDAR],folder:false},emptyMessage:i("There are no searchable pages yet.")}}]},{tabTitle:i("Display"),icon:"/universal/images-v6/icons/icon-search-16-light.png",scroll:true,fields:[{ctor:a.Squarespace.DialogFields.Check,name:"searchPreview",config:{"strings.title":i("Quick Preview"),"strings.description":i("A dropdown under the search block will allow a quicker access to the search results."),defaultValue:true}},{ctor:a.Squarespace.DialogFields.Select,config:{name:"theme","strings.title":i("Theme"),className:"thin dark",defaultValue:"dark",options:[{value:"dark",label:i("Dark")},{value:"light",label:i("Light")}]}}]}]};a.namespace("Squarespace.Block.ModelEditorDialog").Search=a.Base.create("block-search-editor",a.Squarespace.ModelEditorDialog,[],{},{ATTRS:{dialogConfig:{valueFn:function(){return e}}}})},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-damask-context-globals","squarespace-dialog-check","squarespace-dialog-content-selector","squarespace-model-editor"]})},"./src/main/webapp/universal/scripts-v6/block/search-gallery-model-editor.js":function(e,t,a){var s=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-block-search-gallery-model-editor",function(a){a.namespace("Squarespace.Block.ModelEditorDialog");var i=a.Squarespace.Block.ModelEditorDialog.SearchGallery=a.Base.create("SearchGalleryModelEditorDialog",a.Squarespace.Block.ModelEditorDialog.SocialSearch,[a.Squarespace.Block.Mixins.Gallery],{sanitizeDialogData:function(e){e=a.merge(e,e.options);delete e.options;"slider"!==e.design?e.aspectRatio=null:delete e.aspectRatio;e.vSize=null;return e},_isSocialSearchEnabled:function(){return i.superclass._isSocialSearchEnabled.call(this)},_getDefaultDialogConfig:function(){var e=i.superclass._getDefaultDialogConfig.call(this);var t=e.tabs[0];e.tabs.push({title:t.title,tabTitle:s("Design"),icon:t.icon,scroll:true,fields:[{ctor:a.Squarespace.DialogFields.GalleryOptions,name:"options",config:{options:this._getGalleryOptions()}}]});e.height=420;return e},_getDefaultContent:function(){var e={methodOption:"transient"};var t=this._defaultGalleryOptions();return a.merge(t,e)}},{ATTRS:{}})},"1.0",{requires:["base","squarespace-block-mixin-gallery-option-sync","squarespace-dialog-gallery-options","squarespace-block-social-summary-model-editor","squarespace-block-social-search-model-editor","squarespace-block-summary-gallery-model"]})},"./src/main/webapp/universal/scripts-v6/block/search.js":function(e,t,a){var s=a("./src/main/webapp/frontend/packages/enums/BlockType.js");var n=a("./src/main/webapp/universal/src/apps/App/shared/utils/BlockEditorUtils.js");YUI.add("squarespace-block-search",function(a){var i=a.namespace("Squarespace.Block").Search=a.Base.create("block-search",a.SQS.LayoutEngine.Block.ModelSyncBase,[a.Squarespace.Block.PremiumBlockMixin],{destructor:function(){this._searchPreview&&this._searchPreview.destroy()},_renderSuccess:function(e){i.superclass._renderSuccess.call(this,e);var t=this.get("contentBox").one(".sqs-search-ui-text-input");if(a.Lang.isValue(t)){t.detach("click");this._searchPreview=new a.Squarespace.Widgets.SearchPreview({render:t})}}},{CSS_PREFIX:"sqs-block-search",ATTRS:{editor:{valueFn:function(){return n.isBlockEditorV2Enabled(this.get("blockTypeName"))?a.Squarespace.Block.Editor.Schema:a.Squarespace.Block.Editor.Search}},type:{value:s.SEARCH}}})},"1.0",{requires:["base","model","squarespace-search-preview","@sqs/layout-engine/block-model-sync-base","squarespace-block-search-editor","squarespace-premium-block-mixin"]})},"./src/main/webapp/universal/scripts-v6/block/social-account-links-editor.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-block-social-account-links-editor",function(e){e.namespace("Squarespace.Block.Editor").SocialAccountLinks=e.Base.create("socialAccountLinksEditor",e.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return e.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.SocialAccountLinks")}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Social Links")}}})},"1.0",{requires:["base","squarespace-block-social-account-links-model-editor","squarespace-damask-context-globals"]})},"./src/main/webapp/universal/scripts-v6/block/social-account-links-legacy-editor.js":function(e,t){YUI.add("squarespace-block-social-account-links-legacy-editor",function(e){e.namespace("Squarespace.Block.Editor").LegacySocialAccountLinks=e.Base.create("legacySocialAccountLinksEditor",e.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return e.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.LegacySocialAccountLinks")}},{NS:"blockEditor"})},"1.0",{requires:["base","squarespace-block-social-account-links-legacy-model-editor","squarespace-damask-context-globals"]})},"./src/main/webapp/universal/scripts-v6/block/social-account-links-legacy-model-editor.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/universal/src/shared/constants/HelpLinks.js");YUI.add("squarespace-block-social-account-links-legacy-model-editor",function(t){t.namespace("Squarespace.Block.ModelEditorDialog").LegacySocialAccountLinks=t.Base.create("SocialAccountLinksLegacyModelEditor",t.Squarespace.Block.ModelEditorDialog.SocialAccountLinks,[],{initializer:function(){var e=this.get("dialogConfig");e.tabs=[{tabTitle:i("Links"),title:i("Edit Social Links"),icon:"/universal/images-v6/icons/icon-social-18-light.png",scroll:true,fields:[{ctor:t.Squarespace.DialogFields.Description,config:{text:i('This Social Links block that has been deprecated and can no longer be edited. To update your social links, please remove this block and add a new one. <a href="{helpLinkSocialLinks}" target="_blank">Learn more</a>',{helpLinkSocialLinks:s.SOCIAL_LINKS_BLOCK})}}]},e.tabs[1]]}})},"1.0",{requires:["base","squarespace-block-social-account-links-model-editor"]})},"./src/main/webapp/universal/scripts-v6/block/social-account-links-legacy-model.js":function(e,t){YUI.add("squarespace-block-social-account-links-legacy-model",function(e){e.namespace("Squarespace.ContentModel").SocialAccountLinksLegacyBlock=e.Base.create("SocialAccountLinksLegacyBlockModel",e.Squarespace.ContentModel.SocialAccountLinksBlock,[],{},{ATTRS:{accountIds:{valueFn:function(){return e.Array.map(e.Squarespace.Block.SocialAccountLinksUtils.getAccountsWithProfileUrl(),function(e){return e.id})}}}})},"1.0",{requires:["squarespace-block-social-account-links-model"]})},"./src/main/webapp/universal/scripts-v6/block/social-account-links-model-editor.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/universal/src/shared/utils/TemplateVersionUtils.js");YUI.add("squarespace-block-social-account-links-model-editor",function(t){var e={socialAccountPickerAccounts:{$valueFn:function(e){return t.Squarespace.Block.SocialAccountLinksUtils.getAccountsWithProfileUrl(e)}},iconAlignmentOptions:{$valueFn:function(){var e=t.Squarespace.SocialIconAlignments;return[{value:e.LEFT,label:i("Left")},{value:e.CENTER,label:i("Center")},{value:e.RIGHT,label:i("Right")}]}},iconSizeOptions:{$valueFn:function(){var e=t.Squarespace.SocialIconSizes;return[{value:e.XSMALL,label:i("Extra Small")},{value:e.SMALL,label:i("Small")},{value:e.DEFAULT,label:i("Medium")},{value:e.LARGE,label:i("Large")},{value:e.XLARGE,label:i("Extra Large")}]}},iconColorOptions:{$valueFn:function(){var e=t.Squarespace.SocialIconColors;return[{value:e.BLACK,label:i("Dark")},{value:e.WHITE,label:i("Light")},{value:e.STANDARD,label:i("Standard")}]}},iconStyleOptions:{$valueFn:function(){var e=t.Squarespace.SocialIconStyles;return[{value:e.ICON_ONLY,label:i("Regular")},{value:e.ROUND_BORDER,label:i("Circle - Border")},{value:e.ROUND,label:i("Circle - Knockout")},{value:e.ROUND_SOLID,label:i("Circle - Solid")},{value:e.REAL_SQUARE_BORDER,label:i("Square - Border")},{value:e.REAL_SQUARE,label:i("Square - Knockout")},{value:e.REAL_SQUARE_SOLID,label:i("Square - Solid")},{value:e.SQUARE_BORDER,label:i("Rounded - Border")},{value:e.SQUARE,label:i("Rounded - Knockout")},{value:e.SQUARE_SOLID,label:i("Rounded - Solid")}]}}};var a={width:340,height:440,title:i("Edit Social Links"),tabs:[{tabTitle:i("Accounts"),name:"accounts",scroll:true,fields:[{ctor:t.Squarespace.DialogFields.ConnectedAccounts}]},{icon:"/universal/images-v6/icons/icon-social-18-light.png",tabTitle:i("Design"),name:"design",scroll:true,fields:[{ctor:t.Squarespace.DialogFields.Select,config:{titleStyle:"top",name:"iconAlignment",className:"thin dark","strings.title":i("Alignment"),options:{$include:"iconAlignmentOptions"}}},{ctor:t.Squarespace.DialogFields.Select,config:{titleStyle:"top",name:"iconSize","strings.title":i("Size"),className:"thin dark",options:{$include:"iconSizeOptions"}}},{ctor:t.Squarespace.DialogFields.Select,config:{titleStyle:"top",name:"iconStyle","strings.title":i("Style"),className:"thin dark",options:{$include:"iconStyleOptions"}}},{ctor:t.Squarespace.DialogFields.Select,config:{name:"iconColor","strings.title":i("Color"),className:"thin dark",options:{$include:"iconColorOptions"},visible:!s.isSevenOne()}}]}]};t.namespace("Squarespace.Block.ModelEditorDialog").SocialAccountLinks=t.Base.create("socialAccountLinks",t.Squarespace.ModelEditorDialog,[],{},{ATTRS:{dialogConfig:{value:a},dialogConfigContext:{value:e}}})},"1.0",{requires:["base","squarespace-model-editor","squarespace-dialog-description","squarespace-dialog-select","squarespace-dialog-connected-accounts"]})},"./src/main/webapp/universal/scripts-v6/block/social-account-links-model.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/utils/TemplateVersionUtils.js");YUI.add("squarespace-block-social-account-links-model",function(e){e.namespace("Squarespace.ContentModel").SocialAccountLinksBlock=e.Base.create("SocialAccountLinksBlock",e.Model,[],{},{ATTRS:{iconAlignment:{value:"center"},iconSize:{value:"small"},iconStyle:{value:"icon-only"},iconColor:{value:i.isSevenOne()?null:"black"}}})},"1.0",{requires:["base","model"]})},"./src/main/webapp/universal/scripts-v6/block/social-account-links-v2.js":function(e,t,a){var s=a("./src/main/webapp/frontend/packages/enums/BlockType.js");var n=a("./src/main/webapp/universal/src/shared/utils/SvgCompatibility.js");var r=a("./common/temp/node_modules/alt-utils/lib/ActionListeners.js");var o=a("./src/main/webapp/universal/src/shared/dispatchers/alt/index.ts");var l=a("./src/main/webapp/universal/src/apps/App/shared/actions/ConnectedAccountsActions.js");var c=a("./src/main/webapp/universal/src/apps/App/shared/utils/BlockEditorUtils.js");YUI.add("squarespace-block-social-account-links-v2",function(e){var a="/universal/svg/social-accounts.svg";var t={iconAlignment:"center",iconSize:"small",iconStyle:"icon-only",iconColor:"black"};var i=e.namespace("Squarespace.Block").SocialAccountLinksV2=e.Base.create("block-social-account-links-v2",e.SQS.LayoutEngine.Block.ModelSyncBase,[e.Squarespace.Block.PremiumBlockMixin],{initializer:function(){this.actionListener=new r(o);this.actionListener.addActionListener(l.REFRESH_LAYOUT_ENGINE,this.refreshSocialIcons.bind(this))},destructor:function(){this.actionListener.removeAllActionListeners();this.actionListener=null},refreshSocialIcons:function(){try{this._renderBlock()}catch(e){console.warn(e)}},_renderSuccess:function(){i.superclass._renderSuccess.apply(this,arguments);this.get("contentBox").all("svg use").each(function(e){var t=e.getAttribute("xlink:href");-1===t.indexOf(a)&&e.setAttribute("xlink:href",a+t)});n.parse()}},{CSS_PREFIX:"sqs-block-socialaccountlinks",MODEL:e.Squarespace.ContentModel.SocialAccountLinksBlock,ATTRS:{type:{value:s.SOCIAL_ACCOUNT_LINKS_V2},editor:{valueFn:function(){return c.isBlockEditorEnabled(this.get("blockTypeName"))?e.Squarespace.Block.Editor.Schema:e.Squarespace.Block.Editor.SocialAccountLinks}},defaultContentModel:{value:t}}})},"1.0",{requires:["base","model","squarespace-block-social-account-links-model","squarespace-block-social-account-links-editor","@sqs/layout-engine/block-model-sync-base","squarespace-premium-block-mixin"]})},"./src/main/webapp/universal/scripts-v6/block/social-account-links.js":function(e,t,a){var i=a("./src/main/webapp/frontend/packages/enums/BlockType.js");YUI.add("squarespace-block-social-account-links",function(o){o.namespace("Squarespace.Block").SocialAccountLinksUtils={getAccountsWithProfileUrl:function(e){var a=[];var t=o.config.win.Static.SQUARESPACE_CONTEXT.website.socialAccounts;t=t||o.Squarespace.Models.ConnectedAccounts.loadFromStore();var i=o.Array.map(t,function(e){return o.clone(e,true)});if(e&&e.get("accountIds")){var s=e.get("accountIds");var n=o.Squarespace.Block.SocialAccountLinksUtils._indexById(i);o.Array.each(s,function(e){var t=n[e];t&&a.push(t)});var r=o.Array.filter(i,function(e){return-1===s.indexOf(e.id)},this);a=a.concat(r)}else a=i;return o.Array.filter(a,function(e){return!!e.profileUrl})},_indexById:function(e){return o.Array.reduce(e,{},function(e,t){e[t.id]=t;return e})}};o.namespace("Squarespace.Block").SocialAccountLinks=o.Base.create("block-legacy-social-account-links",o.SQS.LayoutEngine.Block.ModelSyncBase,[o.Squarespace.Block.PremiumBlockMixin],{},{CSS_PREFIX:"sqs-block-socialaccountlinks",MODEL:o.Squarespace.ContentModel.SocialAccountLinksLegacyBlock,ATTRS:{type:{value:i.SOCIAL_ACCOUNT_LINKS},editor:{value:o.Squarespace.Block.Editor.LegacySocialAccountLinks}}})},"1.0",{requires:["base","@sqs/layout-engine/block-model-sync-base","squarespace-block-social-account-links-legacy-editor","squarespace-block-social-account-links-legacy-model","squarespace-premium-block-mixin","squarespace-models-connected-accounts"]})},"./src/main/webapp/universal/scripts-v6/block/social-search-model-editor.js":function(e,t,a){var E=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-block-social-search-model-editor",function(C){C.namespace("Squarespace.Block.ModelEditorDialog");var s=C.Squarespace.Block.ModelEditorDialog.SocialSearch=C.Base.create("SocialSearchModelEditorDialog",C.Squarespace.Block.ModelEditorDialog.SocialSummary,[],{initializer:function(e){var i=this.get("dialog");if(this._isSocialSearchEnabled()){i.on("ready",function(){var e=i.getField("collectionId");var t=i.getField("enable-search");var a=i.getField("refresh");C.Lang.isValue(e)&&e.after("dataChange",this._onAccountSelectedChange,this);C.Lang.isValue(t)&&t.after("dataChange",this._onCollectionFilterCheckChange,this);C.Lang.isValue(a)&&a.on("click",this._refreshEditor,this);this._updateSocialFieldsVisibility(this._isValidAccountForSearch())},this);i.on("cancel",function(){var e=this.get("model");var t=i.getField("previewCollectionId");e.setAttrs({previewCollectionId:null});C.Lang.isValue(t)&&t.set("data",null);e.setAttrs({previewCollectionId:null})},this)}},_validateCriteria:function(e){var t=this._getWebserviceData(e);var a=t.socialDataModel.get("socialSearch");var i=this.get("model");var s=i.get("searchTerm");if(!C.Lang.isValue(t.account)){new C.Squarespace.Widgets.Alert({"strings.title":E("Connect an Account"),"strings.message":E("In order to display your items, we'll need a valid account connection. Edit this block and select an existing connected account from the dropdown, or select <strong>Add an Account</strong> to connect a new one.")});return false}var n=this.get("socialDataModel");a=n.get("socialSearch");C.Lang.isValue(a)&&(s=a.searchTerm);if(!C.Lang.isValue(s)||""===s){new C.Squarespace.Widgets.Alert({"strings.title":E("Search term required"),"strings.message":E("Please define a search term to be used.")});return false}return true},_cleanup:function(e,t,a){var i=this.get("dialog");var s=i.getField("previewCollectionId");var n=this.get("socialDataModel");C.Lang.isValue(s)&&s.set("data",null);if(C.Lang.isValue(t)&&""!==t){n.setAttrs({socialSearch:{id:null,collectionId:e,referenceId:null,referenceType:null,serviceProvider:a},searchFlag:this._isSearching(),socialCollectionId:e,previewCollectionId:t,preview:true});var r=this;n.save(function(e){var t=n.get("error");if(!e&&!C.Lang.isValue(t)&&n.get("synced")&&r._isSocialSearchEnabled()){var a=r._getUpdateData(n);r._updateData(a)}})}},_refreshEditor:function(){var e=true;var t=this._getWebserviceData(e);var a=this._validateCriteria(e);a&&this._syncAccount(t,false)},_isSocialSearchEnabled:function(){return this.get("socialSearchEnabled")},_updateSocialFieldsVisibility:function(e){var t=e&&this._isSocialVisible();var a=this._getSocialFieldNames();var i=this.get("dialog");var s=C.Array.map(a,function(e){return i.getField(e)},this);var n=C.Array.partition(s,function(e){if(!C.Lang.isValue(e))return false;return t},this);var r=C.Array.filter(n.matches,C.Lang.isValue);C.Array.invoke(r,"show");var o=C.Array.filter(n.rejects,C.Lang.isValue);C.Array.invoke(o,"hide")},_isValidAccountForSearch:function(){return true},_onAccountSelectedChange:function(e){var t=this.get("dialog");var a=this._isValidAccountForSearch();var i=t.getField("enable-search");var s=t.getField("enable-search-disabled");if(a){C.Lang.isValue(i)&&i.show();C.Lang.isValue(s)&&s.hide()}else{C.Lang.isValue(i)&&i.hide();C.Lang.isValue(s)&&s.show()}this._updateSocialFieldsVisibility(a)},_onCollectionFilterCheckChange:function(e){this._updateSocialFieldsVisibility(this._isValidAccountForSearch());var t=this._getCollectionOptions();var a=this._getConnectedAccounts(t);if(this._isSearching()&&0===a.length){var i=new C.Squarespace.Widgets.Alert({"strings.title":E("Connect an Account"),"strings.message":E("A connected account is required to use the search feature. In the popup window that will appear, authorize Squarespace to connect this account to your site.")});i.on("confirm",C.bind(this._onAddAccountClick,this))}},_isSocialVisible:function(){var e=this.get("dialog");var t=e.getField("enable-search");return this._isSocialSearchEnabled()&&t&&t.get("data")},_getSocialCollectionId:function(){if(!this._isSocialSearchEnabled())return null;var e=this.get("model");var t=e.get("socialCollectionId");var a=C.Lang.isString(t)&&t.length>0;if(a)return t;return null},_getPreviewCollectionId:function(){if(!this._isSocialSearchEnabled())return null;var e=this.get("model");var t=e.get("previewCollectionId");var a=C.Lang.isString(t)&&t.length>0;if(a)return t;return null},_getServiceId:function(){return null},_getSocialFieldNames:function(){return["searchTerm","refresh","unsafeSearch"]},_getSocialData:function(){var t={};var e=this._getSocialFieldNames();var a=this.get("model");C.Array.each(e,function(e){t[e]=a.get(e)},this);return t},_getUpdateData:function(t){var a={};var e="";var i=this._getSocialFieldNames();var s=this.get("dialog").getField("collectionId");C.Lang.isValue(s)&&(e=s.get("data"));if(C.Lang.isValue(t))if(t.get("searchFlag")){a={collectionId:t.get("socialSearch").collectionId,connectedAccountId:e,socialCollectionId:t.get("socialSearch").collectionId,previewCollectionId:t.get("previewCollectionId"),preview:t.get("preview"),status:t.get("socialSearch").status,searchId:t.get("socialSearch").id};C.Array.each(i,function(e){C.Lang.isValue(t.get(e))&&(a[e]=t.get(e))})}else{a={collectionId:t.get("socialSearch").collectionId,connectedAccountId:null,socialCollectionId:null,previewCollectionId:null,preview:false,status:t.get("socialSearch").status,searchId:t.get("socialSearch").id};C.Array.each(i,function(e){C.Lang.isValue(t.get(e))&&(a[e]=null)})}else{a={collectionId:e,connectedAccountId:e,socialCollectionId:null,previewCollectionId:null,preview:false};this.get("model").set("enable-search",false);this.get("dialog").getField("enable-search").set("data",false);C.Array.each(i,function(e){a[e]=null})}return a},_updateData:function(i){var s=this.get("dialog");var e=this._getSocialFieldNames();var t=s.getField("collectionId");var a=s.getField("socialCollectionId");var n=s.getField("previewCollectionId");var r=s.getField("connectedAccountId");var o=i.previewCollectionId;var l=s.getField("status");var c=s.getField("searchId");i.preview||(o=null);C.Lang.isValue(t)&&t.set("data",i.connectedAccountId);C.Lang.isValue(a)&&a.set("data",i.socialCollectionId);C.Lang.isValue(n)&&n.set("data",o);C.Lang.isValue(r)&&r.set("data",i.connectedAccountId);C.Lang.isValue(l)&&l.set("data",""+i.status);C.Lang.isValue(c)&&c.set("data",""+i.searchId);this.get("model").setAttrs({collectionId:i.collectionId,socialCollectionId:i.socialCollectionId,previewCollectionId:o,connectedAccountId:i.connectedAccountId,status:i.status,searchId:i.searchId});C.Array.each(e,function(e){var t=s.getField(e);var a=i[e];C.Lang.isValue(t)&&t.set("data",a);this.get("model").set(e,a)},this)},_getAccount:function(t){var e=this._isValidAccountForSearch();var a=this.get("dialog");var i=this.get("model");var s=i.get("collectionId");var n=e&&this._isSearching();var r=i.get("connectedAccountId");var o=this._getServiceId();var l=a.getField("collectionId");if(!C.Lang.isValue(l))return null;var c=l.get("data");if(!C.Lang.isValue(c)||""===c)return null;var u=C.Squarespace.Models.ConnectedAccounts.loadFromStore().filter({asList:true},function(e){if(C.Lang.isValue(t))return e.get("id")===t;if(e.get("serviceId")===o)return e.get("collectionId")===(r||s)}).item(0);if(u&&!n)i.set("collectionId",u.id);else if(u){var d=a.getField("connectedAccountId");i.set("connectedAccountId",u.id);C.Lang.isValue(d)&&d.set("data",u.id)}return u},_getCurrentAccount:function(t){var e=this.get("dialog");var a=this.get("model");var i=a.get("collectionId");var s=this._getServiceId();var n=e.getField("collectionId");if(C.Lang.isValue(n)){var r=n.get("data");C.Lang.isValue(r)&&"add-account"!==r&&(i=r)}var o=C.Squarespace.Models.ConnectedAccounts.loadFromStore().filter({asList:true},function(e){if(C.Lang.isValue(t))return e.get("id")===t;if(e.get("serviceId")===s)return e.get("collectionId")===i}).item(0);return o},_isSearching:function(){var e=this.get("dialog");var t=e.getField("enable-search");return!!t&&t.get("data")},_getWebserviceData:function(e){var t=this.get("model");if(!t)return{searchFlag:false,socialCollectionId:""};var a={search:true};var i=this.get("socialDataModel");var s=this.get("dialog");var n=this._isValidAccountForSearch();var r=this._getAccount();var o=this._getSocialCollectionId();var l=this._getPreviewCollectionId();var c=this._isSearching();var u=this._getSocialData();var d=this._getSocialFieldNames();var p=this._getServiceId();var h=t.get("pageCollectionId");var g=t.get("containingItemId");var m=t.get("status");var f=t.get("searchId");var v=t.get("searchTerm");var b=!!t.get("unsafeSearch");var S=h;var y=C.Squarespace.SocialSearchReferenceType.PAGE;if(C.Lang.isValue(g)){S=g;y=C.Squarespace.SocialSearchReferenceType.BLOG_POST}else C.Lang.isValue(S)||(y=C.Squarespace.SocialSearchReferenceType.TEMPLATE_INSTALLATION);C.Lang.isValue(m)&&""!==m&&"undefined"!==m||(m=C.Squarespace.SocialSearchStatus.UNDEFINED);C.Lang.isValue(f)&&""!==f&&"undefined"!==f||(f=null);i.setAttrs({socialSearch:{id:f,collectionId:o,referenceId:S,referenceType:y,serviceProvider:p,status:m,searchTerm:v,unsafeSearch:b},searchFlag:c,previewCollectionId:l,preview:e,error:null});C.Lang.isValue(r)&&(a.account=r);C.Array.each(d,function(e){i.set(e,u[e])});var _=n&&this._isSocialSearchEnabled()&&c;if(!e&&!C.Lang.isValue(r)){new C.Squarespace.Widgets.Alert({"strings.title":E("Connect an Account"),"strings.message":E("In order to display your items, we'll need a valid account connection. Edit this block and select an existing connected account from the dropdown, or select <strong>Add an Account</strong> to connect a new one.")});s.allowEditing();return{search:_}}if(!_&&!e)return{search:false};a.socialDataModel=i;return a},_onSendRequested:function(e){var t=this._getWebserviceData(false);if(t.search){if(C.Lang.isValue(t.account)){e.preventDefault();t.search&&this._syncAccount(t,true)}}else{var a=this._getUpdateData();this._updateData(a);this.fire("collectionSynced")}},_syncAccount:function(a,i){var s=a.socialDataModel;var n=this;var r=this.get("dialog");var e=s.get("preview");var t=this._validateCriteria(e);if(!t){r.allowEditing();return}s.save(function(e){if(C.Lang.isValue(e)){new C.Squarespace.Widgets.Information({"strings.title":E("Sync Error"),"strings.message":e.responseJSON.message});r.allowEditing();i&&n.fire("collectionSyncFailedWithError");r.allowEditing()}else{a.account.set("pullEnabled",true);if(s.get("synced")){if(n._isSocialSearchEnabled()){var t=n._getUpdateData(s);n._updateData(t)}i&&n.fire("collectionSynced")}else i&&n._afterSyncAccount()}})},_getDefaultDialogConfig:function(){var e=this.get("model").toJSON();var t=s.superclass._getDefaultDialogConfig.call(this);var a=t.tabs[0].fields;var i=this._isValidAccountForSearch();a.push({ctor:C.Squarespace.DialogFields.Check,name:"enable-search",config:{"strings.title":E("Search"),"strings.description":E("Display results filtered by hashtag, mention, or a specific topic (requires a connected account)."),data:e.enableSearch,visible:i&&this._isSocialVisible()}});a.push({ctor:C.Squarespace.DialogFields.Description,name:"enable-search-disabled",config:{text:E("There is no valid account connected yet. Select an existing connected account from the dropdown, or select <strong>Add an Account</strong> to connect a new one."),visible:!i}});a.push({ctor:C.Squarespace.DialogFields.Text,config:{name:"socialCollectionId",maxLength:100,className:"thin",visible:false,strings:{title:E("Social Collection Id"),description:E("The collection id assigned to the block when the block is created as a social search block.")}}});a.push({ctor:C.Squarespace.DialogFields.Text,config:{name:"previewCollectionId",maxLength:100,className:"thin",visible:false,strings:{title:E("Social Preview Collection Id"),description:E("The collection id assigned to the block when the block is created as a social search block.")}}});a.push({ctor:C.Squarespace.DialogFields.Text,config:{name:"status",maxLength:100,className:"thin",visible:false,strings:{title:E("Social Search Status"),description:E("The status assigned to the block when the block is created as a social search block.")}}});a.push({ctor:C.Squarespace.DialogFields.Text,name:"searchId",config:{"strings.placeholder":E("Social Search ID"),data:e.searchId,maxLength:100,className:"thin",visible:false}});return t}},{ATTRS:{socialSearchEnabled:{value:true},socialDataModel:{value:new C.Squarespace.Models.SocialData}}})},"1.0",{requires:["base","model","squarespace-block-summary-model-editor","squarespace-dialog-button","squarespace-dialog-select","squarespace-dialog-slider","squarespace-model-editor","squarespace-models-connected-accounts","squarespace-models-social-data","squarespace-widgets-information"]})},"./src/main/webapp/universal/scripts-v6/block/social-summary-model-editor.js":function(e,t,a){var l=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var c=a("./src/main/webapp/universal/src/shared/i18n/index.ts").pluralize;var i=a("./src/main/webapp/universal/src/shared/utils/ExternalAuthentication.js");var s=a("./src/main/webapp/universal/src/apps/App/shared/actions/ConnectedAccountsActions.js");YUI.add("squarespace-block-social-summary-model-editor",function(o){o.namespace("Squarespace.Block.ModelEditorDialog");var e=o.Squarespace.Block.ModelEditorDialog.SocialSummary=o.Base.create("SocialSummaryModelEditorDialog",o.Squarespace.Block.ModelEditorDialog.Summary,[],{initializer:function(e){var t=this.get("dialog");t.on("ready",function(){var e=t.getField("collectionId");o.Lang.isValue(e)&&e.after("dataChange",this._checkAddAccount,this)},this);this._publishEvents();var a=["collectionSynced","collectionSyncFailed","collectionSyncFailedWithError"];this.after(a,this._afterSyncAccount,this)},_onAddAccountClick:function(){var a=this._getServiceId();i.authenticate({serviceProvider:a,urlParams:{authenticationType:"website",startSubscription:true}}).then(this._continueAuthentication.bind(this)).catch(function(e){if(window.SQUARESPACE_SENTRY){var t="Issue with ExternalAuthentication: "+a;e&&e.data?window.SQUARESPACE_SENTRY.captureMessage(t+" "+e.data):window.SQUARESPACE_SENTRY.captureMessage(t)}})},_continueAuthentication:function(e){var t=e.socialConfig;if(o.Lang.isValue(t)){var a=t.externalAuthenticationId;this._refreshSocialAccounts(a)}},_checkAddAccount:function(){var e=this.get("dialog");var t=e.getField("collectionId");if(o.Lang.isValue(t)){var a=t.get("data");if("add-account"===a){var i=new o.Squarespace.Widgets.Alert({"strings.title":l("Connecting Account…"),"strings.message":l("In the popup window that will appear, authorize Squarespace to connect this account to your site.")});i.on("confirm",o.bind(this._onAddAccountClick,this));return true}}},_publishEvents:function(){this.publish("accountsRefreshed",{emitFacade:true,defaultFn:this._afterAccountsRefresh});this.publish("collectionSynced",{emitFacade:true,defaultFn:this._onSyncSuccess});this.publish("collectionSyncFailed",{emitFacade:true,defaultFn:this._onSyncFail})},_getConnectedAccounts:function(e){var t=o.Array.partition(e,function(e){return""!==e.value&&"add-account"!==e.value},this);return o.Array.filter(t.matches,o.Lang.isValue)},_refreshSocialAccounts:function(i){s.refreshConnectedAccounts(true).then(function(){var e=this.get("dialog");if(e&&!e.isState(o.Squarespace.DialogStates.CLOSED)){var t=e.getField("collectionId");if(t){var a=this._getAccount(i);t.set("options",this._getCollectionOptions());if(o.Lang.isValue(a)){t.set("visible",true);t.set("data",a.get("collectionId"))}else t.set("data",null)}}this._showOauthCompletePopup()}.bind(this))},_showOauthCompletePopup:function(){new o.Squarespace.Widgets.Information({"strings.title":l("Account Connected"),"strings.message":o.Lang.sub(l("Your {name} account has been connected"),this.get("strings"))})},_getServiceId:function(){return null},_getCollectionOptions:function(){var e=[];var t=this._getServiceId();var a=o.Squarespace.Models.ConnectedAccounts.loadFromStore().filter({asList:true},function(e){return e.get("serviceId")===t});var i=a.sort(function(e,t){return 0+(e.addedOn<t.addedOn)});var s=0===i.toArray().length;s&&e.push({value:"",label:l("Choose an account")});var n=o.Array.reduce(i.toArray(),e,function(e,t){o.Lang.isValue(t.get("collectionId"))&&e.push(this._createSelectOption(t.get("collectionId"),t.get("screenname")));return e},this);n.push({value:"add-account",label:l("Add an account")});return n},_getAccount:function(t){var e=this.get("model");var a=e.get("collectionId");var i=this._getServiceId();var s=o.Squarespace.Models.ConnectedAccounts.loadFromStore().filter({asList:true},function(e){if(o.Lang.isValue(t))return e.get("id")===t;if(e.get("serviceId")===i)return e.get("collectionId")===a}).item(0);s&&e.set("collectionId",s.id);return s},_onSendRequested:function(e){var t=this._getAccount();if(o.Lang.isValue(t))this.fire("collectionSynced");else{new o.Squarespace.Widgets.Alert({"strings.title":l("Connect an Account"),"strings.message":l("In order to display your items, we'll need a valid account connection. Edit this block and select an existing connected account from the dropdown, or select <strong>Add an Account</strong> to connect a new one.")});this.get("dialog").allowEditing()}},_onSyncSuccess:function(e){var t=l("Retrieving past {itemTypePlural}.  Squarespace will pull future {itemTypePlural} from {name} automatically.");var a=o.Lang.sub(t,this.get("strings"));new o.Squarespace.Widgets.Information({"strings.title":l("Sync Successful"),"strings.message":a})},_onSyncFail:function(e){var t=l("Failed to retrieve past {itemTypePlural}. Squarespace will pull future {itemTypePlural} from {name} automatically.");var a=o.Lang.sub(t,this.get("strings"));new o.Squarespace.Widgets.Information({"strings.title":l("Sync Failed"),"strings.message":a})},_afterSyncAccount:function(){e.superclass._onSendRequested.call(this)},_getDefaultDialogConfig:function(){var t=this.get("model");var e=this.get("icon");var a=this.get("strings.name");var i={name:"collectionId",icon:e,strings:{title:l("Connected Account")},className:"thin dark",padding:[10,10],visible:true,options:this._getCollectionOptions()};var s="collectionId";if(i.visible&&!t.get(s)){i.data=i.options[0].value;i.defaultValue=i.options[0].value;t.set(s,i.data)}o.Array.each(i.options,function(e){e.value===t.get(s)&&(i.data=e.value)});var n=[{ctor:o.Squarespace.DialogFields.Select,config:i}];n.push({ctor:o.Squarespace.DialogFields.Text,config:{name:"connectedAccountId",maxLength:100,className:"thin",visible:false,strings:{title:l("Connected Account Id"),description:l("The collection id associated to the connected account used when configuring a search.")}}});n.push({ctor:o.Squarespace.DialogFields.Slider,required:true,config:{name:"pageSize",range:[1,20],getPluralizedSliderLabel:function(e){return c({one:"{%n} Item",other:"{%n} Items"},e)},labelWidth:60,submitOnEnter:true}});var r={loadingText:l("Editing {title}…",{title:a}),width:395,tabs:[{title:a,tabTitle:l("Account"),fields:n}]};return r}},{ATTRS:{dialogConfig:{valueFn:"_getDefaultDialogConfig",validator:o.Lang.isObject},strings:{value:{name:"Summary",itemType:l("Social Item"),itemTypePlural:l("Social Items")}},socialAccountType:{value:null}}})},"1.0",{requires:["base","model","squarespace-model-editor","squarespace-dialog-select","squarespace-dialog-button","squarespace-dialog-slider","squarespace-models-connected-accounts","squarespace-block-summary-model-editor","squarespace-widgets-information"]})},"./src/main/webapp/universal/scripts-v6/block/social-summary.js":function(e,t,a){var i=a("./src/main/webapp/frontend/packages/enums/BlockType.js");var s=a("./src/main/webapp/universal/src/apps/App/shared/utils/BlockEditorUtils.js");YUI.add("squarespace-block-social-summary",function(t){var a=t.namespace("Squarespace.Block").SocialSummaryBase=t.Base.create("block-social-summary",t.Squarespace.Block.Summary,[t.Squarespace.Block.PremiumBlockMixin],{_setDefaultContent:function(){this.get("model").setAttrs(this._getDefaultContent())},bindUI:function(){a.superclass.bindUI.call(this)},_renderSuccess:function(e){a.superclass._renderSuccess.call(this,e);this._togglePolling()},destructor:function(){this.stopRenderPolling()},startRenderPolling:function(){if(!this._synchronizingRenderTimer){var e=1e3;this._synchronizingRenderTimer=t.later(3*e,this,function(){this.render()},[],true)}},stopRenderPolling:function(){if(this._synchronizingRenderTimer){this._synchronizingRenderTimer.cancel();this._synchronizingRenderTimer=null}},_togglePolling:function(){var e=this.get("contentBox");t.Lang.isNull(e.one(".sqs-state-message.synchronizing"))?this.stopRenderPolling():this.startRenderPolling()},_getDefaultContent:function(){return{title:true,thumbnail:true,excerpt:true,pageSize:10,collectionId:"",filter:{}}},toJSON:function(){var e=a.superclass.toJSON.apply(this,arguments);e&&e.value&&"add-account"===e.value.collectionId&&(e.value.collectionId="");return e}},{CSS_PREFIX:"sqs-block-social-summary",MODEL:t.Squarespace.ContentModel.SocialSummaryBlock,ATTRS:{defaultContentModel:{valueFn:"_getDefaultContent"},editor:{valueFn:function(){return s.isBlockEditorV2Enabled(this.get("blockTypeName"))?t.Squarespace.Block.Editor.Schema:t.Squarespace.Block.Editor.Dialog}},type:{value:i.SOCIAL_SUMMARY}}})},"1.0",{requires:["base","squarespace-block-summary","squarespace-block-social-summary-model-editor","squarespace-premium-block-mixin"]})},"./src/main/webapp/universal/scripts-v6/block/soundcloud-editor.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/universal/src/shared/constants/HelpLinks.js");YUI.add("squarespace-block-soundcloud-editor",function(t){t.namespace("Squarespace.Block.Editor").SoundCloud=t.Base.create("soundcloud-block-editor-dialog",t.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return t.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.SoundCloud")}},{NS:"blockEditor",ATTRS:{blockName:{value:i("SoundCloud")},resizable:{value:true},resizeNode:{valueFn:function(){return this.get("host").get("boundingBox")}}}});var e={width:470,tabs:[{title:i("Edit SoundCloud Embed"),icon:"/universal/images-v6/icons/skelecon-soundcloud-16-light.png",scroll:false,fields:[{ctor:t.Squarespace.DialogFields.Oembed,name:"embed",config:{"strings.description":i('Paste the URL of a SoundCloud track, playlist, or profile to embed a player on the page. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:s.SOUNDCLOUD}),"strings.inputPlaceholder":i("Enter a SoundCloud URL here")}}]}]};var a=t.namespace("Squarespace.Block.ModelEditorDialog").SoundCloud=t.Base.create("blockSoundCloudEditor",t.Squarespace.ModelEditorDialog,[],{getDialogData:function(){return{embed:this.get("model").toJSON()}},sanitizeDialogData:function(e){return t.merge(e.embed,{showArtwork:e.showArtwork,useVisualPlayer:e.useVisualPlayer})}},{ATTRS:{dialogConfig:{valueFn:function(){return e}}}})},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-damask-context-globals","squarespace-dialog-oembed","squarespace-model-editor"]})},"./src/main/webapp/universal/scripts-v6/block/soundcloud.js":function(e,t,a){var i=a("./src/main/webapp/frontend/packages/enums/BlockType.js");var s=a("./src/main/webapp/universal/src/shared/utils/UrlUtils.js");var n=a("./src/main/webapp/universal/src/apps/App/shared/utils/BlockEditorUtils.js");YUI.add("squarespace-block-soundcloud",function(a){a.namespace("Squarespace.ContentModel").SoundCloud=a.Base.create("SoundCloudBlockModel",a.Model,[],{},{ATTRS:{aspectRatio:{value:67}}});a.namespace("Squarespace.Block").SoundCloud=a.Base.create("block-soundcloud",a.SQS.LayoutEngine.Block.ModelSyncBase,[a.SQS.LayoutEngine.Block.MixinAspectRatio,a.Squarespace.Block.PremiumBlockMixin],{_renderSuccess:function(e){var t=a.Node.create("<div></div>");t.insert(e.html);s.securifyBlockEmbed(t);this.get("contentBox").empty().setHTML(t)}},{CSS_PREFIX:"sqs-block-soundcloud",MODEL:a.Squarespace.ContentModel.SoundCloud,ATTRS:{editor:{valueFn:function(){return n.isBlockEditorEnabled(this.get("blockTypeName"))?a.Squarespace.Block.Editor.Schema:a.Squarespace.Block.Editor.SoundCloud}},type:{value:i.SOUNDCLOUD}}})},"1.0",{requires:["@sqs/layout-engine/block-model-sync-base","@sqs/layout-engine/block-mixin-aspect-ratio","squarespace-block-soundcloud-editor","squarespace-block-schema-editor","squarespace-premium-block-mixin"]})},"./src/main/webapp/universal/scripts-v6/block/spacer-editor.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-block-spacer-editor",function(e){e.namespace("Squarespace.Block.Editor");var t=e.Squarespace.Block.Editor.Spacer=e.Base.create("blockSpacerEditor",e.SQS.LayoutEngine.Block.Editor.Base,[],{},{NS:"blockEditor",ATTRS:{blockName:{value:i("Spacer")},editingButtons:{value:true},includeEdit:{value:false},resizable:{value:true},resizeNode:{valueFn:function(){return this.get("host").get("boundingBox")}}}})},"1.0",{requires:["base","@sqs/layout-engine/block-plugin-resizable","@sqs/layout-engine/block-editor-base"]})},"./src/main/webapp/universal/scripts-v6/block/spacer.js":function(e,t,a){var i=a("./src/main/webapp/frontend/packages/enums/BlockType.js");var s=a("./src/main/webapp/universal/src/apps/App/shared/utils/BlockEditorUtils.js");YUI.add("squarespace-block-spacer",function(e){e.namespace("Squarespace.ContentModel").Spacer=e.Base.create("SpacerBlockModel",e.Model,[],{},{ATTRS:{vSize:{value:1},aspectRatio:{value:null}}});e.namespace("Squarespace.Block").Spacer=e.Base.create("block-spacer",e.SQS.LayoutEngine.Block.Base,[e.SQS.LayoutEngine.Block.MixinAspectRatio,e.Squarespace.Block.PremiumBlockMixin],{},{CSS_PREFIX:"sqs-block-spacer",MODEL:e.Squarespace.ContentModel.Spacer,ATTRS:{editor:{valueFn:function(){return s.isBlockEditorEnabled(this.get("blockTypeName"))?e.Squarespace.Block.Editor.Schema:e.Squarespace.Block.Editor.Spacer}},mobileEditor:{valueFn:function(){return e.Squarespace.Block.Editor.Spacer}},type:{value:i.SPACER},classNames:{value:"spacer-block"},floatable:{value:false}}})},"1.0",{requires:["base","@sqs/layout-engine/block-base","@sqs/layout-engine/block-mixin-aspect-ratio","squarespace-block-spacer-editor","squarespace-block-schema-editor","squarespace-ss-widget","squarespace-premium-block-mixin"]})},"./src/main/webapp/universal/scripts-v6/block/summary-editor.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-block-summary-editor",function(e){e.namespace("Squarespace.Block.Editor").Summary=e.Base.create("summary-block-editor-dialog",e.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return e.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Summary")}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Summary")}}})},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-block-summary-model-editor","squarespace-damask-context-globals","squarespace-model-editor"]})},"./src/main/webapp/universal/scripts-v6/block/summary-gallery-model-editor.js":function(e,t,a){var s=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-block-summary-gallery-model-editor",function(a){a.namespace("Squarespace.Block.ModelEditorDialog");var i=a.Squarespace.Block.ModelEditorDialog.SummaryGallery=a.Base.create("SummaryGalleryModelEditorDialog",a.Squarespace.Block.ModelEditorDialog.SocialSummary,[a.Squarespace.Block.Mixins.Gallery],{sanitizeDialogData:function(e){e=a.merge(e,e.options);delete e.options;"slider"!==e.design?e.aspectRatio=null:delete e.aspectRatio;e.vSize=null;return e},_getDefaultDialogConfig:function(){var e=i.superclass._getDefaultDialogConfig.call(this);var t=e.tabs[0];e.tabs.push({title:t.title,tabTitle:s("Design"),icon:t.icon,scroll:true,fields:[{ctor:a.Squarespace.DialogFields.GalleryOptions,name:"options",config:{options:this._getGalleryOptions()}}]});e.height=420;return e},_getDefaultContent:function(){var e={methodOption:"transient"};var t=this._defaultGalleryOptions();return a.merge(t,e)}},{ATTRS:{}})},"1.0",{requires:["base","squarespace-block-mixin-gallery-option-sync","squarespace-dialog-gallery-options","squarespace-block-social-summary-model-editor","squarespace-block-summary-gallery-model"]})},"./src/main/webapp/universal/scripts-v6/block/summary-gallery-model.js":function(e,t){YUI.add("squarespace-block-summary-gallery-model",function(e){e.namespace("Squarespace.ContentModel");e.Squarespace.ContentModel.SummaryGalleryBlock=e.Base.create("summaryGalleryBlock",e.SQS.LayoutEngine.BlockModel.Gallery,[],{},{})},"1.0",{requires:["base","model","@sqs/layout-engine/block-model-gallery"]})},"./src/main/webapp/universal/scripts-v6/block/summary-gallery.js":function(e,t){YUI.add("squarespace-block-summary-gallery",function(a){a.namespace("Squarespace.Block");var t=a.Squarespace.Block.SummaryGallery=a.Base.create("block-summary-gallery",a.Squarespace.Block.SocialSummaryBase,[a.SQS.LayoutEngine.Block.MixinAspectRatio,a.Squarespace.Block.PremiumBlockMixin],{bindUI:function(){t.superclass.bindUI.call(this);this.after("resized",this.syncUI,this);this.after("widgetContentChange",this._setWidgetContent,this)},_renderBlock:function(e){this.get("boundingBox").setData("block",this.get("model").getAttrs());if(this._shouldGetWidgetRendering(e)){this.requestingContent=true;t.superclass._renderBlock.call(this)}else this.fire("widget:contentUpdate")},_renderSuccess:function(e){this.requestingContent=false;this.set("widgetContent",e.html);this._setWidgetContent()},_setWidgetContent:function(){if(this.requestingContent)return;var e=a.Node.create(this.get("widgetContent"));var t=this.get("contentBox");t.empty().setHTML(e);this.get("model").get("aspectRatio")&&t.one(".sqs-state-message")&&t.one(".sqs-state-message").wrap("<div></div>");a.SQS.Gallery.Manager.initializeBlock(t);this._updateAspectRatio()},_shouldGetWidgetRendering:function(e){if(!a.Lang.isValue(e)||!a.Object.hasKey(e,"changed"))return true;return!a.SQS.LayoutEngine.Block.Utils.checkWhitelist(this.get("modelWhiteList"),e.changed)}},{CSS_PREFIX:"sqs-block-summary-gallery",MODEL:a.Squarespace.ContentModel.SummaryGalleryBlock,ATTRS:{editor:{value:a.Squarespace.Block.Editor.Gallery},modelWhiteList:{setter:function(e){if(a.Lang.isArray(e))return e;if(a.Lang.isString(e))return[e];return[]},value:["aspectRatio","autoplay","lightbox","padding","thumbnail-strip-height","thumbnail-strip-margin","vSize"]},widgetContent:{value:""}}})},"1.0",{requires:["base","@sqs/layout-engine/block-mixin-aspect-ratio","squarespace-block-social-summary","squarespace-block-gallery","squarespace-block-gallery-editor","squarespace-block-summary-gallery-model-editor","squarespace-block-summary-gallery-model","squarespace-premium-block-mixin"]})},"./src/main/webapp/universal/scripts-v6/block/summary-model-editor.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/universal/src/shared/i18n/index.ts").pluralize;var n=a("./src/main/webapp/frontend/packages/enums/CollectionTypes.js");YUI.add("squarespace-block-summary-model-editor",function(l){l.namespace("Squarespace.Block.ModelEditorDialog");var e=l.Squarespace.Block.ModelEditorDialog.Summary=l.Base.create("SummaryModelEditorDialog",l.Squarespace.ModelEditorDialog,[],{initializer:function(){var t=this.get("dialog");var e=this.get("model");e.after("collectionIdChange",this._updateAutocomplete,this);this.get("dialog").on("ready",this._updateAutocomplete,this);t.on("shown",function(e){t.getField("pageSize").refreshWidth()},this)},_updateAutocomplete:function(e){var t=this.get("model").get("collectionId");var a=this.get("dialog").getField("filter");if(!l.Lang.isString(t)||0===t.length||!l.Lang.isValue(a))return;var i=a.get("tagField");var s=a.get("categoryField");var n="/api/commondata/GetAutoCompleteTags";var r="/api/commondata/GetAutoCompleteCategories";var o={collectionId:t};if(l.Lang.isValue(a)){this._getNewAutoCompleteData(i,n,o);this._getNewAutoCompleteData(s,r,o)}},_getNewAutoCompleteData:function(a,e,t){l.Data.get({url:e,data:t,success:function(e){var t=a.get("acWidget");l.Lang.isValue(t)&&t.set("source",e)}})},_createSelectOption:function(e,t){return{value:e,label:t}},_getDefaultDialogConfig:function(){var e=[{title:i("Summary"),tabTitle:i("Content"),icon:"/universal/images-v6/icons/icon-summary-16-light.png",scroll:true,fields:[{ctor:l.Squarespace.DialogFields.Description,config:{text:i("<strong>Items to Display.</strong>  Select the number of items this block should display.")}},{ctor:l.Squarespace.DialogFields.Slider,required:true,config:{name:"pageSize",range:[1,20],getPluralizedSliderLabel:function(e){return s({one:"{%n} Item",other:"{%n} Items"},e)},labelWidth:60,submitOnEnter:true}},{ctor:l.Squarespace.DialogFields.ContentIdSelector,config:{name:"collectionId",showCollectionTagsAndCategories:false,showGroupTitles:true,collectionFilter:{collectionType:[n.PRODUCTS,n.COLLECTION_TYPE_GENERIC],folder:false}}}]},{tabTitle:i("Filters"),scroll:true,fields:[{name:"filter",ctor:l.Squarespace.DialogFields.SummaryFilter}]},{tabTitle:i("Design"),scroll:true,fields:[{ctor:l.Squarespace.DialogFields.Check,name:"title",config:{"strings.title":i("Title"),"strings.description":i("Display the title of each item.")}},{ctor:l.Squarespace.DialogFields.Check,name:"thumbnail",config:{"strings.title":i("Thumbnail"),"strings.description":i("Display the thumbnail image for each item.")}},{ctor:l.Squarespace.DialogFields.Check,name:"excerpt",config:{"strings.title":i("Excerpt"),"strings.description":i("Display an excerpt of each item.")}}]}];return{width:380,height:420,tabs:e}}},{ATTRS:{dialogConfig:{valueFn:"_getDefaultDialogConfig",validator:l.Lang.isObject}}})},"1.0",{requires:["base","model","squarespace-model-editor","squarespace-dialog-summary-filter","squarespace-dialog-check","squarespace-dialog-slider","squarespace-dialog-content-selector"]})},"./src/main/webapp/universal/scripts-v6/block/summary-v2-editor.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-block-summary-v2-editor",function(e){e.namespace("Squarespace.Block.Editor").SummaryV2=e.Base.create("summary-v2-block-editor-dialog",e.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return e.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.SummaryV2")},afterLayoutDrag:function(){this.get("host").fire("resized")}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Summary")}}})},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-block-summary-v2-model-editor","squarespace-damask-context-globals","squarespace-model-editor"]})},"./src/main/webapp/universal/scripts-v6/block/summary-v2-model-editor.js":function(e,t,a){var n=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var r=a("./src/main/webapp/universal/src/apps/App/shared/stores/TemplateStore.js");var d=a("./src/main/webapp/frontend/packages/enums/CollectionTypes.js");var o=a("./src/main/webapp/frontend/packages/enums/CalendarEventDisplayModes.js");var l=a("./src/main/webapp/universal/src/shared/constants/HelpLinks.js");var c=a("./src/main/webapp/universal/src/shared/utils/ProductsUtils.js");var p=a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts");var h=a("./src/main/webapp/frontend/packages/enums/Flag.js");var g=a("./src/main/webapp/universal/src/shared/utils/TemplateVersionUtils.js");YUI.add("squarespace-block-summary-v2-model-editor",function(u){u.namespace("Squarespace.Block.ModelEditorDialog");var s={text:"blog",image:"gallery",event:"events",store_item:"products"};u.Squarespace.Block.ModelEditorDialog.SummaryV2=u.Base.create("SummaryV2ModelEditorDialog",u.Squarespace.ModelEditorDialog,[],{initializer:function(){var e=this.get("dialog");var t=this.get("model");this.collectionId=this._getCollectionId();this.collectionClassification=this._getCollectionClassification(this.collectionId);e.on("ready",function(){this._updateLayoutFields();this._updateDisplayFields();this._updateMetadataDropdowns();this._updateAutocomplete();e.getField("collectionId").after("dataChange",function(){this._resetMetadataDropdowns();this._resetEventTimeframeDropdown()},this)},this);t.after("collectionIdChange",function(){this.collectionId=this._getCollectionId();this.collectionClassification=this._getCollectionClassification(this.collectionId);this._updateDisplayFields();this._updateMetadataDropdowns();this._updateAutocomplete();this._resetNestedCategory()},this);t.after("designChange",this._updateLayoutFields,this);t.after("showExcerptChange",this._updateReadMoreLinkField,this);t.on("save",this._setLightboxMode,this);e.on(["shown","tab-focused"],function(){e.getField("pageSize").refreshWidth();e.getField("listImageSize").refreshWidth();e.getField("slidesPerRow").refreshWidth()},this)},_resetNestedCategory:function(){this.get("dialog").getField("filter").resetNestedCategorySelection()},_setLightboxMode:function(){this.get("model").set("lightbox","gallery"===this.collectionClassification)},_updateLayoutFields:function(){var t=this.get("model").get("design");var e=this.get("dialog").el;if(!e)return;e.all(".sqs-dialog-field.layout").each(function(e){e.toggleClass("hidden",!e.hasClass(t))},this)},_updateDisplayFields:function(){this.get("dialog").el.all(".sqs-dialog-field.display").each(function(e){e.toggleClass("hidden",!e.hasClass(this.collectionClassification))},this)},_updateReadMoreLinkField:function(){"blog"===this.collectionClassification&&this.get("dialog").getField("showReadMoreLink").get("boundingBox").toggleClass("hidden",!this.get("model").get("showExcerpt"))},_updateMetadataDropdowns:function(){var e=this.get("dialog");var t=[];if("gallery"===this.collectionClassification){t=t.concat([this._createSelectOption("none",n("None")),this._createSelectOption("date",n("Date Posted")),this._createSelectOption("cats",n("Category")),this._createSelectOption("tags",n("Tags")),this._createSelectOption("author",n("Author")),this._createSelectOption("location",n("Location"))]);e.getField("primaryMetadata").set("options",t);e.getField("secondaryMetadata").set("options",t)}else if("events"===this.collectionClassification){t=t.concat([this._createSelectOption("none",n("None")),this._createSelectOption("date",n("Event Date")),this._createSelectOption("event-time",n("Event Time")),this._createSelectOption("cats",n("Category")),this._createSelectOption("tags",n("Tags")),this._createSelectOption("location",n("Location"))]);e.getField("primaryMetadata").set("options",t);e.getField("secondaryMetadata").set("options",t)}else if("products"===this.collectionClassification){t=t.concat([this._createSelectOption("none",n("None")),this._createSelectOption("cats",n("Category")),this._createSelectOption("tags",n("Tags"))]);e.getField("primaryMetadata").set("options",t);e.getField("secondaryMetadata").set("options",t)}else{t=t.concat([this._createSelectOption("none",n("None")),this._createSelectOption("date",n("Date Posted")),this._createSelectOption("cats",n("Category")),this._createSelectOption("tags",n("Tags")),this._createSelectOption("author",n("Author")),this._createSelectOption("location",n("Location")),this._createSelectOption("comments",n("Comments"))]);e.getField("primaryMetadata").set("options",t);e.getField("secondaryMetadata").set("options",t)}},_resetMetadataDropdowns:function(){var e=this.get("dialog");var t="date";var a="none";"products"===this.collectionClassification&&(t="none");e.getField("primaryMetadata").set("data",t);e.getField("secondaryMetadata").set("data",a)},_resetEventTimeframeDropdown:function(){this.get("dialog").getField("showPastOrUpcomingEvents").set("data",o.UPCOMING)},_updateAutocomplete:function(){var e=this._getCollectionId();var t=this.get("dialog").getField("filter");if(!u.Lang.isString(e)||""===e||!u.Lang.isValue(t)){t.set("visible",false);return}t.set("visible",true);var a=u.Squarespace.ContentCollectionCache.getById(e);var i=a.get("type")===d.PRODUCTS;var s=p.isFeatureEnabled(h.NESTED_CATEGORIES);t.set("collectionId",e);t.set("showNestedCategories",i&&s);var n=t.get("tagField");var r=t.get("categoryField");var o="/api/commondata/GetAutoCompleteTags";var l="/api/commondata/GetAutoCompleteCategories";var c={collectionId:e};if(u.Lang.isValue(t)){this._getNewAutoCompleteData(n,o,c);this._getNewAutoCompleteData(r,l,c)}},_getNewAutoCompleteData:function(a,e,t){u.Data.get({url:e,data:t,success:function(e){var t=a.get("acWidget");u.Lang.isValue(t)&&t.set("source",e)}})},_createSelectOption:function(e,t){return{value:e,label:t}},_getCollectionId:function(){return this.get("model").get("collectionId")||""},_getCollectionClassification:function(e){if(!e||!u.Squarespace.ContentCollectionCache.getById(e))return"unknown";var t=u.Squarespace.ContentCollectionCache.getById(e).get("typeName");var a=r.getCollectionConfig(t).acceptTypes;if(1===a.length){var i=s[a[0]];if(i)return i}else if(2===a.length&&a.indexOf("image")>-1&&a.indexOf("video")>-1)return"gallery";return"unknown"},_getDefaultDialogConfig:function(){var e={ctor:u.Squarespace.DialogFields.MultiOption,config:{defaultValue:"autogrid",options:[{value:"autocolumns",title:n("Wall"),icon:"wall"},{value:"carousel",title:n("Carousel"),icon:"carousel"},{value:"list",title:n("List"),icon:"list"},{value:"autogrid",title:n("Grid"),icon:"grid"}],name:"design"}};var t=n('Display content from other pages on your site, such as blog posts, products, gallery images, or events. <a href="{helpLink}" target="_blank">Learn more</a><br><br>Start by selecting one of your pages below: ',{helpLink:l.SUMMARY_EDITOR});var a=n('Display content from other pages on your site, such as blog posts, products, or events. <a href="{helpLink}" target="_blank">Learn more</a><br><br>Start by selecting one of your pages below: ',{helpLink:l.SUMMARY_EDITOR});var i=[{tabTitle:n("Content"),icon:"/universal/images-v6/icons/icon-summary-16-light.png",scroll:true,fields:[{ctor:u.Squarespace.DialogFields.Description,config:{text:g.isSevenOne()?a:t}},{ctor:u.Squarespace.DialogFields.ContentIdSelector,config:{name:"collectionId",showCollectionTagsAndCategories:false,showGroupTitles:true,collectionFilter:{collectionType:[d.PRODUCTS,d.COLLECTION_TYPE_GENERIC],ordering:[u.Squarespace.CollectionOrdering.USER,u.Squarespace.CollectionOrdering.CHRONOLOGICAL,u.Squarespace.CollectionOrdering.CALENDAR],folder:false},emptyMessage:n("No pages yet. Go to the pages panel and click a + to add new content.")}},{ctor:u.Squarespace.DialogFields.Hidden,config:{name:"blockId"}}]},{tabTitle:n("Layout"),scroll:true,fields:[e,{ctor:u.Squarespace.DialogFields.Text,config:{"strings.title":n("Header Text"),name:"headerText",className:"layout carousel thin",defaultValue:""}},{ctor:u.Squarespace.DialogFields.Select,config:{"strings.title":n("Aspect Ratio"),name:"imageAspectRatio",className:"layout autogrid list carousel thin dark",defaultValue:1.5,options:[{value:"Auto",label:n("Auto")},{value:1,label:n("1:1 Square")},{value:1.5,label:n("3:2 Standard")},{value:2/3,label:n("2:3 Standard (Vertical)")},{value:4/3,label:n("4:3 Four-Three")},{value:.75,label:n("3:4 Three-Four (Vertical)")},{value:16/9,label:n("16:9 Widescreen")},{value:2.4,label:n("2.40 Anamorphic Widescreen")}]}},{ctor:u.Squarespace.DialogFields.Slider,required:false,config:{"strings.title":n("Column Width"),"strings.description":n("Specify a minimum width columns should be. The number of columns displayed will vary depending on the width of your site."),name:"columnWidth",range:[50,600],labelWidth:30,submitOnEnter:true,className:"layout autogrid autocolumns"}},{ctor:u.Squarespace.DialogFields.Slider,required:false,config:{"strings.title":n("Gutter Width"),"strings.description":n("Specify the distance between items."),name:"gutter",range:[0,100],labelWidth:30,submitOnEnter:true,className:"layout autogrid autocolumns"}},{ctor:u.Squarespace.DialogFields.Slider,required:false,config:{"strings.title":n("Image Size"),"strings.description":n("Specify how wide the image should be in relation to the text."),name:"listImageSize",range:[10,80],"strings.suffix":"%",pluralize:false,labelWidth:30,submitOnEnter:true,className:"layout list"}},{ctor:u.Squarespace.DialogFields.Select,config:{"strings.title":n("Image Alignment"),name:"listImageAlignment",className:"layout list thin dark",defaultValue:"left",options:[{value:"left",label:n("Left")},{value:"right",label:n("Right")}]}},{ctor:u.Squarespace.DialogFields.Slider,required:false,config:{"strings.title":n("Items Per Row"),"strings.description":n("Specify how many items should be visible at a time."),name:"slidesPerRow",range:[1,5],labelWidth:30,submitOnEnter:true,className:"layout carousel"}},{ctor:u.Squarespace.DialogFields.Select,config:{"strings.title":n("Text Size"),name:"textSize",className:"layout autogrid list autocolumns carousel thin dark",defaultValue:"medium",options:[{value:"extralarge",label:n("Extra Large")},{value:"large",label:n("Large")},{value:"medium",label:n("Medium")},{value:"small",label:n("Small")}]}},{ctor:u.Squarespace.DialogFields.Select,config:{"strings.title":n("Text Alignment"),name:"textAlignment",className:"layout autogrid list autocolumns carousel thin dark",defaultValue:"left",options:[{value:"left",label:n("Left")},{value:"center",label:n("Center")},{value:"right",label:n("Right")}]}},{ctor:u.Squarespace.DialogFields.Select,config:{"strings.title":n("Metadata Position"),name:"metadataPosition",className:"display blog gallery events products unknown thin dark",defaultValue:"below-content",options:[{value:"above-title",label:n("Above Title")},{value:"below-title",label:n("Below Title")},{value:"below-content",label:n("Below Content")}]}}]},{tabTitle:n("Display"),scroll:true,fields:[{ctor:u.Squarespace.DialogFields.Slider,required:true,config:{"strings.title":n("Number of Items"),"strings.description":n("Select the number of items to display"),name:"pageSize",range:[1,30],isNumericLabel:false,labelWidth:30,submitOnEnter:true,className:"display blog gallery events products unknown"}},{ctor:u.Squarespace.DialogFields.Check,name:"showTitle",config:{"strings.title":n("Show Title")},className:"display blog gallery events products unknown"},{ctor:u.Squarespace.DialogFields.Check,name:"showThumbnail",config:{"strings.title":n("Show Thumbnail")},className:"display blog gallery events products unknown"},{ctor:u.Squarespace.DialogFields.Check,name:"showExcerpt",config:{"strings.title":n("Show Excerpt")},className:"display blog gallery events products unknown"},{ctor:u.Squarespace.DialogFields.Check,name:"showReadMoreLink",config:{"strings.title":n("Show Read More Link")},className:"display blog unknown"},{ctor:u.Squarespace.DialogFields.Check,name:"showPrice",config:{"strings.title":n("Show Price")},className:"display products"},{ctor:u.Squarespace.DialogFields.Check,name:"productQuickViewEnabled",config:{"strings.title":n("Enable Product Quick View"),"strings.description":n("On hover, a button will appear that lets customers dynamically access product details without leaving the page.")},className:"display products",$when:function(e){return c.isQuickViewSupported()}},{ctor:u.Squarespace.DialogFields.Select,config:{"strings.title":n("Event Timeframe"),name:"showPastOrUpcomingEvents",className:"display events thin dark",defaultValue:o.UPCOMING,options:[{value:o.UPCOMING,label:n("Upcoming")},{value:o.PAST,label:n("Past")}]}},{ctor:u.Squarespace.DialogFields.Select,config:{"strings.title":n("Primary Metadata"),name:"primaryMetadata",className:"display blog gallery events products unknown thin dark",defaultValue:"none",options:[]}},{ctor:u.Squarespace.DialogFields.Select,config:{"strings.title":n("Secondary Metadata"),name:"secondaryMetadata",className:"display blog gallery events products unknown thin dark",defaultValue:"none",options:[]}},{ctor:u.Squarespace.DialogFields.SummaryFilter,name:"filter"}]}];return{title:n("Summary"),width:460,height:440,style:"standard",loadingText:n("Editing Summary Block…"),initialDataByReference:true,tabs:i}}},{ATTRS:{dialogConfig:{valueFn:"_getDefaultDialogConfig",validator:u.Lang.isObject}}})},"1.0",{requires:["base","model","squarespace-dialog-check","squarespace-dialog-content-selector","squarespace-dialog-select","squarespace-dialog-slider","squarespace-dialog-summary-filter","squarespace-dialog-text","squarespace-model-editor","squarespace-models-content-collection"]})},"./src/main/webapp/universal/scripts-v6/block/summary-v2.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var n=a("./src/main/webapp/frontend/packages/enums/BlockType.js");var r=a("./src/main/webapp/universal/src/apps/App/shared/utils/BlockEditorUtils.js");YUI.add("squarespace-block-summary-v2",function(s){var e=s.Squarespace.ContentModel.SummaryV2Block=s.Base.create("SummaryV2",s.Model,[],{},{ATTRS:{collectionId:{value:""},design:{value:"autogrid"},headerText:{value:i("Featured")},textSize:{value:"medium"},pageSize:{value:10},imageAspectRatio:{value:1.5},columnWidth:{value:270},gutter:{value:60},listImageSize:{value:30},listImageAlignment:{value:"left"},slidesPerRow:{value:3},textAlignment:{value:"left"},showTitle:{value:true},showThumbnail:{value:true},showExcerpt:{value:true},showReadMoreLink:{value:false},showPrice:{value:true},productQuickViewEnabled:{value:false},showPastOrUpcomingEvents:{value:"upcoming"},metadataPosition:{value:"below-content"},primaryMetadata:{value:"none"},secondaryMetadata:{value:"none"},filter:{value:{}},autoCrop:{value:true},lightbox:{value:false},mixedContent:{value:true},blockId:{valueFn:function(){return s.Squarespace.Utils.getGuid()}}}});var t=s.namespace("Squarespace.Block").SummaryV2=s.Base.create("block-summary-v2",s.SQS.LayoutEngine.Block.ModelSyncBase,[s.Squarespace.Block.PremiumBlockMixin],{syncUI:function(){t.superclass.syncUI.call(this);this._plugImageLoader()},bindUI:function(){this.get("model").after("change",this._renderBlock,this);this.after("resized",this._renderBlock,this)},show:function(){t.superclass.show.call(this,arguments);this._setWidgetContent()},_plugImageLoader:function(){this.get("contentBox").all("img").each(function(e){e.hasPlugin(s.Squarespace.Loader2.NS)||e.plug(s.Squarespace.Loader2)})},_renderBlock:function(e){this.get("boundingBox").setData("block",this.get("model").getAttrs());this._shouldGetWidgetRendering(e)?t.superclass._renderBlock.call(this):this._updateWhitelistedAttrs(e)},_renderSuccess:function(e){this.set("widgetContent",e.html);this._setWidgetContent()},_setWidgetContent:function(){var e=s.Node.create(this.get("widgetContent"));var t=this.get("contentBox");t.empty();t.setHTML(e);s.SQS.Gallery.Manager.initializeBlock(t)},_shouldGetWidgetRendering:function(e){if(!s.Lang.isValue(e)||!s.Object.hasKey(e,"changed"))return true;return!s.SQS.LayoutEngine.Block.Utils.checkWhitelist(this.get("modelWhiteList"),e.changed)},_updateWhitelistedAttrs:function(e){var t=this.get("model");var a=this.get("contentBox");e.changed.headerText?a.one(".summary-heading").setHTML(t.get("headerText")):e.changed.textSize?this._updateClassThatStartsWith("summary-block-setting-text-size-",t.get("textSize"),a.get("children")):e.changed.textAlignment?this._updateClassThatStartsWith("summary-block-setting-text-align-",t.get("textAlignment"),a.get("children")):e.changed.listImageAlignment&&this._updateClassThatStartsWith("summary-block-setting-design-list-thumbnail-",t.get("listImageAlignment"),a.get("children"))},_updateClassThatStartsWith:function(t,a,i){var e=i.getAttribute("class")[0].split(" ");s.Array.forEach(e,function(e){e=e.trim();e.startsWith(t)&&i.hasClass(e)&&i.replaceClass(e,t+a)},this)}},{CSS_PREFIX:"sqs-block-summary-v2",MODEL:s.Squarespace.ContentModel.SummaryV2Block,ATTRS:{modelWhiteList:{setter:function(e){if(s.Lang.isArray(e))return e;if(s.Lang.isString(e))return[e];return[]},value:["headerText","textSize","listImageAlignment","textAlignment","enableProductQuickView"]},defaultContentModel:{},editor:{valueFn:function(){return r.isBlockEditorEnabled(this.get("blockTypeName"))?s.Squarespace.Block.Editor.Schema:s.Squarespace.Block.Editor.SummaryV2}},type:{value:n.SUMMARY_V2},widgetContent:{value:""},floatable:{value:true}}})},"1.0",{requires:["base","model","@sqs/layout-engine/block-model-sync-base","squarespace-block-summary-v2-editor","squarespace-block-schema-editor","@sqs/layout-engine/block-utils","squarespace-gallery-ng","squarespace-image-loader","squarespace-models-content-collection","squarespace-util","squarespace-video-loader","squarespace-premium-block-mixin"]})},"./src/main/webapp/universal/scripts-v6/block/summary.js":function(e,t,a){var i=a("./src/main/webapp/frontend/packages/enums/BlockType.js");YUI.add("squarespace-block-summary",function(t){var a=t.namespace("Squarespace.Block").Summary=t.Base.create("block-summary",t.SQS.LayoutEngine.Block.ModelSyncBase,[t.Squarespace.Block.PremiumBlockMixin],{syncUI:function(){a.superclass.syncUI.call(this);this._plugImageLoader()},_renderSuccess:function(e){a.superclass._renderSuccess.call(this,e);this._plugImageLoader()},_plugImageLoader:function(){this.get("contentBox").all("img").each(function(e){e.hasPlugin(t.Squarespace.Loader2.NS)||e.plug(t.Squarespace.Loader2)})},_getDefaultContent:function(){return{title:true,thumbnail:true,excerpt:true,pageSize:10,collectionId:"",filter:{}}}},{MODEL:t.Squarespace.ContentModel.SummaryBlock,ATTRS:{defaultContentModel:{valueFn:"_getDefaultContent"},editor:{value:t.Squarespace.Block.Editor.Summary},type:{value:i.SUMMARY}},CSS_PREFIX:"sqs-block-summary"})},"1.0",{requires:["base","squarespace-image-loader","squarespace-block-summary-editor","squarespace-premium-block-mixin"]})},"./src/main/webapp/universal/scripts-v6/block/tagcloud-editor.js":function(e,t,a){var s=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var n=a("./src/main/webapp/universal/src/shared/i18n/index.ts").pluralize;var r=a("./src/main/webapp/universal/src/shared/constants/HelpLinks.js");var o=a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts");var l=a("./src/main/webapp/frontend/packages/enums/Flag.js");var c="tag";var u="category";YUI.add("squarespace-block-tagcloud-editor",function(i){i.namespace("Squarespace.Block.Editor").Tagcloud=i.Base.create("tagcloud-block-editor-dialog",i.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return i.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Tagcloud")}},{NS:"blockEditor",ATTRS:{blockName:{value:s("Tag Cloud")}}});var t=i.namespace("Squarespace.Block.ModelEditorDialog").Tagcloud=i.Base.create("blockTagcloudEditor",i.Squarespace.ModelEditorDialog,[],{_showDialog:function(){o.isFeatureEnabled(l.NESTED_CATEGORIES)&&this._attachPC2OptionToggleEvent();t.superclass._showDialog.call(this);var e=this.get("dialog").getField("collectionIds");e.set("collectionGroups",this._getCollectionGroups());e.syncUI()},_attachPC2OptionToggleEvent:function(){var a=this.get("dialog");var e=this.get("_id");a.detach(e+"|ready");a.on(e+"|ready",function(e){var t=a.getField("collectionIds");t.after("dataChange",this._toggleTypeOptionForPC2Collection,this);this._userHasSelectedProductCollection()&&this._toggleTypeOptionForPC2Collection()},this)},_userHasSelectedProductCollection:function(){var e=i.Squarespace.ContentCollectionCache;var t=this.get("dialog").getField("collectionIds").getValue();var a=i.Squarespace.ContentCollectionUtils;return 0!==e.filter(function(e){return t.includes(e.get("id"))&&a.isProduct(e)}).length},_toggleTypeOptionForPC2Collection:function(){var e=this.get("dialog").getField("type");var t=e.get("options");var a=t.find(function(e){return e.value===u});if(this._userHasSelectedProductCollection()){e.getValue()===u&&e.setValue(c);a.disabled=true}else delete a.disabled;e.set("options",t)},_getCollectionGroups:function(){var e=i.Squarespace.ContentCollectionUtils;var t=i.Squarespace.ContentCollectionCache;var a=t.filter(e.isGenericOrProduct);a=i.Array(a).filter(e.isNotCalendar);return e.groupCollectionsByTypeName(a)},_getDialogConfig:function(){return{width:300,height:450,initialDataByReference:true,tabs:[{title:s("Tag Cloud"),icon:"/universal/images-v6/icons/icon-tagcloud-16-light-solid.png",scroll:true,fields:[{ctor:i.Squarespace.DialogFields.Description,text:s('Display tags or categories from one of your pages arranged in a fun cloud formation. <a href="{helpLink}" target="_blank">Learn more</a><br><br>Start by selecting one of your pages below:',{helpLink:r.TAGCLOUD_EDITOR})},{ctor:i.Squarespace.DialogFields.ContentIdArraySelector,config:{name:"collectionIds",showCollectionTagsAndCategories:false,showGroupTitles:true,collectionGroups:[],emptyMessage:s("No pages yet. Go to the pages panel and click a + to add new content.")}},{ctor:i.Squarespace.DialogFields.Select,config:{name:"type","strings.title":s("Display Type"),className:"dark thin",defaultValue:"tag",options:[{value:c,label:this.get("strings").tag},{value:u,label:this.get("strings").category}]}},{ctor:i.Squarespace.DialogFields.Select,config:{name:"sortby","strings.title":s("Sort By"),defaultValue:"az",className:"thin dark",options:[{value:"az",label:this.get("strings").az},{value:"weight",label:this.get("strings").weight},{value:"activity",label:this.get("strings").activity}]}},{ctor:i.Squarespace.DialogFields.Slider,required:true,config:{name:"count",range:[5,100],"strings.description":s("Pick the number of tags to show in the cloud."),getPluralizedSliderLabel:function(e){return n({one:"{%n} Tag",other:"{%n} Tags"},e)},labelWidth:50,submitOnEnter:true}}]}]}}},{ATTRS:{dialogConfig:{valueFn:"_getDialogConfig"},strings:{value:{az:s("Alphabetical"),weight:s("Weight"),activity:s("Activity"),tag:s("Tags"),category:s("Categories"),author:s("Author"),fontsize:s("Font Size"),color:s("Color"),flat:s("Flat")}}}})},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-content-collection-utils","squarespace-damask-context-globals","squarespace-dialog-content-item-grid","squarespace-dialog-gallery-options","squarespace-dialog-multi-option","squarespace-dialog-multi-frame","squarespace-models-content-collection","squarespace-plugin-actionoverlay"]})},"./src/main/webapp/universal/scripts-v6/block/tagcloud.js":function(e,t,a){var i=a("./src/main/webapp/frontend/packages/enums/BlockType.js");var s=a("./src/main/webapp/universal/src/apps/App/shared/utils/BlockEditorUtils.js");YUI.add("squarespace-block-tagcloud",function(e){e.namespace("Squarespace.Block").Tagcloud=e.Base.create("block-tagcloud",e.SQS.LayoutEngine.Block.ModelSyncBase,[e.Squarespace.Block.PremiumBlockMixin],{},{CSS_PREFIX:"sqs-block-tagcloud",ATTRS:{editor:{valueFn:function(){return s.isBlockEditorEnabled(this.get("blockTypeName"))?e.Squarespace.Block.Editor.Schema:e.Squarespace.Block.Editor.Tagcloud}},type:{value:i.TAGCLOUD}}})},"1.0",{requires:["base","@sqs/layout-engine/block-model-sync-base","squarespace-block-tagcloud-editor","squarespace-block-schema-editor","squarespace-premium-block-mixin"]})},"./src/main/webapp/universal/scripts-v6/block/tourdates-editor.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-block-tourdates-editor",function(e){e.namespace("Squarespace.Block.Editor").TourDates=e.Base.create("tourdates-block-editor-dialog",e.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return e.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.TourDates")},afterLayoutDrag:function(){this.get("host").fire("resized")}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Bandsintown")}}})},"1.0",{requires:["base","squarespace-model-editor","squarespace-block-editor-dialog","squarespace-block-tourdates-model-editor","squarespace-damask-context-globals"]})},"./src/main/webapp/universal/scripts-v6/block/tourdates-model-editor.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/universal/src/shared/constants/HelpLinks.js");YUI.add("squarespace-block-tourdates-model-editor",function(t){t.namespace("Squarespace.Block.ModelEditorDialog");var e=t.Squarespace.Block.ModelEditorDialog.TourDates=t.Base.create("TourDatesModelEditorDialog",t.Squarespace.ModelEditorDialog,[],{initializer:function(){this.get("dialog").on("ready",function(){this._toggleDateRangePickerVisibility()},this);this.get("model").after("timeframeChange",this._toggleDateRangePickerVisibility,this)},_toggleDateRangePickerVisibility:function(){var e=this.get("dialog");var t="dateRange"===this.get("model").get("timeframe");e.getField("startDate").set("visible",t);e.getField("endDate").set("visible",t)},_getDefaultDialogConfig:function(){var e=[{tabTitle:i("Bandsintown"),icon:"/universal/images-v6/icons/icon-bandsintown-16-light.png",scroll:true,fields:[{ctor:t.Squarespace.DialogFields.Description,text:i('Display tour dates from your Bandsintown profile, and allow visitors to RSVP to your shows and buy tickets through links on your site. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:s.BANDSINTOWN})},{ctor:t.Squarespace.DialogFields.Text,config:{"strings.placeholder":i("Pablo City"),"strings.title":i("Band Name"),"strings.description":i("Enter your band's name as it appears within your Bandsintown account."),"strings.requiredFieldEmptyMessage":i("Please enter a band name."),name:"artistId",className:"thin",required:true}},{ctor:t.Squarespace.DialogFields.Select,config:{"strings.title":i("Timeframe to Show"),name:"timeframe",className:"thin dark",defaultValue:"upcoming",options:[{value:"upcoming",label:i("Upcoming")},{value:"dateRange",label:i("Date Range")}]}},{type:"splitter",fields:[{ctor:t.Squarespace.DialogFields.DateTimePicker,config:{"strings.title":i("Tour begins on"),name:"startDate",dateFormat:"lll",timePickerEnabled:false}},{ctor:t.Squarespace.DialogFields.DateTimePicker,config:{"strings.title":i("and ends"),"strings.errorMessage":i("End date needs to be later than start date."),name:"endDate",dateFormat:"lll",timePickerEnabled:false,validator:function(e){var t=e;var a=this.get("dialog").getField("startDate").get("data");return null===t||t>=a}}}]}]}];return{title:i("Bandsintown"),width:410,height:375,style:"standard",loadingText:i("Editing Tour Dates Block…"),initialDataByReference:true,tabs:e}}},{ATTRS:{dialogConfig:{valueFn:"_getDefaultDialogConfig",validator:t.Lang.isObject}}})},"1.0",{requires:["base","model","squarespace-dialog-text","squarespace-dialog-select","squarespace-dialog-datetime-picker","squarespace-model-editor"]})},"./src/main/webapp/universal/scripts-v6/block/tourdates.js":function(e,t,a){var s=a("./src/main/webapp/frontend/packages/enums/BlockType.js");var n=a("./src/main/webapp/universal/src/apps/App/shared/utils/BlockEditorUtils.js");YUI.add("squarespace-block-tourdates",function(a){a.namespace("Squarespace.Block");var i=a.Squarespace.Block.TourDates=a.Base.create("block-tourdates",a.SQS.LayoutEngine.Block.ModelSyncBase,[a.Squarespace.Block.PremiumBlockMixin],{bindUI:function(){this.get("model").after("save",this._renderSuccess,this)},_renderSuccess:function(e){i.superclass._renderSuccess.call(this,e);var t=this.get("model");this.tourdatesBlock=new a.Squarespace.Widgets.BandsInTownTourDatesList(t.getAttrs(["artistId","timeframe","startDate","endDate"]));this.tourdatesBlock.render(this.get("contentBox"));this.tourdatesBlock.on("templateRendered",function(){this.fire("widget:contentUpdate")}.bind(this))},_getDefaultContent:function(){var e=new Date;var t=new Date(e.getFullYear(),e.getMonth()-1,1).getTime();var a=new Date(e.getFullYear(),e.getMonth()+2,1).getTime();return{artistId:"",timeframe:"upcoming",startDate:t,endDate:a}}},{MODEL:a.Squarespace.ContentModel.TourDatesBlock,CSS_PREFIX:"sqs-block-tourdates",ATTRS:{defaultContentModel:{valueFn:"_getDefaultContent"},editor:{valueFn:function(){return n.isBlockEditorEnabled(this.get("blockTypeName"))?a.Squarespace.Block.Editor.Schema:a.Squarespace.Block.Editor.TourDates}},type:{value:s.TOURDATES}}})},"1.0",{requires:["base","model","@sqs/layout-engine/block-model-sync-base","squarespace-block-tourdates-editor","squarespace-block-schema-editor","@sqs/layout-engine/block-utils","squarespace-widgets-tourdates-bandsintown","squarespace-premium-block-mixin"]})},"./src/main/webapp/universal/scripts-v6/block/twitter-editor.js":function(e,t,a){var r=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var i=a("./src/main/webapp/frontend/packages/enums/CollectionTypes.js");var o=a("./src/main/webapp/universal/src/shared/constants/HelpLinks.js");YUI.add("squarespace-block-twitter-editor",function(s){var t=s.namespace("Squarespace.Block.Editor").Twitter=s.Base.create("twitter-block-editor-dialog",s.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return s.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Twitter")},_initConfigDialog:function(){var e=this._model.layout.get("contentItemId");s.Lang.isValue(e)||(e=this._model.layout.get("parentItemId"));this._model.setAttrs({pageCollectionId:this._model.layout.get("collectionId"),containingItemId:e});return t.superclass._initConfigDialog.apply(this,arguments)},_getServiceId:function(){return s.Squarespace.ExternalServiceProviders.TWITTER}},{NS:"blockEditor",ATTRS:{blockName:{value:r("Twitter")}}});var n=s.namespace("Squarespace.Block.ModelEditorDialog").Twitter=s.Base.create("TwitterSummaryModelEditorDialog",s.Squarespace.Block.ModelEditorDialog.SocialSearch,[],{_getServiceId:function(){return s.Squarespace.ExternalServiceProviders.TWITTER},_getDefaultDialogConfig:function(){var e=this.get("model").toJSON();var t=n.superclass._getDefaultDialogConfig.call(this);var a=t.tabs[0].fields;var i=!!this._isSocialVisible();t.name="twitter-block-editor";t.height=480;a.unshift({ctor:s.Squarespace.DialogFields.Description,text:r('Display a feed of your recent tweets, or use the search feature to display anyone\'s tweets by hashtag, mentions, or other terms. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:o.TWITTER})});a.push({ctor:s.Squarespace.DialogFields.Text,name:"searchTerm",config:{"strings.placeholder":r("Search Twitter for…"),data:e.searchTerm,maxLength:100,className:"thin",visible:i}});a.push({ctor:s.Squarespace.DialogFields.Button,name:"refresh",config:{"strings.text":r("Refresh"),className:"thin",visible:i}});a.push({ctor:s.Squarespace.DialogFields.Check,name:"unsafeSearch",config:{"strings.title":r("Include Tweets Marked As Sensitive"),"strings.description":r("Include all tweets, including any flagged as possibly sensitive by Twitter."),data:e.unsafeSearch,visible:i}});a.push({ctor:s.Squarespace.DialogFields.Check,name:"showAvatar",config:{"strings.title":r("Show Avatar"),"strings.description":r("Shows or hides the avatar image."),data:e.showAvatar}});a.push({ctor:s.Squarespace.DialogFields.Check,name:"showUsername",config:{"strings.title":r("Show Username"),"strings.description":r("Shows or hides the username text."),data:e.showUsername}});a.push({ctor:s.Squarespace.DialogFields.Check,name:"followButton",config:{"strings.title":r("Show Follow Button"),"strings.description":r("Append a follow button to the listing."),data:e.followButton}});return t}},{ATTRS:{icon:{value:"twitter"},socialAccountType:{value:s.Squarespace.ExternalServiceProviders.TWITTER},collectionType:{value:i.TWITTER},strings:{value:{name:"Twitter",itemTypePlural:"tweets",itemType:"tweet"}}}})},"1.0",{requires:["base","model","squarespace-block-social-summary-model-editor","squarespace-block-social-search-model-editor","squarespace-damask-context-globals","squarespace-dialog-check","squarespace-model-editor"]})},"./src/main/webapp/universal/scripts-v6/block/twitter-model.js":function(e,t){YUI.add("squarespace-block-twitter-model",function(e){e.namespace("Squarespace.ContentModel").TwitterBlock=e.Base.create("TwitterBlockModel",e.Model,[],{},{ATTRS:{}})},"1.0",{requires:["base","model"]})},"./src/main/webapp/universal/scripts-v6/block/twitter.js":function(e,t,a){var i=a("./src/main/webapp/frontend/packages/enums/BlockType.js");var s=a("./src/main/webapp/universal/src/apps/App/shared/utils/BlockEditorUtils.js");YUI.add("squarespace-block-twitter",function(t){var a=t.namespace("Squarespace.Block").Twitter=t.Base.create("block-twitter",t.Squarespace.Block.SocialSummaryBase,[t.Squarespace.Block.PremiumBlockMixin],{_renderSuccess:function(e){a.superclass._renderSuccess.call(this,e);e&&t.Squarespace.FollowButtonUtils.renderAll()},_getDefaultContent:function(){var e=a.superclass._getDefaultContent.call(this);return t.merge(e,{showAvatar:true,showUsername:true,followButton:false})}},{CSS_PREFIX:"sqs-block-twitter",MODEL:t.Squarespace.ContentModel.TwitterBlock,ATTRS:{editor:{valueFn:function(){return s.isBlockEditorV2Enabled(this.get("blockTypeName"))?t.Squarespace.Block.Editor.Schema:t.Squarespace.Block.Editor.Twitter}},type:{value:i.TWITTER}}})},"1.0",{requires:["base","squarespace-follow-buttons","squarespace-block-social-summary","squarespace-block-twitter-editor","squarespace-block-twitter-model","squarespace-premium-block-mixin"]})},"./src/main/webapp/universal/scripts-v6/block/video-editor.js":function(e,t,a){var n=a("./src/main/webapp/frontend/packages/enums/Flag.js");var r=a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts");var o=a("./common/temp/node_modules/lodash/isEqual.js");var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var l=a("./src/main/webapp/universal/src/shared/constants/HelpLinks.js");YUI.add("squarespace-block-video-editor",function(g){g.namespace("Squarespace.Block.Editor");var t=g.Squarespace.Block.Editor.Video=g.Base.create("video-block-editor-dialog",g.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return g.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Video")},_updateModel:function e(i){var s=this._model;g.Object.each(i,function(e,t){if("description"===t)return;if("oembed"===t&&(!i.oembed||false===i.oembed.resolved)){delete i.oembed;return}var a=s.get(t);o(a,e)&&delete i[t]});t.superclass._updateModel.call(this,i)}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Video")}}});var e=[{title:i("Video"),icon:"/universal/images-v6/icons/icon-video-16-light-solid.png",scroll:false,fields:[{ctor:g.Squarespace.DialogFields.Description,config:{text:i('Add a video from YouTube, Vimeo, Animoto, or Wistia. To add the video, you\'ll need its URL. For videos hosted elsewhere, use the Embed Code option. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:l.VIDEO_EDITOR})}},{name:"oembed",ctor:g.Squarespace.DialogFields.Oembed,config:{filter:"video","strings.title":i("Video URL"),"strings.inputPlaceholder":i("YouTube, Vimeo, etc.")}},{name:"customThumb",ctor:g.Squarespace.DialogFields.FileImage,config:{contentType:"image",transientStore:true,contentLabel:i("a Custom Thumbnail"),height:183,fullHeight:true,useFocalPoint:true,autoSaveFocalPoint:true}},{name:"overlay",ctor:g.Squarespace.DialogFields.Check,config:{"strings.title":i("Use Custom Thumbnail")}},{ctor:g.Squarespace.DialogFields.Select,config:{name:"layout",className:"thin dark",defaultValue:"caption-hidden",options:[{value:"caption-hidden",label:i("Do Not Display Caption")},{value:"caption-below",label:i("Caption Below")}]}},{ctor:g.Squarespace.DialogFields.Wysiwyg,config:{name:"description",editorHeight:135,classNames:"major"}}]}];r.isFeatureEnabled(n.VIDEO_BLOCK_ANIMATIONS)&&e.push({tabTitle:i("Animations"),fields:[{ctor:g.Squarespace.DialogFields.Select,config:{name:"blockAnimation","strings.title":i("Animate Video Block"),className:"thin dark",defaultValue:"none",options:[{value:"none",label:i("None")},{value:"fade-in",label:i("Fade In")},{value:"focus-in",label:i("Focus In")},{value:"slide-up",label:i("Slide Up")},{value:"reveal",label:i("Reveal")}]}}]});var a={initialDataByReference:true,width:400,height:582,tabs:e};g.namespace("Squarespace.Block.ModelEditorDialog");var s=g.Squarespace.Block.ModelEditorDialog.Video=g.Base.create("blockVideoEditor",g.Squarespace.ModelEditorDialog,[g.Squarespace.Block.Mixins.BlockAnimationAnalytics],{initializer:function(){var t=this.get("dialog");t.once("ready",function(){var e=this.get("model");e.after("oembedChange",this.updateDescFromOembedChange,this);e.after("customThumbIdChange",this.afterCustomThumbIdChange,this);this.trackAnimationFieldsChange({fields:[t.getField("blockAnimation")],eventName:"video_animation_selection_change",dataInitializer:this._prepareAnimationTrackingData})},this)},save:function e(t,a,i){r.isFeatureEnabled(n.VIDEO_BLOCK_ANIMATIONS)&&this.trackAnimationFieldsSave({eventName:"video_animation_selection_save",dataInitializer:this._prepareAnimationTrackingData});s.superclass.save.apply(this,arguments)},_prepareAnimationTrackingData:function(){var e=this.get("model");var t=this.get("dialog");var a=e?e.layout.get("collectionId"):null;var i=t.getField("blockAnimation").get("data");var s={collectionId:a,blockAnimationSelection:i};return s},updateDescFromOembedChange:function e(t){var a=g.Object.getValue(t,["newVal","resolved"]);if(!a)return;var i=g.Object.getValue(t,["prevVal","url"])||this.get("model").get("url");var s=g.Object.getValue(t,["newVal","url"]);if(i===s)return;var n=this.get("dialog");var r=n.getField("description");var o=r.getValue();var l="object"===typeof o&&o.html?o.html:"";var c=g.Object.getValue(t,["prevVal","description"]);var u=(this.get("model").get("description")||{}).html||"";if(c&&u!==c)return;var d=g.Object.getValue(t,["newVal","description"]);var p=g.Lang.isValue(d)?d:"";if(p===u)return;var h=l===u||""===l;if(!h)return;r.setValue({html:p})},afterCustomThumbIdChange:function e(t){t.newVal&&t.newVal!==t.prevVal&&this.get("dialog").getField("overlay").setValue(true)},getDialogData:function(){var e=this.get("model");var t=e.toJSON();var a=e.get("oembed");void 0===a&&(g.Lang.isValue(t.url)||g.Lang.isValue(t.html))&&(a={url:t.url,html:t.html,resolvedBy:t.resolvedBy,thumbnailUrl:t.thumbnailUrl});return g.merge(t,{customThumb:e.get("customThumb"),oembed:a})}},{ATTRS:{dialogConfig:{valueFn:function(){return a}}}})},"1.0",{requires:["base","squarespace-damask-context-globals","squarespace-dialog-check","squarespace-dialog-description","squarespace-dialog-file-image","squarespace-dialog-oembed","squarespace-dialog-select","squarespace-dialog-wysiwyg","squarespace-models-content-item","squarespace-block-mixin-block-animation-analytics"]})},"./src/main/webapp/universal/scripts-v6/block/video-model.js":function(e,t){YUI.add("squarespace-block-video-model",function(a){a.namespace("Squarespace.ContentModel");a.Squarespace.ContentModel.VideoBlock=a.Base.create("VideoBlockModel",a.SQS.LayoutEngine.BlockModel.Video,[],{},{ATTRS:{customThumb:{setter:function(e){var t=a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Models.ContentItem");if(a.Lang.isString(e))return new t({id:e});if(a.instanceOf(e,t))return e}}}})},"2.0",{requires:["base","model","@sqs/layout-engine/block-model-video","@sqs/layout-engine/content-item-content-item","squarespace-damask-context-globals"]})},"./src/main/webapp/universal/scripts-v6/block/video.js":function(e,t,a){var s=a("./src/main/webapp/universal/src/shared/utils/SqsVersion.js");var n=a("./src/main/webapp/universal/src/apps/App/shared/utils/BlockEditorUtils.js");YUI.add("squarespace-block-video",function(a){a.namespace("Squarespace.Block");var i=a.Squarespace.Block.Video=a.Base.create("block-video",a.SQS.LayoutEngine.Block.Video,[a.Squarespace.Block.PremiumBlockMixin],{_renderSuccess:function(e){if(!e.html){this._renderError();console.warn("Error rendering video block:",e);return}i.superclass._renderSuccess.call(this,e);if(a.config.win.location.protocol.startsWith("https")){var t=this.get("contentBox").one("object embed");t&&t.setAttribute("src",t.getAttribute("src").replace("http://","https://"))}this._pluginVideoLoader()},_pluginVideoLoader:function(){var e=this.get("contentBox").one(".sqs-video-wrapper");e&&!e.hasPlugin(a.Squarespace.VideoLoader.NS)&&e.plug(a.Squarespace.VideoLoader)},refreshVideo:function(){var e=this.get("contentBox").one(".sqs-video-wrapper");e&&e.videoloader.refreshVideo()}},{MODEL:a.Squarespace.ContentModel.VideoBlock,ATTRS:{editor:{valueFn:function(){var e=n.isBlockEditorEnabled(this.get("blockTypeName"))||s.IS_SQUARESPACE_MOBILE_APP;return e?a.Squarespace.Block.Editor.Schema:a.Squarespace.Block.Editor.Video}}}})},"2.0",{requires:["base","@sqs/layout-engine/block-video","squarespace-premium-block-mixin","squarespace-video-loader","squarespace-block-video-model","squarespace-block-video-editor","squarespace-block-schema-editor"]})},"./src/main/webapp/universal/scripts-v6/block/zola-editor.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/universal/src/shared/constants/HelpLinks.js");YUI.add("squarespace-block-zola-editor",function(e){e.namespace("Squarespace.Block.Editor").Zola=e.Base.create("zola-block-editor-dialog",e.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return e.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Zola")}},{NS:"blockEditor",ATTRS:{blockName:{value:i("Zola")}}});e.namespace("Squarespace.Block.ModelEditorDialog").Zola=e.Base.create("block-zola-editor",e.Squarespace.ModelEditorDialog,[],{_getDialogConfig:function(){return{width:335,height:335,discardChangesConfirmation:false,initialDataByReference:true,tabs:[{title:"Zola",icon:"/universal/images-v6/icons/icon-button-16-light.png",scroll:true,fields:[{ctor:e.Squarespace.DialogFields.Description,config:{text:i('Enter your Zola registry name to display items from your registry. <a href="{helpLink}" target="_blank">Learn more</a> <br>Sign up for a Zola registry <a href="https://www.zola.com/wedding-registry/promotion/squarespace" target="_blank">here</a>.',{helpLink:s.ZOLA})}},{ctor:e.Squarespace.DialogFields.Text,config:{name:"registryKey","strings.title":i("Registry Name"),"strings.description":i("This is the last part of your Zola URL."),"strings.placeholder":i("johnandjane")}},{ctor:e.Squarespace.DialogFields.Slider,config:{"strings.title":i("Items to Display"),name:"displaySize",range:[1,12]}},{ctor:e.Squarespace.DialogFields.Check,config:{"strings.title":i("Add Padding"),name:"isInset"}}]}]}}},{ATTRS:{dialogConfig:{valueFn:"_getDialogConfig",validator:e.Lang.isObject}}})},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-damask-context-globals","squarespace-dialog-html","squarespace-dialog-slider","squarespace-dialog-text","squarespace-model-editor"]})},"./src/main/webapp/universal/scripts-v6/block/zola.js":function(e,t,a){var n=a("./src/main/webapp/frontend/packages/enums/BlockType.js");var r=a("./common/temp/node_modules/lodash/debounce.js");var o=a("./src/main/webapp/universal/src/apps/App/shared/utils/BlockEditorUtils.js");YUI.add("squarespace-block-zola",function(i){var e={registryKey:"",displaySize:12,isInset:false};var s=i.namespace("Squarespace.Block").Zola=i.Base.create("block-zola",i.SQS.LayoutEngine.Block.ModelSyncBase,[i.Squarespace.Block.PremiumBlockMixin],{bindUI:function(){var t=this.get("contentBox");this.get("model").on("change",function(e){t.addClass(s.CSS_IS_RENDERING)},this);this.get("model").after("change",r(function(e){this._renderBlock(e);t.removeClass(s.CSS_IS_RENDERING)},this.get("contentRefreshRate")),this)},_renderSuccess:function(e){s.superclass._renderSuccess.call(this,e);if(i.config.win.ZolaWidget){i.config.win.ZolaWidget.init();return}var t=this.get("contentBox");var a=document.createElement("script");a.src=t.one("[data-zola-script-src]").getAttribute("data-zola-script-src");t.append(a)}},{CSS_PREFIX:"sqs-block-zola",CSS_IS_RENDERING:"is-rendering",ATTRS:{editor:{valueFn:function(){return o.isBlockEditorV2Enabled(this.get("blockTypeName"))?i.Squarespace.Block.Editor.Schema:i.Squarespace.Block.Editor.Zola}},type:{value:n.ZOLA},defaultContentModel:{value:e},contentRefreshRate:{value:500}}})},"1.0",{requires:["base","@sqs/layout-engine/block-model-sync-base","squarespace-block-zola-editor","squarespace-premium-block-mixin"]})},"./src/main/webapp/universal/scripts-v6/blog-collection-list.js":function(e,t){YUI.add("squarespace-blog-collection-list",function(t){var o=t.config.win;var e=o.document;var s=200;var l=t.Squarespace.Template.getTweakValue;var a=function(e){if(!e)return;var t=parseInt(l("tweak-blog-list-columns"),10);var a=parseInt(l("tweak-blog-list-spacing"),10);var i=parseFloat(o.getComputedStyle(e).width);while((i-a*(t-1))/t<s)t--;e.setAttribute("data-columns",t)};var i=function(e){if(!e)return;var t=e.querySelectorAll(".BlogList-item-image img");if("true"===l("tweak-blog-list-item-image-show")){var a="stacked"===l("tweak-blog-list-style").toLowerCase();var i="auto"===l("tweak-blog-list-item-image-aspect-ratio-stacked").toLowerCase();if(a&&i)for(var s=0;s<t.length;s++){var n=t[s];n.style.position=null;n.style.top=null;n.style.right=null;n.style.bottom=null;n.style.left=null;n.style.width=null;n.style.height=null;o.ImageLoader.load(n,{load:true,mode:null})}else for(var r=0;r<t.length;r++)o.ImageLoader.load(t[r],{load:true,mode:"fill"})}};var n=function(e){a(e);i(e)};var r=100;var c=false;var u;var d=function(e){c=c||true;u&&clearTimeout(u);u=setTimeout(function(){if(!t||!t.config||!t.config.win)return;n(e);c=false},r)};var p=["tweak-blog-list-columns","tweak-blog-list-spacing"];var h=["tweak-blog-list-style","tweak-blog-list-columns","tweak-blog-list-spacing","tweak-blog-list-item-image-aspect-ratio-grid","tweak-blog-list-item-image-aspect-ratio-stacked","tweak-blog-list-item-image-show","tweak-blog-list-item-image-width"];var g=function(e){var t=e.getName();p.indexOf(t)>=0&&a();h.indexOf(t)>=0&&i()};t.Global.on("tweak:change",g);var m;var f;t.config.win.Squarespace.onInitialize(t,function(){m=e.querySelector(".BlogList");if(m){n(m);f=d.bind(o,m);o.addEventListener("resize",f)}});t.config.win.Squarespace.onDestroy(t,function(){o.removeEventListener("resize",f)})},"1.0",{requires:[]})},"./src/main/webapp/universal/scripts-v6/business-hours-utils.js":function(e,t,a){var g=a("./common/temp/node_modules/lodash/isUndefined.js");var m=a("./src/main/webapp/universal/src/shared/utils/getTimeOffsetToWebsiteTimezone.js");var i=a("./src/main/webapp/universal/src/shared/utils/getWeekdaysData.js");var f=a("./src/main/webapp/universal/src/shared/utils/getWeekdaysShortData.js");var v=a("./src/main/webapp/universal/src/shared/constants/BusinessHoursConstants.js");var b=a("./src/main/webapp/universal/src/shared/utils/BusinessHoursUtils.js");YUI.add("squarespace-business-hours-utils",function(u){var n=Object.keys(i());function o(e){u.Lang.isUndefined(e)&&(e=new Date);var t=e.getDay();return n[t]}function l(a){var i;u.Array.some(n,function(e,t){if(e===a){i=t-1;return true}});i=-1===i?6:i;return n[i]}function c(e,t){var a=m;u.Lang.isUndefined(e)&&(e=new Date);var i=60*e.getHours();var s=e.getMinutes();u.Lang.isUndefined(t)&&(t=a(e));return i+s+t}function t(e){var t;t=e.match(/am|pm/i)?v.HOUR_12:v.HOUR_24;return t}function r(e){return("0"+e).slice(-2)}function d(e){var t=e.length;return e[t-1]}function p(e,t){var a=t[e];var i;i=u.Lang.isUndefined(a)||!u.Lang.isArray(a.ranges)?[]:a.ranges.slice(0);var s=l(e);var n=t[s];var r;if(n&&u.Lang.isArray(n.ranges)){r=d(n.ranges);r.from>r.to&&i.unshift({from:0,to:r.to})}if(a&&u.Lang.isArray(a.ranges)){r=d(a.ranges);r.from>r.to&&i.unshift({from:r.from,to:v.MAX_TIMESTAMP})}return i}function h(e,t){var a=Math.floor(e/60);var i=e%60;var s="am";var n;if(t===v.HOUR_12){if(24===a)a=12;else if(a>=12){a-=12;s="pm"}i=i&&r(i);a=a||12;n=a+(i?":"+i:"")+s}else{24===a&&(a=0);a=r(a);i=r(i);n=a+":"+i}return n}u.namespace("Squarespace.BusinessHoursUtils").plainTextDays=function(t){var a=f();var i=u.Squarespace.BusinessHoursUtils;var s="";var e=n.slice();e=e.concat(e.shift());u.Array.each(e,function(e){s+=a[e]+": ";s+=i.formatDay(t[e],{markup:false});s+="<br>"});return s};u.namespace("Squarespace.BusinessHoursUtils").formatDay=function(s,n){var r=function(e){return n.markup?e:""};n=u.merge({closed:v.LANG.closed,allDay:v.LANG.allDay,delimeter:" - ",markup:true},n);var e;if(s&&u.Lang.isArray(s.ranges)){var o;var l;var c=t(s.text);e=u.Array.reduce(s.ranges,"",function(e,t,a,i){if(b.isClosedText(s.text)||g(t.to)&&g(t.from))e=r('<div class="closed">'+n.closed+"</div>");else if(t.from===t.to||0===t.from&&1440===t.to){e+=r("<div>");b.isAllDayText(s.text)?e+=s.text:e+=n.allDay;e+=r("</div>")}else{o=h(t.from,c);l=h(t.to,c);e+=r("<div>");e+=o+n.delimeter+l;e+=r("</div>");!n.markup&&a<i.length-1&&(e+=", ")}return e})}else{e=r('<div class="closed">');e+=n.closed;e+=r("</div>")}return e};u.namespace("Squarespace.BusinessHoursUtils").isStoreOpen=function(e,t,a){var i=c(t,a);var s=false;u.Lang.isUndefined(e)&&(e=u.Squarespace.Context?u.Squarespace.getInstance().get("websiteSettings").get("businessHours"):Static.SQUARESPACE_CONTEXT.websiteSettings.businessHours);var n=o(t);var r=p(n,e);u.Array.some(r,function(e){if(u.Lang.isUndefined(e.from)){s=false;return false}if(e.from===e.to){s=true;return true}if(i>=e.from&&i<=e.to){s=true;return true}});return s};u.Handlebars.registerHelper("isStoreOpen",function(e,t){var a=u.Squarespace.BusinessHoursUtils.isStoreOpen(e);if(a)return t.fn(this);return t.inverse(this)});u.Handlebars.registerHelper("dailyHours",function(e,t){var a=u.Squarespace.BusinessHoursUtils;var i=t.hash;var s={closed:i.closed,allDay:i.allDay,delimeter:i.delimeter};u.Lang.isUndefined(s.closed)&&delete s.closed;u.Lang.isUndefined(s.allDay)&&delete s.allDay;u.Lang.isUndefined(s.delimeter)&&delete s.delimeter;var n=a.formatDay(e,s);return new u.Handlebars.SafeString(n)})},"1.0",{requires:["base","handlebars-base","node","squarespace-attr-validators"]})},"./src/main/webapp/universal/scripts-v6/business-hours.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/universal/src/shared/utils/getWeekdaysShortData.js");YUI.add("squarespace-business-hours",function(a){a.namespace("Squarespace.Widgets").BusinessHours=a.Base.create("businessHours",a.Squarespace.Widgets.SSWidget,[],{_setDefaultBusinessHours:function(e){var t=this.get("websiteSettings");a.Lang.isNull(e)&&(e=t.businessHours?t.businessHours:t.get("businessHours"));return e}},{CSS_PREFIX:"sqs-business-hours",HANDLEBARS_TEMPLATE:"business-hours.html",ATTRS:{websiteSettings:{valueFn:function(){return a.Squarespace.Context?a.Squarespace.Context.getInstance().get("websiteSettings"):Static.SQUARESPACE_CONTEXT.websiteSettings}},businessHours:{value:null,setter:"_setDefaultBusinessHours"},strings:{value:{store:{open:i("We are currently<br><span>open</span>"),closed:i("We are currently<br><span>closed</span>")},daysAbbreviated:s()}}}})},"1.0",{requires:["base","node","squarespace-business-hours-template","squarespace-business-hours-utils","squarespace-ss-widget"]})},"./src/main/webapp/universal/scripts-v6/calendar-base-lang.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/constants/DateTime.js");YUI.add("squarespace-calendar-base-lang",function(e){e.Intl.add("calendar-base","en",{very_short_weekdays:i.WEEKDAYS_SHORT,first_weekday:0,weekends:[0,6]})},"1")},"./src/main/webapp/universal/scripts-v6/calendar-block-renderer.js":function(e,t){YUI.add("squarespace-calendar-block-renderer",function(o){var n=[];o.namespace("Squarespace");o.Squarespace.CalendarBlockRenderer={};o.Squarespace.CalendarBlockRenderer.renderCalendar=function e(t,a,i){var s;o.Lang.isString(a)?s=a:o.Object.hasKey(a,"collectionId")?s=a.collectionId:o.instanceOf(a,o.Model)&&(s=a.get("id"));var n={date:new Date,collectionId:s};o.Lang.isValue(i)&&o.merge(n,{pageCollectionId:i});var r=new o.Squarespace.SquarespaceCalendar(n);r.plug(o.Squarespace.SquarespaceCalendarRenderer);r.render(t);return r};o.Squarespace.CalendarBlockRenderer.initializeNode=function e(t){var a=t.one(".sqs-block-content");var i=o.JSON.parse(t.getAttribute("data-block-json"));var s=!!o.Array.find(n,function(e){return e.get("boundingBox").ancestor(".sqs-block-content")===a});if(s)return;n.push(o.Squarespace.CalendarBlockRenderer.renderCalendar(a,i))};o.config.win.Squarespace.onInitialize(o,function e(){var t=o.all(".sqs-block.calendar-block[data-block-json]");t.size()&&t.each(o.Squarespace.CalendarBlockRenderer.initializeNode)});o.config.win.Squarespace.onDestroy(o,function e(){n.forEach(function(e){e.destroy()});n.length=0})},"1.0",{requires:["model","squarespace-calendar-core-renderer"]})},"./src/main/webapp/universal/scripts-v6/calendar-core-renderer.js":function(e,t,a){var o=a("./common/temp/node_modules/moment/moment.js");var l=a("./src/main/webapp/universal/src/shared/i18n/index.ts").formatDateTime;var c=a("./src/main/webapp/universal/src/shared/utils/dateFormat.js");var u=a("./src/main/webapp/universal/src/shared/utils/shiftForWebsiteTimezoneDisplay.js");var d=a("./src/main/webapp/frontend/packages/enums/RecordType.js");YUI.add("squarespace-calendar-core-renderer",function(s){s.namespace("Squarespace");var a="MM-YYYY";var t="MMMM YYYY";var n=function(e){return e.recordType===d.EVENT?e.structuredContent.startDate:e.addedOn};var i="/api/open/GetItemsByMonth";s.Squarespace.SquarespaceCalendar=s.Base.create("SquarespaceCalendar",s.Calendar,[],{initializer:function(){this._fetchEvents()},bindUI:function(){s.Calendar.superclass.bindUI.call(this);this.before("dateChange",this._clearEvents,this);this.after("dateChange",this._fetchEvents,this);this.after("collectionIdChange",this._fetchEvents,this)},_clearEvents:function(){this.set("events",[])},_fetchEvents:function(){var e=this.get("date");var t=o(e).locale("en").format(a);s.Data.get({url:this._getFetchUrl(t),success:this._parseResponse,failure:this._handleResponseError},this)},_parseResponse:function(e){this.set("events",e)},_handleResponseError:function(e){this.fire("fetchEventsFailure");false},_getFetchUrl:function(e){return i+this._buildQueryString(e)},_buildQueryString:function(e){var t=this.get("collectionId");var a=this.get("pageCollectionId");var i=this.get("category");var s=this.get("tag");var n=this.get("author");var r="?month="+e;t&&(r+="&collectionId="+t);a&&(r+="&pageCollectionId="+a);var o=r+(i?"&category="+i:"")+(s?"&tag="+s:"")+(n?"&author="+n:"");return o}},{ATTRS:{events:{value:[],validator:s.Lang.isArray},collectionId:{value:null,validator:s.Lang.isString},pageCollectionId:{value:null,validator:s.Lang.isString},category:{value:"",validator:s.Lang.isString},tag:{value:"",validator:s.Lang.isString},author:{value:"",validator:s.Lang.isString}}});s.Squarespace.CalendarBaseRenderer=s.Base.create("CalendarBaseRenderer",s.Plugin.Base,[],{initializer:function(e){this.host=e.host;this.afterHostEvent("eventsChange",this._onEventsChange,this)},_onEventsChange:function(e){var t=null;s.Lang.isArray(e.newVal)&&e.newVal.length>0&&(t=s.bind(this._calendarFilterFunction,this));this.host.set("customRenderer",{rules:{all:"events"},filterFunction:t})},_calendarFilterFunction:function(e,t,a){var i=this.host.get("events");var s=this._getEventsOfDay(i,e);this._sortEvents(s);this._renderDay(e,t,s)},_renderDay:function(e,t,a){a.length>0&&t.setStyle("background","gray")},_sortEvents:function(e){e.sort(function(e,t){var a=n(e);var i=n(t);return i-a})},_isMultidayEvent:function(e){if(e.recordType!==d.EVENT)return false;var t=e.structuredContent;return o(t.startDate).diff(t.endDate,"days")},_isEventPartOfDay:function(e,t){if(e.recordType!==d.EVENT)return o(e.addedOn).isSame(t,"day");var a=e.structuredContent;return o(t).isBetween(a.startDate,a.endDate,"day","[]")},_isSameDay:function(e,t){if(e.recordType!==d.EVENT)return true;return o(e.structuredContent.startDate).isSame(t,"day")},_getEventsOfDay:function(e,t){if(s.Lang.isArray(e)&&e.length>0)return s.Array.filter(e,function(e){return this._isEventPartOfDay(e,t)},this);return[]},_getEventDisplayTime:function(e){var t=n(e);return c(t,"h:mma").trim()}},{NS:"calendarPlugin"});var r=s.Squarespace.SquarespaceCalendarRenderer=s.Base.create("squarespaceCalendarRenderer",s.Squarespace.CalendarBaseRenderer,[],{initializer:function(e){this.host.set("headerRenderer",s.bind(this._renderHeader,this));this._loadingSpinner=new s.Squarespace.Spinner({color:"dark",size:"extra-large",render:this.host.get("contentBox")});this.onceAfterHostEvent("eventsChange",this._renderCalendar);this.onceAfterHostEvent("fetchEventsFailure",function(){this._loadingSpinner&&this._loadingSpinner.destroy(true);this.host.destroy()},this);this._bindUI()},destructor:function(){this._loadingSpinner&&this._loadingSpinner.destroy(true);this._resizeEvent.detach()},_bindUI:function(){this._resizeEvent=s.on("resize",this._syncUI,s.config.win,this)},_syncUI:function(){if(this.host.get("contentBox").getDOMNode()){this._fitToContainer();this._setupCells();this.host.get("contentBox").hasClass(r.COMPACT_LAYOUT_CLASS)||this._loadImages();this._setFlyoutHeights()}},_onEventsChange:function(e){var t=s.bind(this._calendarFilterFunction,this);var a={all:{all:{all:{0:"sunday",1:"monday",2:"tuesday",3:"wednesday",4:"thursday",5:"friday",6:"saturday"}}}};this.host.set("customRenderer",{rules:a,filterFunction:t});this.get("isRendered")&&this._syncUI()},_calendarFilterFunction:function(e,t,a){r.superclass._calendarFilterFunction.apply(this,arguments);a.indexOf("sunday")>=0?t.addClass("sunday"):a.indexOf("monday")>=0?t.addClass("monday"):a.indexOf("friday")>=0?t.addClass("friday"):a.indexOf("saturday")>=0&&t.addClass("saturday")},_fitToContainer:function(){var e=this.host.get("contentBox");var t=e.get("offsetWidth");e.toggleClass(r.SMALL_LAYOUT_CLASS,t<=770);e.toggleClass(r.COMPACT_LAYOUT_CLASS,t<=600);e.toggleClass(r.TINY_LAYOUT_CLASS,t<=300)},_setupHeader:function(){var e=this.host.get("contentBox");e.one(".yui3-calendar-header-label").wrap("<h1></h1>")},_setupCells:function(){var e=this.host.get("contentBox").one("table");e.setStyle("width",null);var t=e.getDOMNode();var a=t.offsetWidth;var i=t.parentElement;if(i){var s=i.offsetWidth;a=Math.min(a,s)}var n=7;var r=n+1;this.cellSpacing=parseInt(e.getComputedStyle("borderSpacing"),10);var o=this.cellSpacing*r;var l=parseInt((a-o)/n,10);var c=l*n+o;var u=Math.min(a,c);e.setStyle("width",u);var d=parseInt(u/n,10)-this.cellSpacing;e.all("td").setStyles({width:d,height:d})},_loadImages:function(){this.host.get("contentBox").all("img[data-src]").each(function(e){ImageLoader.load(e,{mode:"fill",load:true})},this)},_setFlyoutHeights:function(){this.host.get("contentBox").all(".flyoutitemlist--hasmorecontent").each(function(e){var t=e.ancestor("tr");var a=this._getRowHeight(t);var i;i=e.ancestor("tr:nth-child(4)")||e.ancestor("tr:nth-child(5)")||e.ancestor("tr:nth-child(6)")?this._getRowHeight(t.previous("tr")):this._getRowHeight(t.next("tr"));e.setStyle("height",a+i+this.cellSpacing)},this);this.host.get("contentBox").all("tr").removeAttribute("data-row-height")},_getRowHeight:function(e){if(e.getAttribute("data-row-height"))return parseInt(e.getAttribute("data-row-height"),10);var t=e.get("offsetHeight");e.setAttribute("data-row-height",t);return t},_renderCalendar:function(){this._setupHeader();this._syncUI();this._loadingSpinner&&this._loadingSpinner.destroy(true);this.host.get("boundingBox").addClass("loaded");this.set("isRendered",true)},_renderHeader:function(e){return l(e,t)},_renderDay:function(e,t,a){this.setAttrs({date:e,node:t,events:this._groupEvents(a,e)});this._highlightToday();this._highlightDaysWithEvents();var i=this._getTemplateInfo();var s=i.template(this._getHBTemplateContext());t.empty().append(s)},_highlightToday:function(){var e=new Date;var t=u(e);this.get("date").setHours(0,0,0,0)===t.setHours(0,0,0,0)&&this.get("node").addClass(r.TODAY_CLASS)},_highlightDaysWithEvents:function(){this.get("events").length>0&&this.get("node").addClass(r.HAS_EVENT_CLASS)},_getTemplateInfo:function(){return{template:s.Squarespace.UITemplates.getCompiledTemplate(r.HANDLEBARS_TEMPLATE)}},_getHBTemplateContext:function(){return{date:this.get("date"),events:this.get("events")}},_groupEvents:function(e,t){var a=[];var i=[];s.Array.each(e,function(e){if(this._isSameDay(e,t))a.unshift(e);else{e.isSubsequentDayOfMultidayEvent=true;i.unshift(e)}this._isMultidayEvent(e)&&(e.isMultiday=true)},this);return i.concat(a)}},{NS:"calendarPlugin",TODAY_CLASS:"today",HAS_EVENT_CLASS:"has-event",SMALL_LAYOUT_CLASS:"small-layout",COMPACT_LAYOUT_CLASS:"compact-layout",TINY_LAYOUT_CLASS:"tiny-layout",HANDLEBARS_TEMPLATE:"calendar-day.html"});s.Handlebars.registerHelper("day-of-month-format",function(e,t){return l(e,t.hash.format||"LLL")});s.Handlebars.registerHelper("date-format",function(e,t){return c(e,t.hash.format||"LLL")});s.Handlebars.registerHelper("calendar-compact-time-format",function(e){var t="PM"===c(e,"A")?"p":"a";return 0===new Date(e).getMinutes()?c(e,"h")+t:c(e,"h:mm")+t})},"1.0",{requires:["base","intl","squarespace-calendar-base-lang","squarespace-datatype-date-format","calendar","node","squarespace-attr-validators","squarespace-calendar-day-template","squarespace-spinner","squarespace-ui-base","squarespace-ui-templates","squarespace-widgets-alert"]})},"./src/main/webapp/universal/scripts-v6/cart-utils.js":function(e,t,a){var v=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var i=a("./src/main/webapp/universal/src/shared/utils/commerce/trackEvent.ts");var s=a("./src/main/webapp/frontend/packages/enums/BlockType.js");var o=a("./src/main/webapp/frontend/packages/enums/ProductTypes.js");var l=a("./common/temp/node_modules/@sqs/error-reporter/dist/index.js");YUI.add("squarespace-cart-utils",function(f){var n;var r;f.namespace("Squarespace.CartUtils");f.Squarespace.CartUtils={initializeAddToCartButtons:function(){f.all(".sqs-add-to-cart-button").each(function(e){switch(this._getProductTypeFromPurchaseButton(e)){case o.PHYSICAL:case o.DIGITAL:case o.SERVICE:this._initializeAddToCartButton(e);break;case o.GIFT_CARD:this._initializePurchaseGiftCardButton(e);break;default:false;break}e.hasClass("use-form")&&!r&&f.Squarespace.CartUtils._getAdditionalFieldsFormTemplateSchema(function(e){r=e},this)},this)},_initializeAddToCartButton:function(e){var t=f.Squarespace.Commerce.isExpressCheckout();var a="true"===e.getAttribute("data-is-subscription");var i;"false"===e.getAttribute("data-use-custom-label")&&(a?i=v("Subscribe"):t&&(i=v("Purchase")));this._initializeButton(e,i);var s=a?f.Squarespace.CartUtils._goToSubscriptionCheckout:f.Squarespace.CartUtils._goToCheckoutOrAddToCart;e.on("click",f.Squarespace.CartUtils._addCartEntry,this,s);e.on("keydown",function(e){13!==e.keyCode&&32!==e.keyCode||this._addCartEntry(e,s)}.bind(this))},_initializePurchaseGiftCardButton:function(e){"false"===e.getAttribute("data-use-custom-label")?this._initializeButton(e,v("Purchase")):this._initializeButton(e);e.on("click",f.Squarespace.CartUtils._purchaseGiftCard,this);e.on("keypress",function(e){13!==e.keyCode&&32!==e.keyCode||this._purchaseGiftCard(e)}.bind(this))},_initializeButton:function(e,t){var a=e.one(".sqs-add-to-cart-button-inner");a.plug(f.Squarespace.Animations.Scalable,{duration:.2});if(t){a.setContent(t);e.setData("original-label",t)}},_getProductTypeFromPurchaseButton:function(e){return Number(e.getAttribute("data-product-type"))||o.UNKNOWN},_setButtonWidth:function(e){var t=Math.ceil(e.getDOMNode().getBoundingClientRect().width);e.get("parentNode").setStyles({width:t+"px",minWidth:"11em"});e.setStyle("display","block")},_showError:function(e){var t=f.Squarespace.Commerce.isExpressCheckout()?v("Unable to Purchase Item"):v("Unable to Add Item");new f.Squarespace.Widgets.Alert({"strings.title":t,"strings.message":e})},_showGiftCardError:function(e){var t=v("Unable to purchase Gift Card");new f.Squarespace.Widgets.Alert({"strings.title":t,"strings.message":e})},_generateErrorString:function(e){var t=e.length;if(1===t)return v("Please select the {option} option.",{option:e[0]});if(2===t)return v("Please select the {option1} and {option2} options.",{option1:e[0],option2:e[1]});return v("Please select the {optionsList} and {lastOption} options.",{optionsList:e.slice(0,-1).join(", "),lastOption:e[e.length-1]})},_addCartEntry:function(e,t){var a=e.currentTarget;var i=a.get("parentNode");if(i.hasClass("cart-added"))return;var s=a.getAttribute("data-item-id");var n,r;var o=a.get("parentNode");var l=f.one(o.siblings(".product-variants").item(0));if(f.Lang.isValue(l)){var c=JSON.parse(l.getAttribute("data-unselected-options"));var u=c.length;if(u>0){this._showError(this._generateErrorString(c));return}var d=l.getAttribute("data-selected-variant");var p=l.getAttribute("data-variant-in-stock");var h=d?JSON.parse(d):null;var g=!!p;if(!h){this._showError(v("Sorry, that item variant is unavailable. Please select another variant."));return}if(!g){this._showError(v("Sorry, we do not have enough of that item available."));return}n=h}var m=a.get("parentNode").siblings(".product-quantity-input").item(0);if(m){r=f.one(m).one("input").get("value");if(!f.Lang.isNumber(Number(r))){this._showError(v("Quantity must be a number."));return}}a.hasClass("use-form")?this._verifyItemInStock({itemId:s,variant:n,inStockCb:f.bind(function(){f.Squarespace.CartUtils._openAdditionalFieldsForm(a,function(e){t(a,s,n,r,e,this._showError)},this)},this),outOfStockCb:f.bind(function(){this._showError(v("Sorry, we do not have enough of that item available."))},this)}):t(a,s,n,r,null,this._showError.bind(this))},_goToSubscriptionCheckout:function(e,t,a,i,s,n){if(f.Lang.isValue(i)&&i%1!==0){n(v("Quantity must be a whole number"));f.Squarespace.CartUtils._setButtonStateIdle(e);return}f.Data.post({url:"/api/3/commerce/cart/subscription",json:true,data:{itemId:t,sku:a&&a.sku,qty:i,additionalFields:f.JSON.stringify(s||{})},success:function(e){f.Squarespace.Commerce.goToSubscriptionPage(e.cartToken)},failure:function(e){n(e.message)}})},_purchaseGiftCard:function(e){var t=e.currentTarget;var a=t.getAttribute("data-item-id");var i=null;var s=t.get("parentNode").siblings(".product-variants").item(0);if(s){var n=JSON.parse(s.getAttribute("data-unselected-options"));if(n.length){this._showGiftCardError(v("Select a denomination for the Gift Card"));return}i=JSON.parse(s.getAttribute("data-selected-variant"))}f.Squarespace.Commerce.goToGiftCardPage(a,i)},_verifyItemInStock:function(a){var i=f.Squarespace.Singletons.ShoppingCart;f.Data.get({url:f.Squarespace.API_ROOT+"commerce/inventory/stock/",data:{itemId:a.itemId},success:function(e){var t=f.Array.some(e.results,function(e){if(e.unlimited)return true;return e.qtyInStock>i.totalForItem(a.itemId,a.variant)});t?a.inStockCb():a.outOfStockCb()}})},_goToCheckoutOrAddToCart:function(a,e,t,i,s,n){f.Squarespace.CartUtils._setButtonStateAdding(a);if(f.Lang.isValue(i)&&i%1!==0){n("Quantity must be a whole number");f.Squarespace.CartUtils._setButtonStateIdle(a);return}var r=f.Squarespace.Commerce.isExpressCheckout();f.Squarespace.Singletons.ShoppingCart.addEntry(e,t,i,s,r,function(e,t){if(e){n(e);f.later(1e3,this,function(){f.Squarespace.CartUtils._setButtonStateIdle(a)});return}try{f.Squarespace.CartUtils._trackAddToCartHelper(t)}catch(e){console.error(e);l.trackCaughtError("common","trackAddToCart issue",e.stack)}if(f.Squarespace.Commerce.isExpressCheckout()){f.Squarespace.Commerce.goToCheckoutPage();return}f.later(1e3,this,function(){if(!f.Lang.isNull(a._node)){f.Squarespace.CartUtils._setButtonStateAdded(a);f.later(2e3,this,function(){f.Squarespace.CartUtils._setButtonStateIdle(a)})}})},this)},_setButtonStateAdding:function(a){var i=a.one(".sqs-add-to-cart-button-inner");var s=a.get("parentNode");var n=s.one(".ProductItem-view-cart");var r=false;f.Squarespace.CartUtils._setButtonWidth(a);i.once("hidden",function(){i.empty();a.addClass("cart-adding");var e=v("Adding…");i.append('<div class="status-text">'+e+"</div>");if(r&&!n){var t=v("View Cart");s.append('<div class="ProductItem-view-cart" style="display: none;"><a class="sqs-add-to-cart-button" href="/cart">'+t+"</a></div>")}i.show()},this);i.hide()},_setButtonStateAdded:function(e){var t=e.one(".sqs-add-to-cart-button-inner");t.empty();var a=v("Added!");e.addClass("cart-added");t.append('<div class="status-text">'+a+"</div>")},_setButtonStateIdle:function(e){var t=e.one(".sqs-add-to-cart-button-inner");t.once("hidden",function(){t.empty();e.removeClass("cart-adding");t.setContent(e.getData("original-label"));t.show()},this);t.hide()},_openAdditionalFieldsForm:function(e,t,a){n&&n.destroy();n=new f.Squarespace.Widgets.ModalLightbox({render:f.one("body")});var i=f.JSON.parse(e.getData("form"));var s=new f.Squarespace.Widgets.AsyncForm({form:i,formTemplate:r,formSubmitButtonText:e.getData("original-label"),formName:i.name,showTitle:true});s.on("submission",function(e){t&&t.call(a||this,e.data);n.close()},this);n.set("content",s);n.once("close",function(){s.destroy()},this);n.open()},_getAdditionalFieldsFormTemplateSchema:function(t,a){f.Data.get({url:"/api/template/GetTemplateSchema",data:{type:s.FORM},success:function(e){t.call(a||this,e)}},this)},_trackAddToCartHelper:function(e){var t=e.chosenVariant?e.chosenVariant.sku:null;var a=e.chosenVariant?e.chosenVariant.attributes:null;i.trackAddToCart({value:(e.subTotal/100).toFixed(2),currency:e.item.price.currency,content_name:e.title,content_type:"product",content_ids:t,contents:[{id:t,quantity:e.quantity,item_price:(e.purchasePriceCents/100).toFixed(2),attributes:a}]})}}},"1.0",{requires:["base","json","node","squarespace-animations","squarespace-async-form","squarespace-commerce-utils","squarespace-modal-lightbox","squarespace-models-shopping-cart","squarespace-spinner","squarespace-widgets-alert"]})},"./src/main/webapp/universal/scripts-v6/chartjs-helpers.js":function(e,t){YUI.add("squarespace-chartjs-helpers",function(e){},"1.0",{requires:["@sqs/layout-engine/chartjs-helpers"]})},"./src/main/webapp/universal/scripts-v6/code-editor.js":function(e,t,a){var i=a("./common/temp/node_modules/lodash/noop.js");YUI.add("squarespace-code-editor",function(e){var t=a("./src/main/webapp/universal/src/shared/components/BaseCodeMirror.js");e.namespace("Squarespace");e.Squarespace.CodeEditor=e.Base.create("codeEditor",e.Base,[],{initializer:function(e){this.el=e.el;e.tabIndex&&this.el.setAttribute("tabIndex",e.tabIndex);this.parentNode=this.el.get("parentNode");this.parentNode.setStyle("overflow","hidden");this.editor=t.fromTextArea(this.el.getDOMNode(),{lineWrapping:true,mode:this.get("mode")});this.editor.getScrollerElement().style.height="100%";this._setOptionsForMode(this.get("mode"));this.on("modeChange",this._loadMode,this);this.after("heightChange",this._setEditorHeight,this);this.resizeOnFirstCursorActivity();this.setToParentHeight()},setToParentHeight:function(){var e=this.parentNode.getStyle("height");this.set("height",e)},resizeOnFirstCursorActivity:function(){var e=function(){if(this.editor.getScrollInfo().top>0){this.editor.off("cursorActivity",e);this.editor.refresh()}}.bind(this);this.editor.on("cursorActivity",e)},getContent:function(){return this.editor.getValue()},setContent:function(e){return this.editor.setValue(e||"")},getContentHeight:function(){return parseInt(this.editor.getScrollerElement().offsetHeight,10)},focus:function(){this.editor.refresh();return this.editor.focus()},execCommand:i,_clearOptions:function(){this.editor.setOption("matchBrackets",false);this.editor.setOption("autoCloseBrackets",false);this.editor.setOption("matchTags",false);this.editor.setOption("autoCloseTags",false)},_setOptionsForMode:function(e){switch(e){case"css":case"javascript":this.editor.setOption("matchBrackets",true);this.editor.setOption("autoCloseBrackets",true);break;case"htmlmixed":this.editor.setOption("matchTags",true);this.editor.setOption("autoCloseTags",true);break}},_loadMode:function(e){this._clearOptions();this.editor.setOption("mode",e.newVal);this._setOptionsForMode(e.newVal)},_setEditorHeight:function(e){this.editor.setSize(null,e.newVal)}},{ATTRS:{mode:{value:"htmlmixed"},height:{value:-1}}})},"1.0",{requires:["base","node"]})},"./src/main/webapp/universal/scripts-v6/comment-data.js":function(e,t,a){var n=a("./src/main/webapp/frontend/packages/enums/CommentStatuses.js");var r=a("./common/temp/node_modules/lodash/noop.js");YUI.add("squarespace-comment-data",function(s){s.namespace("Squarespace");s.Squarespace.CommentData=Class.create({initialize:function(e){if(void 0===e)throw new Error("You must provide a configuration object.");if(void 0===e.target)throw new Error("You must provide a target id.");if(void 0===e.targetType)throw new Error("You must provide a target type.");this.settings=e.settings||{approvalRequired:false,allowAnon:true,threaded:true};this.formatter=e.formatter||function(e){return e};this.page=1;this.data={comments:[]};this.topLevelComments=0;this.visibleComments=0;this.totalComments=e.publicCommentCount||0;this.commentsPerPage=50;this.target=e.target;this.targetType=e.targetType;this.idToIndex={};this.comments=[];this.likeMap={};this.flagMap={};this.formatted={};this.currentThreadRoot="";this.formattedThread={};this.pageIntervals=[]},useSecure:function(){return window.SQUARESPACE_LOGIN&&window.SQUARESPACE_LOGIN.isLoggedIn()},getCommentById:function(e){return this.comments[this.idToIndex[e]]},removeCommentById:function(e){var t=this.idToIndex[e];if(!s.Lang.isUndefined(t)){this.comments.splice(t,1);this.calculatePagination()}},removeCommentsByIds:function(e){e.forEach(function(e){var t=this.idToIndex[e];if(!s.Lang.isUndefined(t)){this.comments.splice(t,1);this.visibleComments-=1;this.totalComments-=1}},this);this.calculatePagination()},getFormattedPage:function(e){var t=this.pageIntervals[e-1];if(t)return Array.prototype.slice.apply(this.comments,t);return null},fullBookkeeping:function(e){var t=0,a={};this.comments=[];this.pageIntervals=[];this.idToIndex={};for(t=0;t<e.comments.length;t++){a=e.comments[t];this.idToIndex[a.id]=t;this.comments[t]=a}this.pageIntervals.push([0,void 0]);this.flagMap=e.flagMap;this.likeMap=e.likeMap;this.commentSettings=e.commentSettings;this.visibleComments=e.visibleComments;this.topLevelComments=this.formatted.topLevelComments||this.topLevelComments;this.totalComments=e.totalComments?e.totalComments:this.totalComments;this.reformat();this.topLevelComments=e.topLevelComments;this.numLikes=e.numLikes;this.numPages=Math.ceil(this.topLevelComments/this.commentsPerPage)},addCommentData:function(e){this.comments.splice((this.idToIndex[e.parentId]||-1)+1,0,e);this.calculatePagination()},calculatePagination:function(){var e=50,t=0,a,i,s;this.idToIndex={};this.pageIntervals=[[0,void 0]];for(s=0;s<this.comments.length;s++){i=this.comments[s];this.idToIndex[i.id]=s;if(!i.parentId){t+=1;if(t>e){a=this.pageIntervals[this.pageIntervals.length-1];a[1]=t-1;this.pageIntervals.push([a[1],void 0]);t=0}}}},appendBookkeeping:function(e){var t=0,a={};this.pageIntervals[this.pageIntervals.length-1][1]=this.comments.length;for(t=0;t<e.comments.length;t++){a=e.comments[t];this.idToIndex[a.id]=this.comments.length+1;this.comments.push(a)}this.pageIntervals.push([this.pageIntervals[this.pageIntervals.length-1][1],void 0]);this.likeMap=s.merge(this.likeMap,e.likeMap);this.flagMap=s.merge(this.flagMap,e.flagMap);this.visibleComments+=e.visibleComments;this.reformat()},reformat:function(){this.formatted=this.formatter(this.comments,this.likeMap,this.flagMap)},like:function(a,i){var e=function(e){var t=this.getCommentById(a.id);if(t){t.likeCount+=1;this.reformat()}(a.success||r).call(i||this,e)},t=function(e){(a.failure||r).call(i||this,e)};s.Data.post({url:"/api/comment/LikeComment",secure:true,data:{commentId:a.id},success:e,failure:t},this)},unlike:function(a,i){var e=function(e){var t=this.getCommentById(a.id);if(t){t.likeCount=Math.max(t.likeCount-1,0);this.reformat()}(a.success||r).call(i||this,e)};s.Data.post({url:"/api/comment/UnlikeComment",secure:true,data:{commentId:a.id},success:e,failure:a.failure},this)},flag:function(a,i){var e=function(e){var t=this.getCommentById(a.id);if(t){t.flagCount+=1;this.reformat()}(a.success||r).call(i||this,e)},t=function(e){(a.failure||r).call(i||this,e)};s.Data.post({url:"/api/comment/FlagComment",secure:true,data:{commentId:a.id},success:e,failure:t},this)},_delete:function(t,a){var e=function(e){t.comments.forEach(function(e){this.removeCommentById(e.id)},this);this.visibleComments-=t.comments.length;this.totalComments-=t.comments.length;(t.success||r).call(a||this,e)};s.Data.post({url:"/api/comment/admin/DeleteComments",secure:true,data:{markAsSpam:t.spam,comments:s.Lang.isArray(t.comments)?t.comments:[t.comments]},success:e,failure:t.failure?s.bind(t.failure,a||this):void 0},this)},approve:function(t,a){var e=function(e){t.comments.forEach(function(e){var t=this.getCommentById(e.id);t&&(t.status=n.APPROVED)},this);this.totalComments+=1;(t.success||r).call(a||this,e)};s.Data.post({url:"/api/comment/admin/ApproveComments",secure:true,data:{comments:s.Lang.isArray(t.comments)?t.comments:[t.comments]},success:e,failure:t.failure?s.bind(t.failure,a||this):void 0},this)},unflag:function(a,i){var e=function(e){var t=this.getCommentById(a.id);if(t){t.flagCount=Math.max(t.flagCount-1,0);this.reformat()}(a.success||r).call(i||this,e)},t=function(e){(a.failure||r).call(i||this,e)};s.Data.post({url:"/api/comment/UnflagComment",secure:true,data:{commentId:a.id},success:e,failure:t},this)},post:function(t,a){var e={targetId:this.target,targetType:this.targetType,body:t.body,replyToId:t.replyTo,authorName:t.name||"",authorEmail:t.email||"",authorUrl:t.authorUrl||""},i=function(e){if(e.comment.status===n.APPROVED){this.addCommentData(e.comment);this.visibleComments+=1;this.totalComments+=1;t.replyTo||(this.topLevelComments+=1);this.reformat()}(t.success||r).call(a||this,e)};s.Data.post({url:"/api/comment/CreateComment",secure:!!Static.SQUARESPACE_CONTEXT.authenticatedAccount,data:e,success:i,failure:t.failure?s.bind(t.failure,a||this):void 0},this)},getPage:function(e,t,a){t<=this.numPages&&this.get({sortBy:e.order,page:t,success:e.success,failure:e.failure},a)},getSince:function(e,t,a){this.get({since:t,success:e.success,failure:e.failure},a)},getThread:function(a,i){var e=function(e){this.currentThreadRoot=a.commentId;var t=e.comments[0].comment.depth;e.comments=s.Array.map(e.comments,function(e){return e.comment});e.comments.forEach(function(e){e.depth=e.depth-t});this.formattedThread=this.formatter(e.comments,{},{});s.Lang.isFunction(a.success)&&a.success.call(i||this,e)},t=function(e){s.Lang.isFunction(a.failure)&&a.failure.call(i||this,e)};s.Data.get({url:"/api/comment/GetThread",secure:this.useSecure(),data:{sortBy:a.order,commentId:a.commentId},success:e,failure:t},this)},get:function(t,a){var e=function(e){this.page=t.page;t.page<=1?this.fullBookkeeping(e):t.page>1&&this.appendBookkeeping(e);t.success&&t.success.call(a||this,e)};s.Data.get({url:"/api/comment/GetComments",secure:this.useSecure(),data:{targetId:this.target,targetType:this.targetType,since:t.since||"",page:t.page,sortBy:t.order},success:e,failure:t.failure},this)},getLikesAndFlags:function(t,a){var e=s.Array.map(this.comments,function(e){return e.id});s.Data.get({url:"/api/comment/GetLikesFlags",secure:this.useSecure(),data:{ids:e},success:function(e){t.success&&s.Lang.isFunction(t.success)&&t.success.call(a||this,e)},failure:function(e){t.failure&&s.Lang.isFunction(t.failure)&&t.failure.call(a||this,e)}})}})},"1.0",{requires:["squarespace-util"]})},"./src/main/webapp/universal/scripts-v6/comments.js":function(e,t,a){var d=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./common/temp/node_modules/lodash/noop.js");var c=a("./src/main/webapp/universal/src/shared/i18n/index.ts").pluralize;var b=a("./common/temp/node_modules/@sqs/cookie-cutter/index.js");var i=a("./src/main/webapp/frontend/packages/enums/AccessPermissions.js");var n=a("./src/main/webapp/frontend/packages/enums/BlockType.js");var l=a("./src/main/webapp/frontend/packages/enums/CommentSortTypes.js");var S=a("./src/main/webapp/frontend/packages/enums/CommentStates.js");var u=a("./src/main/webapp/frontend/packages/enums/CommentStatuses.js");var y=a("./src/main/webapp/frontend/packages/enums/CommentTargetTypes.js");var p=a("./src/main/webapp/universal/scripts-thirdparty/caja_html_sanitizer/html-sanitizer.js");var o=a("./src/main/webapp/universal/src/shared/utils/evaluateJsonTemplate.js");YUI.add("squarespace-comments",function(f){f.namespace("Squarespace");f.Squarespace.Comments=Class.create({initialize:function(e){this.events=[];this.settings={likesAllowed:e.likesAllowed,flagsAllowed:e.flagsAllowed,threaded:e.threaded,approvalRequired:e.approvalRequired,allowAnon:e.allowAnon,avatarsHidden:!e.avatarsOn,readOnly:e.readOnly};this.commentData=new f.Squarespace.CommentData({target:e.identifier,targetType:e.type,publicCommentCount:e.publicCommentCount,settings:this.settings,formatter:f.bind(this.formatData,this)});this.localizedStrings={addComment:d("Add Comment"),approve:d("Approve"),awaitingModeration:d("Awaiting Moderation"),comments:d("Comments"),commentsRestricted:d("Comments Restricted"),delete:d("Delete"),edit:d("Edit"),leastLiked:d("Least Liked"),leaveACommentHere:d("Leave a comment here."),lessLiked:d("Less Liked"),like:d("Like"),likes:d("Likes"),mostLiked:d("Most Liked"),newestFirst:d("Newest First"),oldestFirst:d("Oldest First"),pending:d("Pending"),preview:d("Preview"),postComment:d("Post Comment…"),postReply:d("Post Reply"),reply:d("Reply"),replyToThisCommentHere:d("Reply to this comment here."),report:d("Report"),subscribeViaEmail:d("Subscribe via e-mail"),unmoderated:d("Unmoderated"),unsubscribe:d("Unsubscribe")};this.targetId=e.identifier;this.params=e||{design:{}};this.replyCompleteEvents={};this.threadState=false;this.lastSortTime=new Date;this.lastHashChangeTime=new Date;this.PaginationModes={EXTEND:1,PAGE:2};this.containerEl=f.one(this.params.containerEl);this.params.paginationMode=this.PaginationModes.EXTEND;this.type=n.COMMENT;this.currentPage=1;this.maxComments=50;this.sortOrderLookup=[null];this.sortOrderLookup.push(this.localizedStrings.oldestFirst,this.localizedStrings.newestFirst,this.localizedStrings.mostLiked,this.localizedStrings.leastLiked);this.sortOrder=this.params.sortType;this.commentsEl=f.Node.create('<div class="comments-content"><div class="comment-list"></div></div>');this.settings.readOnly&&this.commentsEl.addClass("read-only");this.commentsEl.appendTo(this.containerEl);this.loadMoreNode=f.Node.create('<div class="load-more"><div class="view-more-btn">'+d("Load More Comments")+"</div></div>");this.fullViewNode=f.Node.create('<div class="full-view-btn">'+d("View full comment thread")+"</div>");this.history=new f.HistoryHash;this.events.push(this.commentsEl.delegate("click",this.onReplyToggleClick,".reply",this),this.commentsEl.delegate("click",this.onLikeClick,".comment:not(.liked):not(.read-only) .like",this),this.commentsEl.delegate("click",this.onUnlikeClick,".comment.liked:not(.read-only) .like",this),this.commentsEl.delegate("click",this.onFlagClick,".comment:not(.flagged):not(.read-only) .flag",this),this.commentsEl.delegate("click",this.onUnflagClick,".comment.flagged:not(.read-only) .flag",this),this.commentsEl.delegate("click",this.onApproveClick,".comment.unmoderated:not(.read-only) .approve",this),this.commentsEl.delegate("click",this.onDeleteClick,".comment:not(.read-only) .delete",this),this.commentsEl.delegate("click",this.replyBtnOnClick,".reply-area-wrapper .comment-btn:not(.read-only)",this),this.commentsEl.delegate("click",this.togglePreview,".reply-area-wrapper .preview-comment",this),this.commentsEl.delegate("click",this.showSubscribe,".subscribe",this),this.commentsEl.delegate("click",this.unsubscribe,".unsubscribe",this),this.history.on("commentIdChange",this.commentIdHashOnChange,this),this.history.on("commentIdRemove",this.commentIdHashOnRemove,this),this.containerEl.delegate("click",function(){var a,i,s;return function(e){SQUARESPACE_LOGIN.configure({redirectAfterLogin:false,reloadAfterLogin:false,allowAnonymous:this.settings.allowAnon,overlayOpacity:.5});var t=function(){this.onLoading();this.commentData.visibleComments=0;this.retrieveComments({onSuccess:function(e){this.fullDataRender(e)},page:1,order:this.sortOrder},this);a.detach();s.detach()};a=SQUARESPACE_LOGIN.once("cancel",function(){i.detach();s.detach()},this);i=SQUARESPACE_LOGIN.once("login",t,this);s=SQUARESPACE_LOGIN.once("guestLogin",t,this);SQUARESPACE_LOGIN.show()}}(),".squarespace-comment-login",this),SQUARESPACE_LOGIN.on("login",function(){this.updateLikedFlaggedState();this.refreshCommentPostButtons();this.moderationMode=this.userHasAccessPermission(i.CONFIG_ACTIVITY_COMMENTS)},this),SQUARESPACE_LOGIN.on("logout",function(){this.updateLikedFlaggedState();this.refreshCommentPostButtons();this.refreshSubscribeControl();this.moderationMode=false},this),this.containerEl.delegate("click",function(e){SQUARESPACE_LOGIN.onLogoutClick()},".squarespace-comment-logout",this),this.containerEl.delegate("focus",function(){this.setAttribute("data-edited",true)},".comment-input"),this.containerEl.delegate("blur",function(){""===this.get("value")&&this.setAttribute("data-edited",false)},".comment-input"),this.containerEl.delegate("focus",function(e){e.target.setAttribute("data-edited",true)},".new-comment-area textArea",this),this.containerEl.delegate("click",this.extendComments,".view-more-btn",this),this.containerEl.delegate("click",this.fullViewOnClick,".full-view-btn",this),this.containerEl.delegate("click",this.commentBtnOnClick,".top-level-comment-area .comment-btn:not(.read-only)",this),this.containerEl.delegate("click",this.togglePreview,".top-level-comment-area .preview-comment",this),this.containerEl.delegate("change",function(e){this.sort(e.target.get("value"))},".hidden-ordering",this));b.set("displayName","",{expires:new Date(0),path:"/"});this.subscribeDialogParams={name:"subscribe",style:"flyout",flyoutPointerDirection:"top",width:320,position:"center",closeable:true,overlay:.5,top:200,discardChangesConfirmation:false,title:d("Subscribe by Email"),primaryTabs:[{title:d("Subscribe by Email"),icon:"/universal/images-v6/standard/icon_invites_24_light.png",fields:[{type:"text",required:true,name:"email",title:d("Email"),fieldStyle:"normal",titleStyle:"inline",submitOnEnter:true,style:"major"},{ctor:f.Squarespace.DialogFields.Description,config:{text:d("Subscribe to this comment thread by email."),padding:[0,0]}}]}],buttons:[{type:"cancel",title:d("Cancel")},{type:"saveAndClose",title:d("Submit")}]}},destroy:function(){this.events.forEach(function(e){e.detach()})},userHasAccessPermission:function(e){if(!f.Object.getValue(Static,["SQUARESPACE_CONTEXT","accessPermissions"]))return false;return f.Array.indexOf(Static.SQUARESPACE_CONTEXT.accessPermissions,e)>=0},doAfterLogin:function(e,t,a){var i,s,n;s=e.once("login",function(){t.call(this);n.detach();i.detach()},a);n=e.once("guestLogin",function(){s.detach();i.detach()});i=e.once("cancel",function(){s.detach();n.detach()})},doAfterGuestLogin:function(e,t,a){var i,s,n;s=e.once("guestLogin",function(){t.call(this);n.detach();i.detach()},a);n=e.once("login",function(){s.detach();i.detach()});i=e.once("cancel",function(){s.detach();n.detach()})},fullViewOnClick:function(){this.history.addValue("commentId",null)},updateTopLevelButton:function(){var e=f.one(".top-level-comment-area .comment-btn"),t={newCommentAreaTop:{authenticatedAccount:null===SQUARESPACE_LOGIN.account?void 0:SQUARESPACE_LOGIN.account},comments:[{}]},a=this.renderToFragment(t),i=a.one(".top-level-comment-area .comment-btn");if(e){e.ancestor(".comment-btn-wrapper").append(i);e.remove(true)}},updateReplyAreaButtons:function(){var e={comments:[{authenticatedAccount:SQUARESPACE_LOGIN.account}]},t=this.renderToFragment(e).one(".reply-area-wrapper .comment-btn");t&&this.commentsEl.all(".reply-area-wrapper .comment-btn").each(function(e){e.insert(t.cloneNode(true),"after");e.remove(true)})},refreshCommentPostButtons:function(){this.updateTopLevelButton();this.updateReplyAreaButtons()},refreshSubscribeControl:function(){SQUARESPACE_LOGIN.account||(Static.SQUARESPACE_CONTEXT.subscribed=false);var e={subscribed:Static.SQUARESPACE_CONTEXT.subscribed,comments:[{}]},t,a=this.renderToFragment(this.scatterData(e)).one(".subscribe-control");if(a){t=f.one(".subscribe-control");t.insert(a,"after");t.remove(true)}},generatePreview:function(e){var t=f.Squarespace.Escaping.escapeForHtml(e.get("value")),a={comments:[{}]},i=null,s=null,n=a.comments[0],r=!e.ancestor(".reply-area-wrapper"),o,l;if(r)o=0;else{l=f.one('.comment[data-commentId="'+e.ancestor(".reply-area-wrapper").getAttribute("data-commentId")+'"]');o=l.hasAttribute("data-depth")?parseInt(l.getAttribute("data-depth"),10)+1:1}n.body=p.sanitize(f.Squarespace.Lang.markdownToHTML(t,true));n.memberAccount=f.clone(SQUARESPACE_LOGIN.account);n.authorName=(SQUARESPACE_LOGIN.account?SQUARESPACE_LOGIN.account.displayName:b.get("displayName"))||d("Not Logged In");n.addedOn=(new Date).getTime();n.depth=o;s=this.renderToFragment(this.scatterData(a));i=s.one(".comment");i.addClass("comment-preview");if(r)i.addClass("top-level");else{i.setAttribute("data-previewId",l.getAttribute("data-commentId"));i.setAttribute("data-replyTo",l.getAttribute("data-commentId"))}return s},replyBtnOnClick:function(e){var t=e.target.ancestor(".reply-area-wrapper"),a=t.getAttribute("data-commentId"),i=f.one('.comment[data-commentId="'+a+'"]'),s=t.one("textArea"),n=s.get("value");if(""===n.trim())this.showEmptyText();else{var r=this.injectReply(n,i);this.replyTo(t.getAttribute("data-commentId"),n,r,s)}e.stopImmediatePropagation()},subscribe:function(e){f.Data.post({url:"/api/comment/Subscribe",secure:true,data:{targetId:this.targetId},success:function(){Static.SQUARESPACE_CONTEXT.subscribed=true;this.refreshSubscribeControl();new f.Squarespace.Widgets.Information({"strings.title":d("Subscribed"),"strings.message":d("Successfully subscribed")})},failure:function(){SQUARESPACE_LOGIN.configure({redirectAfterLogin:false,reloadAfterLogin:false,overlayOpacity:.5});this.doAfterLogin(SQUARESPACE_LOGIN,function(){this.subscribe(e)},this);SQUARESPACE_LOGIN.showCommentLogin(d("Log In to Subscribe"),d("Subscribe"),false,["squarespace"])}},this)},unsubscribe:function(t){f.Data.post({url:"/api/comment/Unsubscribe",secure:true,data:{targetId:this.targetId},success:function(){Static.SQUARESPACE_CONTEXT.subscribed=false;this.refreshSubscribeControl();new f.Squarespace.Widgets.Information({"strings.title":d("Unsubscribed"),"strings.message":d("Successfully unsubscribed")})},failure:function(e){if(e.loginRequired){SQUARESPACE_LOGIN.configure({redirectAfterLogin:false,reloadAfterLogin:false,overlayOpacity:.5});this.doAfterLogin(SQUARESPACE_LOGIN,function(){this.unsubscribe(t)},this);SQUARESPACE_LOGIN.showCommentLogin(d("Log In to Unsubscribe"),d("Unsubscribe"),false)}}},this)},showSubscribe:function(e){new f.Squarespace.Widgets.Confirmation({"strings.confirm":d("Subscribe"),"strings.title":d("Subscribe to Thread"),"strings.message":d("Are you sure you wish to subscribe to this comment thread? You will receive updates via the email on file in your profile.")}).on("confirm",this.subscribe,this)},togglePreview:function(e){var t=e.target.ancestor(".reply-area-wrapper"),a;a=t?t.one("textArea"):e.target.ancestor(".top-level-comment-area").one("textArea");if(""!==a.get("value"))if("open"===e.target.getAttribute("data-state")){e.target.setAttribute("data-state","closed");this.hidePreview(a)}else{e.target.setAttribute("data-state","open");this.showPreview(a)}},showPreview:function(e){if(e){var t=this.generatePreview(e),a=t.one(".comment"),i=e.ancestor(".reply-area-wrapper"),s=e.ancestor(".input"),n=!i,r,o,l;a.wrap('<div class="new comment-preview-wrapper closed"></div>');l=a.ancestor(".comment-preview-wrapper");if(n){l.addClass("top-level");f.one(".comment-list").prepend(l)}else{i.insert(l,"after");l.setAttribute("data-commentId",i.getAttribute("data-commentId"))}e.ancestor(".new-comment-area").one(".preview-comment").set("innerHTML",this.localizedStrings.edit);s.setStyle("height",s.get("offsetHeight"));r=new f.Anim({node:s,duration:.3,easing:f.Easing.easeOutStrong,to:{height:0}});r.on("start",function(){this._node.setStyle("overflow","hidden")});r.run();o=new f.Anim({node:l,duration:.3,easing:f.Easing.easeOutStrong,to:{height:a.get("offsetHeight")+parseInt(a.getComputedStyle("paddingBottom"),10)+parseInt(a.getComputedStyle("marginBottom"),10)}});o.on("end",function(){this._node.addClass("open")});o.run()}},hideAllPreviews:function(){f.all(".comment-preview-wrapper:not(.top-level)").each(function(e){var t=new f.Anim({node:e,duration:.3,easing:f.Easing.easeOutStrong,to:{height:0}});t.on("end",function(){this._node.remove(true)});t.run()},this);f.all('.preview-comment[data-state="open"]:not(.top-level-preview-btn)').each(function(e){e.setAttribute("data-state","closed");e.set("innerHTML",this.localizedStrings.preview)},this)},hidePreview:function(e){if(e){var t=e.ancestor(".reply-area-wrapper"),a,i,s,n;s=t?f.one('.comment-preview[data-previewId="'+t.getAttribute("data-commentId")+'"]'):f.one(".comment-preview.top-level");e.ancestor(".new-comment-area").one(".preview-comment").set("innerHTML",this.localizedStrings.preview);a=new f.Anim({node:e.ancestor(".input"),duration:.3,easing:f.Easing.easeOutStrong,to:{height:e.get("offsetHeight")}});a.on("end",function(){this._node.setStyle("overflow","visible")});a.run();if(s){n=s.ancestor(".comment-preview-wrapper");i=new f.Anim({node:n,duration:.3,easing:f.Easing.easeOutStrong,to:{height:0}});i.on("start",function(){this._node.removeClass("open");this._node.addClass("closed")});i.on("end",function(){this._node.remove(true)});i.run()}}},getTemplateData:function(t,e){f.Data.get({url:"/api/template/GetTemplateSchema",data:{type:n.COMMENTS},success:function(e){this._template=e.html;t.call(this)},failure:e},this)},updateLikedFlaggedState:function(){(this.settings.flagsAllowed||this.settings.likesAllowed)&&this.commentData.getLikesAndFlags({success:function(a){var e=f.one(".comment-list");e.all(".comment").each(function(e){var t=e.getAttribute("data-commentId");this.settings.flagsAllowed&&(a.flagMap[t]?e.addClass("flagged"):e.removeClass("flagged"));this.settings.likesAllowed&&(a.likeMap[t]?e.addClass("liked"):e.removeClass("liked"))},this)}},this)},create:function(){this.userHasAccessPermission(i.CONFIG_ACTIVITY_COMMENTS)&&(this.moderationMode=true);this.getTemplateData(function(){var e=this.history.get("commentId");if(f.Lang.isUndefined(e)){this.onLoading();this.retrieveComments({onSuccess:function(e){this.fullDataRender(e)},page:1,order:this.sortOrder})}else{this.onLoading();this.retrieveThread({onSuccess:this.threadRender,onFailure:function(e){this.onLoading();this.retrieveComments({onSuccess:function(e){this.fullDataRender(e)},page:1,order:this.sortOrder})},order:this.sortOrder,commentId:e})}},function(){})},updateCommentCounts:function(){var e=this.renderToFragment({visibleComments:this.commentData.visibleComments,totalComments:this.commentData.totalComments,comments:[]});0===this.commentData.visibleComments?this.containerEl.addClass("empty"):this.containerEl.removeClass("empty");f.one(".comment-count").set("innerHTML",e.one(".comment-count").get("innerHTML"))},truncateAt:function(e,t){if(!e)return"";if(void 0===t)return e;var a=e.split(" ").slice(0,t).join(" ");return a+(a.length>t?"."===a.substr(a.length-1)?"..":"…":"")},formatAccountData:function(e){return{userAvatarUrl:(e.avatarAssetUrl?e.avatarAssetUrl:"/universal/images-v6/default-avatar.png")+"?format=50w",userHref:e.websiteUrl?"http://"+f.Squarespace.Escaping.escapeForHtml(e.websiteUrl):"",userHtml:e.websiteUrl||"",userName:f.Escape.html(e.displayName||""),userBio:this.truncateAt(f.Squarespace.Escaping.escapeForHtml(e.bio,60))||""}},buildInfoPane:function(e){var t=this.formatAccountData(e);var a=f.Node.create('<div class="squarespace-user-info"></div>');var i=f.Node.create('<div class="user-info-header"></div>');var s=f.Node.create('<div class="avatar"><img src="'+t.userAvatarUrl+'" /></div>');var n=f.Lang.sub('<div class="info"><div class="name">{userName}</div><a class="website" href="{userHref}">{userHtml}</a></div>',t);var r=f.Node.create(n);var o=f.Node.create('<div class="user-info-body"><p>'+t.userBio+"</p></div>");var l=f.Node.create('<div class="user-social-opts"><div class="social-leftcol"></div><div class="social-rightcol"></div><div class="clearfix"></div></div>');i.append(s).append(r);a.append(i).append(o).append(l);return a},showClickOverlay:function(){var e=f.one(document),t=e.get("winHeight"),a=e.get("winWidth");this.overlayEl=f.Node.create('<div class="user-profile-overlay"></div>');this.overlayEl.setStyles({position:"fixed",background:"#000",height:t+"px",width:a+"px",opacity:"0",top:"0px",left:"0px",zIndex:999});f.one(f.config.doc.body).append(this.overlayEl);f.on("click",this.hideUserProfileFlyout,this.overlayEl,this)},showUserProfileFlyout:function(e){if(!e.target.hasClass("squarespace-comment-user-flyout")&&!e.target.ancestor(".squarespace-comment-user-flyout")&&!this.flyoutOpen){var t=e.target.ancestor(".comment").getAttribute("data-commentid"),a=this.commentData.getCommentById(t);var i=a.memberAccount;if(!i)return;var s=f.Node.create('<div class="squarespace-comment-user-flyout"></div>');s.append(this.buildInfoPane(i));s.append('<div class="squarespace-user-activity"><div class="squarespace-activity-header"><div class="title">'+d("Activity")+'</div><div class="description">'+d("Comments and likes across the Squarespace platform")+'</div></div><div class="feed"></div></div>');s.append('<div class="squarespace-comment-user-clearfix"></div>');var n=f.one(document.body);n.append(s);s.setStyles({position:"fixed",left:"50%",top:"50%",opacity:0,zIndex:1e3,transform:"scale(.95)"});s.setStyles({marginTop:-parseInt(s.get("offsetHeight"),10)/2,marginLeft:-parseInt(s.get("offsetWidth"),10)/2});s.transition({WebkitTransform:{duration:.3,easing:"ease-out",value:"scale(1)"},opacity:{duration:.3,easing:"ease-out",value:1}})}this.flyoutOpen=true;this.showClickOverlay();e.stopImmediatePropagation()},hideUserProfileFlyout:function(e){if(this.flyoutOpen){var t=f.one(".squarespace-comment-user-flyout");t&&t.transition({WebkitTransform:{duration:.3,easing:"ease-out",value:"scale(1.08)"},opacity:{duration:.4,easing:"ease-out",value:0},on:{end:f.bind(function(){t.remove(true);e.target.remove(true);this.flyoutOpen=false},this)}})}},getThreadNodes:function(e,t){var a=e.getAttribute("data-commentId");t.push(e);f.all('.comment[data-replyTo="'+a+'"]').each(function(e){this.getThreadNodes(e,t)},this)},actualDelete:function(t,a,i){var s=t.target.ancestor(".comment"),n=s.getAttribute("data-commentId"),r,o,l=this.lastSortTime,c=this.lastHashChangeTime,e=function(e){if(l===this.lastSortTime&&c===this.lastHashChangeTime){r=f.Node.create('<div class="delete-anim-wrapper"></div>');s.insert(r,"after");i.forEach(function(e){r.append(e);var t=f.one('.reply-area-wrapper[data-commentId="'+e.getAttribute("data-commentId")+'"]');t&&t.remove(true)});o=new f.Anim({node:r,duration:.5,easing:f.Easing.easeOutStrong,to:{height:0}});o.on("end",function(){r.remove(true);i.length>1&&this.commentData.removeCommentsByIds(i.map(function(e){return e.getAttribute("data-commentId")}).filter(function(e){return e!==n}));this.updateCommentCounts()},this);o.run()}},u=function(e){if(e.loginRequired){SQUARESPACE_LOGIN.configure({redirectAfterLogin:false,reloadAfterLogin:false,overlayOpacity:.5});this.doAfterLogin(SQUARESPACE_LOGIN,function(){this.actaulDelete(t,a,i)},this);SQUARESPACE_LOGIN.showCommentLogin(d("Log In to Delete Comments"),d("Delete Comments"),false)}else e.authorizationFail&&new f.Squarespace.Widgets.Alert({"strings.title":d("Authorization Failure"),"strings.message":d("You are not allowed to perform that action.")})};this.commentData._delete({comments:[n],spam:a,success:e,failure:u},this)},onDeleteClick:function(e){var t,a=e.target.ancestor(".comment"),i=function(){var e=[];this.getThreadNodes(a,e);return e},s=i.call(this),n=function(){s.forEach(function(e){if(e.hasClass("unmoderated"))e.removeClass("pending-delete");else{var t=new f.Anim({node:e,duration:.3,easing:f.Easing.easeOutStrong,to:{opacity:1}});t.on("end",function(){this._node.removeClass("pending-delete")});t.run()}})},r=function(){n();this.actualDelete(e,true,s)},o=function(){n();this.actualDelete(e,false,s)},l=function(){n()};s.forEach(function(e){if(e.hasClass("unmoderated"))e.addClass("pending-delete");else{var t=new f.Anim({node:e,duration:.3,easing:f.Easing.easeOutStrong,to:{opacity:.5}});t.on("end",function(){this._node.addClass("pending-delete")});t.run()}});t=new f.Squarespace.Widgets.Confirmation({style:f.Squarespace.Widgets.Confirmation.TYPE.CONFIRM_OR_REJECT,"strings.reject":d("Delete"),"strings.confirm":d("Delete & Report Spam"),"strings.title":c({one:"Delete Comment",other:"Delete {%n} Comments"},s.length),"strings.message":c({one:"Are you sure you wish to delete this comment?",other:"Are you sure you wish to delete these comments?"},s.length)});t.on("cancel",l,this);t.on("reject",o,this);t.on("confirm",r,this)},onApproveClick:function(e){var t=e.target.ancestor(".comment");this.approve(t.getAttribute("data-commentId"),t);e.stopImmediatePropagation()},approve:function(t,a){var e=function(e){this.updateCommentCounts()},i=function(e){if(e.loginRequired){a.addClass("unmoderated");SQUARESPACE_LOGIN.configure({redirectAfterLogin:false,reloadAfterLogin:false,overlayOpacity:.5});this.doAfterLogin(SQUARESPACE_LOGIN,function(){this.approve(t,a)},this);SQUARESPACE_LOGIN.showCommentLogin(d("Log In to Approve Comments"),d("Approve Comments"),false)}};a.removeClass("unmoderated");this.commentData.approve({comments:[t],success:e,failure:i},this)},onUnlikeClick:function(e){var t=e.target.ancestor(".comment");this.unlike(t.getAttribute("data-commentId"),t);e.stopImmediatePropagation()},unlike:function(a,t){var i=t.one(".likes"),e=function(){if(i){var e={comments:[{likesAllowed:{likeCount:this.commentData.getCommentById(a).likeCount}}]},t=this.renderToFragment(this.scatterData(e)).one(".likes");i.replace(t)}},s=function(e){t.addClass("liked");if(e.loginRequired){SQUARESPACE_LOGIN.configure({redirectAfterLogin:false,reloadAfterLogin:false,overlayOpacity:.5});this.doAfterLogin(SQUARESPACE_LOGIN,function(){this.unlike(a,t)},this);SQUARESPACE_LOGIN.showCommentLogin(d("Log In to Dislike Comment"),d("Dislike Comment"),false)}};t.removeClass("liked");this.commentData.unlike({id:a,success:e,failure:s},this)},onFlagClick:function(t){var e=function(){var e=t.target.ancestor(".comment");this.flag(e.getAttribute("data-commentId"),e)};new f.Squarespace.Widgets.Confirmation({"strings.title":d("Flag Comment"),"strings.message":d("Are you sure you wish to flag this comment as inappropriate?")}).on("confirm",e,this);t.stopImmediatePropagation()},flag:function(a,i){var e=function(){},t=function(e){i.removeClass("flagged");if(e.loginRequired){SQUARESPACE_LOGIN.configure({redirectAfterLogin:false,reloadAfterLogin:false,overlayOpacity:.5});var t;this.doAfterLogin(SQUARESPACE_LOGIN,function(){this.flag(a,i);t.detach()},this);t=SQUARESPACE_LOGIN.once("cancel",function(){i.removeClass("flagged")},this);SQUARESPACE_LOGIN.showCommentLogin(d("Log In to Flag Comment"),d("Flag Comment"),false)}else e.error&&new f.Squarespace.Widgets.Alert({"strings.title":d("Failed to Flag Comment"),"strings.message":e.error})};i.addClass("flagged");this.commentData.flag({id:a,success:e,failure:t},this)},onUnflagClick:function(e){var t=e.target.ancestor(".comment");this.unflag(t.getAttribute("data-commentId"),t);e.stopImmediatePropagation()},unflag:function(t,a){var e=function(){},i=function(e){a.addClass("flagged");if(e.loginRequired){SQUARESPACE_LOGIN.configure({redirectAfterLogin:false,reloadAfterLogin:false,opacity:.5});this.doAfterLogin(SQUARESPACE_LOGIN,function(){this.unflag(t,a)},this);SQUARESPACE_LOGIN.showCommentLogin(d("Log In to Unflag Comment"),d("Unflag Comment"),false)}};a.removeClass("flagged");this.commentData.unflag({id:t,success:e,failure:i},this)},onLikeClick:function(e){var t=e.target.ancestor(".comment");this.like(t.getAttribute("data-commentId"),t);e.stopImmediatePropagation()},like:function(t,a){var i=a.one(".likes"),s=a.getAttribute("data-commentid"),e=function(){if(i&&!f.Lang.isNull(a._node)){var e={comments:[{likesAllowed:{likeCount:this.commentData.getCommentById(s).likeCount}}]},t=this.renderToFragment(this.scatterData(e)).one(".likes");i.replace(t)}},n=function(e){a.removeClass("liked");if(e.loginRequired){SQUARESPACE_LOGIN.configure({redirectAfterLogin:false,reloadAfterLogin:false,overlayOpacity:.5});this.doAfterLogin(SQUARESPACE_LOGIN,function(){this.like(t,a)},this);SQUARESPACE_LOGIN.showCommentLogin(d("Log In to Like Comment"),d("Like Comment"),false)}else e.error&&new f.Squarespace.Widgets.Alert({"strings.title":d("Failed to Like Comment"),"strings.message":e.error})};a.addClass("liked");this.commentData.like({id:t,success:e,failure:n},this)},addLoadMoreControls:function(e){var t=f.one(".load-more");t&&t.remove(true);!this.threadState&&this.commentData.page<this.commentData.numPages&&this.containerEl.append(this.loadMoreNode.cloneNode(true))},addFullViewControls:function(e){var t=f.one(".full-view-btn");t&&t.remove(true);this.threadState&&this.containerEl.one(".comment-list").insert(this.fullViewNode.cloneNode(true),"before")},onReplyToggleClick:function(e){var i=e.target.ancestor(".comment"),t=i.getAttribute("data-commentid"),a=f.one('.reply-area-wrapper[data-commentid="'+t+'"]'),s=f.one(f.config.doc.body),n,r,o=f.bind(function(e,t){if(e){e.setStyles({overflow:"hidden",height:a.get("offsetHeight")});e.one(".input").setStyle("height","auto");f.one('.comment[data-commentid="'+e.getAttribute("data-commentId")+'"]').fire("reply-close");n=new f.Anim({node:a,duration:.3,easing:f.Easing.easeOutStrong,to:{height:0}});n.on("end",function(){},this);n.run()}},this),l=f.bind(function(e){if(e){var t,a;a=e.one(".new-comment-area").cloneNode(true);a.setStyles({visibility:"hidden",display:"block",position:"absolute"});i.append(a);t=a.get("offsetHeight");a.remove(true);f.one('.comment[data-commentid="'+e.getAttribute("data-commentId")+'"]').fire("reply-open");this.hideAllPreviews();r=new f.Anim({node:e,duration:.3,easing:f.Easing.easeOutStrong,to:{height:Math.max(t,190)+15}});r.on("end",function(){this._node.setStyle("height","auto");var e=this._node.getY()+this._node.get("offsetHeight")-(s.get("docScrollY")+s.get("winHeight")),t=s.get("scrollTop"),a;if(e>=0){a=new f.Anim({node:s,duration:.3,easing:f.Easing.easeOutStrong,to:{scrollTop:t+e}});a.run()}});r.run()}},this),c=function(e){return e.hasClass("reply-open")};if(c(i)){i.removeClass("reply-open");this.hideAllPreviews();o(a)}else{a.one(".reply-area").setAttribute("replyid",t);f.all(".comment.reply-open").each(function(e){e.removeClass("reply-open");var t=f.one('.reply-area-wrapper[data-commentid="'+e.getAttribute("data-commentid")+'"]');o(t)});var u=a.one("textArea");this.replyCompleteEvents[i.getAttribute("data-commentId")]||(this.replyCompleteEvents[i.getAttribute("data-commentId")]=this.once("reply-complete",function(e){o(a,function(){this.one(".input").setStyle("height","auto")});this.replyCompleteEvents[i.getAttribute("data-commentId")]=null},this));u.on("focus",function(){this.setAttribute("data-edited",true)});u.on("blur",function(){""===this.get("value")&&this.setAttribute("data-edited",false)});i.addClass("reply-open");l(a)}e.stopImmediatePropagation()},escapeComment:function(e){e.authorName=f.Squarespace.Escaping.escapeForHtml(e.authorName);e.authorUrl=f.Squarespace.Escaping.escapeForHtml(e.authorUrl);e.authorEmail=f.Squarespace.Escaping.escapeForHtml(e.authorEmail);if(e.memberAccount){e.memberAccount.displayName=f.Squarespace.Escaping.escapeForHtml(e.memberAccount.displayName);e.memberAccount.bio=f.Squarespace.Escaping.escapeForHtml(e.memberAccount.bio)}},addReplyArea:function(e){var t=f.one(".reply-area-wrapper"),a,i,s,n;if(t){t.one(".preview-comment").setAttribute("data-state","closed").set("innerHTML",this.localizedStrings.preview);a=t.cloneNode(true);a.setAttribute("data-commentId",e.getAttribute("data-commentId"));a.setAttribute("data-depth",e.getAttribute("data-depth"));n=a}else{i={comments:[{id:e.getAttribute("data-commentId"),depth:e.getAttribute("data-depth")}]};s=this.renderToFragment(i);n=s.one(".reply-area-wrapper").cloneNode(true)}n.setStyle("height",null);e.insert(n,"after")},prependComment:function(e){var t=(SQUARESPACE_LOGIN.account?SQUARESPACE_LOGIN.account.displayName:b.get("displayName"))||d("Not Logged In"),a=f.one(".top-level-comment-area .comment-input"),i=f.one(".top-level.comment-preview"),s=false,n,r;if(i){i.one(".author").set("innerHTML",f.Escape.html(t));r=i.ancestor(".comment-preview-wrapper")}else{i=this.generatePreview(a).one(".comment-preview");s=true;i.wrap('<div class="comment-preview-wrapper"></div>');r=i.ancestor(".comment-preview-wrapper");f.one(".comment-list").prepend(r)}i.removeClass("comment-preview");i.addClass("pending");f.one(".top-level-comment-area .preview-comment").setAttribute("data-state","closed");this.hidePreview(a);if(s){n=new f.Anim({node:r,duration:.3,easing:f.Easing.easeOutStrong,to:{height:i.get("offsetHeight")+parseInt(i.getComputedStyle("marginBottom"),10)}});n.on("end",function(){i.unwrap()});n.run()}else i.unwrap();this.containerEl.removeClass("empty");this.makeMostRecent(i);return i},injectReply:function(e,t){var a=t.getAttribute("data-commentId"),i=f.one('.comment-preview-wrapper[data-commentId="'+a+'"]'),s=f.one('.reply-area-wrapper[data-commentId="'+a+'"]').one("textArea"),n=(SQUARESPACE_LOGIN.account?SQUARESPACE_LOGIN.account.displayName:b.get("displayName"))||d("Not Logged In"),r=false,o;if(i){o=i.one(".comment-preview");o.one(".author").set("innerHTML",f.Escape.html(n))}else{o=this.generatePreview(s).one(".comment-preview");r=true;o.wrap('<div class="comment-preview-wrapper"></div>');i=o.ancestor(".comment-preivew-wrapper")}t.hasAttribute("data-depth")&&o.setAttribute("data-depth",parseInt(t.getAttribute("data-depth"),10)+1);o.unwrap();o.removeClass("comment-preview");o.addClass("pending");t.removeClass("reply-open");t.fire("reply-complete");r&&s.ancestor(".reply-area-wrapper").insert(o,"after");this.makeMostRecent(o);this.fire("reply-complete",{node:o});return o},makeMostRecent:function(e){if(e.hasClass("comment")){f.all(".comment.pending.most-recent").each(function(e){e.ancestor(".most-recent-anim-wrapper")||e.removeClass("most-recent")});e.addClass("most-recent")}},fullDataRender:function(){this.render(this.commentData.formatted);this.commentList=f.one(".comment-list")},threadRender:function(){this.render(this.commentData.formattedThread);this.commentList=f.one(".comment-list");this.commentList.one('.comment[data-commentId="'+this.commentData.currentThreadRoot+'"]').addClass("target")},showEmptyText:function(){new f.Squarespace.Widgets.Alert({"strings.title":d("Enter Comment Text"),"strings.message":d("Enter text in the field above to post a comment.")})},showModerationNotification:function(){new f.Squarespace.Widgets.Alert({className:"okay","strings.title":d("Comment Awaiting Moderation"),"strings.message":d("Your comment has been successfully posted and is awaiting moderation.")})},showCommentSuccessNotification:function(){new f.Squarespace.Widgets.Alert({className:"okay","strings.title":d("Comment Posted"),"strings.message":d("Your comment has been successfully posted.")})},showPostCommentNotification:function(e){e.status===u.AWAITING_MODERATION&&this.showModerationNotification()},squarespaceAdminOnly:function(){return Static.SQUARESPACE_CONTEXT.website.cloneable&&!this.userHasAccessPermission(i.ADMIN)},commentBtnOnClick:function(e){var t=f.one(".top-level-comment-area .comment-input");var a=t.get("value");if(""===a.trim())this.showEmptyText();else{var i=this.prependComment(a);this.submitTopLevel(a,i,t)}e.stopImmediatePropagation()},updateWithMemberAccount:function(e,t){if(t&&!SQUARESPACE_LOGIN.account){var a=e.one(".author");a&&a.setContent(f.Escape.html(t.displayName));var i=e.one(".avatar img");i&&t.avatarAssetUrl&&i.setAttribute("src",t.avatarAssetUrl)}},submitTopLevel:function(n,r,o){if(!f.Squarespace.Utils.areCookiesEnabled()){new f.Squarespace.Widgets.Alert({"strings.title":d("Comments disallowed"),"strings.message":d("This browser does not accept cookies, which is a requirement for commenting. You can allow cookies by changing your browser's settings.")});return}this.setPosting(r,!this.approvalRequired||!this.moderationMode);var l=o.get("value");o.set("value","");this.addComment({onSuccess:function(e){this.updateCommentCounts();if(!f.Lang.isNull(r._node)){this.setPosted(r);r.setAttribute("data-commentId",e.comment.id);e.comment.status===u.APPROVED&&r.removeClass("pending");this.addReplyArea(r);this.updateWithMemberAccount(r,e.comment.memberAccount);this.showPostCommentNotification(e.comment)}},onFailure:function(e){o.set("value",l);if(e.errors)if(e.errors.anonEmail||e.errors.authorEmail||e.errors.authorName){var t=r.one(".author");e.errors.anonEmail&&new f.Squarespace.Widgets.Alert({className:"okay","strings.title":d("Comment Failed"),"strings.message":e.errors.anonEmail});var a=SQUARESPACE_LOGIN.once("cancel",this.removeMostRecentPending,this);var i=function(){this.submitTopLevel(n,r,o);f.Lang.isNull(t)&&!f.Lang.isNull(t._node)||t.set("innerHTML",f.Escape.html(SQUARESPACE_LOGIN.account.displayName));if(SQUARESPACE_LOGIN.account.avatarAssetUrl){var e=r.one(".avatar");e.one("img").setAttribute("src",SQUARESPACE_LOGIN.account.avatarAssetUrl)}a.detach()};var s=function(){this.submitTopLevel(n,r,o);var e=b.get("displayName");!e||f.Lang.isNull(t)||f.Lang.isNull(t._node)||t.set("innerHTML",f.Escape.html(e));a.detach()};SQUARESPACE_LOGIN.configure({redirectAfterLogin:false,reloadAfterLogin:false,overlayOpacity:.5});this.doAfterLogin(SQUARESPACE_LOGIN,i,this);this.doAfterGuestLogin(SQUARESPACE_LOGIN,s,this);SQUARESPACE_LOGIN.showCommentLogin(d("Post Comment"),d("Post Comment"),this.settings.allowAnon)}else this.showPostCommentNotification(e.comment)},body:n},this)},removeMostRecentPending:function(){var e=f.one(".comment.most-recent"),t,a;e.ancestor(".comment-preview-wrapper")&&e.unwrap();e.wrap('<div class="most-recent-anim-wrapper"></div>');a=e.ancestor(".most-recent-anim-wrapper");a.setStyles({overflow:"hidden",height:e.get("offsetHeight")});t=new f.Anim({node:a,duration:.3,easing:f.Easing.easeOutStrong,to:{height:0}});t.on("end",function(){this._node.remove(true)});t.run()},onLoading:function(){var e=f.one(".comments-content"),t=f.Node.create('<div class="comment-event-capture"></div>'),a;t.setStyles({position:"absolute",top:e.getY(),left:e.getX(),width:e.get("offsetWidth"),height:e.get("offsetHeight"),zIndex:1e3});t.on("hover",function(e){e.stopImmediatePropagation()});t.on("click",function(e){e.stopImmediatePropagation()});f.one(f.config.doc.body).append(t);a=new f.Anim({node:e,duration:.3,easing:f.Easing.easeOutStrong,to:{opacity:.3}});a.run()},commentIdHashOnChange:function(e){if(!(f.Lang.isNull(e.newVal)||f.Lang.isUndefined(e.newVal))){this.threadState=true;this.lastHashChangeTime=new Date;this.onLoading();this.retrieveThread({commentId:e.newVal,order:this.sortOrder,onSuccess:function(){this.threadRender()}})}},commentIdHashOnRemove:function(){this.threadState=false;this.lastHashChangeTime=new Date;this.onLoading();this.retrieveComments({onSuccess:function(e){this.fullDataRender(e)},page:1,order:this.sortOrder},this)},retrieveThread:function(t,a){this.threadState=true;var e=function(e){this.threadState=false;t.onFailure.call(a||this,e)};this.commentData.getThread({order:t.order,commentId:t.commentId,success:t.onSuccess,failure:e},a||this)},retrieveComments:function(t,a){var e=f.bind(function(e){this.lastPollTime=new Date;t.onSuccess.call(a||this,e);this.updateLikedFlaggedState()},this);this.commentData.get({order:t.order,page:t.page,since:t.since||"",success:e,failure:t.onFailure},this)},addComment:function(t,a){var e=f.bind(function(e){f.Lang.isFunction(t.onSuccess)&&(t||s).onSuccess.call(a||this,e);b.set("displayName","",{expires:new Date(0),path:"/"})},this);var i={body:t.body,replyTo:t.replyTo,success:e,failure:t.onFailure};i.name=SQUARESPACE_LOGIN.account?SQUARESPACE_LOGIN.account.displayName:b.get("displayName")||"";i.email=SQUARESPACE_LOGIN.account?SQUARESPACE_LOGIN.account.email:b.get("email")||"";i.authorUrl=SQUARESPACE_LOGIN.account?SQUARESPACE_LOGIN.account.websiteUrl:b.get("websiteUrl")||"";this.commentData.post(i,a||this)},setPosting:function(e,t){e.all(".posting-text").each(function(e){e.removeClass("visible")});var a=e.one(".posting-text"+(t?".moderated":""));a&&a.addClass("visible")},setPosted:function(e){var t=e.all(".posting-text");t&&t.each(function(e){e.removeClass("visible")})},replyTo:function(s,n,r,o){this.setPosting(r,!this.approvalRequired||!this.moderationMode);var l=o.get("value");o.set("value","");this.addComment({body:n,replyTo:s,onSuccess:function(e){this.updateCommentCounts();if(!f.Lang.isNull(o._node)){this.setPosted(r);r.setAttribute("data-commentId",e.comment.id);e.comment.status===u.APPROVED&&r.removeClass("pending");this.addReplyArea(r);this.updateWithMemberAccount(r,e.comment.memberAccount);this.showPostCommentNotification(e.comment)}},onFailure:function(e){o.set("value",l);if(e.errors&&(e.errors.anonEmail||e.errors.authorEmail||e.errors.authorName)){var t,a;e.errors.anonEmail&&new f.Squarespace.Widgets.Alert({className:"okay","strings.title":d("Comment Failed"),"strings.message":e.errors.anonEmail});var i=SQUARESPACE_LOGIN.once("cancel",this.removeMostRecentPending,this);t=function(){this.replyTo(s,n,r,o);f.one('.comment[data-replyTo="'+s+'"] .author').set("innerHTML",f.Escape.html(SQUARESPACE_LOGIN.account.displayName));r.one(".author").set("innerHTML",f.Escape.html(SQUARESPACE_LOGIN.account.displayName));if(SQUARESPACE_LOGIN.account.avatarAssetUrl){var e=r.one(".avatar");e.one("img").setAttribute("src",SQUARESPACE_LOGIN.account.avatarAssetUrl)}i.detach()};a=function(){this.replyTo(s,n,r,o);var e=b.get("displayName");f.Lang.isNull(e)||f.one('.comment[data-replyTo="'+s+'"] .author').set("innerHTML",f.Escape.html(e));i.detach()};SQUARESPACE_LOGIN.configure({redirectAfterLogin:false,reloadAfterLogin:false,overlayOpacity:.5});this.doAfterLogin(SQUARESPACE_LOGIN,t,this);this.doAfterGuestLogin(SQUARESPACE_LOGIN,a,this);SQUARESPACE_LOGIN.showCommentLogin(d("Log In to Post Reply"),d("Post Reply"),this.settings.allowAnon)}}},this)},extendComments:function(){this.currentPage=this.currentPage+1;var e=this.lastSortTime,t=this.lastHashChangeTime;this.retrieveComments({order:this.sortOrder,onSuccess:function(){e===this.lastSortTime&&t===this.lastHashChangeTime&&this.attachComments.call(this)},page:this.currentPage},this)},attachComments:function(){var e=this.commentData.formatted;e.comments=this.commentData.getFormattedPage(this.currentPage);var t=this.renderToFragment(e);this.updateCommentCounts();var a=f.one(".comment-list");t.all(".comment, .reply-area-wrapper").each(function(e){a.append(e)});this.containerEl.one(".load-more").remove(true);this.addLoadMoreControls()},sort:function(e){var a=this.sortOrderLookup[e];b.set("commentSortOrder",e);this.sortOrder=e;this.currentPage=1;var t=function(e){this.lastSortTime=new Date;this.fullDataRender(e);var t=f.one(".comment-sort");t.one("span").set("innerHTML",a);t.one("select").set("value",this.sortOrder)};this.onLoading();this.retrieveComments({order:this.sortOrder,onSuccess:t,page:this.currentPage})},formatData:function(e,t,a){var i,s={comments:[]},n;t=t||{};a=a||{};var r=this.squarespaceAdminOnly()||this.settings.readOnly;s.noAvatars=this.settings.avatarsHidden;s.likesAllowed=this.settings.likesAllowed;s.newCommentAreaTop={authenticatedAccount:SQUARESPACE_LOGIN.account,readOnly:r};s.commentSortTitle=this.sortOrderLookup[this.sortOrder];s.sortOldestFirst=this.sortOrder===l.OLDEST_FIRST;s.sortNewestFirst=this.sortOrder===l.NEWEST_FIRST;s.sortMostLiked=this.sortOrder===l.MOST_LIKED;s.sortLeastLiked=this.sortOrder===l.LEAST_LIKED;s.totalComments=this.commentData.totalComments;s.visibleComments=this.commentData.visibleComments;s.subscribed=Static.SQUARESPACE_CONTEXT.subscribed;for(var o=0;o<e.length;o++){n=e[o];n.unmoderated=n.status===u.AWAITING_MODERATION;n.moderationMode=this.moderationMode;n.readOnly=r;n.flagsAllowed=this.settings.flagsAllowed;if(n.memberAccount){n.authorName=n.memberAccount.displayName;n.authorUrl=n.memberAccount.websiteUrl}n.authorUrl&&!/^https?:\/\//.test(n.authorUrl)&&(n.authorUrl="http://"+n.authorUrl);i=n.id;if(this.settings.likesAllowed){n.likesAllowed={likes:c({one:"{%n} Like",other:"{%n} Likes"},n.likeCount)};t[i]&&(n.likesAllowed.liked=true)}a[i]&&(n.flagged=true);n.threaded=this.settings.threaded;s.comments.push(n)}return s},scatterData:function(e){var t=this.squarespaceAdminOnly()||this.settings.readOnly;e.noAvatars=this.settings.avatarsHidden;e.likesAllowed=this.settings.likesAllowed;e.newCommentAreaTop={};e.newCommentAreaTop.readOnly=t;e.newCommentAreaTop.authenticatedAccount=SQUARESPACE_LOGIN.account;e.commentSortTitle=this.sortOrderLookup[this.sortOrder];e.subscribed=Static.SQUARESPACE_CONTEXT.subscribed;0===this.commentData.totalComments&&(e.noComments=true);var a={};for(var i=0;i<e.comments.length;i++){a=e.comments[i];a.flagsAllowed=this.settings.flagsAllowed;a.moderationMode=this.moderationMode;if(a.memberAccount){a.authorName=a.memberAccount.displayName;a.authorUrl=a.memberAccount.websiteUrl}a.authorUrl&&(a.authorUrl.startsWith("http://")||a.authorUrl.startsWith("https://")||(a.authorUrl="http://"+a.authorUrl));a.readOnly=t;if(this.settings.likesAllowed){a.likesAllowed||(a.likesAllowed={likeCount:0});a.likesAllowed.likeCount=0===a.likesAllowed.likeCount?void 0:a.likesAllowed.likeCount}a.threaded=this.settings.threaded;e.likeMap&&e.likeMap[a.id]&&void 0!==a.likesAllowed&&(a.likesAllowed.liked=true);e.flagMap&&e.flagMap[a.id]&&(a.flagged=true);e.comments[i]=a}return e},render:function(e){var t=this.renderToFragment(e),a=this.commentsEl,i,s=f.one(".comment-event-capture");e.comments.length?this.containerEl.removeClass("empty"):this.containerEl.addClass("empty");a.empty();a.append(t);i=new f.Anim({node:a,duration:.3,easing:f.Easing.easeOutStrong,to:{opacity:1}});i.on("end",function(){s.remove(true)});i.run();this.addFullViewControls();switch(this.params.paginationMode){case this.PaginationModes.PAGE:break;case this.PaginationModes.EXTEND:this.addLoadMoreControls();break;default:break}this.fire("render")},renderToFragment:function(a){for(var e=0;e<a.comments.length;e++){this.escapeComment(a.comments[e]);a.comments[e].body=p.sanitize(a.comments[e].body)}a.localizedStrings=this.localizedStrings;a.commentAnonAllowed=this.settings.allowAnon;var t=f.Node.create(o(this._template,a)),i=t.all(".comment");var s=window.navigator.userAgent.toLowerCase();var n=s.indexOf("safari/")>-1||s.indexOf("chrome/")>-1;var r=t.one(".new-comment-area");n&&r&&r.addClass("logged-in-commenting-unsupported");i.each(function(e,t){e.setAttribute("data-commentId",a.comments[t].id)});return t}});f.augment(f.Squarespace.Comments,f.EventTarget);var v=null;f.config.win.Squarespace.onInitialize(f,function(){var a=f.config.win.Static;var e=a.SQUARESPACE_CONTEXT.websiteSettings.disqusShortname;var t;if(e){t=f.one(".squarespace-comments");if(t&&e&&""!==e){window.disqus_shortname=e;var i=t.getAttribute("id");var s="disqus_thread";i!==s&&t.setAttribute("id",s);f.Get.script("//"+e+".disqus.com/embed.js",{win:f.config.win})}return}t=f.one(".squarespace-comments");var n,r,o=a.SQUARESPACE_CONTEXT.websiteSettings;if(t&&!o.disqusShortname){var l=t.getAttribute("data-item-id");var c=t.getAttribute("data-collection-id");var u=parseInt(t.getAttribute("data-comment-state"),10);var d=parseInt(t.getAttribute("data-public-comment-count"),10);n=l||c;if(n){r=l?y.ITEM:y.COLLECTION;var p=false,h=false;r===y.ITEM&&u===S.DISABLED&&(0===d?p=true:h=true);if(!p){var g=function(){f.use("squarespace-comments",function(e){v=new e.Squarespace.Comments({containerEl:t,identifier:n,type:r,publicCommentCount:d,likesAllowed:o.commentLikesAllowed,flagsAllowed:o.commentFlagsAllowed,threaded:o.commentThreaded,approvalRequired:o.commentApprovalRequired,allowAnon:o.commentAnonAllowed,avatarsOn:o.commentAvatarsOn,readOnly:h,sortType:b.get("commentSortOrder")||o.commentSortType});v.create()})};var m=function(){f.use("squarespace-comments",function(e){var t=function(){e.Data.get({url:"/api/auth/CheckAuthentication",secure:true,success:function(t){null!==t.member&&e.use("squarespace-management",function(e){a.SQUARESPACE_CONTEXT.authenticatedAccount=t.member;SQUARESPACE_LOGIN.params=e.merge(SQUARESPACE_LOGIN.params,{redirectAfterCancel:false,redirectAfterLogin:false});SQUARESPACE_LOGIN.onLoginComplete&&SQUARESPACE_LOGIN.onLoginComplete(t.member)});g()},failure:g})};if(e.Data.TRANSPORT_READY)t();else{false;e.once("io:xdrReady",t)}})};a.SQUARESPACE_CONTEXT.authenticatedAccount||a.SQUARESPACE_CONTEXT.website.cloneable?g():m()}}}});f.config.win.Squarespace.onDestroy(f,function(){if(v){v.destroy();v=null}})},"1.0",{requires:["anim","event","history","node","selector-css3","squarespace-comment-data","squarespace-dialog","squarespace-dialog-description","squarespace-escaping-utils","squarespace-login","squarespace-markdown","squarespace-ui-base","squarespace-util","squarespace-widgets-alert","squarespace-widgets-confirmation","squarespace-widgets-information","transition"]})},"./src/main/webapp/universal/scripts-v6/commerce-analytics.js":function(e,t,a){var n=a("./src/main/webapp/frontend/packages/enums/RecordType.js");YUI.add("squarespace-commerce-analytics",function(a){var e=new a.Base.create("commerceTrack",a.Base,[],{_reportSafelyForCart:function(e,t){a.Lang.isValue(t)?this._reportSafely(e,{cartId:t.get("id"),websiteId:t.get("websiteId")}):this._reportSafely(e)},_reportSafely:function(e,t){try{a.Squarespace.Analytics.trackInternal(e,t)}catch(e){console.error(e)}},itemViewed:function(e){this.fire("commerce-item-viewed",e)},itemAdded:function(e){this.fire("commerce-item-added",e)},checkoutConfirmed:function(e){var t={orderId:e.id,cartId:e.purchasedCartId,testMode:e.testMode,websiteId:e.websiteId};this._reportSafely("commerce_checkout_order_confirmed",t);this.fire("commerce-checkout-confirmed",e)}},{ATTRS:{}});a.namespace("Squarespace");a.Squarespace.CommerceAnalytics=new e;var t=a.Base.create("commerceAnalytics",a.Base,[],{initializer:function(){this._events=[a.Squarespace.CommerceAnalytics.on("commerce-item-viewed",this._getProtectedTracker("onItemViewed"),this),a.Squarespace.CommerceAnalytics.on("commerce-item-added",this._getProtectedTracker("onItemAdded"),this),a.Squarespace.CommerceAnalytics.on("commerce-checkout-confirmed",this._getProtectedTracker("onCheckoutConfirmed"),this)]},destructor:function(){a.Array.invoke(this._events,"detach")},_getProtectedTracker:function(t){return function(e){try{this[t].call(this,e)}catch(e){}}},onItemViewed:function(e){},onItemAdded:function(e){},onCheckoutConfirmed:function(e){}},{ATTRS:{}});var i=a.Base.create("commerceAnalyticsGoogle",t,[],{onCheckoutConfirmed:function(t){if(window.ga){window.ga("ecommerce:addTransaction",{id:t.id,revenue:t.grandTotal.decimalValue,shipping:t.shippingTotal.decimalValue,tax:t.taxTotal.decimalValue});a.each(t.items,function(e){window.ga("ecommerce:addItem",{id:t.id,name:e.productName,sku:e.sku||"digital",price:e.unitPrice.decimalValue,quantity:e.quantity})});window.ga("ecommerce:send")}}},{ATTRS:{}});new i;var s=a.Object.getValue(Static,["SQUARESPACE_CONTEXT","item","recordType"]);s===n.STORE_ITEM&&a.Squarespace.CommerceAnalytics.itemViewed(Static.SQUARESPACE_CONTEXT.item)},"1.0",{requires:["array-invoke","base","event-custom","node","squarespace-util"]})},"./src/main/webapp/universal/scripts-v6/commerce-email-preview.js":function(e,t){YUI.add("squarespace-commerce-email-preview",function(i){i.namespace("Squarespace.Widgets");var s={businessName:".squarespace-business-info",businessId:".squarespace-business-info",contactLocation:".squarespace-business-info",header:".squarespace-header",footer:".squarespace-footer",titleFormat:".squarespace-title",subjectFormat:".subject",message:".squarespace-message"};i.Squarespace.Widgets.CommerceEmailPreview=i.Base.create("CommerceEmailPreview",i.Squarespace.Widgets.SSWidget,[],{bindUI:function(){this.after("emailSettingsChange",this._fetchPreviewIfUnlocked);this.after("highlightedFieldChange",this._highlightElement)},_fetchPreviewIfUnlocked:function(){if(this.get("waitingForRender"))return;this.set("waitingForRender",true);this._fetchPreview(i.bind(function(e){this._renderUpdatedPreview(e);this.set("waitingForRender",false);this._catchUp()},this))},_catchUp:function(){this._fetchPreview(i.bind(this._renderUpdatedPreview,this))},_fetchPreview:function(e){var t=this.get("emailSettings");t&&i.Data.post({url:this.get("renderUrl"),json:true,data:this.get("emailSettings").toJSON(),success:e})},_renderUpdatedPreview:function(e){this.get("subjectNode").empty().setHTML(e.subject);this.get("bodyNode").empty().setHTML(e.body);this._highlightElement();this.set("waitingForRender",false)},_highlightElement:function(){var e=this.get("contentBox");var t=s[this.get("highlightedField")];e.all(".editing").removeClass("editing");if(i.Lang.isValue(t)){var a=e.one(t);a&&a.addClass("editing")}}},{HTML_PARSER:{subjectNode:".subject",bodyNode:".body"},CSS_PREFIX:"sqs-commerce-email-preview",ATTRS:{emailSettings:{},renderUrl:{valueFn:function(){return"/api/commerce/admin/email-preview/client-render/"+this.get("urlExtension")}},highlightedField:{validator:i.Squarespace.AttrValidators.isNullOrString,value:null},subjectNode:{validator:i.Squarespace.AttrValidators.isNullOrNode},bodyNode:{validator:i.Squarespace.AttrValidators.isNullOrNode},urlExtension:{validator:i.Squarespace.AttrValidators.isString},waitingForRender:{validator:i.Squarespace.AttrValidators.isBoolean,value:false}}})},"1.0",{requires:["squarespace-attr-validators","squarespace-ss-widget","squarespace-util"]})},"./src/main/webapp/universal/scripts-v6/commerce-giftcard-utils.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/utils/currency/MoneyUtils.js");var s=a("./src/main/webapp/universal/src/shared/i18n/commerce/MoneyFormatterProvider.ts");var n=a("./src/main/webapp/universal/src/shared/utils/commerce/StoreCurrencyManager.js");YUI.add("squarespace-commerce-giftcard-utils",function(a){a.namespace("Squarespace.Commerce");a.Squarespace.Commerce.GiftCardUtils={createGiftCardAmountVariant:function(e){var t=n.getStoreCurrency();return{onSale:false,price:e,salePrice:0,unlimited:true,id:a.Squarespace.Commerce.generateVariantId(),sku:a.Squarespace.Commerce.generateSKU(),optionValues:[{optionName:"Value",value:s.formatter.format(i.fromCents(e,t))}]}}}},"1.0",{requires:["squarespace-commerce-utils"]})},"./src/main/webapp/universal/scripts-v6/commerce-utils.js":function(e,t,a){var i=a("./common/temp/node_modules/@sqs/cookie-cutter/index.js");var s=a("./src/main/webapp/frontend/packages/enums/MeasurementStandard.js");var l=a("./src/main/webapp/frontend/packages/enums/ProductTypes.js");var n=a("./src/main/webapp/frontend/packages/enums/WorkflowStates.js");var u=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var r=a("./src/main/webapp/universal/src/shared/utils/currency/MoneyUtils.js");var o=a("./src/main/webapp/universal/src/shared/i18n/commerce/MoneyFormatterProvider.ts");var d=a("./src/main/webapp/universal/src/shared/utils/commerce/StoreCurrencyManager.js");var p=a("./common/temp/node_modules/lodash/get.js");var h=a("./common/temp/node_modules/uuid/v4.js");YUI.add("squarespace-commerce-utils",function(c){c.namespace("Squarespace");c.Squarespace.Commerce={COMMERCE_DATE_TIME_FORMAT:"lllLT",isExpressCheckout:function(){return Static.SQUARESPACE_CONTEXT.websiteSettings.storeSettings.expressCheckout},measurementStandard:function(){return c.Object.getValue(Static,["SQUARESPACE_CONTEXT","websiteSettings","storeSettings","measurementStandard"])},weightUnit:function(){return this.measurementStandard()===s.IMPERIAL?"lbs":"kg"},dimensionUnit:function(){return this.measurementStandard()===s.IMPERIAL?'"':"cm"},maxes:function(){return{productPrice:1e8,skuStringLength:60}},goToCheckoutPage:function(){if(!("true"===i.get("hasCart")||c.Lang.isValue(i.get("CART")))){alert(u("Either your session has expired or you do not have cookies enabled. We cannot continue to checkout."));return}window.top.location="/commerce/goto-checkout"},goToSubscriptionPage:function(e){if(!e)return;window.top.location="/checkout/subscribe?cartToken="+e},goToDonatePage:function(e){var t="/checkout/donate?donatePageId="+e;c.Squarespace.Utils.isInDamaskFrame()?window.top.location=t:window.location=t},goToGiftCardPage:function(e,t){e=encodeURIComponent(e);var a=t?encodeURIComponent(t.sku):null;var i=Static.SQUARESPACE_CONTEXT.website.id;var s="/checkout/giftcard?websiteId="+i+"&giftCardProductId="+e+(t?"&sku="+a:"");c.Squarespace.Utils.isInDamaskFrame()?window.top.location=s:window.location=s},isValidUSZip:function(e){return/^\d{5}$/.test(e)},variantFormat:function(e,t){var a=[];var i=e.optionValues;for(var s=0;s<i.length;s++){var n=i[s].value;a.push(t?n:c.Escape.html(n))}return a.join(" / ")},moneyString:function(e,t){false;var a=d.getStoreCurrency();var i=r.fromCents(e,a);var s={trimZeroFractions:t};return o.formatter.format(i,s)},priceString:function(e){var t=this.normalPrice(e);var a=e.structuredContent;switch(a.productType){case l.PHYSICAL:case l.SERVICE:if(this.onSale(e)){if(this.variedPrices(e))return u("from {startingPrice}",{startingPrice:this.moneyString(this.fromPrice(e))});return this.moneyString(this.salePrice(e))+' <span class="original-price">'+this.moneyString(t)+"</span>"}if(this.variedPrices(e))return u("from {startingPrice}",{startingPrice:this.moneyString(this.fromPrice(e))});return this.moneyString(t);case l.DIGITAL:if(this.onSale(e))return this.moneyString(this.salePrice(e))+' <span class="original-price">'+this.moneyString(t)+"</span>";return this.moneyString(t);case l.GIFT_CARD:if(this.variedPrices(e))return u("from {startingPrice}",{startingPrice:this.moneyString(t)});return this.moneyString(t);default:break}},isFiniteSubscriptionPlan:function(e){return!!Number(e.numBillingCycles)},merchantSubscriptionDetailsString:function(e){if(!e)return"";var t=e.billingPeriod.value;var a=e.billingPeriod.unit.toLowerCase()+"ly";var i=this.isFiniteSubscriptionPlan(e);if(i)var s=e.numBillingCycles;return p({"magnitude == 1":{weekly:{indefinite:u("renews every week"),finite:u("renews every week for {p} payments",{p:s})},monthly:{indefinite:u("renews every month"),finite:u("renews every month for {p} payments",{p:s})},yearly:{indefinite:u("renews every year"),finite:u("renews every year for {p} payments",{p:s})}},"magnitude > 1":{weekly:{indefinite:u("renews every {n} weeks",{n:t}),finite:u("renews every {n} weeks for {p} payments",{n:t,p:s})},monthly:{indefinite:u("renews every {n} months",{n:t}),finite:u("renews every {n} months for {p} payments",{n:t,p:s})},yearly:{indefinite:u("renews every {n} years",{n:t}),finite:u("renews every {n} years for {p} payments",{n:t,p:s})}}},[1===t?"magnitude == 1":"magnitude > 1",a,i?"finite":"indefinite"])},getTotalStockRemaining:function(e){var t=e.structuredContent;if(t.productType===l.DIGITAL)return 1/0;var a=0;for(var i=0;i<t.variants.length;i++){var s=t.variants[i];if(s.unlimited)return 1/0;a+=s.qtyInStock}return a},summaryFormFieldString:function(a){var e;var t;c.Lang.isObject(a.values)&&(t=c.Array.reduce(c.Object.keys(a.values),{},function(e,t){return c.Object.setValue(e,t,c.Squarespace.Escaping.escapeForHtml(a.values[t]))}));function i(e){var t;switch(e){case"-2":t=u("Strongly Disagree");break;case"-1":t=u("Disagree");break;case"0":t=u("Neutral");break;case"1":t=u("Agree");break;case"2":t=u("Strongly Agree");break}return t}switch(a.type){case"name":e=t.First+" "+t.Last;break;case"phone":var s=t.Country;e="";s&&""!==s&&(e+="+"+s+" ");e+=t.Areacode+"-"+t.Prefix+"-"+t.Line;break;case"likert":e='<div style="padding-left:5px;">';for(var n in t){var r=t[n];e+='<div><span style="font-weight:bold;">'+n+":</span> "+i(r)+"</div>"}e+="</div>";break;case"address":e='<div style="padding-left:5px;"><div>'+t.Line1+"</div>";var o=t.Line2;o&&""!==o&&(e+="<div>"+o+"</div>");e+="<div>"+t.City+", "+t.State+" "+t.Zip+" "+t.Country+"</div></div>";break;case"date":e=t.Month+"/"+t.Day+"/"+t.Year;break;case"time":e=(t.Hour||"00")+":"+(t.Minute||"00")+":"+(t.Second||"00")+" "+t.Ampm;break;case"checkbox":var l=a.value;!c.Lang.isValue(t)&&c.Lang.isValue(l)?t=[l]:c.Lang.isValue(t)&&(t=c.Object.values(t));e=t.join(", ");break;default:e=c.Squarespace.Escaping.escapeForHtml(a.value);break}""===e&&(e=u("N/A"));return'<div style="margin-top:3px;"><span style="font-weight:bold;">'+a.rawTitle+":</span> "+e+"</div>"},hasVariants:function(e){var t=e.structuredContent;return t.productType!==l.DIGITAL&&t.variants.length>=1},variedPrices:function(e){var t=e.structuredContent;switch(t.productType){case l.PHYSICAL:case l.SERVICE:case l.GIFT_CARD:var a=t.variants;if(a.length<=1)return false;var i=a[0];for(var s=1;s<a.length;s++){var n=a[s];if(n.onSale!==i.onSale||i.onSale&&n.salePrice!==i.salePrice||n.price!==i.price)return true}return false;case l.DIGITAL:return false}},onSale:function(e){var t=e.structuredContent;switch(t.productType){case l.PHYSICAL:case l.SERVICE:var a=t.variants;var i=false;for(var s=0;s<a.length;s++){var n=a[s];if(n.onSale){i=true;break}}return i;case l.DIGITAL:return t.onSale}},soldOut:function(e){var t=e.structuredContent;switch(t.productType){case l.PHYSICAL:case l.SERVICE:var a=t.variants;var i=true;for(var s=0;s<a.length;s++){var n=a[s];if(n.unlimited||n.qtyInStock>0){i=false;break}}return i;case l.DIGITAL:return false}},normalPrice:function(e){var t=e.structuredContent;var a=t.variants;switch(t.productType){case l.PHYSICAL:case l.SERVICE:if(0===a.length)return 0;var i=a[0].price;for(var s=1;s<a.length;s++){var n=a[s].price;n>i&&(i=n)}return i;case l.DIGITAL:return c.Lang.isUndefined(t.priceCents)?0:t.priceCents;case l.GIFT_CARD:return a[0].price;default:break}},salePrice:function(e){var t=e.structuredContent;switch(t.productType){case l.PHYSICAL:case l.SERVICE:var a=t.variants;if(0===a.length)return 0;var i=null;for(var s=0;s<a.length;s++){var n=a[s];var r=n.salePrice;n.onSale&&(null===i||n.salePrice<i)&&(i=r)}return i;case l.DIGITAL:return c.Lang.isUndefined(t.salePriceCents)?0:t.salePriceCents}},fromPrice:function(e){var t=e.structuredContent;switch(t.productType){case l.PHYSICAL:case l.SERVICE:var a=t.variants;if(0===a.length)return 0;var i=a[0];var s=i.onSale?i.salePrice:i.price;for(var n=1;n<a.length;n++){var r=a[n];var o=r.onSale?r.salePrice:r.price;o<s&&(s=o)}return s;case l.DIGITAL:return c.Lang.isUndefined(t.priceCents)?0:t.priceCents}},capitalizeFirst:function(e){e=e.toLowerCase();var t=e.split(new RegExp("\\s+"));var a=c.Array.map(t,function(e){return e.charAt(0).toUpperCase()+e.substr(1)});return a.join(" ")},generateVariantId:function(){return h()},generateSKU:function(){var e="",i="0123456789";var t=function(){var e="";for(var t=0;t<7;++t){var a=Math.floor(Math.random()*i.length);e+=i.charAt(a)}return"SQ"+e};e=t();return e},getLabelForWorkflowState:function(e){switch(e){case n.PUBLISHED:return u("Available");case n.SCHEDULED:return u("Scheduled");case n.DRAFT:return u("Hidden");default:return u("Unsupported")}}}},"1.0",{requires:["escape","node","squarespace-escaping-utils"]})},"./src/main/webapp/universal/scripts-v6/commerce.js":function(e,t,a){var u=a("./common/temp/node_modules/@sqs/cookie-cutter/index.js");var d=a("./common/temp/node_modules/@sqs/error-reporter/dist/index.js");var p=a("./src/main/webapp/universal/src/shared/productVariants.js");var h=a("./src/main/webapp/universal/src/shared/productBlocks.js");var g=a("./src/main/webapp/universal/src/apps/Commerce/ProductPage/WaitLists/productWaitLists.ts");var m=a("./src/main/webapp/universal/src/apps/Commerce/shared/utils/isCartPage.ts");var f=a("./src/main/webapp/universal/src/apps/Commerce/shared/components/TemplateCart.ts");var s=a("./src/main/webapp/universal/src/shared/i18n/commerce/MoneyFormatterProvider.ts");var n=a("./src/main/webapp/universal/src/shared/utils/commerce/trackEvent.ts");YUI.add("squarespace-commerce",function(r){r.namespace("Squarespace.Commerce");var o=r.config.win.Static;var l=function(e){var t=e.target;var a=t.get("totalQuantity");var i=t.get("subtotalAmount");f.syncAll({items:a,subtotal:s.formatter.format(i)})};var c=function(){if(o.SQUARESPACE_CONTEXT.product){var e=o.SQUARESPACE_CONTEXT.product;var t=r.Object.getValue(o.SQUARESPACE_CONTEXT,["product","variants"]);t&&t.length>0?a(e):i(e)}};var a=function(e){var t=r.Object.getValue(e,["variants"]);if(!t)return;var a=t.map(function(e){return e.sku});var i=t.map(function(e){return{id:e.sku,quantity:null,item_price:e.price.decimalValue,attributes:e.attributes}});var s=e.name;n.trackViewProductPage({content_ids:a,content_type:"product",contents:i,content_name:s})};var i=function(e){var t=e.id;var a=e.name;var i=r.Object.getValue(e,["price","decimalValue"]);n.trackViewProductPage({content_ids:[t],content_type:"product",contents:[{id:t,quantity:null,item_price:i}],content_name:a})};r.Squarespace.Commerce.initializeCommerce=function(){p.initializeVariantDropdowns(r.config.win.document);h.initializeProductBlocks(r.config.win.document);g(r.config.win.document);try{c()}catch(e){d.trackCaughtError("common","trackViewProduct issue",e.stack)}r.Squarespace.CartUtils.initializeAddToCartButtons();var e=r.Lang.isValue(r.one(".sqs-custom-cart"))||r.Lang.isValue(r.one(".sqs-has-custom-cart"));if(!r.Squarespace.Commerce.isExpressCheckout()&&!m(r.config.win)&&!e){var t=r.one(".sqs-cart-dropzone");if(r.Lang.isNull(t))if(r.Lang.isValue(r.one(".absolute-cart-box")))t=r.one(".absolute-cart-box");else{t=r.Node.create('<div class="absolute-cart-box"></div>');r.one(r.config.doc.body).append(t)}var a=t.one(".sqs-pill-shopping-cart");var i=r.Widget.getByNode(a);i||new r.Squarespace.Widgets.PillShoppingCart({model:r.Squarespace.Singletons.ShoppingCart,useLightCart:o.SQUARESPACE_CONTEXT.websiteSettings.storeSettings.useLightCart,render:t})}if(!m(r.config.win)){f.mountAll();r.Squarespace.Singletons.ShoppingCart.after("load",l);r.Squarespace.Singletons.ShoppingCart.on("change",l)}var s=window.UserAccountApi;var n=s&&s.isUserAuthenticated();n||"true"===u.get("hasCart")||r.Lang.isValue(u.get("CART"))?r.Squarespace.Singletons.ShoppingCart.load(function(){r.all(".sqs-add-to-cart-button-wrapper").setStyle("visibility","visible")},this):r.all(".sqs-add-to-cart-button-wrapper").setStyle("visibility","visible")};r.Squarespace.Commerce.destroyCommerce=function(){f.unmountAll();r.Squarespace.Singletons.ShoppingCart.detach("load",l);r.Squarespace.Singletons.ShoppingCart.detach("change",l)};r.config.win.Squarespace.onInitialize(r,r.Squarespace.Commerce.initializeCommerce);r.config.win.Squarespace.onDestroy(r,r.Squarespace.Commerce.destroyCommerce)},"1.0",{requires:["event-base-ie","overlay","squarespace-cart-utils","squarespace-commerce-utils","squarespace-models-shopping-cart","squarespace-pill-shopping-cart"]})},"./src/main/webapp/universal/scripts-v6/common.js":function(e,t,a){a("./src/main/webapp/universal/src/common/bootstrap.js");YUI.add("squarespace-common",function(e){},"1.0",{requires:["get","intl","@sqs/layout-engine/aspect-ratio-manager","squarespace-promises","squarespace-attr-validators","squarespace-commerce-utils","squarespace-cookie-banner-styles","squarespace-currency-symbols","squarespace-deprecated-modules","squarespace-damask-context-globals","squarespace-escmanager","squarespace-follow-buttons","squarespace-form-submit","squarespace-gallery","squarespace-gallery-manager","squarespace-gallery-ng","squarespace-image-loader","squarespace-models-shopping-cart-facade","squarespace-plugin-lightbox2","squarespace-spinner","squarespace-ui-base","squarespace-util","squarespace-video-loader","squarespace-widgets-alert","squarespace-widgets-information","thirdparty-modernizr","yui-throttle"]})},"./src/main/webapp/universal/scripts-v6/connected-account-capabilities.js":function(e,t){YUI.add("squarespace-connected-account-capabilities",function(i){var e=i.namespace("Squarespace.ConnectedAccountCapabilities");var t=e.PULL=1;var a=e.PUSH=2;var s=e.ICON=4;var n=e.NONE=0;var r={applepodcast:s,bandsintown:s,behance:s,chownow:s,codepen:s,dribbble:s,dropbox2017:n,dropbox:n,email:s,facebook:s|a,fivehundredpix:s|t,flickr:t|s,foursquare:s|t,github:s,goodreads:s,google:s,googleplay:s,googlesearchconsole:n,houzz:s,imdb:s,instagram:s|t,itunes:s,linkedin:s|a,medium:s,meetup:s,pinterest:s|a,rdio:s,reddit:s,smugmug:s,snapchat:s,soundcloud:s,spotify:s,stitcher:s,stumbleupon:s,thedots:s,tidal:s,tripadvisor:s,tumblr:s|a,twitch:s,twitter:t|a|s,vevo:s,vimeo:s,vine:s,vsco:s,yelp:s,youtube:s};e.can=function(e,t){var a=r[e.get("serviceName")];if(!i.Lang.isValue(a))return false;return a&t};e.get=function(e){return r[e.get("serviceName")]}},"1.0",{requires:[]})},"./src/main/webapp/universal/scripts-v6/connected-account-configs.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-connected-account-configs",function(e){e.namespace("Squarespace").ConnectedAccountConfigs={applepodcast:{displayName:i("Apple Podcasts"),icon:"applepodcast"},bandsintown:{displayName:i("Bandsintown"),icon:"bandsintown"},behance:{displayName:i("Behance"),icon:"behance"},chownow:{displayName:i("ChowNow"),icon:"chownow"},codepen:{displayName:i("CodePen"),icon:"codepen"},dribbble:{displayName:i("Dribbble"),icon:"dribbble"},dropbox:{displayName:i("Dropbox"),icon:"dropbox"},dropbox2017:{displayName:i("Dropbox"),icon:"dropbox2017"},email:{displayName:i("Email"),icon:"email"},facebook:{displayName:i("Facebook"),icon:"facebook"},fivehundredpix:{displayName:i("500px"),icon:"fivehundredpix"},flickr:{displayName:i("Flickr"),icon:"flickr"},foursquare:{displayName:i("Foursquare Swarm"),icon:"foursquare"},github:{displayName:i("GitHub"),icon:"github"},goodreads:{displayName:i("Goodreads"),icon:"goodreads"},googleplay:{displayName:i("Google Play"),icon:"googleplay"},googlesearchconsole:{displayName:i("Google Search Console"),icon:"googlesearchconsole"},houzz:{displayName:i("Houzz"),icon:"houzz"},imdb:{displayName:i("IMDb"),icon:"imdb"},instagram:{displayName:i("Instagram"),icon:"instagram"},itunes:{displayName:i("iTunes Store"),icon:"itunes"},linkedin:{displayName:i("LinkedIn"),icon:"linkedin"},medium:{displayName:i("Medium"),icon:"medium"},meetup:{displayName:i("Meetup"),icon:"meetup"},pinterest:{displayName:i("Pinterest"),icon:"pinterest"},rdio:{displayName:i("Rdio"),icon:"rdio"},reddit:{displayName:i("Reddit"),icon:"reddit"},smugmug:{displayName:i("SmugMug"),icon:"smugmug"},snapchat:{displayName:i("Snapchat"),icon:"snapchat"},soundcloud:{displayName:i("SoundCloud"),icon:"soundcloud"},spotify:{displayName:i("Spotify"),icon:"spotify"},stitcher:{displayName:i("Stitcher"),icon:"stitcher"},stumbleupon:{displayName:i("StumbleUpon"),icon:"stumbleupon"},thedots:{displayName:i("The Dots"),icon:"thedots"},tidal:{displayName:i("TIDAL"),icon:"tidal"},tripadvisor:{displayName:i("TripAdvisor"),icon:"tripadvisor"},tumblr:{displayName:i("Tumblr"),icon:"tumblr"},twitch:{displayName:i("Twitch"),icon:"twitch"},twitter:{displayName:i("Twitter"),icon:"twitter"},vevo:{displayName:i("Vevo"),icon:"vevo"},vimeo:{displayName:i("Vimeo"),icon:"vimeo"},vine:{displayName:i("Vine"),icon:"vine"},vsco:{displayName:i("VSCO"),icon:"vsco"},yelp:{displayName:i("Yelp"),icon:"yelp"},youtube:{displayName:i("YouTube"),icon:"youtube"}}},"1.0",{requires:[]})},"./src/main/webapp/universal/scripts-v6/connected-account-dialog-settings.js":function(e,t,a){var _=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var C=a("./src/main/webapp/universal/src/shared/constants/HelpLinks.js");var E="https://www.chownow.com/lp/squarespace?utm_source=squarespace&utm_medium=squarespace_UI&utm_campaign=squarespace_referral";YUI.add("squarespace-connected-account-dialog-settings",function(u){u.namespace("Squarespace");var e=u.Object.getValue(Static,["SQUARESPACE_CONTEXT","website","identifier"]);var t=u.Object.getValue(Static,["SQUARESPACE_CONTEXT","authenticatedAccount","displayName"]);var a=u.Object.getValue(Static,["SQUARESPACE_CONTEXT","website","baseUrl"]);var i=u.Squarespace.ConnectedAccountCapabilities;var s=function(e){return i.can(e,i.PULL)};var n={pushToggle:{title:_("Show Push Option"),description:_("When posting on Squarespace, show this account as a cross-publishing option.")},pullToggle:{title:_("Download Data"),description:_("When new items are posted to this account, download them to Squarespace for publishing on your site.")},iconToggle:{title:_("Show Social Icon"),description:_("Most templates have built-in social icons, but you can also display icons anywhere on your site using the Social Links Block.")},tumblrMetaData:{title:_("Primary Blog"),description:_("Select the blog content will be pushed to.")},profileUrl:{title:_("Profile URL"),description:_("Enter the URL to your profile. Social icons on the site will link to this."),placeholder:_("http://…")}};var r={ctor:u.Squarespace.DialogFields.StructuredInput,config:{name:"defaultPushMessage","strings.title":_("Default Posting Format"),"strings.description":_("When posting to this service from Squarespace, this will be the default message format used."),placeholder:"%t %u",value:_("New post %t from %a."),variables:{"%t":{title:_("Title"),description:_("The title of this post."),exampleText:_("New Post Title")},"%a":{title:_("Author"),description:_("The author of this post."),exampleText:t},"%u":{title:_("URL"),description:_("The URL to this post."),exampleText:a+"/blog-post"}}}};var o=function(e,t){t.get("dialog").fire("remove-requested")};var l={ctor:u.Squarespace.DialogFields.Button,config:{"strings.text":_("Disconnect"),onClick:o,id:"connectedAccountsDialogDisconnectButton"}};var c=function(t){return function(e){return e.get("serviceName")!==t}};var d=function(e){return"facebook"!==e.get("serviceName")||e.get("metaData")&&(e.get("metaData.isPageAccount")||e.get("metaData.managedPages").length)};var p={$valueFn:function(e){return r},$when:function(e){return c("tumblr")(e)&&d(e)}};var h={$value:{ctor:u.Squarespace.DialogFields.Check,config:{"strings.title":n.pushToggle.title,"strings.description":n.pushToggle.description,name:"pushEnabled"}},$when:d};var g={};g[i.NONE]=[];g[i.PULL|i.PUSH|i.ICON]=[{ctor:u.Squarespace.DialogFields.Check,config:{"strings.title":n.iconToggle.title,"strings.description":n.iconToggle.description,name:"iconEnabled"}},{ctor:u.Squarespace.DialogFields.Check,config:{"strings.title":n.pullToggle.title,"strings.description":n.pullToggle.description,name:"pullEnabled"}},h,p,{ctor:u.Squarespace.DialogFields.Text,config:{name:"profileUrl","strings.title":n.profileUrl.title,"strings.description":n.profileUrl.description,"strings.placeholder":n.profileUrl.placeholder,submitOnEnter:true}},l];g[i.PULL|i.ICON]=[{ctor:u.Squarespace.DialogFields.Check,config:{"strings.title":n.iconToggle.title,"strings.description":n.iconToggle.description,name:"iconEnabled"}},{ctor:u.Squarespace.DialogFields.Check,config:{"strings.title":n.pullToggle.title,"strings.description":n.pullToggle.description,name:"pullEnabled"}},{ctor:u.Squarespace.DialogFields.Text,config:{name:"profileUrl","strings.title":n.profileUrl.title,"strings.description":n.profileUrl.description,"strings.placeholder":n.profileUrl.placeholder,submitOnEnter:true}},l];g[i.ICON]=[{ctor:u.Squarespace.DialogFields.Check,config:{"strings.title":n.iconToggle.title,"strings.description":n.iconToggle.description,name:"iconEnabled"}},{$value:{ctor:u.Squarespace.DialogFields.Text,config:{name:"profileUrl","strings.title":n.profileUrl.title,"strings.description":n.profileUrl.description,"strings.placeholder":n.profileUrl.placeholder,description:"",submitOnEnter:true}},$when:c("email")},l];g[i.ICON|i.PUSH]=[{ctor:u.Squarespace.DialogFields.Check,config:{"strings.title":n.iconToggle.title,"strings.description":n.iconToggle.description,name:"iconEnabled"}},{$value:{ctor:u.Squarespace.DialogFields.Text,config:{name:"profileUrl","strings.title":n.profileUrl.title,"strings.description":n.profileUrl.description,"strings.placeholder":n.profileUrl.placeholder,submitOnEnter:true}},$when:c("tumblr")},h,p,l];u.Squarespace.ConnectedAccountDialogSettingsContext={buttons:[{type:"cancel",title:_("Cancel")},{type:"remove",title:_("Disconnect")},{$value:{type:"reset",title:_("Reset Data")},$when:s},{type:"saveAndClose",title:_("Save")}]};var m=function(e){return u.clone(g[u.Squarespace.ConnectedAccountCapabilities.get(e)])};var f=function(e){var t=e.get("serviceName");return _("{typeName} Settings",{typeName:u.Squarespace.ConnectedAccountConfigs[t].displayName})};var v={style:"flyout",flyoutPointerDirection:"centered",verticalHeight:"fit",overlay:.5,name:"social-account-settings",closeOthers:false,width:600,tabs:[{icon:"/universal/images-v6/icons/icon-settings-16-light.png",title:{$valueFn:f},fields:{$valueFn:m}}],buttons:{$include:"buttons"}};var b=function(e,t){var a=u.clone(v);a.tabs[0].fields=t;return a};var S=function(e){var t=e.get("metaData.managedPages");return{ctor:u.Squarespace.DialogFields.FacebookMetaData,name:"metaData",config:{pages:u.Array.map(t,function(e){return{label:e.name,value:e.id}})}}};var y={pinterest:u.merge(v,{width:600,tabs:[{scroll:true,title:{$valueFn:f},fields:{$valueFn:function(e){var t=m(e);var a=true;if(!a)return t;var i=e.get("metaData");var s=false;var n=false;var r=false;var o=false;var l=false;if(u.Lang.isObject(i))switch(i.domainVerificationStatus){case u.Squarespace.PinterestDomainVerificationState.FAILED:case u.Squarespace.PinterestDomainVerificationState.PROCESSED:s=true;break;case u.Squarespace.PinterestDomainVerificationState.USER_PROFILE_CONFIG_PROBLEM:r=true;break;case u.Squarespace.PinterestDomainVerificationState.NONE:case u.Squarespace.PinterestDomainVerificationState.PENDING:n=true;break;case u.Squarespace.PinterestDomainVerificationState.SUCCEEDED:o=true;break}else{l=true;s=true}if(!l){var c=u.Array.map(i.boardConnections,function(e){return{label:_("{sub1} (Board)",{sub1:e.name}),value:e.id}});t.splice(t.length-1,0,{ctor:u.Squarespace.DialogFields.PinterestMetaData,config:{name:"metaData",boards:c,required:true}})}s?t.splice(t.length-1,0,{ctor:u.Squarespace.DialogFields.Description,config:{padding:[15,0],title:_("Reconnect account"),text:_("Please reconnect your Pinterest account to enable Pinterest Analytics for your website.")}}):r?t.unshift({ctor:u.Squarespace.DialogFields.Error,config:{padding:[15,0],text:_("<b>Verification of your website's domain with Pinterest failed.</b> Please ensure the website you have configured in your Pinterest profile matches your Squarespace website's domain. Reconnect your Pinterest account to attempt verification again.")}}):n?t.splice(t.length-1,0,{ctor:u.Squarespace.DialogFields.Description,config:{padding:[15,0],text:_("Your website is being verified by Pinterest to enable Pinterest Analytics for your website. Please check back later.")}}):o&&t.splice(t.length-1,0,{ctor:u.Squarespace.DialogFields.Description,config:{padding:[15,0],title:_("Pinterest Analytics Activated"),text:_('You can now see what people are Pinning from your site. Visit <a href="https://analytics.pinterest.com/domain" target="_blank">Pinterest Analytics</a>.')}});return t}}}]}),googlesearchconsole:u.merge(v,{width:600,tabs:[{scroll:true,title:{$valueFn:f},fields:[{$valueFn:function(e){return m(e)[0]}},{ctor:u.Squarespace.DialogFields.Description,config:{text:_('<a href="https://www.google.com/webmasters/tools/home" target="_blank">Google Search Console</a> is an integration with Google that helps you monitor and maintain your site\'s presence in Google Search results.')}},{ctor:u.Squarespace.DialogFields.Description,config:{text:_("By disconnecting, you will no longer receive Google Search Console data within the Analytics panel.")}},l]}]}),facebook:u.merge(v,{width:600,tabs:[{scroll:true,icon:"/universal/images-v6/icons/icon-settings-16-light.png",title:{$valueFn:f},fields:{$valueFn:function(e){var t=m(e);d(e)?t.splice(t.length-1,0,S(e)):t.splice(t.length-1,0,{ctor:u.Squarespace.DialogFields.Description,config:{padding:[15,0],title:_("Reconnect to Enable Push Targets"),text:_('If you have a Facebook Page, please reconnect your Facebook account to enable pushing to your account. <a href="{helpLink}" target="_blank">Learn more.</a>',{helpLink:C.FACEBOOK_PUSH})}});return t}}}]}),tumblr:u.merge(v,{tabs:[{icon:"/universal/images-v6/icons/icon-settings-16-light.png",title:{$valueFn:f},fields:[{$valueFn:function(e){return m(e)[0]}},{$value:{ctor:u.Squarespace.DialogFields.Description,config:{title:n.tumblrMetaData.title,text:n.tumblrMetaData.description,padding:[20,0]}},$when:function(e){return e.get("metaData")}},{$valueFn:function(e){var t=e.get("metaData");var a=t.blogs;var i=[];u.Array.each(a,function(e,t){i.push({value:e.name,label:e.title||e.name})},this);return{ctor:u.Squarespace.DialogFields.Select,config:{className:"thin dark",name:"primaryBlog",options:i,width:.3}}},$when:function(e){return e.get("metaData")}},l]}]}),dropbox:u.merge(b(v,[{ctor:u.Squarespace.DialogFields.Description,config:{title:_("Dropbox Connection Activated"),text:_("Your Squarespace account is connected to your Dropbox account.  Pressing the publish button from the previous screen will let you synchronize your content into Squarespace.")}},{ctor:u.Squarespace.DialogFields.Description,config:{title:_("Instructions"),text:_('After you have connected your account to Dropbox, a <strong>Squarespace</strong> folder will appear in the <strong>Apps</strong> directory of your Dropbox account.  To publish files to Squarespace, within our directory, create a folder called <strong>{websiteIdentifier}</strong> (the name of your site), and then create a sub-folder for each collection you would like to create on your Squarespace site.<br/><br/>For instance, creating a folder with images at <strong>/Apps/Squarespace/{websiteIdentifier}/Test Images</strong> would create a corresponding collection called <strong>Test Images</strong> on Squarespace, and your images would be automatically transferred to that collection. If you want a specific file to be ignored by Squarespace just prefix the file name with underscrore ("_").<br/><br/>Squarespace for Dropbox currently only supports images. <br/><br/> Please note that you must press the <strong>Publish to Squarespace</strong> button from the main Connected Accounts panel to push changes from Dropbox to Squarespace &mdash; they will not be automatically uploaded.',{websiteIdentifier:e}),padding:[10,0]}},l]),{width:600}),dropbox2017:u.merge(b(v,[{ctor:u.Squarespace.DialogFields.Description,config:{title:_("Dropbox Connection Activated"),text:_("Your Squarespace account is connected to your Dropbox account.  Pressing the publish button from the previous screen will let you synchronize your content into Squarespace.")}},{ctor:u.Squarespace.DialogFields.Description,config:{title:_("Instructions"),text:_('After you have connected your account to Dropbox, a <strong>Squarespace</strong> folder will appear in the <strong>Apps</strong> directory of your Dropbox account.  To publish files to Squarespace, within our directory, create a folder called <strong>{websiteIdentifier}</strong> (the name of your site), and then create a sub-folder for each collection you would like to create on your Squarespace site.<br/><br/>For instance, creating a folder with images at <strong>/Apps/Squarespace/{websiteIdentifier}/Test Images</strong> would create a corresponding collection called <strong>Test Images</strong> on Squarespace, and your images would be automatically transferred to that collection. If you want a specific file to be ignored by Squarespace just prefix the file name with underscrore ("_").<br/><br/>Squarespace for Dropbox currently only supports images. <br/><br/> Please note that you must press the <strong>Publish to Squarespace</strong> button from the main Connected Accounts panel to push changes from Dropbox to Squarespace &mdash; they will not be automatically uploaded.',{websiteIdentifier:e}),padding:[10,0]}},l]),{width:600}),chownow:u.merge(b(v,[{ctor:u.Squarespace.DialogFields.Description,config:{text:_('Enter your ChowNow Company ID to connect it to Squarespace and accept orders online. If you don’t have a ChowNow account yet, <a href="{chowNowSignupLink}" target="_blank">sign up here</a>. <a href="{chowNowHelpLink}" target="_blank">Learn more</a>',{chowNowSignupLink:E,chowNowHelpLink:C.CHOWNOW})}},{ctor:u.Squarespace.DialogFields.Text,config:{name:"userName",title:_("ChowNow Company ID"),submitOnEnter:true}},{ctor:u.Squarespace.DialogFields.Check,config:{name:"iconEnabled","strings.title":n.iconToggle.title,"strings.description":n.iconToggle.description}},l]),{width:600})};u.Squarespace.ConnectedAccountDialogSettings={get:function(e){return u.clone(y[e]||v)}}},"1.0",{requires:["squarespace-connected-account-capabilities","squarespace-connected-account-configs","squarespace-dialog-description","squarespace-dialog-error","squarespace-dialog-facebook-meta-data","squarespace-dialog-fields","squarespace-dialog-pinterest-meta-data","squarespace-dialog-select","squarespace-dialog-structured-input"]})},"./src/main/webapp/universal/scripts-v6/connected-account-editors.js":function(e,t){YUI.add("squarespace-connected-account-editors",function(i){var s={tumblr:i.Squarespace.TumblrAccountEditor};i.namespace("Squarespace").ConnectedAccountEditors={create:function(e){var t=e.get("serviceName");var a=s[t];a=a||i.Squarespace.ModelEditorDialog;return new a({model:e,dialogConfigContext:i.Squarespace.ConnectedAccountDialogSettingsContext,dialogConfig:i.Squarespace.ConnectedAccountDialogSettings.get(t)})}}},"1.0",{requires:["squarespace-connected-account-dialog-settings","squarespace-model-editor","squarespace-tumblr-connected-account-editor"]})},"./src/main/webapp/universal/scripts-v6/connected-account-widget.js":function(e,t,a){var s=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var n=a("./src/main/webapp/universal/src/apps/App/shared/actions/ConnectedAccountsActions.js");var r=a("./src/main/webapp/universal/src/shared/utils/analytics/trackInternal.ts");YUI.add("squarespace-connected-account-widget",function(i){i.Handlebars.registerHelper("serviceNameForDisplay",function(e){return i.Squarespace.ConnectedAccountConfigs[e.serviceName].displayName});i.Handlebars.registerHelper("screenNameForDisplay",function(e){var t=e.serviceName;if("tumblr"===t){if(e.metaData&&e.metaData.primaryBlog){var a=i.Array.find(e.metaData.blogs,function(e){return e.primary});if(a)return e.screenname+" ("+a.title+")"}}else if(e.serviceId===i.Squarespace.ExternalServiceProviders.CHOWNOW)return"Company ID: "+e.screenname;if(!e.screenname&&e.title)return e.title;return e.screenname});i.namespace("Squarespace.Widgets").ConnectedAccount=i.Base.create("connectedAccountWidget",i.Widget,[i.WidgetChild],{initializer:function(){this._editor=i.Squarespace.ConnectedAccountEditors.create(this.get("model"));this._bindEditorEvents(this._editor);this.publish("reauthenticate",{emitFacade:true});this.publish("account-removed")},destructor:function(){this._editor.destroy();this._modelChangeHandle&&this._modelChangeHandle.detach()},_bindEditorEvents:function(e){var t=e.get("dialog");t.on("button-reset",this._resetSubscription,this);t.on("remove-requested",this._remove,this)},_remove:function(){var e=this.get("model").get("serviceName");r("interface_click",{identifier:"connected-account-disconnect",serviceName:e});var t=new i.Squarespace.Widgets.Confirmation({"strings.title":s("Disconnect Account"),"strings.message":s("Are you sure you want to disconnect this account?")});t.on("cancel",function(){r("interface_click",{identifier:"connected-account-disconnect-cancel",serviceName:e})});t.on("confirm",function(){r("interface_click",{identifier:"connected-account-disconnect-confirm",serviceName:e});this.get("model").destroy({remove:true},i.bind(function(e){if(!e){n.refreshConnectedAccounts();this.fire("account-removed");this.destroy()}},this))},this)},_resetSubscription:function(){this.get("model").resetSubscription();new i.Squarespace.Widgets.Information({"strings.title":s("Account Reset"),"strings.message":s("Your connected account has been reset. Social blocks are being populated with the latest activity. This may take a few minutes.")})},bindUI:function(){var e=this.get("model");e&&(this._modelChangeHandle=e.after("change",this.syncUI,this));this.get("boundingBox").on("click",function(){this.get("editable")&&this._edit()},this);this.get("contentBox").delegate("click",this._reauthenticate,".reauthenticate",this)},syncUI:function(){this.get("contentBox").setContent(i.Squarespace.UITemplates.renderAsNodeOrDocFrag("connected-account.html",this.get("model").getAttrs()))},_reauthenticate:function(e){e.halt();this.fire("reauthenticate")},_edit:function(){var e=this.get("model");var t="pinterest"===e.get("serviceName");var a=null===e.get("metaData");t&&a?this._showPinterestPitchDialog(e.get("id")):this.showEditor()},_showPinterestPitchDialog:function(t){var a=new i.Squarespace.EditingDialog({width:400,title:s("Connect to Pinterest"),fields:[{ctor:i.Squarespace.DialogFields.Description,config:{text:s("By connecting your Pinterest account to your website, you will verify for Pinterest that you own it and receive access to Pinterest Analytics where you can see what people Pin from your website.")}},{ctor:i.Squarespace.Widgets.Button,config:{"strings.text":s("Connect"),onClick:function(){a.close();var e=new i.Squarespace.SocialAuthenticator;e._startOAuth("pinterest",t);e.after("account-added",function(){this.showEditor()},this)},context:this}}],buttons:[{title:s("Close"),type:"cancel"}]});a.on("close",this.showEditor,this);a.show()},showEditor:function(){this._editor.show()}},{CSS_PREFIX:"sqs-connected-account",ATTRS:{model:{},editable:{value:true,validator:i.Lang.isBoolean}}})},"1.0",{requires:["base","squarespace-connected-account-configs","squarespace-connected-account-editors","squarespace-connected-account-template","squarespace-dialog","squarespace-models-connected-accounts","squarespace-social-authenticator","squarespace-ui-templates","squarespace-widgets-confirmation","squarespace-widgets-information","widget","widget-child"]})},"./src/main/webapp/universal/scripts-v6/content-collection-bulk-actionable.js":function(e,t,a){var o=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var l=a("./src/main/webapp/universal/src/shared/i18n/index.ts").pluralize;var c=a("./src/main/webapp/frontend/packages/enums/RecordType.js");var i=a("./src/main/webapp/frontend/packages/enums/WorkflowStates.js");YUI.add("squarespace-content-collection-bulk-actionable",function(r){r.namespace("Squarespace.Mixins");r.Squarespace.Mixins.ContentCollectionBulkActionable=r.Base.create("ContentCollectionBulkActionable",r.Base,[],{initializer:function(){this._renderHandle=r.Do.after(this._renderActionTray,this,"renderUI",this);this._bindHandle=r.Do.after(this._bindActionTray,this,"bindUI",this)},destructor:function(){r.Lang.isValue(this._actionTray)&&this._actionTray.destroy(true);this._actionTray=null;if(this._loadEventHandle){this._loadEventHandle.detach();this._loadEventHandle=null}this._renderHandle.detach();this._bindHandle.detach()},_renderActionTray:function(){var e=r.Squarespace.NodeUtils.getClosestScrollingAncestor(this.get("contentBox"));if(!e)return;var t=this.get("actionTrayCtor");this._actionTray=new t({"strings.title":o("{count} {label} Selected"),buttons:this._getTrayButtons(),render:e.ancestor(),scrollNode:e})},_bindActionTray:function(e){this._loadEventHandle=this.get("model").after("load",function(){r.Lang.isValue(this._actionTray)&&this._syncActionTray()},this);this.get("multiple")&&this.after("selectedChange",function(e){1!==e.newVal&&1!==e.prevVal||this._syncActionTray()})},_syncActionTray:function(){this._actionTray.set("buttons",this._getTrayButtons())},_getButtonConfig:function(){var e=this._buttonConfigCache;if(e)return e;this._buttonConfigCache={selection:{$valueFn:function(e){if(1===this.get("selected"))return{label:o("Unselect All"),action:this.deselectAll,context:this,className:"light no-frame"};return{label:o("Select All"),action:this.selectAll,context:this,className:"light no-frame"}}.bind(this)},moveToCollection:{label:o("Move"),action:this.moveSelected,context:this,className:"dark no-frame"},remove:{label:o("Remove"),action:this.removeSelected,context:this,className:"dark no-frame"},hide:{label:o("Hide"),action:this.hideSelection,context:this},show:{label:o("Show"),action:this.showSelection,context:this},moveToBeginning:{label:o("Move To Top"),action:this.moveSelection.bind(this,false),context:this},moveToEnd:{label:o("Move To Bottom"),action:this.moveSelection.bind(this,true),context:this},schedule:{label:o("Schedule"),action:this.scheduleSelection,context:this}};return this._getButtonConfig()},moveSelection:function(t){var a=this.get("selection");var e=this.get("selection").toJSON().map(function(e){return e.get("item")});var i=null;i=t?this.get("collection").items.size()-e.length:0;this.get("model").items.reorderItems(e,i,function(e){if(e){false;new r.Squarespace.Widgets.Confirmation({"strings.title":o("Something Went Wrong"),"strings.message":o("There was an error performing the desired action.The system administrators have been notified.")});return}this._uiMoveSelection(a,t)}.bind(this))},_uiMoveSelection:function(e,t){false},hideSelection:function(){var e=this.get("selection");var a=new r.Parallel;e.each(function(e){var t=e.get("item");t.set("workflowState",i.DRAFT);t.save({source:"bulk-save-operation"},a.add())});a.done(function(){new r.Squarespace.Widgets.Information({"strings.title":o("Save Successful"),"strings.message":o("The selected items have been successfully hidden.")});this.deselectAll()}.bind(this))},showSelection:function(){var e=this.get("selection");var a=new r.Parallel;e.each(function(e){var t=e.get("item");t.set("workflowState",i.PUBLISHED);t.save({source:"bulk-save-operation"},a.add())});a.done(function(){new r.Squarespace.Widgets.Information({"strings.title":o("Save Successful"),"strings.message":o("The selected items have been successfully shown.")});this.deselectAll()}.bind(this))},scheduleSelection:function(){new r.Squarespace.Widgets.Confirmation({"strings.title":o("Not Yet Implemented"),"strings.message":o("This feature has not yet been implemented!")})},_getTrayButtons:function(){var t=this._getButtonConfig();var e=this.get("buttonsOrder").map(function(e){return t[e]}).filter(function(e){return!!e});return r.Squarespace.ObjectBuilder.makeArray(e)},updateActionTray:function(){this._registerTimer(r.later(0,this,function(){var e=this.get("selection");var t=0;e&&(true===this.get("multiple")?1===e.size()&&e.item(0)===this.get("activeDescendant")||(t=e.size()):e!==this.get("activeDescendant")&&(t=1));this._actionTray.set("count",t)}))},removeSelected:function(){var e=this.get("selection");e&&new r.Squarespace.Widgets.Confirmation({"strings.title":o("Remove Selected?"),"strings.message":o("Are you sure you wish to remove your selection? This action cannot be undone.")}).on("confirm",function(){this.removeItems(e)},this)},removeItems:function(e){var t=[];e.each(function(e){e.get("item").get("id")&&t.push(e.get("item"));e.set("selected",0);e.destroy()},this);t.length>0&&this.get("model").items.removeItems(t)},moveSelected:function(){var i=this.get("model");var e=this.get("multiple");var n=new r.Squarespace.EditingDialog({width:380,height:300,overlay:.5,style:"flyout",savingText:e&&l({one:"Moving Item…",other:"Moving Items…"},this.get("selection").size()),buttons:[{type:"cancel",title:o("Cancel")},{type:"moveItems",title:e&&l({one:"Move Item…",other:"Move Items…"},this.get("selection").size())}],tabs:[{title:o("Select Destination Collection"),scroll:true,icon:"/universal/images-v6/icons/icon-import-16-light.png",fields:[{ctor:r.Squarespace.DialogFields.ContentSelector,config:{name:"content-selector",showCollectionTagsAndCategories:false,collectionFilter:this._getMovementCandidateFilter(),excludeCollectionIds:[i.get("id")]}}]}]});n.on("show",function(){this.set("dragSelectionEnabled",false)},this);n.on("dismiss",function(){this.set("dragSelectionEnabled",true)},this);n.on("button-moveItems",function(){var e=n.getField("content-selector").get("data");r.Lang.isArray(e)&&(e=e[0]);if(!e){new r.Squarespace.Widgets.Alert({"strings.title":o("No Collection Selected"),"strings.message":o("Please select a collection to move the selected items to.")});return}n.showSaveOverlay();n.updateTitle(r.Squarespace.DialogStates.SAVING);r.Squarespace.ContentCollectionCache.getCollectionById(e.id,function(a){var s=[];var e=this.get("selection");e.each(function(e){s.push(e.get("item"))},this);a._fetchItemCount(a.get("id")).then(function(e){var t=r.Squarespace.Upsell.getMaxItemCountForCollection(a);s.length+e>t?new r.Squarespace.Widgets.Alert({"strings.title":o("Move Cancelled"),"strings.message":o("Size limit of destination will be exceeded if selected items are moved.")}).on("confirm",function(){n.cancel()}):i.items.moveItems(s,a,r.bind(function(e,t){n.cancel();var a=s.some(function(e){return e.get("recordType")===c.STORE_ITEM});if(e)new r.Squarespace.Widgets.Alert({"strings.title":o("Move Failed"),"strings.message":o("{error} Please try again.",{error:e.error})}).on("confirm",function(){n.cancel()});else if(t.numOfUrlConflictsFixed>0&&a){var i;i=1===s.length?o("The product you moved has a new URL. Edit the product to customize it."):l({one:"One of the products you moved has a new URL. Edit the product to customize it.",other:"Some of the products you moved have new URLs. Edit the products to customize them."},t.numOfUrlConflictsFixed);new r.Squarespace.Widgets.Alert({"strings.message":i}).on("confirm",function(){n.cancel()})}},this))}).catch(function(e){new r.Squarespace.Widgets.Alert({"strings.title":o("Move Cancelled"),"strings.message":o("Something went wrong while moving items. Please try again.")}).on("confirm",function(){n.cancel()})})},this)},this);n.show()},_getMovementCandidateFilter:function(){var e=this.get("model").getTemplateConfiguration();return r.Squarespace.ContentCollectionUtils.getCollectionFilter(e.get("collectionType"),e.get("ordering"))},_hasValidCollectionsToMoveTo:function(){return r.Squarespace.ContentCollectionUtils.filterCollections(this._getMovementCandidateFilter(),[this.get("model").get("id")]).length>0},_buttonsOrderValueFn:function(){var e=[];this.get("multiple")&&e.push("selection");this.get("moveable")&&this._hasValidCollectionsToMoveTo()&&e.push("moveToCollection");e.push("remove");return e}},{ATTRS:{showActionTray:{value:true},moveable:{value:false},multiple:{value:true},actionTrayCtor:{value:r.Squarespace.Widgets.ActionTray},buttonsOrder:{valueFn:"_buttonsOrderValueFn"}}})},"1.0",{requires:["base","squarespace-content-collection-utils","squarespace-dialog","squarespace-models-content-collection","squarespace-node-utils","squarespace-object-builder","squarespace-tray","squarespace-widgets-alert","squarespace-widgets-confirmation","squarespace-widgets-information","squarespace-upsell-product-violations"]})},"./src/main/webapp/universal/scripts-v6/content-collection-utils.js":function(e,t,a){var r=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var i=a("./src/main/webapp/universal/src/shared/utils/TemplateVersionUtils.js");var o=a("./src/main/webapp/universal/src/apps/App/shared/stores/TemplateStore.js");var s=a("./src/main/webapp/universal/src/apps/App/shared/stores/FeaturesStore.js");var n=a("./src/main/webapp/universal/src/apps/App/shared/stores/TemplateInstallationsStore.js");var l=a("./src/main/webapp/frontend/packages/enums/Features.js");var u=a("./src/main/webapp/frontend/packages/enums/CollectionTypes.js");var d=a("./src/main/webapp/frontend/packages/enums/FolderBehavior.js");YUI.add("squarespace-content-collection-utils",function(c){c.namespace("Squarespace");c.Squarespace.ContentCollectionUtils={groupCollectionsByTypeName:function(e){var t={};for(var a=0;a<e.length;a++){var i=e[a];if(i.get("isDemoCollection"))continue;var s=i.get("typeName");if(!t[s]){var n=o.getState().collectionConfigs[s];t[s]={title:n?n.title:r("Unknown"),collections:[]}}t[s].collections.push(e[a])}return c.Object.values(t)},getIconClassNames:function(e){var t=e.getTemplateConfiguration();var a="";t&&t.get("supported")&&(a=t.get("icon"));""===a&&t&&t.get("collectionType")===u.TEMPLATE_PAGE&&(a="template-page");""===a&&(a=e.get("typeName"));return a},filterCollections:function(n,r){var o=["collectionType","ordering","folder","index"];var l=function(e,t,a,i){var s=-1!==o.indexOf(i);if(s)return c.Lang.isValue(t)&&t.get(i)===a;return e.get(i)===a};return c.Squarespace.ContentCollectionCache.filter(function(a){if(c.Lang.isArray(r)&&-1!==r.indexOf(a.get("id")))return false;if(a.get("isDemoCollection")&&a.get("type")!==u.TEMPLATE_PAGE)return false;var e=true;var i=a.getTemplateConfiguration();for(var s in n){var t=n[s];c.Lang.isArray(t)||(t=[t]);e=c.Array.some(t,function(e,t){return l(a,i,e,s)});if(!e)break}return e})},getCollectionFilter:function(e,t){if(e===u.PRODUCTS)return{collectionType:e};return{collectionType:e,ordering:t}},isTemplatePage:function(e){return e.get("type")===u.TEMPLATE_PAGE},isIndex:function(e){var t=e.getTemplateConfiguration();return t&&t.get("folderBehavior")===d.INDEX},isFolder:function(e){var t=e.getTemplateConfiguration();return t&&t.get("folder")},isVanillaFolder:function(e){return this.isFolder(e)&&!this.isIndex(e)&&!this.isVariation(e)},isVariation:function(e){var t=e.getTemplateConfiguration();return t&&t.get("variation")},isAdjustablePageSizeCollection:function(e){var t=o.getCollectionConfig(e.get("typeName"));var a=t&&t.forcePageSize;var i=e.get("type")===u.COLLECTION_TYPE_GENERIC;var s=this._getCollectionOrdering(e)===c.Squarespace.CollectionOrdering.CHRONOLOGICAL;return!a&&!this.isIndex(e)&&!this.isFolder(e)&&i&&s},isBlog:function(e){if(!this.isGenericOrProduct(e))return false;if(this.isFolder(e)||this.isIndex(e))return false;var t=this._getCollectionOrdering(e);return t===c.Squarespace.CollectionOrdering.CHRONOLOGICAL},isGallery:function(e){if(!this.isGeneric(e))return false;if(this.isFolder(e)||this.isIndex(e))return false;var t=this._getCollectionOrdering(e);return t===c.Squarespace.CollectionOrdering.USER},_getCollectionOrdering:function(e){return e.get("ordering")||e.getTemplateConfiguration().get("ordering")},isSupportedByBookmarklet:function(e){return!this.isIndex(e)&&!this.isFolder(e)&&e.get("type")===u.COLLECTION_TYPE_GENERIC&&this._getCollectionOrdering(e)===c.Squarespace.CollectionOrdering.CHRONOLOGICAL},hasSupportForInjectableCodePerItem:function(e){return!this.isIndex(e)&&!this.isFolder(e)&&e.get("type")===u.COLLECTION_TYPE_GENERIC&&this._getCollectionOrdering(e)===c.Squarespace.CollectionOrdering.CHRONOLOGICAL},hasSupportForSyndication:function(e){return!this.isIndex(e)&&!this.isFolder(e)&&e.get("type")===u.COLLECTION_TYPE_GENERIC&&this._getCollectionOrdering(e)===c.Squarespace.CollectionOrdering.CHRONOLOGICAL},isDemoCollectionId:function(e){return o.isDemoCollectionId(e)},isGeneric:function(e){var t=e.getTemplateConfiguration();var a=u;if(!t)return false;return t.get("collectionType")===a.COLLECTION_TYPE_GENERIC},isPortfolio:function(e){var t=e.getTemplateConfiguration();var a=u;if(!t)return false;return t.get("collectionType")===a.PORTFOLIO},isSevenOneCollectionType:function(e){if(!i.isSevenOne())return false;if(!e)return false;return c.Squarespace.ContentCollectionUtils.isPage(e)||c.Squarespace.ContentCollectionUtils.isGeneric(e)||c.Squarespace.ContentCollectionUtils.isPortfolio(e)},isGenericOrProduct:function(e){var t=e.getTemplateConfiguration();var a=u;if(!t)return false;return false===t.get("folder")&&(t.get("collectionType")===a.PRODUCTS||t.get("collectionType")===a.COLLECTION_TYPE_GENERIC)},isProduct:function(e){var t=e.getTemplateConfiguration();var a=u;if(!t)return false;if(e.get("isDemoCollection"))return false;return false===t.get("folder")&&t.get("collectionType")===a.PRODUCTS},isPage:function(e){var t=e.getTemplateConfiguration();var a=u;if(!t)return false;return false===t.get("folder")&&t.get("collectionType")===a.COLLECTION_TYPE_PAGE},isNotCalendar:function(e){var t=e.getTemplateConfiguration();if(t.get("ordering")===c.Squarespace.CollectionOrdering.CALENDAR)return false;return true},usesDisplayIndex:function(e){return[c.Squarespace.CollectionOrdering.MUSIC_ALBUM,c.Squarespace.CollectionOrdering.USER].includes(e)},getIdentifierForCollection:function(e){if(!c.Lang.isValue(e))return null;var t=e.get("typeName");if(!t&&e.get("type")===u.COLLECTION_TYPE_PAGE){e.set("typeName","page");t="page"}var a=e.get("type");if(a===u.COLLECTION_TYPE_GENERIC){var i=e.get("ordering");if(!c.Lang.isValue(i)){var s=o.getCollectionConfig(t);var n=o.getPageConfig(t);var r=s||n;i=r.ordering}if(c.Squarespace.ContentCollectionUtils.isIndex(e))return"INDEX";if(i===c.Squarespace.CollectionOrdering.USER)return"GALLERY";if(i===c.Squarespace.CollectionOrdering.CHRONOLOGICAL)return"BLOG";if(i===c.Squarespace.CollectionOrdering.CALENDAR)return"CALENDAR";if(i===c.Squarespace.CollectionOrdering.MUSIC_ALBUM)return"MUSIC_ALBUM";if(i===c.Squarespace.CollectionOrdering.KNOWLEDGE_BASE)return"KNOWLEDGE_BASE"}if(a===u.COLLECTION_TYPE_PAGE)return"PAGE";if(a===u.PRODUCTS)return"PRODUCT";if(a===u.TEMPLATE_PAGE)return"TEMPLATE_PAGE"},isOverPageLimit:function(){var e=c.Squarespace.ContentCollectionCache.filter(function(e){return!e.get("isDemoCollection")&&!e.getTemplateConfiguration().get("folder")&&e.get("enabled")}).length;return e>s.getLimit(l.ADD_PAGES)},isHomepage:function(e){var t=n.getHomepageCollectionId();return t===e},containsHomepage:function(e){var t=c.Squarespace.Singletons.TemplateNavigationList.getItemByCollectionId(e);var a=t.get("children");if(a.isEmpty())return false;var i=a.toJSON().filter(function(e){return c.Squarespace.ContentCollectionUtils.isHomepage(e.collectionId)||c.Squarespace.ContentCollectionUtils.containsHomepage(e.collectionId)});return!!i.length}}},"1.0",{requires:["squarespace-models-content-collection"]})},"./src/main/webapp/universal/scripts-v6/content-item-grid.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var o=a("./src/main/webapp/universal/src/apps/App/shared/stores/TemplateStore.js");var n=a("./src/main/webapp/universal/src/apps/App/shared/utils/contentItemUrlRouter.js");var s=a("./src/main/webapp/universal/src/apps/App/shared/utils/ContentItemAPI.js");var l=a("./src/main/webapp/frontend/packages/enums/WorkflowStates.js");var u=a("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/ContentBrowserAPI.js").default;var d=a("./src/main/webapp/universal/src/shared/utils/commerce/analytics/trackVariantImages.ts");var p=a("./src/main/webapp/universal/src/shared/utils/commerce/analytics/trackProductEditor.ts");var h=a("./src/main/webapp/universal/src/shared/utils/commerce/analytics/mapProductTypeToString.ts");var g=a("./src/main/webapp/universal/src/shared/utils/commerce/analytics/types.ts");YUI.add("squarespace-content-item-grid",function(c){c.namespace("Squarespace");var t=46;var a=8;var r=c.Squarespace.ContentItemGrid=c.Base.create("ContentItemGrid",c.Squarespace.Widgets.SSWidget,[c.WidgetParent,c.WidgetChild,c.Squarespace.Mixins.ContentCollectionBulkActionable,c.Squarespace.Mixins.AddContentItemHandlerMixin],{initializer:function(e){if(!this.get("model"))throw new Error('ContentItemGrid: Missing attribute "model".');this.publish("itemSaved",{emitFacade:true,bubbles:true});this.publish("addChildComplete",{emitFacade:true});this._workflow=new c.Squarespace.LicensedAssets.Workflow},destructor:function(){this.get("model").get("destroyed")||this.get("model").items.detach(this.get("id")+"|*");this.get("rendered")&&this._ddDelegate.destroy();this._resizeEmitter&&this._resizeEmitter.destroy();this._uploader&&this._uploader.destroy();this._workflow.destroy();this._workflow=null},renderUI:function(){r.superclass.renderUI.call(this);if(this.get("loadByViewport")){var e=this.get("contentBox").ancestor(function(e){return e.getComputedStyle("overflowY").match(/scroll|auto/)});e&&!e.test("html,body")||(e=c.one(c.config.win));this._scrollEl=e}},bindUI:function(){r.superclass.bindUI.call(this);var e=this.get("contentBox");var t=this.get("id");var a=this.get("model").items;this._setupDragBehaviors();this.on("*:adobe-image-editor-start",function(){this.set("keyBindingsEnabled",false);this.deselectAll()},this);this.on("*:adobe-image-editor-finish",function(){this.set("keyBindingsEnabled",true)},this);this.on("*:remove",function(e){this.removeItems(new c.ArrayList(e.target))},this);this.on("*:purchaseRequest",this._onPurchaseRequest,this);this.on("*:licensingDetails",this._onLicensingDetails,this);this._workflow.on("downloadRequest",this._onDownloadRequest,this);this._workflow.on("imagePicked",this._onImagePicked,this);this._resizeEmitter=new c.Squarespace.ResizeEmitter;this._resizeEmitter.on("resize",this._refreshStylesheet,this);this.after(["minMarginChange","imageSizeChange"],function(){this._refreshStylesheet();this._refreshImages()},this);this._ddDelegate.on("reorder:reordered",this._onDDReordered,this);c.on(t+"|keydown",this._onKeydown,c.config.doc,this);this.get("showActionTray")&&this.on("selectionChange",function(e){e.stopPropagation();this.updateActionTray()},this);this.on("*:onSelect",this._onSelect);this.get("showAddIcon")&&this.get("boundingBox").delegate("click",this.handleAddContentRequest,".add-item",this);e.delegate("click",function(e){this._uploader||this.handleAddContentRequest()},".empty-state",this);this.after(["addChild","removeChild"],function(){this._checkEmptyState();this._refreshStylesheet();c.soon(this._syncAddIcon.bind(this))},this);this._registerEvent(a.after(t+"|add",function(e){if(!e.model.get("id"))return;if(!e.onReorder&&!e.onUpload){this._addItemWidget(e.model);this.get("loadByViewport")&&this._loadItemImagesInViewport()}},this));this._registerEvent(a.after(t+"|remove",function(e){c.Lang.isValue(e.model)&&e.model.isLicensedAssetPreview()&&this._workflow.trackPreviewRemovalEvent(e.model.get("licensedAssetPreview").assetId);e.onReorder||this._removeItemWidget(e.model)},this));if(this.get("loadByViewport")){this._scrollEl.on("scroll",this._loadItemImagesInViewport,this);this._resizeEmitter.on("resize:end",this._loadItemImagesInViewport,this)}this._registerEvent(this.get("model").after("idChange",function(){this._uploader&&this._uploader.set("uploadURL",this._getUploadURL())},this))},_onSelect:function(e){var a=e.target;if(this.get("selected")>0){var i;if(e.shiftKey){i=this.get("selection");var t=this.toJSON();t=t.sort(function(e,t){var a=e.get("item").get("displayIndex");var i=t.get("item").get("displayIndex");return a-i});var s=t.map(function(e,t){if(i.indexOf(e)>-1)return t;if(e===a)return t;return null}).filter(function(e){return null!==e});var n=Math.min.apply(Math,s);var r=Math.max.apply(Math,s);for(var o=0;o<t.length;o++){var l=t[o];n<=o&&o<=r&&l.set("selected",1)}return}if(!e.shiftKey&&!e.ctrlKey&&!e.metaKey){i=this.get("selection");i.isEmpty()||i.each(function(e){if(e===a)return;e.set("selected",0)})}}a.set("selected",0!==a.get("selected")?0:1)},syncUI:function(){r.superclass.syncUI.call(this);var e=this.get("contentBox");this._clearElements();this._widgetMap={};var t=this.get("model");var a=t.items;this._stylesheet||(this._stylesheet=c.Node.create('<style type="text/css"></style>'));this.get("boundingBox").appendChild(this._stylesheet);var i=t.get("typeName");i&&e.addClass("collection-type-"+i);var s=this.get("collectionConfiguration").get("acceptTypes");var n=false;c.Array.each(s,function(e){var t=o.getCustomType(e);var a=!!t&&"image"===t.base;("image"===e||a)&&(n=true)});if(n){this._uploader=this._createUploader();this._uploader.render(e)}this._validateItemsDisplayIdx(a);a.each(function(e,t){this._addItemWidget(e)},this);this._ddDelegate.syncTargets();this._checkEmptyState();this._refreshStylesheet();if(this.get("showAddIcon")){this._addIconEl||(this._addIconEl=c.Node.create('<button class="add-item" tabindex="-1"></button>'));this._syncAddIcon();this.get("boundingBox").append(this._addIconEl)}this.get("loadByViewport")&&this._loadItemImagesInViewport();this._updateUploaderLimit()},_syncAddIcon:function(){var e=this.get("contentBox");this._addIconEl&&this._addIconEl.setStyle("marginRight",e.get("offsetWidth")-e.get("clientWidth"))},requestImageRenderingSync:function(){this.get("loadByViewport")&&this._loadItemImagesInViewport();this._refreshStylesheet();this.each(function(e){var t=e.get("contentBox").one("img");t&&t.loader&&t.loader.fire("refresh")},this)},_validateItemsDisplayIdx:function(e){var a=[];e.each(function(e,t){e.get("displayIndex")!==t&&a.push({item:e,displayIndex:t})});if(0===a.length)return;var t=this._shouldCommitDisplayIndexErrors(a[0].item);for(var i=0;i<a.length;i++){this.LOG.warn("Need to update %s with (old: %s) (new: %s)",a[i].item.get("id"),a[i].item.get("displayIndex"),a[i].displayIndex);if(t){this.LOG.warn("Committing display index change...");a[i].item.set("displayIndex",a[i].displayIndex);a[i].item.save()}}c.Squarespace.Logger.log("updatedDisplayIndex",{committed:t,modelName:this.get("model").name,numberOfObjectsToUpdate:a.length})},_shouldCommitDisplayIndexErrors:function(e){return e.get("recordType")!==c.Squarespace.RecordType.STORE_ITEM},removeItems:function(e){var a=this.get("model");var i=this.get("onDelete");var s=function(){return null};var t=c.bind(function(){var t=[];e.each(function(e){if(e.get("item").get("id")){t.push(e.get("item"));e.remove()}},this);t.length>0&&a.items.removeItems(t,s,i)},this);if(e.size()===a.items.size())t();else{var n=e.item(0).get("boundingBox");var r=[];while(c.Widget.getByNode(n)){var o=n.plug(c.Squarespace.PositionAnimator).positionAnimator;o.hold();r.push(o);n=n.next()}t();c.Array.each(r,function(e){e.release()})}this._updateUploaderLimit()},_onDownloadRequest:function(e){var t=e.request;var a=t.get("url");var i=t.get("licensedAssetPreview");var s=t.get("licensedAssetId");var n=null;if(c.Lang.isValue(this._lastActivePreview)){n=this._lastActivePreview.get("item").get("displayIndex");this.removeItems(new c.ArrayList(this._lastActivePreview))}this._saveFromUrl(a,i,s,n)},_onImagePicked:function(e){e.cloneItemId&&this._uploadPreflight(function(){var a=this.get("model");s.copy(e.cloneItemId,l.PUBLISHED,a.get("id")||null).then(function(e){var t=new c.Squarespace.Models.ContentItem(c.merge(e.data,{displayIndex:a.get("nextDisplayIndex")}));this.get("model").items.add(t)}.bind(this))}.bind(this))},_saveFromUrl:function(e,t,a,i){var s={};if(this._uploader){this._uploadImageProcessor(s);c.Lang.isValue(i)&&(s.postData.index=i);this._addImagePlaceholder(s);c.Lang.isValue(t)&&(s.postData.licensedAssetPreview=t);c.Lang.isValue(a)&&(s.postData.licensedAssetId=a);s.postData.fileUrl=e;this._uploadPreflight(function(){s.postData.collectionId=this.get("model").get("id");c.Data.post({url:this._getUploadURL(),data:s.postData,success:function(e){this._imageUploadComplete(s,e);this._uploader._processResponse(e,s)}},this)}.bind(this))}},_uploadPreflight:function(e){var t=this.get("uploadPreflight");c.Lang.isValue(t)?t(e):e()},_onPurchaseRequest:function(e){var t=e.target.get("item");var a=t.get("licensedAssetPreview");var i=t.get("assetUrl");this._lastActivePreview=e.target;this._workflow.showPurchaseDetails(a,i)},_onLicensingDetails:function(e){var t=e.target.get("item");var a=t.get("licensedAssetId");var i=t.get("assetUrl");this._workflow.showLicensingDetails(a,i)},_createNewContentItemAndShowEditor:function(e,t){var a=this.get("itemEditorOptions");if(e.customContent&&"licensed"===e.customContent.customType){this._lastActivePreview=null;this._workflow.showImagePicker();c.Lang.isFunction(t)&&t();return}e.recordType===c.Squarespace.RecordType.IMAGE&&c.Object.getValue(a,["variant"])===c.Squarespace.ContentItemEditorVariants.IMAGE_ALT_TEXT&&(a.variant=c.Squarespace.ContentItemEditorVariants.MINIMAL);if(e.recordType===c.Squarespace.RecordType.IMAGE&&a.variant===c.Squarespace.ContentItemEditorVariants.MINIMAL&&c.Lang.isValue(this._uploader)){this._uploader.openFileSelectDialog();c.Lang.isFunction(t)&&t();this._registerEvent(this._uploader.after(["uploadcomplete","uploadcancel"],function(){this._uploader.destroy(true);this._uploader=this._createUploader();this._uploader.render(this.get("contentBox"))},this));return}var i=this.get("model");var s;if(c.instanceOf(this.get("model"),c.Squarespace.Models.ContentCollection)){s=new c.Squarespace.Models.ContentItem(c.merge(e,{displayIndex:i.get("nextDisplayIndex"),collectionId:i.get("id")}));if(c.Squarespace.ContentItemUtils.isStandardGalleryItem(s,i)){s.save(function(){u.showCollectionItemSettingsEditor(s.getAttrs(),null,true);c.Lang.isFunction(t)&&t()});return}}else s=new c.Squarespace.Models.ContentItem(c.merge(e,{displayIndex:i.get("nextDisplayIndex"),collectionId:i.get("collectionId"),parentId:i.get("id")}));s.get("recordType")===c.Squarespace.RecordType.STORE_ITEM&&p.trackSelectProductType(h(s.getAttrs().structuredContent.getAttrs().productType),g.ProductEditor.YUI_EDITOR);var n=new(c.Squarespace.ContentItemEditorFactory.getEditor(s,this.get("itemEditorOptions")))({model:s});var r=s.on("save",function(e){this.fire("itemSaved");c.Object.getValue(e,"options.headers.X-AutoSave".split("."))||i.items.add(s)},this);n.on("visibleChange",function(e){if(!e.newVal){r.detach();s.get("unsaved")?s.destroy({remove:true}):s.isNew()&&s.destroy()}});var o=this.get("itemEditorOptions.defaultWorkflowState");o&&s.set("workflowState",o);n.on("visibleChange",function(e){e.newVal?this.set("keyBindingsEnabled",false):this.set("keyBindingsEnabled",true)},this);if(c.instanceOf(this.get("model"),c.Squarespace.Models.ContentCollection)&&i.isNew()){this._registerEvent(i.on("save",function(){s.set("collectionId",i.get("id"));c.Lang.isFunction(t)&&t();n.show()}));i.save()}else{c.Lang.isFunction(t)&&t();n.show()}},_addItemWidget:function(e){var t=this.get("defaultChildType");var a=new t(c.merge(this.get("contentItemImageOptions"),{item:e,parentModel:this.get("model"),itemEditorOptions:this.get("itemEditorOptions"),preventLoad:this.get("loadByViewport")}));c.Do.before(function(){this.set("keyBindingsEnabled",false);this.deselectAll()},a,"editItem",this);c.Do.after(function(){c.Do.currentRetVal.on("visibleChange",function(e){e.newVal||this.set("keyBindingsEnabled",true)},this)},a,"editItem",this);this._widgetMap[e.get("clientId")]=a;this.add(a);return a},_removeItemWidget:function(e){var t=e.get("clientId");var a=this._widgetMap[t];if(a){a.remove();delete this._widgetMap[t]}},_loadItemImagesInViewport:function(){var e=this._scrollEl;var s=e.get("scrollTop");var n=s+e.get("region").height;var r=[];this.each(function(e){var t=e.get("boundingBox").get("region");var a=t.top;var i=t.bottom;if(a>=s&&a<=n||i>=s&&i<=n){r.push(e);e.set("preventLoad",false)}},this)},_insertChildBeforeUploader:function(t){this._uploader?t.after("render",function(){this._uploader.get("boundingBox").insert(t.get("boundingBox"),"before")},this):t.after("render",function(){var e=this.get("contentBox").get("children").filter(function(e){return e!==t.get("boundingBox").getDOMNode()});e.isEmpty()||e.item(e.size()-1).insert(t.get("boundingBox"),"after")},this)},_createUploader:function(){var a=new c.Squarespace.Uploader({dragAndDropArea:this.get("boundingBox"),multipleFiles:true,autoUpload:true,fileFilters:[{description:i("Images"),extensions:"*.jpg;*.jpeg;*.png;*.gif"}],uploadLimit:this.get("uploadLimit")-this.size(),processFile:c.bind(this._uploadImageProcessor,this),addPlaceholder:c.bind(this._addImagePlaceholder,this),fileComplete:c.bind(this._imageUploadComplete,this),createJob:c.bind(this._createImageProcessingJob,this),selectButtonLabel:this.get("strings.uploadText"),preflight:this._doPreflightThenSetUploadURL.bind(this),uploadURL:this._getUploadURL()});a.after(this.get("id")+"|uploaderror",function(e){var t=e.fileData||a.fileDataFromFile(e.file);t.placeholder.setContent(a.makeDefaultErrorBlock(t));c.Widget.getByNode(t.placeholder).get("item").set("mediaProcessingState",c.Squarespace.MediaProcessingState.ERROR)});return a},_updateUploaderLimit:function(){this._uploader&&this._uploader.set("uploadLimit",this.get("uploadLimit")-this.size())},_doPreflightThenSetUploadURL:function(e){var t=this.get("uploadPreflight")||function(e){e()};t(function(){this._updateUploadURL();e()}.bind(this))},_updateUploadURL:function(){this.uploader&&this.uploader.set("uploadURL",this._getUploadURL())},_getUploadURL:function(){var e=this.get("model");var t=e.get("id");if(c.instanceOf(e,c.Squarespace.Models.ContentCollection))return"/api/galleries/"+t+"/images";return this._getChildItemsUploadURL()},_getChildItemsUploadURL:function(){var e=this.get("model");var t=e.get("id");var a=e.get("recordType");var i=e.get("collectionId");var s=n.getChildImageUploadUrl({recordType:a,parentId:t,collectionId:i});return s},_checkEmptyState:function(){this.isEmpty()?this._renderEmptyState():this._removeEmptyState()},_renderEmptyState:function(){var e=this.get("contentBox");e.addClass("empty");if(this.get("showEmptyState")){e.addClass("show-empty-state");var t=this.get("strings.emptyTitle");var a=this.get("strings.emptyDesc");if(this._uploader)this._uploader.set("selectButtonLabel",'<div class="title">'+t+'</div><div class="desc">'+a+"</div>");else{this._emptyStateEl||(this._emptyStateEl=c.Node.create('<div class="empty-state"><div class="icon"></div><div class="text"><div class="title">'+t+'</div><div class="desc">'+a+"</div></div></div>"));e.append(this._emptyStateEl)}}},_removeEmptyState:function(){var e=this.get("contentBox");if(this.get("showEmptyState")){e.removeClass("show-empty-state");this._uploader?this._uploader.set("selectButtonLabel",this.get("strings.uploadText")):this._emptyStateEl&&this._emptyStateEl.inDoc()&&this._emptyStateEl.remove()}this.get("contentBox").removeClass("empty")},_refreshStylesheet:function(){var e=this.get("boundingBox");var t=e.get("offsetWidth");var a=this.get("defaultChildType");var i="";if(this.isEmpty()){i+=" #"+e.get("id")+".sqs-content-item-grid .sqs-uploader { min-width: 100%; width: 100%; height: 100%; }";i+=" #"+e.get("id")+".sqs-content-item-grid .sqs-uploader-content { width: 100%; height: 100%; margin: 0 auto; padding: 0; } "}else{var s=this.get("imageSize");var n=this.get("minMargin");var r=Math.floor(t/(s+2*n));var o=100/r;s=Math.ceil(t/r)-2*n;var l="."+a.CSS_PREFIX;i+=" #"+e.get("id")+".sqs-content-item-grid "+l+", .sqs-content-item-grid .sqs-uploader { min-width: "+s+"px; width: "+o+"%; }";i+=" #"+e.get("id")+".sqs-content-item-grid .sqs-uploader { height: "+(s+2*n)+"px; }";i+=" #"+e.get("id")+".sqs-content-item-grid "+l+"-content { width: "+s+"px; height: "+s+"px; margin: 0 auto; padding: "+n+"px 0; }";i+=" #"+e.get("id")+".sqs-content-item-grid "+l+"-content .inside { width: "+s+"px; height: "+s+"px; }";i+=" #"+e.get("id")+" "+l+":nth-child("+r+"n) { margin-right: 0; }";i+=" #"+e.get("id")+".sqs-content-item-grid .sqs-uploader-content { width: "+s+"px; height: "+s+"px; margin: 0 auto; padding: "+n+"px 0; } "}this._stylesheet.set("innerHTML",i);this.fire("stylesheetUpdated")},_refreshImages:function(){this.get("contentBox").all("img[data-src]").each(function(e){e.refresh()})},_clearElements:function(){this._addIconEl&&this._addIconEl.inDoc()&&this._addIconEl.remove();this._stylesheet&&this._stylesheet.remove();this._uploader&&this._uploader.destroy();this._removeEmptyState();this.removeAll()},_setupDragBehaviors:function(){var e=this.get("defaultChildType");var t="."+e.CSS_PREFIX;var a={container:this.get("contentBox"),nodes:t,enableDragReorder:true,dragReorderConfig:{selectedClassSelector:t+".selected",enableGrouping:true},enableDragScroll:true,dragConfig:{groups:[this.get("id")]}};this.get("useBoundingBoxAsScrollNode")&&(a.scrollNode=this.get("boundingBox"));this._ddDelegate=new c.SQS.DDWrappers.DD.Delegate(a)},_onKeydown:function(e){if(!this.get("keyBindingsEnabled"))return;if(e.target.ancestor("input, textarea",true))return;if(!this.get("selection"))return;if(e.keyCode===t||e.keyCode===a){this.removeSelected();e.halt()}},_onDDReordered:function(e){var t=e.reordered;var a=t[0].newIndex;var i=c.Array.map(t,function(e){var t=e.node;return c.Widget.getByNode(t).get("item")},this);this.get("model").items.reorderItems(i,a)},_afterAddChild:function(e){c.WidgetParent.prototype._afterAddChild.call(this,e);this._insertChildBeforeUploader(e.child);this._ddDelegate.syncTargets()},_uploadImageProcessor:function(e){var t=this.get("model");var a=this._uploader.fileDataFromFile(e.file);a&&(e.item||(e.item=a.item));var i=e.index;if(e.item)i=e.item.get("displayIndex");else{var s=this._items.length;c.Lang.isNumber(i)&&t instanceof c.Squarespace.Models.ContentCollection?i+=s:i=s}var n={contentType:"image",process:"true",index:i};false;var r=t.get("id");var o=t.get("collectionId");if(o){n.collectionId=o;n.parentItemId=r||t.get("parentId")}else n.collectionId=r;e.postData=n;if(e.invalid){var l=e.invalid[0];new c.Squarespace.Widgets.Alert({"strings.title":l.title,"strings.message":l.message})}},_addImagePlaceholder:function(e){var t=new c.Squarespace.Models.ContentItem({mediaProcessingState:c.Squarespace.MediaProcessingState.QUEUED,displayIndex:e.postData.index,recordType:c.Squarespace.RecordType.IMAGE});this.get("model").items.add(t,{onUpload:true});e.item=t;var a=this._addItemWidget(t);this.get("loadByViewport")&&this._loadItemImagesInViewport();this._updateUploaderLimit();return a.get("contentBox").one(".inside")},_imageUploadComplete:function(e,t){if(e.item){var a=t.media[0];e.item.setAttrs(a);var i=u.getCollection(a.collectionId);if(u.isProducts(i)){var s=this.get("model");d.trackUploadImage({imageId:a.id,productId:s.get("id"),productName:s.get("title"),productType:h(s.get("productType")),productSection:"product-editor",productEditor:g.ProductEditor.YUI_EDITOR})}}},_createImageProcessingJob:function(e,t){if(!t.job){false;return null}if(!e.item){if(window.SQUARESPACE_SENTRY){window.SQUARESPACE_SENTRY.addBreadcrumb({category:"content-item-grid",message:"Image processing job response for image #"+(t&&t.media&&t.media[0]?t.media[0].id:"unknown"),level:"debug"});window.SQUARESPACE_SENTRY.captureMessage("Appears user canceled upload but image was still uploaded.")}return}e.item.setAttrs(t.media[0]);var a=new c.Squarespace.ImageProcessingJob(c.merge(t.job,{started:true}));a.set("collection",this.get("model"));return a},moveSelection:function(e){var a=[];this._moveSelectionAnimatorsToRelease=a;var i=this.get("defaultChildType");this.each(function(e){if(c.instanceOf(e,i)){var t=e.get("boundingBox").plug(c.Squarespace.PositionAnimator).positionAnimator;t.hold();a.push(t)}});c.Squarespace.Mixins.ContentCollectionBulkActionable.prototype.moveSelection.apply(this,arguments)},_uiMoveSelection:function(e,t){var a=this.get("contentBox");e=e.toJSON();t||(e=e.reduce(function(e,t){e.unshift(t);return e},[]));e.forEach(function(e){t?a.append(e.get("boundingBox")):a.prepend(e.get("boundingBox"))});var i=this._moveSelectionAnimatorsToRelease;if(!i){false;return}i.forEach(function(e){e.release()});var s=this.get("boundingBox");var n=null;n=t?s.get("scrollHeight"):0;s.anim({scroll:[0,n]}).run()}},{CSS_PREFIX:"sqs-content-item-grid",ASYNC_DATA:true,ATTRS:{defaultChildType:{value:c.Squarespace.ContentItemImage},model:{validator:function(e){return c.instanceOf(e,c.Squarespace.Models.ContentCollection)||c.instanceOf(e,c.Squarespace.Models.ContentItem)}},collection:{getter:function(){return this.get("model")}},collectionConfiguration:{setter:function(e){if(!c.instanceOf(e,c.Model))return new c.Model(e);return e}},uploadLimit:{value:250},contentItemImageOptions:{value:{}},imageSize:{value:100},minMargin:{value:20},strings:{value:{uploadText:i("Upload images"),emptyTitle:i("Add Items"),emptyDesc:i("This collection is empty. Click here to add your first item.")}},multiple:{value:true},showAddIcon:{value:false},showEmptyState:{value:true},windowScrollOnDrag:{value:false},scrollNode:{value:null},keyBindingsEnabled:{value:true},uploadPreflight:{},loadByViewport:{value:true},useBoundingBoxAsScrollNode:{value:false},onDelete:{value:null}}})},"1.0",{requires:["base","dd-delegate","event-key","squarespace-async-task-synchronizer","squarespace-content-collection-bulk-actionable","squarespace-content-item-image","squarespace-content-item-types-editor","squarespace-content-item-types-selector","squarespace-content-item-utils","@sqs/yui-dd-wrappers/dd-behaviors","@sqs/yui-dd-wrappers/dd-delegate","squarespace-dialog-content-selector","squarespace-dialog-flow","squarespace-dom-emitters-resize","@sqs/yui-dd-wrappers/drag-selection","squarespace-image-loader","squarespace-job-manager","squarespace-jobs","squarespace-licensed-assets-workflow","squarespace-logger","squarespace-models-content-collection","squarespace-models-content-item","squarespace-ss-widget","squarespace-ui-base","squarespace-uploader","squarespace-util-authenticated","squarespace-widgets-alert","widget-child","widget-parent"]})},"./src/main/webapp/universal/scripts-v6/content-item-image.js":function(e,t,a){var r=a("./common/temp/node_modules/@sqs/cookie-cutter/index.js");var l=a("./src/main/webapp/frontend/packages/enums/RecordType.js");var c=a("./src/main/webapp/frontend/packages/enums/WorkflowStates.js");var n=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var u=a("./src/main/webapp/universal/src/shared/dispatchers/alt/index.ts");var d=a("./common/temp/node_modules/alt-utils/lib/ActionListeners.js");var p=a("./src/main/webapp/universal/src/apps/App/shared/actions/ContentItemActions.js");var g=a("./src/main/webapp/universal/src/shared/actions/UploadActions.js");var m=a("./src/main/webapp/universal/src/shared/actions/JobActions.js");var f=a("./src/main/webapp/universal/src/shared/stores/JobStore.js");var v=a("./src/main/webapp/universal/src/shared/utils/uploadToken.js");var b=a("./src/main/webapp/universal/src/shared/utils/buildUploadPostData.js");var S=a("./src/main/webapp/universal/src/shared/constants/UploadModes.js");var y=a("./src/main/webapp/frontend/packages/enums/LicensedAssetSource.js");var _=a("./common/temp/node_modules/react/index.js");var C=a("./common/temp/node_modules/react-dom/index.js");var E=a("./src/main/webapp/universal/src/apps/App/shared/components/ImageEditor/index.js");var w=a("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/ContentBrowserAPI.js").default;var A=a("./src/main/webapp/universal/src/shared/utils/CMSV7Events.js");var T=a("./src/main/webapp/universal/src/shared/utils/commerce/analytics/trackProductEditor.ts");YUI.add("squarespace-content-item-image",function(h){h.namespace("Squarespace");var i={};i[l.TEXT]="text";i[l.IMAGE]="image";i[l.QUOTE]="quote";i[l.LINK]="link";i[l.CHAT]="chat";i[l.AUDIO]="audio";i[l.VIDEO]="video";i[l.REVIEW]="review";i[l.STORE_ITEM]="store_item";i[l.EVENT]="event";i[l.THREAD]="thread";i[l.GALLERY]="gallery";var o={};o[l.TEXT]={confirmationTitle:n("Remove text"),confirmationMessage:n("Are you sure you wish to remove this text?")};o[l.IMAGE]={confirmationTitle:n("Remove image"),confirmationMessage:n("Are you sure you wish to remove this image?")};o[l.QUOTE]={confirmationTitle:n("Remove quote"),confirmationMessage:n("Are you sure you wish to remove this quote?")};o[l.LINK]={confirmationTitle:n("Remove link"),confirmationMessage:n("Are you sure you wish to remove this link?")};o[l.CHAT]={confirmationTitle:n("Remove chat"),confirmationMessage:n("Are you sure you wish to remove this chat?")};o[l.AUDIO]={confirmationTitle:n("Remove audio"),confirmationMessage:n("Are you sure you wish to remove this audio?")};o[l.VIDEO]={confirmationTitle:n("Remove video"),confirmationMessage:n("Are you sure you wish to remove this video?")};o[l.REVIEW]={confirmationTitle:n("Remove review"),confirmationMessage:n("Are you sure you wish to remove this review?")};o[l.STORE_ITEM]={confirmationTitle:n("Remove product"),confirmationMessage:n("Are you sure you wish to remove this product?")};o[l.EVENT]={confirmationTitle:n("Remove event"),confirmationMessage:n("Are you sure you wish to remove this event?")};o[l.THREAD]={confirmationTitle:n("Remove thread"),confirmationMessage:n("Are you sure you wish to remove this thread?")};o[l.GALLERY]={confirmationTitle:n("Remove gallery"),confirmationMessage:n("Are you sure you wish to remove this gallery?")};o.FALLBACK={confirmationTitle:n("Remove item"),confirmationMessage:n("Are you sure you wish to remove this item?")};var s=h.Squarespace.ContentItemImage=h.Base.create("ContentItemImage",h.Squarespace.SSWidget,[h.WidgetChild],{initializer:function(){this.publish("adobe-image-editor-start",{emitFacade:true});this.publish("adobe-image-editor-finish",{emitFacade:true});this.publish("remove",{emitFacade:true});this.publish("purchaseRequest",{emitFacade:true});this.publish("licensingDetails",{emitFacade:true});this.publish("image-preview-loaded",{emitFacade:false});this.actionListener=new d(u);this.actionListener.addActionListener(p.CONTENT_BROWSER_DELETE_ITEM,this._onContentBrowserDeleteItem.bind(this))},_onContentBrowserDeleteItem:function(e){this.get("item").get("id")===e&&this.get("item").destroy()},destructor:function(){this.get("item").detach(this.get("id")+"|*");this.get("animation")&&this.get("contentBox").unplug(this.get("animation"));if(this.actionListener){this.actionListener.removeAllActionListeners();this.actionListener=null}if(this._imageEditorEl){C.unmountComponentAtNode(this._imageEditorEl.getDOMNode());this._imageEditorEl.remove(true)}},getDragSelectableRegionNode:function(){return this.get("contentBox").one("img")},isValidMouseDownTarget:function(e){if(this.get("contentBox").one("img"))return!!e.ancestor("img",true);return true},renderUI:function(){var e=this.get("contentBox");e.addClass([s.CSS_PREFIX,"content"].join("-"));var t=i[this.get("item").get("recordType")];"store_item"===t&&(t="product");e.addClass("item-type-"+t);if(r.get("SQUARESPACE_DEBUG_DISPLAY_INDEX")){e.appendChild(h.Node.create('<div class="index">'+this.get("item").get("displayIndex")+"</div>"));e.appendChild(h.Node.create('<div class="itemId">'+this.get("item").get("id")+"</div>"))}e.appendChild(h.Node.create('<div class="inside"></div>'));var a=this._imageEditorEl=h.Node.create('<div class="'+this.getClassName()+'-external-image-editor"></div>');e.append(a)},bindUI:function(){r.get("SQUARESPACE_DEBUG_DISPLAY_INDEX")&&this.get("item").after("displayIndexChange",function(e){this.get("contentBox").one(".index").setHTML(e.newVal)},this);var e=this.get("boundingBox");var t=this.get("contentBox");var a=this.get("id");var i=this.get("item");var s=i.get("items");this._registerEvent(i.after(["titleChange","workflowStateChange","save"],function(e){if(h.Lang.isValue(e.options)&&"mediaFocalPointChange"===e.options.source)return;this.syncUI()},this));this._registerEvent(i.after(["mediaFocalPointChange","assetUrlChange"],function(e){e.source===p.CONTENT_BROWSER_SETTINGS_SAVED&&this.syncUI()},this));this._registerEvent(i.after("workflowStateChange",function(e){e.newVal===c.DELETED&&this.fire("remove")},this));if(this._useFirstChild()){this._currentSyncRequest=null;var n=h.bind(function(t){this._registerEvent(t.after(a+"|mediaProcessingStateChange",function(e){0===s.indexOf(t)&&this.syncUI()},this))},this);s.each(function(e){n(e)},this);this._registerEvent(s.after(a+"|add",function(e){var t=e.model;0===e.index&&t.get("mediaProcessingState")===h.Squarespace.MediaProcessingState.READY&&this.syncUI();n(t)},this));this._registerEvent(s.after(a+"|remove",function(e){0===e.index&&this.syncUI()},this))}else this._registerEvent(i.after(a+"|mediaProcessingStateChange",this.syncUI,this));e.on("click",function(e){this.isValidMouseDownTarget(e.target)&&this.fire("onSelect",{shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,metaKey:e.metaKey})},this);this._hasEditableAction()&&e.on("dblclick",function(e){if(e.metaKey)return;e.halt();this._openEditItem();this.get("item").get("recordType")===l.STORE_ITEM&&T.trackClickEditProduct("collection-panel")},this);this.get("animation")&&t.plug(this.get("animation"),{onlyUseOpacity:true});this.on("animationChange",function(e){e.prevVal&&this.get("contentBox").unplug(e.prevVal);e.newVal&&this.get("contentBox").plug(e.newVal,{onlyUseOpacity:true})},this);t.delegate("click",function(){this.fire("remove")},".image-processing-error a",this);this.after("preventLoadChange",this.syncUI,this)},_hasEditableAction:function(){return this.get("actionOverlayButtons").indexOf(h.Squarespace.ActionOverlayButtons.IMAGE_INFO)>-1},_bindJobs:function(){if(this.actionListener)return;this.actionListener=new d(u);var e=function(e){var t=this.get("item");var a=t.get("id");var i=h.Array.find(e,function(e){var t=f.getJobById(e);return t.data&&t.data.contentItemId&&t.data.contentItemId===a});if(i){t.save();this.actionListener.removeAllActionListeners();this.actionListener=null}}.bind(this);this.actionListener.addActionListener(m.COMPLETE,e)},syncUI:function(){if(this.get("preventLoad"))return;var e=this.get("contentBox");var t=h.bind(function(){this._hideProgressIndicator();this.get("contentBox").one(".inside").empty()},this);var a=h.bind(function(){var e=this.get("item");var t=this._getRenderingImageItem();var a=t?t.get("mediaProcessingState"):h.Squarespace.MediaProcessingState.READY;switch(a){case h.Squarespace.MediaProcessingState.QUEUED:case h.Squarespace.MediaProcessingState.PROCESSING:this._showProgressIndicator({showCancel:true});break;case h.Squarespace.MediaProcessingState.READY:this._showImage(t||e);this.get("showActionOverlay")&&this._showActionOverlay();break;default:if(this._usePlaceholder()){this._showImage(t||e);this.get("showActionOverlay")&&this._showActionOverlay()}else if(this.get("hasFileData"))this._showError();else{this._showImage(new h.Model({assetUrl:"/universal/images-v6/configuration/no-image.png"}));this.set("actionOverlayButtons",[h.Squarespace.ActionOverlayButtons.REMOVE_IMAGE]);this._showActionOverlay()}break}},this);if(this.get("animation")){e.plug(this.get("animation"));e.once("hidden",function(){if(!this.get("destroyed")){t();a()}this._registerTimer(h.later(20+200*Math.random(),this,function(){this.get("destroyed")||e.show()}))},this);e.hide()}else if(!this.get("destroyed")){t();a()}},editItem:function(){var n=this.buildEditor();this.get("item").load({forceReload:true},function e(t,a){if(!t)try{var i=this.get("parentModel");var s=i.get("typeName");A.editCollectionItem({itemId:a.id,collectionType:s,collectionId:i.get("id")})}catch(e){window.SQUARESPACE_SENTRY&&window.SQUARESPACE_SENTRY.captureMessage("track edit collection failed")}n.show()}.bind(this));return n},buildEditor:function(){var e=this.get("item");var t=this.get("itemEditorOptions");this.get("parentModel")instanceof h.Squarespace.Models.ContentItem&&(t=h.merge(t,{parentItem:this.get("parentModel")}));var a=h.Squarespace.ContentItemEditorFactory.getEditor(e,t);var i=new a({model:e,parentDialog:this.get("itemEditorOptions.parentDialog")});this.get("itemEditorOptions.anchorToImageWidget")&&i.set("anchorNode",this.get("boundingBox"));return i},_openEditItem:function(){var e=this.get("item");if(h.Squarespace.ContentItemUtils.isStandardGalleryItem(e,this.get("parentModel"))){if(e.get("mediaProcessingState")===h.Squarespace.MediaProcessingState.QUEUED)return;w.showCollectionItemSettingsEditor(e.getAttrs())}else this.editItem()},_uiSetChildSelected:function(e){this.get("boundingBox").toggleClass("selected",!!e)},_showProgressIndicator:function(e){var t=this.get("contentBox").one(".inside");t.addClass("processing");var a=t.plug(h.Squarespace.Plugin.ProgressSpinner,{show:true,showCancel:e.showCancel,spinnerSize:this.get("progressSpinnerSize")})[h.Squarespace.Plugin.ProgressSpinner.NS];a.once("cancel",function(e){this.fire("remove");if(window.SQUARESPACE_SENTRY){var t=this.get("item");window.SQUARESPACE_SENTRY.addBreadcrumb({category:"content-item-grid",message:(true,t.get("id")),level:"debug"})}},this)},_hideProgressIndicator:function(){var e=this.get("contentBox").one(".inside");if(e&&e.hasClass("processing")){e.removeClass("processing");e.unplug(h.Squarespace.Plugin.ProgressSpinner)}},_showError:function(){var e=h.Node.create('<div class="image-processing-error"><p>'+n("Something went wrong.")+'<br /><a href="#" class="remove">'+n("Remove")+"</a></p></div>");e.one("p a.remove").once("click",function(e){e.halt();this.fire("remove")},this);this.get("contentBox").one(".inside").appendChild(e)},_getRenderingImageItem:function(){if(this._useFirstChild())return this.get("item").get("items").item(0);return this.get("item")},_showImage:function(t){var e=this.get("contentBox");var a=h.Node.create('<img data-load="false" data-src="'+t.get("assetUrl")+'" data-image-dimensions="'+t.get("originalSize")+'" />');e.one(".inside").appendChild(a);a.setStyles({visibility:"hidden"});e.setStyles({backgroundImage:null,backgroundSize:null});if(t.get("hasFileData")&&this._showFocalPoint()){var i=a.plug(h.Squarespace.Plugin.FocalPoint,{focalPoint:t.get("mediaFocalPoint")}).focalPoint;i.on("focalPointChanged",function(e){t.set("mediaFocalPoint",e.focalPoint);t.save({fields:["mediaFocalPoint"],source:"mediaFocalPointChange"})},this);i.on("focalPointChange",function(e){t.set("mediaFocalPoint",e.newVal)})}var s=this._registerTimer(h.later(1e3,this,function(){!this.get("destroyed")&&a.getDOMNode()&&a.inDoc()&&this._showProgressIndicator({showCancel:false})}));a.once("load",function(){s&&s.cancel();this._hideProgressIndicator();var e=this.get("animation");e?this._registerTimer(h.later(20+200*Math.random(),this,function(){if(this.get("destroyed")||!a.getDOMNode()||!a.inDoc())return;a.setStyles({visibility:null});if(e){a.plug(e);a.hide(true);a.show();this._showItemSpecificInformation()}})):a.setStyles({visibility:null});this.fire("image-preview-loaded")},this);a.once("error",function(){s&&s.cancel();a.setAttribute("src","/universal/images-v6/configuration/no-image.png")},this);a.loader||a.plug(h.Squarespace.Loader2,{mode:this.get("imageLoaderMode"),load:true,fixedRatio:this.get("imageLoaderUseFixedRatioRenderer")})},_showItemSpecificInformation:function(){var e=this.get("item");var t=this.get("contentBox").one(".inside");var a=t.one("img");var i=a.get("width");var s=a.get("offsetLeft");var n=a.get("offsetTop");var r;switch(this.get("item").get("recordType")){case h.Squarespace.RecordType.STORE_ITEM:break;case h.Squarespace.RecordType.IMAGE:var o=e.get("workflowState");if(this.get("showWorkflowState")&&o!==h.Squarespace.WorkflowStates.PUBLISHED){var l=h.Node.create('<div class="flag-wrapper"><div class="flag-text">'+h.Squarespace.ContentItemUtils.getWorkflowStateCopy(o)+"</div></div>");l.setStyles({width:i,height:a.get("height"),left:s,top:n});t.append(l)}break;default:var c=h.Node.create('<div class="type-icon"></div>');c.setStyles({top:n+5,left:s+5});t.append(c);var u=e.get("workflowState");if(this.get("showWorkflowState")&&u!==h.Squarespace.WorkflowStates.PUBLISHED){var d=h.Node.create('<div class="flag-wrapper"><div class="flag-text">'+h.Squarespace.ContentItemUtils.getWorkflowStateCopy(u)+"</div></div>");d.setStyles({width:i,height:a.get("height"),left:s,top:n});t.append(d)}var p=this.get("item").get("title");if(p){r=h.Node.create('<div class="information"><div class="title">'+p+"</div></div>");r.setStyles({width:i,left:s,bottom:n});t.append(r);break}}},_addBuyButton:function(e){e.unshift("buy");var t=h.Array.indexOf(e,"edit-image");var a=-1!==t;a&&e.splice(t,1)},_addLicensingButton:function(e){e.unshift("getty")},_showActionOverlay:function(){this._actionOverlay&&this._actionOverlay.destroy();var e=this.get("contentBox");var t=[].concat(this.get("actionOverlayButtons"));var a=this.get("item");if(a.isLicensedAssetPreview())this._addBuyButton(t);else if(a.isLicensedAsset()){var i=h.Squarespace.LicensedAssets.Manager.getById(a.get("licensedAssetId"));i.then(function(e){e.source===y.GETTY&&this._addLicensingButton(t)}.bind(this))}e.plug(h.Squarespace.Plugin.ActionOverlay,{buttons:t,position:this.get("item").get("mediaFocalPoint").y>=.5?"top":"bottom"});var s=this._actionOverlay=e.actionOverlay;var n=h.Squarespace.ActionOverlayButtons.EDIT_IMAGE;s.on("button-"+n,function(e){C.render(_.createElement(E,{imageSrc:this.get("item").get("assetUrl"),onSave:this._onSaveEditedImage.bind(this),onCancel:this._onCloseEditingImage.bind(this),isOpen:true}),this._imageEditorEl.getDOMNode())},this);s.on("button-"+h.Squarespace.ActionOverlayButtons.IMAGE_INFO,function(){this._openEditItem()},this);s.on("button-"+h.Squarespace.ActionOverlayButtons.REMOVE_IMAGE,function(){var e=this.get("item").get("recordType");var t=o[e]?o[e].confirmationTitle:o.FALLBACK.confirmationTitle;var a=o[e]?o[e].confirmationMessage:o.FALLBACK.confirmationMessage;new h.Squarespace.Widgets.Confirmation({"strings.title":t,"strings.message":a}).on("confirm",function(){this.fire("remove")},this)},this);s.on("button-buy",function(){this.fire("purchaseRequest")},this);s.on("button-getty",function(){this.fire("licensingDetails")},this);var r=e.one("img");r&&r.focalPoint&&r.focalPoint.on("focalPointChanged",function(e){s.set("position",e.focalPoint.y>=.5?"top":"bottom")},this);s.render()},_onSaveEditedImage:function(e){var t=this.get("item");var a=v.getUploadToken();var i=b(e,t.get("recordType"),t.get("parentId")?S.CHILD:S.ITEM,{replaceItemId:t.get("id")});Object.keys(i).forEach(function(e){void 0===i[e]&&delete i[e]});this._bindJobs();g.uploadFile(a,"/api/commondata/SaveMedia",i);t.set("mediaProcessingState",h.Squarespace.MediaProcessingState.QUEUED);this._onCloseEditingImage()},_onCloseEditingImage:function(){C.render(_.createElement(E,{imageSrc:this.get("item").get("assetUrl"),onSave:this._onSaveEditedImage.bind(this),onCancel:this._onCloseEditingImage.bind(this),isOpen:false}),this._imageEditorEl.getDOMNode())},_usePlaceholder:function(){var e=h.Squarespace.RecordType;var t=[e.VIDEO,e.TEXT,e.STORE_ITEM];return-1!==t.indexOf(this.get("item").get("recordType"))},_useFirstChild:function(){var e=h.Squarespace.RecordType;var t=[e.STORE_ITEM,e.GALLERY];return-1!==t.indexOf(this.get("item").get("recordType"))},_showFocalPoint:function(){return this.get("item").get("recordType")===h.Squarespace.RecordType.IMAGE}},{CSS_PREFIX:"sqs-content-item-image",ATTRS:{item:{validator:function(e){return h.instanceOf(e,h.Squarespace.Models.ContentItem)}},parentModel:{validator:function(e){return h.instanceOf(e,h.Squarespace.Models.ContentCollection)||h.instanceOf(e,h.Squarespace.Models.ContentItem)}},animation:{value:h.Squarespace.Animations.Fadeable},showActionOverlay:{value:false},actionOverlayButtons:{value:[h.Squarespace.ActionOverlayButtons.IMAGE_INFO,h.Squarespace.ActionOverlayButtons.EDIT_IMAGE,h.Squarespace.ActionOverlayButtons.REMOVE_IMAGE]},showWorkflowState:{value:true},progressSpinnerSize:{value:30},itemEditorOptions:{value:{}},preventLoad:{value:false},imageLoaderMode:{value:"fit"},imageLoaderUseFixedRatioRenderer:{value:false}}})},"1.0",{requires:["base","squarespace-animations","squarespace-commerce-utils","squarespace-content-item-types-editor","squarespace-content-item-utils","squarespace-enum","squarespace-image-loader","squarespace-licensed-assets-manager","squarespace-models-content-collection","squarespace-models-content-item","squarespace-plugin-actionoverlay","squarespace-plugin-focalpoint","squarespace-plugin-progress-spinner","squarespace-ss-widget","squarespace-util","squarespace-widgets-confirmation","widget-child"]})},"./src/main/webapp/universal/scripts-v6/content-item-types/audio.js":function(e,t,a){var n=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-content-item-types-audio",function(i){var e={title:n("Edit {presentationName}"),width:800,height:480,overlay:.5,tabs:[{$include:["tabs.primary.base","tabs.primary.audio"]},{$include:"tabs.options.audio"},{$include:"tabs.location"},{$include:"tabs.social"}],buttons:{$include:"buttons"}};i.namespace("Squarespace.ContentItemEditor");var s=i.Squarespace.ContentItemEditor.Audio=i.Base.create("AudioContentItemEditor",i.Squarespace.ContentItemEditor.Base,[],{_dialogOnReady:function(){s.superclass._dialogOnReady.call(this);var e=this.get("dialog");var t=e.getField("audioTrack");t.on("dataChange",function(e){e.newVal&&this._bindListenersToAudioItem(e.newVal)},this);this._bindListenersToAudioItem(t.get("data"));this._bindFileUploadBehaviors("audioTrack")},_bindListenersToAudioItem:function(e){var a=this.get("dialog");e.on("titleChange",function(e){var t=a.getField("title");t&&""===t.get("data").trim()&&t.set("data",e.newVal)},this);e.get("structuredContent").on("artistNameChange",function(e){var t=a.getField("artistName");t&&""===t.get("data").trim()?t.set("data",e.newVal):t||console.warn("Could not set artistName field, tried to set new data `"+e.newVal+"`.")},this)},getDialogData:function(){var e=s.superclass.getDialogData.call(this);e.audioTrack=this.get("model");e.artistName=e.structuredContent.artistName;return e},sanitizeDialogData:function(e){var t=s.superclass.sanitizeDialogData.call(this,e);i.Array.each(["systemDataId","systemDataOrigin","mediaProcessingState","systemDataSourceType","systemDataVariants","filename"],function(e){t.audioTrack?t[e]=t.audioTrack.get(e):t[e]=null});var a={};t.audioTrack&&(a=t.audioTrack.get("structuredContent").toJSON());t.structuredContent=i.merge(a,{title:t.title,artistName:t.artistName});delete t.audioTrack;delete t.mediaProcessingState;return t}},{ATTRS:{editorConfiguration:{value:e}}})},"1.0",{requires:["squarespace-content-item-types-base"]})},"./src/main/webapp/universal/scripts-v6/content-item-types/base.js":function(e,t,a){var i=a("./common/temp/node_modules/lodash/debounce.js");var c=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/universal/src/apps/App/shared/stores/TemplateStore.js");var n=a("./src/main/webapp/universal/src/apps/App/shared/stores/WebsiteSettingsStore/index.js");var r=a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts");var o=a("./src/main/webapp/frontend/packages/enums/Flag.js");var u=a("./src/main/webapp/universal/src/apps/App/shared/actions/WebsiteSettingsActions.js");var d=a("./src/main/webapp/universal/src/apps/App/shared/actions/ContentItemActions.js");var p=a("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/ContentBrowserAPI.js").default;var h=a("./src/main/webapp/universal/src/shared/utils/CMSV7Events.js");var l=a("./src/main/webapp/universal/src/shared/utils/Loggers.ts");var g=a("./src/main/webapp/universal/src/shared/utils/ExcerptBlankHTMLUtils.js");var m=l.createLogger("content-item dialog","black");YUI.add("squarespace-content-item-types-base",function(l){l.namespace("Squarespace.ContentItemEditor");var a=l.Squarespace.ContentItemEditor.Base=l.Base.create("ContentItemEditor",l.Squarespace.ModelEditorDialog,[],{initializer:function(){if(this.constructor===a)throw new Error("You cannot instantiate the BaseContentItemEditor.");var e=this.get("dialog");var t=this.get("model");e.on("button-duplicate",i(this._confirmAndDuplicate.bind(this),500));e.on("button-saveAndPublish",this._saveAndPublish,this);e.on("remove-requested",this._confirmAndRemoveItem,this);e.on("ready",this._dialogOnReady,this);this._isNew=t.isNew();this._isNew&&this.plug(l.Squarespace.ModelEditorPlugins.AutoSave)},_confirmAndDuplicate:function(){var e=this.get("dialog");var t={};var a=true;var i=e.canClose(this.save.bind(this,t,this._duplicate.bind(this),a),this._duplicate.bind(this),function e(){});true===i&&this._duplicate()},trackDuplicate:function(e){this.trackAction(h.duplicateCollectionItem,e)},_duplicate:function(){var r=this.get("dialog");var o=this.get("model");var e=o.get("collectionId");r.updateTitle(l.Squarespace.DialogStates.LOADING);r.showSaveOverlay();l.Squarespace.ContentCollectionCache.getCollectionById(e,function e(n){d.copy(o.get("id"),l.Squarespace.WorkflowStates.DRAFT).then(function e(t){this.trackDuplicate(o);var a=new l.Squarespace.Models.ContentItem(t);r.hideSaveOverlay();r.fire("duplicate",a);var i=l.Squarespace.ContentItemEditorFactory.getEditor(a);var s=new i({model:a,isDuplicateItemEditor:true});this.fire("duplicate",s);r.on("canceled",function e(){s.show();s.once(["savingClose","nonSavingClose"],function(){n.items.add(a)})});r.cancel()}.bind(this)).catch(function e(t){this._createErrorAlert(c("An error occured while duplicating this item"));r.hideSaveOverlay()}.bind(this))}.bind(this))},_saveAndPublish:function(e){e.halt();var t=this.get("dialog");var a=this.get("model");a.set("workflowState",l.Squarespace.WorkflowStates.PUBLISHED);var i=t.getField("workflow");var s=i.getValue();var n=(new Date).getTime();"draft"!==s.state&&(n=s.date);i.set("data",{state:"published",date:n},{silent:true});t.saveAndClose()},_dialogOnReady:function(){this._bindFileUploadBehaviors("mainImage");this._bindCommentConfirm();this._bindWorkflowDialogFieldChange()},_bindWorkflowDialogFieldChange:function(){var a=this.get("dialog");var e=a.getField("workflow");e&&e.on("dataChange",function(e){if(true===e.silent)return;var t=l.Squarespace.ObjectBuilder.make({buttons:this.get("dialogConfig.buttons")},this.get("dialogConfigContext"),{id:this._isNew?null:this.get("model").get("id"),workflowState:this._getWorkflowStateForString(e.newVal.state),onlySetAttrsOnSave:this.get("onlySetAttrsOnSave")});a.setButtons(t.buttons)},this)},_bindFileUploadBehaviors:function(e){var a=this.get("dialog").getField(e);var i=this.get("model");a&&a.after("dataChange",function(){var e=a.get("data");if(e){var t=a.get("data").get("id");i.get("id")!==t&&i.set("id",t)}else i.get("id")&&i.clearFileData()},this)},_bindCommentConfirm:function(){var e=this.get("dialog").getField("commenting");e&&e.on("dataChange",function(e){var t=n.getState().commentsEnabled;var a="disable"===e.prevVal.state&&"allow"===e.newVal.state;if(t||!a)return;u.save(n.getMergedWebsiteSettings({commentsEnabled:true,commentEnableByDefault:false}),false);new l.Squarespace.Widgets.Confirmation({"strings.title":c("Commenting Enabled"),"strings.message":c("To enable comments on all posts, adjust the default comment option in Comments Settings"),"strings.confirm":c("Go to Settings"),"strings.cancel":c("Ok")}).on("confirm",function(){this.set("autoSaveAnnotation",true);l.Squarespace.Singletons.Location.go("/settings/blogging/comments")},this)},this)},_confirmAndRemoveItem:function(e){var t;var a;var i=this.getPresentationName();var s=this.get("extendedDeleteMessage");var n=this.get("model");if(this._isNew){t=c("Discard {presentationName}",{presentationName:i});a=c("Are you sure you wish to discard this {sub1}?",{sub1:i.toLowerCase()})}else{t=c("Remove {presentationName}",{presentationName:i});a=c("Are you sure you wish to remove this {sub1}? {extended}",{sub1:i.toLowerCase(),extended:s})}new l.Squarespace.Widgets.Confirmation({"strings.title":t,"strings.message":a}).on("confirm",function e(){this._removeItem(n)},this)},_removeItem:function(e){m("Delete item via dialog",{item:e});this.trackAction(h.deleteCollectionItemFromModal,e);p.isEventItem(e.toJSON())&&r.isFeatureEnabled(o.EVENTS_PANEL_70)&&!l.Squarespace.Utils.isDeveloperModeEnabled()?p.deleteItem(e.get("id")):e.destroy({remove:true});this.destroy()},getDialogData:function(){var e=a.superclass.getDialogData.call(this);e.mainImage=this.get("model");e.workflow={state:l.Squarespace.ContentItemUtils.getWorkflowStateIdentifier(e.workflowState),date:e.publishOn};e.commenting={state:l.Squarespace.ContentItemUtils.getCommentStateIdentifier(e.commentState),date:e.commentDisableOn};e.gallery=this.get("model");e.clickthroughUrl&&(e.clickthroughUrl={url:e.clickthroughUrl});l.Squarespace.ContentItemUtils.setDataForCustomType(e,this.getCustomTypeConfiguration(),this);return e},sanitizeDialogData:function(e){delete e.author;delete e.mainImage;delete e.mediaProcessingState;var t=["addedOn","publishOn","updatedOn","commentDisableOn","startDate","endDate"];for(var a=0;a<t.length;a++)l.Lang.isDate(e[t[a]])&&(e[t[a]]=e[t[a]].getTime());e.commentState=l.Squarespace.CommentStates["allow"===e.commenting.state?"ENABLED":"DISABLED"];e.commentDisableOn=e.commenting.date;delete e.commenting;e.workflowState=this._getWorkflowStateForString(e.workflow.state);e.publishOn=e.workflow.date;delete e.workflow;e.tags=e.tags||[];e.categories=e.categories||[];delete e.id;delete e.gallery;l.Lang.isObject(e.clickthroughUrl)&&(e.clickthroughUrl=e.clickthroughUrl.url);l.Squarespace.ContentItemUtils.sanitizeDataForCustomType(e,this.getCustomTypeConfiguration(),this);e.excerpt&&e.excerpt.html&&g.shouldTrimExcerpt(e.excerpt.html)&&(e.excerpt.html=g.trimExcerptHTML(e.excerpt.html));return e},_getWorkflowStateForString:function(e){if("published"===e)return l.Squarespace.WorkflowStates.PUBLISHED;if("scheduled"===e)return l.Squarespace.WorkflowStates.SCHEDULED;if("needsreview"===e)return l.Squarespace.WorkflowStates.NEEDS_REVIEW;if("draft"===e)return l.Squarespace.WorkflowStates.DRAFT},_getTemplateContext:function(){var i=this.get("model").toJSON();var e=this.get("model").get("collectionId");var s=r.isFeatureEnabled(o.NESTED_CATEGORIES);l.Squarespace.ContentCollectionCache.getCollectionById(e,function(e){var t="products"===e.get("typeName");var a=s&&t?"/p/":"/";i.urlPrefix="/"+e.get("urlId")+a;i.collectionType=e.get("typeName")||c("Collection")});i.presentationName=this.getPresentationName();i.model=this.get("model");i.editor=this;i.onlySetAttrsOnSave=this.get("onlySetAttrsOnSave");return i},getTemplateContext:function(){var e=this._getTemplateContext();l.Squarespace.ContentItemUtils.sanitizeTemplateContextForCustomType(e,this.getCustomTypeConfiguration());return e},getPresentationName:function(){var e=this.get("model");var t=e.get("recordType");return l.Squarespace.Enums.RecordType.titleForValue(t)},getCustomTypeConfiguration:function(){var e=this.get("model").get("customContent.customType");if(e){var t=s.getCustomType(e);if(t)return t}return null},_getDialogConfig:function(){var e=l.clone(this.get("editorConfiguration"));l.Squarespace.ContentItemUtils.setConfigurationForCustomType(e,this.getCustomTypeConfiguration(),this);e=l.merge({initialDataByReference:true},e);return e},validateFields:function(){var e=this.get("dialog");var t=e.getField("title");if(t){var a=t.get("data");if(l.Lang.isString(a)&&a.length>200)return{title:c("Title Can't Exceed 200 Characters")}}return null}},{ATTRS:{editorConfiguration:{value:{}},autoSaveAnnotation:{value:false},dialogConfig:{getter:"_getDialogConfig"},dialogConfigContext:{value:l.Squarespace.ContentItemEditorSettings},extendedDeleteMessage:{value:""},isDuplicateItemEditor:{value:false},collection:{}}})},"1.0",{requires:["squarespace-content-item-types-enum-record-type","squarespace-content-item-types-settings","squarespace-content-item-utils","squarespace-dialog-description","squarespace-enum","squarespace-model-editor","squarespace-models-content-collection","squarespace-models-content-item","squarespace-object-builder","squarespace-widgets-confirmation"]})},"./src/main/webapp/universal/scripts-v6/content-item-types/editor.js":function(e,t,a){var i=a("./src/main/webapp/frontend/packages/enums/ProductTypes.js");var r=a("./common/temp/node_modules/@sqs/rum-collector/timing.js");YUI.add("squarespace-content-item-types-editor",function(n){n.namespace("Squarespace");n.Squarespace.ContentItemEditorVariants={MINIMAL:1,DIALOG:3,IMAGE_ALT_TEXT:4};n.Squarespace.ContentItemEditorFactory=new(n.Base.create("ContentItemEditorFactory",n.Base,[],{initializer:function(){this.EDITORS_BY_RECORDTYPE={};this.EDITORS_BY_RECORDTYPE[n.Squarespace.RecordType.TEXT]=n.Squarespace.ContentItemEditor.Text;this.EDITORS_BY_RECORDTYPE[n.Squarespace.RecordType.IMAGE]=n.Squarespace.ContentItemEditor.Image;this.EDITORS_BY_RECORDTYPE[n.Squarespace.RecordType.QUOTE]=n.Squarespace.ContentItemEditor.Quote;this.EDITORS_BY_RECORDTYPE[n.Squarespace.RecordType.LINK]=n.Squarespace.ContentItemEditor.Link;this.EDITORS_BY_RECORDTYPE[n.Squarespace.RecordType.VIDEO]=n.Squarespace.ContentItemEditor.Video;this.EDITORS_BY_RECORDTYPE[n.Squarespace.RecordType.EVENT]=n.Squarespace.ContentItemEditor.Event;this.EDITORS_BY_RECORDTYPE[n.Squarespace.RecordType.GALLERY]=n.Squarespace.ContentItemEditor.Gallery;this.EDITORS_BY_RECORDTYPE[n.Squarespace.RecordType.AUDIO]=n.Squarespace.ContentItemEditor.Audio;this.EDITORS_BY_RECORDTYPE[n.Squarespace.RecordType.KBARTICLE]=n.Squarespace.ContentItemEditor.KBArticle;this.MINIMAL_EDITORS_BY_RECORDTYPE={};this.MINIMAL_EDITORS_BY_RECORDTYPE[n.Squarespace.RecordType.IMAGE]=n.Squarespace.ContentItemEditor.ImageMinimal;this.MINIMAL_EDITORS_BY_RECORDTYPE[n.Squarespace.RecordType.VIDEO]=n.Squarespace.ContentItemEditor.VideoMinimal;this.PRODUCT_IMAGE_MINIMAL_EDITOR=n.Squarespace.ContentItemEditor.ProductImageMinimal;this.PRODUCT_EDITORS_BY_PRODUCTTYPE={};this.PRODUCT_EDITORS_BY_PRODUCTTYPE[i.DIGITAL]=n.Squarespace.ContentItemEditor.ProductDigital;this.PRODUCT_EDITORS_BY_PRODUCTTYPE[i.PHYSICAL]=n.Squarespace.ContentItemEditor.ProductPhysical;this.PRODUCT_EDITORS_BY_PRODUCTTYPE[i.SERVICE]=n.Squarespace.ContentItemEditor.ProductService;this.PRODUCT_EDITORS_BY_PRODUCTTYPE[i.GIFT_CARD]=n.Squarespace.ContentItemEditor.ProductGiftCard},getEditor:function(e,t){r.mark("YUI-stats__Y.Squarspace.ContentItemEditorFactory#getEditor");t=n.Lang.isObject(t)?t:{};var a;var i=e.get("recordType");var s=t;n.Lang.isValue(t.variant)||(s=n.merge({variant:n.Squarespace.ContentItemEditorVariants.DIALOG},t));s.variant===n.Squarespace.ContentItemEditorVariants.IMAGE_ALT_TEXT?a=n.Squarespace.ContentItemEditor.ImageAltText:s.variant===n.Squarespace.ContentItemEditorVariants.MINIMAL?a=i===n.Squarespace.RecordType.IMAGE&&t.parentItem&&t.parentItem.get("recordType")===n.Squarespace.RecordType.STORE_ITEM?this.PRODUCT_IMAGE_MINIMAL_EDITOR:this.MINIMAL_EDITORS_BY_RECORDTYPE[i]:i===n.Squarespace.RecordType.STORE_ITEM&&(a=this.PRODUCT_EDITORS_BY_PRODUCTTYPE[e.get("structuredContent").get("productType")]);a=a||this.EDITORS_BY_RECORDTYPE[i];if(a){r.measure("YUI-stats__Y.Squarspace.ContentItemEditorFactory#getEditor");return a}throw new Error("No ContentItemEditor has been found for this item: "+i)}}))},"1.0",{requires:["squarespace-content-item-types-audio","squarespace-content-item-types-event","squarespace-content-item-types-gallery","squarespace-content-item-types-image","squarespace-content-item-types-kbarticle","squarespace-content-item-types-link","squarespace-content-item-types-product-digital","squarespace-content-item-types-product-giftcard","squarespace-content-item-types-product-physical","squarespace-content-item-types-product-service","squarespace-content-item-types-quote","squarespace-content-item-types-text","squarespace-content-item-types-video","squarespace-util-authenticated"]})},"./src/main/webapp/universal/scripts-v6/content-item-types/enum-record-type.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-content-item-types-enum-record-type",function(e){var t=function(e,a){this.values=e;for(var t=0;t<this.values.length;t++){var i=this.values[t];this[i[0]]=i[1]}var s=this;for(var n in a)(function(t){s[t]=function(){var e=a[t].apply(s,arguments);if(s.values.indexOf(e)>=0)return e[1];return e}})(n)};e.namespace("Squarespace.Enums").RecordType=new t([["TEXT",1,"text",i("Text")],["IMAGE",2,"image",i("Image")],["QUOTE",4,"quote",i("Quote")],["LINK",5,"link",i("Link")],["CHAT",6,"chat"],["AUDIO",7,"audio",i("Track")],["VIDEO",8,"video",i("Video")],["REVIEW",10,"review"],["STORE_ITEM",11,"store_item"],["EVENT",12,"event",i("Event")],["THREAD",13,"thread"],["GALLERY",14,"gallery",i("Gallery")],["BINARY",15,"binary"],["CSSASSET",16,"css-asset"],["TWEAKASSET",17,"tweak-asset"],["DIGITALGOOD",18,"digital-good"],["ATTACHMENT",19,"attachment"],["EXPORT_WORDPRESS",20,"wordpress-export"],["EXPORT_INTERNAL",21,"json-export"],["TWEET",50,"tweet"],["RSS",51,"rss"],["CHECKIN",52,"checkin"],["DELICIOUS",53,"delicious"],["KBARTICLE",54,"kbarticle","KBArticle"]],{valueForString:function(e){for(var t=0;t<this.values.length;t++)if(this.values[t][2]===e)return this.values[t];return null},stringForValue:function(e){for(var t=0;t<this.values.length;t++)if(this.values[t][1]===e)return this.values[t][2];return null},titleForValue:function(e){for(var t=0;t<this.values.length;t++)if(this.values[t][1]===e)return this.values[t][3];return null}})},"1.0",{requires:[]})},"./src/main/webapp/universal/scripts-v6/content-item-types/event.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/universal/src/apps/App/components/SEOContentCollectionTab/actions/SEOContentCollectionTabActions.js");YUI.add("squarespace-content-item-types-event",function(e){e.namespace("Squarespace.ContentItemEditor");var t={title:i("Edit {presentationName}"),width:720,name:"event-post-editor",verticalHeight:"full",overlay:.5,initialDataByReference:true,tabs:[{$include:["tabs.primary.base","tabs.primary.event"]},{$include:"tabs.options.default"},{$include:"tabs.location"},{$include:"tabs.seo"},{$include:"tabs.seoSocial"},{$include:"tabs.social"}],buttons:{$include:"buttons"}};var a=e.Squarespace.ContentItemEditor.Event=e.Base.create("EventContentItemEditor",e.Squarespace.ContentItemEditor.Base,[],{initializer:function(){var a=this.get("dialog");a.on("ready",function(){var e=a.getField("startDate");e.after("dataChange",this._adjustEndDate,this);var t=a.getField("title");t.after("dataChange",this._updateSeoTitle,this)},this)},getDialogData:function(){var e=a.superclass.getDialogData.call(this);var t=e.structuredContent;e.startDate=t.startDate;e.endDate=t.endDate;return e},sanitizeDialogData:function(e){e=a.superclass.sanitizeDialogData.call(this,e);e.structuredContent={startDate:e.startDate,endDate:e.endDate};return e},_updateSeoTitle:function(e){s.updateFieldNoEdit("title",e.newVal)},_adjustEndDate:function(e){var t=this.get("dialog");var a=t.getField("endDate");var i=parseInt(e.prevVal,10);var s=parseInt(e.newVal,10);var n=a.get("data")-i;a.set("data",new Date(s+n).getTime(),{autoUpdate:true})},_getTemplateContext:function(){var e=a.superclass._getTemplateContext.call(this);e.enableFeatured=true;e.enableExcerpt=true;return e}},{ATTRS:{editorConfiguration:{value:t}}})},"1.0",{requires:["base","squarespace-content-item-types-base"]})},"./src/main/webapp/universal/scripts-v6/content-item-types/gallery.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-content-item-types-gallery",function(e){var t={title:i("Edit {presentationName}"),width:800,height:450,overlay:.5,initialDataByReference:true,tabs:[{$include:["tabs.primary.base","tabs.primary.gallery"]},{$include:"tabs.options.default"},{$include:"tabs.location"},{$include:"tabs.social"}],buttons:{$include:"buttons"}};e.namespace("Squarespace.ContentItemEditor").Gallery=e.Base.create("GalleryContentItemEditor",e.Squarespace.ContentItemEditor.Base,[],{},{ATTRS:{editorConfiguration:{value:t}}})},"1.0",{requires:["base","squarespace-content-item-types-base"]})},"./src/main/webapp/universal/scripts-v6/content-item-types/image.js":function(e,t,a){var r=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-content-item-types-image",function(e){e.namespace("Squarespace.ContentItemEditor");var t={title:r("Edit {presentationName}"),width:800,height:510,overlay:.5,initialDataByReference:true,tabs:[{$include:["tabs.primary.base","tabs.primary.image"]},{$include:"tabs.options.image"},{$include:"tabs.location"},{$include:"tabs.social"}],buttons:{$include:"buttons"}};var a=e.Squarespace.ContentItemEditor.Image=e.Base.create("ImageContentItemEditor",e.Squarespace.ContentItemEditor.Base,[],{show:function(e){var t=this.get("dialog");e&&e.getty&&t&&t.on("ready",function(){var e=t.getField("mainImage");e&&e._onLicensedImageSearch()},this);a.superclass.show.call(this)}},{ATTRS:{editorConfiguration:{value:t}}});var i=[{$include:["fields.title",{countHeight:true,className:"thin"}]},{ctor:e.Squarespace.DialogFields.Wysiwyg,config:{name:"body",editorHeight:157,classNames:"major",title:r("Enter an image body…"),isNullable:true}}];var s={name:"imageeditminimal",title:r("Edit {presentationName}"),width:380,height:410,overlay:.5,closeOthers:false,draggable:true,minimal:true,style:"flyout",flyoutPointerDirection:"hidden",fields:[].concat(i,[{$include:["fields.clickthroughUrl",{countHeight:true,condensed:true,disableNewWindow:true}]}]),buttons:{$include:"buttons"}};e.Squarespace.ContentItemEditor.ImageMinimal=e.Base.create("ImageContentItemEditor",a,[],{},{ATTRS:{editorConfiguration:{value:s}}});var n={name:"imageeditminimal",title:r("Edit Image Metadata"),width:380,height:300,overlay:.5,closeOthers:false,draggable:true,minimal:true,style:"flyout",flyoutPointerDirection:"hidden",fields:[{$include:["fields.title",{countHeight:true,className:"thin"}]}],buttons:{$include:"buttons"}};e.Squarespace.ContentItemEditor.ProductImageMinimal=e.Base.create("ProductImageContentItemEditor",a,[],{},{ATTRS:{editorConfiguration:{value:n}}});e.Squarespace.ContentItemEditor.ImageAltText=e.Base.create("ImageAltTextEditor",a,[],{},{ATTRS:{editorConfiguration:{value:{name:"alttextimageeditor",title:r("Edit Image"),width:380,height:410,closeOthers:false,draggable:true,style:"flyout",flyoutPointerDirection:"hidden",buttons:{$include:"buttons"},fields:[{ctor:e.Squarespace.DialogFields.Text,countHeight:true,className:"thin",config:{name:"title","strings.placeholder":r("Enter alt text…")}},{ctor:e.Squarespace.DialogFields.Description,config:{name:"altTextDescription",text:r("A small bit of text to describe your image. Used for SEO and displayed when the image fails to load.")}}]}}}})},"1.0",{requires:["squarespace-content-item-types-base","squarespace-dialog-text","squarespace-dialog-description","squarespace-dialog-wysiwyg"]})},"./src/main/webapp/universal/scripts-v6/content-item-types/kbarticle.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-content-item-types-kbarticle",function(e){var t={title:i("Edit {presentationName}"),width:650,name:"kbarticle-editor",overlay:.5,verticalHeight:"full",initialDataByReference:true,tabs:[{$include:["tabs.primary.base","tabs.primary.text"]},{$include:"tabs.options.default"},{$include:"tabs.location"},{$include:"tabs.social"}],buttons:{$include:"buttons"}};var a=e.namespace("Squarespace.ContentItemEditor").KBArticle=e.Base.create("ArticleEditor",e.Squarespace.ContentItemEditor.Base,[],{getPresentationName:function(){return"KBArticle"},_getTemplateContext:function(){var e=a.superclass._getTemplateContext.call(this);e.enableFeatured=true;e.enablePassthrough=true;e.enableExcerpt=true;return e}},{ATTRS:{editorConfiguration:{value:t}}})},"1.0",{requires:["base","squarespace-content-item-types-base"]})},"./src/main/webapp/universal/scripts-v6/content-item-types/link.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-content-item-types-link",function(e){var t={title:i("Edit {presentationName}"),width:800,height:370,overlay:.5,initialDataByReference:true,tabs:[{$include:["tabs.primary.base","tabs.primary.link"]},{$include:"tabs.options.default"},{$include:"tabs.location"},{$include:"tabs.social"}],buttons:{$include:"buttons"}};e.namespace("Squarespace.ContentItemEditor").Link=e.Base.create("LinkContentItemEditor",e.Squarespace.ContentItemEditor.Base,[],{},{ATTRS:{editorConfiguration:{value:t}}})},"1.0",{requires:["base","squarespace-content-item-types-base"]})},"./src/main/webapp/universal/scripts-v6/content-item-types/post-editors.js":function(e,t){YUI.add("squarespace-content-item-types-post-editors",function(e){},"1.0",{requires:[]})},"./src/main/webapp/universal/scripts-v6/content-item-types/product-digital.js":function(e,t,a){var s=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var o=a("./src/main/webapp/frontend/packages/enums/ProductTypes.js");var i=a("./src/main/webapp/universal/scripts-v6/content-item-types/productDialogSettings.js");YUI.add("squarespace-content-item-types-product-digital",function(n){var e=n.merge({},i,{name:"editProduct",title:s("Edit {presentationName}"),initialDataByReference:true,tabs:[{$include:"tabs.primary.product.base",$update:{".pricingPlaceholder":{$include:"fields.productDigitalPricingPlaceholder"}}},{$include:"tabs.product.upload"},{$include:"tabs.product.additionalInfo"},{$include:"tabs.product.workflow"},{$include:"tabs.options.product"},{$include:"tabs.seo"},{$include:"tabs.seoSocial"},{$include:"tabs.social"}],buttons:{$include:"buttons"}});var r=n.namespace("Squarespace.ContentItemEditor").ProductDigital=n.Base.create("ProductDigitalContentItemEditor",n.Squarespace.ContentItemEditor.Product,[],{initializer:function(){var i=this.get("dialog");i.on("ready",function(){var e=i.getField("pricingPlaceholder");var t=this.get("model");i.getField("digitalGoods").on("dataChange",function(e){null===e.newVal&&t.clearChildGroup("digitalGoods",n.bind(function(){t.set("digitalGoods",null)},this))},this);var a=function(){e.set("data",n.merge(e.get("data"),{priceCents:i.getField("priceCents").getValue(),salePriceCents:i.getField("salePriceCents").getValue(),onSale:i.getField("onSale").getValue()}))};i.getField("priceCents").after("dataChange",a);i.getField("salePriceCents").after("dataChange",a);i.getField("onSale").after("dataChange",a)},this)},validateFields:function(){var e=this.get("dialog");var t=e.getField("digitalGoods").get("data");var a=e.getField("priceCents").get("data");var i=e.getField("salePriceCents").get("data");if(!n.Lang.isValue(t)||n.Lang.isValue(t)&&!n.Lang.isValue(t.get("id")))return{digitalGoods:s("You must upload a file for this digital product.")};if(a<i)return{salePriceCents:s("Sale price must be less than standard price")};if(a>n.Squarespace.Commerce.maxes().productPrice)return{priceCents:s("Price must be no more than 1 million.")};if(i>n.Squarespace.Commerce.maxes().productPrice)return{salePriceCents:s("Sale price must be no more than 1 million.")};return r.superclass.validateFields.call(this)},getDialogData:function(){var e=r.superclass.getDialogData.call(this);var t=e.structuredContent;var a=this.get("model");var i;var s=a.get("digitalGoods");if(s&&s.length>0){s.length>1&&console.warn("Multiple digital goods stored.");i=new n.Squarespace.Models.ContentItem(s[0])}else i=new n.Squarespace.Models.ContentItem({collectionId:a.get("collectionId"),parentId:a.get("id"),recordType:n.Squarespace.RecordType.DIGITALGOOD});return n.merge(e,{priceCents:t.priceCents,salePriceCents:t.salePriceCents,onSale:t.onSale,pricingPlaceholder:{productType:o.DIGITAL,priceCents:t.priceCents,salePriceCents:t.salePriceCents,onSale:t.onSale},digitalGoods:i})},sanitizeDialogData:function(e){e=r.superclass.sanitizeDialogData.call(this,e);e.structuredContent=n.merge(e.structuredContent,{productType:o.DIGITAL,priceCents:e.priceCents,salePriceCents:e.salePriceCents,onSale:e.onSale});return e},getPresentationName:function(){return s("Digital Product")}},{ATTRS:{editorConfiguration:{value:e}}})},"1.0",{requires:["base","squarespace-content-item-types-product","squarespace-commerce-utils","squarespace-util"]})},"./src/main/webapp/universal/scripts-v6/content-item-types/product-giftcard.js":function(e,t,a){var r=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var o=a("./src/main/webapp/frontend/packages/enums/ProductTypes.js");var l=a("./src/main/webapp/frontend/packages/enums/WorkflowStates.js");var c=a("./src/main/webapp/universal/scripts-v6/content-item-types/productDialogSettings.js");YUI.add("squarespace-content-item-types-product-giftcard",function(t){var a=r("Purchasing this digital gift card creates a unique code. The gift card recipient can enter this code at checkout to subtract the gift card value from their order total.");var i=r("This gift card never expires.");var s=[l.DRAFT,l.NEEDS_REVIEW];var e=t.merge({},c,{name:"editProduct",title:r("Edit {presentationName}"),initialDataByReference:true,tabs:[{$include:"tabs.primary.product.base",$update:{".pricingPlaceholder":{$include:"fields.productGiftCardPricingPlaceholder"}}},{$include:"tabs.product.variantsGiftCard"},{$include:"tabs.product.additionalInfo"},{$include:"tabs.options.product"},{$include:"tabs.seo"},{$include:"tabs.seoSocial"},{$include:"tabs.social"}],buttons:[{type:"cancel",title:r("Cancel")},{type:"remove",title:r("Delete")},{type:"saveAndClose",title:r("Save")},{$value:{type:"saveAndPublish",className:"saveAndPublish",title:r("Save & Publish")},$when:function(e){return-1!==s.indexOf(e.workflowState)}}]});t.namespace("Squarespace.ContentItemEditor");var n=t.Squarespace.ContentItemEditor.ProductGiftCard=t.Base.create("ProductGiftCardContentItemEditor",t.Squarespace.ContentItemEditor.ProductVariants,[],{getDialogData:function(){var e=n.superclass.getDialogData.call(this);if(!e.id){e.title=r("Gift Card");e.variants.variants=[t.Squarespace.Commerce.GiftCardUtils.createGiftCardAmountVariant(2500),t.Squarespace.Commerce.GiftCardUtils.createGiftCardAmountVariant(5e3),t.Squarespace.Commerce.GiftCardUtils.createGiftCardAmountVariant(7500),t.Squarespace.Commerce.GiftCardUtils.createGiftCardAmountVariant(1e4)];e.useCustomAddButtonText=true;e.customAddButtonText=r("Purchase");e.excerpt={html:["<p>",a,"</p><p>",i,"</p>"].join(""),raw:true}}e.pricingPlaceholder={productType:o.GIFT_CARD,variants:e.variants.variants};return e},getPresentationName:function(){return r("Gift Card Product")},_onCloseDismiss:function(e){var t=this.get("dialog");t.detach("ready",this._onReady,this);t.detach("tab-focused",this._afterTabFocused,this);this.fire("close")}},{ATTRS:{editorConfiguration:{value:e}}})},"1.0",{requires:["base","squarespace-util","squarespace-commerce-utils","squarespace-commerce-giftcard-utils","squarespace-content-item-types-product-variants"]})},"./src/main/webapp/universal/scripts-v6/content-item-types/product-physical.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/frontend/packages/enums/ProductTypes.js");var n=a("./src/main/webapp/universal/scripts-v6/content-item-types/productDialogSettings.js");YUI.add("squarespace-content-item-types-product-physical",function(e){var t=e.merge({},n,{name:"editProduct",title:i("Edit {presentationName}"),initialDataByReference:true,tabs:[{$include:"tabs.primary.product.base",$update:{".pricingPlaceholder":{$include:"fields.productVariantsPricingPlaceholder"}}},{$include:"tabs.product.variantsPhysical"},{$include:"tabs.product.additionalInfo"},{$include:"tabs.product.workflow"},{$include:"tabs.options.product"},{$include:"tabs.seo"},{$include:"tabs.seoSocial"},{$include:"tabs.social"}],buttons:{$include:"buttons"}});e.namespace("Squarespace.ContentItemEditor");var a=e.Squarespace.ContentItemEditor.ProductPhysical=e.Base.create("ProductPhysicalContentItemEditor",e.Squarespace.ContentItemEditor.ProductVariants,[],{getDialogData:function(){var e=a.superclass.getDialogData.call(this);e.pricingPlaceholder={productType:s.PHYSICAL,variants:e.variants.variants};e.subscriptionDetails=e.subscriptionPlan;return e},getPresentationName:function(){return i("Physical Product")}},{ATTRS:{editorConfiguration:{value:t}}})},"1.0",{requires:["base","squarespace-util","squarespace-commerce-utils","squarespace-content-item-types-product-variants"]})},"./src/main/webapp/universal/scripts-v6/content-item-types/product-service.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/frontend/packages/enums/ProductTypes.js");var n=a("./src/main/webapp/universal/scripts-v6/content-item-types/productDialogSettings.js");YUI.add("squarespace-content-item-types-product-service",function(e){var t=e.merge({},n,{name:"editProduct",title:i("Edit {presentationName}"),initialDataByReference:true,tabs:[{$include:"tabs.primary.product.base",$update:{".pricingPlaceholder":{$include:"fields.productVariantsPricingPlaceholder"}}},{$include:"tabs.product.variantsService"},{$include:"tabs.product.additionalInfo"},{$include:"tabs.product.workflow"},{$include:"tabs.options.product"},{$include:"tabs.seo"},{$include:"tabs.seoSocial"},{$include:"tabs.social"}],buttons:{$include:"buttons"}});e.namespace("Squarespace.ContentItemEditor");var a=e.Squarespace.ContentItemEditor.ProductService=e.Base.create("ProductServiceContentItemEditor",e.Squarespace.ContentItemEditor.ProductVariants,[],{getDialogData:function(){var e=a.superclass.getDialogData.call(this);e.pricingPlaceholder={productType:s.SERVICE,variants:e.variants.variants};e.subscriptionDetails=e.subscriptionPlan;return e},getPresentationName:function(){return i("Service Product")}},{ATTRS:{editorConfiguration:{value:t}}})},"1.0",{requires:["base","squarespace-util","squarespace-commerce-utils","squarespace-content-item-types-product-variants"]})},"./src/main/webapp/universal/scripts-v6/content-item-types/product-variants.js":function(e,t,a){var s=a("./src/main/webapp/universal/src/apps/App/components/SEOContentCollectionTab/actions/SEOContentCollectionTabActions.js");YUI.add("squarespace-content-item-types-product-variants",function(a){a.namespace("Squarespace.ContentItemEditor");var i=a.Squarespace.ContentItemEditor.ProductVariants=a.Base.create("ProductVariantsContentItemEditor",a.Squarespace.ContentItemEditor.Product,[],{initializer:function(){var s=this.get("dialog");s.on("ready",function(){var e=s.getField("variants");if(!e)return;var t=s.getField("pricingPlaceholder");e.after("dataChange",function(e){t.set("data.variants",e.newVal.variants)},this);e.on("errors",function(){t.pulseWarn()},this);var a=s.getField("isSubscribable");a&&a.after("dataChange",function(e){var t=s.getField("variants");t.set("data.isSubscription",a.data)},this);var i=s.getField("title");i&&i.after("dataChange",this._updateSeoTitle,this)},this);this._originalStock=a.clone(this.get("model").get("variants"))},_updateSeoTitle:function(e){s.updateFieldNoEdit("title",e.newVal)},getDialogData:function(){var e=i.superclass.getDialogData.call(this);var t=e.structuredContent;e.variants={variants:t.variants,variantOptionOrdering:t.variantOptionOrdering};e.originalVariants=this._originalStock;return e},sanitizeDialogData:function(e){e=i.superclass.sanitizeDialogData.call(this,e);var t=e.variants;e.structuredContent=a.merge(e.structuredContent,{variants:t.variants,variantOptionOrdering:t.variantOptionOrdering});delete e.variants;return e}})},"1.0",{requires:["base","json","squarespace-commerce-utils","squarespace-content-item-types-product","squarespace-models-content-item","squarespace-models-content-collection","squarespace-upsell-product-violations","squarespace-widgets-confirmation"]})},"./src/main/webapp/universal/scripts-v6/content-item-types/product.js":function(e,t,a){var l=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var n=a("./src/main/webapp/universal/src/shared/utils/CMSV7Events.js");var c=a("./src/main/webapp/universal/src/shared/utils/commerce/SubscriptionUtils.js");var u=a("./src/main/webapp/universal/src/shared/constants/commerce/BillingPeriodUnits.js");var i=a("./src/main/webapp/universal/src/shared/utils/commerce/WaitlistUtils.ts");var s=a("./src/main/webapp/universal/src/shared/utils/commerce/api/RestockNotificationApi.ts");var d=a("./src/main/webapp/universal/src/shared/constants/HelpLinks.js");var p=a("./src/main/webapp/frontend/packages/enums/Features.js");var r=a("./src/main/webapp/frontend/packages/enums/AchievementType.js");var o=a("./src/main/webapp/universal/src/apps/App/shared/constants/UpsellUrls.js");var h=a("./src/main/webapp/universal/src/apps/App/shared/actions/FrameActions.js");var g=a("./src/main/webapp/universal/src/apps/App/shared/constants/UpsellDestination.js");var m=a("./src/main/webapp/universal/src/apps/App/shared/stores/BillingStatusStore.js");var f=a("./src/main/webapp/universal/src/apps/App/shared/stores/WebsiteSettingsStore/index.js");var v=a("./src/main/webapp/universal/src/shared/actions/WebsiteAchievementActions.js");var b=a("./src/main/webapp/universal/src/apps/App/shared/stores/WebsiteAchievementStore.js");var S=a("./src/main/webapp/universal/src/apps/App/shared/actions/ToastManagerActions.ts");var y=a("./src/main/webapp/universal/src/apps/App/shared/components/ToastManager/ToastManagerUtils.tsx");var _=a("./common/temp/node_modules/lodash/get.js");var E=a("./common/temp/node_modules/lodash/merge.js");var w=a("./common/temp/node_modules/lodash/isInteger.js");var A=a("./common/temp/node_modules/lodash/range.js");var T=a("./src/main/webapp/universal/src/apps/App/screens/Settings/screens/CustomerAccounts/shared/api/CustomerAccountsSettingsApi.js");var I=a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts");var q=a("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/NestedCategoriesEditor/WrappedNestedCategoriesLabel.tsx");var k=a("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/RelatedProductsEditor/WrappedRelatedProductsEditor.tsx");var C=a("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/WrappedProductComposer/index.tsx");var L=a("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/Inventory/screens/components/EditProductModal/ProductDialogActions.ts");var D=C.ProductComposer;var N=C.BetaSwitchingButton;var R=C.shouldShowProductComposer;var O=C.shouldShowProductComposerOptIn;var P=C.optInProductComposer;var x=C.optOutProductComposer;var B=a("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/ContentBrowserAPI.js").default;var M=a("./src/main/webapp/universal/src/apps/App/components/SEOContentCollectionTab/actions/SEOContentCollectionTabActions.js");var F=a("./src/main/webapp/frontend/packages/enums/Flag.js");var j=a("./src/main/webapp/frontend/packages/enums/RelatedProductsStrategy.js");var U=a("./src/main/webapp/universal/src/shared/utils/commerce/analytics/trackProductEditor.ts");var V=a("./src/main/webapp/universal/src/shared/utils/commerce/analytics/mapProductTypeToString.ts");var H=a("./src/main/webapp/universal/src/shared/utils/commerce/analytics/types.ts");var G=[1,2,3,4,5,6,7,8,9,10,11,12];var W={};W[u.WEEK]=52;W[u.MONTH]=12;var z=H.ProductEditor.YUI_EDITOR;YUI.add("squarespace-content-item-types-product",function(C){C.namespace("Squarespace.ContentItemEditor");var a=C.Squarespace.ContentItemEditor.Product=C.Base.create("ProductPhysicalContentItemEditor",C.Squarespace.ContentItemEditor.Base,[],{initializer:function(){var e=this.get("dialog");e.on("ready",this._onReady,this);e.on("preClose",this._validateCustomerAccounts,this);e.on("duplicate",this._onDuplicate,this);e.on(["close","dismiss"],this._onCloseDismiss,this);e.after("dismiss",this._afterDismiss,this);e.after("tab-focused",this._afterTabFocused,this)},destructor:function(){},show:function(){if(R()){this._wrappedProductComposer||(this._wrappedProductComposer=new D({productId:this.get("model").get("id"),lifeCycleHooks:{onCancelButtonClick:this._productComposerOnNonSavingClose.bind(this),onSaveButtonClick:this._productComposerOnSavingClose.bind(this),onDeleteButtonClick:this._productComposerOnDelete.bind(this),onDuplicateButtonClick:this._productComposerOnDuplicate.bind(this),onBetaOptOutButtonClick:this.switchToYuiEditor.bind(this)},externalYUIModules:{additionalInfoConstructor:C.Squarespace.DialogFields.Layout,customFormsConstructor:C.Squarespace.DialogFields.FormSelector,socialAccountsConstructor:C.Squarespace.DialogFields.ItemPush,dialog:this.get("dialog")}}));this._increaseZIndexBaseForProductComposer();this._wrappedProductComposer.show();return}a.superclass.show.call(this)},_increaseZIndexBaseForProductComposer:function(){this.ORIGINAL_Z_INDEX_BASE||(this.ORIGINAL_Z_INDEX_BASE=C.Squarespace.DIALOG_ZINDEX_BASE);C.Squarespace.DIALOG_ZINDEX_BASE+=5e5},_resetZIndexBaseAfterClosingProductComposer:function(){this.ORIGINAL_Z_INDEX_BASE&&(C.Squarespace.DIALOG_ZINDEX_BASE=this.ORIGINAL_Z_INDEX_BASE)},_productComposerOnNonSavingClose:function(){this._wrappedProductComposer&&this._wrappedProductComposer.close();this._resetZIndexBaseAfterClosingProductComposer();this.fire("nonSavingClose")},_productComposerOnSavingClose:function(){this._wrappedProductComposer&&this._wrappedProductComposer.close();h.refresh();this._resetZIndexBaseAfterClosingProductComposer();this.fire("savingClose")},_productComposerOnDelete:function(){this._wrappedProductComposer&&this._wrappedProductComposer.close();this._removeItem(this.get("model"));this.fire("savingClose")},_productComposerOnDuplicate:function(e){var a=new C.Squarespace.Models.ContentItem(e);C.Squarespace.ContentCollectionCache.getCollectionById(a.get("collectionId"),function e(t){t.items.add(a)});this._wrappedProductComposer.close();L.commerceOpenCreateProductDialog(e.id)},switchEditor:function(e){e.then(function(){if(this._wrappedProductComposer){this._wrappedProductComposer.close();this._resetZIndexBaseAfterClosingProductComposer()}var e=this.get("model");var t=C.Squarespace.ContentItemEditorFactory.getEditor(e);var a=new t({model:e});a.show();this.get("dialog").dismiss()}.bind(this)).catch(function(){this._wrappedProductComposer&&this._wrappedProductComposer.close();this.get("dialog").dismiss()}.bind(this))},switchToProductComposer:function(){this.switchEditor(P())},switchToYuiEditor:function(){this.switchEditor(x())},_onReady:function(e){var t=this.get("dialog");var a=this.get("model");var i=a.get("collectionId");var s=a.get("id");var n=a.get("categoryIds");var r=I.isFeatureEnabled(F.NESTED_CATEGORIES);if(r){var o=t.mainEl.one(".name-categories");var l='<div id="nested-categories-container"></div>';var c=C.Node.create(l);o.insert(c,"after");o.remove(true);this._wrappedNestedCategoriesEditor=new q({container:c.getDOMNode(),productModel:a,requestCloseOriginatingModal:function(e){e()},onTreeRefresh:function(e){B.updateNestedCategories(i,e)}});this._wrappedNestedCategoriesEditor.show()}if(O()){var u=C.Node.create("<div />");this.get("dialog").mainEl.appendChild(u);this._wrappedBetaSwitchingButton=new N({container:u.getDOMNode(),toggleBetaOptIn:this.switchToProductComposer.bind(this),hideYUIModal:function(){var e=t.mainEl.ancestor();e.removeClass("visible")},showYUIModal:function(){var e=t.mainEl.ancestor();e.addClass("visible")},productId:this.get("model").get("id"),productName:this.get("model").get("title"),productType:this.get("model").get("productType")});this._wrappedBetaSwitchingButton.show()}var d=t.mainEl.one(".name-starred");var p='<div id="related-products-container"></div>';var h=C.Node.create(p);d.insert(h,"after");this._wrappedRelatedProductsEditor=new k({setRelatedAttrsInYUI:this._setRelatedAttrsInYUI.bind(this),container:h.getDOMNode(),model:{collectionId:i,websiteId:window.Static.SQUARESPACE_CONTEXT.website.id,productId:s,categoryIds:n}});var g=this.get("model");U.trackOpenProductEditor({productId:g.get("id"),productName:g.get("title"),productType:V(g.get("productType")),productEditor:z});var m=t.getField("pricingPlaceholder");var f=t.getField("customAddButtonText");var v=t.getField("useCustomAddButtonText");var b=t.getField("isSubscribable");var S=t.getField("subscriptionDetails");var y=false;m.on("clicked",function(e){t.activateTab(t.params.tabs[1])});v.on("dataChange",function(e){f.set("visible",e.newVal)},this);var _=t.getField("title");_&&_.after("dataChange",this._updateSeoTitle,this);f.set("visible",v.get("data"));if(b){S.set("visible",b.get("data"));this._toggleDeleteWarning(b.get("data"));b.on("dataChange",function(e){if(y)y=!y;else if(e.newVal){y=!y;this._onSubscriptionSettingsChangeRequest(b,S,e.prevVal)}S.set("visible",e.newVal&&!y)},this);b.after("dataChange",function(){this._toggleDeleteWarning(b.get("data"))},this);S.on("clicked",function(){y=true;this._onSubscriptionSettingsChangeRequest(b,S,true)},this)}},_updateSeoTitle:function(e){M.updateFieldNoEdit("title",e.newVal)},_setRelatedAttrsInYUI:function(e,t){var a=this.get("model");var i=a.get("structuredContent");switch(t){case j.CATEGORIES:var s=I.isFeatureEnabled(F.NESTED_CATEGORIES);s?i.setAttrs({relatedCategoryIds:e,relatedProductsStrategy:j.CATEGORIES}):i.setAttrs({relatedCategories:e,relatedProductsStrategy:j.CATEGORIES});break;case j.TAGS:i.setAttrs({relatedTags:e,relatedProductsStrategy:j.TAGS});break;case j.OFF:i.setAttrs({relatedProductsStrategy:j.OFF});break;default:i.setAttrs({relatedProductsStrategy:j.FIRST_CATEGORY})}},_onSubscriptionSettingsChangeRequest:function(e,t,a){var i=this._createSubscriptionSettingsDialog();var s=false;i.show();i.on("send-requested",function(){s=true;return this._onSubscriptionSettingsSendRequested.call(this,i,t)},this);i.on("button-upgrade",function(){var e=m.isTrial()?g.TRIAL_UPGRADE_PLAN:g.UPGRADE_PLAN;C.Squarespace.Singletons.Location.go(o[e])},this);c.shouldSeeUpsell()&&(this.get("dialog").params.discardChangesConfirmation=false);i.after("dismiss",function(){this.get("dialog").params.discardChangesConfirmation=true;s?e.set("data",true):e.set("data",a)},this)},_onSubscriptionSettingsSendRequested:function(e,t){var a=e.getField("period-magnitude");var i=a.getValue();if(!w(i)){a.showError(l("Copy needed here"));e.allowEditing();return}if(i<=0){a.showError(l("Amount must be greater than 0"));e.allowEditing();return}var s=W[e.getField("period-unit").getValue()];if(i>s){a.showError(l("Amount must be less than or equal to {max_value}",{max_value:s}));e.allowEditing();return}this._addSubscription(e.getData(),t);e.close()},_createSubscriptionFrequencyOptions:function(){var e=G;var t=[];e.forEach(function(e){t.push({value:e,label:e.toString()})});return t},_createSubscriptionSettingsDialog:function(){var e=this.get("model").get("subscriptionPlan");var t=this._createSubscriptionFrequencyOptions();var a=l("Any changes made to your subscription product will only affect new subscribers. Please ensure you comply with any laws applicable to your subscriptions.");var i="<a href="+d.COMMERCE_SUBSCRIPTIONS+' target="_blank">'+l("Learn more")+"</a>";var s=[];var n=c.shouldSeeUpsell();n&&s.push({ctor:C.Squarespace.DialogFields.FeatureGateMenu,config:{learnMoreUrl:d.COMMERCE_SUBSCRIPTIONS,analyticsId:"commerce-edit-subscriptions-dialog",feature:p.COMMERCE_SUBSCRIPTIONS}});s.push({ctor:C.Squarespace.DialogFields.Description,config:{text:l("Create a subscription to charge your customers on a recurring basis.")}},{type:"splitter",fields:[{ctor:C.Squarespace.DialogFields.Select,config:{name:"period-magnitude","strings.title":l("Repeats every"),data:_(e,"billingPeriod.value",1),numeric:true,options:t,width:.52}},{ctor:C.Squarespace.DialogFields.Select,config:{name:"period-unit",defaultValue:_(e,"billingPeriod.unit",u.MONTH),options:[{value:u.WEEK,label:l("Weeks")},{value:u.MONTH,label:l("Months")}],width:.52}}]},{ctor:C.Squarespace.DialogFields.Select,config:{name:"total-cycles","strings.title":l("Billing Cycles"),defaultValue:_(e,"numBillingCycles")||0,numeric:true,options:[{value:0,label:l("Ongoing Payments")}].concat(A(2,53).map(function(e){return{value:e,label:l("{i} Payments",{i:e.toString()})}}))}},{ctor:C.Squarespace.DialogFields.Description,config:{text:a+" "+i,className:"warning-text"}});var r={type:"upgrade",title:l("Upgrade")};var o={title:l("Save"),type:"save"};return new C.Squarespace.EditingDialog({width:400,project:"scripts-v6.content-item-types",title:l("Edit Subscription Settings"),closeOthers:false,overlay:true,name:"subscription-settings",fields:s,discardChangesConfirmation:!n,buttons:[{title:l("Cancel"),type:"cancel"},n?r:o]})},_createCustomerAccountsWarning:function(){var e='<a href="'+d.COMMERCE_SUBSCRIPTIONS+'" target="_blank">'+l("Learn more")+"</a>";var t=[{ctor:C.Squarespace.DialogFields.Description,config:{text:l("Subscriptions require Customer Accounts to be on so that your customers may manage their subscriptions.")+" "+e}}];return new C.Squarespace.EditingDialog({width:350,project:"scripts-v6.content-item-types",title:l("Connect Customer Accounts"),closeOthers:false,overlay:true,name:"customer-accounts-warning",fields:t,buttons:[{title:l("Dismiss"),type:"dismiss"},{title:l("Enable"),type:"enable"}]})},_addSubscription:function(e,t){var a=E(this.get("model").get("subscriptionPlan"),{billingPeriod:{value:e["period-magnitude"],unit:e["period-unit"]},numBillingCycles:e["total-cycles"]});this.get("model").set("subscriptionPlan",a);t.set("data",a)},_removeSubscription:function(e){this.get("model").set("subscriptionPlan",null)},_onCloseDismiss:function(e){var t=this.get("dialog");var a=t.getField("pricingPlaceholder");var i=t.getField("useCustomAddButtonText");t.detach("ready",this._onReady,this);t.detach("duplicate",this._onDuplicate,this);t.detach("tab-focused",this._afterTabFocused,this);a&&a.destroy(true);i&&i.destroy(true);this._wrappedNestedCategoriesEditor&&this._wrappedNestedCategoriesEditor.destroy();if(this._wrappedProductComposer){this._wrappedProductComposer.close();this._wrappedProductComposer.destroy()}this._wrappedBetaSwitchingButton&&this._wrappedBetaSwitchingButton.destroy();this.fire("close")},_afterDismiss:function(e){var t=this.get("dialog");var a=this.get("model");var i=f.getState();i.storeSettings.merchandisingSettings.restockNotificationsEnabled&&this._displayWaitlistNotificationIfAvailable();var s={productId:a.get("id"),productName:a.get("title"),productType:V(a.get("productType")),productEditor:z};if(t._isState("SAVING")){b.hasAchievement(r.PRODUCT_SAVED)||v.grantAchievement(r.PRODUCT_SAVED);if(this._isNew){U.trackAddProduct(s);v.grantAchievement(r.PRODUCT_CREATED)}else{U.trackSaveProductEditor(s);n.saveCollectionItem({itemId:s.productId,collectionType:"products",collectionId:a.get("collectionId")})}}else if(a.get("workflowState")===C.Squarespace.WorkflowStates.DELETED){U.trackDeleteProduct(s);n.deleteCollectionItemFromModal({itemId:s.productId,collectionType:"products",collectionId:a.get("collectionId")})}else{U.trackCloseWithoutSavingProductEditor(s);this.isDuplicating?this.isDuplicating=false:n.cancelEditCollectionItem({itemId:s.productId,collectionType:"products",collectionId:a.get("collectionId")})}},_displayWaitlistNotificationIfAvailable:function(){var e=i.getInStockVariantIds(this.get("model").get("variants"));if(!e.length)return;var a=this.get("model").get("title");s.fetchTotalEmailCountForVariants(this.get("model").get("id"),e).then(function(e){if(e>0){var t=l("You have waitlist signups for {productTitle}.",{productTitle:a});S.present({text:t,accessories:[{text:l("View"),onPress:this._routeToWaitlistPanel},{component:y.getCloseIcon()}]})}}.bind(this))},_validateCustomerAccounts:function(){var a=this.get("dialog");var e=a.getField("isSubscribable");if(!e)return true;var t=e.get("data");if(t){T.get().then(function(e){if(e.data.userAccountsEnabled)a.save();else{var t=this._createCustomerAccountsWarning();t.show();t.on("button-enable",this._routeToCustomerAccounts,this);t.on("button-dismiss",function(){t.cancel();this._dismissCustomerAccountsWarning()},this)}}.bind(this)).catch(function(e){throw new Error("Unable to fetch customer accounts data")});return false}},_dismissCustomerAccountsWarning:function(){var e=this.get("dialog");var t=e.getField("workflow");var a=(new Date).getTime();t.set("data",{state:"draft",date:a});e.save()},_routeToCustomerAccounts:function(){var e=this.get("dialog");e.clearEdited();C.Squarespace.Singletons.Location.go("/config/commerce/customer-accounts")},_routeToWaitlistPanel:function(){C.Squarespace.Singletons.Location.go("/config/commerce/waitlists/")},_afterTabFocused:function(e){var t=this.get("dialog");var a=this.get("model");U.trackChangeTabProductEditor({productId:a.get("id"),productName:a.get("title"),productType:V(a.get("productType")),tabName:e.tabName,productEditor:z});if("options"===e.tabName&&this._wrappedRelatedProductsEditor){var i=t.getData();var s=I.isFeatureEnabled(F.NESTED_CATEGORIES);this._wrappedRelatedProductsEditor.setExistingTags(i?i.tags:[]);s?this._wrappedRelatedProductsEditor.setExistingCats(i?i.categoryIds:[]):this._wrappedRelatedProductsEditor.setExistingCats(i?i.categories:[]);this._wrappedRelatedProductsEditor.show()}},_toggleDeleteWarning:function(e){e?this.set("extendedDeleteMessage","<br><br>"+l("Deleting this product will not delete any of its active subscriptions. Customers on this subscription will still be charged on a recurring basis. You will need to cancel each active subscription for this to take full effect.")):this.set("extendedDeleteMessage","")},_onDuplicate:function(e){this.isDuplicating=true;var t=this.get("model");U.trackAddProduct({productId:t.get("id"),productName:t.get("title"),productType:V(t.get("productType")),productEditor:z});U.trackDuplicateProduct({oldProductId:t.get("id"),newProductId:e.get("id"),productName:t.get("title"),productType:V(t.get("productType")),productEditor:z});n.duplicateCollectionItem({itemId:t.get("id"),collectionType:"products",collectionId:t.get("collectionId")})},_removeItem:function(e){if(!e.get("id")){this.get("dialog").close();return}e.set("workflowState",C.Squarespace.WorkflowStates.DELETED);e.sync("delete",{},C.bind(function(){this.saving=true;this.get("dialog").close();this.saving=false},this))},getDialogData:function(){var e=a.superclass.getDialogData.call(this);var t=e.structuredContent;e.customAddButtonText=t.customAddButtonText;e.useCustomAddButtonText=t.useCustomAddButtonText;e.additionalFieldsForm=t.additionalFieldsForm;e.additionalFieldsFormId=t.additionalFieldsFormId;e.isSubscribable=t.isSubscribable;e.subscriptionDetails=t.subscriptionPlan;e.relatedCategories=t.relatedCategories;e.relatedCategoryIds=t.relatedCategoryIds;e.relatedTags=t.relatedTags;e.relatedProductsStrategy=t.relatedProductsStrategy;return e},sanitizeDialogData:function(e){e=a.superclass.sanitizeDialogData.call(this,e);e.structuredContent=C.merge(e.structuredContent,{customAddButtonText:e.customAddButtonText,useCustomAddButtonText:e.useCustomAddButtonText,additionalFieldsFormId:e.additionalFieldsFormId,isSubscribable:e.isSubscribable,subscriptionPlan:e.subscriptionDetails,relatedCategories:this.get("model").get("structuredContent").get("relatedCategories"),relatedCategoryIds:this.get("model").get("structuredContent").get("relatedCategoryIds"),relatedTags:this.get("model").get("structuredContent").get("relatedTags"),relatedProductsStrategy:this.get("model").get("structuredContent").get("relatedProductsStrategy")});e.subscriptionPlan=e.subscriptionDetails;delete e.customAddButtonText;delete e.useCustomAddButtonText;delete e.additionalFieldsFormId;delete e.isSubscribable;delete e.subscriptionPlan;delete e.relatedCategories;delete e.relatedCategoryIds;delete e.relatedTags;delete e.relatedProductsStrategy;return e},getPresentationName:function(){throw new Error("Must implement a Presentation Name for this product type")}},{ATTRS:{}})},"1.0",{requires:["base","squarespace-content-item-types-base","squarespace-dialog-feature-gate-menu","squarespace-dialog-numeric-text","squarespace-models-form","squarespace-util"]})},"./src/main/webapp/universal/scripts-v6/content-item-types/productDialogSettings.js":function(e,t){e.exports={width:1010,height:576,top:20,overlay:.5,closeOthers:false}},"./src/main/webapp/universal/scripts-v6/content-item-types/quote.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-content-item-types-quote",function(e){var t={title:i("Edit {presentationName}"),width:800,height:450,overlay:.5,tabs:[{$include:["tabs.primary.base","tabs.primary.quote"]},{$include:"tabs.options.default"},{$include:"tabs.location"},{$include:"tabs.social"}],buttons:{$include:"buttons"}};e.namespace("Squarespace.ContentItemEditor");var s=e.Squarespace.ContentItemEditor.Quote=e.Base.create("QuoteContentItemEditor",e.Squarespace.ContentItemEditor.Base,[],{getDialogData:function(){var e=s.superclass.getDialogData.apply(this,arguments);!e.quote&&e.structuredContent.quote&&(e.quote=e.structuredContent.quote);return e},sanitizeDialogData:function(e,t,a){var i=s.superclass.sanitizeDialogData.apply(this,arguments);i.structuredContent.quote=i.quote;delete i.quote;delete i.id;return i}},{ATTRS:{editorConfiguration:{value:t}}})},"1.0",{requires:["base","squarespace-content-item-types-base"]})},"./src/main/webapp/universal/scripts-v6/content-item-types/selector.js":function(e,t,a){var u=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var d=a("./src/main/webapp/universal/src/shared/dispatchers/alt/index.ts");var p=a("./src/main/webapp/frontend/packages/enums/RecordType.js");var h=a("./src/main/webapp/frontend/packages/enums/Flag.js");var g=a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts");var n=a("./src/main/webapp/universal/src/apps/App/shared/stores/FeaturesStore.js");var m=a("./src/main/webapp/universal/src/apps/App/shared/stores/FeatureGateStore/index.js");a("./src/main/webapp/universal/src/apps/App/shared/stores/BillingStatusStore.js");var f=a("./src/main/webapp/frontend/packages/enums/Features.js");var v=a("./src/main/webapp/universal/src/apps/App/shared/stores/TemplateStore.js");var b=a("./src/main/webapp/universal/src/apps/App/components/SEOContentCollectionTab/stores/SEOContentCollectionTabStore.js");var S=a("./src/main/webapp/frontend/packages/enums/CollectionTypes.js");var y=a("./src/main/webapp/frontend/packages/enums/CollectionOrdering.js");var _=a("./src/main/webapp/frontend/packages/enums/ProductTypes.js");var C=a("./common/temp/node_modules/@sqs/styles/variables/baseDamask.js");var E=a("./src/main/webapp/universal/src/shared/utils/TemplateVersionUtils.js");var w=a("./src/main/webapp/universal/src/apps/App/shared/actions/FrameActions.js");var A=a("./src/main/webapp/universal/src/apps/App/shared/actions/PageSectionsActions.js");var T=a("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/ContentBrowserAPI.js").default;var I=a("./src/main/webapp/universal/src/shared/utils/commerce/analytics/trackProductEditor.ts");var q=a("./src/main/webapp/universal/src/shared/utils/commerce/analytics/mapProductTypeToString.ts");var k=a("./src/main/webapp/universal/src/shared/utils/commerce/analytics/types.ts");var i=a("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/WrappedProductComposer/index.tsx");var L=i.shouldShowProductComposer;var D=i.ProductCreationWizard;var N=i.buildShellContentItem;var R=3;var O=370;var P=600;var x="ADD_POST_REFRESH_KEY";YUI.add("squarespace-content-item-types-selector",function(o){var r={};r[o.Squarespace.Enums.RecordType.IMAGE]=u("Upload Image");r[o.Squarespace.Enums.RecordType.VIDEO]=u("Add Video");var l={};l[o.Squarespace.Enums.RecordType.DIGITALGOOD]=u("Squarespace will automatically send customers a secure link to the file lasting 24 hours after initial access.");l[o.Squarespace.Enums.RecordType.STORE_ITEM]=u("A package must be shipped by the merchant.");var e=n.isFeatureEnabled(f.GIFT_CARDS);var t=n.isFeatureEnabled(f.COMMERCE);var a=m.getUpsellCopy(f.GIFT_CARDS);var c=[{title:u("Physical"),value:"store-item-physical",description:u("A package must be shipped by the merchant."),recordType:o.Squarespace.Enums.RecordType.STORE_ITEM,productType:_.PHYSICAL},{title:u("Digital"),value:"store-item-digital-good",description:u("Customers receive a secure link to the file lasting 24 hours after the first download."),recordType:o.Squarespace.Enums.RecordType.STORE_ITEM,productType:_.DIGITAL},{title:u("Service"),value:"store-item-service",description:u("A service must be rendered. Services do not have shipping costs applied."),recordType:o.Squarespace.Enums.RecordType.STORE_ITEM,productType:_.SERVICE},{title:u("Gift Card"),value:"store-item-gift-card",description:u("Customers can apply a gift card towards future purchases."),recordType:o.Squarespace.Enums.RecordType.STORE_ITEM,productType:_.GIFT_CARD,upsellLocked:!e&&t,upsellInfo:a}];var s=5.59*C.GRID_PX;function i(){var n=[];o.Array.each(this.get("model").get("acceptTypes"),function(e){var t=o.Squarespace.Enums.RecordType.valueForString(e);var a=o.Squarespace.Enums.RecordType.titleForValue(t);r[t]&&(a=r[t]);var i=v.getCustomType(e);if(o.Lang.isNull(t)&&!!i){t=o.Squarespace.Enums.RecordType.valueForString(i.base);a=i.title}if(!t){new o.Squarespace.Widgets.Alert({"strings.title":u("Custom Type Configuration Not Found"),"strings.message":u('Configuration not found for accept type "{acceptType}". Please double check the collection configuration.',{acceptType:e})});return null}t!==o.Squarespace.Enums.RecordType.IMAGE||i||n.push({icon:"licensed",title:u("Search Images"),value:"licensed-image",recordType:o.Squarespace.Enums.RecordType.IMAGE,customType:"licensed"});if(t===o.Squarespace.Enums.RecordType.STORE_ITEM)n=n.concat(c);else{var s=o.Squarespace.Enums.RecordType.stringForValue(t);if(!o.Lang.isValue(a)){console.warn('Could not find title for acceptType "'+e+'"');return null}n.push({icon:s,title:a,value:e,description:l[t],recordType:t,customType:i?i.name:null})}},this);n=n.filter(function(e){return null!==e});return n}o.namespace("Squarespace.ContentItemTypes").Selector=o.Base.create("ContentItemTypesSelector",o.Squarespace.ModelEditorDialog,[],{initializer:function(){var i=this.get("dialog");i.on("datachange",function(e){var t=e.get("data");var a=this.get("onContentItemTypeSelected");if(!a)throw new Error("No onContentItemTypeSelected handler function?");i.updateTitle(o.Squarespace.DialogStates.LOADING);i.showSaveOverlay();a(this.getContentItemConfiguration(t),function(){i.hideSaveOverlay();i.close()})},this)},getContentItemConfiguration:function(t){var e=o.Array.find(this.get("acceptTypes"),function(e){return e.value===t});var a={recordType:e.recordType};e.customType&&(a.customContent={customType:e.customType});e.recordType===o.Squarespace.Enums.RecordType.STORE_ITEM&&(a.structuredContent={productType:e.productType});return a},getDialogConfig:function(){var e=this.get("model");var t=this.get("acceptTypes");var a=Math.min(t.length,R);var i=e.get("collectionType")===S.PRODUCTS;i&&(a=1);return{width:{$valueFn:function(){if(i)return P;return O}},height:{$valueFn:o.bind(function(){return Math.ceil(t.length/a)*s},this),$when:o.bind(function(){return t.length>a&&a>1},this)},name:{$valueFn:function(){if(i)return"productType";return"content type"}},overlay:.5,style:"flyout",closeOthers:false,discardChangesConfirmation:false,flyoutPointerDirection:"centered",loadingText:u("Loading…"),tabs:[{title:{$valueFn:function(){if(i)return u("Select Product Type");return e.get("addText")}},icon:"/universal/images-v6/icons/icon-plus-16-light.png",fields:[{ctor:o.Squarespace.DialogFields.MultiOption,config:{numeric:false,options:t,columns:a}}]}]}}},{ATTRS:{onContentItemTypeSelected:{},acceptTypes:{valueFn:i},dialogConfig:{valueFn:"getDialogConfig"}}});o.namespace("Squarespace.Mixins").AddContentItemHandlerMixin=o.Base.create("AddContentItemHandlerMixin",o.Base,[],{_createNewContentItemAndShowEditor:function(e,t){if(this.pendingAddItemAndEnterInlineEditMode)return;var a=this.get("collection");if(g.isFeatureEnabled(h.EVENTS_PANEL_70)&&T.isEvents(a.toJSON())){T.addEvent70(o,a.get("id"));return}var i=this._createNewContentItem(e);i.get("recordType")===p.STORE_ITEM&&I.trackSelectProductType(q(i.getAttrs().structuredContent.getAttrs().productType),k.ProductEditor.YUI_EDITOR);o.Lang.isFunction(t)&&t();if(this.shouldEnterInlineEditMode(a)){this.pendingAddItemAndEnterInlineEditMode=true;i.set("body",{raw:false,layout:{columns:12,rows:[]}});i.autoSave(function(){a.items.add(i);w.addLoadHandler(x,function(){setTimeout(function(){w.removeLoadHandler(x);A.setEditing(true);w.enableEditing();var e=i.getAttrs();T.isEventItem(e)&&T.addItem(e);this.pendingAddItemAndEnterInlineEditMode=false}.bind(this),100)}.bind(this));w.setUrl(i.get("fullUrl"))}.bind(this));return}if(o.Squarespace.ContentItemUtils.isStandardGalleryItem(i,a)){i.save(function(){T.showCollectionItemSettingsEditor(i.getAttrs(),null,true);o.Lang.isFunction(t)&&t()});return}var s=i.on("save",function(e){e.options&&e.options.headers&&e.options.headers["X-AutoSave"]||a.items.add(i)},this);var n=new(o.Squarespace.ContentItemEditorFactory.getEditor(i,this.get("itemEditorOptions")))({model:i});n.on("visibleChange",function(e){if(!e.newVal){s.detach();i.get("unsaved")?i.destroy({remove:true}):i.isNew()&&i.destroy()}});n.show({licensed:e.customContent&&"licensed"===e.customContent.customType});return n},shouldEnterInlineEditMode:function(e){if(!E.isSevenOne())return false;if(e.get("ordering")===y.CHRONOLOGICAL)return true;if(T.isEvents(T.getCollection(e.get("id"))))return true;return e.get("collectionType")===S.PORTFOLIO},_createNewContentItem:function(e){var t=this.get("collection");var a={collectionId:t.get("id")};t.get("ordering")!==y.USER&&t.get("ordering")!==y.MUSIC_ALBUM||(a.displayIndex=t.get("nextDisplayIndex"));e.recordType===p.EVENT&&(a.title="");return new o.Squarespace.Models.ContentItem(o.merge(e,a))},handleAddContentRequest:function(e){var s=this.get("collection");d.recycle(b);var t=new o.Squarespace.ContentItemTypes.Selector({model:this.get("collectionConfiguration"),onContentItemTypeSelected:o.bind(this._createNewContentItemAndShowEditor,this)});var a=t.get("acceptTypes");var i=this.get("selectorAnchorNode");var n=o.bind(t.show,t);0===a.length?new o.Squarespace.Widgets.Alert({"strings.title":u("Configuration Error"),"strings.message":u("There are no valid accept types defined for the collection type {sub1}.",{sub1:this.get("collectionConfiguration").get("title")})}):1===a.length?n=o.bind(function(){this._createNewContentItemAndShowEditor(t.getContentItemConfiguration(a[0].value))},this):i&&t.set("anchorNode",i);function r(){s.isNew()?n():s.load({},function(){o.Squarespace.ProductViolations.isAllowedToAddItemToCollection(s,1).then(n)},this)}if(s.get("type")===S.PRODUCTS&&L()){this._wrappedProductCreationWizard||(this._wrappedProductCreationWizard=new D({collectionId:s.get("id"),collectionItemCount:s.items.size(),onRequestClose:function(){this._wrappedProductCreationWizard.close();this._wrappedProductCreationWizard.destroy()}.bind(this),onProductCreated:function(e){var t=new o.Squarespace.Models.ContentItem(N(e));var a=o.Squarespace.ContentItemEditorFactory.getEditor(t);var i=new a({model:t});s.items.add(t);i.show();this._wrappedProductCreationWizard.close();this._wrappedProductCreationWizard.destroy()}.bind(this)}));this._wrappedProductCreationWizard.show();return}r();e&&e.analytics&&e.analytics.productPage&&s.get("type")===S.PRODUCTS&&I.trackClickAddProduct(e.analytics.productPage)}},{ATTRS:{damask:{},itemEditorOptions:{value:{}},collectionConfiguration:{},collection:{},selectorAnchorNode:{}}})},"1.0",{requires:["squarespace-content-item-types-editor","squarespace-content-item-types-enum-record-type","squarespace-content-item-utils","squarespace-enum","@sqs/layout-engine/layout-builder","squarespace-model-editor","squarespace-models-content-item","squarespace-singletons-location","squarespace-upsell-product-violations","squarespace-util-authenticated","squarespace-widgets-alert","squarespace-widgets-confirmation"]})},"./src/main/webapp/universal/scripts-v6/content-item-types/settings.js":function(e,t,a){var r=a("./common/temp/node_modules/lodash/omitBy.js");var o=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var l=a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts");var c=a("./src/main/webapp/frontend/packages/enums/Flag.js");var u=a("./src/main/webapp/universal/src/shared/constants/ChildGroups.js");var d=a("./src/main/webapp/universal/src/shared/constants/Constants.js");var p=a("./src/main/webapp/universal/src/shared/constants/TextEditor.js");var h=a("./src/main/webapp/universal/src/shared/constants/TextFilterNames.js");var g=a("./src/main/webapp/universal/src/shared/constants/UploadModes.js");var m=a("./src/main/webapp/universal/src/shared/utils/rendering.js");var f=a("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/ContentBrowserAPI.js").default;var v=a("./src/main/webapp/universal/src/apps/App/shared/components/campaigns/CreateCampaignFromBlogPost/index.js");var b=a("./src/main/webapp/universal/src/apps/App/components/SEOContentCollectionTab/index.jsx");var S=a("./src/main/webapp/universal/src/apps/App/components/SEOContentCollectionTab/stores/SEOContentCollectionTabStore.js");var y=a("./src/main/webapp/universal/src/shared/utils/commerce/SubscriptionUtils.js");var _=a("./src/main/webapp/universal/src/shared/constants/HelpLinks.js");var i=a("./src/main/webapp/universal/src/apps/App/shared/utils/contentItemStringUtils.js");var C=a("./src/main/webapp/universal/src/apps/App/shared/components/ImagePicker/constants/LicensedAssetDestination.js");var E=i.getValueFnByKey;var w=["strong","em","underline","link","divider","align",["blockType",{availableBlockTypes:["p2","h1","h2","h3","code"]}],"divider","blockQuote","orderedList","unorderedList","divider","strikethrough","superscript","subscript","divider","indent","outdent","undo","redo","clearFormatting"];YUI.add("squarespace-content-item-types-settings",function(s){var t=s.namespace("Squarespace").ContentItemEditorSettings={};t.fields={};t.fields.url={ctor:s.Squarespace.DialogFields.Url,config:{name:"urlId",prefix:"{urlPrefix}",filter:h.URL_SLUG_WITH_SLASH,additionalValidators:["optional-on-creation","url-slug-required-if-exists","url-slug-max-length"],"strings.title":E("url"),"strings.description":E("whileSquarespaceGeneratesUrLsForYourSAutomaticallyYouCanOptionallyCreateACustomUrlForThisAbove"),"strings.placeholder":"…"}};t.fields.author={ctor:s.Squarespace.DialogFields.Select,config:{name:"authorId",prefix:"","strings.title":o("Author"),className:"thin dark",icon:"user",options:{$valueFn:function(e){var t=[];if(Static.SQUARESPACE_CONTEXT.memberAccountNames)for(var a in Static.SQUARESPACE_CONTEXT.memberAccountNames)t.push({value:a,label:s.Escape.html(Static.SQUARESPACE_CONTEXT.memberAccountNames[a].displayName)});else t.push({value:0,label:o("Automatic")});e.authorId&&!Static.SQUARESPACE_CONTEXT.memberAccountNames[e.authorId]&&(e.author?t.push({label:s.Escape.html(e.author.displayName),value:e.authorId}):t.push({value:e.authorId,label:""}));return t}},defaultValue:{$valueFn:function(){return Static.SQUARESPACE_CONTEXT.authenticatedAccount.id}}}};t.fields.sourceUrl={ctor:s.Squarespace.DialogFields.Text,config:{name:"sourceUrl",strings:{title:o("Source URL"),placeholder:o("http://…"),description:E("sourceUrLsAreOftenDisplayedBelowToProvideAttributionOrFurtherReading")},className:"thin"}};t.fields.wysiwyg={ctor:s.Squarespace.DialogFields.Wysiwyg,config:{name:"body",editorHeight:227,classNames:"major"}};t.fields.layout={$when:function(e){return!e.disableLayout},ctor:s.Squarespace.DialogFields.Layout,config:{name:"body",contentItem:{$valueFn:function(e){return e.model},$dontRecurse:true},itemClass:{$valueFn:function(e){return e.model.name}}}};t.fields.excerpt={ctor:s.Squarespace.DialogFields.Wysiwyg,config:{name:"excerpt",toolbarOptions:w,type:p.SchemaTypes.CLASSIC,editorHeight:147,classNames:"major",title:o("Excerpt"),"strings.title":o("Excerpt"),description:o("Excerpts are used most often on the {collectionType|lower} list page."),preserveWhitespace:false,isNullable:true}};t.fields.mainImage={ctor:{$valueFn:function(e){if(e.recordType===s.Squarespace.RecordType.STORE_ITEM)return s.Squarespace.DialogFields.FileImage;return s.Squarespace.DialogFields.FileImageLicensed}},config:{contentType:"image",name:"mainImage",width:250,height:250,square:true,imageDestination:C.CONTENT_ITEM_MAIN_IMAGE,mode:g.ITEM,strings:{title:o("Thumbnail Image")},asyncUploadUrlFn:{$valueFn:function(e){return e.model.getMainImageUploadUrl.bind(e.model)}},preflight:{$valueFn:function(e){var i=e.model;return function(a){if(i.get("id"))a();else{i.once("save",function(){var t=e.editor.get("dialog").getField("mainImage");i.getMainImageUploadUrl(function(e){t.uploader.set("uploadURL",e);a()})},i);e.editor.autoSave()}}}}}};t.fields.clickthroughUrl={ctor:s.Squarespace.DialogFields.CreateLink,config:{name:"clickthroughUrl","strings.title":o("Clickthrough URL"),disableNewWindow:true}};t.fields.title={ctor:s.Squarespace.DialogFields.Text,countHeight:true,config:{name:"title",className:"large","strings.placeholder":E("enterTitle"),escapeText:true},$when:function(e){return!e.disableTitle}};t.fields.childItemsGrid={ctor:s.Squarespace.DialogFields.ContentItemGrid,config:{name:"gallery",width:300,height:340,contentItemImageOptions:{showWorkflowState:false,showActionOverlay:true,actionOverlayButtons:[s.Squarespace.ActionOverlayButtons.EDIT_IMAGE,s.Squarespace.ActionOverlayButtons.REMOVE_IMAGE]},showActionTray:false,acceptTypes:["image","video"],uploadPreflight:{$valueFn:function(t){var a=t.model;return function(e){if(a.get("id"))e();else{a.once("save",function(){e()},a);t.editor.autoSave()}}}}}};t.fields.tags={ctor:s.Squarespace.DialogFields.Stringset,config:{mode:"input",requestUrl:"/api/commondata/GetAutoCompleteTags",name:"tags",title:o("Tags"),maxMemberChars:d.MAX_TAG_LENGTH,addText:o("Click to add tags."),emptyText:o("No tags added."),memberClass:"tag",editorLabel:o("Add Tags"),description:o("Click to edit tags."),collectionId:"{collectionId}"}};t.fields.categories={ctor:s.Squarespace.DialogFields.Stringset,config:{mode:"select",name:"categories",title:o("Categories"),requestUrl:"/api/commondata/GetCollectionCategories",maxMemberChars:d.MAX_CATEGORY_LENGTH,addText:o("Click to add categories."),emptyText:o("No categories added."),memberClass:"category",editorLabel:o("Pick Categories"),description:o("Click to choose categories."),canAddMembers:true,addMemberText:o("Create Category"),collectionId:"{collectionId}"}};t.fields.productVariantsPricingPlaceholder={ctor:s.Squarespace.DialogFields.VariantsPricingPlaceholder,config:{name:"pricingPlaceholder","strings.title":o("Pricing & Variants")}};t.fields.productDigitalPricingPlaceholder={ctor:s.Squarespace.DialogFields.DigitalPricingPlaceholder,config:{name:"pricingPlaceholder","strings.title":o("Pricing")}};t.fields.productGiftCardPricingPlaceholder={ctor:s.Squarespace.DialogFields.GiftCardPricingPlaceholder,config:{name:"pricingPlaceholder","strings.title":o("Values")}};t.fields.featured={ctor:s.Squarespace.DialogFields.Check,name:"starred",config:{"strings.title":E("featured"),"strings.description":E("someTemplatesAndBlocksWillHighlightFlaggedAsFeatured")}};t.fields.passthrough={ctor:s.Squarespace.DialogFields.Check,name:"passthrough",config:{"strings.title":E("titleShouldLinkToSourceUrl")}};t.groups={type:"splitter"};t.groups.tagging={type:"stack",fields:[{$include:"fields.tags"},{$include:"fields.categories"}]};t.groups.commenting={ctor:s.Squarespace.DialogFields.LegacyStateflow,config:{name:"commenting",allowNever:true,states:{allow:{title:o("Comments On"),optionDesc:E("commentsAreAllowedOnThis"),stateDesc:o("Disable comments [DURATION].")},disable:{title:o("Comments Off"),optionDesc:o("No comments allowed."),stateDesc:o("No comments allowed.")}},stateOrder:["allow","disable"]}};t.groups.publishingWorkflow={ctor:s.Squarespace.DialogFields.LegacyStateflow,config:{name:"workflow",states:{published:{title:o("Published"),optionDesc:E("publishThisNow"),stateDesc:o("Published on [DATE].")},scheduled:{title:o("Scheduled"),optionDesc:E("publishThisInTheFuture"),stateDesc:o("Publish [DURATION].")},needsreview:{title:o("Needs Review"),optionDesc:E("markThisForReview"),stateDesc:E("willBeAddedToReviewQueue")},draft:{title:o("Draft"),optionDesc:E("saveThisForLaterEditing"),stateDesc:E("thisWillNotBeVisible")}},stateOrder:["published","scheduled","needsreview","draft"]}};t.tabs={};t.tabs.primary={};t.tabs.primary.base={tabTitle:o("Content"),fields:[{type:"splitter",countHeight:true,fields:[{$include:["groups.tagging",{width:.36}],$update:{tags:{style:"thin"}}},{$include:"groups.commenting",$concat:true,$update:{".commenting":{width:.29},statepicker:{direction:"up",style:"minor"}}},{$include:"groups.publishingWorkflow",$concat:true,$update:{".workflow":{width:.35},statepicker:{direction:"up",style:"minor"}}}]}]};t.tabs.primary.text={icon:m.getIconUrl("text",24,"light-solid"),fields:[{$include:"fields.title"},{$include:["fields.layout",{verticalSpan:true}]}]};t.tabs.primary.image={icon:m.getIconUrl("image",24,"light-solid"),fields:[{type:"splitter",fields:[{ctor:s.Squarespace.DialogFields.FileImageLicensed,config:{height:248,width:.35,constrainMethod:"contain",contentType:"image",mode:g.ITEM,name:"mainImage",uploadMessage:o("Add a thumbnail image"),title:"",description:"",imageDestination:C.CONTENT_ITEM_MAIN_IMAGE,asyncUploadUrlFn:{$valueFn:function(e){return e.model.getMainImageUploadUrl.bind(e.model)}}}},{type:"stack",width:.65,fields:[{$include:["fields.title",{"config.strings.placeholder":o("Title")}]},{$include:["fields.wysiwyg",{"config.editorHeight":322}]}]}]}]};t.tabs.primary.quote={icon:m.getIconUrl("quote",24,"light-solid"),fields:[{type:"textarea",name:"quote",height:140,countHeight:true,title:o("Enter a quote…"),titleStyle:"inline",style:"title"},{ctor:s.Squarespace.DialogFields.Wysiwyg,config:{name:"body",toolbarOptions:w,type:p.SchemaTypes.CLASSIC,editorHeight:227,classNames:"major"}}]};t.tabs.primary.link={icon:m.getIconUrl("link",24,"light-solid"),fields:[{$include:["fields.title",{"config.strings.placeholder":o("Enter a link title…")}]},{$include:["fields.title",{"config.name":"url","config.strings.placeholder":o("Enter a link URL…")}]},{$include:["fields.layout",{verticalSpan:true}]}]};t.tabs.primary.video={icon:m.getIconUrl("video",24,"light-solid"),fields:[{type:"splitter",fields:[{type:"stack",width:.3,fields:[{ctor:s.Squarespace.DialogFields.Description,config:{name:"customThumbDescription",text:o("<strong>Custom Thumbnail</strong> Upload an image to be used with the image overlay.")}},{$include:["fields.mainImage",{"strings.title":"","config.height":220,"config.width":220,"config.contentLabel":o("video thumbnail")}]},{ctor:s.Squarespace.DialogFields.Description,config:{name:"automaticThumbDescription",text:""}},{name:"overlay",ctor:s.Squarespace.DialogFields.Check,config:{"strings.title":o("Use Thumbnail")}}]},{type:"stack",width:.7,fields:[{ctor:s.Squarespace.DialogFields.Oembed,config:{name:"oembed",filter:"video","strings.description":o("<strong>Paste the URL</strong> of a video (Vimeo, YouTube, Animoto, Wistia, etc.) you'd like to embed, and Squarespace will attempt to locate and format this video for your site.")}},{$include:"fields.title"},{$when:function(e){return t.tabs.primary.video.isLayoutField(e.body)},$include:["fields.layout",{height:190}]},{$when:function(e){return!t.tabs.primary.video.isLayoutField(e.body)},$include:["fields.wysiwyg",{ctor:s.Squarespace.DialogFields.Wysiwyg,config:{name:"body",editorHeight:217,classNames:"major"}}]}]}]}],isLayoutField:function(e){return s.Lang.isValue(e)&&s.Lang.isValue(e.layout)||"4fa14d3ce4b08a53fa26468e"===Static.SQUARESPACE_CONTEXT.website.id}};t.tabs.primary.event={icon:m.getIconUrl("event",32,"light-solid"),fields:[{$include:["fields.title",{title:o("Enter a event title..")}]},{type:"splitter",countHeight:true,fields:[{ctor:s.Squarespace.DialogFields.DateTimePicker,config:{name:"startDate",direction:"down",width:.5,"strings.title":"","strings.description":o("Start on [DATE]."),dateFormat:"llllLT"}},{ctor:s.Squarespace.DialogFields.DateTimePicker,config:{name:"endDate",direction:"down",width:.5,dateFormat:"llllLT","strings.title":"","strings.description":o("End on [DATE]."),"strings.errorMessage":o("End time must be later than start time."),validator:function(e){var t=e;var a=this.get("dialog").getField("startDate").get("data");if(null===t)return true;var i=1e3*Math.floor(a/1e3);var s=1e3*Math.floor(t/1e3);if(s<i)return false;return true}}}]},{$include:["fields.layout",{verticalSpan:true}]}]};t.tabs.primary.gallery={icon:m.getIconUrl("gallery",24,"light-solid"),fields:[{$include:"fields.title"},{$include:["fields.childItemsGrid",{"config.width":739,"config.height":135}]},{$include:["fields.layout",{height:150}]}]};t.tabs.primary.audio={icon:m.getIconUrl("audio",24,"light-solid"),fields:[{type:"splitter",height:600,fields:[{type:"stack",width:.35,fields:[{ctor:s.Squarespace.DialogFields.FileAudio,disableEdit:{$valueFn:function(e){return s.Lang.isValue(e.model.get("proxyForId"))}},height:248,constrainMethod:"contain",contentType:"audio",mode:g.ITEM,name:"audioTrack",uploadMessage:o("Add an audio track")},{$include:["fields.title",{"config.name":"artistName","config.strings.title":o("Artist Name"),"config.strings.placeholder":o("Enter an artist name…"),"config.className":"thin","config.submitOnEnter":true}]}]},{type:"stack",width:.65,height:600,fields:[{$include:["fields.title",{"config.submitOnEnter":true,"config.strings.placeholder":E("enterTitle")}]},{ctor:s.Squarespace.DialogFields.Wysiwyg,config:{name:"body",editorHeight:300,classNames:"major",isNullable:true}}]}]}]};t.tabs.primary.product={};t.tabs.primary.product.base={icon:m.getIconUrl("products",32,"light"),fields:[{type:"splitter",fields:[{type:"stack",width:.33,fields:[{$include:["fields.childItemsGrid",{"config.height":392,"config.contentItemImageOptions.actionOverlayButtons":[s.Squarespace.ActionOverlayButtons.IMAGE_INFO,s.Squarespace.ActionOverlayButtons.EDIT_IMAGE,s.Squarespace.ActionOverlayButtons.REMOVE_IMAGE]}]}]},{type:"stack",width:.67,verticalSpan:true,fields:[{$include:["fields.title",{"config.strings.placeholder":E("enterName")}]},{name:"pricingPlaceholder"},{type:"stack",float:"none",fields:[{ctor:s.Squarespace.DialogFields.Check,config:{name:"isSubscribable","strings.title":o("Subscription Product"),"strings.description":o("Charges customers on a recurring basis.")+" <a href="+_.COMMERCE_SUBSCRIPTIONS+' target="_blank"class="learn-more-link" onclick="event.stopPropagation();">'+o("Learn more")+"</a>"},$when:function(e){return y.isSubscribableProductTypeForMerchant(e.structuredContent.productType)}},{ctor:s.Squarespace.DialogFields.SubscriptionDetailsPlaceholder,config:{name:"subscriptionDetails"},$when:function(e){return y.isSubscribableProductTypeForMerchant(e.structuredContent.productType)}}]},{ctor:s.Squarespace.DialogFields.Wysiwyg,config:{name:"excerpt",toolbarOptions:w,type:p.SchemaTypes.CLASSIC,editorHeight:156,classNames:"major",title:o("Brief Description")}}]}]},{type:"splitter",fields:[{$include:["groups.tagging",{width:.39}]},{ctor:s.Squarespace.DialogFields.LegacyStateflow,direction:"up",style:"minor",name:"workflow",width:.5,states:{published:{title:o("Visible"),optionDesc:o("Currently visible in your storefront."),stateDesc:o("Made visible on [DATE].")},scheduled:{title:o("Scheduled"),optionDesc:o("Remains hidden from your storefront until scheduled date."),stateDesc:o("Will be visible [DURATION].")},draft:{title:o("Hidden"),optionDesc:o("Not visible in your storefront."),stateDesc:o("Not visible in your storefront.")}},stateOrder:["published","scheduled","draft"]}]}]};t.tabs.product={};t.tabs.product.variantsPhysical={tabTitle:o("Pricing & Variants"),name:"variants_tab",fields:[{ctor:s.Squarespace.DialogFields.VariantsTable,config:{name:"variants",isPhysical:true,measurementStandard:{$valueFn:function(){return s.Squarespace.Context.getInstance().get("websiteSettings").get("storeSettings").measurementStandard}},productModel:{$valueFn:function(e){if(e)return e.model},$dontRecurse:true}}}]};t.tabs.product.variantsService={tabTitle:o("Pricing & Variants"),name:"variants_tab",fields:[{ctor:s.Squarespace.DialogFields.VariantsTable,config:{name:"variants",isPhysical:false,productModel:{$valueFn:function(e){if(e)return e.model},$dontRecurse:true}}}]};t.tabs.product.variantsGiftCard={tabTitle:o("Values"),name:"values_tab",fields:[{ctor:s.Squarespace.DialogFields.VariantsTable,config:{name:"variants",isPhysical:false,isGiftCard:true,productModel:{$valueFn:function(e){if(e)return e.model},$dontRecurse:true}}}]};t.tabs.product.upload={tabTitle:o("Pricing & Upload"),name:"variants_tab",fields:[{type:"splitter",fields:[{ctor:s.Squarespace.DialogFields.File,config:{name:"digitalGoods",title:o("Digital Goods"),contentType:"file",recordType:s.Squarespace.RecordType.DIGITALGOOD,childAsset:true,mode:g.CHILD,maxSize:300,childType:u.DIGITAL_GOODS,constrainMethod:"contain",height:200,width:.27,description:o("Customers will receive this file after purchase."),preflight:{$valueFn:function(s){var n=s.model;return function(e){var t=s.editor;var a=t.get("dialog").getField("digitalGoods");var i=function(){var e=a.get("data");e&&e.set("parentId",n.get("id"));a.refreshItemPostData();a.set("uploadUrl","/api/content/product-pages/"+n.get("collectionId")+"/products/"+n.get("id")+"/digital-good")};if(n.get("id")){i();n.clearChildGroup("digitalGoods",e)}else{n.once("save",function(){i();e&&e()});t.autoSave()}}}}}},{type:"stack",width:.5,fields:[{ctor:s.Squarespace.DialogFields.MoneyText,width:.5,name:"priceCents","strings.title":o("Price")},{ctor:s.Squarespace.DialogFields.MoneyText,width:.5,name:"salePriceCents","strings.title":o("Sale Price")},{ctor:s.Squarespace.DialogFields.Check,width:.5,name:"onSale",config:{"strings.title":o("On Sale"),"strings.description":o("Charge customers the sale price.")}}]}]}]};t.tabs.product.additionalInfo={tabTitle:o("Additional Info"),name:"additionalInfo",fields:[{ctor:s.Squarespace.DialogFields.Description,config:{title:o("Additional Info"),text:o("Put additional info on your product page: a longer description, videos, or other content."),padding:[0,10]}},{$include:["fields.layout",{height:310}]}]};t.tabs.product.workflow={tabTitle:o("Form"),name:"workflow",fields:[{type:"splitter",fields:[{ctor:s.Squarespace.DialogFields.Description,config:{width:.5,name:"additionalInformationDescription",title:o("Collect Additional Information"),text:o("Create a Product Form that shoppers will be prompted to fill out when adding this product to their cart. You can create a new custom Product Form for this product or select to apply an existing Product Form you have created for other products.")}},{ctor:s.Squarespace.DialogFields.FormSelector,config:{width:.5,name:"additionalFieldsFormId",formType:s.Squarespace.FormType.PRODUCT}}]}]};t.tabs.options={};t.tabs.options.default={tabTitle:o("Options"),name:"options",scroll:true,fields:[{type:"splitter",countHeight:true,fields:[{$include:["fields.mainImage",{width:.4}]},{type:"stack",width:.6,fields:[{$include:"fields.url"},{$include:"fields.author"},{$include:"fields.sourceUrl"},{$include:"fields.passthrough",$when:function(e){return e.enablePassthrough}}]}]},{$include:"fields.excerpt",$when:function(e){return e.enableExcerpt}},{$include:"fields.featured",$when:function(e){return e.enableFeatured}}]};t.tabs.options.image=s.merge(t.tabs.options.default,{fields:[{type:"splitter",fields:[{type:"stack",fields:[{$include:["fields.url",{width:.6}]},{$include:["fields.author",{width:.4}]},{type:"splitter",fields:[{$include:["fields.sourceUrl",{"config.width":420}]},{$include:["fields.clickthroughUrl",{"config.width":284}]}]},{$include:"fields.featured"}]}]}]});t.tabs.options.video=t.tabs.options.audio=s.merge(t.tabs.options.default,{fields:[{$include:"fields.url"},{$include:"fields.author"},{$include:"fields.sourceUrl"},{$include:"fields.featured",$when:function(e){return e.enableFeatured}}]});t.tabs.options.product=s.merge(t.tabs.options.default,{fields:[{type:"splitter",fields:[{$include:["fields.mainImage",{width:.35}]},{type:"stack",width:.65,fields:[{$include:["fields.url",{title:o("Product URL"),config:{name:"urlId",prefix:"{urlPrefix}",filter:h.URL_SLUG_WITH_SLASH,"strings.title":o("Product URL"),"strings.description":o("While Squarespace generates URLs for your products automatically, you can optionally create a custom URL."),"strings.placeholder":"…"}}]},{ctor:s.Squarespace.DialogFields.Check,config:{name:"useCustomAddButtonText","strings.title":o("Use Custom Add Button Label"),"strings.description":o('Default button label is "Add To Cart" and "Purchase" when express checkout is enabled.')}},{ctor:s.Squarespace.DialogFields.Text,config:{name:"customAddButtonText"}},{ctor:s.Squarespace.DialogFields.Check,name:"starred",config:{"strings.title":o("Featured Product"),"strings.description":o('Some templates and blocks will highlight products marked as "featured".')}}]}]}]});t.tabs.location={tabTitle:o("Location"),name:"Location",fields:[{type:"splitter",fields:[{ctor:s.Squarespace.DialogFields.Map,config:{name:"location",title:o("Enter a location…"),titleStyle:"inline",height:400,googleTrackingContext:{productPage:"location-tab",productSection:"panel"}}}]}]};var e={type:"splitter",fields:[{ctor:s.Squarespace.DialogFields.Description,config:{title:o("Social"),text:o("Select the accounts below you would like to update when you post this item.")}},{name:"shareStates",ctor:s.Squarespace.DialogFields.ItemPush,config:{pushedServices:{$valueFn:function(e){return e.pushedServices}},published:{$valueFn:function(e){return e.workflowState===s.Squarespace.WorkflowStates.PUBLISHED}},pendingPushedServices:{$valueFn:function(e){return e.pendingPushedServices}},models:{$valueFn:function(){return s.Squarespace.Models.ConnectedAccounts.loadFromStore()},$dontRecurse:true},recordType:{$valueFn:function(e){if(e.model)return e.model.get("recordType");return null}}}}]};t.tabs.social={tabTitle:o("Share"),name:"social",scroll:true,fields:[e]};var a={ctor:s.Squarespace.DialogFields.ReactDialogField,config:{component:v,name:"createEmailDraftComponent",props:{model:{$valueFn:function(e){return e.model.toJSON()}}}}};t.tabs.share={tabTitle:o("Share"),name:"share",fields:[a,e]};function i(e){return""===e}function n(){var e=S.getState();var t={seoDescription:e.seoDescription,seoImageId:e.seoSocialSharingImageId,seoTitle:e.seoTitle,seoHidden:e.isHidden};t=r(t,i);return{isDirty:e.isDirty,seoData:t}}t.tabs.seo={tabTitle:o("SEO"),name:"seo",reactData:{component:b,props:{collectionId:{$valueFn:function(e){return e.id}},getData:{$valueFn:function(){return n}},isContentItem:true}}};t.tabs.seoSocial={tabTitle:o("Social"),name:"seoSocial",reactData:{component:b,props:{collectionId:{$valueFn:function(e){return e.id}},getData:{$valueFn:function(){return n}},isContentItem:true,isSocialTab:true}}};t.buttons=[{type:"cancel",title:o("Cancel")},{type:"remove",title:o("Delete")},{$value:{type:"duplicate",title:o("Duplicate")},$when:function(e){var t=e.editor&&e.editor.get("editorConfiguration")||{};if(f.isEventItem(e)&&l.isFeatureEnabled(c.EVENTS_PANEL_70)&&!s.Squarespace.Utils.isDeveloperModeEnabled())return false;var a=true!==t.minimal;var i=s.Lang.isString(e.id);return a&&i}},{type:"saveAndClose",title:{$valueFn:function(e){if(e.onlySetAttrsOnSave)return o("Apply");return o("Save")}}},{$value:{type:"saveAndPublish",className:"saveAndPublish",title:o("Save & Publish")},$when:function(e){if(e.onlySetAttrsOnSave)return false;return-1!==[s.Squarespace.WorkflowStates.DRAFT,s.Squarespace.WorkflowStates.NEEDS_REVIEW].indexOf(e.workflowState)}}]},"1.0",{requires:["squarespace-context","squarespace-dialog-check","squarespace-dialog-content-item-grid","squarespace-dialog-create-link","squarespace-dialog-datetime-picker","squarespace-dialog-description","squarespace-dialog-digital-pricing-placeholder","squarespace-dialog-giftcard-pricing-placeholder","squarespace-dialog-subscription-details-placeholder","squarespace-dialog-fields","squarespace-dialog-file-audio","squarespace-dialog-file-image","squarespace-dialog-form-builder","squarespace-dialog-form-preview","squarespace-dialog-form-selector","squarespace-dialog-html","squarespace-dialog-item-push","squarespace-dialog-layout","squarespace-dialog-legacy-stateflow","squarespace-dialog-map","squarespace-dialog-money-text","squarespace-dialog-oembed","squarespace-dialog-pricing-placeholder","squarespace-dialog-select","squarespace-dialog-stringset","squarespace-dialog-text","squarespace-dialog-text-area","squarespace-dialog-variants-pricing-placeholder","squarespace-dialog-variants-table","squarespace-dialog-wysiwyg","squarespace-enum","squarespace-models-connected-accounts","squarespace-react-dialog-field","squarespace-tab-view"]})},"./src/main/webapp/universal/scripts-v6/content-item-types/text.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var n=a("./src/main/webapp/universal/src/shared/utils/UrlUtils.js");var r=a("./src/main/webapp/universal/src/apps/App/shared/actions/campaigns/BlogToEmailActions.js");var o=a("./src/main/webapp/universal/src/apps/App/shared/stores/AuthenticatedAccountStore.js");var l=a("./src/main/webapp/frontend/packages/enums/WorkflowStates.js");var c=a("./src/main/webapp/universal/src/apps/App/components/SEOContentCollectionTab/actions/SEOContentCollectionTabActions.js");var u=a("./src/main/webapp/universal/src/shared/utils/TemplateVersionUtils.js");var d=a("./src/main/webapp/universal/src/apps/App/shared/actions/PageSectionsActions.js");YUI.add("squarespace-content-item-types-text",function(t){t.namespace("Squarespace.ContentItemEditor");var e={title:i("Edit {presentationName}"),width:750,name:"text-post-editor",overlay:.5,verticalHeight:"full",initialDataByReference:true,tabs:[{$include:["tabs.primary.base","tabs.primary.text"]},{$include:"tabs.options.default"},{$include:"tabs.seo"},{$include:"tabs.seoSocial"},{$include:"tabs.share"},{$include:"tabs.location"}],buttons:{$include:"buttons"}};var s=t.namespace("Squarespace.ContentItemEditor").Text=t.Base.create("TextContentItemEditor",t.Squarespace.ContentItemEditor.Base,[],{_dialogOnReady:function(){s.superclass._dialogOnReady.apply(this,arguments);var e=this.get("dialog");var t=this.get("model");var a=t.get("workflowState");t.get("autoSaved")&&this._bindTitleToPostUrl();var i=e.getField("title");i.after("dataChange",this._updateSeoTitle,this);a!==l.DRAFT||o.isTutorialCompleted("CAMPAIGNS_BLOG_TO_EMAIL_MODAL")||e.on(["button-saveAndClose","button-saveAndPublish"],this._showBlogToEmailToast,this)},_updateSeoTitle:function(e){c.updateFieldNoEdit("title",e.newVal)},_bindTitleToPostUrl:function(){var e=this.get("dialog");var t=e.getField("title");var a=e.getField("urlId");if(t&&a){t.on("dataChange",function(e){var t=a.get("data").split("/");t[t.length-1]=n.createUrlWithSlash(e.newVal);a.set("data",t.join("/"))},this);e.once(["close","dismiss"],function(e){this.get("model").set("autoSaved",false)},this)}},_removeItem:function(e){this.set("onlySetAttrsOnSave",true);this.save(null,function(){e.set("workflowState",t.Squarespace.WorkflowStates.DELETED);e.save()});this.set("onlySetAttrsOnSave",false)},getPresentationName:function(){return i("Post")},_getTemplateContext:function(){var e=s.superclass._getTemplateContext.call(this);e.enableFeatured=true;e.enablePassthrough=true;e.enableExcerpt=true;return e},_showBlogToEmailToast:function(){var t=this.get("model");t.once("save",function(){var e=t.toJSON();e.workflowState===l.PUBLISHED&&r.showDraftCreationModal({id:e.id,collectionId:e.collectionId,postUrl:e.fullUrl})})},_confirmAndDuplicate:function(){if(!u.isSevenOne())return s.superclass._confirmAndDuplicate.apply(this,arguments);d.duplicateBlogPost()}},{ATTRS:{editorConfiguration:{value:e},"strings.errorTitle":{value:i("Error Saving")}}})},"1.0",{requires:["squarespace-content-item-types-base","squarespace-content-item-types-post-editors"]})},"./src/main/webapp/universal/scripts-v6/content-item-types/video.js":function(e,t,a){var n=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var r=a("./src/main/webapp/universal/src/shared/utils/rendering.js");var o=a("./src/main/webapp/universal/src/shared/constants/TextEditor.js");YUI.add("squarespace-content-item-types-video",function(l){var e=l.Base.create("VideoPostEditorBehavior",l.Base,[],{initializer:function(){var n=this.get("model");if(n.get("recordType")!==l.Squarespace.Enums.RecordType.VIDEO)return;var r=this.get("dialog");var o;r.on("ready",function(){var e=r.getField("oembed");var t=r.getField("mainImage");var i=r.getField("title");var s=r.getField("sourceUrl");e.focus();e.on("dataChange",function(a){s&&s.set("data",a.newVal.url);i.set("data",a.newVal.title);o&&o.cancel();o=l.later(1e3,this,function(){var e=a.newVal;if(e.thumbnailUrl)if(n.get("id"))e.thumbnailUrl&&this._applyDefaultThumbnailImage();else{n.autoSave();var t=r.getField("mainImage");t.get("data").after("idChange",function(){this._applyDefaultThumbnailImage()},this)}})},this);t.after("dataChange",this._syncThumbnailRestore,this);this._syncThumbnailRestore()},this)},_applyDefaultThumbnailImage:function(){var e=this.get("dialog");var t=e.getField("oembed").getValue().thumbnailUrl;e.getField("mainImage").saveFromUrl(t);e.getField("overlay").set("data",true)},_syncThumbnailRestore:function(){this._thumbnailRestoreEv&&this._thumbnailRestoreEv.detach();var e=this.get("dialog");var t=e.getField("oembed");var a=e.getField("mainImage");var i=e.getField("automaticThumbDescription");if(t.getValue()&&t.getValue().thumbnailUrl&&(!a.get("data")||a.get("data")&&!a.get("data").get("hasFileData"))){i.setText('<a href="#" class="restore-thumbnail">'+n("Restore video provider's thumbnail.")+"</a>");this._thumbnailRestoreEv=i.get("boundingBox").one(".restore-thumbnail").on("click",function(e){e&&e.halt();this._applyDefaultThumbnailImage()},this)}else i.setText("")}});var t={name:"video-editor",title:n("Edit {presentationName}"),width:800,height:530,overlay:.5,tabs:[{$include:["tabs.primary.base","tabs.primary.video"]},{$include:"tabs.options.video"},{$include:"tabs.location"},{$include:"tabs.social"}],buttons:{$include:"buttons"},initialDataByReference:true};var a=l.namespace("Squarespace.ContentItemEditor").Video=l.Base.create("VideoContentItemEditor",l.Squarespace.ContentItemEditor.Base,[e],{getDialogData:function(){var e=a.superclass.getDialogData.call(this);var t=e.structuredContent;e.oembed=t.oembed;e.overlay=t.overlay;return e},sanitizeDialogData:function(e){e=a.superclass.sanitizeDialogData.call(this,e);e.structuredContent=l.merge(e.structuredContent,{oembed:e.oembed,overlay:e.overlay});delete e.oembed;delete e.overlay;return e},_getTemplateContext:function(){var e=a.superclass._getTemplateContext.call(this);e.enableFeatured=true;return e}},{ATTRS:{editorConfiguration:{value:t}}});var i={title:n("Edit {presentationName}"),name:"minimal-video-editor",width:800,height:454,overlay:.5,closeOthers:false,style:"flyout",flyoutPointerDirection:"hidden",tabs:[{$include:["tabs.primary.video",{icon:r.getIconUrl("video",16,"light-solid")}],$update:{".body":{ctor:l.Squarespace.DialogFields.Wysiwyg,config:{name:"body",type:o.SchemaTypes.CLASSIC,editorHeight:147,classNames:"major",title:n("Description"),description:""}}}}],buttons:[{type:"cancel",title:n("Cancel")},{type:"remove",title:{$valueFn:function(e){return e.id?n("Remove"):n("Discard")}}},{$value:{type:"duplicate",title:n("Duplicate")},$when:function(e){return e.recordType===l.Squarespace.Enums.RecordType.STORE_ITEM}},{type:"saveAndClose",title:n("Save")}]};var s=l.namespace("Squarespace.ContentItemEditor").VideoMinimal=l.Base.create("VideoContentItemEditorMinimal",a,[],{},{ATTRS:{editorConfiguration:{value:i},anchorNode:{getter:function(){return null}}}});l.Squarespace.ContentItemEditor.VideoMinimalGlobal=l.Base.create("VideoContentItemEditorMinimalGlobal",s,[],{_getTemplateContext:function(){var e=this.get("model").toJSON();e.presentationName=this.getPresentationName();e.model=this.get("model");e.editor=this;return e}},{})},"1.0",{requires:["squarespace-content-item-types-base","squarespace-dialog-wysiwyg"]})},"./src/main/webapp/universal/scripts-v6/content-item-utils.js":function(e,t,a){var s=a("./src/main/webapp/frontend/packages/enums/MediaProcessingState.js");var d=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var r=a("./src/main/webapp/universal/src/shared/constants/UploadModes.js");var n=a("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/ContentBrowserAPI.js").default;YUI.add("squarespace-content-item-utils",function(u){var a=[s.QUEUED,s.PROCESSING];var i=[s.ERROR,s.DOWNLOAD_ERROR,s.ERROR_TOO_LARGE,s.ERROR_FILE_NOT_FOUND,s.ERROR_UNSUPPORTED_IMAGE_TYPE];u.namespace("Squarespace").ContentItemUtils={getWorkflowStateIdentifier:function(e){if(e===u.Squarespace.WorkflowStates.PUBLISHED)return"published";if(e===u.Squarespace.WorkflowStates.SCHEDULED)return"scheduled";if(e===u.Squarespace.WorkflowStates.NEEDS_REVIEW)return"needsreview";if(e===u.Squarespace.WorkflowStates.DRAFT)return"draft";return"draft"},getWorkflowStateCopy:function(e){if(e===u.Squarespace.WorkflowStates.PUBLISHED)return d("Published");if(e===u.Squarespace.WorkflowStates.SCHEDULED)return d("Scheduled");if(e===u.Squarespace.WorkflowStates.NEEDS_REVIEW)return d("Needs Review");if(e===u.Squarespace.WorkflowStates.DRAFT)return d("Draft");return d("Draft")},getCommentStateIdentifier:function(e){if(e===u.Squarespace.CommentStates.DISABLED)return"disable";if(e===u.Squarespace.CommentStates.ENABLED)return"allow";return"allow"},isErrorProcessingState:function(e){var t=e.get("mediaProcessingState");return-1!==i.indexOf(t)},isProcessingState:function(e){var t=e.get("mediaProcessingState");return-1!==a.indexOf(t)},sanitizeDataForCustomType:function(e,t,a){if(!t)return;var i=t.fields;u.Lang.isObject(e.customContent)||(e.customContent={customType:t.name});for(var s=0;s<i.length;s++){var n=i[s];var r=n.name;switch(n.type){case"text":case"wysiwyg":case"checkbox":e.customContent[r]=e["custom-"+r];delete e["custom-"+r];break;case"image":n=e["custom-"+r];if(n&&n.get("hasFileData")){var o=e["custom-"+r].getAttrs();e.customContent[r]=this.sanitizeImageItemContext(o)}else delete e.customContent[r];delete e["custom-"+r];break;case"gallery":var l=a.get("dialog").getField("custom-"+r).get("data").get("items");var c=l.toJSON();e.customContent[r]=c.map(this.sanitizeImageItemContext);delete e["custom-"+r];break;default:u.Squarespace.Logger.log(d("Custom Type Saving Error"),{message:d("Could not find anything for field."),field:n});break}}},sanitizeImageItemContext:function(e){delete e.attachment;delete e.authorId;delete e.categories;delete e.childType;delete e.childrenGroups;delete e.cloned;delete e.collectionId;delete e.commentCount;delete e.commentDisableOn;delete e.commentState;delete e.coverImageUrl;delete e.customContent;delete e.dataIsResolved;delete e.dataSize;delete e.dislikeCount;delete e.excerpt;delete e.internalContentNode;delete e.isGlobalFakeContentItem;delete e.isPusher;delete e.items;delete e.licensedAssetId;delete e.licensedAssetPreview;delete e.likeCount;delete e.location;delete e.mediaIsUploading;delete e.nextDisplayIndex;delete e.passthrough;delete e.postItemInjectCode;delete e.promotedBlock;delete e.promotedBlockType;delete e.proxyForId;delete e.publicCommentCount;delete e.sourceUrl;delete e.starred;delete e.structuredContent;delete e.tags;delete e.unsaved;delete e.updatedOn;delete e.version;delete e.websiteId;delete e.author;delete e.pendingPushedServices;delete e.pushedServices;delete e.shareStates;return e},sanitizeTemplateContextForCustomType:function(e,t){t&&(e.presentationName=t.title)},setDataForCustomType:function(o,e,l){if(!u.Lang.isValue(e))return;var t=e.fields;u.Array.each(t,function(e,t){var a=e.type;var i=e.name;var s="custom-"+i;var n=u.Object.getValue(o,["customContent",i]);switch(a){case"text":case"wysiwyg":case"checkbox":o[s]=n;break;case"image":u.Lang.isValue(n)?o[s]=new u.Squarespace.Models.ContentItem(u.merge(n,{collectionId:l.get("model").get("collectionId"),parentId:l.get("model").get("id"),recordType:u.Squarespace.RecordType.IMAGE})):o[s]=new u.Squarespace.Models.ContentItem({collectionId:l.get("model").get("collectionId"),parentId:l.get("model").get("id"),recordType:u.Squarespace.RecordType.IMAGE});break;case"gallery":var r=new u.Squarespace.Models.ContentItem({parentId:l.get("model").get("id"),collectionId:l.get("model").get("collectionId"),recordType:u.Squarespace.RecordType.IMAGE});u.Lang.isValue(n)&&r.get("items").add(n);o[s]=r;break;default:u.Squarespace.Logger.log(d("Custom Type Saving Error"),{message:d("Could not find any data to set for field."),field:e});break}},this)},createCustomTypeFieldConfigs:function(e,s){var t=[];for(var a=0;a<e.length;a++){var i=e[a];switch(i.type){case"text":var n=i.title||"";t.push({$include:["fields.title",{"config.name":"custom-"+i.name,"config.strings.title":n,"config.strings.placeholder":""}]});break;case"checkbox":t.push({ctor:u.Squarespace.DialogFields.Check,config:{name:"custom-"+i.name,"strings.title":i.title}});break;case"wysiwyg":t.push({ctor:u.Squarespace.DialogFields.Description,config:{title:i.title||""}});t.push({ctor:u.Squarespace.DialogFields.Wysiwyg,config:{name:"custom-"+i.name,editorHeight:227,classNames:"major"}});break;case"image":(function(i){var e=i.title||d("Thumbnail Image");t.push({$include:["fields.mainImage",{"config.name":"custom-"+i.name,"config.type":i.type,"config.strings.title":e,"config.mode":r.CHILD,"config.childType":u.Squarespace.RecordType.IMAGE,"config.preflight":function(e){var t=s.get("model");var a=s.get("dialog").getField("custom-"+i.name);if(t.get("id")){if(e){if(a&&a.get("data")&&!a.get("data").get("parentId")){a.get("data").set("parentId",t.get("id"));a.refreshItemPostData()}e()}}else{t.once("save",function(){if(a&&a.get("data")){a.get("data").set("parentId",t.get("id"));a.refreshItemPostData()}e&&e()});s.autoSave()}},"config.asyncUploadUrlFn":null}]})})(i);break;case"gallery":(function(i){t.push({ctor:u.Squarespace.DialogFields.Description,config:{title:i.title||""}});t.push({$include:["fields.childItemsGrid",{"config.width":null,"config.height":220,"config.hasFullScreenToggle":true,"config.name":"custom-"+i.name,"config.type":i.type,"config.uploadPreflight":function(e){var t=s.get("model");var a=s.get("dialog").getField("custom-"+i.name);if(t.get("id")){if(e){a&&a.get("data")&&!a.get("data").get("parentId")&&a.get("data").set("parentId",t.get("id"));e()}}else{t.once("save",function(){a&&a.get("data")&&a.get("data").set("parentId",t.get("id"));e&&e()},t);s.autoSave()}},"config.contentItemImageOptions.actionOverlayButtons":[u.Squarespace.ActionOverlayButtons.IMAGE_INFO,u.Squarespace.ActionOverlayButtons.EDIT_IMAGE,u.Squarespace.ActionOverlayButtons.REMOVE_IMAGE]}]})})(i);break}}return t},setConfigurationForCustomType:function(e,t,a){if(!t)return;var i=this.createCustomTypeFieldConfigs(t.fields,a);var s={tabTitle:t.title,name:t.name,scroll:true,fields:i};e.tabs.push(s)},isStandardGalleryItem:function(e,t){return n.isGalleryItem(e.getAttrs())&&["gallery","project"].includes(t.get("typeName"))}}},"1.0",{requires:["base","squarespace-dialog-check","squarespace-dialog-description","squarespace-dialog-wysiwyg","squarespace-logger","squarespace-models-content-item","squarespace-util-authenticated"]})},"./src/main/webapp/universal/scripts-v6/content-manager-widgets/base.js":function(e,t,a){var r=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var i=a("./src/main/webapp/universal/src/shared/constants/LayoutEngineClassnames.js");var s=a("./src/main/webapp/universal/src/shared/utils/showPageViolations.js");var o=a("./src/main/webapp/universal/src/shared/utils/CMSV7Events.js");var l=a("./src/main/webapp/universal/src/shared/utils/CMSV7EventsCollectionHelpers.js");var c=a("./src/main/webapp/universal/src/apps/App/components/Annotations/utils/attachRedirectOnCollectionDestroy.js");var u=i.DISABLE_DRAG_SELECTION_CLASSNAME;YUI.add("squarespace-content-manager-widgets-base",function(n){n.namespace("Squarespace.ContentManagerWidgets");var i=n.Squarespace.ContentManagerWidgets.Base=n.Base.create("ContentManagerBase",n.Squarespace.Widgets.DataWidget,[n.WidgetChild,n.WidgetParent,n.Squarespace.Damask.Panel.MixinPanel,n.Squarespace.Damask.Panel.MixinPanelParent],{initializer:function(){this.headerTray=this.add(n.merge({childType:n.Squarespace.Widgets.LibraryManagerHeaderTray},this._getHeaderTrayOptions())).item(0)},destructor:function(){this.headerTray=null;if(this.unsupportedTray){this.unsupportedTray.destroy(true);this.unsupportedTray=null}if(this.exampleContentTray){this.exampleContentTray.destroy(true);this.exampleContentTray=null}},renderUI:function(){this.headerTray.render(this.get("contentBox"));this.get("contentBox").prepend(this.headerTray.get("boundingBox"))},bindUI:function(){i.superclass.bindUI.call(this);var e=this.get("collection");var t=this.get("id");var a="navigationTitle";this._registerEvent(e.after(a+"Change",function(e){this.headerTray.set("strings.title",e.newVal)},this));this._registerEvent(e.on("urlIdChange",function(t){n.Array.each(this.headerTray.get("buttons"),function(e){"view-page"===e.className&&(e.href=t.newVal)})},this));this._registerEvent(c(n,this.get("router"),e));this._bindDemoContentEvents();this._registerEvent(n.on(t+"|key",function(e){if(this.get("collection").get("isDemoCollection"))return;if(0===n.Squarespace.OPEN_DIALOGS.length&&!e.target.ancestor("input, textarea, [contenteditable=true]",true)){this._callAfterEnsuringSavedChanges(this.handleAddContentRequest);e.halt()}},window,"down:32",this))},_bindDemoContentEvents:function(){this._registerEvent(this.get("collection").after("clonedExampleContent",function(e){this.headerTray.set("buttons",this._getHeaderTrayOptions().buttons);this.syncUI()},this))},syncUI:function(){var e=this.get("collection");var t=e.get("isDemoCollection");this._toggleUnsupportedTray(!this.get("collectionConfiguration").get("supported"));this._toggleExampleContentTray(t);var a=this.get("boundingBox");var i=this.headerTray.get("contentBox").one(".title");if(t){if(!a.one(".content-overlay")){a.addClass("has-example-content-overlay");a.append('<div class="content-overlay '+u+'"></div>')}i.one(".demo-collection-tag")||i.append('<div class="demo-collection-tag">Example Page</div>')}else{var s=a.one(".content-overlay");s&&s.remove(true);a.removeClass("has-example-content-overlay");var n=i.one(".demo-collection-tag");n&&n.remove(true)}},activatePath:function(e,t){if(n.Lang.isValue(t)&&n.Lang.isValue(t.item)){var a=t.item.get("name");this.activatePusher(t.item,a)}else this.get("loaded")?n.Squarespace.Damask.Panel.MixinPanelParent.prototype.activatePath.call(this,e):this.onceAfter("loadedChange",function(){n.Squarespace.Damask.Panel.MixinPanelParent.prototype.activatePath.call(this,e)})},activatePusherByName:function(e){var t=n.Squarespace.Damask.Panel.MixinPanelParent.prototype.activatePusherByName.call(this,e);if(t){var a=new n.Squarespace.Models.ContentItem({id:e,collectionId:this.get("collection").get("id"),displayIndex:this.get("collection").get("nextDisplayIndex"),recordType:n.Squarespace.RecordType.STORE_ITEM});a.load(n.bind(function(){this.activatePusher(a,e)},this))}},_callAfterEnsuringSavedChanges:function(e){this.hasUnsavedChanges()?this.ensureSavedChanges(e.bind(this)):e.call(this)},_toggleUnsupportedTray:function(e){if(e){this.unsupportedTray||(this.unsupportedTray=this._initTray({"strings.title":r("Unsupported Collection"),"strings.subtitle":r("This page will not be rendered on the frontend."),buttons:[{label:r("Configure"),action:this._callAfterEnsuringSavedChanges.bind(this,this.openCollectionConfigureDialog)}]}));this.unsupportedTray.show()}else this.unsupportedTray&&this.unsupportedTray.hide()},_toggleExampleContentTray:function(e){if(e){if(!this.exampleContentTray){var t=this.get("collection").get("typeName");o.cloneDemoCollectionModalShown(t);var a=r("Example Page");var i=r("This page is an example. You can either copy it and add your own content, or remove it.");var s=[{label:r("Copy Page"),action:this._callAfterEnsuringSavedChanges.bind(this,function(){this.get("collection").cloneToNewCollection().then(function(){o.userCloneDemoCollection(t);n.Squarespace.Singletons.Location.pointFrameToCollection(this.get("collection"),true)}.bind(this))})},{label:r("Remove"),action:this._callAfterEnsuringSavedChanges.bind(this,this.removeCollection)}];this.exampleContentTray=this._initTray({"strings.title":a,"strings.subtitle":i,className:"example-content-tray",buttons:s})}this.exampleContentTray.show()}else this.exampleContentTray&&this.exampleContentTray.hide()},_initTray:function(e){return new n.Squarespace.Widgets.ActionTray(n.merge(e,{render:this.get("boundingBox"),scrollNode:this.get("contentBox"),className:e.className+" dialog-tray"}))},_toggleEnabled:function(){var e=this.get("collection");e.set("enabled",!e.get("enabled"));var t=e.get("enabled");var a=n.bind(function(){t&&!e.get("enabled")&&s()},this);t?e.save({},a):new n.Squarespace.Widgets.Confirmation({"strings.title":r("Disable Collection"),"strings.message":r("Are you sure you wish to disable this collection?")}).on("confirm",function(){e.save({},a)},this)},_registerItemPushers:function(e,t){var a=t||this.get("collection").items;if(n.Lang.isValue(e)&&n.Lang.isValue(e.model)){if(e.model.get("isPusher")){this._registerPusher(e.model);return}a=e.model||e.models}a.each(function(e){this._registerPusher(e)},this)},hasUnsavedChanges:function(){console.warn("hasUnsavedChanges not implemented!");return false},ensureSavedChanges:function(e){console.warn("ensureSavedChanges not implemented.");if(n.Lang.isFunction(e))return e();return n.when(true)},_getTypeLabel:function(e,t){if(t)return t.get("title");return(e.get("typeName")||r("Page")).capitalize()},_getHeaderTrayOptions:function(){var e=this.get("collection");var t=e.getTemplateConfiguration();var a=this._getTypeLabel(e,t);var i=[];var s=e.get("isDemoCollection");if(!s){this.get("settingsButtonVisible")&&i.push({label:r("{typeLabel} Settings",{typeLabel:a}),className:"settings light",action:function(e){l.clickCollectionSettingsGear(this.get("collection").get("id"),"panel");this.openCollectionConfigureDialog()},context:this});if(this.get("addContentButtonVisible")){t||false;var n=(t?t.get("addText"):null)||r("Add Content");i.push({label:n,className:"add",action:function(){l.clickButtonToAddContentItemFromPanel(this.get("collection").get("id"));this.handleAddContentRequest()},context:this,testAttribute:e.get("typeName")+"-add-item"})}}return{strings:{title:this.get("strings.title")||e.get("navigationTitle"),subtitle:this.get("strings.subtitle")||""},buttons:i,visible:true,collection:e}},openCollectionConfigureDialog:function(){n.Squarespace.CollectionDialogPortal.showCollectionConfigurationDialog(this.get("collection").get("id"))},handleAddContentRequest:function(){throw new Error("Not implemented.")},removeCollection:function(){n.Squarespace.NavigationUIUtils.deleteCollection(this.get("collection"))}},{ASYNC_DATA:true,CSS_PREFIX:"sqs-content-manager-base",ATTRS:{"strings.title":{},addDebounceTime:{value:1e3},collection:{},collectionConfiguration:{},addContentButtonVisible:{value:true},settingsButtonVisible:{valueFn:function(){return n.Squarespace.UtilAuthenticated.userHasAccessPermission(n.Squarespace.AccessPermissions.CONFIG_CHANGE_STRUCTURE)},validator:n.Squarespace.AttrValidators.isBoolean,writeOnce:"initOnly"},helpSectionIdentifier:{value:"welcome"}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-content-item-types-editor","squarespace-content-item-types-selector","squarespace-content-manager-collection-dialog-portal","squarespace-content-manager-navigation-ui-utils","squarespace-damask-panel-mixin-panel","squarespace-damask-panel-mixin-panel-parent","squarespace-util-authenticated","squarespace-widgets-confirmation","squarespace-widgets-data-widget"]})},"./src/main/webapp/universal/scripts-v6/content-manager-widgets/cover-page.js":function(e,t,n){var o=n("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-content-manager-widgets-cover-page",function(r){var a=n("./common/temp/node_modules/alt-utils/lib/ActionListeners.js");var i=n("./src/main/webapp/universal/src/shared/dispatchers/alt/index.ts");var s=n("./src/main/webapp/universal/src/apps/App/shared/actions/LayoutChooserActions.js");r.namespace("Squarespace.ContentManagerWidgets");var t=r.Squarespace.ContentManagerWidgets.CoverPage=r.Base.create("CoverPage",r.Squarespace.ContentManagerWidgets.Base,[r.Squarespace.Mixins.Loadable,r.Squarespace.Damask.Panel.MixinPanel,r.Squarespace.Damask.Panel.MixinPanelParent],{initializer:function(){var e=this.get("slideSummary");this._registerEvent(this.get("loadable").onceAfter("load",function(){this._updateSlicesForLayout();this._registerEvent(e.after("load",function(){this._updateSlicesForLayout();this.syncUI()},this))},this));var t=function(){e.load()};this.actionListener=new a(i);this.actionListener.addActionListener(s.SAVE_SUCCESS,t)},destructor:function(){r.Array.each(this._renderedPushers,function(e){e.destroy()});this._loadingTimer&&this._loadingTimer.cancel();this._loadingSpinner&&this._loadingSpinner.destroy();this.actionListener.removeAllActionListeners()},renderUI:function(){t.superclass.renderUI.call(this);var e=this.get("contentBox");e.append('<div class="cover-page-description">'+o("Cover Pages are simple one-page websites. Customize yours by adding content and tweaking the styles below.")+"</div>");this._editorContainer=this.get("contentBox").appendChild('<div class="editor-container"></div>')},syncUI:function(){t.superclass.syncUI.call(this);this.get("loading")?this._renderLoadingState():this._renderLoadedState()},hasUnsavedChanges:function(){return false},ensureSavedChanges:function(e){if(r.Lang.isFunction(e))return e();return r.when(true)},activatePath:function(e){this.get("loading")?this.onceAfter("loadingChange",function(){r.Squarespace.Damask.Panel.MixinPanelParent.prototype.activatePath.call(this,e)}):r.Squarespace.Damask.Panel.MixinPanelParent.prototype.activatePath.apply(this,arguments)},_renderLoadingState:function(){this._loadingTimer&&this._loadingTimer.cancel();this._loadingTimer=r.later(500,this,function(){this._emptyEditorContainer();this._loadingSpinner&&this._loadingSpinner.destroy();this._loadingSpinner=new r.Squarespace.Spinner({render:this._editorContainer,size:44,color:"dark"})})},_renderLoadedState:function(){this._loadingTimer&&this._loadingTimer.cancel();this._loadingSpinner&&this._loadingSpinner.destroy();this._emptyEditorContainer();this._renderAndRegisterPushers()},_emptyEditorContainer:function(){r.Array.each(this._renderedPushers,function(e){e.destroy()});this._renderedPushers=[];this._editorContainer.empty()},_renderAndRegisterPushers:function(){var e=this._editorContainer;var t=this.get("slideSummary");var a=t.get("slide");var i=a.get("layoutIdentifier");var s=this.get("slideLayouts");var n=s.getByIdentifier(i);this._renderedPushers.push(new r.Squarespace.Widgets.SlideLayoutChooserPusher({render:e,title:o("Layout"),name:"layout",selectedLayout:n}));n.hasSliceType(r.Squarespace.SliceTypeGroups.BRANDING_TEXT)&&this._renderedPushers.push(new r.Squarespace.Damask.Panel.PanelPusher({render:e,title:o("Branding & Text"),description:o("Logo, headline, body text, and social"),name:"branding-text"}));n.hasSliceType(r.Squarespace.SliceTypeGroups.VIDEO)&&this._renderedPushers.push(new r.Squarespace.Damask.Panel.PanelPusher({render:e,title:o("Video"),description:o("Embed a video"),name:"video"}));n.hasSliceType(r.Squarespace.SliceTypeGroups.MEDIA)&&this._renderedPushers.push(new r.Squarespace.Damask.Panel.PanelPusher({render:e,title:o("Media"),description:o("Add images or video to your page"),name:"media"}));n.hasSliceType(r.Squarespace.SliceTypeGroups.AUDIO)&&this._renderedPushers.push(new r.Squarespace.Damask.Panel.PanelPusher({render:e,title:o("Audio"),description:o("Upload one or more audio tracks"),name:"audio"}));n.hasSliceType(r.Squarespace.SliceTypeGroups.LOCATION)&&this._renderedPushers.push(new r.Squarespace.Damask.Panel.PanelPusher({render:e,title:o("Map Location"),description:o("Put a central location on your map"),name:"location"}));n.hasSliceType(r.Squarespace.SliceTypeGroups.TWITTER)&&this._renderedPushers.push(new r.Squarespace.Damask.Panel.PanelPusher({render:e,title:o("Twitter"),description:o("Connect your account and display tweets"),name:"twitter"}));n.hasSliceType(r.Squarespace.SliceTypeGroups.ACTION)&&this._renderedPushers.push(new r.Squarespace.Damask.Panel.PanelPusher({render:e,title:o("Action"),description:o("Create buttons, links, and forms"),name:"action"}));n.hasSliceType(r.Squarespace.SliceTypeGroups.SOCIAL_ICONS)&&this._renderedPushers.push(new r.Squarespace.Damask.Panel.PanelPusher({render:e,title:o("Social Links"),description:o("Add links to your social profiles"),name:"social-links"}));this.get("renderStyleEditorPanelPusher")&&this._renderedPushers.push(new r.Squarespace.Damask.Panel.PanelPusher({render:e,title:o("Style"),description:o("Adjust fonts, colors, and sizes"),name:"slide-style",className:"cover-pages-style-pusher"}));this._registerPushers()},_updateSlicesForLayout:function(){var e=this.get("slideSummary");var t=e.get("slide");var a=t.get("layoutIdentifier");var i=this.get("slideLayouts");var s=i.getByIdentifier(a);e.get("slices").updateForLayout(s,t)},_getRenderedPushersArray:function(){return this._renderedPushers}},{CSS_PREFIX:"sqs-content-manager-cover-page",ATTRS:{slideSummary:{valueFn:function(){return new r.Squarespace.Models.SlideSummary({url:r.Lang.sub("{root}content-collections/{collectionId}/slide-summary",{root:r.Squarespace.API_ROOT,collectionId:this.get("collection").get("id")}),slideType:r.Squarespace.SlideType.COVER_PAGE})},validator:r.Squarespace.AttrValidators.isInstanceOf(r.Squarespace.Models.SlideSummary)},slideLayouts:{valueFn:function(){return new r.Squarespace.Models.SlideLayoutList({slide:this.get("slideSummary").get("slide")})},validator:r.Squarespace.AttrValidators.isInstanceOf(r.Squarespace.Models.SlideLayoutList),writeOnce:"initOnly"},modelsSaving:{value:false},addContentButtonVisible:{value:false},loadable:{valueFn:function(){return new r.Squarespace.MultiLoader({loadables:[this.get("slideSummary"),this.get("slideLayouts")]})}},loadOnInitialize:{value:true},damask:{},renderStyleEditorPanelPusher:{value:true}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-content-manager-widgets-base","squarespace-damask-panel-mixin-panel","squarespace-damask-panel-mixin-panel-parent","squarespace-damask-panel-panel-pusher","squarespace-enum","squarespace-mixins-loadable","squarespace-models-slide-layout-list","squarespace-models-slide-summary","squarespace-multi-loader","squarespace-slice-type-groups","squarespace-spinner","squarespace-util","squarespace-widgets-slice-group-editor","squarespace-widgets-slide-layout-chooser-pusher"]})},"./src/main/webapp/universal/scripts-v6/content-manager-widgets/product-quick-search.js":function(e,t,a){var l=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./common/temp/node_modules/lodash/throttle.js");YUI.add("squarespace-content-manager-widgets-product-quick-search",function(a){a.namespace("Squarespace.ContentManagerWidgets");var e=500;var i=300;a.Squarespace.ContentManagerWidgets.ProductQuickSearch=a.Base.create("QuickSearch",a.Squarespace.Widgets.SSWidget,[],{initializer:function(){this.publish("onResult");this.publish("onSearchClear");this.publish("attemptedClose");this.after("queryChange",s(this._registerCallback(function(e){this._afterQueryChange(e.newVal)}),e,{leading:false,trailing:true}))},_afterQueryChange:function(t){if(0===t.length){this._clearSearch();return}a.Data.get({url:"/api/search/GeneralSearch",data:{q:t,f_collectionId:this.get("collectionId"),size:i},success:function(e){if(e.serviceError){false;return}this._exposeResults(e.items,t)},failure:function(e){console.error("ERROR: ",e)}},this)},_sortAndSanitizeItems:function(e){var t=this.get("itemIdRequestHandler");if(!t){false;return e}var s=t();e=e.filter(function(e){if(s.indexOf(e.id)>-1)return true;false;return false});return e.sort(function(e,t){var a=s.indexOf(e.id);var i=s.indexOf(t.id);if(a<i)return-1;if(a>i)return 1;return 0})},_exposeResults:function(e,t){if(t!==this.get("query")){false;return}e=this._sortAndSanitizeItems(e);this.fire("onResult",{results:e});var a=null;e.length>0&&(a=e[0].id);this.setAttrs({resultItems:e,focusedItemId:a})},_clearSearch:function(){this.fire("onSearchClear");this.get("contentBox").one(".thumb").addClass("hidden")},renderUI:function(){this.get("contentBox").appendChild('<input type="text" placeholder='+l("Search Products")+"/>");this.get("contentBox").appendChild('<div class="thumb hidden"><div class="message"></div><div class="prev"></div><div class="next"></div></div>')},bindUI:function(){var e=this.get("boundingBox");var t=this.get("contentBox").one('input[type="text"]');this.after(["resultItemsChange","focusedItemIdChange"],function(e){var t=this.get("resultItems");var a=this.get("focusedItemId");var i=this.get("contentBox");var s=i.one(".message");var n=i.all(".prev,.next");i.one(".thumb").removeClass("hidden");var r=t.length>0;if(r){var o=t.map(function(e){return e.id}).indexOf(a);s.setContent(l("{currentIndex} of {totalLength}",{currentIndex:o+1,totalLength:t.length}))}else s.setContent(l("No results"));s.toggleClass("no-results",!r);n.toggleClass("hidden",!r)});this._registerTimer(a.later(300,this,function(){t.focus();t.on("blur",function(e){0===e.target.get("value").trim().length&&this.fire("attemptedClose")},this)}));t.on("keyup",function(e){var t=27;var a=13;this.set("query",e.target.get("value"));e.keyCode===t&&this.fire("attemptedClose");if(e.keyCode===a&&this.get("resultItems").length>0){var i=e.shiftKey?-1:1;var s=this._getIncrementedFocusedItemId(i);this.set("focusedItemId",s)}e.stopPropagation()},this);this.get("contentBox").one(".thumb").delegate("click",function(e){var t=1;e.target.hasClass("prev")&&(t=-1);var a=this._getIncrementedFocusedItemId(t);this.set("focusedItemId",a);e.halt()},".prev,.next",this);e.on("click",function(e){if(e.target.test("input")){e.stopPropagation();return}e.halt()},this)},_getIncrementedFocusedItemId:function(e){var t=this.get("resultItems");var a=this.get("focusedItemId");var i=t.map(function(e){return e.id});var s=i.indexOf(a);var n=s+e;n>i.length-1?n=0:n<0&&(n=i.length-1);return i[n]}},{CSS_PREFIX:"sqs-quick-search",ATTRS:{query:{value:""},collectionId:{value:""},focusedItemId:{value:null},resultItems:{value:[]},itemIdRequestHandler:{value:null}}})},"1.0",{requires:["squarespace-ss-widget"]})},"./src/main/webapp/universal/scripts-v6/content-manager/collection-dialog-portal.js":function(e,t,a){var s=a("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/ContentBrowserAPI.js").default;YUI.add("squarespace-content-manager-collection-dialog-portal",function(i){i.namespace("Squarespace");i.Squarespace.CollectionDialogPortal={showCollectionConfigurationDialog:function(e,t){var a=i.Squarespace.ContentCollectionCache.getById(e);if(a.get("isDemoCollection")){this.exampleContentCloneConfirmationWithCollectionId(e).then(function(){this.showCollectionConfigurationDialog(a.get("id"),t)}.bind(this));return}return s.showCollectionSettingsEditor(e,t)},exampleContentCloneConfirmationWithCollectionId:function(e){var t=i.Squarespace.Singletons.TemplateNavigationList.getItemByCollectionId(e);return this.exampleContentCloneConfirmation(t)},exampleContentCloneConfirmation:function(a){if(!a){false;return}return i.Squarespace.Promises.create(function(e,t){a.get("collection").cloneToNewCollection({silent:true}).then(e)})}}},"1.0",{requires:["squarespace-damask-context-globals","squarespace-singletons-location","squarespace-promises","squarespace-models-content-collection","squarespace-models-template-navigation-list"]})},"./src/main/webapp/universal/scripts-v6/content-manager/navigation-ui-utils.js":function(e,t,a){var n=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var u=a("./src/main/webapp/universal/src/apps/App/shared/stores/TemplateInstallationsStore.js");var d=a("./common/temp/node_modules/lodash/noop.js");var p=a("./src/main/webapp/universal/src/shared/utils/CMSV7Events.js");var h=a("./src/main/webapp/frontend/packages/enums/CollectionTypes.js");YUI.add("squarespace-content-manager-navigation-ui-utils",function(o){var l=function(e){new o.Squarespace.Widgets.Alert({"strings.title":e.title,"strings.message":e.msg})};var c={HOMEPAGE:{title:n("Cannot Delete Homepage"),msg:n("This page cannot be deleted because it is your homepage. Please assign a new homepage before deleting.")},TEMPLATE:{title:n("Cannot Delete Template Page"),msg:n("This page is a page that is provided by the template you are currently using. It cannot be removed while you are using this template.")}};o.namespace("Squarespace").NavigationUIUtils={deleteNavigationItem:function(i,s,e){if(!i)throw new Error("Unknown entity trying to be deleted.");var n=o.Lang.isValue(i.get("collectionId"));var r=!i.get("children").isEmpty();var t=i.get("collection");if(n){if(i.get("collectionId")===u.getHomepageCollectionId()){l(c.HOMEPAGE);t.get("isDemoCollection")&&p.deleteDemoCollectionErrorModalShown(t.get("typeName"));return o.Promise.reject(c.HOMEPAGE.title)}if(t.get("type")===h.TEMPLATE_PAGE){l(c.TEMPLATE);return o.Promise.reject(c.TEMPLATE.title)}}var a=function(){t.get("isDemoCollection")&&p.userDeleteDemoCollection(t.get("typeName"));return new o.Promise(function(a,e){var t=new o.Parallel;n&&r&&i.get("children").each(function(e){e.destroy({remove:true},t.add(d))});i.destroy(o.merge({remove:true},s),t.add(d));t.done(function e(t){a(i,t)})})};if(e)return a();return this.showDeleteConfirmation().then(a)},showDeleteConfirmation:function(e,t){var a;var i;if(t&&t.get("isDemoCollection")){a=n("Remove Example Page");i=n("Are you sure you wish to remove this example page?")}else{var s=o.Escape.html(t&&t.get("navigationTitle")||e&&e.get("title")||n("this item"));a=n("Delete {item}",{item:s});i=n("Are you sure you want to delete <strong>{item}</strong>?",{item:s})}return o.Squarespace.Fluent.Confirm({"strings.title":a,"strings.message":i,"strings.confirm":n("Delete"),className:"delete-collection"})},deleteCollection:function(e,t,a){var i=e.get("id");var s=o.Squarespace.Singletons.TemplateNavigationList.getItemByCollectionId(i);if(!s)throw new Error("Could not find the navigation item for collection #"+i);return this.deleteNavigationItem(s,t,a)}}},"1.0",{requires:["base","promise","squarespace-fluent-confirmation","squarespace-models-template-navigation-list","squarespace-widgets-alert"]})},"./src/main/webapp/universal/scripts-v6/context.js":function(e,t,a){var u={website:{actions:a("./src/main/webapp/universal/src/apps/App/shared/actions/WebsiteActions.js"),store:a("./src/main/webapp/universal/src/apps/App/shared/stores/WebsiteStore/index.js")},websiteSettings:{actions:a("./src/main/webapp/universal/src/apps/App/shared/actions/WebsiteSettingsActions.js"),store:a("./src/main/webapp/universal/src/apps/App/shared/stores/WebsiteSettingsStore/index.js")}};YUI.add("squarespace-context",function(e){var l=true;var c=e.config.win===window;e.namespace("Squarespace");function t(r,o){return function(e){if(e instanceof r)return e;var t=new r(e);var a=u[o]||{};var i=a.store;var s=a.actions;var n=false;if(l&&c&&i&&s){i.listen(function(e){n=true;t.setAttrs(e.serializeToModel?e.serializeToModel():e.toJS())});t.after("change",function(a){if(!n){var e=Object.keys(a.changed).reduce(function(e,t){e[t]=a.changed[t].newVal;return e},{});s.update(e)}n=false})}return t}}var a=e.Base.create("squarespaceContext",e.Model,[],{},{ATTRS:{authenticatedAccount:{setter:t(e.Squarespace.Models.MemberAccount,"memberAccount"),lazyAdd:false},website:{setter:t(e.Squarespace.Models.Website,"website"),lazyAdd:false},websiteSettings:{setter:t(e.Squarespace.Models.WebsiteSettings,"websiteSettings"),lazyAdd:false},templateInstallation:{setter:t(e.Squarespace.Models.TemplateInstallation,"templateInstallation"),lazyAdd:false},billingStatus:{}}});if(e.Squarespace.Utils.isInDamaskFrame()){e.Squarespace.Context=e.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Context");return}e.Squarespace.Context={getInstance:function(){var t=null;return function(e){null===t&&(t=new a(e));return t}}(),init:function(e){this.getInstance(e)}};Static.SQUARESPACE_CONTEXT&&e.Squarespace.Context.init(Static.SQUARESPACE_CONTEXT)},"1.0",{requires:["base","model","node","squarespace-models-member-account","squarespace-models-template-installation","squarespace-util","squarespace-models-website","squarespace-models-website-settings"]})},"./src/main/webapp/universal/scripts-v6/cookie-banner-styles.js":function(e,t){YUI.add("squarespace-cookie-banner-styles",function(e){},"1.0",{requires:[]})},"./src/main/webapp/universal/scripts-v6/currency-symbols.js":function(e,t){YUI.add("squarespace-currency-symbols",function(e){},"1.0",{requires:[]})},"./src/main/webapp/universal/scripts-v6/damask/announcement-bar-bridge.js":function(e,t,a){var o=a("./src/main/webapp/universal/src/shared/dispatchers/alt/index.ts");var l=a("./common/temp/node_modules/alt-utils/lib/ActionListeners.js");var c=a("./src/main/webapp/universal/src/apps/App/shared/actions/AnnouncementBarActions.js");YUI.add("squarespace-damask-announcement-bar-bridge",function(t){t.namespace("Squarespace.Damask.Preview");var a=null;var e=new l(o);var i={};var s={};var n={};function r(t){return function(e){t(e.newVal)}}e.addActionListener(c.ADD_ON_VISIBILITY_CHANGED_HANDLER,function(e){s[e.key]||(s[e.key]=e.callback);if(a){false;n[e.key]=a.after("AnnouncementBar:visibleChange",r(e.callback))}else{false;i[e.key]=e.callback}});e.addActionListener(c.REMOVE_ON_VISIBILITY_CHANGED_HANDLER,function(e){if(a&&n[e]){a.detach(n[e]);delete n[e]}else delete i[e];delete s[e]});t.Squarespace.Damask.Preview.AnnouncementBarBridge=t.Base.create("announcementBarBridge",t.Base,[],{initializer:function(){this._addActionListeners()},destructor:function(){t.Array.invoke(this.eventListeners,"detach");this.eventListeners=[];this.actionListener.removeAllActionListeners();this.actionListener=null},_notifyBar:function(e,t){if(!a)return;a.fire(e,t)},_addActionListeners:function(){this.eventListeners=[t.Global.on(t.Squarespace.Widgets.AnnouncementBar.EVENTS.READY,function(e,t){a&&Object.keys(n).forEach(function(e){n[e].detach()});a=e.bar;Object.keys(s).forEach(function(e){n[e]=a.after("AnnouncementBar:visibleChange",r(s[e]));delete i[e]})})];this.actionListener=new l(o);this.actionListener.addActionListener(c.RESET_VISIBILITY,function(){this._notifyBar(t.Squarespace.Widgets.AnnouncementBar.EVENTS.RESET_VISIBILITY)}.bind(this));this.actionListener.addActionListener(c.UPDATE,function(e){this._notifyBar(t.Squarespace.Widgets.AnnouncementBar.EVENTS.UPDATE,e)}.bind(this));this.actionListener.addActionListener(c.CLOSE,function(){this._notifyBar(t.Squarespace.Widgets.AnnouncementBar.EVENTS.CLOSE)}.bind(this))}},{ATTRS:{}})},"1.0",{requires:["base","squarespace-announcement-bar"]})},"./src/main/webapp/universal/scripts-v6/damask/context-globals.js":function(e,t,a){YUI.add("squarespace-damask-context-globals",function(a){a.namespace("Squarespace.Damask");a.Squarespace.Damask.ContextGlobals={isDamask:function(){return a.Lang.isValue(CONFIG_PANEL)},frameWindow:function(){if(!a.Lang.isValue(a.config.win.frames["sqs-site-frame"])){console.warn("[ContextGlobals] frameWindow method called from a non-damask frame.");return a.config.win}return CONFIG_PANEL.getFrameContentWindow()},topWindow:function(){var e=a.config.win;try{a.Lang.isValue(e.frameElement)&&"sqs-site-frame"===e.frameElement.id&&(e=e.parent)}catch(e){}return a.one(e)},fromFrame:function(e){var t=this.frameWindow();if(a.Lang.isValue(e)){if(a.Lang.isArray(e))return a.Object.getValue(t.get(e[0]),e.slice(1));return t.get(e)}return t},fromTop:function(e){var t=this.topWindow();if(a.Lang.isValue(e)){if(a.Lang.isArray(e))return a.Object.getValue(t.get(e[0]),e.slice(1));return t.get(e)}return t},get:function(e){if(this.isDamask())return this.fromFrame(e);return this.fromTop(e)},getWindow:function(){if(this.isDamask())return this.frameWindow();return this.topWindow()},relative:function(e,t){if(this.isDamask()){var a=this.fromFrame("Y");if(e.inDoc(a.config.doc))return this.fromFrame(t)}var i=this.fromTop("Y");if(e.inDoc(i.config.doc))return this.fromTop(t);false;return null}}},"1.0",{requires:[]})},"./src/main/webapp/universal/scripts-v6/damask/instrumentation.js":function(e,t,a){var n=a("./common/temp/node_modules/lodash/debounce.js");var r=a("./src/main/webapp/universal/src/shared/utils/CMSV7Events.js");YUI.add("squarespace-damask-instrumentation",function(s){var i=[];i.push({identifier:"back",selector:".back-container"});i.push({identifier:"index-manager",selector:"[data-action]",properties:function(e){return{action:e.getDOMNode().getAttribute("title")}}});i.push({identifier:"save",selector:".changes-workflow-button-wrapper .sqs-button.save"});i.push({identifier:"cancel",selector:".changes-workflow-button-wrapper .sqs-button.revert"});i.push({identifier:"create-page",selector:".sqs-navigation-item-list .add-page",properties:function(e){return{nestedAddPage:!!e.ancestor(".sqs-navigation-item-folder")}}});i.push({identifier:"frame-expand",selector:"html.fullscreen .sqs-node-expander-button"});i.push({identifier:"frame-contract",selector:"html:not(.fullscreen) .sqs-node-expander-button"});i.push({identifier:"support.squarespace.com",selector:'a[href*="support.squarespace.com"]',includeHref:true});i.push({identifier:"help",selector:".link-knowledge-base",includeHref:true});s.namespace("Squarespace.Damask");s.Squarespace.Damask.Instrumentation=s.Base.create("Instrumentation",s.Base,[s.Squarespace.GlobalEventBubbler],{initializer:function(){this.LOG=new s.Squarespace.Debugger({name:"Instrumentation",output:false});this.debouncedTrackEngagementSearch=n(this.trackEngagementSearch,500);this._bindInterfaceListeners();this._bindDialogListeners();this._bindConfirmationDialogListeners();this._bindAccountMenuListeners();this._bindDialogMultiOption();this._bindDialogButton();this._bindCheckoutSubmitter();this._bindDialogFieldError();this._bindSettingsPanelListeners();this._bindDomainListeners();this.bubbleEventsToGlobal()},trackInsertBlock:function(e){try{var t=e.blockWidget.getAttrs();e.isMoveBlock?r.moveBlock({blockId:t.id,blockType:t.blockTypeName},this.getCollectionFromFrame()):r.createBlock({blockId:t.id,blockType:t.blockTypeName},this.getCollectionFromFrame())}catch(e){}},trackDeleteBlock:function(e){try{var t=e.getAttrs();r.deleteBlock({blockId:t.id,blockType:t.blockTypeName},this.getCollectionFromFrame())}catch(e){}},bindFrame:function(){this._bindAnnotationListeners();this._bindDamaskPreviewFooter();this._bindFrameButtonControllerListeners();this._bindFrameUrlChange();this._bindLayoutEngineInteractions();this._bindBlockInteractions()},trackEngagementSearch:function(e){if(!e)return;try{r.searchForBlock(e,this.getCollectionFromFrame());s.Squarespace.Analytics.trackInternal("engagement_block_search",{searchQuery:e})}catch(e){}},_bindInterfaceListeners:function(){this.get("damask").get("router").onChange(function(e){this.trackInterfaceView({params:e.params})}.bind(this));this.get("damask").get("boundingBox").on("click",function(e){for(var t=0;t<i.length;t++)if(e.target.ancestor(i[t].selector,true)){var a=i[t].properties;"function"===typeof a&&(a=a(e.target));a=a||{};i[t].includeHref&&(a.href=e.target.getAttribute("href"));this.trackInterfaceClick(i[t].identifier,a);break}},this)},_bindDialogListeners:function(){s.Global.on("EditingDialog:show",function(e){var t=e.target.params;var a=t.name;if(!s.Lang.isString(a)||0===a.length){this.LOG.warn("Dialog was shown but it did not have a valid name! Instrumentation attempt failed.");return}this.trackInterfaceView({dialog:t.name,params:{id:t.id}})},this);s.Global.on("EditingDialog:tab-shown",function(e){var t=e.target.params.name;if(!s.Lang.isString(t)||0===t.length){this.LOG.warn("Dialog was shown but it did not have a valid name! Instrumentation attempt failed.");return}this.trackInterfaceView({dialog:e.target.params.name,tab:e.name})},this);s.Global.on("EditingDialog:button-click",function(e){var t=e.target.params.name;if(!s.Lang.isString(t)||0===t.length){this.LOG.warn("Dialog was shown but it did not have a valid name! Instrumentation attempt failed.");return}var a={dialog:e.target.params.name};var i=e.target.getData();["collectionId","id","urlId","title"].forEach(function(e){i.hasOwnProperty(e)&&(a[e]=i[e])});this.trackInterfaceClick("button-"+e.type,a)},this)},_bindAccountMenuListeners:function(){s.Global.on("AccountMenu:visibleChange",function(e){e.newVal?this.trackInterfaceView({dialog:"AccountMenu"}):this.trackInterfaceClick("dialog-close",{dialog:"AccountMenu"})},this)},_bindAnnotationListeners:function(){function t(e){return(e.label||"").toLowerCase().replace(/\s+/,"-")}function a(e){return{label:e.instrumentationDescription}}s.Global.on("annotation-overlay-button-click",function(e){this.trackSiteClick("annotation-"+t(e),a(e))},this)},_bindFrameButtonControllerListeners:function(){s.Global.on("FrameButtonController:button-click",function(e){this.trackInterfaceClick("frame-"+e.type)},this)},_bindFrameUrlChange:function(){this.get("damask").get("previewFrame").after("urlChange",function(e){this.trackSiteView()},this)},_bindDialogMultiOption:function(){s.Global.on("multiOption:option-click",function(e){var t=e.target.get("dialog");this.trackInterfaceClick(e.option,{dialog:t?t.params.name:""})},this)},_bindDialogButton:function(){s.Global.on("button:button-click",function(e){var t=e.target.get("strings.text")||e.target.get("strings.title")||"";var a=e.target.get("name")||"";var i=e.target.get("href")||"";if(!t&&!a&&!i){this.LOG.warn("Button widget does not have enough information to log. Instrumentation attempt failed.");return}this.trackInterfaceClick("button-click",{text:t,name:a,href:i})},this)},_bindCheckoutSubmitter:function(){s.Global.on("*:submit",function(e){var t=e.target.get("isCheckoutSubmitter");var a=e.target.get("submitButtonLabel")||"";if(!s.Lang.isValue(t)||!t)return;if(!s.Lang.isString(a)||0===a.length){this.LOG.warn("CheckoutSubmitter was shown but it did not have a valid button label! Instrumentation attempt failed.");return}this.trackInterfaceClick("checkout-submit",{label:a})},this)},_bindDialogFieldError:function(){s.Global.on("*:error-shown",function(e){var t=e.target.get("name");var a=e.target.get("strings")?e.target.get("strings.title")||e.target.get("strings.placeholder"):"";var i=e.target.get("data")||"";var s=e.message||"";t||a||s||this.LOG.warn("DialogField Error was shown but it did not have enough information. Instrumentation attempt failed.");this.trackInterfaceView({dialog:t||a,value:i,error:s})},this)},_bindSettingsPanelListeners:function(){s.Global.on("*:saved-changes",function(e){var t;e.target.getChangedFields&&(t=e.target.getChangedFields());this.trackInterfaceClick("save",{fields:t})},this);s.Global.on("*:revert-changes",function(e){var t;e.target.getChangedFields&&(t=e.target.getChangedFields());this.trackInterfaceClick("cancel",{fields:t})},this)},_bindBlockInteractions:function(){s.Array.each([{global:"Block:create",identifier:"block-create"},{global:"Block:drop",identifier:"block-drop"},{global:"Block:remove",identifier:"block-remove"}],function(t){s.Global.on(t.global,function(e){this[e.backend?"trackInterfaceClick":"trackSiteClick"](t.identifier,{blockType:e.blockType,region:e.region})},this)},this)},_bindLayoutEngineInteractions:function(){this.publishEventsForBubbling();s.Global.on("LayoutInsertPoint:click",function(e){this[e.backend?"trackInterfaceClick":"trackSiteClick"]("layout-insert-point")},this);s.Global.on("layout-engine:block-menu-search-query-change",function(e){this.debouncedTrackEngagementSearch(e.query)},this);s.Global.on("layout-engine:block-menu-search-query-enter",function(e){this.debouncedTrackEngagementSearch.cancel();this.trackEngagementSearch(e.query)},this);s.Global.on("layout-engine:open-block-menu",function(){r.openBlockMenu(this.getCollectionFromFrame())},this);s.Global.on("layout-engine:insert-block",this.trackInsertBlock,this);s.Global.on("layout-engine:delete-block",this.trackDeleteBlock,this)},_bindConfirmationDialogListeners:function(){var a=["show"];var i=["confirm","reject","cancel"];s.Array.each([].concat(a).concat(i),function(t){s.Global.on("confirmation:"+t,function(e){a.includes(t)?this.trackInterfaceView({dialog:e.target.get("instrumentationTitle")||e.target.get("strings.title")}):i.includes(t)&&this.trackInterfaceClick(t,{dialog:e.target.get("strings.title")})},this)},this)},_bindDamaskPreviewFooter:function(){s.Global.on("DamaskPreviewFooter:foundYInFrameChange",function(e){e.newVal&&this.trackInterfaceView({widget:"disable-user-scripts"})},this);s.Global.on(["DamaskPreviewFooter:enableScriptsInPreview","DamaskPreviewFooter:disableScriptsInPreview"],function(e){var t=e.type.split(":")[1];this.trackInterfaceClick(t)},this)},_bindDomainListeners:function(){var e={"domain:search":"domain-search","domain:add-to-cart":"domain-add-to-cart","domain:remove-from-cart":"domain-remove-from-cart","domain:select-provider":"domain-select-provider","domain:purchase-complete":"domain-purchase-complete","domain:lock-toggle":"domain-lock-toggle","domain:www-toggle":"domain-www-toggle"};s.Object.each(e,function(t,e){s.Global.on(e,function(e){this.trackInterfaceClick(t,e||{})},this)},this)},trackSiteClick:function(e,t){this._track("site_click",s.merge(t,{identifier:e,frameUrl:this.getUrlFromFrame()},this.getPageInformation()))},trackSiteView:function(e){this._track("site_view",s.merge(e,this.getPageInformation()))},trackInterfaceView:function(e){e=e||{};var t=this.getSanitizedInterfaceUrl();var a=this.getCollectionByUrl();if(a){e.pageType=s.Squarespace.ContentCollectionUtils.getIdentifierForCollection(a);e.urlId=a.get("urlId");t="/pages/"}if(this._lastUrl===t&&!s.Lang.isString(e.dialog)&&!s.Lang.isString(e.widget))return;this._track("interface_view",s.merge(e,{url:t}));this._lastUrl=t},trackInterfaceClick:function(e,t){this._track("interface_click",s.merge(t,{identifier:e,url:this.getSanitizedInterfaceUrl()}))},_track:function(e,t){this.LOG.info(e,JSON.stringify(t));s.Squarespace.Analytics.trackInternal(e,t)},getPageInformation:function(){var e={};var t=this.getPageTypeFromFrame();s.Lang.isValue(t)&&(e.pageType=t);return e},getCollectionIdByUrl:function(){var e=this.getSanitizedInterfaceUrl();if(e.startsWith("/pages/"))return e.split("/").slice(-1)[0];return null},getCollectionByUrl:function(){var e=this.getCollectionIdByUrl();if(e)return s.Squarespace.ContentCollectionCache.getById(e);return null},getCollectionFromFrame:function(){var e=this.get("damask").get("previewFrame").get("contentBridge").get("controller");if(!e)return null;var t=e.get("contextCollection");return t||null},getPageTypeFromFrame:function(){var e=this.getCollectionFromFrame();return e?s.Squarespace.ContentCollectionUtils.getIdentifierForCollection(e):null},getSanitizedInterfaceUrl:function(){return this.get("damask").get("router").getCurrentLocation().state.appUrl},getUrlFromFrame:function(){var e=this.get("damask").get("previewFrame").get("url");return e}},{ATTRS:{damask:{},previewFrame:{}}})},"1.0",{requires:["base","@sqs/layout-engine/events","squarespace-content-collection-utils","squarespace-debugger","squarespace-global-event-bubbler","squarespace-util"]})},"./src/main/webapp/universal/scripts-v6/damask/location.js":function(e,t){YUI.add("squarespace-singletons-location",function(r){r.namespace("Squarespace.Singletons");var e=r.Base.create("damaskLocation",r.Base,[],{go:function e(t,a){var i=this.get("controller").get("router");var s=i.getCurrentLocation().pathname;var n=a&&(a.shimmy||a.focus);i.push(t);t===s&&n&&r.Global.fire("shimmy",a.shimmy)},goBack:function e(){this.get("controller").get("router").goBack()},goUp:function e(){this.get("controller").get("router").goUp()},getFrameUrl:function(){return this.get("controller").getFrameUrl()},getPanelPath:function(){return this.get("controller").getPanelPath()},setFrameUrl:function(e){this.get("controller").setFrameUrl(e)},setFrameUrlOrRefresh:function(e){this.get("controller").setFrameUrlOrRefresh(e)},requestFrameRefresh:function(){this.get("controller").requestFrameRefresh()},goToCollection:function(e,t){e=e||"";var a="/pages/"+e;this.go(a,t)},goToContentItem:function(e,t){var a="/pages/"+e.get("collectionId")+"/"+e.get("id");this.go(a,r.merge({safeUrl:true},t))},pointFrameToCollection:function(e,t){if(r.Squarespace.Navigation.ListUtils.isCollectionInIndex(e)&&e.get("enabled")){this.pointFrameToCollectionInIndex(e,t);return}var a=this.get("controller").get("contentBridge").getCollectionUrl(e);t?this.setFrameUrlOrRefresh(a):this.setFrameUrl(a)},pointFrameToContentItem:function(e,t){var a=e.get("fullUrl");t?this.setFrameUrlOrRefresh(a):this.setFrameUrl(a)},pointFrameToCollectionInIndex:function(e,t){var a=r.Squarespace.Navigation.ListUtils.getParentCollection(e);var i=e.get("id");var s=a.get("id");this.get("controller").get("contentBridge").ensureCollectionInStackedIndexIsOnScreen(i,s,t)}},{ATTRS:{controller:{getter:function(e){if(!r.Lang.isValue(e))return CONFIG_PANEL;return e},validator:r.Squarespace.AttrValidators.isInstanceOf(r.Base)}}});r.Lang.isValue(r.Squarespace.Singletons.Location)||(r.Squarespace.Singletons.Location=new e)},"1.0",{requires:["base","squarespace-attr-validators","squarespace-navigation-list-utils"]})},"./src/main/webapp/universal/scripts-v6/damask/menu/make.js":function(e,t){YUI.add("squarespace-damask-menu-make",function(n){n.namespace("Squarespace.Damask.Menu");var r=n.Squarespace.ObjectBuilder;function e(e,t,a){e={builtObj:e};var i=r.make(e,t,a);i=r.walkObject(n.merge(i),[{test:function(e){return e&&e.$whenHasPermission},map:function(e){var t=true;n.Array.each(e.$whenHasPermission,function(e){n.Squarespace.UtilAuthenticated.userHasAccessPermission(e)||(t=false)});if(t){delete e.$whenHasPermission;return e}return}},{test:function(e){return e&&e.$whenWebsiteIsNot},map:function(e){var t=true;var a=n.Squarespace.Context.getInstance().get("website").get("siteStatus.value");n.Array.each(e.$whenWebsiteIsNot,function(e){e===a&&(t=false)});if(t){delete e.$whenWebsiteIsNot;return e}return}},{test:function(e){return e&&e.$whenDoesNotHavePlan},map:function(e){var t=true;n.Array.each(e.$whenDoesNotHavePlan,function(e){e===n.Object.getValue(Static,["SQUARESPACE_CONTEXT","plan"])&&(t=false)});if(t){delete e.$whenDoesNotHavePlan;return e}return}},{test:function(e){return e&&e.$whenWebsiteTypeIsNot},map:function(e){var t=true;var a=n.Squarespace.Context.getInstance().get("website");var i=a.get("websiteType");n.Array.each(e.$whenWebsiteTypeIsNot,function(e){e===i&&(t=false)});if(t){delete e.$whenWebsiteTypeIsNot;return e}return}}]);var s={};n.Object.each(i,function(e,t){n.Lang.isObject(e)&&(s[t]=e)});return s.builtObj}n.Squarespace.Damask.Menu.make=e},"1.0",{requires:["base","squarespace-context","squarespace-object-builder","squarespace-util-authenticated"]})},"./src/main/webapp/universal/scripts-v6/damask/modal-manager.js":function(e,t,a){var s=a("./common/temp/node_modules/@sqs/cookie-cutter/index.js");var n=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var r=a("./src/main/webapp/universal/src/shared/utils/dateFormat.js");var o=a("./src/main/webapp/universal/src/shared/utils/billing/ProductLineUtils.js").getLabelForProductLine;YUI.add("squarespace-damask-modal-manager",function(a){var i=a.Object.getValue(Static,["SQUARESPACE_CONTEXT","currentTermsOfServiceVersion"]);a.namespace("Squarespace.Damask.Modal");a.Squarespace.Damask.Modal.Manager=a.Base.create("modalManager",a.Base,[],{render:function(){this._showTips();var e=new a.Squarespace.Models.ConnectedAccounts.loadFromStore;e&&this._showUnauthorizedSocialAccountAlert(e);this._renderBillingSummary()},_renderUpdateTOS:function(){var e=this.get("siteContext.website.siteStatus.value");if(this._accountNotRemovedOrExpired(e)){var t=new a.Squarespace.Widgets.TermsOfService({websiteSettings:this.get("siteContext.websiteSettings"),mostRecentToSVersion:i});t.on("destroy",function(){this._showTips()},this);t.render()}},_showUnauthorizedSocialAccountAlert:function(e){var t=a.Array.some(e,function(e){return e.accountState===a.Squarespace.AccountStates.UNAUTHORIZED},this);t&&new a.Squarespace.Widgets.Confirmation({position:a.Squarespace.Widgets.Confirmation.ANCHOR.CENTER,"strings.confirm":n("Reconnect Accounts"),"strings.cancel":n("Dismiss"),"strings.title":n("Connected Accounts Deactivated"),"strings.message":n("One or more of your Connected Accounts has been deactivated. You must reconnect them for continued usage.")}).on("confirm",function(){a.Squarespace.Singletons.Location.go("/settings/connected-accounts")})},_showTips:function(){this.hasCompletedMemberTutorial("welcome")||a.later(200,this,this._renderMemberTutorialWelcome)},_renderMemberTutorialWelcome:function(){this._markMemberTutorialCompleted("welcome")},showUpdateTOS:function(){return!this.hasAgreedToMostRecentToS()&&this.canAgreeToToS()},canAgreeToToS:function(){return a.Squarespace.UtilAuthenticated.userHasAccessPermission(a.Squarespace.AccessPermissions.CONFIG_ACCEPT_TOS)},hasAgreedToMostRecentToS:function(){return!a.Lang.isValue(i)||this.get("websiteSettings").get("lastAgreedTermsOfService")===i},_isStatus:function(e){var t=this.get("siteContext.website.siteStatus.value");return e===t},hasCompletedMemberTutorial:function(e){return a.Object.getValue(this.get("siteContext.authenticatedAccount.tutorialsCompleted"),e)},hasCompletedWebsiteTutorial:function(e){return a.Object.getValue(this.get("siteContext.websiteSettings.tutorialsCompleted"),e)},_markWebsiteTutorialComplete:function(e){var t=this.get("siteContext.websiteSettings");t.tutorialsCompleted[e]=true;a.Data.post({url:"/api/config/MarkWebsiteTutorialCompleted",data:{tutorial:e}},this)},_markMemberTutorialCompleted:function(e){a.Data.post({url:"/api/config/MarkMemberTutorialCompleted",json:true,data:{tutorial:e}},this)},_accountNotRemovedOrExpired:function(e){return e!==a.Squarespace.StatusConstants.EXPIRED&&e!==a.Squarespace.StatusConstants.REMOVED},_renderBillingSummary:function(){if(a.Lang.isValue(s.get("billingChangeSummary"))){var e=JSON.parse(s.get("billingChangeSummary"));this._isStatus(a.Squarespace.StatusConstants.EXPIRED)?this.set("cancelled",true):this._showBillingChangeSummary(e);s.set("billingChangeSummary","",{expires:new Date(0)})}},_showBillingChangeSummary:function(e){var t=this.get("strings.periodChangeConfirmationMessage");e.planChange&&(t=this.get("strings.planChangeConfirmationMessage"));if(e.productLineChange){t=this.get("strings.productLineChangeConfirmationMessage");e.prevProductLineLabel=o(e.prevProductLine);e.newProductLineLabel=o(e.newProductLine)}e.nextBillDate=r(e.nextBillDate);new a.Squarespace.Widgets.Alert({"strings.title":n("Transaction Complete"),"strings.message":a.Lang.sub(t,e),position:a.Squarespace.Widgets.Confirmation.ANCHOR.CENTER,showOverlay:true}).show()}},{ATTRS:{siteContext:{valueFn:function(){return window.Static.SQUARESPACE_CONTEXT}},damask:{},cancelled:{value:false},strings:{value:{productLineChangeConfirmationMessage:n('You\'ve changed from <strong data-test="billing-cycle-confirm-change__prevProductLine">{prevProductLineLabel}: {prevPlanName} plan</strong> to <strong data-test="billing-cycle-confirm-change__newProductLine">{newProductLineLabel}: {newPlanName} plan</strong>. Your website will renew on {nextBillDate}.'),periodChangeConfirmationMessage:n('You\'ve changed your billing cycle from <strong data-test="billing-cycle-confirm-change__prevPeriodName">{prevPeriodName}</strong> to <strong data-test="billing-cycle-confirm-change__newPeriodName">{newPeriodName}</strong>. Your website will renew on {nextBillDate}.'),planChangeConfirmationMessage:n('You\'ve changed from the <strong data-test="confirm-plan-change__prevPlanName">{prevPlanName} plan</strong> to the <strong data-test="confirm-plan-change__newPlanName">{newPlanName} plan</strong>.'),websiteCanceled:n("We have canceled your website subscription. You can get all of your content back at any time by subscribing again.")}},websiteSettings:{valueFn:function(){return this.get("siteContext.websiteSettings")},setter:function(e){if(!a.instanceOf(e,a.Squarespace.Models.WebsiteSettings))return new a.Squarespace.Models.WebsiteSettings(e);return e}}}})},"1.0",{requires:["base","node","squarespace-attr-validators","squarespace-enum","squarespace-models-website-settings","squarespace-singletons-location","squarespace-ss-widget","squarespace-terms-of-service-overlay","squarespace-util","squarespace-util-authenticated","squarespace-widgets-alert","squarespace-widgets-confirmation","widget-parent"]})},"./src/main/webapp/universal/scripts-v6/damask/panel/async-data-panel.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/constants/PanelDirectionClasses.js");var s=a("./src/main/webapp/universal/src/shared/utils/mediaQueries.js");YUI.add("squarespace-damask-panel-async-data-panel",function(e){e.namespace("Squarespace.Damask.Panel");e.Squarespace.Damask.Panel.AsyncDataPanel=e.Base.create("AsyncDataPanel",e.Squarespace.SSWidget,[],{CONTENT_TEMPLATE:null,initializer:function(){this.get("boundingBox").setStyles({left:this.get("offset"),width:this.get("width")}).addClass("sqs-damask-panel");this.getPanel(this.get("location.params"),this.done.bind(this),this.redirect.bind(this))},destructor:function(){if(this.widget){this.widget.destroy(true);this.widget=null}this.get("spinner").destroy(true)},getPanel:function(){throw new Error("getPanel must be implemented.")},redirect:function(e){setTimeout(function(){this.get("router").replace(e)}.bind(this),0)},done:function(e){if(this.get("destroyed"))return;this.widget=e;this.get("spinner").stop();var t=this.get("boundingBox");t.removeClass("sqs-damask-panel");this.widget.set("location",this.get("location"));this.widget.set("damask",this.get("damask"));this.widget.set("router",this.get("router"));this.widget.set("direction",this.get("direction"));this.widget.set("widthCallback",this.get("widthCallback"));this.widget.render(t)},addHidingClassname:function(e){this.get("boundingBox").addClass("sqs-damask-panel-hiding");if(s.isSubDesktop()){var t=i.OUTGOING[e];this.widget.get("boundingBox").removeClass(i.INCOMING_PANEL);this.widget.get("boundingBox").addClass(t)}}},{CSS_PREFIX:"async-data-panel",ATTRS:{damask:{},location:{},offset:{},router:{},width:{},widthCallback:{},spinner:{valueFn:function(){return new e.Squarespace.Spinner({color:"dark",size:"extra-large",render:this.get("boundingBox")})}},direction:{}}})},"1.0",{requires:["base","squarespace-spinner","squarespace-ss-widget"]})},"./src/main/webapp/universal/scripts-v6/damask/panel/menu-item.js":function(e,t){YUI.add("squarespace-damask-panel-menu-item",function(i){i.namespace("Squarespace.Damask.Panel");var s=i.Squarespace.Damask.Panel.MenuItem=i.Base.create("MenuItem",i.Squarespace.SSWidget,[i.Squarespace.Damask.Panel.MixinPusher],{renderUI:function(){s.superclass.renderUI.apply(this,arguments);this.get("contentBox").setAttribute("data-label",this.get("name"));this.get("contentBox").setAttribute("data-test","menuItem-"+this.get("name"));this.get("contentBox").append('<div class="title"></div>');this._initToolTip(this.get("tip"))},syncUI:function(){s.superclass.syncUI.apply(this,arguments);var e=this.get("contentBox");var t=this.getAttrs(["label","href","target"]);var a=t.label;i.Lang.isValue(t.href)&&(a=i.Lang.sub('<a href="{href}" target="{target}">{label}</a>',t));e.one(".title").setContent(a)},destructor:function(){if(i.Lang.isValue(this.toolTip)){this.toolTip.destroy();this.toolTip=null}},_initToolTip:function(e){if(!i.Lang.isObject(e))return;var t=i.merge(e,{target:this.get("contentBox")});this.toolTip=new i.Squarespace.ToolTip(t)}},{CSS_PREFIX:"sqs-damask-menu-item",ATTRS:{label:{validator:i.Squarespace.AttrValidators.isString},tip:{validator:i.Squarespace.AttrValidators.isObject},target:{value:"_blank"}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-damask-panel-mixin-panel","squarespace-damask-panel-mixin-pusher","squarespace-ss-widget","squarespace-ui-base"]})},"./src/main/webapp/universal/scripts-v6/damask/panel/mixin-panel-parent.js":function(e,t,a){var o=a("./src/main/webapp/universal/src/shared/utils/formatting/substituteString.js");YUI.add("squarespace-damask-panel-mixin-panel-parent",function(n){n.namespace("Squarespace.Damask.Panel");var r=n.Squarespace.Damask.Panel.MixinPanelParent=n.Base.create("MixinPanelParent",n.Base,[],{destructor:function(){n.Object.each(this.get("pushers"),function(e){e.removeTarget(this)},this);n.Object.each(this.get("activeEvents"),function(e){n.Array.invoke(e,"detach")})},getPusherByName:function(e){var t=n.Object.getValue(this.get("pushers"),e);if(n.Lang.isValue(t))return t;return null},activatePusherByName:function(e,t){var a=this.getPusherByName(e);a&&this.activatePusher(a)},activatePusher:function(e){e.set("active",true,{source:"activatePusherByName"})},_registerPushers:function(){n.Array.each(this._getRenderedPushersArray(),this._registerPusher,this)},_registerPusher:function(e){var t=this.get("pushers");if(!e.get("isPusher"))return;var a=e.get("name");var i=r.ensureTrailingSlash(this.get("location.pathname"));var s=e.get("path")?e.get("path"):i+a;e.set("pathname",s);e.set("router",this.get("router"));if(n.Lang.isValue(a)){if(n.Object.hasKey(t,a)){this.get("LOG").warn(o("Pusher `name` ATTR duplicate detected: `{name}` Rebinding active change events.",{name:a}));this._unbindActiveChangeEvents(a)}}else this.get("LOG").warn("Pusher `name` ATTR missing: "+e);t[a]=e;this._bindActiveChangeEvents(e,a)},_renamePusher:function(e,t,a){var i=this.get("pushers");var s=this.get("activeEvents");a=a||e.get("name");e.set("name",t);i[t]=e;s[t]=s[a];delete s[a];delete i[a]},_deregisterPusher:function(e){var t=e.get("name");this._unbindActiveChangeEvents(t);delete this.get("pushers")[t]},_bindActiveChangeEvents:function(e,t){if(n.Object.hasKey(this.get("activeEvents"),t))return;var a="activeChange";this.get("activeEvents")[t]=[e.before(a,this._beforeActiveChange,this),e.after(a,this._afterActiveChange,this)]},_unbindActiveChangeEvents:function(e){var t=this.get("activeEvents");n.Array.each(t[e],function(e){e.detach()});delete t[e]},_getRenderedPushersArray:function(){this.get("LOG").error("_getRenderedPushersArray called but not implemented");return[]},_beforeActiveChange:function(e){if(e.newVal&&!e.prevVal&&!this.get("inView")){e.halt();return}if("activatePusherByName"===e.source)return;if(e.prevVal||!e.newVal)return;if(n.Lang.isBoolean(e.force)&&e.force)return;e.halt();e.target.set("active",true,{force:true})},_afterActiveChange:function(e){if("activatePusherByName"===e.source){e.halt();return}e.newVal&&this.activatePusherByName(e.target.get("name"))}},{ensureTrailingSlash:function(e){return"/"===e.slice(-1)?e:e+"/"},ATTRS:{LOG:{valueFn:function(){return new n.Squarespace.Debugger({name:this.name})}},pushers:{value:{},validator:n.Squarespace.AttrValidators.isObject},activePanel:{validator:n.Squarespace.AttrValidators.isNullOrInstanceOf(n.Squarespace.Widgets.SSWidget)},activeEvents:{value:{},validator:n.Squarespace.AttrValidators.isObject},location:{},title:{validator:n.Squarespace.AttrValidators.isNullOrString}}})},"1.0",{requires:["base","promise","squarespace-attr-validators","squarespace-damask-menu-make","squarespace-damask-panel-menu-item","squarespace-debugger","squarespace-ss-widget"]})},"./src/main/webapp/universal/scripts-v6/damask/panel/mixin-panel.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/constants/PanelDirectionClasses.js");var s=a("./src/main/webapp/universal/src/shared/utils/mediaQueries.js");var n=a("./common/temp/node_modules/react/index.js");var r=a("./common/temp/node_modules/react-dom/index.js");var o=a("./src/main/webapp/universal/src/apps/App/shared/components/MenuHeader/index.jsx").default;var l=a("./src/main/webapp/universal/src/shared/contexts/LocationContext.js");var c=a("./src/main/webapp/universal/src/shared/contexts/RouterContext.js");YUI.add("squarespace-damask-panel-mixin-panel",function(t){t.namespace("Squarespace.Damask.Panel");t.Squarespace.Damask.Panel.MixinPanel=t.Base.create("MixinPanel",t.Base,[],{initializer:function(){this._beforeRenderUIEvent=t.Do.before(this._addCssClassNames,this,"renderUI",this);this._afterRenderUIEvent=t.Do.after(this.applyOffsets,this,"renderUI",this);this.after("inViewChange",function(e){this.get("boundingBox").toggleClass("sqs-panel-in-view",e.newVal)});this.after("dirtyChange",this._renderMenuHeader);setTimeout(function(){this._renderMenuHeader()}.bind(this),300);this._bindInViewCalculation()},_renderMenuHeader:function(){var e;var t;if(this.get("menuHeaderChildWidget")){t=n.createRef();e=n.createElement("div",{ref:t})}r.render(n.createElement(c.Provider,{value:this.get("router")},n.createElement(l.Provider,{value:this.get("location")},n.createElement(o,{isDirty:this.get("dirty"),onSaveClick:this._initSaveChanges?this._initSaveChanges.bind(this):null,onDiscardClick:this._discardChanges?this._discardChanges.bind(this):null,router:this.get("router"),location:this.get("location"),children:e}))),this.get("menuHeaderNode").getDOMNode(),function(){t&&setTimeout(function(){this.get("menuHeaderChildWidget").render(t.current)}.bind(this),0)}.bind(this))},destructor:function(){this.cacheScrollTop();this._recalculateTimeout&&this._recalculateTimeout.cancel();if(t.Lang.isValue(this._beforeRenderUIEvent)){this._beforeRenderUIEvent.detach();this._beforeRenderUIEvent=null}if(t.Lang.isValue(this._afterRenderUIEvent)){this._afterRenderUIEvent.detach();this._afterRenderUIEvent=null}t.Lang.isValue(this.get("menuHeaderChildWidget"))&&this.get("menuHeaderChildWidget").destroy(true);var e=this.get("menuHeaderNode").getDOMNode();t.Lang.isValue(e)&&r.unmountComponentAtNode(e);this.get("menuHeaderNode").destroy(true)},cacheScrollTop:function(){this.get("router").saveScrollTop(this.get("location.key"),this.get("contentBox").get("scrollTop"))},applyOffsets:function(){var e=this.get("location.key");var t=this.get("router").getScrollTop(e);var a=this.get("offset");t&&this.get("contentBox").set("scrollTop",t);a&&this.get("boundingBox").setStyle("left",a)},addHidingClassname:function(e){this.get("boundingBox").addClass("sqs-damask-panel-hiding");this.get("boundingBox").removeClass(i.INCOMING_PANEL);if(s.isSubDesktop()){var t=i.OUTGOING[e];this.get("boundingBox").addClass(t)}},_addCssClassNames:function(){this.get("boundingBox").addClass("sqs-damask-panel");this.get("contentBox").addClass("sqs-damask-panel-content");setTimeout(function(){this.get("boundingBox").addClass(i.INCOMING_PANEL)}.bind(this),50);if(s.isSubDesktop()){var e=i.INCOMING[this.get("direction")];this.get("boundingBox").addClass(e)}},_bindInViewCalculation:function(){this._registerEvent(t.Do.after(function e(){this._recalculateTimeout=t.later(400,this,this._updateInView)},this,"renderUI",this));this.after("activePanelChange",this._updateInView,this)},_updateInView:function(){this.set("inView",!t.Lang.isValue(this.get("activePanel")))}},{ATTRS:{damask:{validator:function(e){return t.Lang.isObject(e)}},animationEnabled:{value:true,validator:t.Squarespace.AttrValidators.isBoolean},inView:{value:false,validator:t.Squarespace.AttrValidators.isBoolean},panelPathName:{value:"",validator:t.Squarespace.AttrValidators.isNullOrString},siteContext:{valueFn:function(){return window.Static.SQUARESPACE_CONTEXT}},urlAddressable:{value:true,validator:t.Squarespace.AttrValidators.isBoolean},isSaving:{value:false,validator:t.Squarespace.AttrValidators.isBoolean,readOnly:true},isReverting:{value:false,validator:t.Squarespace.AttrValidators.isBoolean,readOnly:true},menuHeaderNode:{valueFn:function(){return new t.Node.create("<div>")}},menuHeaderChildWidget:{},protectChanges:{value:false,validator:t.Squarespace.AttrValidators.isBoolean,readOnly:true},location:{},router:{},offset:{value:0},direction:{}}})},"1.0",{requires:["base","promise","squarespace-attr-validators","squarespace-promises"]})},"./src/main/webapp/universal/scripts-v6/damask/panel/mixin-pusher.js":function(e,t,a){var i=a("./common/temp/node_modules/lodash/noop.js");YUI.add("squarespace-damask-panel-mixin-pusher",function(s){s.namespace("Squarespace.Damask.Panel");s.Squarespace.Damask.Panel.MixinPusher=s.Base.create("MixinPusher",s.Base,[],{initializer:function(){this._afterPusherBindUIEvent=s.Do.after(this._bindActiveChanges,this,"bindUI",this);this._afterPusherSyncUIEvent=s.Do.after(this._syncActiveState,this,"syncUI",this)},destructor:function(){this._afterPusherBindUIEvent.detach();this._afterPusherSyncUIEvent.detach()},push:function(e){this.get("activationPromise")().then(s.bind(this._activate,this,e),s.bind(this._dontActivate,this,e))},_bindActiveChanges:function(){this._registerPushEvent();this.after("activeChange",function(e){this._syncActiveState(e.newVal)})},_registerPushEvent:function(){this._registerEvent(this.get("contentBox").on("click",this.push,this))},_activate:function(e){var t=this.get("pathname");var a=this.get("router");a.cacheAttrs(t,this.get("childPanelConfig"));a.push(t)},_dontActivate:i,_syncActiveState:function(e){var t=this.get("boundingBox");var a=this.getClassName("selected");var i=s.Lang.isBoolean(e)&&e||this.get("active");t.toggleClass(a,i)}},{ATTRS:{active:{value:false,validator:s.Squarespace.AttrValidators.isBoolean},childPanelConfig:{value:null,validator:s.Squarespace.AttrValidators.isNullOrObject},isPusher:{value:true,readOnly:true,validator:s.Squarespace.AttrValidators.isBoolean},name:{validator:s.Squarespace.AttrValidators.isString},pathParams:{value:null,validator:s.Squarespace.AttrValidators.isNullOrObject},href:{validator:s.Squarespace.AttrValidators.isNullOrString},newWindow:{value:false,validator:function(e){return s.Squarespace.AttrValidators.isBoolean(e)&&s.Lang.isValue(this.get("href"))}},path:{validator:s.Squarespace.AttrValidators.isNullOrString},pathname:{},router:{},activationPromise:{validator:s.Squarespace.AttrValidators.isFunction,value:function(){return s.when(null)}}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-singletons-location","squarespace-util"]})},"./src/main/webapp/universal/scripts-v6/damask/panel/panel-pusher.js":function(e,t){YUI.add("squarespace-damask-panel-panel-pusher",function(e){e.namespace("Squarespace.Damask.Panel");e.Squarespace.Damask.Panel.PanelPusher=e.Base.create("PanelPusher",e.Squarespace.Widgets.SSWidget,[e.Squarespace.Damask.Panel.MixinPusher],{bindUI:function(){this.after(["titleChange","descriptionChange","isDisabledChange"],this.syncUI,this)},syncUI:function(){var e=this.get("contentBox");e.one(".title").setContent(this.get("title"));e.one(".description").setContent(this.get("description"));var t=this.get("boundingBox");t.setAttribute("data-name",this.get("name"));t.setAttribute("data-test","sqs-panel-pusher");e.one(".panel-pusher").toggleClass("disabled",this.get("isDisabled")).toggleClass("hasError",this.get("hasError"))}},{CSS_PREFIX:"sqs-panel-pusher",TEMPLATE:'<div class="panel-pusher" data-test="panel-pusher-content"><div class="title"></div><div class="description"></div></div>',ATTRS:{readOnly:{value:true,readOnly:true},title:{validator:e.Squarespace.AttrValidators.isString},description:{validator:e.Squarespace.AttrValidators.isNullOrString},isDisabled:{validator:e.Squarespace.AttrValidators.isBoolean,value:false},hasError:{validator:e.Squarespace.AttrValidators.isBoolean,value:false}}})},"1.0",{requires:["base","squarespace-damask-panel-mixin-pusher","squarespace-ss-widget"]})},"./src/main/webapp/universal/scripts-v6/damask/preview/content-bridge.js":function(e,t,a){var o=a("./src/main/webapp/frontend/packages/enums/IndexType.js");var i=a("./src/main/webapp/universal/src/shared/utils/getCollectionDataFromContext.js");var s=a("./src/main/webapp/universal/src/shared/utils/Loggers.ts");var l=s.createLogger("content-bridge","hotpink");var c=s.createWarningLogger("content-bridge");var u=a("./src/main/webapp/universal/src/apps/App/shared/stores/TemplateInstallationsStore.js");YUI.add("squarespace-damask-preview-content-bridge",function(r){r.namespace("Squarespace.Damask.Preview");var n=r.Squarespace.Damask.Preview.ContentBridge=r.Base.create("contentBridge",r.Base,[],{initializer:function(){this.LOG=new r.Squarespace.Debugger({name:this.name,output:false});this._events={controller:[],contentItem:[],contentItemEditor:[]};this._publishEvents()},destructor:function(){this._cleanup()},_detachEventsFrom:function(e){while(e.length){var t=e.pop();try{t.listener.detach()}catch(e){false}}},_unbindContentItemEvents:function(){this._detachEventsFrom(this._events.contentItem)},_unbindContentItemEditorEvents:function(){this._detachEventsFrom(this._events.contentItemEditor)},_publishEvents:function(){this.publish("cmcStateChange");this.publish("cmcEditableChange");this.publish("cmcSave");this.publish("cmcDiscard");this.publish("contentItemSave");this.publish("collectionSave")},changeContent:function(e){this._cleanup();this.set("staticContext",e.Static);var t=e.Y.Squarespace.Frontend;var a=t?t.ContentModeController:null;if(a){this.set("controller",a);this._bindControllerEvents();this._updateCollection();this._updateContentItem()}},saveAnnotationControllerChangesAndDisableEditing:function(){if(this.get("controller"))return this.get("controller").saveAnnotationControllerChangesAndDisableEditing()},revertAnnotationControllerChangesAndDisableEditing:function(){this.get("controller")&&this.get("controller").revertAnnotationControllerChangesAndDisableEditing()},getContentItemFieldsToHide:function(){return this.get("controller").getDamaskHideFields()},showContentItemEditor:function(t){if(!r.Lang.isValue(t)){c("_showContentItemEditor called but no contentItem found.");return false}var e=this.get("id");t.detach(e+"|*");var a=t.on(e+"|save",function(e){if(r.Lang.isValue(r.Object.getValue(e,"options.headers.X-AutoSave".split("."))))return;var t=this.get("collection").get("fullUrl");var a=r.Object.getValue(e,["parsed","urlId"]);var i=t+a;this.fire("contentItemSave",{url:i})},this);this._events.contentItemEditor.push({name:"saveContentItem",listener:a});t.load(r.bind(function(){var e=this._initActiveContentItem(t);this._events.contentItemEditor.push({name:"deactivateEditorBeforeDestroy",listener:e.before("destroy",this._deactivateContentItemEditor,this)});e.show()},this))},_cleanup:function(){try{this._unbindControllerEvents();this._unbindContentItemEvents();this._unbindContentItemEditorEvents();this.setAttrs({staticContext:null,controller:null,contentItem:null,collection:null})}catch(e){false}},_bindControllerEvents:function(){this._unbindControllerEvents();var e=this.get("controller");if(!r.Lang.isValue(e)){c("Could not find the ContentModeController in the frame!");return}var t=this.get("cmcVisible");l("Setting controllers visible based on initial cmcVisible",{cmcVisible:t});e.set("visible",t);e.getTargets().includes(this)||e.addTarget(this);var a=this.get("id");this._events.controller.push({name:"controllerCmcVisibleChange",listener:this.after("cmcVisibleChange",function(e){l("Updating controllers visible based on cmcVisibleChange",{cmcVisible:e.newVal});this.get("controller").set("visible",e.newVal)})},{name:"controllerEditableChange",listener:e.after(a+"|editableChange",function(e){this.fire("cmcEditableChange",e)},this)},{name:"controllerDirtyEditableChange",listener:e.after([a+"|dirtyChange",a+"|editableChange"],function(e){this.set("editLabel",this.get("controller").getActiveAnnotationControllerLabel());this.fire("cmcStateChange",e)},this)},{name:"controllerRequestSaveChanges",listener:e.on(a+"|*:request-save-changes",function(e){var t={};e.model&&(t.model=e.model);this.fire("cmcSave",t)},this)},{name:"controllerRequestDiscardChanges",listener:e.on(a+"|*:request-discard-changes",function(){this.fire("cmcDiscard")},this)},{name:"controllerContextCollectionChange",listener:e.on(a+"|contextCollectionChange",function(e){e.newVal?this.set("collection",e.newVal):this._updateCollection()},this)})},_unbindControllerEvents:function e(){this._detachEventsFrom(this._events.controller);var t=this.get("controller");r.Lang.isValue(t)&&t.removeTarget(this)},_bindContentItemEditorEvents:function(){this._events.contentItemEditor.push({name:"showContentItemEditor",listener:this.get("controller").on("*:showContentItemEditor",function(e){if(!r.Lang.isString(e.itemId)||!r.Lang.isString(e.collectionId)){c("showContentItemEditor fired without a itemId or collectionId.");return}this.showContentItemEditor(new r.Squarespace.Models.ContentItem({id:e.itemId,collectionId:e.collectionId}))},this)})},_updateCollection:function(){var e=r.Object.getValue(Static,["SQUARESPACE_CONTEXT","accessPermissions"]);var t=r.Squarespace.AccessPermissions.CONFIG_CONTENT_MANAGER;if(!e||!e.includes(t))return;var a=null;var i=r.Squarespace.ContentCollectionCache;var s=this._getCollectionFromController();r.Lang.isValue(s)||(s=this._getCollectionFromContext());a=i.getCollectionFromData(s);a&&a.load(function(){if(!r.Env)return;r.bind(this._bindContentItemEditorEvents,this)}.bind(this));this.set("collection",a)},_getCollectionFromController:function(){var e=this.get("controller");if(!r.Lang.isValue(e))return null;var t=e.get("contextCollection");if(!r.Lang.isValue(t))return null;return t.toJSON()},_getCollectionFromContext:function(){var e=this.get("staticContext.SQUARESPACE_CONTEXT.collection");if(!r.Lang.isObject(e))return null;return i(e)},_updateContentItem:function(){this._unbindContentItemEvents();var e=this.get("staticContext.SQUARESPACE_CONTEXT.item");if(!r.Lang.isValue(e)||!r.Lang.isValue(e.id))return;var t=this.get("collection");if(!r.Lang.isValue(t))return;this.set("contentItem",t.items.getById(e.id)||null);this._bindContentItemEvents()},_bindContentItemEvents:function(){var t=this.get("collection");if(!r.Lang.isValue(t))return;this._events.contentItem.push({name:"fireOnRemoved",listener:t.items.on("remove",function(e){this.get("contentItem")===e.model&&this.fire("contentItemRemove",{collectionUrl:t.get("urlId")})},this)},{name:"fireOnBulkRemove",listener:t.items.on("bulk-remove",function(e){-1!==e.target.indexOf(this.get("contentItem"))&&this.fire("contentItemRemove",{collectionUrl:t.get("urlId")})})})},_initActiveContentItem:function(e){return n.buildContentItemEditor(e,this.get("contentBox"),this.getContentItemFieldsToHide())},ensureCollectionInStackedIndexIsOnScreen:function(e,t,a){this.get("controller")&&this.get("controller").ensureCollectionInStackedIndexIsOnScreen(e,t,a)},getCollectionUrl:function(e){return n.getCollectionUrl(e)}},{getCollectionUrl:function(e){var t="/"+e.get("urlId");var a=n.getIndexCollectionUrl(e);r.Lang.isString(a)&&e.get("enabled")&&(t=a);a||e.get("id")!==u.getHomepageCollectionId()||(t="/");return t},_getIndexCollectionHashUrl:function(e){if(!r.Squarespace.Navigation.ListUtils.isCollectionInIndex(e))return null;var t=r.Squarespace.Navigation.ListUtils.getParentCollection(e);var a=n.getCollectionUrl(t);"/"===a&&(a="");var i=t?t.getTemplateConfiguration().get("indexCollectionHashUrlTemplate"):null;if(!i)return a+"/#/"+e.get("urlId");var s=r.Squarespace.Lang.sub(i,{collection:e.toJSON()});return a+"/"+s},getIndexCollectionUrl:function(e){var t=this._getCollectionUrlFromNavigation(e);var a=r.Squarespace.Navigation.ListUtils.getIndexCollectionForCollection(e);if(a&&a.getTemplateConfiguration().get("indexType")===o.FULL_URL)return"/"+e.get("urlId");if(!r.Lang.isValue(t))return this._getIndexCollectionHashUrl(e);var i=r.Squarespace.Lang.sub(t,{collection:e.toJSON()});var s=n.getCollectionUrl(a);return s+i},_getCollectionUrlFromNavigation:function(e){var t=r.Squarespace.Singletons.TemplateNavigationList.getItemByCollectionId(e.get("id"));if(!r.Lang.isValue(t))return null;var a=t.getFolderItemList();if(!r.Lang.isValue(a))return null;var i=a.getNavigationItem();if(!r.Lang.isValue(i))return null;var s=i.get("collection");if(!r.Lang.isValue(s))return null;var n=s.getTemplateConfiguration();if(!r.Lang.isValue(n))return null;return n.get("indexConfiguration.collectionUrl")},buildContentItemEditor:function(e,t,a){var i={};var s=r.Squarespace.ContentItemEditorFactory.getEditor(e,i);return new s({model:e,render:t,hideFields:a})},ATTRS:{staticContext:{},controller:{},collection:{},contentItem:{},cmcVisible:{value:true,validator:r.Squarespace.AttrValidators.isBoolean},editLabel:{value:"",validator:r.Squarespace.AttrValidators.isNullOrString},isEditing:{getter:function(){var e=this.get("controller");if(!r.Lang.isValue(e))return false;return!!(e.get("dirty")||e.get("editable"))}},dirty:{getter:function(){var e=this.get("controller");return r.Lang.isValue(e)&&e.get("dirty")}}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-content-item-types-editor","squarespace-content-manager-navigation-ui-utils","squarespace-debugger","squarespace-enum","squarespace-fluent-confirmation","squarespace-model-editor","squarespace-models-content-item","squarespace-models-template-navigation-list","squarespace-util"]})},"./src/main/webapp/universal/scripts-v6/damask/preview/footer.js":function(e,t,a){var s=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var n=a("./src/main/webapp/universal/src/shared/constants/Constants.js");var o=a("./common/temp/node_modules/@sqs/cookie-cutter/index.js");var l=a("./src/main/webapp/frontend/packages/enums/WebsiteType.js");var c=a("./src/main/webapp/universal/src/shared/utils/showPageViolations.js");YUI.add("squarespace-damask-preview-footer",function(r){var i={TOGGLE_DISABLE_SCRIPTS:"toggle-disable-scripts",ENABLE_COLLECTION:"enable-collection"};r.namespace("Squarespace.Damask.Preview");r.Squarespace.Damask.Preview.Footer=r.Base.create("DamaskPreviewFooter",r.Squarespace.SSWidget,[],{initializer:function(){this.publish("requestFrameRefresh");this.publish("foundYInFrameChange",{broadcast:2});this.publish("enableScriptsInPreview",{broadcast:2});this.publish("disableScriptsInPreview",{broadcast:2})},renderUI:function(){this.get("contentBox").append('<span class="message"></span>').append('<span class="action"></span>')},bindUI:function(){this.after("foundYInFrameChange",this.syncUI,this);this.after("collectionIsEnabledChange",this.syncUI,this);r.Global.on("deviceView:change",this.syncUI,this);this.get("contentBox").delegate("click",function(e){var t=e.target.getAttribute("data-action");if(t===i.TOGGLE_DISABLE_SCRIPTS)this._toggleDisableScripts();else if(e.target.getAttribute("data-action")===i.ENABLE_COLLECTION){var a=new r.Squarespace.Widgets.Confirmation({"strings.message":"Make this page visible to visitors?"});a.on("confirm",this._enableCollection.bind(this))}},".action",this)},_toggleDisableScripts:function(){this._toggleCookie()?this.fire("disableScriptsInPreview"):this.fire("enableScriptsInPreview");this.fire("requestFrameRefresh");this.syncUI()},_enableCollection:function(){var e=this.get("contentBridge").get("collection").get("id");var t=r.Squarespace.ContentCollectionCache.getById(e);t.load(function(){t.set("enabled",true);t.save(function(e){e&&e.errors&&e.errors.urlId?new r.Squarespace.Widgets.Alert({"strings.title":this.get("strings.urlIdErrorTitle"),"strings.message":this.get("strings.urlIdErrorMessage")}):true!==t.get("enabled")?c():this.fire("requestFrameRefresh")}.bind(this))}.bind(this))},syncUI:function(){var e=this._getFooterParams();if(e){var t=this.get("boundingBox");t.setAttribute("data-action-name",e.action);var a=this.get("contentBox");a.one(".message").setContent(e.message);var i=a.one(".action");i.setContent(e.actionMessage);i.setAttribute("data-action",e.action)}var s=r.one("html");var n=!!e&&!(s.hasClass("device-view-phone")||s.hasClass("device-view-tablet"));this.set("visible",n)},_getFooterParams:function(){var e=window.Static.SQUARESPACE_CONTEXT.website.websiteType;if(e===l.PARKING_PAGE)return null;if(this.isDisableScriptsCookieSet())return{message:s("Scripts have been disabled on your site preview."),actionMessage:s("Enable Scripts in Preview"),action:i.TOGGLE_DISABLE_SCRIPTS};if(!this.get("foundYInFrame"))return{message:s("We detected an error loading your site preview. This is usually caused by injected code."),actionMessage:s("Disable Scripts in Preview"),action:i.TOGGLE_DISABLE_SCRIPTS};if(!this.get("collectionIsEnabled"))return{message:s("This disabled page doesn't appear to visitors."),actionMessage:s("Enable page"),action:i.ENABLE_COLLECTION};return null},_toggleCookie:function(){if(o.get(n.DISABLE_USER_SCRIPTS_COOKIE)){o.set(n.DISABLE_USER_SCRIPTS_COOKIE,"",{expires:new Date(0),path:"/"});return false}o.set(n.DISABLE_USER_SCRIPTS_COOKIE,true,{path:"/"});return true},isDisableScriptsCookieSet:function(){return r.Lang.isValue(o.get(n.DISABLE_USER_SCRIPTS_COOKIE))}},{CSS_PREFIX:"sqs-damask-preview-footer",ATTRS:{frame:{},foundYInFrame:{value:true},visible:{value:false},collectionIsEnabled:{value:true},contentBridge:{},strings:{value:{urlIdErrorTitle:s("Duplicate URL Slug"),urlIdErrorMessage:s("This page has a duplicate URL. Choose another.")}}}})},"1.0",{requires:["base","squarespace-ss-widget"]})},"./src/main/webapp/universal/scripts-v6/damask/preview/frame.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/constants/FrameEvents.js");var s=a("./src/main/webapp/universal/src/shared/utils/SqsVersion.js");YUI.add("squarespace-damask-preview-frame",function(e){e.namespace("Squarespace.Damask.Preview");var t=s.isV8()?e.Squarespace.Damask.Preview.FrameV8:e.Squarespace.Damask.Preview.FrameV6;e.Squarespace.Damask.Preview.Frame=e.Base.create("preview",t,[],{},{CSS_PREFIX:"sqs-preview-frame",EVENTS:i,ATTRS:{contentBridge:{validator:e.Squarespace.AttrValidators.isNullOrInstanceOf(e.Squarespace.Damask.Preview.ContentBridge)},contentWindow:{getter:function(){if(e.Lang.isValue(this.iframe))return this.iframe.get("contentWindow")}},dirty:{value:false},editable:{value:true},frameLocked:{value:0},loading:{value:true},refreshing:{value:false},url:{value:"/"},pathname:{getter:function(){return this.get("url").split("#")[0]}},router:{},websiteOverlaysManager:{getter:"getWebsiteOverlaysManager"},frameless:{value:false}}})},"1.0",{requires:["array-invoke","base","squarespace-popup-overlay","squarespace-attr-validators","squarespace-blog-collection-list","squarespace-comments","squarespace-commerce","squarespace-commerce-email-preview","squarespace-common","squarespace-damask-announcement-bar-bridge","squarespace-damask-preview-content-bridge","squarespace-damask-preview-frame-base-v6","squarespace-damask-preview-frame-base-v8","squarespace-damask-preview-footer","squarespace-escmanager","squarespace-events-collection","squarespace-form-rendering-utils","squarespace-gallery-collection-list","squarespace-singletons-location","squarespace-management","squarespace-plugin-node-expander","squarespace-product-quick-view","squarespace-products-collection-item-v2","squarespace-products-collection-list-v2","squarespace-search-page","squarespace-share-buttons","squarespace-simple-liking","squarespace-slides","squarespace-social-buttons","squarespace-spinner","squarespace-ss-widget","squarespace-tourdates","squarespace-ui-base","squarespace-util","squarespace-util-authenticated","squarespace-website-overlays-manager","squarespace-widgets-confirmation","widget-child","widget-parent"]})},"./src/main/webapp/universal/scripts-v6/damask/preview/frame/frame-base.js":function(e,t,a){YUI.add("squarespace-damask-preview-frame-base",function(e){e.namespace("Squarespace.Damask.Preview").FrameBase=e.Base.create("preview-base",e.Squarespace.Widgets.SSWidget,[e.WidgetChild,e.WidgetParent],{initializer:function(){},destructor:function(){},getCurrentPanelWidth:function(){return e.all(".sqs-damask-panel").pop().get("offsetWidth")},renderUI:function(){false},bindUI:function(){false},syncUI:function(){false},addActionListeners:function(){false},setFramePosition:function(e){false},canEditPage:function(){false},getWebsiteOverlaysManager:function(){false},requestRefresh:function(){false},setUrlOrRequestRefresh:function(e){false}})},"1.0",{requires:["base","squarespace-ss-widget","squarespace-ui-base","widget-child","widget-parent"]})},"./src/main/webapp/universal/scripts-v6/damask/preview/frame/frame-v6.js":function(e,t,a){var n=a("./common/temp/node_modules/react/index.js");var r=a("./common/temp/node_modules/react-dom/index.js");var o=a("./common/temp/node_modules/lodash/get.js");var c=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var u=a("./common/temp/node_modules/@sqs/core-components/lib/web/ConfirmModal.js").default;var s=a("./src/main/webapp/universal/src/apps/App/shared/utils/Tucked.js");var d=a("./common/temp/node_modules/alt-utils/lib/ActionListeners.js");var p=a("./src/main/webapp/universal/src/shared/dispatchers/alt/index.ts");var h=a("./src/main/webapp/universal/src/apps/App/shared/stores/BillingStatusStore.js");var g=a("./src/main/webapp/universal/src/apps/App/shared/actions/FrameActions.js");var m=a("./src/main/webapp/frontend/packages/enums/WebsiteType.js");var f=a("./src/main/webapp/universal/src/shared/constants/TweakEvents.js");var v=a("./src/main/webapp/universal/src/shared/constants/FrameEvents.js");var b=a("./src/main/webapp/universal/src/apps/App/shared/actions/WebsiteOverlayActions.js");var S=a("./src/main/webapp/universal/src/shared/constants/PersistedFrameClasses.js");var y=a("./src/main/webapp/universal/src/shared/utils/mediaQueries.js");var _=a("./src/main/webapp/universal/src/shared/utils/UrlCategory.js");var C=a("./src/main/webapp/universal/src/shared/utils/UrlUtils.js");var i=a("./src/main/webapp/universal/src/shared/utils/Loggers.ts");var E=a("./src/main/webapp/universal/src/shared/utils/error-reporter/global-sentry.ts");var w=a("./src/main/webapp/universal/src/shared/utils/TemplateVersionUtils.js");var A=a("./common/temp/node_modules/lodash/throttle.js");var T=a("./common/temp/node_modules/@sqs/rum-collector/timing.js");var I=i.createLogger("frame-v6","hotpink");YUI.add("squarespace-damask-preview-frame-base-v6",function(l){var e=new d(p);var t={};var a={};var i=null;e.addActionListener(g.ADD_LOAD_HANDLER,function(e){if(i){false;a[e.key]=i.on(v.LOAD,e.callback)}else{false;t[e.key]=e.callback}});e.addActionListener(g.REMOVE_LOAD_HANDLER,function(e){if(i){if(a[e]){i.detach(a[e]);delete a[e]}}else delete t[e]});l.namespace("Squarespace.Damask.Preview").FrameV6=l.Base.create("preview-base-v6",l.Squarespace.Damask.Preview.FrameBase,[],{initializer:function(){this._bridgeEvents=[];this.publish(v.LOAD);this.publish(v.FRAME_SAVE_ENTER,{broadcast:2,emitFacade:true});this.publish(v.FRAME_SAVE_EXIT,{broadcast:2,emitFacade:true});this.publish(v.FRAME_EDITING_CHANGE);this._frameFooter=new l.Squarespace.Damask.Preview.Footer({frame:this,contentBridge:this.get("contentBridge")});this.addActionListeners();new l.Squarespace.Damask.Preview.AnnouncementBarBridge},destructor:function(){this._retuckTimeout&&this._retuckTimeout.cancel();this.actionListener.removeAllActionListeners();this.actionListener=null;this._unbindBridgeEvents();i=null;Object.keys(a).forEach(function(e){this.detach(a[e]);delete a[e]}.bind(this));this.confirmationMountNode&&this.confirmationMountNode.remove()},renderUI:function(){var e=this.get("contentBox");this._frameFooter.render(e)},bindUI:function(){var e=this.get("router");e.onBeforeUnload(function(){if(this.get("dirty"))return c("You have unsaved changes.")}.bind(this));e.onBeforeChange(function e(t,a){var i=!!t.state;var s=t.state.frameUrl===this.get("url");if(!i||s){a();return}var n=function(){this._discardChangesAndDisableEditing();a()}.bind(this);var r=function(){a(false)};if(this.get("dirty")){this._showHasChangesConfirmation(n,r);return}n()}.bind(this));this.after("urlChange",function(e){if("onIframeLoaded"===e.source){this.get("router").pushFrameUrl(e.newVal);return}this._syncFrameUrl()});this.after("editableChange",function(e){this.get("contentBridge").set("cmcVisible",e.newVal)},this);this.after("loadingChange",this._syncLoadingState,this);this.on("*:refresh",function(e){this.requestRefresh({reason:"heard *:refresh",e:e})},this);this.on(v.FRAME_SAVE_ENTER,this._frameEnterSave,this);this.on(v.FRAME_SAVE_EXIT,this._frameExitSave,this);this.on("framelessChange",this._syncFrameUrl,this);this.on(v.LOAD,function(e){e.refresh&&T.measure("frame-refresh")});this._bindFrameFooter()},syncUI:function(){this._syncFrameUrl();this._syncFrameFooterVisibility()},addActionListeners:function(){i=this;Object.keys(t).forEach(function(e){a[e]=this.on(v.LOAD,t[e]);delete t[e]}.bind(this));this.actionListener=new d(p);this.actionListener.addActionListener(g.REFRESH,this.requestRefresh.bind(this));this.actionListener.addActionListener(g.SET_URL,function e(t){setTimeout(this.setUrlOrRequestRefresh.bind(this,t),0)}.bind(this));this.actionListener.addActionListener(g.DISABLE_EDITING,function(){this.set("editable",false)}.bind(this));this.actionListener.addActionListener(g.ENABLE_EDITING,function(){this.set("editable",true)}.bind(this));this.actionListener.addActionListener(g.IF_LOADED,function(e){i&&e()});this.actionListener.addActionListener(g.DISABLE_LINKS,function(){this.set("disableLinks",true)}.bind(this));this.actionListener.addActionListener(g.ENABLE_LINKS,function(){this.set("disableLinks",false)}.bind(this));this.actionListener.addActionListener(b.UPDATE,function(e){var t=this.getWebsiteOverlaysManager();if(!t)return;t.set(e.field,e.value)}.bind(this))},getCurrentPanelWidth:function(){return l.all(".sqs-damask-panel").pop().get("offsetWidth")},resetTopBodyScroll:function(){l.config.doc.body.scrollTop=0},setFramePosition:function(e){var t=this.get("boundingBox");if(y.isSubDesktop()){t.removeClass("full-tuck");t.addClass("tucked");return}e="number"===typeof e?e:this.getCurrentPanelWidth();var a=l.one("body").get("region").width;if(s.shouldFrameBeTucked(e,a)){t.addClass("tucked");e>=a&&t.addClass("full-tuck")}else{if(t.hasClass("tucked")){t.addClass("untucking");this._retuckTimeout=l.later(500,this,function e(){t.removeClass("untucking")});t.removeClass("tucked").removeClass("full-tuck")}t.setStyles({left:e})}},_bindFrameFooter:function(){this._registerEvent(this._frameFooter.after("visibleChange",function(e){this._syncFrameFooterVisibility()},this));this._registerEvent(this._frameFooter.after("requestFrameRefresh",function(e){try{var t="about:blank"===this.get("iframe").get("contentWindow.location.href");t?this.setUrlOrRequestRefresh("/"):this.setUrlOrRequestRefresh(this.get("url"))}catch(e){this.LOG.error("Issue refreshing the frame",e);l.config.win.location.reload()}},this))},_syncFrameFooterVisibility:function(){var e=this._frameFooter.get("visible");var t=this.get("contentBox");if(e){t.addClass("footer-visible");this.get("iframe").addClass("footer-visible")}else{t.removeClass("footer-visible");this.get("iframe").removeClass("footer-visible")}},_frameEnterSave:function(){if(this._escManagerCloseTarget)return;this._escManagerCloseTarget={close:l.bind(function(e,t){this._confirmDone(e,t)},this),ignoreBodyClicks:true};l.Squarespace.EscManager.addTarget(this._escManagerCloseTarget)},_frameExitSave:function(){l.Squarespace.EscManager.removeTarget(this._escManagerCloseTarget);this._escManagerCloseTarget=null},isFrameExpanded:function(){return this.get("isReactFirstExpanded")},_updateContentBridge:function(e){this._unbindBridgeEvents();var t=this.get("contentBridge");t.changeContent(e);var a=function(e){if(true===e.refresh){this.requestRefresh("updateContentBridge.navigateAfterSave");return}l.Lang.isString(e.url)&&this.setUrlOrRequestRefresh(e.url)};var i=function(e){l.Lang.isString(e.collectionUrl)&&this.set("url","/"+e.collectionUrl)};this._onCmcStateChange();this._bridgeEvents=[t.on("cmcStateChange",this._onCmcStateChange,this),t.on("cmcSave",this._saveChangesAndDisableEditing,this),t.on("cmcDiscard",this._confirmDone,this),t.on("cmcEditableChange",function(e){this.fire(v.FRAME_EDITING_CHANGE,e)},this),t.on("editLabelChange",function e(){this._syncContentModeController()},this),t.on("collectionSave",a,this),t.on("contentItemSave",a,this),t.on("contentItemRemove",i,this)];this._syncContentModeController()},_onCmcStateChange:function(){this._syncDirtyState();this._syncContentModeController();var e=this.get("contentBridge").get("isEditing");e?this.fire(v.FRAME_SAVE_ENTER):this.fire(v.FRAME_SAVE_EXIT)},_unbindBridgeEvents:function(){l.Array.invoke(this._bridgeEvents,"detach");this._bridgeEvents=[]},_syncFrameUrl:function(){this.LOG.time("load");var e=this.get("url");if(!e)return;e=e.replace(/:/g,"%3A");var t=this.get("iframe").get("contentWindow.location.href");var a=C.getPath(t);var i=this.get("iframe").getAttribute("src");if(!C.isProperUrl(t)&&i&&i===e)return;if(C.pathMatches(e,t)){var s=C.getHash(e);s&&(e=a+s)}this.set("loading",true);if(this.get("frameless"))return;this._updateFrameWithoutAddingToHistory(e)},_urlIsOnlyHashChangeFromCurrentLocation:function(e){var t=this.get("iframe").get("contentWindow").getDOMNode().location;var a=t.href.replace(t.origin,"");var i=function(e){var t=e.split("#")[0];t=t.replace(/^\//,"");return t};return i(e)===i(a)},_stripProtocolAndHostFromInternalUrl:function(e){var t=Static.SQUARESPACE_CONTEXT.website.primaryDomain;var a=[l.config.win.location.hostname.toLowerCase()];t&&a.push(t.toLowerCase());var i=C.hasExternalProtocol(e);var s=C.getHostName(e).toLowerCase();if(i&&0===a.indexOf(s)){var n=C.stripProtocolAndSlashes(e);return n.substr(n.indexOf("/"))}return e},getIframeDocument:function e(){var t=this.get("iframe")?this.get("iframe").get("contentWindow"):null;return t?t.get("document"):null},_updateFrameWithoutAddingToHistory:function(e){var t=this._stripProtocolAndHostFromInternalUrl(e);if(this._urlIsOnlyHashChangeFromCurrentLocation(t)){-1===t.indexOf("#")&&(t+="#");var a=this.get("iframe").get("contentWindow").getDOMNode().location;var i=[a.protocol,"//",a.host,"/",t.replace(/^\//,"")].join("");i!==""+a&&a.replace(i);this.set("loading",false);return}var s=this.getIframeDocument();var n=s?s.get("body"):null;var r=n?n.get("children"):null;if(r&&r.getDOMNodes().length){var o=s.get("documentElement").getDOMNode();var l=o.classList;this.get("iframe").once("load",function e(){var t=this.getIframeDocument();if(!t)return;var a=t.get("documentElement").getDOMNode();for(var i=0;i<S.values.length;i++){var s=S.values[i];l.contains(s)&&a.classList.add(s)}},this)}var c=this.get("iframe").ancestor();this.get("iframe").remove();this.get("iframe").set("src",t);c.append(this.get("iframe"));this.get("router").pushFrameUrl(t)},_syncLoadingState:function(){var e=this.get("loading");e||this.get("contentBox").addClass("content-loaded")},canEditPage:function(){var e=l.Squarespace.UtilAuthenticated.userHasAccessPermission(l.Squarespace.AccessPermissions.CONFIG_CONTENT_MANAGER);var t=this.get("iframe").get("contentWindow.Static.SQUARESPACE_CONTEXT.pageFeatures");if(!l.Lang.isArray(t))return false;var a=t.includes(l.Squarespace.PageFeatures.EDITABLE);var i=h.getState().siteStatus;if(i===l.Squarespace.StatusConstants.EXPIRED)return false;return a&&e},_frameMouseMoveHandler:function(e){var t=document.querySelector(".config-website-frame")||document.querySelector(".preview-viewport");if(!t)return;l.Squarespace.Mouse.lastX=t.offsetLeft+e.clientX;l.Squarespace.Mouse.lastY=t.offsetTop+e.clientY;l.Squarespace.Mouse.client.lastX=l.Squarespace.Mouse.lastX;l.Squarespace.Mouse.client.lastY=l.Squarespace.Mouse.lastY;l.Squarespace.Mouse.isDebugging&&l.Squarespace.Mouse.debug()},onIframeLoaded:function(e){this.LOG.timeEnd("load");var i=null;var s=null;try{i=this.get("iframe").get("contentWindow");s=this.get("iframe").get("contentWindow.Y")}catch(e){}var t=l.bind(function(){if(null!==i){var e=i.get("location");var t=e.pathname;if(!C.isProperUrl(e.href)){var a="The frameUrl: "+t+" is invalid";I(a);E.captureException(a);return}l.Lang.isString(e.search)&&e.search.length>0&&(t+=e.search);l.Lang.isString(e.hash)&&e.hash.length>0&&(t+=e.hash);this.set("url",t,{source:"onIframeLoaded"})}this.set("loading",false);this.fire(v.LOAD,{refresh:this.get("refreshing")});this.set("refreshing",false);l.one(l.config.doc.body).addClass("sqs-frame-loaded")},this);if(!s){var a=i&&i.get("document.body.className");var n=l.Lang.isString(a)&&-1!==a.indexOf("squarespace-system-page");n||this._frameFooter.set("foundYInFrame",false);Static.SQUARESPACE_CONTEXT.website.websiteType!==m.PARKING_PAGE&&this.LOG.error("Could not find Y on page... not continuing.");t();return}this.LOG.isInfoEnabled()&&this.LOG.info("onIframeLoaded (href: %s) (src: %s)",this.get("iframe").get("contentWindow.location.href"),this.get("iframe").getAttribute("src"));this._frameFooter.set("foundYInFrame",true);this._throttledFrameMouseMoveHandler=A(this._frameMouseMoveHandler,250);this._frameMouseMoveListener=s.one(s.config.doc).on("mousemove",this._throttledFrameMouseMoveHandler,this);this.LOG.time("Squarespace.onInitialize");s.config.win.Squarespace.onInitialize(s,l.bind(function(){this.LOG.timeEnd("Squarespace.onInitialize");this._updateContentBridge(s.config.win);var e=this._timers=[];this._timerTimerHandle=l.Do.after(function(){e.push(l.Do.originalRetVal)},s,"later");s.IO.prototype._rS=function(e,t){var a=this;if(4===e.c.readyState){t.timeout&&a._clearTimeout(e.id);if(!s.Env)return;s.later(0,this,function(){if(!s.Env)return;a.complete(e,t);a._result(e,t)})}};this._frameLinkClickHandle=s.one(s.config.doc.body).delegate("click",this._frameLinkClick,"a",this);this._frameUnloadHandle=i.on("unload",this._frameUnload,this);s.Get.css("https://assets.squarespace.com/universal/fonts/squarespace-font-v1.1.css");this._frameHashChangeHandle=s.one(s.config.win).on("hashchange",function(){var e=i.get("location");this.set("url",e.pathname+e.search+e.hash,{source:"onIframeLoaded"})},this);this._syncFrameClassnames();this._syncTitle();this._syncContentModeController();this._syncDirtyState();t()},this));this.get("iframe").get("contentWindow.Y").one("html").toggleClass(S.IS_EXPANDED,l.one("html").hasClass("fullscreen"))},_frameUnload:function(e){var t=e.currentTarget;var a=t.getDOMNode();var i=a.Y;var s=a.Squarespace;var n=a.top.Y.Node._instances;var r=a.onbeforeunload;g.frameUnload();r&&r({});l.Array.each(this._timers,function(e){e.cancel()});this._timerTimerHandle.detach();this._timerTimerHandle=null;this._timers=[];this._throttledFrameMouseMoveHandler&&this._throttledFrameMouseMoveHandler.cancel();this._frameMouseMoveListener&&this._frameMouseMoveListener.detach();l.Global.fire(v.FRAME_UNLOAD);l.Object.each(f,function(e){l.Global.detach(e)});if(l.UA.ie){delete YUI.Env.mods["squarespace-events-collection"];delete i.config.win.ImageLoader}s.globalDestroy(i);this._removeDetachedNodeCache(a,n);t.destroy(true);this.get("contentBridge").destroy();if(l.Lang.isValue(this.getWebsiteOverlaysManager())){this.getWebsiteOverlaysManager().removeTarget(this);this.getWebsiteOverlaysManager().destroy(true)}this._frameLinkClickHandle.detach();this._frameLinkClickHandle=null;this._frameHashChangeHandle.detach();this._frameHashChangeHandle=null;this._frameUnloadHandle.detach();this._frameUnloadHandle=null;i.Anim.stop();i.detachAll();i.destroy();for(var o in s)s[o]=null},_removeDetachedNodeCache:function(e,t){delete t[e.document._yuid];for(var a in t){var i=t[a]._node;i&&false===i.isConnected&&delete t[a]}},_frameLinkClick:function(e){var t=e.currentTarget;var a=t.getAttribute("target");var i=t.getAttribute("href");if(e._event.defaultPrevented)return;if(this.get("disableLinks")){e.stopPropagation();e.preventDefault();return false}if(this.get("contentBridge").get("isEditing")){e.preventDefault();return}var s=C.getCategory(i);switch(s){case _.ANCHOR:e.halt();this._updateFrameWithoutAddingToHistory(this.get("pathname")+i);break;case _.EMPTY_STRING:e.halt();break;case _.MALFORMED_PROTOCOL:e.preventDefault();break;case _.MISC_PROTOCOL:break;case _.CONTENT_LINK:e.preventDefault();this._updateFrameWithoutAddingToHistory(i);break;case _.EXTERNAL_LINK:case _.FILE_LINK:default:(!l.Lang.isValue(a)||"_blank"!==a&&"_top"!==a)&&t.setAttribute("target","_top")}},_syncFrameClassnames:function(){var e=this.get("iframe").get("contentWindow.Y");var t=e.one("html");t.removeClass("squarespace-cameron");t.addClass("squarespace-damask");t.addClass(l.Squarespace.Utils.getBrowserClassName())},_syncTitle:function(){if(Static.SQUARESPACE_CONTEXT.website.websiteType===m.PARKING_PAGE)return;var e=this.get("iframe").get("contentWindow.document.title");l.Lang.isString(e)&&l.one("title").setContent(l.Escape.html(e))},getWebsiteOverlaysManager:function(){if(!this.get("iframe"))return null;var e=this.get("iframe").getDOMNode();if(!e||!parent.document.body.contains(e))return null;return o(e,"contentWindow.Y.Squarespace.Singletons.WebsiteOverlaysManager",null)},_syncContentModeController:function(e){var t=l.one("html");var a=this.get("contentBridge").get("cmcVisible");if("boolean"===typeof e&&a!==e){I(e?"ENABLING annotations - init":"DISABLING annotations - init");this.get("contentBridge").set("cmcVisible",e);a=e}if(!this.canEditPage()){I("DISABLING edit annotations - not authorized");t.removeClass("editing-page");a&&this.get("contentBridge").set("cmcVisible",false);return false}var i=!this.isFrameExpanded();if(i&&!a){I("ENABLING annotations - panel visible");this.get("contentBridge").set("cmcVisible",true);a=true}var s=this.get("contentBridge").get("isEditing");t.toggleClass("editing-page",s);this.resetTopBodyScroll();var n=this.get("contentBridge").get("collection");n&&!n.get("enabled")?this._frameFooter.set("collectionIsEnabled",false):this._frameFooter.set("collectionIsEnabled",true);return a},_syncDirtyState:function(){var e=false;this.canEditPage()&&(e=this.get("contentBridge").get("dirty"));this.set("dirty",e)},requestRefresh:function(a){I("requestRefresh",a);if(this.get("loading")||this.get("contentBridge").get("isEditing")){false;return}var e=this.get("iframe");try{var t=e.getDOMNode();var i=t.contentWindow;var s=i.location;T.mark("frame-refresh");s.reload();this.set("loading",true);this.set("refreshing",true)}catch(t){E.withScope(function(e){e.setExtra("refresh_reason",JSON.stringify(a));E.captureException(t)})}},setUrlOrRequestRefresh:function(e){e===this.get("url")?this.requestRefresh({reason:"setUrlOrRequestRefresh -- same url, refresh",url:e}):this.set("url",e)},_confirmDone:function(e,t){if(!this.get("contentBridge").get("dirty")){this._discardChangesAndDisableEditing();return}"function"!==typeof t&&(t=function(){});this._showHasChangesConfirmation(function(){this._discardChangesAndDisableEditing();t(true)}.bind(this),function(){t(false)})},_showHasChangesConfirmation:function(e,t){if(w.isSevenOne()){this._showRosettaHasChangesConfirmation(e,t);return}var a=l.Squarespace.Widgets.Confirmation.show({"strings.title":c("Cancel"),"strings.message":c("Your changes will be discarded, are you sure you want to cancel?"),"strings.confirm":c("Yes"),"strings.cancel":c("No"),style:l.Squarespace.Fluent.TYPE.CONFIRM_OR_CANCEL,showOverlay:true});a.on("confirm",e);a.on("cancel",t)},_onCloseRosettaHasChangesConfirmation:function(e,t){r.render(n.createElement(u,Object.assign({},{isOpen:false,cancelStyle:"default",confirmStyle:"default"},e)),this.confirmationMountNode);t()},_showRosettaHasChangesConfirmation:function(e,t){if(!this.confirmationMountNode){var a=this.get("iframe").getDOMNode();var i=o(a,"contentWindow.document");if(!i){E.captureException("Dirty Iframe was destroyed without prompting user at "+this.get("url"));return}this.confirmationMountNode=i.createElement("div");i.body.appendChild(this.confirmationMountNode)}var s={title:c("Are You Sure?"),message:c("Are you sure you want to discard all changes without saving?"),confirmLabel:c("Discard"),cancelLabel:c("Cancel")};r.render(n.createElement(u,Object.assign({},{isOpen:true,onConfirm:this._onCloseRosettaHasChangesConfirmation.bind(this,s,e),onDismiss:this._onCloseRosettaHasChangesConfirmation.bind(this,s,t),onRequestClose:this._onCloseRosettaHasChangesConfirmation.bind(this,s,t),cancelStyle:"default",confirmStyle:"default"},s)),this.confirmationMountNode)},_saveChangesAndDisableEditing:function e(){T.mark("save-page");this.get("contentBridge").saveAnnotationControllerChangesAndDisableEditing().then(function e(){T.measure("save-page")},function e(){T.measure("save-page")})},_discardChangesAndDisableEditing:function(){this.get("contentBridge").revertAnnotationControllerChangesAndDisableEditing()}},{ATTRS:{iframe:{},isReactFirstExpanded:{},zendeskIsReady:{value:false}}})},"1.0",{requires:["array-invoke","base","squarespace-popup-overlay","squarespace-attr-validators","squarespace-blog-collection-list","squarespace-comments","squarespace-commerce","squarespace-commerce-email-preview","squarespace-common","squarespace-damask-announcement-bar-bridge","squarespace-damask-preview-content-bridge","squarespace-damask-preview-footer","squarespace-damask-preview-frame-base","squarespace-escmanager","squarespace-events-collection","squarespace-form-rendering-utils","squarespace-gallery-collection-list","squarespace-management","squarespace-plugin-node-expander","squarespace-product-quick-view","squarespace-products-collection-item-v2","squarespace-products-collection-list-v2","squarespace-search-page","squarespace-share-buttons","squarespace-simple-liking","squarespace-slides","squarespace-social-buttons","squarespace-spinner","squarespace-ss-widget","squarespace-tourdates","squarespace-ui-base","squarespace-util","squarespace-util-authenticated","squarespace-website-overlays-manager","squarespace-widgets-confirmation"]})},"./src/main/webapp/universal/scripts-v6/damask/preview/frame/frame-v8.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/apps/App/components/FrameLoader.js");YUI.add("squarespace-damask-preview-frame-base-v8",function(e){e.namespace("Squarespace.Damask.Preview").FrameV8=e.Base.create("preview-base-v8",e.Squarespace.Damask.Preview.FrameBase,[],{toggleFrameExpand:function(){this.getFrameAPI().then(function(e){e.isEditing()||e.toggleFullscreen()})},shrink:function(){this.getFrameAPI().then(function(e){e.isFullscreen()&&e.toggleFullscreen()})},canEditPage:function(){},requestRefresh:function(){this.getFrameAPI().then(function(e){e.isLoading()||e.reload()})},setUrlOrRequestRefresh:function(e){var t=this.get("router");var a=t.getCurrentLocation().state;a&&a.currentUrl===e?this.requestRefresh():t.replaceFrameUrl(e)},getFrameAPI:function(){return i.then(function(e){return e.FrameAPI})}})},"1.0",{requires:["base","squarespace-damask-preview-frame-base"]})},"./src/main/webapp/universal/scripts-v6/data.js":function(e,t,a){var s=a("./common/temp/node_modules/@sqs/cookie-cutter/index.js");var l=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var c=a("./src/main/webapp/universal/src/shared/utils/appDomainUtils.js");var u=a("./src/main/webapp/universal/src/shared/utils/UrlUtils.js");YUI.add("squarespace-data",function(o){o.io&&o.on("io:xdrReady",function(e){o.Data.TRANSPORT_READY=true});o.Data={DEBUG:false,TRANSPORT_READY:true,addCrumb:function(e){var t=s.get("crumb");if(t){var a=e.split("?");var i=a[1]?o.QueryString.parse(a[1]):{};i.crumb=t;e=a[0]+"?"+o.QueryString.stringify(i)}return e},sendForm:function(e,t,a){t.data||(t.data={});var i=e.getData();for(var s in i){var n=i[s];if(o.Lang.isUndefined(n)||o.Lang.isNull(n)||o.Lang.isObject(n)&&o.Object.isEmpty(n))continue;o.Lang.isObject(n)&&!o.Lang.isArray(n)?t.data[s]=o.JSON.stringify(n):t.data[s]=n}var r={dialog:e};"function"===typeof t.failure&&(r.failure=t.failure);t.failure=r;this.post(t,a)},cleanObjectForConsole:function(e){var t={};for(var a in e){var i=false;if(o.Lang.isString(e[a])){try{i=e[a]?JSON.parse(e[a]):null}catch(e){}i&&o.Lang.isObject(i)?t[a]=i:t[a]=e[a]}else t[a]=e[a]}return t},get:function(e,t){this._go("GET",e,t)},post:function(e,t){this._go("POST",e,t)},put:function(e,t){this._go("PUT",e,t)},del:function(e,t){this._go("DELETE",e,t)},_go:function(s,n,e){n.context=e;n.method=s;if(o.Data.DEBUG&&false){n.url.endsWith("/")&&console.warn("[Data]: URL ends with a slash, it probably shouldn't: "+n.url);n.data?console.log("[Data] SEND:  "+n.url+" ("+n.method+"): ",o.clone(n.data)):console.log("[Data] SEND:  "+n.url+" ("+n.method+")")}n.success||(n.success=this._genericSuccess);n.responseFormat||(n.responseFormat="json");if(n.secure&&Static.SQUARESPACE_CONTEXT){var t=["squarespace.com","sqsp.com","sqsp.net","squarespace.net","sqsp6.com"];var a=o.Array.some(t,function(e){return window.location.host.endsWith(e)});u.isSecure()||(a=false);a||n.url.startsWith("https://")||(n.url="https://"+c.getWebsiteDomain(Static.SQUARESPACE_CONTEXT.website)+n.url);if(!a){n.xdr={};n.xdr.credentials=true}}for(var i in n.data)o.Lang.isUndefined(n.data[i])&&delete n.data[i];if(n.testResponse)n.testResponseDelay?o.later(n.testResponseDelay,this,function e(){o.Data._connectionSuccessRouter(n,true,{responseText:o.JSON.stringify(n.testResponse)})}):o.Data._connectionSuccessRouter(n,true,{responseText:o.JSON.stringify(n.testResponse)});else{var r=o.bind(function(){n._url=n.url;n.url=this.addCrumb(n.url);if("POST"===s||"PUT"===s)if(n.json){o.Lang.isObject(n.data)&&(n.data=o.JSON.stringify(n.data));o.Lang.isObject(n.headers)||(n.headers={});n.headers["Content-Type"]="application/json";n.headers.charset="UTF-8"}else for(var e in n.data){var t=n.data[e];o.Lang.isObject(t)&&!o.Lang.isArray(t)&&(n.data[e]=o.JSON.stringify(t))}var a={method:s,arguments:n.arguments,data:n.data,on:{success:o.bind(o.Data._connectionSuccessRouter,o.Data,n),failure:o.bind(o.Data._connectionFailureRouter,o.Data,n)}};var i=n.headers;o.Lang.isObject(i)&&(a.headers=i);if(n.xdr){a.xdr=n.xdr;a.headers={"Content-Type":l("application/x-www-form-urlencoded; charset=UTF-8")};a.data=o.QueryString.stringify(n.data)}n.queue?o.io.queue(n.url,a):o.io(n.url,a)},o.Data);n.testResponseDelay?o.later(n.testResponseDelay,this,r):r()}},_genericSuccess:function(e){},_connectionSuccessRouter:function(t,e,a,i){if("json"===t.responseFormat){var s={};if(204!==a.status&&1223!==a.status)try{s=o.JSON.parse(a.responseText)}catch(e){this._error(t,{error:l("Internal Error: Unable to parse server response from ({url}) as JSON: {message}",{url:t.url,message:a.responseText})});return}if(s.error)this._error(t,s,i);else{o.Data.DEBUG&&false;t.success.apply(t.context,[s,i])}}else if("raw"===t.responseFormat){o.Data.DEBUG&&false;t.success.apply(t.context,[a.responseText,i])}},_connectionFailureRouter:function(t,e,a,i){if(!a||4!==a.readyState)return;var s={400:true,401:true,500:true,502:true};if("json"===t.responseFormat&&s[a.status]){var n;try{n=o.JSON.parse(a.responseText)}catch(e){this._error(t,{error:l("Internal Error: Unable to parse server response from ({sub1}) as JSON: {sub2}",{sub1:t.url,sub2:a.responseText})});return}if(n.error||n.message||n.billingErrorCode){this._error(t,n,i);return}}var r=l("Unable to connect…");switch(a.status){case 401:case 403:r=l("Unauthorized request");break;case 500:case 501:r=l("Internal server error. Please try again later.");break;case 503:r=l("This service is temporarily unavailable. Please try again later.");break;default:if(t.retry){t.retry-=1;o.later(200,this,function e(){o.Data._go(t.method,t,t.context)});return}break}this._error(t,{status:a.status,error:r,errorKey:o.Lang.isFunction(window.btoa)?btoa(t.url):"",network:true})},_error:function(e,t,a){o.Data.DEBUG&&false;if(t.loginRequired){var i=function(){!!window.SQUARESPACE_LOGIN&&window.SQUARESPACE_LOGIN.fire("login-required")};if(o.Lang.isFunction(e.failure)){e.loginHasPriorityOnFailure&&i();e.failure.apply(e.context,[t,a])}else i()}else if(t.authorizationFail)new o.Squarespace.SystemError(e.url,t,"json").show();else if(t.crumbFail&&true!==e._retry&&o.Squarespace.Utils.areCookiesEnabled()){s.set("crumb",t.crumb,{path:"/"});e._retry=true;e.url=e._url;console.log("crumb check failed, will attempt a retry");this._go(e.method,e,e.context)}else if("function"===typeof e.failure)e.failure.apply(e.context,[t,a]);else if(o.Lang.isObject(e.failure)&&o.Lang.isFunction(e.failure.failure))e.failure.failure.apply(e.context,[t,a]);else if(e.failure&&e.failure.dialog&&t.errors){e.failure.dialog.showErrors(t.errors);e.failure.failure&&e.failure.failure.apply(e.context,[t,a])}else new o.Squarespace.SystemError(e.url,t,"json").show()}}},"1.0",{requires:["io","squarespace-system-error","squarespace-util"]})},"./src/main/webapp/universal/scripts-v6/datatype-date-format.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/constants/DateTime.js");var s=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-datatype-date-format",function(e){e.Intl.add("datatype-date-format","en",{a:i.WEEKDAYS_SHORT,A:[s("Sunday"),s("Monday"),s("Tuesday"),s("Wednesday"),s("Thursday"),s("Friday"),s("Saturday")],b:[s("Jan"),s("Feb"),s("Mar"),s("Apr"),s("May"),s("Jun"),s("Jul"),s("Aug"),s("Sep"),s("Oct"),s("Nov"),s("Dec")],B:[s("January"),s("February"),s("March"),s("April"),s("May"),s("June"),s("July"),s("August"),s("September"),s("October"),s("November"),s("December")],c:"%a, %b %d, %Y %l:%M:%S %p %Z",p:["AM","PM"],P:["am","pm"],x:"%m/%d/%y",X:"%l:%M:%S %p"})},"1")},"./src/main/webapp/universal/scripts-v6/debugger.js":function(e,t,a){var s=a("./common/temp/node_modules/@sqs/error-reporter/dist/index.js");var n=a("./src/main/webapp/universal/src/shared/utils/Context.js");YUI.add("squarespace-debugger",function(i){i.namespace("Squarespace");var e=i.Squarespace.Legacy.Class;i.Squarespace.Debugger=e.create({defaultOpts:{output:true,ignore:[],name:"GenericComponent"},initialize:function(e){this.params=i.merge(this.defaultOpts,e);n.isProductionEnvironment()&&(this.params.output=false);this.params.uid&&(this.params.name+=" #"+this.getUID());if(this.params.logEvents){var t=this;this.params.logEvents.fire=function(e){t.log("Firing",e);i.EventTarget.prototype.fire.apply(t.params.logEvents,arguments)}}this.logEnabled=this.params.output},enable:function(){this.params.output=true},disable:function(){this.params.output=false},isInfoEnabled:function(){if(i.Lang.isBoolean(this.params.output))return this.params.output;return false},info:function(){return this.log.apply(this,arguments)},log:function(){if(!this.params.output)return;if(this.params.ignore.indexOf(arguments[0])>=0)return;var e=Array.prototype.slice.call(arguments);var t="["+this.params.name+"]";"string"===typeof e[0]?e[0]=t+" "+e[0]:e.unshift(t);console.log&&(i.UA.ios?console.log(e.join(" ")):console.log.apply?console.log.apply(console,e):console.log(e))},error:function(){var e=Array.prototype.slice.call(arguments);var t=e[e.length-1];t instanceof Error&&e.pop();e.unshift(this.params.name);i.UA.ios&&(e=[e.join(" ")]);console.error&&(i.UA.ios?console.error(e.join(" ")):console.error.apply?console.error.apply(console,e):console.error(e));var a;if(t&&t instanceof Error){a=t.stack;console.error("Stack: "+a)}else console.trace&&console.trace();s.trackCaughtError("damask",e[0],a)},warn:function(){var e=Array.prototype.slice.call(arguments);var t="["+this.params.name+"]";"string"===typeof e[0]?e[0]=t+" "+e[0]:e.unshift(t);console.warn&&(i.UA.ios?console.warn(e.join(" ")):console.warn.apply?console.warn.apply(console,e):console.warn(e))},isTimingEnabled:function(){return!!this.params.output},getUID:function(){void 0===i.Squarespace.Debugger.lastUID[this.params.name]&&(i.Squarespace.Debugger.lastUID[this.params.name]=0);return i.Squarespace.Debugger.lastUID[this.params.name]++},time:function(e){if(!this.params.output)return;console.time&&console.time("["+this.params.name+"] "+e)},timeEnd:function(e){if(!this.params.output)return;console.timeEnd&&console.timeEnd("["+this.params.name+"] "+e)}});i.Squarespace.Debugger.lastUID={}},"1.0",{requires:["squarespace-legacy-class","squarespace-util"]})},"./src/main/webapp/universal/scripts-v6/deprecated-modules.js":function(e,t,a){var l=a("./common/temp/node_modules/lodash/get.js");var n=a("./common/temp/node_modules/lodash/isFunction.js");var c=a("./common/temp/node_modules/lodash/set.js");var s=a("./common/temp/node_modules/@sqs/rum-collector/timing.js");YUI.add("squarespace-deprecated-modules",function e(r){function t(t,a,i){return function e(){console.warn('[DEPRECATED] Called `Y."'+a+"`. "+i);s.measure("deprecated_yui_module_used",{detail:a});return t.apply(this,arguments)}}function o(e,t,a){var i=l(r,e);if(!n(i))return;var s=t(i,e,a);c(r,e,s)}function a(i,s,n){var e=l(r,i,{});Object.keys(e).forEach(function e(t){var a=[i,t].join(".");o(a,s,n)})}a("Cookie",t,"Use @sqs/cookie-cutter instead.")},"1.0",{requires:["cookie"]})},"./src/main/webapp/universal/scripts-v6/dialog-auto-complete.js":function(e,t,a){var s=a("./common/temp/node_modules/lodash/noop.js");YUI.add("squarespace-dialog-auto-complete",function(i){var a=i.Squarespace.DialogFields.AutoComplete=i.Base.create("AutoComplete",i.Squarespace.DialogFields.Text,[],{destructor:function(){var e=this.get("acWidget");e&&e.destroy()},renderUI:function(){a.superclass.renderUI.call(this);var e=this.get("contentBox");new i.Squarespace.Spinner({color:"dark",render:e});var t=new i.Squarespace.Widgets.ScrollingAutoCompleteList(i.merge({inputNode:this._textField},this.get("acConfig")));this._set("acWidget",t);t.render()},bindUI:function(){a.superclass.bindUI.call(this);var e=this.get("contentBox");var t=this.get("acWidget");t.on("query",function(){e.addClass("querying")},this);t.on("results",function(){e.removeClass("querying")},this);this.get("requireListEntry")&&t.after("select",this._afterSelect,this)},syncUI:function(){a.superclass.syncUI.call(this);this._textField.set("value",this.get("data"))},focus:function(){this._textField.focus()},clear:function(){this.set("data",null);this._textField.set("value","");this.get("acWidget")._onInputValueChange({newVal:""})},_afterSelect:function(e){var t=e.result.raw;var a=this.get("responseDataProperty");if(i.Lang.isValue(a)){this.set("data",t[a]);this._set("dataObject",t)}else this.set("data",t);this.fire("select",{data:this.get("data")})},_afterDataChange:s,_afterValueChange:function(e){this.get("requireListEntry")||a.superclass._afterValueChange.call(this,e)},_afterBlur:function(){"undefined"!==typeof CONFIG_PANEL&&CONFIG_PANEL.set("allowContextMenu",false)}},{CSS_PREFIX:"sqs-auto-complete",ATTRS:{data:{value:null,validator:function(e){return true}},acConfig:{value:null,setter:function(e){if(!i.Lang.isValue(e.source))throw new Error("No data source provided for AutoComplete");return i.merge({activateFirstItem:true,resultHighlighter:"phraseMatch"},e)},validator:i.Squarespace.AttrValidators.isNullOrObject,writeOnce:"initOnly"},acWidget:{value:null,validator:i.Squarespace.AttrValidators.isNullOrInstanceOf(i.Squarespace.Widgets.ScrollingAutoCompleteList),readOnly:true,writeOnce:true},requireListEntry:{value:false,validator:i.Squarespace.AttrValidators.isBoolean,writeOnce:"initOnly"},responseDataProperty:{value:null,validator:i.Squarespace.AttrValidators.isNullOrString},dataObject:{value:null,validator:i.Squarespace.AttrValidators.isNullOrObject,readOnly:true}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-dialog-text","squarespace-scrolling-auto-complete-list","squarespace-spinner"]})},"./src/main/webapp/universal/scripts-v6/dialog-button.js":function(e,t){YUI.add("squarespace-dialog-button",function(n){var r=n.namespace("Squarespace.DialogFields").Button=n.namespace("Squarespace.Widgets").Button=n.Base.create("button",n.Squarespace.DialogField2,[n.WidgetChild],{initializer:function(e){this.get("contentBox").addClass(this.get("alignment"));this.publish("click");this.publish("button-click",{broadcast:2})},destructor:function(){if(n.Lang.isValue(this._waiting)){this._waiting.remove(true);this._waiting=null}this._anchorNode=null},bindUI:function(){r.superclass.bindUI.call(this);this.get("boundingBox").on("click",this._handleClick,this);this.on("stringsChange",this._updateStringElements,this);this.after("waitingChange",function(e){this._toggleWaitingSpinner(e.newVal)},this);this.after("isLoadingChange",this.syncUI)},renderUI:function(){r.superclass.renderUI.call(this);var e=this.get("contentBox");var t=this._anchorNode=e.one("div.label");var a=this.get("name");t.set("value",this.get("data"));t.set("name",a);var i=this.get("strings.systemName");i&&this.get("boundingBox").addClass("sqs-dialog-button--"+i);var s=this.get("strings.title")||this.get("strings.text");s&&this.get("boundingBox").setAttribute("title",s);this._renderButtonText();this._renderIcon();this._renderSpinner();this._toggleActive(this.get("active")&&n.Lang.isValue(a));this.toggleDisabled(this.get("disabled"))},syncUI:function(){r.superclass.syncUI.call(this);this._toggleWaitingSpinner(this.get("waiting"));this._syncLoading()},setText:function(e){this.set("strings.text",e)},getText:function(){return this.get("strings.text")},setOnClick:function(e,t){n.Lang.isFunction(e)&&this.set("onClick",e);n.Lang.isValue(t)&&this.set("context",t)},disable:function(){this.toggleDisabled(true)},enable:function(){this.toggleDisabled(false)},showWaiting:function(){this._toggleWaitingSpinner(true);this.set("waiting",true)},hideWaiting:function(){this._toggleWaitingSpinner(false);this.set("waiting",false)},toggleDisabled:function(e){this.set("disabled",e);this.get("contentBox").toggleClass("disabled",e)},_toggleActive:function(e){this.set("active",e);this.get("contentBox").toggleClass("active",e)},_toggleWaitingSpinner:function(e){e?this._waiting.show():this._waiting.hide()},_handleClick:function(e){var t=this._anchorNode;if(this.get("disabled")){e.halt();return}var a=this.get("href");a?this.get("newWindow")?window.open(a):window.location=a:n.Lang.isFunction(this.get("onClick"))?this.get("onClick").call(this.get("context"),e,this):t.fire("click",this.get("active"));this.fire("button-click",{label:this.get("strings.text")||this.get("strings.title"),href:this.get("href")})},_animateTextChange:function(e){var t=new n.Anim({node:this._anchorNode,from:{opacity:0},to:{opacity:1},duration:.2,easing:"easeOut"});var a=new n.Anim({node:this._anchorNode,from:{opacity:1},to:{opacity:0},duration:.2,easing:"easeIn"});t.on("end",n.bind(function(){this._toggleActive(true)},this));a.on("end",n.bind(function(){this._renderButtonText();n.Lang.isNull(this._anchorNode)||t.run()},this));this._toggleActive(false);this._registerAnim(t);this._registerAnim(a);a.run()},_updateStringElements:function(e){"strings.text"===e.subAttrName&&e.newVal.text!==e.prevVal.text&&this._animateTextChange(e.newVal.text)},_renderIcon:function(){this.get("icon")&&this.get("contentBox").append('<div class="icon"></div>')},_renderButtonText:function(){var e=this.get("strings.text");n.Lang.isString(e)&&e.length>0&&n.Lang.isValue(this._anchorNode)&&this._anchorNode.setHTML(e)},_renderSpinner:function(){this._waiting=n.Node.create('<div class="waiting"></div>');this.get("contentBox").append(this._waiting);this._waiting.hide()},_syncLoading:function(){var e=this.get("spinner");var t=this.get("isLoading");var a=this.get("boundingBox").hasClass("minor");if(t){if(!e){e=new n.Squarespace.Spinner({render:this.get("contentBox"),color:a?"dark":"light"});this.set("spinner",e)}e.spin()}else e&&e.stop();this.get("boundingBox").toggleClass("is-loading",t)}},{CSS_PREFIX:"sqs-button",TEMPLATE:'<div class="label"></div>',ATTRS:{active:{},alignment:{value:"",validator:n.Lang.isString},className:{value:"normal-button"},context:{value:this},data:{},disabled:{setter:function(e){return!!e}},icon:{},name:{},onClick:{validator:n.Lang.isFunction},strings:{value:{title:"",text:""}},waiting:{value:false},href:{validator:n.Lang.isString},newWindow:{value:false,validator:n.Lang.isBoolean},isLoading:{value:false},spinner:{},testAttribute:{value:"button"}}});var e=n.namespace("Squarespace.Widgets").VanillaButton=n.Base.create("VanillaButton",r,[],{renderUI:function(){e.superclass.renderUI.call(this);this.get("boundingBox").removeClass(r.CSS_PREFIX)}},{CSS_PREFIX:"sqs-button-vanilla"})},"1.0",{requires:["anim","base","node","squarespace-dialog","squarespace-dialog-field-2","squarespace-spinner","squarespace-util","widget-child"]})},"./src/main/webapp/universal/scripts-v6/dialog-campaigns-service-connect.js":function(e,t,a){var i=a("./common/temp/node_modules/react/index.js");var s=a("./common/temp/node_modules/react-dom/index.js");var n=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var r=a("./src/main/webapp/universal/src/shared/components/CampaignsConfig.jsx");var o=a("./src/main/webapp/universal/src/shared/stores/CampaignsConfigStore.js");var l=a("./src/main/webapp/universal/src/shared/actions/CampaignsConfigActions.js");var c=a("./src/main/webapp/frontend/packages/enums/FormBackendConnectionState.js");var u=a("./src/main/webapp/universal/src/shared/utils/Loggers.ts");var d=false;var p=u.createLogger("campaigns dialog field","#552",d);YUI.add("squarespace-dialog-campaigns-service-connect",function(t){t.namespace("Squarespace.DialogFields");t.Squarespace.DialogFields.CampaignsServiceConnect=t.Base.create("campaignsServiceConnect",t.Squarespace.DialogField2,[],{initializer:function(e){p("init",e);this.reactElement=i.createElement(r,t.merge({initialData:e.data},e.props))},renderUI:function(){this.reactInstance=s.render(this.reactElement,this.get("contentBox").getDOMNode())},destructor:function(){s.unmountComponentAtNode(this.get("contentBox").getDOMNode());this.reactInstance=null;this.reactElement=null},didDataChange:function(){if(o){var e=o.getState();return e.isDirty}return false},_getErrors:function(){var e=[];var t=o.getState();if(t.isConnected&&!t.selectedListId){l.showValidationError();e.push(n("Select a list"))}return e}},{ATTRS:{data:{getter:function(){var e=o.getState();return{connectionState:o.isConnected()?c.CONNECTED:c.DISCONNECTED,listId:e.selectedListId}}}}})},"1.0",{requires:["base","squarespace-dialog-field-2"]})},"./src/main/webapp/universal/scripts-v6/dialog-description.js":function(e,t){YUI.add("squarespace-dialog-description",function(i){i.namespace("Squarespace.DialogFields");var t=i.Squarespace.DialogFields.Description=i.Base.create("DescriptionField",i.Squarespace.DialogField2,[],{destructor:function(){this._descEl=null},renderUI:function(){t.superclass.renderUI.call(this);this._descEl=this.get("contentBox").one(".custom-field-description");var e=this.get("padding");i.Lang.isArray(e)&&e.length>0&&this._descEl.setStyles({paddingTop:e[0],paddingBottom:e[1]});this._attachNode("title");this._attachNode("text")},bindUI:function(){t.superclass.bindUI.call(this);this.after(["titleChange","textChange"],this.syncUI,this)},syncUI:function(){t.superclass.syncUI.call(this);this._descEl.empty();this._attachNode("title");this._attachNode("text")},_attachNode:function(e){var t=this.get(e);if(i.Lang.isString(t)&&t.length>0){var a=i.Node.create('<div class="'+e+'">'+t+"</div>");this._descEl.append(a)}},_getAsString:function(e){return i.Lang.isValue(e)?e+"":""},setTitle:function(e){this.set("title",e)},setText:function(e){this.set("text",e)}},{CSS_PREFIX:"sqs-description",TEMPLATE:'<div class="custom-field-description"></div>',ATTRS:{title:{value:"",getter:this._getAsString},text:{value:"",getter:this._getAsString},className:{value:"",validator:i.Lang.isString},padding:{value:[],validator:i.Lang.isArray},focusable:{value:false},testAttribute:{value:"description"}}});i.Squarespace.DialogFields.DescriptionField=i.Squarespace.DialogFields.Description},"1.0",{requires:["base","node","squarespace-dialog-field-2"]})},"./src/main/webapp/universal/scripts-v6/dialog-email-service-connect.js":function(e,t,a){var s=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var n=a("./src/main/webapp/universal/src/shared/utils/EmailUtils.js");var r=a("./src/main/webapp/frontend/packages/enums/FormBackendConnectionState.js");YUI.add("squarespace-dialog-email-service-connect",function(a){a.namespace("Squarespace.DialogFields");var i=a.Squarespace.DialogFields.EmailServiceConnect=a.Base.create("emailServiceConnect",a.Squarespace.DialogFields.ServiceConnect,[],{initializer:function(){this.get("contentBox").addClass("sqs-service-connect-content");this._addressField=new a.Squarespace.DialogFields.Text({name:"address",className:"thin","strings.title":s("Email Address"),data:this.get("data.email")})},renderUI:function(){i.superclass.renderUI.call(this);var e=this.get("contentBox");var t=this._addressField;t.render(e.one(".fields"));this._addressFieldInput=t.get("contentBox").one("input");this._messageEl=e.one(".text .message")},bindUI:function(){i.superclass.bindUI.call(this);this.get("contentBox").on("click",function(e){var t=this.get("data.connectionState");var a=e.target;t===r.CONNECTED&&a.hasClass("icon")?this._disconnect():t===r.DISCONNECTED&&a.hasClass("connect")&&this._connect()},this);this._addressField.get("contentBox").one("input").after("keyup",function(e){13===e.keyCode&&this._connect()},this);this.after("dataChange",function(){this._messageEl.setContent(this._getSendingToMessage())},this)},_getSendingToMessage:function(){return s("Sending to {email}",{email:this.get("data.email")})},_getHBTemplateContext:function(){return{title:s("Email"),connect:s("Connect"),sendingTo:this._getSendingToMessage()}},_connect:function(){var e=this._addressField.get("data").trim();if(n.isValidEmail(e)){var t=this.get("data")||{};t.email=e;t.connectionState=r.CONNECTED;this.set("data",t)}else new a.Squarespace.Widgets.Alert({"strings.title":s("Invalid Email Address"),"strings.message":s("You must provide a valid email address.")})},_disconnect:function(){var e=this.get("data");e.email=null;e.connectionState=r.DISCONNECTED;this.set("data",e)}},{CSS_PREFIX:"sqs-email-service-connect",HANDLEBARS_TEMPLATE:"dialog-email-service-connect.html",ATTRS:{}})},"1.0",{requires:["base","squarespace-dialog-email-service-connect-template","squarespace-dialog-service-connect","squarespace-dialog-text","squarespace-ui-base","squarespace-util","squarespace-widgets-alert"]})},"./src/main/webapp/universal/scripts-v6/dialog-error.js":function(e,t){YUI.add("squarespace-dialog-error",function(i){i.namespace("Squarespace.DialogFields");var t=i.Squarespace.DialogFields.Error=i.Squarespace.DialogFields.ErrorField=i.Base.create("ErrorField",i.Squarespace.DialogField2,[],{destructor:function(){this._descEl=null},renderUI:function(){t.superclass.renderUI.call(this);var e=this.get("padding");this._descEl=this.get("contentBox").one(".custom-field-error");i.Lang.isArray(e)&&e.length>0&&this._descEl.setStyles({paddingTop:e[0],paddingBottom:e[1]});this._attachNode("text")},bindUI:function(){t.superclass.bindUI.call(this);this.after(["textChange"],this.syncUI,this)},syncUI:function(){t.superclass.syncUI.call(this);this._descEl.empty();this._attachNode("text")},_attachNode:function(e){var t=this.get(e);if(i.Lang.isString(t)&&t.length>0){var a=i.Node.create('<div class="'+e+'">'+t+"</div>");this._descEl.append(a)}},_getAsString:function(e){if(!i.Lang.isValue(e))return"";return e+""},setText:function(e){this.set("text",e)}},{CSS_PREFIX:"sqs-error",TEMPLATE:'<div class="custom-field-error"></div>',ATTRS:{text:{value:"",getter:this._getAsString},className:{value:"",validator:i.Lang.isString},padding:{value:[],validator:i.Lang.isArray},focusable:{value:false}}})},"1.0",{requires:["base","node","squarespace-dialog-field-2"]})},"./src/main/webapp/universal/scripts-v6/dialog-feature-gate-menu.js":function(e,t,a){var i=a("./common/temp/node_modules/react/index.js");var s=a("./common/temp/node_modules/react-dom/index.js");var n=a("./src/main/webapp/universal/src/shared/components/FeatureGate/Menu/index.js");var r=a("./src/main/webapp/universal/src/apps/App/shared/stores/BillingStatusStore.js");var o=a("./src/main/webapp/universal/src/apps/App/shared/stores/FeatureGateStore/index.js");YUI.add("squarespace-dialog-feature-gate-menu",function(e){e.namespace("Squarespace.DialogFields");var a=e.Squarespace.DialogFields.FeatureGateMenu=e.Base.create("FeatureGateMenuField",e.Squarespace.DialogField2,[],{destructor:function(){if(this.upsellMenuEl){s.unmountComponentAtNode(this.upsellMenuEl);this.upsellMenuEl.remove();this.upsellMenuEl=null;this.upsellMenu=null}},renderUI:function(){a.superclass.renderUI.call(this);var e=r.isTrial();this.upsellMenuEl=document.createElement("span");var t=o.getUpsellCopy(this.get("feature"));this.upsellMenu=s.render(i.createElement(n,{isTrial:e,analyticsId:this.get("analyticsId"),learnMoreUrl:this.get("learnMoreUrl"),upgradeTitle:t.upgradeTitle,upgradeDescription:t.upgradeDescription,upgradeCta:t.upgradeCta,knockout:true}),this.upsellMenuEl);this.get("contentBox").one(".dialog-field-feature-gate-menu").append(this.upsellMenuEl)},bindUI:function(){a.superclass.bindUI.call(this)},syncUI:function(){a.superclass.syncUI.call(this)},setLearnMoreUrl:function(e){this.set("learnMoreUrl",e)},setAnalyticsId:function(e){this.set("analyticsId",e)},setFeature:function(e){this.set("feature")}},{CSS_PREFIX:"sqs-feature-gate-menu-field",TEMPLATE:'<div class="dialog-field-feature-gate-menu"></div>',ATTRS:{learnMoreUrl:{value:""},analyticsId:{value:""},feature:{value:null}}});e.Squarespace.DialogFields.FeatureGateMenuField=e.Squarespace.DialogFields.FeatureGateMenu},"1.0",{requires:["base","node","squarespace-dialog-field-2"]})},"./src/main/webapp/universal/scripts-v6/dialog-file-audio.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-dialog-file-audio",function(e){e.namespace("Squarespace.DialogFields");e.Squarespace.DialogFields.FileAudio=e.Base.create("fileAudio",e.Squarespace.DialogFields.FileRequiresProcessing,[],{},{CSS_PREFIX:"sqs-file-audio-processing",FILE_FILTER:{description:i("Audio"),extensions:"*.mp3;*.mp4;*.ogg;*.m4a"},PROCESSING_JOB:e.Squarespace.AudioProcessingJob,PROCESSING_COPY:i("Processing and identifying"),ATTRS:{contentType:{value:"audio"},contentLabel:{value:i("an audio file")}}})},"1.0",{requires:["base","squarespace-dialog-file-requires-processing","squarespace-job-manager"]})},"./src/main/webapp/universal/scripts-v6/dialog-file-requires-processing.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-dialog-file-requires-processing",function(s){s.namespace("Squarespace.DialogFields");var a=s.Squarespace.DialogFields.FileRequiresProcessing=s.Base.create("fileRequiresProcessing",s.Squarespace.DialogFields.File,[],{initializer:function(){if(this.constructor===a)throw new Error("Y.Squarespace.DialogFields.FileRequiresProcessing is an abstract class. Please use a subclass.");if(!this.uploader)return;this.uploader.setAttrs({fileFilters:[this.getProperty("FILE_FILTER")],createJob:s.bind(this._createProcessingJob,this),jobFailure:s.bind(this._processingJobFailure,this)})},_bindDataEvents:function(){a.superclass._bindDataEvents.call(this);var e=this.get("data");e?this._registerEvent(e.after("mediaProcessingStateChange",this.syncUI,this)):this._isProcessing()&&this._cancelProcessing()},_cleanupResidualElements:function(){a.superclass._cleanupResidualElements.call(this);var e=this.get("boundingBox");var t=this.get("contentBox");e.removeClass("processing-taking-longer");t.removeClass("loaded");t.all("."+this.getClassName()+"-preview").remove();t.all(".processing-failed").remove();t.all(".processing-longer-than-expected").remove()},_renderDataLoadedState:function(){this._cleanupResidualElements();var e=this.get("boundingBox");var t=this.get("data");this.get("contentBox").removeClass("data-loading");if(t&&(t.get("hasFileData")||t.get("systemDataId"))){e.addClass("has-file");var a=t.get("mediaProcessingState");if(s.Squarespace.ContentItemUtils.isErrorProcessingState(t)){e.addClass("has-error");this._renderProcessingFailed()}else{e.removeClass("has-error");if(a===s.Squarespace.MediaProcessingState.READY||s.Lang.isNull(a)){this._renderFilePreview();this._progressPlugin.set("show",false)}else{e.addClass("processing-taking-longer");this._progressPlugin.set("show",true);this._renderProcessingPreview();this._renderProcessingDescription()}}}else{e.removeClass("has-error");e.removeClass("has-preview");e.removeClass("has-file")}},_renderDataLoadingState:function(){a.superclass._renderDataLoadingState.call(this);this.get("boundingBox").removeClass("has-error")},_cancelProcessing:function(e){e&&e.halt();this.set("data",null);this._progressPlugin&&this._progressPlugin.set("show",false)},_isProcessing:function(){return this._progressPlugin&&this._progressPlugin.get("show")},_renderProcessingPreview:function(){var e=this.getClassName();this.get("contentBox").append('<div class="'+e+"-preview "+e+'-preview-empty"></div>')},_renderProcessingFailed:function(){var e=s.Node.create('<div class="processing-failed"><p>'+i("<strong>Oops!</strong><br />Something went wrong.")+'<br /><a href="#" class="retry">'+i("Retry?")+"</a></p></div>");e.one("p a.retry").on("click",function(e){e.halt();this.set("data",null)},this);this.get("contentBox").append(e)},_renderProcessingDescription:function(){var e='<br /><a href="#" class="cancel">'+i("Cancel")+"</a>";var t=s.Node.create('<div class="processing-longer-than-expected"><p>'+this.getProperty("PROCESSING_COPY")+(this.get("isCancelProcessingEnabled")?e:"")+"</p></div>");t.delegate("click",this._cancelProcessing,"a.cancel",this);this.get("contentBox").append(t)},_createProcessingJob:function(e,t){if(!t.job){false;return null}var a=new(this.getProperty("PROCESSING_JOB"))(s.merge(t.job,{started:true}));var i=this.get("data");i&&i.get("id")===t.job.data.contentItemId&&i.get("systemDataId")?i.setAttrs({mediaProcessingState:s.Squarespace.MediaProcessingState.QUEUED}):this.set("data",new s.Squarespace.Models.ContentItem(s.merge(t.media[0],{mediaProcessingState:s.Squarespace.MediaProcessingState.QUEUED})));return a},_processingJobFailure:function(){new s.Squarespace.Widgets.Alert({"strings.title":i("Processing Failed"),"strings.message":i("We were unable to process your file. Please try again.")});this.syncUI()}},{ATTRS:{isCancelProcessingEnabled:{value:true}}})},"1.0",{requires:["base","node","squarespace-content-item-utils","squarespace-dialog-file","squarespace-enum","squarespace-models-content-item","squarespace-ui-base","squarespace-widgets-alert"]})},"./src/main/webapp/universal/scripts-v6/dialog-form-builder.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/constants/FormBuilderDialogFields.js");var s=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var r=a("./src/main/webapp/universal/src/shared/i18n/index.ts").pluralize;YUI.add("squarespace-dialog-form-builder",function(n){n.namespace("Squarespace.DialogFields");var a=n.Squarespace.DialogFields.FormBuilder=n.Base.create("formBuilder",n.Squarespace.DialogField2,[n.WidgetParent],{initializer:function(){this._fieldSelector=this._createFieldSelector();this._edited=false},destructor:function(){this._fieldSelector.destroy();this._ddDelegate&&this._ddDelegate.destroy()},renderUI:function(){a.superclass.renderUI.call(this);var e=this.get("contentBox");this._childrenContainer=this._fieldContainer=e.appendChild('<div class="field-container"></div>');this._addFieldButton=e.appendChild('<div class="add-field-button"><div class="title"><span class="title-text">'+s("Add Form Field")+"</span></div></div>");this._setupDragAndDrop()},bindUI:function(){a.superclass.bindUI.call(this);this._fieldSelector.on("datachange",function(e){var t=e.getValue();var a=this._validateFieldSelection(t);if(a){var i=a.title;var s=a.description;new n.Squarespace.Widgets.Alert({"strings.title":i,"strings.message":s});return}this._fieldSelector.close();this.addField(n.clone(t),true)},this);this.on("change",function(){this.fire("dataChange",{noSyncUI:true});this._edited=true},this);this._addFieldButton.on("click",function(e){e.halt();this._openFieldSelector()},this);this.on("*:editingChange",function(e){e.newVal&&this.closeChildren(e.target)},this);this.on("*:removeClicked",function(e){this._confirmFieldRemoval(e.target)},this);this.on("*:fieldChange",function(e){this.fire("change")},this);this.on("*:destroy",function(){this._ddDelegate.syncTargets()},this);this._ddDelegate.on("reorder:reordered",function(e){var t=e.reordered;this._reorderField(t.oldIndex,t.newIndex)},this)},syncUI:function(){a.superclass.syncUI.call(this);var e=this.removeAll();e.each(function(e){e.destroy()});var t=this.get("data");n.Array.each(t,function(e){n.Squarespace.FormEditingUtils.resolveFieldId(e,t);this._renderFieldWidget(e)},this)},didDataChange:function(){return this._edited},closeChildren:function(t){var a=n.Lang.isValue(t);this.each(function(e){!e.get("editing")||a&&e===t||e.closeEdit()})},addField:function(e,t){var a=this.get("data");n.Squarespace.FormEditingUtils.resolveFieldTitle(e,a);n.Squarespace.FormEditingUtils.resolveFieldId(e,a);this._renderFieldWidget(e,t);a.push(e);this.fire("change")},removeField:function(e){var a=e.get("field").id;this._removeFieldWidget(e);var t=this.get("data");var i;n.Array.each(t,function(e,t){e.id===a&&(i=t)},this);t.splice(i,1);this.fire("change")},lockField:function(t){this.each(function(e){e.get("field").id===t.id&&e.lock()},this)},unlockField:function(t){this.each(function(e){e.get("field").id===t.id&&e.unlock()},this)},getFieldWidget:function(t){var a;this.each(function(e){e.get("field").id===t.id&&(a=e)},this);return a},_setupDragAndDrop:function(){var e=".sqs-form-builder-field";this._ddDelegate=new n.SQS.DDWrappers.DD.Delegate({container:this._fieldContainer,nodes:e,handles:[e+" .field-drag-handle-wrapper"],enableDragReorder:true,enableDragScroll:true,enableDragConstrained:true,dragConstrainedConfig:{stickY:true}})},_reorderField:function(e,t){var a=this.get("data");var i=a.splice(e,1)[0];a.splice(t,0,i);this.add(this.remove(e),t);this.fire("change")},_renderFieldWidget:function(e,t){var s=this.add(new n.Squarespace.Widgets.FormBuilderField({field:e})).item(0);if(t){s.once("editingChange",function(){var e=this.get("boundingBox");var t=e.get("scrollTop");var a=s.get("boundingBox").getY();var i=t+a-e.getY();e.set("scrollTop",i)},this);s.openEdit();s.focusAndSelect()}this._ddDelegate.syncTargets()},_removeFieldWidget:function(e){var a=e.get("boundingBox");var i=[];var t=this.get("contentBox");var s=t.all(".add-field-button, .sqs-form-builder-field");s.each(function(e){if(e===a)return;e.plug(n.Squarespace.PositionAnimator);var t=e.positionAnimator;t.hold();i.push(t)});e.blur();this.remove(e);e.destroy(true);n.Array.each(i,function(e){e.release()})},_openFieldSelector:function(){var e=this.get("dialog");n.Lang.isValue(e)&&e.addChildDialog(this._fieldSelector);this._fieldSelector.show({anchor:this._addFieldButton})},_confirmFieldRemoval:function(e){var t=this.get("minimumLength");var a=this.get("isMailChimpConnected");a&&"email"===e.get("field").type?new n.Squarespace.Widgets.Alert({"strings.title":s("Cannot Remove Field"),"strings.message":s("MailChimp requires an email field.")}):this.get("data").length-1<t?new n.Squarespace.Widgets.Alert({"strings.title":s("Cannot Remove Field"),"strings.message":r({one:"This form must have at least {%n} field",other:"This form must have at least {%n} fields"},t)}):new n.Squarespace.Widgets.Confirmation({"strings.title":s("Remove"),"strings.message":s("Are you sure you wish to remove this field?")}).on("confirm",function(){this.removeField(e)},this)},_validateFieldSelection:function(e){var t="email"===e.type;var a=this._hasEmailField();var i=this.get("isMailChimpConnected");if(t&&i&&a)return{title:s("Email Field Not Added"),description:s("Only one email field can be added to a MailChimp-connected form.")}},_hasEmailField:function(){var t=false;n.Array.each(this.get("data"),function(e){"email"===e.type&&(t=true)});return t},_createFieldSelector:function(){var e=this._getFieldOptions();var t=Math.min(e.length,5);return new n.Squarespace.EditingDialog({closeOthers:false,loadingText:s("Loading…"),closingText:s("Creating…"),style:"flyout",flyoutPointerDirection:"centered",width:100*t,overlay:.5,primaryTabs:[{title:s("Add Form Field"),icon:"/universal/images-v6/icons/icon-plus-16-light.png",fields:[{ctor:n.Squarespace.DialogFields.MultiOption,config:{name:"fieldOptions",titleStyle:"top",className:"button round square",defaultValue:null,iconDropPx:20,buttonStyle:true,columns:t,alwaysShowTitles:true,options:e}}]}]})},_getFieldOptions:function(){var a=this.get("excludedFieldTypes");return n.Array.reject(i,function(t){var e=n.Array.find(a,function(e){return e.type===t.value.type});return null!==e})}},{CSS_PREFIX:"sqs-form-builder",ATTRS:{data:{value:[],validator:n.Squarespace.AttrValidators.isArray},isMailChimpConnected:{value:false,validator:n.Squarespace.AttrValidators.isBoolean},minimumLength:{value:1,validator:n.Squarespace.AttrValidators.isNumber},excludedFieldTypes:{value:[],validator:n.Squarespace.AttrValidators.isArray}}})},"1.0",{requires:["base","node","squarespace-attr-validators","@sqs/yui-dd-wrappers/dd-delegate","squarespace-dialog","squarespace-dialog-field-2","squarespace-dialog-multi-option","squarespace-form-builder-field","squarespace-form-editing-utils","squarespace-ui-base","squarespace-util","squarespace-widgets-alert","squarespace-widgets-confirmation","widget-parent"]})},"./src/main/webapp/universal/scripts-v6/dialog-form-preview.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-dialog-form-preview",function(t){t.namespace("Squarespace.DialogFields");var a=t.Squarespace.DialogFields.FormPreview=t.Base.create("formPreview",t.Squarespace.DialogField2,[],{initializer:function(){this._formPreview=new t.Squarespace.Widgets.FormPreview({form:this.get("data"),hideSubmitButton:true});this._emptyMessage=t.Node.create('<div class="no-fields">'+i("No fields. Use the form builder to add some.")+"</div>")},destructor:function(){this._formPreview.destroy()},renderUI:function(){a.superclass.renderUI.call(this);var e=this.get("contentBox");this._formPreview.render(e);e.append(this._emptyMessage)},syncUI:function(){a.superclass.syncUI.call(this);this._formPreview.syncUI();if(this.get("data").get("fields").length>0){this._emptyMessage.hide();this._formPreview.show()}else{this._formPreview.hide();this._emptyMessage.show()}}},{CSS_PREFIX:"sqs-dialog-preview-form",ATTRS:{data:{value:null,validator:function(e){return t.instanceOf(e,t.Squarespace.Models.Form)}},readOnly:{value:true}}})},"1.0",{requires:["base","json","node","squarespace-dialog-field-2","squarespace-form-preview","squarespace-models-form"]})},"./src/main/webapp/universal/scripts-v6/dialog-form-selector.js":function(e,t,a){var r=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-dialog-form-selector",function(i){i.namespace("Squarespace.DialogFields");var s={};s[i.Squarespace.FormType.PRODUCT]=i.Squarespace.ProductFormModelEditor;var n=i.Squarespace.DialogFields.FormSelector=i.Base.create("formSelector",i.Squarespace.DialogField2,[],{initializer:function(){i.Squarespace.FormCache.load(i.bind(function(){this._set("dataLoaded",true)},this))},destructor:function(){this._loadingTimer&&this._loadingTimer.cancel()},renderUI:function(){n.superclass.renderUI.call(this);var e=this.get("contentBox");this.get("dataLoaded")||this.get("boundingBox").addClass("content-loading");var t=e.appendChild('<div class="loading-state"><div class="spinner"></div><div class="text">'+r("Loading...")+"</div></div>");new i.Squarespace.Spinner({size:20,color:"dark",render:t.one(".spinner")}).spin();var a=this.get("strings.noFormMessage");this._noFormEl=e.appendChild('<div class="no-form"><div class="name">'+a+"</div></div>");this._addFormEl=e.appendChild('<div class="add-form"><div class="title"><div class="title-icon"></div><div class="title-text">'+r("Create New Form")+"</div></div></div>")},bindUI:function(){n.superclass.bindUI.call(this);this.after("dataLoadedChange",this.syncUI,this);this._bindFormCache();this.get("contentBox").delegate("click",function(e){var t=e.currentTarget;if(e.target.test(".edit")){this._editForm(t);return}if(t.hasClass("selected"))return;var a=t.hasClass("no-form");var i=t.getAttribute("data-form-id");var s=a?null:i;this.set("data",s,{noSyncUI:true});this._updateSelectedFormNode()},".form, .no-form",this);this._addFormEl.on("click",this._addForm,this)},syncUI:function(){n.superclass.syncUI.call(this);if(this.get("dataLoaded")){this._setLoadedState();this.get("contentBox").all(".form").remove(true);var e=this.get("formType");var t=i.Squarespace.FormCache.filterByType(e);i.Array.each(t,this._addFormNode,this);this._updateSelectedFormNode()}else this._setLoadingState()},_setLoadedState:function(){this._loadingTimer&&this._loadingTimer.cancel();this.get("boundingBox").removeClass("content-loading")},_setLoadingState:function(){this._loadingTimer&&this._loadingTimer.cancel();this._loadingTimer=i.later(500,this,function(){this.get("boundingBox").addClass("content-loading")})},_bindFormCache:function(){var e=i.Squarespace.FormCache;this._registerEvent(e.after("reset",this.syncUI,this));this._registerEvent(e.after("add",function(e){this._addFormNode(e.model)},this));this._registerEvent(e.after("remove",function(e){var t=e.model;this._removeFormNode(t);if(t.get("id")===this.get("data")){this.set("data",null,{noSyncUI:true});this._updateSelectedFormNode()}},this));this._registerEvent(e.after("*:save",function(e){this._updateFormNode(e.target)},this))},_addFormNode:function(e){var t=i.Node.create('<div class="form" data-form-id="'+e.get("id")+'"><div class="name">'+e.get("name")+'</div><div class="edit">'+r("Edit")+"</div></div>");e.get("id")===this.get("data")&&t.addClass("selected");t.setData("form",e);this._addFormEl.insert(t,"before");return t},_updateFormNode:function(e){var t=this._getFormNode(e.get("id"));var a=t.one(".name");var i=e.get("name");i!==a.getHTML()&&a.setHTML(i)},_removeFormNode:function(e){this._getFormNode(e.get("id")).remove(true)},_getFormNode:function(e){return this.get("contentBox").one('[data-form-id="'+e+'"]')},_updateSelectedFormNode:function(){var e=this.get("contentBox").one(".selected");e&&e.removeClass("selected");var t=this.get("data");t?this._getFormNode(t).addClass("selected"):this._noFormEl.addClass("selected")},_editForm:function(e){var t=s[this.get("formType")];var a=e.getData("form");new t({model:a}).show()},_addForm:function(){var e=this.get("formType");var t=s[e];var a=new i.Squarespace.Models.Form({type:e,name:r("New Form"),useLightbox:false});a.onceAfter("save",function(){i.Squarespace.FormCache.add(a);this.set("data",a.get("id"),{noSyncUI:true});this._updateSelectedFormNode()},this);new t({model:a}).show()}},{CSS_PREFIX:"sqs-form-selector",ATTRS:{data:{value:null,validator:i.Squarespace.AttrValidators.isNullOrString},formType:{value:i.Squarespace.FormType.BLOCK,validator:function(e){if(!i.Object.hasValue(i.Squarespace.FormType,e)){false;return false}return true},writeOnce:"initOnly"},dataLoaded:{value:false,validator:i.Squarespace.AttrValidators.isBoolean,readOnly:true},strings:{value:{noFormMessage:r("No Form Required")},validator:i.Squarespace.AttrValidators.isObject,writeOnce:"initOnly"}}})},"1.0",{requires:["base","node","squarespace-attr-validators","squarespace-dialog-field-2","squarespace-editor-form-product","squarespace-enum","squarespace-models-form","squarespace-spinner"]})},"./src/main/webapp/universal/scripts-v6/dialog-google-docs-service-connect.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./common/temp/node_modules/react/index.js");var n=a("./common/temp/node_modules/react-dom/index.js");var r=a("./src/main/webapp/universal/src/shared/components/LegacyGoogleDriveConfig.jsx");var o=a("./src/main/webapp/universal/src/shared/stores/GoogleDriveConfigStore.js");var l=a("./src/main/webapp/frontend/packages/enums/FormBackendConnectionState.js");YUI.add("squarespace-dialog-google-docs-service-connect",function(e){e.namespace("Squarespace.DialogFields");e.Squarespace.DialogFields.GoogleDocsServiceConnect=e.Base.create("googleDocsServiceConnect",e.Squarespace.DialogField2,[],{initializer:function(e){this.reactElement=s.createElement(r,{initialData:e.data})},renderUI:function(){this.reactInstance=n.render(this.reactElement,this.get("contentBox").getDOMNode())},destructor:function(){n.unmountComponentAtNode(this.get("contentBox").getDOMNode());this.reactInstance=null;this.reactElement=null},didDataChange:function(){return o.getState().isDirty},_getErrors:function(){var e=[];var t=o.getState();t.isConnected&&t.showFormNameRequiredError&&e.push(i("Spreadsheet name required."));return e}},{ATTRS:{data:{getter:function(){var e=o.getState();return{connectionState:e.isConnected?l.CONNECTED:l.DISCONNECTED,username:e.username,socialConfig:e.googleDriveConfig,spreadsheetName:e.googleDriveSpreadsheetName}}}}})},"1.0",{requires:["base","squarespace-dialog-field-2"]})},"./src/main/webapp/universal/scripts-v6/dialog-labelled-value-table.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-dialog-labelled-value-table",function(n){n.namespace("Squarespace");var t=n.Squarespace.DialogFields.LabelledValueTable=n.Base.create("LabelledValueTable",n.Squarespace.DialogField2,[],{initializer:function(){n.Lang.isValue(this.get("data"))||this.set("data",this.get("defaultData"))},renderUI:function(){t.superclass.renderUI.call(this);this._populateTable(this.get("data"))},bindUI:function(){t.superclass.bindUI.call(this);var e=this.get("contentBox");this.on("rowsChanged",this._updateDataFromTable,this);e.delegate("change",this._updateDataFromTable,"input",this);e.delegate("click",this._insertNewRow,".add-row",this);e.delegate("click",this._removeRow,".remove",this)},_populateTable:function(e){n.Array.each(e,this._addRow,this)},syncUI:function(){t.superclass.syncUI.call(this);var e=this.get("contentBox");n.Lang.isValue(this.get("data"))&&e.toggleClass("empty",0===this.get("data").length)},_updateDataFromTable:function(){this.set("data",this._extractRowValuesFromTable())},_removeRow:function(e){var t=e.currentTarget.ancestor(".row");t.remove();e.stopPropagation();this.fire("rowsChanged")},_insertNewRow:function(){var e=this.get("contentBox");var t={};t[this.get("valueKey")]=2500;this._addRow(t);e.one(".add-row").scrollIntoView();this.fire("rowsChanged")},_addRow:function(e){var t=this.get("contentBox");var a=n.Node.create(n.Handlebars.render(this.getProperty("ROW_TEMPLATE"),{value:e[this.get("valueKey")],label:e[this.get("labelKey")]}));n.Lang.isValue(this.get("valueInputPlugin"))&&a.one('input[name="value"]').plug(this.get("valueInputPlugin"));t.one("tbody").append(a)},_extractRowValuesFromTable:function(){var e=this.get("contentBox");var t=e.one("tbody");var s=[];t.all(".row").each(function(e){var t={};var a=this.get("valueInputPlugin");if(n.Lang.isValue(a)){var i=a.NS;t[this.get("valueKey")]=e.one('input[name="value"]')[i].get("data")}else t[this.get("valueKey")]=e.one('input[name="value"]').get("value");t[this.get("labelKey")]=e.one('input[name="label"]').get("value");s.push(t)},this);return s}},{CSS_PREFIX:"sqs-labelled-value-table",HANDLEBARS_TEMPLATE:"dialog-labelled-value-table.html",ROW_TEMPLATE:'<tr class="row"><td class="left"><input type="text" class="value" name="value" value="{{value}}" /></td><td class="right"><input type="text" class="label" name="label" value="{{label}}" /></td><td class="remove"><div class="remove-row"></div></td></tr>',ATTRS:{strings:{value:{title:"",description:"",emptyMessage:"Empty",valueLabel:i("My Value"),labelLabel:i("My Label")}},valueKey:{value:"value"},labelKey:{value:"label"},valueInputPlugin:{value:null},defaultData:{value:[]}}})},"1.0",{requires:["base","handlebars","json","squarespace-animations","squarespace-dialog-field-2","squarespace-dialog-labelled-value-table-template"]})},"./src/main/webapp/universal/scripts-v6/dialog-legacy-stateflow.js":function(e,t,a){var o=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var l=a("./src/main/webapp/universal/src/shared/utils/dateFormat.js");var i=a("./src/main/webapp/universal/src/shared/utils/calculateFullDayOffset.js");YUI.add("squarespace-dialog-legacy-stateflow",function(r){var s;var n;s=function(e,a){if(!r.Lang.isObject(e)||!r.Lang.isObject(a))return e===a;var i=true;r.Object.each(e,function(e,t){r.Lang.isObject(e)&&r.Lang.isObject(a[t])?i=i&&s(e,a[t]):e!==a[t]&&(i=false)});return i};n=function(e){var t=/\[\s*([^|\]]+?)\s*(?:\|([^]]*))?\s*\]/g,a=t.exec(e);return null!==a&&String(a[1]).toLowerCase()};r.namespace("Squarespace.DialogFields");var a=r.Squarespace.DialogFields.LegacyStateflow=r.Base.create("LegacyStateflow",r.Squarespace.DialogField2,[r.WidgetParent],{initializer:function(e){var t=Date.now();var a;this._resizeEmitter=new r.Squarespace.ResizeEmitter({timeout:100});this._childrenContainer=r.one("body");if(!r.Lang.isValue(e.data)){e.data={state:e.stateOrder[0],date:e.allowNever?null:t};this.set("data",e.data)}if(r.Lang.isNull(e.data.date)&&e.allowNever)this.set("durationOffset",-1);else{a=i(new Date,e.data.date);this.set("durationOffset",a)}this.set("stateType",this.getStateType());this._addChildWidgets()},renderUI:function(){a.superclass.renderUI.call(this);var e=this.get("contentBox");this.stateLabel=e.one(".field-workflow-title");this.stateDesc=e.one(".field-workflow-description")},bindUI:function(){a.superclass.bindUI.call(this);this._resizeEmitter.on("resize:end",function(){this.each(function(e){e.align()},this)},this);this.get("boundingBox").on("clickoutside",function(e){if(this._timer.get("boundingBox").contains(e.target)||this._picker.get("boundingBox").contains(e.target))return;this.closeFlyout()},this);this.stateDesc.on("click",this.onStateChangeRequest,this);this.stateLabel.on("click",this.onStateChangeRequest,this);this.on("dataChange",this.onDataChange,this);this.after("stateScheduler:dataChange",this.aggregateWidgetData,this,{noSyncUI:true});this.after("statepicker:dataChange",this.aggregateWidgetData,this)},syncUI:function(){a.superclass.syncUI.call(this);var e=this.get("data");var t=this.get("states")[e.state];this.stateLabel.set("text",t.title);this.stateDesc.setHTML(this.getStateDesc(t.stateDesc,e.date))},destructor:function(){this._resizeEmitter.destroy();this.each(function(e){e.hide();e.destroy()},this)},_addChildWidgets:function(){this._timer=this.add({childType:r.Squarespace.DialogFields.StateScheduler,data:this.get("data").date,type:this.get("stateType"),allowNever:this.get("allowNever"),durationOffset:this.get("durationOffset"),visible:false,align:{node:this.get("contentBox").one(".duration-wrapper, .date-wrapper"),points:[r.WidgetPositionAlign.BC,r.WidgetPositionAlign.TC]}}).item(0);this._picker=this.add({childType:r.Squarespace.DialogFields.Statepicker,data:this.get("data"),states:this.get("states"),stateOrder:this.get("stateOrder"),stateType:this.get("stateType"),allowNever:this.get("allowNever"),visible:false,align:{node:this.get("boundingBox"),points:[r.WidgetPositionAlign.BC,r.WidgetPositionAlign.BC]}}).item(0)},onStateChangeRequest:function(e){var t=e.target.hasClass("duration")||e.target.hasClass("date");this.showFlyout(t?"timer":"picker")},onDataChange:function(e){var t;var a=e.newVal;if(r.Lang.isValue(a.state)){this.set("stateType",this.getStateType(a));this._timer.set("type",this.get("stateType"))}if(r.Lang.isNull(a.date)&&this.get("allowNever"))this.set("durationOffset",-1);else{t=i(new Date,a.date);this.set("durationOffset",t)}e.closeFlyout&&this.closeFlyout()},aggregateWidgetData:function(e){var t=this.get("data");var a=e.newVal;var i={};var s={closeFlyout:false};if(r.Lang.isDate(a))i.date=a.getTime();else if(r.Lang.isString(a)){i.state=a;s.closeFlyout=true}else if(r.Lang.isNumber(a))isNaN(new Date(a).getTime())||(i.date=a);else if(r.Lang.isObject(a)){r.Object.hasKey(a,"state")&&(i.state=a.state);s.closeFlyout=true}else r.Lang.isNull(a)&&(i.date=null);this.set("data",r.merge(t,i),s)},showFlyout:function(e){if("picker"===e&&this._picker.get("visible")||"timer"===e&&this._timer.get("visible"))return;if("picker"===e){this._timer.hide();this._picker.set("data",this.get("data"));this._picker.show();this._picker.align()}else{this._picker.hide();this._timer.setAttrs({data:this.get("data").date,"align.node":this.get("contentBox").one(".duration-wrapper, .date-wrapper")});this._timer.show();this._timer.align()}},closeFlyout:function(e,t,a){this.each(function(e){e.hide()},this);this.syncUI()},getStateType:function(e){var t=e||this.get("data"),a=this.get("states"),i;if(!r.Object.hasKey(a,t.state))return false;i=n(a[t.state].stateDesc);return i||"none"},getStateDesc:function(e,t){e=e.replace("[","{").replace("]","}");return r.Lang.sub(e,{DATE:this.getDateText(t),DURATION:this.getDurationText(t)})},getDateText:function(e){var t="-",a='<span class="date-wrapper"><span class="date">{date}</span></span>';r.Lang.isValue(e)&&(t=l(new Date(e),"lllLT"));return r.Lang.sub(a,{date:t})},getDurationText:function(e){var t,a=this.get("durationOffset"),i=this.get("allowNever")&&!r.Lang.isValue(e),s=l(e,"LT"),n='<span class="duration-wrapper"><span class="duration">{duration}</span></span>';t=-1===a&&i?o("never"):a<0?o("now"):0===a?o("today at {prettyDate}",{prettyDate:s}):1===a?o("tomorrow at {prettyDate}",{prettyDate:s}):o("in {offset} days at {prettyDate}",{offset:a,prettyDate:s});return r.Lang.sub(n,{duration:t})},didDataChange:function(){var e=this.get("data");return!s(e,this._initialData)}},{CSS_PREFIX:"sqs-legacy-stateflow",TEMPLATE:'<div class="clear field-workflow-wrapper"><div class="field-workflow-title">&nbsp</div><div class="field-workflow-description">&nbsp</div></div>',ATTRS:{strings:{},data:{},states:{},stateOrder:{validator:r.Lang.isArray},stateType:{},durationOffset:{value:-1,validator:function(e){return r.Lang.isNumber(Number(e))},setter:function(e){return parseInt(e,10)}},allowNever:{validator:r.Lang.isBoolean}}})},"1.0",{requires:["base","squarespace-dialog-field-2","squarespace-dialog-statepicker","squarespace-dialog-statepicker-scheduler","squarespace-dom-emitters-resize"]})},"./src/main/webapp/universal/scripts-v6/dialog-mailchimp-service-connect.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./common/temp/node_modules/react/index.js");var n=a("./common/temp/node_modules/react-dom/index.js");var r=a("./src/main/webapp/universal/src/shared/components/LegacyMailChimpConfig.jsx");var o=a("./src/main/webapp/universal/src/shared/actions/MailChimpConfigActions.js");var l=a("./src/main/webapp/universal/src/shared/stores/MailChimpConfigStore.js");var c=a("./src/main/webapp/frontend/packages/enums/FormBackendConnectionState.js");YUI.add("squarespace-dialog-mailchimp-service-connect",function(e){e.namespace("Squarespace.DialogFields");e.Squarespace.DialogFields.MailChimpServiceConnect=e.Base.create("mailChimpServiceConnect",e.Squarespace.DialogField2,[],{initializer:function(e){this.reactElement=s.createElement(r,{initialData:e.data})},renderUI:function(){this.reactInstance=n.render(this.reactElement,this.get("contentBox").getDOMNode())},destructor:function(){n.unmountComponentAtNode(this.get("contentBox").getDOMNode());this.reactInstance=null;this.reactElement=null},didDataChange:function(){return l.getState().isDirty},_getErrors:function(){var e=[];var t=l.getState();if(t.mailChimpConfig.isMailChimpConnected&&!t.mailChimpConfig.mailChimpListId){o.mailChimpValidationError();e.push(i("Select a list"))}return e}},{ATTRS:{data:{getter:function(){var e=l.getState();return{connectionState:e.mailChimpConfig.isMailChimpConnected?c.CONNECTED:c.DISCONNECTED,username:e.mailChimpConfig.mailChimpUsername,useSingleOptIn:e.mailChimpConfig.mailChimpUseSingleOptIn,socialConfig:e.mailChimpConfig.mailChimpOAuthConfig,list:e.mailChimpConfig.mailChimpListId}}}}})},"1.0",{requires:["base","squarespace-dialog-field-2"]})},"./src/main/webapp/universal/scripts-v6/dialog-product-chooser.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var o=a("./src/main/webapp/universal/src/shared/i18n/index.ts").pluralize;var l=a("./src/main/webapp/frontend/packages/enums/CollectionTypes.js");YUI.add("squarespace-dialog-product-chooser",function(s){var n=60;s.Squarespace.ProductChooserModes={squarespace:Class.create({TITLE:i("Find a Product"),DATA_PROPERTY:"id",URL:"/api/content-items/search",TEMPLATE:'<div class="thumbnail-wrapper"><img style="margin-left:{marginLeft}px" src="/item/{id}?format=100w" class="thumbnail" alt="{title}"></div><div class="description"><div class="text" alt="{title}">{title}</div><div class="author">{numVariants}</div></div>',render:function(e){var t=0;if(s.Lang.isValue(e.originalSize)&&s.Lang.isValue(e.mediaFocalPoint)){var a=s.Array.map(e.originalSize.split("x"),Number);var i=n*a[0]/a[1];t=(n-i)*e.mediaFocalPoint.x}return s.Lang.sub(this.TEMPLATE,{id:e.id,title:s.Escape.html(e.title),numVariants:o({one:"variant",other:"variants"},e.variants.length),marginLeft:t})},acResultFormatter:function(e,t){return s.Array.map(t,function(e){return'<div class="ac-product">'+this.render(e.raw)+"</div>"},this)},getAcRequestTemplate:function(){var e="?q={query}";e+=s.Lang.sub("&collectionType={collectionType}&recordType={recordType}&isPublished={isPublished}",{collectionType:l.PRODUCTS,recordType:s.Squarespace.Enums.RecordType.STORE_ITEM,isPublished:true});return e}}),amazon:Class.create({DATA_PROPERTY:"asin",URL:"/api/config/AmazonProductSearch",TEMPLATE:'<div class="thumbnail-wrapper"><img src="{thumbUrl}" class="thumbnail" alt="{title}"></div><div class="description"><div class="text" alt="{title}">{title}</div><div class="author">{author}</div></div>',TITLE:i("Search For Product Keywords or paste product URL"),render:function(e){return s.Lang.sub(this.TEMPLATE,{thumbUrl:e.imageUrlMedium,title:s.Escape.html(e.title),author:this._formatByline(e)})},acResultFormatter:function(e,t){return s.Array.map(t,function(e){return'<div class="ac-product">'+this.render(e.raw,e.highlighted)+"</div>"},this)},getAcRequestTemplate:function(){return"?q={query}"},_formatByline:function(e){if(e.authors&&e.authors.length)return i("By {productAuthors}",{productAuthors:e.authors.join(", ")});if(e.artists&&e.artists.length)return i("By {productArtists}",{productArtists:e.artists.join(", ")});if(e.actors&&e.actors.length)return i("Starring {productActors}",{productActors:e.actors.join(", ")});return e.manufacturer}})};s.namespace("Squarespace.DialogFields");var r=s.Squarespace.DialogFields.ProductChooser=s.Base.create("productChooser",s.Squarespace.DialogField2,[],{initializer:function(e){this._mode=new(s.Squarespace.ProductChooserModes[this.get("mode")])},destructor:function(){this._autoCompleteField&&this._autoCompleteField.destroy()},renderUI:function(){r.superclass.renderUI.call(this);var e=this.get("contentBox");this._hintNode=e.appendChild('<div class="hint">'+this._mode.TITLE+"</div>");this._productSearchNode=e.appendChild('<div class="product-search"></div>');this._productPreviewNode=e.appendChild('<div class="product-preview"></div>');this._productSearchIconNode=this._productSearchNode.appendChild('<div class="search-icon"></div>');this._productSearchNoticeNode=this._productSearchNode.appendChild(i('<div class="product-search-result-notice"><div class="notice-text">No products found.</div></div>'));this._productSearchAutoCompleteNode=this._productSearchNode.appendChild('<div class="product-search-auto-complete"></div>');this._productSearchNoticeNode.hide();this.get("icon")&&this._productSearchNode.addClass("has-icon");this._autoCompleteField=this._createAutoCompleteField();this._autoCompleteField.render(this._productSearchAutoCompleteNode);this.set("errorFlyoutAnchor",this._productSearchAutoCompleteNode)},bindUI:function(){r.superclass.bindUI.call(this);var e=this.get("contentBox");var t=this._autoCompleteField;var a=t.get("acWidget");var i=this._productSearchNoticeNode;e.delegate("click",function(){this.set("data",null)},".clear-selected-product",this);this._registerEvent(t.on("select",this._onAutoCompleteSelect,this));this._registerEvent(t.on("blur",t.hideError,this));this._registerEvent(a.on("results",function(e){e.results.length>0?i.setStyle("display","none"):i.setStyle("display","block")}));this._registerEvent(a.on("clear",function(){i.setStyle("display","none")}))},syncUI:function(){r.superclass.syncUI.call(this);var e=this.get("contentBox");var t=this._hintNode;var a=this._autoCompleteField;a.clear();a.focus();this._updatePreview(this.get("data"));if(s.Lang.isValue(this.get("data"))){e.addClass("has-data");e.removeClass("no-data");t.setContent(i("Selected Product"))}else{e.addClass("no-data");e.removeClass("has-data");t.setContent(i("Find a Product"))}},focus:function(){this._autoCompleteField.focus()},getErrors:function(){return this.get("required")&&!s.Lang.isValue(this.get("data"))?[i("You must choose a product")]:[]},didDataChange:function(){var e=this.get("data");if(s.Lang.isObject(this._initialData)&&s.Lang.isObject(e))return e.asin!==this._initialData.asin;return this._initialData!==e},_onAutoCompleteSelect:function(){var e=this._autoCompleteField;var t=e.get("data");var a=e.get("dataObject");s.Lang.isValue(t)&&""!==t&&("amazon"===this.get("mode")?this.set("data",a):this.set("data",t))},_updatePreview:function(e){if(!s.Lang.isValue(e))return;if("squarespace"===this.get("mode")&&s.Lang.isString(e)){this._getProductItem(e);return}var t=this._productPreviewNode;var a=this._mode.render(e)+'<div class="clear-selected-wrapper"><div class="clear-selected-product"></div></div>';t.setContent(a);t.setStyle("opacity",0);t.show("fadeIn",{duration:.25})},_getProductItem:function(e){s.Data.get({url:"/api/commondata/GetItem",data:{itemId:e},success:function(e){this._updatePreview(e.item)},failure:function(e){this.set("data",null)}},this)},_createAutoCompleteField:function(){var e=this._mode;var t={source:this._createDataSource(),requestTemplate:e.getAcRequestTemplate(),resultTextLocator:"title",resultFormatter:s.bind(e.acResultFormatter,e),maxResults:this.get("maxResults")};var a=s.merge(t,this.get("acConfig"));return new s.Squarespace.DialogFields.AutoComplete({"strings.placeholder":this.get("strings.placeholder"),requireListEntry:true,responseDataProperty:this._mode.DATA_PROPERTY,acConfig:a})},_createDataSource:function(){var e=new s.DataSource.IO({source:this._mode.URL});e.plug(s.Plugin.DataSourceJSONSchema,{schema:{resultListLocator:"amazon"===this.get("mode")?"products":"results"}});e.on("error",function(e){if(!e.stopped){var t=JSON.parse(e.data.response);var a=t.error;s.Lang.isValue(a)&&this._autoCompleteField.showError(a)}},this);return e}},{CSS_PREFIX:"sqs-product-chooser",ATTRS:{mode:{value:"squarespace",validator:function(e){if(-1!==["squarespace","amazon"].indexOf(e))return true;false;return false},writeOnce:"initOnly"},strings:{value:{placeholder:i("Search")}},icon:{value:false},maxResults:{validator:s.Squarespace.AttrValidators.isNumber,writeOnce:"initOnly"},acConfig:{validator:s.Squarespace.AttrValidators.isObject,writeOnce:"initOnly",value:{}},errorFlyoutAnchor:{value:null,readOnly:false,validator:s.Squarespace.AttrValidators.isNullOrInstanceOf(s.Node)}}})},"1.0",{requires:["base","datasource","squarespace-attr-validators","squarespace-content-item-types-enum-record-type","squarespace-dialog-auto-complete","squarespace-dialog-field-2","squarespace-util"]})},"./src/main/webapp/universal/scripts-v6/dialog-service-connect.js":function(e,t,a){var i=a("./src/main/webapp/frontend/packages/enums/FormBackendConnectionState.js");YUI.add("squarespace-dialog-service-connect",function(e){e.namespace("Squarespace.DialogFields");var t=e.Squarespace.DialogFields.ServiceConnect=e.Base.create("serviceConnect",e.Squarespace.DialogField2,[],{initializer:function(){if(this.constructor===t)throw new Error("DialogFields.ServiceConnect: This is an abstract class and is not meant to be used on its own.");this._edited=false},renderUI:function(){t.superclass.renderUI.call(this)},bindUI:function(){t.superclass.bindUI.call(this);this.onceAfter("dataChange",function(){this._edited=true},this);this.after(["disabledChange","connectionInProgressChange"],this.syncUI,this)},syncUI:function(){t.superclass.syncUI.call(this);this.get("data.connectionState")===i.PENDING?this._setInProgressState():this.get("data.connectionState")===i.CONNECTED?this._setConnectedState():this._setDisconnectedState()},didDataChange:function(){return this._edited},_setInProgressState:function(){this.get("contentBox").removeClass("connected").removeClass("not-connected").addClass("in-progress")},_setConnectedState:function(){this.get("contentBox").removeClass("in-progress").removeClass("not-connected").addClass("connected")},_setDisconnectedState:function(){this.get("contentBox").removeClass("in-progress").removeClass("connected").addClass("not-connected")},_connect:function(){throw new Error("DialogFields.ServiceConnect: _connect must be implemented by the extending class.")},_disconnect:function(){throw new Error("DialogFields.ServiceConnect: _disconnect must be implemented by the extending class.")}},{CSS_PREFIX:"sqs-service-connect",ATTRS:{data:{value:{connectionState:i.DISCONNECTED}},connectionInProgress:{getter:function(){return this.get("data.connectionState")===i.PENDING}}}})},"1.0",{requires:["base","squarespace-dialog-field-2"]})},"./src/main/webapp/universal/scripts-v6/dialog-state-indicator-banner.js":function(e,t){YUI.add("squarespace-dialog-state-indicator-banner",function(r){var t=r.namespace("Squarespace.DialogFields").StateIndicatorBanner=r.Base.create("stateIndicatorBanner",r.Squarespace.DialogField2,[],{initializer:function(e){this._stateDisplayMap={};r.Array.forEach(e.stateDisplays,function(e){this._stateDisplayMap[e.value]={state:e.state,message:e.message,className:e.className}},this)},renderUI:function(){t.superclass.renderUI.call(this);var e=this.get("contentBox");e.one(".warn-msg").plug(r.Squarespace.Animations.Scalable,{duration:.25});e.one(".live-msg").plug(r.Squarespace.Animations.Scalable,{duration:.25});this._updateClass(this._getStateDisplay(this.get("data")))},syncUI:function(){var e=this.get("contentBox");var t=this._getStateDisplay(this.get("data"));if(t){e.setStyle("opacity",1);this._updateCopy(t)}else e.setStyle("opacity",0);this._doTransition(t);this._inDefinedState=!!t},_updateClass:function(e){var t=this.get("contentBox");var a=this._inOkState(e);var i=a?"warn":"live";var s=a?"live":"warn";var n=!t.hasClass(s);t.removeClass(i);t.addClass(s);e&&r.Lang.isValue(e.className)&&t.addClass(e.className);return n},_getStateDisplay:function(e){return this._stateDisplayMap[e]},_inOkState:function(e){return r.Lang.isObject(e)&&e.state===t.STATES.OK},_updateCopy:function(e){var t=this.get("contentBox");this._inOkState(e)?t.one(".live-msg span").setHTML(e.message):t.one(".warn-msg span").setHTML(e.message)},_doTransition:function(e){var t=this._inOkState(e);var a=this.get("contentBox");var i=t?a.one(".warn-msg"):a.one(".live-msg");var s=t?a.one(".live-msg"):a.one(".warn-msg");var n=this._updateClass(e);i.hide();i.once("hidden",function(){n&&s.show()})}},{STATES:{OK:1,WARN:2},CSS_PREFIX:"sqs-state-indicator-banner",TEMPLATE:'<div class="warning-wrapper"><div class="warn-msg"><img width="16" height="16" src="/universal/images-v6/dialog/tiny-alert.png" /><span></span><div class="banner-buttons"></div></div><div class="live-msg"><img width="16" height="16" src="/universal/images-v6/dialog/checkbox-active-14-light.png" /><span></span><div class="banner-buttons"></div></div></div>'})},"1.0",{requires:["base","node","squarespace-animations","squarespace-dialog-field-2"]})},"./src/main/webapp/universal/scripts-v6/dialog-statepicker-inset-calendar.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var E=a("./src/main/webapp/universal/src/shared/utils/dateFormat.js");var w=a("./src/main/webapp/universal/src/shared/utils/shiftForWebsiteTimezoneDisplay.js");var o=a("./src/main/webapp/universal/src/shared/utils/getTimeOffsetToWebsiteTimezone.js");YUI.add("squarespace-dialog-statepicker-inset-calendar",function(C){var t=C.namespace("Squarespace.DialogFields").InsetCalendar=C.Base.create("insetCalendar",C.Squarespace.DialogField2,[C.WidgetChild],{initializer:function(e){var t;t=C.Lang.isDate(e.data)?e.data:C.Lang.isNumber(e.data)?new Date(e.data):new Date;var a=w(t);C.Lang.isValue(e.day)||this.set("day",a.getDate());C.Lang.isValue(e.month)||this.set("month",a.getMonth());C.Lang.isValue(e.year)||this.set("year",a.getFullYear())},renderUI:function(){t.superclass.renderUI.call(this);var e=this.get("contentBox");this._nextMonth=e.one(".next");this._prevMonth=e.one(".prev")},bindUI:function(){t.superclass.bindUI.call(this);this._nextMonth.on("click",this.showNextMonth,this);this._prevMonth.on("click",this.showPrevMonth,this);C.delegate("click",this.handleDayClick,this.get("contentBox"),"td",this);this.after(["dayChange","monthChange"],this.setDate,this)},syncUI:function(){t.superclass.syncUI.call(this);var e=this.get("data")||new Date;this.renderCalendar(e,this.get("type"))},setDate:function(e){if(e.silent)return;var t=this.get("day");var a=this.get("year");var i=this.get("month");var s=this.get("data")||new Date;var n=w(s);if("day"===e.attrName)t=e.newVal;else if("month"===e.attrName){i=e.newVal;C.Lang.isValue(e.prevVal)&&(a=this.updateYear(e.newVal,e.prevVal))}n.set({year:a,month:i,day:t});var r=o(s);n.setMinutes(n.getMinutes()-r);this.set("data",n)},handleDayClick:function(e){e.halt();var t=parseInt(C.Lang.trim(e.target.get("text")),10),a=e.target,i=this.get("type");"duration"===i&&this.get("allowNever")&&(a.hasClass("fade")||a.hasClass("selected"))||(a.hasClass("today")||a.hasClass("active"))&&this.set("day",parseInt(t,10))},showNextMonth:function(e){this.updateMonth(1)},showPrevMonth:function(e){this.updateMonth(-1)},renderCalendar:function(e,t){var a=this.get("contentBox");var i;var s=this.get("data");var n=w(e);var r=new Date(n.getTime());var o=new Date(n.getTime());var l;var c=e.getDaysInMonth();var u=w(new Date);var d=new Date(n.getTime());var p;var h;var g=1,m=0,f=0;var v="";var b=E(e,"MMMM YYYY");o.moveToFirstDayOfMonth();l=o.getDay();d.addMonths(-1);p=d.getDaysInMonth();var S=function(e,t){return'<td class="'+e+'">'+t+"</td>"};for(m=0;m<6;m++){v+='<tr class="body-row">';if(g>c+l)for(f=0;f<7;++f)v+=S("fade","&nbsp");else for(f=0;f<7;++f){var y=g-l;if(g<=l)v+=S("fade",p+y);else if(g<=c+l){r.set({day:y});h="active";s&&n.getDate()===y?h="active selected":u.getFullYear()===n.getFullYear()&&u.getMonth()===n.getMonth()&&u.getDate()===y?h="today"+("duration"===t?" active":""):r.getTime()<u.getTime()&&"duration"===t&&(h="fade");v+=S(h,y)}else v+=S("fade",y-c);g+=1}v+="</tr>"}i=a.one("table > tbody");i.empty();var _=C.Node.create(v);_.all(".body-row").each(function(e){var t=C.Lang.isValue(e.one(".active"))?"table-row":"none";e.setStyle("display",t)});i.append(_);a.one(".month").set("text",b)},updateYear:function(e,t){var a=t-e,i=this.get("year");if(1!==Math.abs(a)){a>1?i++:a<-1&&i--;this.set("year",i)}return i},updateMonth:function(e){var t=this.get("data")||new Date;e=Number(e);C.Lang.isNumber(e)||(e=0);t.addMonths(e);var a=w(t);this.set("day",a.getDate(),{silent:true});this.setAttrs({month:a.getMonth()});this.renderCalendar(t,this.get("type"))}},{CSS_PREFIX:"calendar-wrapper",TEMPLATE:'<div class="calendar-inset-container"><div class="header"><div class="prev back">&nbsp;</div><span class="month">&nbsp;</span><div class="next">&nbsp;</div></div><table cellpadding="0" cellspacing="0"><thead><tr><td>'+i("Su")+"</td><td>"+i("Mo")+"</td><td>"+i("Tu")+"</td><td>"+i("We")+"</td><td>"+i("Th")+"</td><td>"+i("Fr")+"</td><td>"+i("Sa")+"</td></tr></thead><tbody></tbody></table></div>",ATTRS:{day:{value:1,validator:C.Squarespace.AttrValidators.isNumber,setter:function(e){return parseInt(e,10)}},month:{validator:C.Squarespace.AttrValidators.isNumber},year:{validator:C.Squarespace.AttrValidators.isNumber},data:{setter:function(e){if(!C.Lang.isValue(e))return null;var t=e;t=C.Lang.isNumber(e)?new Date(e):C.Lang.isDate(e)?e:new Date;var a=this.get("maximumDate");var i=this.get("minimumDate");if(C.Lang.isValue(a)&&C.DataType.Date.isGreater(t,new Date(a)))return C.Attribute.INVALID_VALUE;if(C.Lang.isValue(i)&&C.DataType.Date.isGreater(new Date(i),t))return null;return t},validator:C.Squarespace.AttrValidators.isNullorDate},maximumDate:{validator:function(e){return C.Squarespace.AttrValidators.isNullOrNumber(e)||C.Squarespace.AttrValidators.isDate(e)}},minimumDate:{validator:function(e){return C.Squarespace.AttrValidators.isNullOrNumber(e)||C.Squarespace.AttrValidators.isDate(e)}}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-dialog-field-2","squarespace-dialog-fields","squarespace-node-flyout"]})},"./src/main/webapp/universal/scripts-v6/dialog-statepicker-inset-timer.js":function(e,t,a){var r=a("./src/main/webapp/universal/src/shared/i18n/index.ts").formatDateTime;var i=a("./src/main/webapp/universal/src/shared/utils/shiftForWebsiteTimezoneDisplay.js");var s=a("./src/main/webapp/universal/src/shared/utils/getTimeOffsetToWebsiteTimezone.js");YUI.add("squarespace-dialog-statepicker-inset-timer",function(o){var e=function(e,t){var a=String(e),i=Number(t),s="";if(!o.Lang.isNumber(i))return a;for(var n=0,r=i-a.length;n<r;n++)s+="0";return s+a};var n=true;var t=n?"":"hidden";var a=o.namespace("Squarespace.DialogFields").InsetTimer=o.Base.create("insetTimer",o.Squarespace.DialogField2,[o.WidgetChild],{initializer:function(e){o.Lang.isValue(e.data)&&this.set("data",e.data)},renderUI:function(){a.superclass.renderUI.call(this);var e=this.get("contentBox");this._ampmControl=e.one(".ampm");this._hoursControl=e.one(".hour");this._minutesControl=e.one(".minute")},bindUI:function(){a.superclass.bindUI.call(this);this._ampmControl.on("click",this.selectControlEl,this,"ampm");this._minutesControl.on("click",this.selectControlEl,this,"minutes");this._hoursControl.on("click",this.selectControlEl,this,"hours");this._ampmControl.on("blur",this.onTimerBlur,this,"ampm");this._minutesControl.on("blur",this.onTimerBlur,this,"minutes");this._hoursControl.on("blur",this.onTimerBlur,this,"hours");this._ampmControl.on("keydown",this.onTimerKeyDown,this,"ampm");this._minutesControl.on("keydown",this.onTimerKeyDown,this,"minutes");this._hoursControl.on("keydown",this.onTimerKeyDown,this,"hours")},syncUI:function(){a.superclass.syncUI.call(this);this._ampmControl.set("value",this.get("ampm"));this._minutesControl.set("value",e(this.get("minutes"),2));this._hoursControl.set("value",this.get("hours"))},selectControlEl:function(e,t){-1!==["ampm","minutes","hours"].indexOf(t)&&e.target.select()},onTimerBlur:function(e,t){"hours"!==t&&"ampm"!==t&&"minutes"!==t||this.set(t,e.target.get("value"));this.syncUI()},onTimerKeyDown:function(e,t){if(65===e.keyCode){this._ampmControl.set("value","AM");e.halt();return}if(80===e.keyCode){this._ampmControl.set("value","PM");e.halt();return}if(13===e.keyCode)return;"hours"===t&&186===e.keyCode?this._minutesControl.select():"minutes"===t&&32===e.keyCode&&n&&this._ampmControl.select();if(this._invalidHourMinKeyCode(e.keyCode)&&("minutes"===t||"hours"===t)){e.halt();return}e.target.hasClass("ampm")&&9!==e.keyCode&&e.halt()},_invalidHourMinKeyCode:function(e){return(e>57||e<48)&&(e<96||e>105)&&9!==e&&16!==e&&37!==e&&39!==e&&46!==e&&8!==e}},{CSS_PREFIX:"time-wrapper",TEMPLATE:'<input class="time-control hour"> <span class="time-control">:</span> <input class="time-control minute"> <input class="time-control ampm '+t+'"> <div class="duration-display"></div>',ATTRS:{ampm:{getter:function(){return o.Lang.trim(r(this.get("localizedDate"),"A"))},validator:function(e){if(o.Lang.isString(e)){var t=e.toLowerCase();return"am"===t||"pm"===t}return false},setter:function(e){var t=this.get("localizedDate");var a=e.toLowerCase();var i=o.Lang.trim(r(t,"A")).toLowerCase();if(a!==i){var s=(t.getHours()+12)%24;t.setHours(s);this.set("localizedDate",t)}}},minutes:{getter:function(){return this.get("localizedDate").getMinutes()},validator:function(e){e=parseInt(e,10);return o.Lang.isNumber(e)&&e>=0&&e<60},setter:function(e){var t=this.get("localizedDate");t.setMinutes(parseInt(e,10));this.set("localizedDate",t)}},hours:{getter:function(){var e=this.get("localizedDate").getHours();if(n)return e%12||12;return e},validator:function(e){e=parseInt(e,10);var t=n?12:23;var a=n?1:0;return o.Lang.isNumber(e)&&e>=a&&e<=t},setter:function(e){var t=this.get("localizedDate");var a=t.getHours();var i=parseInt(e,10);var s=i;if(n){a>=12&&i<12&&(s=i+12);a<12&&12===i&&(s=0)}t.setHours(s);this.set("localizedDate",t)}},data:{value:new Date},localizedDate:{getter:function(){return i(this.get("data"))},setter:function(e){var t=s(this.get("data"));var a=new Date(e.getTime());a.setMinutes(a.getMinutes()-t);this.set("data",a)}}}})},"1.0",{requires:["base","squarespace-dialog-field-2","squarespace-dialog-fields","squarespace-node-flyout"]})},"./src/main/webapp/universal/scripts-v6/dialog-statepicker-scheduler.js":function(e,t,a){var n=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var d=a("./src/main/webapp/universal/src/shared/utils/createWebsiteDate.js");var p=a("./src/main/webapp/universal/src/shared/utils/calculateFullDayOffset.js");var h=a("./src/main/webapp/universal/src/shared/utils/shiftForWebsiteTimezoneDisplay.js");YUI.add("squarespace-dialog-statepicker-scheduler",function(l){var c=0,u=1,s=2;var i=l.namespace("Squarespace.DialogFields").StateScheduler=l.Base.create("stateScheduler",l.Squarespace.DialogField2,[l.WidgetPosition,l.WidgetPositionAlign,l.WidgetChild,l.WidgetParent],{initializer:function(e){var t=new Date;l.Lang.isValue(e.data)&&(t=new Date(e.data));var a=this.get("maximumDate");var i=this.get("allowNever")?Date.now():null;this._widgets=[];this._widgets[c]=new l.Squarespace.DialogFields.InsetCalendar({name:"calendar",maximumDate:a,minimumDate:i,data:t});this._widgets[u]=new l.Squarespace.DialogFields.InsetTimer({name:"timer",data:t});this._widgets[s]=new l.Squarespace.DialogFields.Slider({name:"slider",range:["duration"===this.get("type")&&this.get("allowNever")?-1:0,90],data:this.get("durationOffset"),labelWidth:0,isNumericLabel:false,length:260,visible:"duration"===this.get("type"),thumbUrl:"/universal/images-v6/dialog/slider-thumb-dark.png"})},destructor:function(){l.Array.each(this._widgets,function(e,t){e.detach();e.destroy()})},renderUI:function(){i.superclass.renderUI.call(this);var e=this.get("contentBox");var t=e.one(".flyout-calendar");e.one(".flyout-title").set("text",this.get("strings.title"));this._widgets[c].render(t);this._widgets[u].render(t);"duration"===this.get("type")&&this._renderSlider();var a=l.Node.create('<div class="flyout-notch">');if("down"===this.get("direction")){a.addClass("flyout-notch-up");e.one(".workflow-flyout").prepend(a)}else e.one(".workflow-flyout").append(a)},syncUI:function(){i.superclass.syncUI.call(this);this._widgets[s].get("visible")&&this._durationEl.one(".duration").set("text",this.getShortDurationText())},bindUI:function(){i.superclass.bindUI.call(this);this._registerEvent(this._widgets[c].after("dataChange",this._mergeDateTimeComponents,this));this._registerEvent(this._widgets[u].after("dataChange",this._mergeDateTimeComponents,this));this._registerEvent(this._widgets[s].after("dataChange",this._updateTimeOffset,this));this.after("typeChange",function(e){this._syncSlider(e.newVal)});this.after("dataChange",this.syncCalendar,this)},_renderSlider:function(){var e=this.get("contentBox");this._durationEl=l.Node.create('<div class="duration-wrapper"></div>');this._durationEl.append(l.Node.create('<div class="duration-display"><span class="duration"></span></div><div class="slider-container-wrapper"></div>'));e.one(".workflow-flyout-options").append(this._durationEl);this._widgets[s].render(e.one(".slider-container-wrapper"));this._widgets[s].show()},_syncSlider:function(e){var t="duration"===e;this._widgets[s].set("range",["duration"===this.get("type")&&this.get("allowNever")?-1:0,90]);if(!this._durationEl&&t)this._renderSlider();else if(t){this._durationEl.show();this._widgets[s].show();this._widgets[s].syncUI()}else if(l.Lang.isValue(this._durationEl)){this._widgets[s].hide();this._durationEl.hide()}},_mergeDateTimeComponents:function(e){if(this._syncing)return;if(l.Lang.isNull(this._widgets[c].get("data"))){if(this.get("allowNever")){this.set("durationOffset",-1);this.set("data",null,{noSyncUI:true})}else this.set("data",Date.now(),{noSyncUI:true});return}var t=this._widgets[u].get("data");var a=this._widgets[c].get("data");var i=h(t);var s=h(a);var n=i.getHours();var r=i.getMinutes();var o=d(s.getFullYear(),s.getMonth(),s.getDate(),n,r);this.set("durationOffset",p(new Date,o));this.set("data",o,{noSyncUI:true})},_updateTimeOffset:function(e){var t=e.newVal;if(-1===t&&this.get("allowNever")){this._widgets[c].set("data",null);this._widgets[u].disable()}else{this._widgets[u].enable();var a=new Date;a.addDays(e.newVal);this._widgets[c].setAttrs({day:a.getDate(),month:a.getMonth(),year:a.getFullYear(),data:a})}},syncCalendar:function(){this._syncing=true;if(l.Lang.isValue(this.get("data"))){var e=new Date(this.get("data"));var t=h(e);this._widgets[c].setAttrs({day:t.getDate(),data:e},{silent:true});this._widgets[c].setAttrs({month:t.getMonth(),year:t.getFullYear()});this._widgets[u].setAttrs({data:e})}this._widgets[s].get("visible")&&this._durationEl.one(".duration").set("text",this.getShortDurationText());this._syncing=false},getShortDurationText:function(){var e=this.get("allowNever")&&l.Lang.isNull(this.get("data"));var t=this.get("durationOffset");if(-1===t&&e)return this.get("strings.neverText");if(0===t)return n("Today");if(1===t)return n("Tomorrow");if(-1===t)return n("Yesterday");if(t<-1)return n("{numberOfDays} Days ago",{numberOfDays:Math.abs(t)});return n("{numberOfDays} Days",{numberOfDays:Math.abs(t)})},getCalendarHeight:function(){if(this.get("rendered"))return this.get("contentBox").one(".sqs-calendar-flyout").get("offsetHeight");return 0}},{CSS_PREFIX:"sqs-scheduler",TEMPLATE:'<div class="workflow-flyout tight sqs-calendar-flyout"><div class="workflow-flyout-options"><div class="flyout-title clear"></div><div class="flyout-calendar clear"></div></div></div>',ATTRS:{allowNever:{value:false},data:{setter:function(e){if(l.Lang.isDate(e))return e.getTime();return e}},direction:{value:"up"},durationOffset:{value:0},errorFlyoutAnimationTime:{value:.01},maximumDate:{},strings:{value:{neverText:n("Never"),title:n("Select a Date & Time")}},type:{value:"date",validator:function(e){var t=["none","duration","date"];return-1!==t.indexOf(e)}}}})},"1.0",{requires:["base","slider","squarespace-dialog-field-2","squarespace-dialog-fields","squarespace-dialog-slider","squarespace-dialog-statepicker-inset-calendar","squarespace-dialog-statepicker-inset-timer","widget-position","widget-position-align"]})},"./src/main/webapp/universal/scripts-v6/dialog-statepicker.js":function(e,t){YUI.add("squarespace-dialog-statepicker",function(o){var i=function(e){var t=/\[\s*([^|\]]+?)\s*(?:\|([^]]*))?\s*\]/g,a=t.exec(e);return null!==a&&String(a[1]).toLowerCase()};var s=function(e,a){if(!o.Lang.isObject(e)||!o.Lang.isObject(a))return e===a;var i=true;o.Object.each(e,function(e,t){o.Lang.isObject(e)&&o.Lang.isObject(a[t])?i=i&&s(e,a[t]):e!==a[t]&&(i=false)});return i};o.namespace("Squarespace.DialogFields");var t=o.Squarespace.DialogFields.Statepicker=o.Base.create("statepicker",o.Squarespace.DialogField2,[o.WidgetPosition,o.WidgetPositionAlign],{renderUI:function(){t.superclass.renderUI.call(this);var e=this.get("contentBox");this.stateLabel=e.one(".field-workflow-title");this.stateDesc=e.one(".field-workflow-description");this.buildStateMenu()},onStateChosen:function(e){var t=e.currentTarget.getData("state");var a=this.get("data");o.Object.hasKey(t,"state")&&(a.state=t.state);this.set("data",a)},getStateType:function(){var e=this.get("data");var t=this.get("states");var a=t[e.state].stateDesc;return i(a)},buildStateMenu:function(){var e=this.get("stateOrder");var t=this.get("states");this._renderStatesObject(t,e)},_renderStatesObject:function(i,e){var t=o.Array.map(e,function(e,t){var a=i[e];a.key=e;return a});o.Array.each(t,this._renderState,this)},_renderState:function(e,t){var a;var i=this.get("data").state;var s=this.constructor.OPTION_TEMPLATE;var n=o.Lang.sub(s,e);var r=this.get("contentBox").one(".workflow-flyout-options");if(!r)throw new Error("No element to attach states to.");a=o.Node.create(n);a.on("click",this.onStateChosen,this);i===e.key&&a.addClass("selected");a.setData("state",{state:e.key});r.appendChild(a)},didDataChange:function(){return!s(this.get("data"),this._initialData)}},{CSS_PREFIX:"sqs-statepicker",TEMPLATE:'<div class="workflow-flyout"><div class="workflow-flyout-options"></div></div>',OPTION_TEMPLATE:'<div class="field-workflow-flyout-option-wrapper"><div class="field-workflow-flyout-option"><div class="field-workflow-title">{title}</div><div class="field-workflow-description">{optionDesc}</div></div></div>',ATTRS:{strings:{},data:{getter:function(e){if(o.Lang.isObject(e))return o.merge(e,{});return e}},states:{},stateOrder:{},stateType:{},durationOffset:{value:-1},allowNever:{}}})},"1.0",{requires:["base","squarespace-dialog-field-2","squarespace-dialog-fields","widget-position","widget-position-align"]})},"./src/main/webapp/universal/scripts-v6/dialog-stringset-input-editor.js":function(e,t,a){var s=a("./src/main/webapp/universal/src/shared/utils/mediaQueries.js");var n=a("./common/temp/node_modules/@sqs/styles/variables/baseDamask.js");var p=a("./common/temp/node_modules/lodash/uniq.js");YUI.add("squarespace-dialog-stringset-input-editor",function(l){var a;var o=13,c=188,u=38,d=40;var t=function(){return 0};var i=function(e){if(l.Lang.isString(e)&&e.length>0){var s=e[0];return function(e,t){var a=e.toLocaleLowerCase().indexOf(s.toLocaleLowerCase());var i=t.toLocaleLowerCase().indexOf(s.toLocaleLowerCase());return a>i?1:a<i?-1:0}}return t};a=l.namespace("Squarespace.DialogFields").InputEditor=l.Base.create("InputEditor",l.Squarespace.DialogField2,[l.WidgetChild,l.Squarespace.Mixins.StringSetUtils],{initializer:function(e){l.Lang.isValue(e.existingMembers)||this.set("existingMembers",[]);l.Lang.isValue(e.data)||this.set("data",[]);s.isSubDesktop()&&this.get("maxSuggestions")>4&&this.set("maxSuggestions",4)},destructor:function(){this._autoCompleteEl.remove(true);this._autoCompleteSuggestionsEl&&this._autoCompleteSuggestionsEl.remove(true)},renderUI:function(){a.superclass.renderUI.call(this);var e=this.get("contentBox");var t=this.PARTIALS.AC_TEMPLATE;e.one(".workflow-flyout").setStyle("width",this.get("width")+"px");e.one(".flyout-title").set("text",this.get("editorLabel"));this._editorControlEl=e.one("input");this._editorControlEl.set("placeholder",this.get("placeholder"));this._autoCompleteEl=l.Node.create(t);this._autoCompleteSuggestionsEl=this._autoCompleteEl.one(".workflow-flyout-autocomplete");l.one(document.body).append(this._autoCompleteEl);this._autoCompleteEl.focus();this._autoCompleteAnim=this._anim({node:this._autoCompleteSuggestionsEl,duration:.25,easing:l.Easing.easeOutStrong})},bindUI:function(){a.superclass.bindUI.call(this);this._editorControlEl.on("keydown",this.handleTextInput,this);this._editorControlEl.on("keyup",this.haltEvent,this);this._editorControlEl.on("valuechange",this._displayAutoComplete,this);this._autoCompleteEl.on("click",this.handleAutoCompleteClick,this);this.after("selectedIndexChange",this.highlightSelection,this);this.before("destroy",function(){this._autoCompleteEl.remove(true)},this);this._autoCompleteAnim.after("end",this._cleanUpHideFlyoutAnim,this)},haltEvent:function(e){e.halt()},handleTextInput:function(e){var t=e.keyCode,a=this.get("selectedIndex"),i=this.get("autoCompleteMatches"),s;switch(t){case o:case c:if(-1===a)s=this._editorControlEl.get("value");else{var n=this._autoCompleteSuggestionsEl.all(".match").item(a);if(!n){e.halt();break}s=n.getData("data")}var r=p(s.split(","));r.forEach(this.addMember,this);e.halt();break;case u:case d:if(!i.length)return;t===u&&a>0?a--:t===d&&a<i.length-1&&a++;this.set("selectedIndex",a);e.halt();break;default:this.set("selectedIndex",-1);e.stopPropagation();break}},highlightSelection:function(e){var t=e.newVal,a,i;if(!this._autoCompleteSuggestionsEl)return;a=this._autoCompleteSuggestionsEl.all(".match");a.removeClass("selected");i=a.item(t);i&&i.addClass("selected")},handleAutoCompleteClick:function(e){if(e.target.hasClass("match")&&!e.target.hasClass("disabled")){e.stopPropagation();var t=e.target.getData("data");var a=this.currentMatches(t);if(a){this._displayAutoComplete();this.addMember(a)}this.resetControl();this._editorControlEl.focus();this._displayAutoComplete()}},resetControl:function(){this._editorControlEl.set("value","")},hide:function(){this._autoCompleteSuggestionsEl.hide()},alreadyHasMember:function(e){var t=this.get("data");return this.memberInSet(t,e+"")},currentMatches:function(a){var e=this.get("autoCompleteMatches");var t=l.Array.find(e,function(e,t){return e.value.toLowerCase()===a.toLowerCase()});return!!t&&t.value},addMember:function(e){var t=this.get("existingMembers"),a=this.get("allowOnlyExistingMembers");e=this.cleanMember(e);if(!l.Lang.isString(e)||0===e.length||this.alreadyHasMember(e)){this._displayAutoComplete();return}if(this.memberInSet(t,e)||!a){if(!a){t.push(e);this.set("existingMembers",t)}this._createMember(e);this.resetControl();this.set("selectedIndex",-1);this._displayAutoComplete()}},_createMember:function(e,t){l.Lang.isUndefined(t)&&(t=e);if(this.alreadyHasMember(e))return;this.fire("addMember",{newVal:e})},_highlightMatch:function(e,t){return l.Highlight.all(e,t)},_processSuggestions:function(s,n,e,r){var o=[];e.sort(i(n));l.Array.each(e,function(e,t){var a=this._highlightMatch(e,n),i;if(a===l.Escape.html(e)||o.length>=r||this.alreadyHasMember(e))return;i=l.Node.create('<div class="match">'+a+"</div>");i.setData("data",e);s.append(i);o.push({node:i,value:e})},this);s.setStyles({opacity:1,display:"block"});return o},_displayAutoComplete:function(){var e=this.cleanMember(this._editorControlEl.get("value")),t=this.get("existingMembers"),a=this.get("maxSuggestions"),i;if(a<1||t.length<1)return;this._autoCompleteSuggestionsEl.empty();i=this._processSuggestions(this._autoCompleteSuggestionsEl,e,t,a);this.set("autoCompleteMatches",i);this._autoCompleteAnim&&this._autoCompleteAnim.stop();i.length&&e?this._showAutoComplete():this._hideAutocomplete()},_showAutoComplete:function(){var e=this.get("autoCompleteMatches")||[];var t=e.length;var a=this._editorControlEl.get("offsetWidth");var i={display:"block",width:a+"px",opacity:1,left:this._editorControlEl.getX()-this._editorControlEl.get("docScrollX")+"px",top:this._editorControlEl.getY()+this._editorControlEl.get("offsetHeight")-this._editorControlEl.get("docScrollY")+"px"};if(s.isSubDesktop()){i.top=this._editorControlEl.get("docScrollY")+n.GRID_PX/2+"px";i.position="fixed"}this._autoCompleteEl.setStyles(i);this._autoCompleteAnim.setAttrs({to:{height:23*t+"px"}});this._editorControlEl.setStyles({borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px"});this._autoCompleteAnim.run()},_hideAutocomplete:function(){this._autoCompleteAnim.setAttrs({to:{height:0}});this._autoCompleteAnim.run()},_cleanUpHideFlyoutAnim:function(e){var t=this._autoCompleteAnim.get("node");var a=this.get("borderRadius");if(t&&t.get("clientHeight")<1){t.setStyle("display","none");this._editorControlEl.setStyles({borderBottomLeftRadius:a,borderBottomRightRadius:a})}},_anim:function(e){if(this.get("destroyed"))return;var t=new l.Anim(e);this._anims.add(t);return t},PARTIALS:{AC_TEMPLATE:'<div class="workflow-flyout tight"><div class="workflow-flyout-autocomplete clear"></div></div>'}},{CSS_PREFIX:"sqs-stringset-input-editor",TEMPLATE:'<div class="workflow-flyout tight"><div class="workflow-flyout-options clear"><div class="flyout-title"></div><input class="field-input" placeholder=""></div><div class="flyout-notch"></div></div>',ATTRS:{allowOnlyExistingMembers:{},autoCompleteMatches:{validator:l.Lang.isArray},placeholder:{value:null},borderRadius:{value:"3px"},canAddMembers:{},editorLabel:{value:""},data:{value:[]},emptyText:{value:""},existingMembers:{},flyoutNode:{getter:function(){return this.get("contentBox").one(".workflow-flyout")}},maxMemberChars:{},maxSuggestions:{value:6},selectedIndex:{value:-1,setter:function(e){var t=parseInt(e,10);return l.Lang.isNumber(t)&&t>-1?t:-1}},width:{value:250}}})},"1.0",{requires:["base","highlight","squarespace-dialog-field-2","squarespace-stringset-utils-mixin"]})},"./src/main/webapp/universal/scripts-v6/dialog-stringset-select-editor.js":function(e,t,a){var d=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./common/temp/node_modules/lodash/uniq.js");var n=a("./src/main/webapp/universal/src/shared/utils/commerce/analytics/trackProductEditor.ts");var r=a("./src/main/webapp/universal/src/shared/utils/commerce/analytics/types.ts");var o=a("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/ContentBrowserAPI.js").default;YUI.add("squarespace-dialog-stringset-select-editor",function(c){var i=13;c.namespace("Squarespace.DialogFields");var u=c.Squarespace.DialogFields.SelectEditor=c.Base.create("selectEditor",c.Squarespace.DialogField2,[c.WidgetChild,c.Squarespace.Mixins.StringSetUtils],{initalizer:function(e){this.publish("memberCreated",{emitFacade:true})},renderUI:function(){u.superclass.renderUI.call(this);var e=this.get("options");var t=this.get("contentBox");var i=this.get("data");var s=t.one(this._optionsSelector);var a=t.one(".workflow-flyout-options");var n=this.get("maxLength");var r=[];var o=this.get("editorLabel");t.one(".workflow-flyout").setStyle("width",this.get("width")+"px");c.Array.each(e,function(e,t){var a=this._createOptionNode(e,e,"data");this.memberInSet(i,e)&&a.addClass("active");s.append(a);r.push(a)},this);if(this.get("canAddMembers")){this._createOptionWrapper=this._createOptionNode(this.get("addMemberText"));this._createOptionWrapper.removeClass(this.get("memberClass"));this._createOptionWrapper.addClass("add");a.append(this._createOptionWrapper)}var l=d("Categories, comma separated");this._createInput=c.Node.create('<input class="flyout-option-add" placeholder="'+l+'">');c.Lang.isValue(n)&&this._createInput.setAttribute("maxlength",n);this.optionWrapEl=s;c.Lang.isString(o)&&o.length&&a.prepend(c.Node.create('<div class="flyout-title">'+o+"</div>"))},bindUI:function(){u.superclass.bindUI.call(this);var e=this.get("contentBox");this._createInput.on("blur",this._emptyCreateInput,this);this._createInput.on("keydown",this._addMemberOnEnter,this);this._createInput.on("keyup",this._haltEvent,this);this.after("optionsChange",this._appendMembers,this);this.after("memberCreated",this._emptyCreateInput,this);e.one(this._optionsSelector).on("click",this._handleOptionElClick,this);this._createOptionWrapper.on("click",this._handleCreateClick,this)},syncUI:function(){u.superclass.syncUI.call(this);var e=this.optionWrapEl.all("."+this.get("memberClass"));e.each(function(e){var t=this._memberExistsInData(e.getData("data"));e.toggleClass("active",t)},this)},_handleOptionElClick:function(e){var t=e.target;if(t.hasClass("flyout-option")&&t.hasClass(this.get("memberClass"))){var a=t.getData("data");var i=(t.hasClass("active")?"remove":"add")+"Member";this.fire(i,{newVal:a})}},_handleCreateClick:function(e){if(this._createOptionWrapper.contains(this._createInput))return;this._createOptionWrapper.empty();this._createOptionWrapper.addClass("active");this._createOptionWrapper.append(this._createInput);this._createInput.focus()},_emptyCreateInput:function(e){this.get("blurring")||this._resetCreateInput()},_addMemberOnEnter:function(e){var t=e.target.get("value");if(this.cleanMember(t).length<1||e.keyCode!==i)return;var a=s(t.split(",").map(this.cleanMember));a.forEach(function(e){this._memberExistsOnClient(e)?this.fire("addMember",{newVal:e}):""!==e.trim()&&this._createNewMember(e)},this)},_haltEvent:function(e){e.halt()},_appendMembers:function(e){var t=e.newVal,i=e.prevVal;c.Array.each(t,function(e,t){if(!this.memberInSet(i,e)){var a=this._createOptionNode(e,e,"data");a.addClass("active");this.optionWrapEl.append(a)}},this)},_toggleActiveMembersClass:function(t,a){var i=this.get("contentBox").all(this.get("memberClass"));i.each(function(e){i.get("text")===t&&e.toggleClass("active",a)})},_memberExistsInData:function(e){return this.memberInSet(this.get("data"),e)},_memberExistsOnClient:function(e){return this.memberInSet(this.get("options"),e)},_resetCreateInput:function(e){this.set("blurring",true);c.Lang.isUndefined(e)&&(e=this.get("addMemberText"));this._createOptionWrapper.contains(this._createInput)?this._createInput.set("value",""):this._createOptionWrapper.empty();this._createOptionWrapper.set("text",e);this._createOptionWrapper.addClass("add");this._createOptionWrapper.removeClass("active");this.set("blurring",false)},_createNewMember:function(e){var t=this.get("collectionId");this._resetCreateInput(d("Creating…"));this._createOptionWrapper.removeClass("add");this._createOptionWrapper.addClass("active");c.Data.post({url:this.get("addMemberUrl"),data:{collectionId:t,category:e},args:e,success:c.bind(this._createNewMemberSuccess,this,e),failure:function(e){false}},this)},_createNewMemberSuccess:function(e,t){var a=o.getCollection(t.collectionId);o.isProducts(a)&&n.trackCreateNewCategory(e,r.ProductEditor.YUI_EDITOR);var i=[];var s=t.collectionCategories;i=c.Array.map(s,function(e,t){return e.name});this._toggleActiveMembersClass(e,true);this.set("options",i);this.fire("addMember",{newVal:e});this.fire("memberCreated",e);this._createInput.set("value","");this.optionWrapEl.set("scrollTop",this.optionWrapEl.get("scrollHeight"))},_createOptionNode:function(e,t,a){var i='<div class="flyout-option">{memberName}</div>',s=c.Lang.sub(i,{memberName:e}),n=c.Node.create(s);if(!c.Lang.isUndefined(t)){a=a||"data";n.setData(a,t)}n.addClass(this.get("memberClass"));return n},_optionsSelector:".flyout-select-options"},{CSS_PREFIX:"sqs-stringset-select-editor",TEMPLATE:'<div class="workflow-flyout tight"><div class="workflow-flyout-options clear"><div class="flyout-select-options"></div></div><div class="flyout-notch"></div></div>',ATTRS:{addMemberUrl:{value:"/api/commondata/AddCategory"},options:{value:[],validator:c.Lang.isArray,getter:function(e){return e.concat([])}},blurring:{value:false},canAddMembers:{},collectionId:{},addMemberText:{},data:{},flyoutNode:{getter:function(){return this.get("contentBox").one(".workflow-flyout")}},memberClass:{},maxLength:{value:null},editorLabel:{},width:{value:250}}})},"1.0",{requires:["base","squarespace-dialog-field-2","squarespace-stringset-utils-mixin"]})},"./src/main/webapp/universal/scripts-v6/dialog-structured-input.js":function(e,t,a){var i=a("./common/temp/node_modules/react/index.js");var s=a("./common/temp/node_modules/react-dom/index.js");var n=a("./src/main/webapp/universal/src/apps/App/shared/components/StructuredInput.jsx");YUI.add("squarespace-dialog-structured-input",function(e){var t=e.namespace("Squarespace.DialogFields").StructuredInput=e.Base.create("structuredInputDialog",e.Squarespace.DialogField2,[e.WidgetParent],{onChange:function(e){this.set("data",e)},syncUI:function(){t.superclass.syncUI.call(this);s.render(i.createElement(n,{exampleTemplate:this.get("exampleTemplate"),onChange:this.onChange.bind(this),placeholder:this.get("placeholder"),value:this.get("data"),variables:this.get("variables")}),this.get("contentBox").getDOMNode())},destructor:function(){s.unmountComponentAtNode(this.get("contentBox").getDOMNode())}},{CSS_PREFIX:"sqs-structured-input-field",ATTRS:{data:{value:""},variables:{},placeholder:"",exampleTemplate:function(){}}})},"1.0",{requires:["base","node","squarespace-dialog-field-2"]})},"./src/main/webapp/universal/scripts-v6/dialog-tab.js":function(e,t){YUI.add("squarespace-dialog-tab",function(e){e.namespace("Squarespace.DialogFields");var t=e.namespace("Squarespace.DialogFields").TabButton=e.namespace("Squarespace.Widgets").TabButton=e.Base.create("tabButton",e.Squarespace.DialogFields.Button,[],{renderUI:function(){t.superclass.renderUI.call(this);this.get("boundingBox").removeClass("sqs-button")}},{CSS_PREFIX:"sqs-tab"})},"1.0",{requires:["base","node","squarespace-dialog-button"]})},"./src/main/webapp/universal/scripts-v6/dialog-variants-pricing-placeholder.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/universal/src/shared/utils/formatting/substituteString.js");YUI.add("squarespace-dialog-variants-pricing-placeholder",function(a){a.namespace("Squarespace");var t=a.namespace("Squarespace.DialogFields").VariantsPricingPlaceholder=a.Base.create("variantsPricingPlaceholder",a.Squarespace.DialogFields.PricingPlaceholder,[],{initializer:function(){},renderUI:function(){t.superclass.renderUI.call(this);this._setVariantCount()},syncUI:function(){t.superclass.syncUI.call(this);this._setVariantCount()},_setVariantCount:function(){var e=this.get("data.variants").length;0===e&&(e=1);var t=e<=1?"":a.Node.create(s('<span class="separator">—</span>'+i("{numVariants} variants"),{numVariants:e}));this.get("contentBox").one(".variant-count").setHTML(t)},_getHBTemplateContext:function(){var e=t.superclass._getHBTemplateContext.call(this);e.hasVariants=true;return e}},{CSS_PREFIX:"sqs-variants-pricing-placeholder",ATTRS:{strings:{value:{prompt:i("Edit")}}}})},"1.0",{requires:["squarespace-dialog-pricing-placeholder"]})},"./src/main/webapp/universal/scripts-v6/dialog-warning-banner.js":function(e,t){YUI.add("squarespace-dialog-warning-banner",function(t){t.namespace("Squarespace");var a=t.Squarespace.DialogFields.WarningBanner=t.Base.create("warningBanner",t.Squarespace.DialogField2,[],{initializer:function(e){this.set("strings.warn",this.get("connectWarn"))},bindUI:function(){a.superclass.bindUI.call(this);if(t.Lang.isValue(this.get("moreInfo"))){var e=this.get("moreInfo");this._tooltip=new t.Squarespace.ToolTip({target:e.target,title:e.title,body:e.body,clickToShow:true})}this.get("contentBox").delegate("click",function(){var e=this.get("linkAction");t.Lang.isFunction(e)&&e()},".link-action",this)},renderUI:function(){a.superclass.renderUI.call(this);var e=this.get("contentBox");e.append('<div class="warning-wrapper"><div class="warn-msg"><img src="/universal/images-v6/dialog/tiny-alert.png"><div class="message-text"></div></div>');e.one(".message-text").setContent(this.get("strings.warningMessage"))},destroy:function(){a.superclass.destroy.call(this);t.Lang.isValue(this._tooltip)&&this._tooltip.destroy()}},{CSS_PREFIX:"sqs-warning-banner",ATTRS:{moreInfo:{value:null},strings:{warningMessage:{value:null}},linkAction:{validator:t.Squarespace.AttrValidators.isFunctionOrNull}}})},"1.0",{requires:["squarespace-attr-validators","squarespace-dialog-field-2","squarespace-enum","squarespace-ui-base","squarespace-util"]})},"./src/main/webapp/universal/scripts-v6/dialog-zapier-service-connect.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/universal/src/shared/i18n/index.ts").pluralize;var n=a("./common/temp/node_modules/react/index.js");var r=a("./common/temp/node_modules/react-dom/index.js");var o=a("./src/main/webapp/universal/src/shared/components/FeatureGate/ConfirmationModal/index.jsx");var l=a("./src/main/webapp/universal/src/apps/App/shared/stores/BillingStatusStore.js");var c=a("./src/main/webapp/frontend/packages/enums/FormBackendConnectionState.js");YUI.add("squarespace-dialog-zapier-service-connect",function(e){e.namespace("Squarespace.DialogFields");var t=e.Squarespace.DialogFields.ZapierServiceConnect=e.Base.create("ZapierServiceConnect",e.Squarespace.DialogFields.ServiceConnect,[],{initializer:function(e){this.get("contentBox").addClass("sqs-service-connect-content");this.zapsConnected=e.getZapsConnected()},renderUI:function(){t.superclass.renderUI.call(this)},bindUI:function(){t.superclass.bindUI.call(this);this.after("connectionInProgressChange",function(){this.get("contentBox").setContent(this.renderTemplate())},this);this.get("contentBox").on("click",function(e){var t=this.get("data.connectionState");var a=e.target;t===c.CONNECTED||t===c.PENDING?a.hasClass("icon")&&this._disconnect():this._onConnect();e.stopPropagation()},this)},_onConnect:function(){if(l.isTrial()){this._showFeatureGateModal(this._openZapierWindow);return}var e=this.get("data");e.connectionState=c.PENDING;this.set("data",e);this.set("connectionInProgress",true)},_disconnect:function(){var e=this.get("data");e.url=null;e.connectionState=c.DISCONNECTED;this.set("data",e);this.set("connectionInProgress",false)},_openZapierWindow:function(){window.open("https://support.squarespace.com/hc/articles/360000641507/","_blank")},_showFeatureGateModal:function(e){var t=document.createElement("div");document.body.appendChild(t);var a=n.createElement(o,{isOpen:true,isTrial:true,onRequestClose:function(){r.unmountComponentAtNode(t);t.remove();e()}});r.render(a,t)},_getHBTemplateContext:function(){var e=this.get("data.connectionState")===c.CONNECTED;var t=this.get("connectionInProgress");return{title:i("Zapier"),connectedMessage:s({one:"{%n} Zap connected",other:"{%n} Zaps connected"},this.zapsConnected),pendingMessage:i("Awaiting Connection to Zapier"),clickToConnect:i("Click to connect"),connected:e,connectionInProgress:t}}},{CSS_PREFIX:"sqs-zapier-service-connect",HANDLEBARS_TEMPLATE:"dialog-zapier-service-connect.html"})},"1.0",{requires:["base","squarespace-dialog-zapier-service-connect-template","squarespace-dialog-service-connect","squarespace-dialog-text","squarespace-ui-base","squarespace-util","squarespace-widgets-alert"]})},"./src/main/webapp/universal/scripts-v6/dialog/dialog-check.js":function(e,t){YUI.add("squarespace-dialog-check",function(a){a.namespace("Squarespace.DialogFields");var t=a.Squarespace.DialogFields.Check=a.Base.create("check",a.Squarespace.DialogField2,[],{initializer:function(e){!a.Lang.isValue(e.data)&&a.Lang.isValue(e.defaultValue)&&this.set("data",e.defaultValue)},bindUI:function(){t.superclass.bindUI.call(this);var e=this.get("boundingBox");a.Squarespace.Utils.onPointerAction(e,this._createEventHandler(this._toggleActive));e.after("mousedown",this._createEventHandler(),this)},syncUI:function(){t.superclass.syncUI.call(this);this.get("contentBox").empty().setHTML(this.renderTemplate());a.Lang.isValue(this.get("strings.description"))?this.get("boundingBox").addClass("has-description"):this.get("boundingBox").addClass("has-no-description")},_createEventHandler:function(t){return a.bind(function(e){this.get("haltClick")&&e.halt();t&&t.call(this,e)},this)},_toggleActive:function(e){if(this.get("disabled"))return;this.set("data",!this.get("data"),{click:e})}},{CSS_PREFIX:"sqs-check",HANDLEBARS_TEMPLATE:"dialog-check.html",ATTRS:{data:{value:false},haltClick:{value:true},testAttribute:{value:"check"}}})},"1.0",{requires:["base","event-tap","squarespace-dialog-check-template","squarespace-dialog-field-2","squarespace-util"]})},"./src/main/webapp/universal/scripts-v6/dialog/dialog-code.js":function(e,t,i){var o=i("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var l=i("./src/main/webapp/universal/src/shared/utils/evaluateJsonTemplate.js");YUI.add("squarespace-dialog-code",function(s){var n=i("./src/main/webapp/universal/src/shared/components/BaseCodeMirror.js");var r=s.namespace("Squarespace.DialogFields").Code=s.Base.create("codeEditor",s.Squarespace.DialogField2,[],{initializer:function(e){var t;if(s.Lang.isObject(e)){t=this.get("editorConfig");this.set("editorConfig",s.merge(t,e))}this.after("dataChange",function(e){"setInitialData"===e.source&&this._editor.setValue(e.newVal)})},renderUI:function(){r.superclass.renderUI.call(this);var e=this.get("contentBox");var t=e.one(".code-editor-seed");var a=this.get("editorConfig");var i=this.get("data");s.Lang.isString(i)||(i="");this._editor=n.fromTextArea(t.getDOMNode(),a);this._editor.setValue(i)},bindUI:function(){r.superclass.bindUI.call(this);this._editor.on("change",s.bind(this._updateData,this));this.on("visibleChange",this._refreshEditor,this)},destructor:function(){if(this._editor){this._editor.toTextArea();this._editor=null}},_refreshEditor:function(e){this._editor&&s.Lang.isFunction(this._editor.refresh)&&this._editor.refresh()},_updateData:function(e){var t=s.Lang.trim(this._editor.getValue());this.set("data",t);this.clearError()},loadValue:function(e){this.set("data",e);this._editor.setValue(e)}},{CSS_PREFIX:"sqs-code",TEMPLATE:'<textarea class="code-editor-seed"></textarea>',ATTRS:{data:{validator:s.Lang.isString},editorConfig:{value:{mode:"htmlmixed",theme:"squarespace-light",lineNumbers:true,indentUnit:2,tabMode:"indent",lineWrapping:true,onChange:s.bind(this._updateData,this),autoCloseTags:true,matchTags:true}},visible:{value:true}}});var a=s.namespace("Squarespace.DialogFields").HtmlCode=s.Base.create("htmlCode",s.Squarespace.DialogFields.Code,[],{isValid:function(){var e=s.Lang.trim(this.get("data"));return""===e||s.Lang.isValue(e)},_getErrors:function(){if(!this.isValid())return[this.get("strings.htmlError")];return[]},loadValue:function(e){this.set("data",e);this._editor.setValue(e)},didDataChange:function(){var e=a.superclass.didDataChange.call(this);var t=this._initialData;s.Lang.isValue(t)||""!==this.get("data")||(e=false);return e}},{CSS_PREFIX:"sqs-html-code",ATTRS:{strings:{value:{htmlError:o("Invalid HTML")}},data:{value:"",validator:s.Lang.isString}}});s.namespace("Squarespace.DialogFields").UrlMappings=s.Base.create("urlMappings",s.Squarespace.DialogFields.Code,[],{isValid:function(){return true}},{CSS_PREFIX:"sqs-url-mapping",ATTRS:{}});s.namespace("Squarespace.DialogFields").jsonTemplateCode=s.Base.create("urlMappings",s.Squarespace.DialogFields.Code,[],{_getErrors:function(){var e=this.get("data");var t=this.get("sampleData");try{l(e,t);return[]}catch(e){return[e.name+": "+e.message]}}},{CSS_PREFIX:"sqs-json-template-code",ATTRS:{strings:{},height:{readOnly:true,value:{}},sampleData:{value:{}}}})},"1.0",{requires:["base","node","squarespace-dialog-field-2"]})},"./src/main/webapp/universal/scripts-v6/dialog/dialog-connected-accounts.js":function(e,t,a){var i=a("./common/temp/node_modules/react/index.js");var s=a("./common/temp/node_modules/react-dom/index.js");var n=a("./src/main/webapp/universal/src/apps/App/screens/Settings/screens/SocialLinks/SocialIconAccounts.js");YUI.add("squarespace-dialog-connected-accounts",function(e){e.namespace("Squarespace.DialogFields");e.Squarespace.DialogFields.ConnectedAccounts=e.Base.create("connected-accounts",e.Squarespace.DialogField2,[],{initializer:function(){this.reactElement=i.createElement(n,{trackingLocation:"social_links_block_editor"})},destructor:function(){s.unmountComponentAtNode(this.get("contentBox").getDOMNode());this.reactInstance=null;this.reactElement=null},renderUI:function(){this.get("boundingBox").setStyle("margin",0);this.reactInstance=s.render(this.reactElement,this.get("contentBox").getDOMNode())}},{CSS_PREFIX:"sqs-connected-accounts",ATTRS:{testAttribute:{value:"connected-accounts"}}})},"1.0",{requires:["base","squarespace-dialog-field-2"]})},"./src/main/webapp/universal/scripts-v6/dialog/dialog-content-item-grid.js":function(e,t,a){var n=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var r=a("./src/main/webapp/frontend/packages/enums/CollectionTypes.js");YUI.add("squarespace-dialog-content-item-grid",function(i){i.namespace("Squarespace");var s=i.Squarespace.DialogFields.ContentItemGrid=i.Base.create("contentItemGridField",i.Squarespace.DialogField2,[i.WidgetParent],{initializer:function(e){this._initializeDataAndGrid();this.after("dataChange",this._initializeDataAndGrid,this);this._edited=false},destructor:function(){this._loadingTimer&&this._loadingTimer.cancel();this._contentItemGrid&&this._contentItemGrid.destroy()},renderUI:function(){s.superclass.renderUI.call(this);var e=this._loadingEl=i.Node.create('<div class="loading-state"></div>');var t=this._loadingSpinner=new i.Squarespace.Spinner({size:50,color:"dark",render:e});t.spin();this.get("contentBox").append(e);this.get("hasFullScreenToggle")&&(this._nodeExpander=this.get("contentBox").plug(i.Squarespace.Plugins.NodeExpander).NodeExpander)},bindUI:function(){s.superclass.bindUI.call(this);this.after("dataLoadedChange",this.syncUI,this);this.on("dataChange",function(e){this._contentItemGrid.set("model",e.newVal)},this);this.on("uploadPreflightChange",function(e){this._contentItemGrid.set("uploadPreflight",e.newVal)});if(this.get("hasFullScreenToggle")){var t=this.get("dialog");if(i.Lang.isValue(t)){var a="sqs-node-expander-active";this._nodeExpander.on("expand-start",function(e){t.el.addClass(a);t.overlayEl.addClass(a)},this);this._nodeExpander.on("contract-end",function(e){t.el.removeClass(a);t.overlayEl.removeClass(a)},this)}this._nodeExpander.on("expand-end",function(){this._contentItemGrid.set("imageSize",this.get("imageSize")*(4/3));this._contentItemGrid.requestImageRenderingSync()},this);this._nodeExpander.on("contract-end",function(){this._contentItemGrid.set("imageSize",this.get("imageSize"));this._contentItemGrid.requestImageRenderingSync()},this)}},syncUI:function(){s.superclass.syncUI.call(this);this.get("dataLoaded")?this._setLoadedState():this._setLoadingState()},didDataChange:function(){return this._edited},show:function(){s.superclass.show.call(this);this.syncUI()},_initializeDataAndGrid:function(){this.set("dataLoaded",false);var t=this.get("data");var e={};var a=this.get("pageSize");i.Lang.isValue(a)&&(e.limit=a);if(t.isNew()){this._buildContentItemGrid();this.set("dataLoaded",true)}else if(t instanceof i.Squarespace.Models.ContentItem){this.get("acceptTypes")||this.set("acceptTypes",["image"]);this._buildContentItemGrid();this.set("dataLoaded",true)}else t.items.load(e,i.bind(function(e){e&&new i.Squarespace.Widgets.Alert({"strings.title":n("Missing Content"),"strings.message":n("We could not locate this content.")});this.get("acceptTypes")||this.set("acceptTypes",t.getTemplateConfiguration().get("acceptTypes"));this._buildContentItemGrid();this.set("dataLoaded",true)},this))},_buildContentItemGrid:function(){var e=this._contentItemGrid;e&&e.destroy();this._contentItemGrid=new i.Squarespace.ContentItemGrid({model:this.get("data"),collectionConfiguration:this.get("collectionConfiguration")||new i.Model({acceptTypes:this.get("acceptTypes")}),itemEditorOptions:{variant:this.get("itemEditorVariant"),parentDialog:this.get("dialog"),anchorToImageWidget:true,defaultWorkflowState:i.Squarespace.WorkflowStates.PUBLISHED},selectorAnchorNode:this.get("selectorAnchorNode"),imageSize:this.get("imageSize"),minMargin:10,showEmptyState:false,dragRegion:this.get("contentBox"),uploadPreflight:this.get("uploadPreflight"),contentItemImageOptions:this.get("contentItemImageOptions"),showAddIcon:this.get("showAddIcon"),loadByViewport:false,showActionTray:this.get("showActionTray")});this._registerEvent(this._contentItemGrid.after(["addChild","addChildComplete","removeChild","childEdited"],function(){this.fire("edited")},this))},_setLoadedState:function(){this._loadingTimer&&this._loadingTimer.cancel();this.get("boundingBox").removeClass("content-loading");var e=this._contentItemGrid;e.get("rendered")?e.syncUI():e.render(this.get("contentBox"))},_setLoadingState:function(){this._loadingTimer&&this._loadingTimer.cancel();this._loadingTimer=i.later(500,this,function(){this._loadingEl.setStyle("marginTop",this.get("contentBox").get("offsetHeight")/2-this._loadingSpinner.get("size")/2);this.get("boundingBox").addClass("content-loading")})}},{CSS_PREFIX:"sqs-content-item-grid-field",ASYNC_DATA:true,ATTRS:{data:{getter:function(e){if(!(e instanceof i.Squarespace.Models.ContentCollection||e instanceof i.Squarespace.Models.ContentItem)){var t=n("Transient Gallery {transientGalleryId}",{transientGalleryId:i.Squarespace.Utils.getGuid()});return new i.Squarespace.Models.ContentCollection({typeName:"transient-gallery",type:r.GALLERY_BLOCK,ordering:i.Squarespace.CollectionOrdering.USER,title:t,navigationTitle:t,enabled:true,urlId:i.Squarespace.Utils.getGuid()})}return e},validator:function(e){return e instanceof i.Squarespace.Models.ContentCollection||e instanceof i.Squarespace.Models.ContentItem}},dataLoaded:{value:false},acceptTypes:{},collectionConfiguration:{},contentItemImageOptions:{value:{showActionOverlay:true,actionOverlayButtons:[i.Squarespace.ActionOverlayButtons.EDIT_IMAGE,i.Squarespace.ActionOverlayButtons.REMOVE_IMAGE]}},itemEditorVariant:{valueFn:function(){return i.Squarespace.ContentItemEditorVariants.MINIMAL}},selectorAnchorNode:{valueFn:function(){return this.get("contentBox")}},cloneInitialData:{value:false},uploadPreflight:{},showAddIcon:{value:false},imageSize:{value:105},pageSize:{value:null},hasFullScreenToggle:{value:false},showActionTray:{value:true},type:{}}})},"1.0",{requires:["base","squarespace-content-item-grid","squarespace-content-item-types-editor","squarespace-dialog-field-2","squarespace-models-content-collection","squarespace-models-content-item","squarespace-plugin-actionoverlay","squarespace-plugin-node-expander","squarespace-spinner","squarespace-util","squarespace-widgets-alert","widget-parent"]})},"./src/main/webapp/universal/scripts-v6/dialog/dialog-content-selector.js":function(e,t,a){var l=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var c=a("./src/main/webapp/frontend/packages/enums/CollectionTypes.js");var u=a("./src/main/webapp/universal/src/shared/utils/alphabetize.js");YUI.add("squarespace-dialog-content-selector",function(o){o.namespace("Squarespace.DialogFields");var t=o.Squarespace.DialogFields.ContentSelector=o.Base.create("contentSelector",o.Squarespace.DialogField2,[],{initializer:function(e){o.Lang.isValue(e.data)&&this.set("selectedContent",e.data);var t=o.Lang.isValue(this.get("collectionGroups"));this._collectionGroupsCreated=t;t||(0===o.Squarespace.ContentCollectionCache.size()?o.Squarespace.ContentCollectionCache.load(o.bind(function(){this._createCollectionGroups();this.syncUI()},this)):this._createCollectionGroups())},bindUI:function(){var e=this.get("contentBox");e.delegate("click",function(e){e.halt();e.target.hasClass("dropdown-button")?e.currentTarget.ancestor(".collection-wrapper").toggleClass("open"):this._selectCollection(e)},".collection",this);e.delegate("change",this._selectCategoryOrTag,"select",this)},syncUI:function(){t.superclass.syncUI.call(this);this._collectionGroupsCreated?this._setLoadedState():this._showSpinner();this.get("contentBox").toggleClass("titles-hidden",!this.get("showGroupTitles"))},clearSelected:function(){var e=this._selectedCollectionWrapper;if(e){e.removeClass("selected");var t=e.one(".collection-filter-wrapper");if(t){t.remove();e.all("select").set("value","None")}}},_showSpinner:function(){var e=o.Node.create('<div class="loading"><div class="spinner"></div><div class="text">'+l("Loading…")+"</div></div>");this.get("contentBox").empty().setHTML(e);new o.Squarespace.Spinner({size:20,color:"light",render:e.one(".spinner")}).spin()},_setLoadedState:function(){var e=this.get("contentBox");var t=this.get("collectionGroups");var a=this.get("selectedContent");var i={collectionGroups:t,strings:{emptyMessage:l("There are no collections."),chooseCategory:l("Choose Category"),chooseTag:l("Choose Tag"),none:l("None")}};o.Lang.isArray(a)&&a.length>0&&a[0].filter&&(i.filter=a[0].filter);e.empty().setHTML(o.Squarespace.UITemplates.render("dialog-content-selector.html",i));e.all(".collection-wrapper").each(function(e){e.hasClass("selected")&&(this._selectedCollectionWrapper=e)},this);e.all(".dropdown").each(function(e){var t=e.one(".categories");var a=e.one(".tags");t&&a?e.addClass("content-stats"):t?e.addClass("categories"):a&&e.addClass("tags")},this)},_selectCollection:function(e){var t=e.currentTarget.ancestor(".collection-wrapper");this.clearSelected();t.addClass("selected");this._selectedCollectionWrapper=t;this.set("data",{urlId:t.getAttribute("data-url-id"),filter:null,id:t.getAttribute("data-collection-id")})},_selectCategoryOrTag:function(e){var t=e.currentTarget;var a=t.ancestor(".collection-wrapper");var i=t.ancestor(".categories")?"category":"tag";var s=t.get("value");var n=("tag"===i?"#":"")+s;this.clearSelected();if("none-selected"!==s){a.one(".collection-title").insert(o.Node.create('<span class="collection-filter-wrapper"><span class="collection-filter">'+n+"</span></span>"),"after");a.addClass("selected");a.addClass("has-content-stat-filter");a.removeClass("open")}this._selectedCollectionWrapper=a;this.set("data",{urlId:a.getAttribute("data-url-id"),filter:"none-selected"===s?null:{type:i,name:s},id:a.getAttribute("data-collection-id")})},_getCollections:function(e){var t=o.merge({},this.get("collectionFilter"));if(t){for(var a in t){if(!o.Object.hasKey(e,a))continue;var i=o.Lang.isArray(t[a]);if(i&&-1===o.Array.indexOf(t[a],e[a])||!i&&e[a]!==t[a])return[];i&&(t[a]=e[a])}e=o.merge(e,t)}return o.Squarespace.ContentCollectionUtils.filterCollections(e,this.get("excludeCollectionIds"))},_createCollectionGroups:function(){var e=this._getCollections({collectionType:c.COLLECTION_TYPE_GENERIC,folder:false});var t=this._getCollections({collectionType:c.COLLECTION_TYPE_PAGE,folder:false});var a=this._getCollections({collectionType:c.SPLASH_PAGE,folder:false});var i=this._getCollections({collectionType:c.PRODUCTS,folder:false});var s=this._getCollections({collectionType:c.TEMPLATE_PAGE,folder:false});var n=this._getCollections({collectionType:c.COLLECTION_TYPE_GENERIC,index:true});var r=o.Squarespace.ContentCollectionUtils.groupCollectionsByTypeName(e);t.length>0&&r.push({title:l("Page"),collections:t});a.length>0&&r.push({title:l("Cover Page"),collections:a});i.length>0&&r.push({title:l("Product"),collections:i});s.length>0&&r.push({title:l("Template Pages"),collections:s});n.length>0&&r.push({title:l("Index"),collections:n});this.set("collectionGroups",r);this._collectionGroupsCreated=true},_setStatOnCollectionObject:function(e,t,s,a){var n=[];o.Array.each(t,function(e){var a=e.name;var i={name:a};s&&o.Lang.isArray(s)&&o.Array.each(s,function(e,t){a===o.Object.getValue(e,["filter","name"])&&(i.selected=true)});n.push(i)},this);a[e]=n},_setSelectedOnCollectionObject:function(e,a){o.Array.each(e,function(e,t){a.id===e.id&&(o.Object.hasKey(e,"urlId")&&e.urlId!==a.urlId||(a.selected=true));e.filter&&(a.filter=e.filter)})}},{CSS_PREFIX:"sqs-content-selector",ASYNC_DATA:true,ATTRS:{collectionGroups:{setter:function(e){var r=this.get("selectedContent");o.Array.each(e,function(n){n.collectionObjects=[];o.Array.each(n.collections,function(t){var e=[];var a=[];var i=o.Squarespace.ContentStatsCache.filter(function(e){return t.get("id")===e.get("collectionId")},this)[0];if(i){e=u(i.get("categoryList"),{key:"name"});a=u(i.get("tagList"),{key:"name"})}var s={className:o.Squarespace.ContentCollectionUtils.getIconClassNames(t),id:t.get("id"),title:t.get("navigationTitle"),urlId:t.get("urlId")};if(this.get("showCollectionTagsAndCategories")){s.dropdown=0!==e.length||0!==a.length;this._setStatOnCollectionObject("categories",e,r,s);this._setStatOnCollectionObject("tags",a,r,s)}r&&this._setSelectedOnCollectionObject(r,s);n.collectionObjects.push(s)},this);try{var e=u(n.collectionObjects,{key:"title"});n.collectionObjects=e}catch(e){false}},this);this._collectionGroupsCreated=true;if(o.Lang.isArray(e))try{var t=u(e,{key:"title"});return t}catch(e){false}return e},value:null},collectionFilter:{value:null},data:{getter:function(e){var t=this.get("dataMapper"),a=this.get("selectedContent");if(o.Lang.isFunction(t))return t(a);return a},setter:function(e){this.set("selectedContent",e);return e}},selectedContent:{setter:function(e){if(o.Lang.isArray(e))return o.Array.map(e,t.mapToObject);if(o.Lang.isValue(e))return[t.mapToObject.apply(null,arguments)];return e}},dataMapper:{value:function(e){return e},validator:o.Lang.isFunction},excludeCollectionIds:{value:[]},showCollectionTagsAndCategories:{value:true},showGroupTitles:{value:true}},mapToObject:function(e,t,a){var i={};if(o.Lang.isObject(e)){if(!o.instanceOf(e,o.Model))return e;i.id=e.get("id")}else o.Lang.isValue(e)&&(i.id=e);o.Lang.isObject(t)&&!o.Lang.isArray(t)&&(i.filter=t);o.Lang.isString(a)&&(i.urlId=a);return i}});var a=function(e){if(o.Lang.isArray(e)){if(e.length<1)return"";e=e[0]}var t=o.Lang.isObject(e);if(t&&o.Object.hasKey(e,"id"))return e.id;if(t&&o.instanceOf(e,o.Model))return e.get("id");return e};o.Squarespace.DialogFields.ContentIdSelector=o.Base.create("contentIdSelector",o.Squarespace.DialogFields.ContentSelector,[],{},{ATTRS:{dataMapper:{value:a}}});o.Squarespace.DialogFields.ContentIdArraySelector=o.Base.create("contentIdArraySelector",o.Squarespace.DialogFields.ContentSelector,[],{},{ATTRS:{dataMapper:{value:function(e){if(o.Lang.isArray(e))return o.Array.map(e,a);return[a(e)]}}}})},"1.0",{requires:["base","squarespace-animations","squarespace-content-collection-utils","squarespace-dialog","squarespace-dialog-content-selector-template","squarespace-dialog-field-2","squarespace-hb-compare","squarespace-models-content-collection","squarespace-models-content-stats","squarespace-spinner","squarespace-ui-templates"]})},"./src/main/webapp/universal/scripts-v6/dialog/dialog-create-link.js":function(e,t,a){var d=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var i=a("./src/main/webapp/universal/src/shared/utils/UrlUtils.js");YUI.add("squarespace-dialog-create-link",function(u){u.namespace("Squarespace.DialogFields");var e=u.Squarespace.DialogFields.CreateLink=u.Base.create("createLink",u.Squarespace.DialogField2,[],{initializer:function(){this.get("strings.placeholderText")||this.set("strings.placeholderText",d("Click to add URL…"));this._edited=false},destructor:function(){this._removeBlurHandler();this._editingWindow=null;this._editingWindowTabs=null;this._clearButton=null;this._linkTextField=null;this._placeholder=null},renderUI:function(){e.superclass.renderUI.call(this);u.Squarespace.ContentStatsCache.isEmpty()?u.Squarespace.ContentStatsCache.load(this._registerCallback(function(){this._verifyLink(u.bind(this._customRender,this))},this)):this._verifyLink(u.bind(this._customRender,this))},getErrors:function(){var e=this.get("data.url");if(this._isExternalTabActive()&&!!e&&e.length>0&&!i.isSlash(e)&&!i.isProperUrl(e)&&!i.isIP(e)&&!i.isAnchor(e)&&!i.isTel(e)&&!i.isSms(e)&&!i.isMailto(e)&&!i.isJavascript(e)&&!i.isFtp(e)&&!i.isInternalUrl(e))return[d("Please enter a valid URL")];return[]},_isExternalTabActive:function(){return"external"===this._editingWindowTabs.getActiveChildId()},_customRender:function(e){var t=this.get("width");t&&this.get("contentBox").setStyles({width:t});var a=this.get("contentBox");this.get("condensed")&&a.addClass("condensed");this.get("strings.title")&&a.append(u.Node.create('<div class="title">'+this.get("strings.title")+"</div>"));this.get("withLinkText")&&(this._linkTextField=new u.Squarespace.DialogFields.Text({name:"text","strings.title":d("Link Text"),className:"thin",render:a,data:this.get("data.text")}));this._editingWindow=u.Node.create('<div class="editing-window"></div>');this.get("showPlaceholder")||this._editingWindow.addClass("without-placeholder");a.append(this._editingWindow);this._editingWindowTabs=this._createTabs(e);this._editingWindowTabs.render(this._editingWindow);if(this.get("showPlaceholder")){var i=this.get("data.url");this._placeholder=u.Node.create('<div class="placeholder"><div class="link-icon"></div><div class="inner">'+u.Escape.html(i||this.get("strings.placeholderText"))+"</div></div>");this._set("errorFlyoutAnchor",this._placeholder);this._clearButton=u.Node.create('<div class="clear'+(i?"":" hidden")+'"></div>');this._placeholder.append(this._clearButton);this._editingWindow.insert(this._placeholder,"before");this._editingWindow.addClass("hidden");this._editingWindow.setStyle("height",0);this._editingWindow.one(".sqs-tab-view").setStyle("opacity",0)}else{this._editingWindow.setStyle("height",this._getOpenWindowHeight());this._isExternalTabActive()&&this._editingWindow.one(".external-link-tab input").focus();this._set("errorFlyoutAnchor",this._editingWindow)}this.fire("rendered");this._customBindUI()},_customBindUI:function(){this.get("withLinkText")&&this._linkTextField.after("dataChange",function(e){var t=this.get("data")||{};t.text=e.newVal;this.set("data",t)},this);if(this.get("showPlaceholder")){this._placeholder.on("click",function(e){if(e.target.hasClass("clear"))this._clear();else{e.halt();this._placeholder.hasClass("open")?this._closeEditingWindow():this._openEditingWindow()}},this);this.after("dataChange",this._setPlaceholderText,this)}this._editingWindowTabs.before("tab-switch-requested",function(e){if(this._editingWindowTabs.getActiveChildId()==e.tabId)return;if(!this._placeholder||this._placeholder.hasClass("open")){this._editingWindow.one(".sqs-tab-view-children").setStyle("opacity",0);this._editingWindow.activeAnim&&this._editingWindow.activeAnim.stop();var t=this._editingWindow.anim({height:this._getOpenWindowHeight(e.tabId)},{duration:.2,end:function(){this._editingWindow.one(".sqs-tab-view-children").anim({opacity:1},{duration:.1}).run();this._isExternalTabActive()&&this._editingWindow.one(".external-link-tab input").focus()},context:this});t.on("tween",function(){this.fire("animating")},this);t.run()}},this);this.get("required")&&this.after("dataChange",function(e){this.hideError()},this)},didDataChange:function(){return this._edited},isEmpty:function(){var e=this.get("data.url");return!e||""===e},_verifyLink:function(i){var e=this._getLinkType(this.get("data.url"));if("external"===e)i();else if("files"===e){var t=this._getSelectedFile();u.Data.get({url:u.Squarespace.API_ROOT+"content-items",data:{recordType:u.Squarespace.RecordType.ATTACHMENT,urlId:t},success:function(e){var t=u.Object.getValue(e,["results"]);var a=u.Lang.isArray(t)&&t.length>0;i(!a)},failure:function(e){i()}},this)}else if("content"===e){var a=this._getSelectedContent();var s=u.Array.find(u.Squarespace.ContentCollectionCache.toArray(),function(e){return e.get("urlId")==a.urlId});if(s)if(a.filter){var n=a.filter;var r=false;var o=u.Squarespace.ContentStatsCache.getByCollectionId(s.get("id"));o&&"category"===n.type?u.Array.each(o.getCategoriesAsStringArray(),function(e){e===n.name&&(r=true)}):o&&u.Array.each(o.getTagsAsStringArray(),function(e){e===n.name&&(r=true)});r?i():i(true)}else i();else i(true)}},_createTabs:function(e){var t=this._getLinkType(this.get("data.url"));var a=this.get("data.url");var i=this.get("data.newWindow");var s=this.get("disableNewWindow");var n;var r;e&&(t="external");"files"===t?n=this._getSelectedFile():"content"===t&&(r=this._getSelectedContent());var o={external:{label:d("External"),id:"external",ctor:u.Squarespace.Views.ExternalLinkTab,config:{onDataChange:u.bind(function(e,t,a){var i=null;u.Lang.isValue(e)&&""!==e&&(i={url:e,newWindow:t,text:this.get("data.text")});this.set("data",i);if(a){this.get("showPlaceholder")&&this._closeEditingWindow();this.fire("close")}this._edited=true},this),linkUrl:"external"===t?a:null,newWindow:i,disableNewWindow:s,className:"light"===this.get("className")?"dark":"light"}},files:{label:d("Files"),id:"files",ctor:u.Squarespace.Views.FileManagerTab,config:{onDataChange:u.bind(function(e,t){this.set("data",{url:e?"/s/"+e:null,newWindow:t,text:this.get("data.text")});this._edited=true},this),selectedFile:"files"==t?n:null,newWindow:i,disableNewWindow:s}},content:{label:d("Content"),id:"content",ctor:u.Squarespace.Views.ExistingContentLinkTab,config:{onDataChange:u.bind(function(e,t,a){var i="/"+e.urlId;e.filter&&(i=i+"?"+e.filter.type+"="+encodeURIComponent(e.filter.name));this.set("data",{url:i,newWindow:t,text:this.get("data.text")});a||this.fire("close");this._edited=true},this),selectedContent:"content"==t?r:null,newWindow:i,disableNewWindow:s}}};var l=this.get("renderTabs");var c=[];u.Object.each(l,function(e,t){e&&c.push(o[t])});return new u.Squarespace.Widgets.TabView({widgets:c,initialTabId:t})},_createBlurHandler:function(){this._blurHandler=u.one("body").on("click",function(e){var t=this.get("contentBox");t.contains(e.target)||this._closeEditingWindow()},this);this._registerEvent(this._blurHandler)},_removeBlurHandler:function(){if(this._blurHandler){this._blurHandler.detach();this._blurHandler=null}},_openEditingWindow:function(){this.hideError();this._editingWindow.activeAnim&&this._editingWindow.activeAnim.stop();this._editingWindow.anim({height:this._getOpenWindowHeight()},{duration:.2,start:function(){this._placeholder.addClass("open");this._editingWindow.removeClass("hidden")},end:function(){this._createBlurHandler();this._editingWindow.one(".sqs-tab-view").anim({opacity:1},{duration:.1}).run();this._isExternalTabActive()&&this._editingWindow.one(".external-link-tab input").focus()},context:this}).run()},_closeEditingWindow:function(e){this._removeBlurHandler();this._editingWindow.activeAnim&&this._editingWindow.activeAnim.stop();this._editingWindow.one(".sqs-tab-view").anim({opacity:0},{duration:.1,start:function(){this._editingWindow.anim({height:0},{duration:.2,end:function(){this._placeholder&&this._placeholder.removeClass("open");this._editingWindow&&this._editingWindow.addClass("hidden");e&&this._editingWindowTabs&&this._editingWindowTabs.switchTabs("external")},context:this}).run();this.get("data.url")&&this._clearButton.removeClass("hidden")},context:this}).run()},_clear:function(){this.set("data",null);this._clearButton.addClass("hidden");if(this._placeholder.hasClass("open"))this._closeEditingWindow(true);else{this._setPlaceholderText();this._editingWindowTabs.switchTabs("external")}u.Object.each(this._editingWindowTabs.getChildWidgets(),function(e){e.reset()},this)},_setPlaceholderText:function(){var e=this.get("data.url");if(e&&"http://"===e.substring(0,7)){var t=e.substring(7);var a="http://";var i="https://";(t.length>0&&t.length<7||"https:/"===t)&&(t!==a.substring(0,t.length)&&t!==i.substring(0,t.length)||(e=t))}var s=e||this.get("strings.placeholderText");this._placeholder.one(".inner").setHTML(u.Escape.html(s))},_getLinkType:function(e){if(e&&"/"===e.charAt(0)){if("/s/"===e.substring(0,3))return"files";return"content"}return"external"},_getSelectedFile:function(){var e=this.get("data.url").split("/");return e[e.length-1]},_getSelectedContent:function(){var e=this.get("data.url").split("?");var t;var a={urlId:e[0].substring(1)};var i=e[1];if(i){t=u.QueryString.parse(i);t.category?a.filter={type:"category",name:t.category}:t.tag&&(a.filter={type:"tag",name:t.tag})}return a},_getOpenWindowHeight:function(e){var t=e||this._editingWindowTabs.getActiveChildId();var a=this.get("disableNewWindow");var i=this.get("condensed");var s;var n;switch(t){case"external":s=n=a?92:116;break;case"files":s=a?318:342;n=a?252:276;break;case"content":s=a?318:342;n=a?232:256;break}return i?n:s}},{CSS_PREFIX:"sqs-create-link",ATTRS:{data:{setter:function(e){if(u.Lang.isObject(e)){var t=this._getLinkType(e.url);var a=this.get("renderTabs");a[t]||(e.url="")}return e}},condensed:{value:false,validator:u.Squarespace.AttrValidators.isBoolean},disableNewWindow:{value:false,validator:u.Squarespace.AttrValidators.isBoolean},renderTabs:{value:{external:true,files:true,content:true}},showPlaceholder:{value:true,validator:u.Squarespace.AttrValidators.isBoolean},withLinkText:{value:false,validator:u.Squarespace.AttrValidators.isBoolean}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-dialog","squarespace-dialog-field-2","squarespace-dialog-text","squarespace-existing-content-link-tab","squarespace-external-link-tab","squarespace-file-manager-tab","squarespace-models-content-collection","squarespace-models-content-stats","squarespace-tab-view"]})},"./src/main/webapp/universal/scripts-v6/dialog/dialog-data-table.js":function(e,t){YUI.add("squarespace-dialog-data-table",function(d){var f=4;var t=d.namespace("Squarespace.DialogFields").DataTable=d.Base.create("data-table",d.Squarespace.DialogField2,[],{initializer:function(){this._table=null;this._changed=false;this._dragHandles=[];this._dropTargets=[]},destructor:function(){this._removeDragDrop();this._table&&this._table.remove(true);this._table=null},renderUI:function(){t.superclass.renderUI.call(this);this._table=d.Node.create('<div class="table-wrapper"></div>');var e=this.get("strings").title;e&&this.get("contentBox").append('<div class="title">'+e+"</div>");this.get("contentBox").append(this._table)},_renderColHeader:function(e,t,a,i,s){var n=e>=a;var r=n||s&&e>0;var o=!n&&a>1;var l=e===a;var c=!s&&e<i;var u="data-table-header first-row "+(n?"cosmetic ":"")+(l?"skinny-col ":"")+(e===a-1?"last-col":"");return'<div class="'+u+'"><input type="text" value="'+(n?"":d.Escape.html(t))+'"'+(r?" disabled":"")+">"+(o?'<div class="col-select"><div class="drag-handle"></div></div>':"")+(l?'<div class="new-col-button '+(c?"":"disabled")+'">+</div>':"")+"</div>"},_renderRow:function(e,t,a,i,s,n,r){var o=e>=s;var l=e===s;var c=e<n;var u="data-table-row "+(e%2&&!o?"odd-row ":"")+(e===s-1?"last-row border-spacer ":"");var d='<div class="'+u+'">';d+=this._renderRowLabel(a,s>1,o,l,c);var p=Math.max(i+(r?0:1),f);for(var h=0;h<p;h++)d+=this._renderCell(t?t[h]:null,h>0&&r,o||h>=i,h===i?"skinny-col":"");d+="</div>";return d},_renderRowLabel:function(e,t,a,i,s){var n="";var r="data-table-cell first-col "+(a?"cosmetic ":"");t&&!a&&(n+='<div class="row-select"><div class="drag-handle"></div></div>');n+='<div class="row-select-spacer cosmetic"><input type="text" disabled></div>';n+='<div class="'+r+'"> <input type="text" value="'+(a?"":d.Escape.html(e))+'"'+(a?" disabled":"")+">"+(i?'<div class="new-row-button '+(s?"":"disabled")+'">+</div>':"")+"</div>";return n},_renderCell:function(e,t,a,i){var s="data-table-cell "+i+(a?" cosmetic ":"");return'<div class="'+s+'"><input type="text" value="'+(a?"":d.Escape.html(e))+'"'+(t||a?" disabled":"")+"></div>"},populateTable:function(e){var t=e.seriesLabels;var a=e.sampleLabels;var i=e.data;var s=this.get("oneDimension");var n=this.get("maxSeries");var r=this.get("maxSamples");function o(e){return'<div class="drop-target-wrapper"><div class="'+e+'-drop-target"></div></div>'}var l='<div class="trash-wrapper"><div class="chart-trash"><div class="chart-trash-content"></div></div></div>';var c='<div class="corner-spacer data-table-header first-row cosmetic"><input type="text" disabled></div>';var u="";var d=c;var p=Math.max(t.length+(s?0:1),f);for(var h=0;h<p;h++){h<=t.length&&(d+=o("col"));d+=this._renderColHeader(h,t[h],t.length,n,s)}t.length>=f&&(d+=o("col"));u+='<div class="data-table-row first-row">'+d+"</div>";for(var g=0;g<i.length+1;g++){g<=i.length&&(u+=o("row"));u+=this._renderRow(g,i[g],a[g],t.length,i.length,r,s)}var m='<div class="inner-table">'+u+"</div>";m+=l;this._table.setHTML(m);this.bindTable()},bindTable:function(){var t=this._table;var e=t.one(".inner-table");var a=d.bind(this._afterValueChange,this);this._registerEvent(e.delegate("valuechange",a,"input"));var i=d.bind(function(e){this.selectCell(e.target.ancestor(".data-table-cell, .data-table-header"))},this);this._registerEvent(e.delegate("click",i,"input"));var s=d.bind(this._selectNext,this,"down");this._registerEvent(e.delegate("key",s,"enter","input"));var n=t.one(".new-col-button");n&&n.on("click",function(e){this.addSeries();e.halt()},this);var r=t.one(".new-row-button");r&&r.on("click",function(e){this.addSample();e.halt()},this);this._removeDragDrop();this._bindDragHandles(".row-select",this._renderRowDragProxy,function(e){t.all(".data-table-row").item(e+1).toggleClass("dragging")});this._bindDragHandles(".col-select",this._renderColDragProxy,function(e){this._applyToNthCells(e+1,function(e){e.toggleClass("dragging")})});this._bindDropTargets(".row-drop-target",".row-select",this.moveSample,function(e){t.all(".data-table-row").item(e).toggleClass("insert-after");t.one(".last-row").toggleClass("border-spacer")});this._bindDropTargets(".col-drop-target",".col-select",this.moveSeries,function(e){this._applyToNthCells(e,function(e){e.toggleClass("insert-after")})});this._bindTrash(".chart-trash",[".col-select",".row-select"])},_selectNext:function(e,t){t.halt();var a=".data-table-header, .data-table-cell";var i=".data-table-row";var s=t.target.ancestor(a);var n=t.target.ancestor(i);var r=n.all(a).indexOf(s);var o=this._table.all(i).indexOf(n);var l=this.get("oneDimension");var c=this.get("data");var u=c.seriesLabels.length+1;var d=c.sampleLabels.length+1;function p(e){o+=e;if(o>=d){o=0;h(1)}else if(o<0){o=d-1;h(-1)}}function h(e){r+=e;if(r>=u){r=0;p(1)}else if(r<0){r=u-1;p(-1)}}switch(e){case"left":h(-1);break;case"right":h(1);break;case"up":p(-1);break;case"down":p(1);break}var g=this._table.all(i);var m=g.item(o).all(a);var f=m.item(r);this.selectCell(f,s);var v;v=l||r!==u-1?o===d-1?g.item(d):0===r&&o>0?g.item(o).one(".drag-handle"):f:m.item(u);function b(e,t,a){return v._node.contains(document.elementFromPoint(t,a))}var S=v._node.getBoundingClientRect();var y=b(S.left,S.top)||b(S.right,S.top)||b(S.right,S.bottom)||b(S.left,S.bottom);y||v.scrollIntoView()},_removeDragDrop:function(){this._dropTargets&&this._dropTargets.map(function(e){e.destroy()});this._dragHandles&&this._dragHandles.map(function(e){e.destroy()});this._dropTargets=[];this._dragHandles=[]},_applyToNthCells:function(a,i,e){var t=this._table;if(!e){var s=t.all(".data-table-header").item(a);s&&i.call(this,s)}t.all(".data-table-row").each(function(e){var t=e.all(".data-table-cell").item(a);t&&i.call(this,t)},this)},_bindTrash:function(e,t){var a=this._table;var i=a.one(e);var s=new d.DD.Drop({node:i,groups:t});s.on("drop:hit",function(e){var t=e.drag.get("data");var a=d.Array(e.drag.get("groups"));a.contains(".col-select")?this.removeSeries(t.index):this.removeSample(t.index)},this);this._dropTargets.push(s)},_bindDropTargets:function(e,i,s,n){var t=this._table;var r=t.all(e);r.each(function(e){var a=r.indexOf(e);var t=new d.DD.Drop({node:e,groups:[i]});t.on("drop:hit",function(e){var t=e.drag.get("data");s.call(this,t.index,a)},this);t.on("drop:enter",function(e){n.call(this,a)},this);t.on("drop:exit",function(e){n.call(this,a)},this);this._dropTargets.push(t)},this)},_bindDragHandles:function(i,s,n){var r=this._table;var o=r.all(i);o.each(function(e){var t=o.indexOf(e);var a=new d.DD.Drag({node:e,groups:[i],data:{index:t}}).plug(d.Plugin.DDProxy,{resizeFrame:false});a.on("drag:start",function(){var e=a.get("dragNode");a._nodeStart=a.get("node").getXY();e.addClass("sqs-data-table");e.set("innerHTML",s.call(this,t));e.setStyles({"z-index":99e3,border:"none"});r.addClass("dragging");n.call(this,t)},this);a.on("drag:end",function(e){a.get("node").setXY(a._nodeStart);r.removeClass("dragging");a.get("node").ancestor("body")&&n.call(this,t);this.populateTable(this.get("data"))},this);this._dragHandles.push(a)},this)},_renderRowDragProxy:function(e){var t=this.get("data");var a=t.data;var i=this.get("oneDimension");var s='<div class="row-drag-proxy">';s+=this._renderRow(e,a[e],t.sampleLabels[e],t.seriesLabels.length,1/0,i);return s+"</div>"},_renderColDragProxy:function(e){var t=this.get("data");var a=t.data;var i=this.get("oneDimension");var s='<div class="col-drag-proxy">';s+=this._renderColHeader(e,t.seriesLabels[e],1/0,i);for(var n=0;n<a.length;n++)s+=this._renderCell(a[n][e],i&&e>0,false,"");return s+"</div>"},readTable:function(){var t=[];var a=[];var s=[];var e=this._table.one(".inner-table");e.all(".data-table-header").each(function(e){if(e.hasClass("cosmetic"))return;a.push(e.one("input").get("value"))});e.all(".data-table-row").each(function(e){var a=0;var i=[];e.all(".data-table-cell").each(function(e){if(e.hasClass("cosmetic"))return;var t=e.one("input").get("value");if(0===a){s.push(t);a++}else i.push(parseFloat(t)||0)});a>0&&t.push(i)});return{seriesLabels:a,sampleLabels:s,data:t}},isEmpty:function(){return this.get("data")===[]||null===this.get("data")||void 0===this.get("data")},didDataChange:function(){return this._changed},_afterDataChange:function(e){e.dataSync||this.populateTable(e.newVal);this.hideError()},_afterValueChange:function(e){if(!e.dataSync){this.set("data",this.readTable(),{dataSync:true});this._changed=true}},selectCell:function(e,t){var a;if(e&&!e.hasClass("cosmetic")){a=e.one("input");a._node.select();a.focus()}else if(t){a=t.one("input");a._node.blur()}},addSample:function(e,t,a,i){var s=this.get("data");if(s.sampleLabels.length>=this.get("maxSamples"))return;void 0===e&&(e=1/0);s.sampleLabels.splice(e,0,t||"");var n=a||d.Array(s.seriesLabels).map(function(){return 0});s.data.splice(e,0,n);this.set("data",s,{dataSync:true});this._changed=true;if(!i){this.populateTable(s);var r=this._table;r.one(".data-table-row.last-row .data-table-cell input").focus();r.one(".new-row-button")._node.scrollIntoView()}},addSeries:function(a,e,i,t){var s=this.get("data");var n=this.get("oneDimension");if(n||s.seriesLabels.length>=this.get("maxSeries"))return;void 0===a&&(a=1/0);s.seriesLabels.splice(a,0,e||"");s.data.map(function(e,t){e.splice(a,0,i?i[t]:0)});this.set("data",s,{dataSync:true});this._changed=true;if(!t){this.populateTable(s);var r=this._table;r.one(".data-table-header.last-col input").focus();r.one(".new-col-button")._node.scrollIntoView()}},removeSample:function(e){var t=this.get("data");t.sampleLabels.splice(e,1);t.data.splice(e,1);this.set("data",t,{dataSync:true});this._changed=true},removeSeries:function(a){var e=this.get("data");e.seriesLabels.splice(a,1);d.Array(e.data).forEach(function(e,t){e.splice(a,1)});this.set("data",e,{dataSync:true});this._changed=true},moveSample:function(e,t){var a=this.get("data");var i=a.sampleLabels[e];var s=a.data[e];this.addSample(t,i,s,true);e>t?this.removeSample(e+1):this.removeSample(e)},moveSeries:function(t,e){var a=this.get("data");var i=a.seriesLabels[t];var s=d.Array(a.data).map(function(e){return e[t]});this.addSeries(e,i,s,true);t>e?this.removeSeries(t+1):this.removeSeries(t)}},{CSS_PREFIX:"sqs-data-table",ATTRS:{oneDimension:{value:false},maxSeries:{value:1/0},maxSamples:{value:1/0},data:{value:null}}})},"1.0",{requires:["base","escape","squarespace-dialog-field-2"]})},"./src/main/webapp/universal/scripts-v6/dialog/dialog-datetime-picker.js":function(e,t,a){var s=a("./src/main/webapp/universal/src/shared/utils/dateFormat.js");YUI.add("squarespace-dialog-datetime-picker",function(i){i.namespace("Squarespace.DialogFields");var t=i.Squarespace.DialogFields.DateTimePicker=i.Base.create("dataTimePicker",i.Squarespace.DialogField2,[],{initializer:function(e){this._suppressErrors=false;this._picker=new i.Squarespace.DialogFields.StateScheduler({data:this.get("data"),type:"date",direction:this.get("direction"),maximumDate:this.get("maximumDate"),targetNode:this.get("contentBox"),allowNever:false,visible:false})},destructor:function(){this._picker&&this._picker.destroy();this._autoAlignOnScroll.detach()},renderUI:function(){t.superclass.renderUI.call(this);this._picker.render(this.get("contentBox").ancestor("body")||i.one("body"));this._setTimePickerVisiblity();var e=i.throttle(i.bind(function(){true===this._picker.get("visible")&&this._alignPicker()},this),10);this._autoAlignOnScroll=i.one(document).on("scroll",e)},bindUI:function(){t.superclass.bindUI.call(this);this._bindCalendarToggleEvents();this._picker.after("dataChange",this._updateData,this);this.after("dataChange",this._updatePickerData,this);this.on("dataChange",function(e){var t=this.get("validator");if(t.call(this,e.newVal))this.hideError();else{e.halt();this._suppressErrors||this.showError(this.get("strings.errorMessage"))}},this)},_bindCalendarToggleEvents:function(){this.get("contentBox").delegate("click",this._handleActiveAreaClick,".sqs-datetime-picker-date",this);this._registerEvent(this._picker.get("contentBox").on("clickoutside",function(e){if(e.target===this.get("contentBox").one(".sqs-datetime-picker-date"))return;this._hidePicker()},this))},isValid:function(){return 0===this.get("errors").length},_updateData:function(e){this.set("data",e.newVal)},_updatePickerData:function(e){this._suppressErrors=true;this._picker.set("data",e.newVal);this._suppressErrors=false},syncUI:function(){t.superclass.syncUI.call(this);this._updateTitle(this.get("data"));this._updateDescription(this.get("data"))},_handleActiveAreaClick:function(e){this._showPicker(e.currentTarget)},_showPicker:function(e){this._picker.set("visible",true);this._picker.set("data",this.get("data"));this._picker.syncCalendar();this._alignPicker(e)},_alignPicker:function(e){e=e||this.get("defaultPositionNode");var t=this._picker.get("boundingBox");var a=this.get("direction");var i=e.get("region");var s=i["1"];var n=i["0"]-(t.one(".workflow-flyout").get("offsetWidth")-i.width)/2;if("down"===a){s+=e.get("offsetHeight");s-=parseInt(t.getStyle("marginTop"),10)}else{s-=t.get("offsetHeight");s-=parseInt(t.getStyle("marginBottom"),10)}t.setStyles({top:s,left:n,position:"absolute"})},_hidePicker:function(){if(this._picker.get("visible")&&this.isValid()){this._picker.set("visible",false);this.hideError()}},_updateDescription:function(e){var t=this.get("contentBox");var a=this._getDescriptionText(new Date(e));t.one(".sqs-datetime-picker-description").empty().append(a)},_updateTitle:function(e){var t=this.get("contentBox");var a=this._getTitleText(new Date(e));t.one(".sqs-datetime-picker-title").empty().append(a)},_setTimePickerVisiblity:function(){var e=this._picker.get("contentBox");var t=this.get("timePickerEnabled");e.toggleClass("sqs-datetime-picker-time-disabled",!t)},_getDateEl:function(e){return'<span class="sqs-datetime-picker-date">'+i.Lang.trim(s(e,this.get("dateFormat")))+"</span>"},_getDescriptionText:function(e){var t=this._getDateEl(e);var a=this.get("strings.description").replace("[DATE]",t);return i.Node.create('<span class="sqs-datetime-picker-date-wrapper">'+a+"</span>")},_getTitleText:function(e){var t=this._getDateEl(e);var a=this.get("strings.title").replace("[DATE]",t);return i.Node.create('<span class="sqs-datetime-picker-title-content">'+a+"</span>")}},{CSS_PREFIX:"sqs-datetime-picker",TEMPLATE:'<div class="sqs-datetime-picker-title"></div><div class="sqs-datetime-picker-description"></div>',ATTRS:{data:{setter:function(e){if(i.Lang.isDate(e))return e.getTime();if(i.Lang.isNumber(e))return e;return i.Attribute.INVALID_VALUE}},dateFormat:{value:"llllLT"},defaultPositionNode:{getter:function(){return this.get("boundingBox").one(".sqs-datetime-picker-date")||this.get("boundingBox")}},direction:{value:"down",getter:function(e){var t=["down","up"];return-1===t.indexOf(e)?t[0]:e}},errorFlyoutAnimationTime:{value:.01},maximumDate:{},timePickerEnabled:{value:true},strings:{value:{description:"[DATE]",title:"",errorMessage:""}},validator:{value:function(){return true},validator:i.Lang.isFunction}}})},"1.0",{requires:["base","node","squarespace-dialog-field-2","squarespace-dialog-statepicker-scheduler","squarespace-ss-widget"]})},"./src/main/webapp/universal/scripts-v6/dialog/dialog-digital-pricing-placeholder.js":function(e,t){YUI.add("squarespace-dialog-digital-pricing-placeholder",function(e){e.namespace("Squarespace");e.Squarespace.DialogFields.DigitalPricingPlaceholder=e.Base.create("digitalPricingPlaceholder",e.Squarespace.DialogFields.PricingPlaceholder,[],{initializer:function(){}},{CSS_PREFIX:"sqs-digital-pricing-placeholder",ATTRS:{}})},"1.0",{requires:["squarespace-dialog-pricing-placeholder"]})},"./src/main/webapp/universal/scripts-v6/dialog/dialog-facebook-meta-data.js":function(e,t,a){var s=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-dialog-facebook-meta-data",function(i){i.namespace("Squarespace.DialogFields").FacebookMetaData=i.Base.create("fbMetaData",i.Squarespace.DialogField2,[],{initializer:function(e){var t=e.data.isPageAccount;var a="";this._pageSelect=new i.Squarespace.DialogFields.Select({"strings.title":s("Push Target"),"strings.placeholder":s("None selected"),"strings.description":s("Select the page to which posts will be pushed. Posts will be published on behalf of the page."),name:"pages",options:t?[{label:s("This Page"),value:a}]:this.get("pages"),data:t?a:e.data.selectedPageId,className:"thin dark"});this.add(this._pageSelect)},bindUI:function(){this.on("dataChange",this.syncUI,this);var e=this.get("id");this._pageSelect.after(e+"|dataChange",function(e){var t=this.get("data");e.newVal?t.selectedPageId=e.newVal:delete t.selectedPageId;this.set("data",t)},this)},syncUI:function(){},didDataChange:function(){var e=this._initialData;var t=this.get("data");return e.selectedPageId!==t.selectedPageId}},{CSS_PREFIX:"sqs-facebook-metadata",ATTRS:{data:{value:{},setter:function(t){i.Array.each(t.managedPages,function(e){t.selectedPageId&&e.id===t.selectedPageId?e.selected=true:e.selected=false})}},pages:{}}})},"1.0",{requires:["base","squarespace-dialog-check","squarespace-dialog-field-2","squarespace-dialog-select"]})},"./src/main/webapp/universal/scripts-v6/dialog/dialog-field-2.js":function(e,t,a){YUI.add("squarespace-dialog-field-2",function(u){var d="error";u.namespace("Squarespace.Widgets").DialogField2=u.namespace("Squarespace").DialogField2=u.Base.create("dialogField",u.Squarespace.Widgets.DataWidget,[u.Squarespace.DialogFieldLegacyInterface,u.WidgetParent,u.WidgetChild],{initializer:function(e){this._saveInitialData(e?e.data:null);this.publish("error-shown",{broadcast:2});this.publish("edited")},destructor:function(){this._destroyError();this.unplug(u.Plugin.WidgetAnim);this._initialData=void 0;this._errorFlyoutSub&&this._errorFlyoutSub.detach()},_destroyError:function(){if(this._errorNode){this._errorNode.remove(true);this._errorNode=null}},_saveInitialData:function(e){e=u.Lang.isValue(e)?e:this.get("data");u.Lang.isArray(e)&&this.get("cloneInitialData")?this._initialData=e.slice():u.Lang.isObject(e)&&this.get("cloneInitialData")?this._initialData=u.clone(e,true):this._initialData=e},setCurrentDataAsInitial:function(){this._saveInitialData()},renderUI:function(){u.Squarespace.DialogField2.superclass.renderUI.call(this);var e=this.get("boundingBox");var t=this.get("name");var a=this.get("testAttribute");if(t){e.addClass("name-"+t);e.setAttribute("data-testValue",t)}a&&e.setAttribute("data-test",a)},scrollIntoView:function(){this.get("contentBox").scrollIntoView()},toggleError:function(e){var t=this.get("boundingBox");if(this._errorHoverAnchor){t.removeClass("has-error");this._errorHoverAnchor.remove();this._errorHoverAnchor.destroy(true);this._errorHoverEvent.detach();this._errorHoverEvent=null;this._errorHoverAnchor=null}if(e){t.addClass("has-error");this._errorHoverAnchor=u.Node.create('<div class="error-hover">&#33;</div>');this._errorHoverAnchor.appendTo(t);this._errorHoverEvent=this._errorHoverAnchor.on("mouseenter",function(){t.addClass("error-is-hovering");this.showError(e)},this)}else this.hideError()},showError:function(r){if(!r||!this.get("rendered"))return;var o=this.get("boundingBox");var e=this.get("contentBox");var l=this.get("errorFlyoutAnchor")||e;var t=this.get("errorFlyoutAnimationTime");l.hasPlugin("flyoutPlugin")||l.plug(u.Squarespace.Animations.Flyout,{duration:t,renderTarget:this.get("errorFlyoutRenderTarget")});var c=l.flyoutPlugin;var a=u.bind(function(){o.addClass(d);this._destroyError();this._errorNode=u.Node.create('<div class="sqs-flyout-error-message">'+r+"</div>");var e=this.get("dialog");e&&this._errorNode.setStyle("zIndex",e.zIndex+10);this._errorNode.on(this.get("id")+"|click",function(e){e.halt();this.hideError()},this);var t=u.one(window).get("region");var a=u.Squarespace.NodeUtils.measureNode(this._errorNode).width;var i=l.get("region");var s;if(i.right+a<=t.right){s="rt";this._errorNode.addClass("out-from-right")}else if(i.left-a>t.left){s="lt";this._errorNode.addClass("out-from-left")}else{s="bl";this._errorNode.addClass("out-from-bottom");this._errorNode.setStyle("width",i.width)}c.setAttrs({node:this._errorNode,alignment:s});this._clearErrorSub=u.on(this.get("id")+"|click",this.hideError,this);var n=this.get("id");c.once(n+"|shown",function(e){this.fire("error-shown",{message:r})},this);this._errorFlyoutSub=l.once("flyout-shown",function(e){this._errorNode.setStyle("width","100%")},this);c.show()},this);if(c.get("visible")){this._isHiding=true;this._showErrorSub&&this._showErrorSub.detach();this._showErrorSub=c.once(this.get("id")+"|hidden",function(){this._showErrorSub=null;this._isHiding=false;a()},this);c.hide()}else a()},hideError:function(){if(!this.get("rendered")||this._isHiding||!this.get("boundingBox").getDOMNode())return;var t=this.get("boundingBox");t&&t.removeClass("error-is-hovering");t=this.get("boundingBox");var e=this.get("contentBox");var a=this.get("errorFlyoutAnchor")||e;if(!a.hasPlugin("flyoutPlugin")||!a.flyoutPlugin.get("visible"))return;if(this._clearErrorSub){this._clearErrorSub.detach();this._clearErrorSub=null}var i=a.flyoutPlugin;i.once(this.get("id")+"|hidden",function(e){t.removeClass(d);this.fire("error-hidden");this._destroyError()},this);i.hide()},didDataChange:function(){var e=this.get("data");if(this.get("readOnly"))return false;if(u.Lang.isArray(this._initialData))return u.JSON.stringify(this._initialData)!==u.JSON.stringify(e);if(u.Lang.isObject(this._initialData))throw new Error("DialogField base class will not compare objects. Define didDataChange for this field.");return this._initialData!==e},isEmpty:function(){var e=this.get("data");return""===e||0===e},revert:function(){this.set("data",this._initialData,{revert:true})},_getErrors:function(){return[]},isValid:function(){return!u.Lang.isArray(this.get("errors"))||0===this.get("errors").length}},{CSS_PREFIX:"sqs-dialog-field",ATTRS:{cloneInitialData:{value:true},strings:{},name:{value:null,validator:u.Squarespace.AttrValidators.isNullOrString},dialog:{value:null,validator:function(e){if(u.Lang.isNull(e))return true;if(!(e instanceof u.Squarespace.EditingDialog||e.constructor instanceof u.Squarespace.EditingDialog.constructor)){false;return false}return true}},readOnly:{value:false,validator:u.Squarespace.AttrValidators.isBoolean},required:{value:false,validator:u.Squarespace.AttrValidators.isBoolean},errors:{value:[],readOnly:true,getter:"_getErrors",validator:u.Squarespace.AttrValidators.isArray},errorFlyoutAnchor:{value:null,readOnly:true,validator:u.Squarespace.AttrValidators.isNullOrInstanceOf(u.Node)},errorFlyoutRenderTarget:{value:void 0},errorFlyoutAnimationTime:{value:.3},focusable:{value:true,validator:u.Lang.isBoolean},testAttribute:{value:null,validator:u.Squarespace.AttrValidators.isNullOrString}}})},"1.0",{requires:["base","json-stringify","squarespace-animations","squarespace-attr-validators","squarespace-dialog-field-legacy-interface","squarespace-flyout-error-message-template","squarespace-node-flyout","squarespace-node-utils","squarespace-widgets-data-widget","widget-anim","widget-child","widget-parent"]})},"./src/main/webapp/universal/scripts-v6/dialog/dialog-field-legacy-interface.js":function(e,t){YUI.add("squarespace-dialog-field-legacy-interface",function(e){var t=e.namespace("Squarespace").DialogFieldLegacyInterface=function(i){this.inActiveFrame=true;e.Lang.isFunction(this.hideError)&&e.Do.after(function(){var e=i.dialog;e&&e.clearError(this)},this,"hideError",this);e.Do.after(function(){this.after(this.get("id")+"|dataChange",function(e){var t=i.dialog;t&&!e.silent&&t.fire("datachange",this);var a=this.get("name");a&&this.fire("value-changed",{name:a,value:e.newVal,oldValue:e.prevVal,field:this})},this)},this,"bindUI",this);e.Do.after(function(){i&&i.defaultHidden&&this.hide(true)},this,"syncUI",this)};t.NAME="dialogFieldLegacyInterface";t.prototype={temporaryHide:function(){this.hide()},temporaryShow:function(){this.show()},getName:function(){return this.get("name")},getType:function(){return this.name},getValue:function(){return this.get("data")},getErrors:function(){return this.get("errors")},getNode:function(){return this.get("boundingBox")},setValue:function(e,t){this.set("data",e,t)},clearError:function(){this.hideError()}}},"1.0",{requires:[]})},"./src/main/webapp/universal/scripts-v6/dialog/dialog-fields.js":function(e,t){YUI.add("squarespace-dialog-fields",function(l){l.namespace("Squarespace");l.Squarespace.DialogField=Class.extend(l.Squarespace.Gizmo,{_name:"DialogField",initialize:function(e,t,a){this._super();var i={defaultHidden:false};this.config=l.merge(i,e);this.panel=a;this.dialog=a;this.initialData=l.merge({},t);this.className="";this.inActiveFrame=true;this.config&&"undefined"!==typeof this.config.name&&this.config.name in t&&(this.value=t[this.config.name])},hide:function(e){this.temporaryHide(e)},getTakenHeight:function(){return this.html.get("offsetHeight")},show:function(e){this.temporaryShow(e)},getName:function(){return this.config.name},getType:function(){return this.type},getDialog:function(){return this.dialog},append:function(e){e.append(this.html);this.config.defaultHidden&&this.temporaryHide(false)},resize:function(){},isValid:function(){return this.getErrors().length>0},getErrors:function(){if(this.config.validator&&this.config.validationErrorMsg&&!this.config.validator.call(this,this.dialog))return[this.config.validationErrorMsg];return[]},showError:function(e){if(!e)return;var t=this.errorFlyoutAnchor||this.control;t||console.error("dialog-field: [DialogField] No control or error flyout anchor set to throw form field error on. Set this.control or this.errorFlyoutAnchor to a node.");t.hasPlugin("flyoutPlugin")||t.plug(l.Squarespace.Animations.Flyout,{duration:.3});var a=t.flyoutPlugin;if(a.get("visible")){this._showErrorSub&&this._showErrorSub.detach();this._showErrorSub=a.once(this.getId()+"|hidden",function(){this._showErrorSub=null;this._doShowErrorFlyout(e)},this);a.hide()}else this._doShowErrorFlyout(e)},_doShowErrorFlyout:function(e){var t=this.errorFlyoutAnchor||this.control;var a=t.flyoutPlugin;this.html.addClass("error");if(!this._errorEl){this._errorEl=l.Node.create('<div class="flyout-error-message">'+e+"</div>");this._errorEl.setStyle("zIndex",this.dialog.zIndex+10);this._errorEl.on(this.getId()+"|click",function(e){e.halt()},this)}this._errorEl.setContent(e);var i=l.Squarespace.NodeUtils.measureNode(this._errorEl).width,s=t.getX()+t.get("offsetWidth")-(this.html.hasClass("thin")?-10:1),n=s+i,r=l.one(window).get("region").right,o=n>r;o&&this._errorEl.addClass("out-from-left");a.setAttrs({node:this._errorEl,alignment:o?"lt":"rt"});this._clearErrorSub=l.on(this.getId()+"|click",this.clearError,this.errorEl,this);a.show()},hideError:function(){var e=this.errorFlyoutAnchor||this.control;if(!e||!e.hasPlugin("flyoutPlugin")||!e.flyoutPlugin.get("visible"))return;this._clearErrorSub&&this._clearErrorSub.detach();var t=e.flyoutPlugin;this._subscribeOnce(t,this.getId()+"|hidden",function(e){this.html.removeClass("error")},this);t.hide()},clearError:function(){this.dialog.clearError(this);this.hideError()},scrollIntoView:function(){this.html.scrollIntoView()},updateInlineTitle:function(){},setHeight:function(e){this.control&&this.control.setStyle("height",e+"px")},getValue:function(){return this.value},setValue:function(e){var t=this.value;this.value=e;"config"in this&&"name"in this.config&&this.fire("value-changed",{name:this.config.name,value:e,oldValue:t,field:this})},temporaryHide:function(e){this.fire("hide",this);this.hidden=true;this.hideAnim&&this.hideAnim.stop();if(e){this.html.setStyle("display","none");this.fire("hidden",this)}else{this.hideAnim=this._anim({node:this.html,to:{opacity:0},duration:.35,easing:l.Easing.easeOutStrong});this.hideAnim.on("end",function(){this.html.setStyle("display","none");this.fire("hidden",this)},this);this.hideAnim.run()}},temporaryShow:function(){this.fire("show",this);this.hidden=false;this.hideAnim&&this.hideAnim.stop();this.html.setStyle("display","block");this.hideAnim=this._anim({node:this.html,to:{opacity:1},duration:.35,easing:l.Easing.easeOutStrong});this.hideAnim.on("end",function(){l.fire("shown",this);l.fire("showing",this);this.fire("shown")},this);this.hideAnim.run()},getNode:function(){return this.html},didDataChange:function(){if(this.config.ignoreChanges)return false;var e;e=!(!this.initialData||l.Lang.isUndefined(this.initialData[this.getName()])&&""===this.getValue())&&(l.Lang.isArray(this.initialData[this.getName()])?l.JSON.stringify(this.initialData[this.getName()])!==l.JSON.stringify(this.getValue()):this.getValue()!==this.initialData[this.getName()]);return e}})},"1.0",{requires:["anim","json","squarespace-gizmo","squarespace-node-flyout","squarespace-node-utils","squarespace-util","widget"]})},"./src/main/webapp/universal/scripts-v6/dialog/dialog-file-image-licensed.js":function(e,t,a){var s=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var n=a("./src/main/webapp/frontend/packages/enums/RecordType.js");var r=a("./src/main/webapp/frontend/packages/enums/WebsiteRole.js");var o=a("./src/main/webapp/frontend/packages/enums/LicensedAssetSource.js");var c=a("./src/main/webapp/frontend/packages/enums/WorkflowStates.js");var u=a("./src/main/webapp/universal/src/apps/App/shared/stores/WebsiteRoleStore.js");var d=a("./src/main/webapp/universal/src/apps/App/shared/stores/WebsiteSettingsStore/index.js");var p=a("./src/main/webapp/universal/src/apps/App/shared/utils/ContentItemAPI.js");YUI.add("squarespace-dialog-file-image-licensed",function(l){l.namespace("Squarespace.DialogFields");var a={SEARCH:"search-images",EDIT:"edit",REMOVE:"remove",LICENSE:"license"};var i=l.Squarespace.DialogFields.FileImageLicensed=l.Base.create("FileImageLicensed",l.Squarespace.DialogFields.FileImage,[],{initializer:function(){this.publish("gettyImageCaptionUpdate",{emitFacade:true,bubbles:true});var e=this.get("data");var t=e?e.get("recordType"):null;this._workflow=new l.Squarespace.LicensedAssets.Workflow({imageDestination:this.get("imageDestination"),disableImageReuse:t&&t!==n.IMAGE});this._actions=new l.Squarespace.Widgets.ActionsInline;this._actions.set("disabled",this.get("isLoading"));this._alert=new l.Squarespace.LicensedAssets.Widgets.PreviewAlert},getUploaderConfig:function(){var e=i.superclass.getUploaderConfig.call(this);e.selectButtonLabel=s("Upload an Image");return e},destructor:function(){this._workflow.destroy();this._actions.destroy();this._alert.destroy();this._workflow=null;this._actions=null;this._alert=null},renderUI:function(){i.superclass.renderUI.call(this);this.get("boundingBox").addClass("sqs-file-image-licensed");this._renderActions();this._renderPreviewAlert()},bindUI:function(){i.superclass.bindUI.call(this);this._workflow.on("downloadRequest",this._onDownloadRequest,this);this._workflow.on("imagePicked",this._onImagePicked,this);this._actions&&this._actions.on("action",this._onImageAction,this);this._alert.after("visibleChange",this._onAlertVisibilityChange,this);this.after("dataChange",this._resetDialog,this);this.on("isLoadingChange",function(e){this._actions.set("disabled",e.newVal)}.bind(this))},_renderActions:function(){this._actions&&this._actions.render(this.get("boundingBox"))},_renderPreviewAlert:function(){if(this._alert){this._alert.hide();this._alert.render(this.get("boundingBox"))}},_resetDialog:function(e){if("DialogFileImage"===e.source)return;this._actions&&this._actions.reset();this._alert&&this._alert.hide();null===this.get("data")?this._addLinkToGetty():this._addContextualActions()},_onImageAction:function(e){var t=e.actionName;switch(t){case a.SEARCH:this._onLicensedImageSearch();break;case a.EDIT:this._onEdit();break;case a.REMOVE:this._onRemove();break;case a.LICENSE:this._onLicense();break}},_onAlertVisibilityChange:function(e){var t=this.get("boundingBox");var a=e.newVal;a?t.addClass("extra-padding"):t.removeClass("extra-padding")},_updateInlineActions:function(){var e=this.get("data");l.Lang.isValue(e)&&e.get("hasFileData")?this._addContextualActions():this._addLinkToGetty()},_updatePreviewAlert:function(){this._isPreview()?this._alert.showPreviewAlert():this._isLicensedAsset()?this._getLicensedAssetOriginUrl().then(function(e){var t=e.source===o.UNSPLASH;t?this._alert.hide():this._alert.showLicensedAssetAlert(e.originUrl)}.bind(this)):this._alert&&this._alert.hide()},_getLicensedAssetOriginUrl:function(){var e=this.get("data").get("licensedAssetId");return l.Squarespace.LicensedAssets.Manager.getById(e)},_addLinkToGetty:function(){this._actions&&this._actions.set("buttons",[{label:s("Search for Image"),action:a.SEARCH}])},_addContextualActions:function(){var e=[];var t=d.getState().assetPurchasesByNonAdminsAllowed;this._isPreview()&&(t||u.hasRole(r.ADMIN))&&e.push({label:s("License"),action:a.LICENSE});this._isPreview()||this.get("disableEdit")||e.push({label:s("Image Editor"),action:a.EDIT});e.push({label:s("Remove"),action:a.REMOVE});this._actions&&this._actions.set("buttons",e)},_isPreview:function(){var e=false;var t=this.get("data");t&&t.isLicensedAssetPreview()&&(e=true);return e},_isLicensedAsset:function(){var e=false;var t=this.get("data");t&&t.get("licensedAssetId")&&(e=true);return e},_onLicensedImageSearch:function(){this._workflow.showImagePicker()},_getFilePostData:function(){var e=i.superclass._getFilePostData.call(this);return l.merge(e,{imageDestination:this.get("imageDestination")})},_onDownloadRequest:function(e){var t=e.request;var a=t.get("url");var i=t.get("licensedAssetPreview");var s=t.get("licensedAssetId");var n=t.get("isPurchased");this._setStretch(true);this._fireAttributionEvent(t);var r=this.get("data");var o=null;l.Lang.isValue(r)&&!n&&(o=this.get("data").get("id"));this.saveFromUrl(a,i,o,s)},_onImagePicked:function(e){if(e.cloneItemId){var t=this.get("data")&&this.get("data").get("collectionId")?this.get("data").get("collectionId"):null;p.copy(e.cloneItemId,c.PUBLISHED,t).then(function(e){this.set("data",new l.Squarespace.Models.ContentItem(e.data))}.bind(this))}},_onLicense:function(){this._isTrialAccount()?this._abortLicense():this._completeLicense()},_completeLicense:function(){var e=this.get("data").get("licensedAssetPreview");var t=this._getAssetUrl();this._workflow.showPurchaseDetails(e,t)},_abortLicense:function(){new l.Squarespace.Widgets.Alert({"strings.title":s("Trial Account"),"strings.message":s("To purchase images, you must have a paid Squarespace account. Please upgrade your site via the Billing area.")})},_isTrialAccount:function(){return l.Squarespace.Context.getInstance().get("website").get("siteStatus.value")===l.Squarespace.StatusConstants.TRIAL},_getAssetUrl:function(){return this.get("data").get("assetUrl")+"?format=500w"},_getLicensedAssetId:function(){return this.get("data").get("licensedAssetId")},_renderDataLoadedState:function(){i.superclass._renderDataLoadedState.call(this);this._updateInlineActions();this._updatePreviewAlert()},_onRemove:function(){var e=this.get("data");var t=this._isPreview()?e.get("licensedAssetPreview").assetId:this._getLicensedAssetId();this._isPreview()?this._workflow.trackPreviewRemovalEvent(t):this._isLicensedAsset()&&this._getLicensedAssetOriginUrl().then(function(e){this._workflow.trackLicensedAssetRemovalEvent(t,e.source)}.bind(this));(this._isPreview()||this._isLicensedAsset())&&this._fireCaptionEvent("");l.soon(function(){i.superclass._onRemove.call(this);this._addLinkToGetty();this._setStretch(false)}.bind(this))},_setStretch:function(e){var t=this.get("dialog");if(t){var a=t.getField("stretch");a&&a.set("data",e)}},_fireAttributionEvent:function(e){var t=this.get("dialog");if(l.Lang.isValue(t)){var a=this.get("data");var i=e.get("licensedAssetPreview");!l.Lang.isValue(i)&&l.Lang.isValue(a)&&(i=new l.Squarespace.LicensedAssets.Models.Preview(a.get("licensedAssetPreview")));if(l.Lang.isValue(i)){var s=this._getGettyAttribution(i);-1===s.indexOf("undefined/undefined")&&this._fireCaptionEvent(s)}}},_fireCaptionEvent:function(e){var t=this.get("dialog");l.Lang.isValue(t)&&t.fire("gettyImageCaptionUpdate",{caption:e})},_getGettyAttribution:function(e){var t=e.get("artist");var a=e.get("collectionName");return s("Photo by {artist}/{collectionName} / Getty Images",{artist:t,collectionName:a})}},{CSS_PREFIX:"sqs-file-image",ATTRS:{recordType:{value:n.IMAGE},imageDestination:{}}})},"1.0",{requires:["base","node","squarespace-actions-inline","squarespace-context","squarespace-dialog-file-image","squarespace-licensed-assets-preview","squarespace-licensed-assets-preview-alert","squarespace-licensed-assets-workflow","squarespace-util","squarespace-widgets-alert"]})},"./src/main/webapp/universal/scripts-v6/dialog/dialog-file-image.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var n=a("./common/temp/node_modules/react/index.js");var r=a("./common/temp/node_modules/react-dom/index.js");var o=a("./src/main/webapp/universal/src/apps/App/shared/components/ImageEditor/index.js");var l={x:.5,y:.5};YUI.add("squarespace-dialog-file-image",function(c){c.namespace("Squarespace.DialogFields");var s=c.Squarespace.DialogFields.FileImage=c.Base.create("fileImage",c.Squarespace.DialogFields.FileRequiresProcessing,[],{renderUI:function(){s.superclass.renderUI.call(this);var e=this._imagePickerEl=c.Node.create('<div class="'+this.getClassName()+'-external-image-picker"></div>');var t=this._imageEditorEl=c.Node.create('<div class="'+this.getClassName()+'-external-image-editor"></div>');this.get("contentBox").append(e);this.get("contentBox").append(t);this._originalWidgetDimensions={height:this.get("height"),width:this.get("width")};this._attemptToEvaluateTargetSize()},bindUI:function(){s.superclass.bindUI.call(this);this._imagePickerEl.on("click",function(e){e.halt();this._initializeExternalImagePicker()},this);this.after("dataChange",this._syncThumbnailSizes,this);this.after("dataChange",function(e){null===e.newVal&&this.set("isLoading",false)},this);this.on("uploadStart",function(){this.get("isLoading")||c.Global.fire("dialogFileImage:uploadStart");this.set("isLoading",true)}.bind(this))},destructor:function e(){this._animateLoadedImageHandle&&this._animateLoadedImageHandle.detach();if(this._img){this._img.detach("error");this._img.detach("load");this._img.detach("shown")}this._imagePickerEl.detach("click");if(this._imageEditorEl){r.unmountComponentAtNode(this._imageEditorEl.getDOMNode());this._imageEditorEl.remove(true)}},syncUI:function(){s.superclass.syncUI.call(this);this._attemptToEvaluateTargetSize()},_syncThumbnailSizes:function(e){if("DialogFileImage"===e.source)return;var t=this.get("id");var a=[t+"|originalSizeChange",t+"|systemDataIdChange"];e.prevVal&&e.prevVal.detach(a);this._attemptToEvaluateTargetSize();e.newVal&&this._registerEvent(e.newVal.after(a,function(){this._attemptToEvaluateTargetSize()},this))},_attemptToEvaluateTargetSize:function(){var e=this.get("data");if(!e||!e.get("hasFileData")){this.get("contentBox").setStyles({width:this._originalWidgetDimensions.width,height:this._originalWidgetDimensions.height});return}var t=e.get("originalSize");if(c.Lang.isString(t)){var a=t.split("x");if(2===a.length){var i=a[0];var s=a[1];var n=this.get("width");var r=this.get("boundingBox").get("offsetWidth");var o=Math.max(n,r);var l=ImageLoader.getDimensionForValue("height",o,{dimensions:{width:i,height:s}});this.get("contentBox").setStyle("height",Math.min(o,l,this._originalWidgetDimensions.height))}}},getAssociatedVars:function(){var e=[];var t=this.get("data");if(t){e=[{name:this.get("name")+"Id",value:t.get("id")},{name:"mediaFocalPoint",value:t.get("mediaFocalPoint")},{name:"filename",value:t.get("filename")}];this.isChildMode()||e.push({name:"updatedOn",value:t.get("updatedOn")})}return e},_cleanupResidualElements:function(){s.superclass._cleanupResidualElements.call(this);this._focalPoint&&this._focalPoint.get("host").unplug(this._focalPoint.constructor)},_renderFilePreview:function(){var e=this.get("data");var t=this.get("contentBox");this.set("isLoading",true);t.removeClass("loaded");t.addClass("image-loading");var a=c.Node.create('<div class="'+this.getClassName()+'-preview content-fit"><img data-load="false" data-src="'+e.get("assetUrl")+'" data-image-dimensions="'+e.get("originalSize")+'"data-image-focal-point="'+e.get("mediaFocalPoint.x")+","+e.get("mediaFocalPoint.y")+'" /></div>');this._img=a.one("img[data-src]");this._img.plug(c.Squarespace.Animations.Fadeable);this._img.hide();this._spinner=new c.Squarespace.Spinner({size:"extra-large",render:t,color:this.get("spinnerColor")});this._spinner.get("boundingBox").setStyles({top:"50%",left:"50%",position:"absolute",marginLeft:"-20px",marginTop:"-20px"});this._bindPreviewImage(this._img);t.append(a);var i=!this.tab||this.tab.index===this.get("dialog").currentTabIndex;this._img.plug(c.Squarespace.Loader2,{load:i})},_plugActionOverlay:function(e){var t=this.get("data");if(!t)return;var a={buttons:this.get("disableEdit")?["remove"]:["edit","remove"],anchor:e,position:t.get("mediaFocalPoint.y")>=.5?"top":"bottom"};this._actionOverlay=this.get("contentBox").plug(c.Squarespace.Plugin.ActionOverlay,a).actionOverlay;this._actionOverlay.on("button-edit",this._onEdit,this);this._actionOverlay.on("button-remove",this._onRemove,this)},_onEdit:function(){this._actionOverlay.setLoadingState("edit",true);r.render(n.createElement(o,{imageSrc:this.get("data").get("assetUrl"),onSave:this._onSaveEditedImage.bind(this),onCancel:this._onCloseEditingImage.bind(this),isOpen:true}),this._imageEditorEl.getDOMNode(),function(){this._actionOverlay.setLoadingState("edit",false)}.bind(this))},_onSaveEditedImage:function(e){var t=this.get("data");this.set("isCancelProcessingEnabled",false);this.saveFromFile(e,null,t.get("id"));this._onCloseEditingImage()},_onCloseEditingImage:function(){r.render(n.createElement(o,{imageSrc:this.get("data").get("assetUrl"),onSave:this._onSaveEditedImage.bind(this),onCancel:this._onCloseEditingImage.bind(this),isOpen:false}),this._imageEditorEl.getDOMNode())},_onRemove:function(){if(this.get("persistTransient")){var e=this.get("data");c.Lang.isValue(e)&&!e.isNew()&&e.clearFileData(true)}else this.set("data",null)},_onJobComplete:function(e){var t=this.get("data");var a=e.target;var i=a.get("data");t&&i.assetUrl&&t.get("id")===i.contentItemId&&t.get("systemDataId")?t.setAttrs({assetUrl:i.assetUrl,systemDataVariants:i.assetVariants,originalSize:i.assetVariants.split(",")[0],updatedOn:i.contentItemUpdatedOn,mediaProcessingState:c.Squarespace.MediaProcessingState.READY}):s.superclass._onJobComplete.call(this,e)},_bindPreviewImage:function(e){e.on("error",function(){if(this.get("destroyed"))return;this._cleanupImagePreviewError(e)},this);e.once("load",function(){this._registerTimer(c.later(500,this,function(){if(this.get("destroyed"))return;ImageLoader.load(e,{load:true});this._animateLoadedImage(e)},this))},this)},_cleanupImagePreviewError:function(e){if(null===e||null===e.getDOMNode()||!e.inDoc())return;this._spinner.destroy();this.get("contentBox").removeClass("image-loading");if(this.get("persistTransient")){var t=this.get("data");c.Lang.isValue(t)&&!t.isNew()&&t.clearFileData(true)}else this.set("data",null);new c.Squarespace.Widgets.Alert({"strings.title":this.LANG.TITLE_PROCESSING_FAIL,"strings.message":this.LANG.ERR_PROCESSING_FAIL})},_animateLoadedImage:function(e){var t=this.get("contentBox");t.plug(c.Squarespace.Animations.Scalable);this._animateLoadedImageHandle=t.once("hidden",function(){if(this.get("destroyed"))return;this._spinner.destroy();t.removeClass("image-loading");t.addClass("loaded");t.show(true);e.once("shown",function(){if(this.get("destroyed"))return;this.set("isLoading",false);this.set("isCancelProcessingEnabled",true);this._plugActionOverlay(e);this.get("useFocalPoint")&&this._plugFocalPoint(e)},this);e.show()},this);t.show(true);t.hide()},_plugFocalPoint:function e(t){var a=this.get("data");var i=a?a.get("mediaFocalPoint"):null;var s=i||l;if(!s)return;this._focalPoint=t.plug(c.Squarespace.Plugin.FocalPoint,{focalPoint:s,parentNode:this.get("contentBox")}).focalPoint;this._focalPoint.on("focalPointChange",function(e){if("DialogFileImage"===e.source)return;a&&a.set("mediaFocalPoint",{x:e.newVal.x,y:e.newVal.y})},this);this._focalPoint.on("focalPointChanged",function(){a&&this.get("autoSaveFocalPoint")&&a.save({fields:["mediaFocalPoint"]});this.fire("edited",{noSyncUI:true});if(a&&this._actionOverlay){var e=a.get("mediaFocalPoint.y")>.5?"top":"bottom";this._actionOverlay.set("position",e)}},this)},setFocalPointPluginValue:function(e){this._focalPoint&&this._focalPoint.set("focalPoint",e,{source:"DialogFileImage"})},_initializeExternalImagePicker:function(){var e=this.get("imagePickerScrapeUrl");var t=this.get("data");!e&&t&&(e=t.get("sourceUrl"));var s=new c.Squarespace.EditingDialog({name:"choose-image-picker-url",closeOthers:false,top:250,width:468,overlay:.5,primaryTabs:[{title:this.LANG.TITLE_DOWNLOAD_IMAGES,icon:"/universal/images-v6/configuration/icon-importing-32-light.png",fields:[{ctor:c.Squarespace.DialogFields.Description,config:{text:this.LANG.DESC_DOWNLOAD_IMAGES}},{ctor:c.Squarespace.DialogFields.Text,config:{name:"imagePickerScrapeUrl",submitOnEnter:true,strings:{required:true,placeholder:i("http://")}}}]}],buttons:[{type:"cancel",title:i("Cancel")},{type:"saveAndClose",title:i("Find Images")}],initialData:{imagePickerScrapeUrl:e}});s.on("send-requested",function(){var e=s.getField("imagePickerScrapeUrl");var t=e.getValue();/^https?:\/\//.test(t)||(t=t.replace(/^(?:\/\/)?/,"http://"));var a=/^https?:\/\/[-A-Za-z0-9+&@#\/%?=~_()|!:,.;]*[-A-Za-z0-9+&@#\/%=~_()|]/;if(!(a.test(t)&&t.indexOf(".")>-1)){e.showError(this.LANG.ERR_INVALID_URL);s.allowEditing();return}if(this.get("imagePickerDownloadFromSource")||t.match(/.*(jpg|jpeg|gif|png)$/i)){this.saveFromUrl(t);s.cancel()}else{var i=new c.Squarespace.Widgets.ExternalImagePicker({scrapeUrl:t,render:true});i.after("selectedImageURLChange",function(e){this.saveFromUrl(e.newVal)},this);i.after("visibleChange",function(e){e.newVal&&s.cancel()},this);i.show()}},this);s.show()}},{CSS_PREFIX:"sqs-file-image",FILE_FILTER:{description:i("Images"),extensions:"*.jpg;*.jpeg;*.png;*.gif;*.ico"},PROCESSING_JOB:c.Squarespace.ImageProcessingJob,PROCESSING_COPY:i("Processing and resizing"),ATTRS:{contentType:{value:"image"},contentLabel:{value:i("an image")},disableEdit:{value:false},useFocalPoint:{value:true},autoSaveFocalPoint:{value:false},imagePickerScrapeUrl:{value:""},imagePickerDownloadFromSource:{value:false},isLoading:{value:false},type:{}}})},"1.0",{requires:["base","node","squarespace-animations","squarespace-dialog","squarespace-dialog-description","squarespace-dialog-file-requires-processing","squarespace-external-image-picker","squarespace-image-loader","squarespace-job-manager","squarespace-jobs","squarespace-plugin-actionoverlay","squarespace-plugin-focalpoint","squarespace-spinner","squarespace-ui-base","squarespace-widgets-alert"]})},"./src/main/webapp/universal/scripts-v6/dialog/dialog-file-manager.js":function(e,t,a){var l=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-dialog-file-manager",function(o){o.namespace("Squarespace.DialogFields").FileManager=o.Base.create("fileManager",o.Squarespace.DialogField2,[],{initializer:function(){this._activeEditingEl=false;this._committing=false;this._deletePrompt=false;this._selectedLoaded=false;this._reloadFromFirstPage()},renderUI:function(){var e=this.get("contentBox");e.prepend('<div class="search"></div><div class="attachments"></div>');e.one(".attachments").plug(o.Squarespace.Plugin.ScrollLock);var t=new o.Squarespace.DialogFields.Text({"strings.placeholder":l("search")});t.render(e.one(".search"));this._searchInput=t.get("contentBox").one("input");this.renderAttachments()},renderAttachments:function(){var e=this.get("contentBox");e.one(".attachments").empty().append(this.renderTemplate())},bindUI:function(){var t=this.get("contentBox");t.delegate("valuechange",function(e){this.set("searchQuery",e.newVal)},".search input",this);this.after("searchQueryChange",this._reloadFromFirstPage,this);this._searchInput.on("click",this._cancelAttachmentEdit,this);var e=t.one(".attachments");e.plug(o.Plugin.ScrollInfo);e.scrollInfo.on("scroll",this._onScroll,this);t.delegate("mouseenter",function(e){if(!this._activeEditingEl&&!this._deletePrompt){t.all(".attachments .attachment").removeClass("active");e.currentTarget.addClass("active")}},".attachments .attachment",this);t.delegate("mouseleave",function(e){this._activeEditingEl||this._deletePrompt||e.currentTarget.removeClass("active")},".attachments .attachment",this);t.delegate("click",this._onAttachmentListClick,".attachments",this);t.delegate("click",this._enterAttachmentEditMode,".attachment .edit",this);t.delegate("key",this._commitAttachmentEdit,"press:13","input",this);t.delegate("click",this._onRemoveClick,".attachments .attachment .remove",this)},updateFullList:function(){this.set("searchQuery","");this._reloadFromFirstPage()},_reloadFromFirstPage:function(){var a=this.get("loadedItemsModel");a.reset();var e=this.get("searchQuery");var i=e.length>0;var s;if(i){s=this.get("searchResultsCurrentPageModel");s.set("searchQuery",e)}else s=this.get("allItemsCurrentPageModel");s.firstPage();s.load({},o.bind(function(){a.add(s);var t=this.get("data");if(o.Lang.isString(t)){this._selectedLoaded=false;a.some(function(e){if(e.get("urlId")===t){a.add(a.remove(e),{index:0});this._selectedLoaded=true;return true}},this);this._selectedLoaded||i||this._loadSelected()}this.renderAttachments()},this))},_loadNextPage:function(){var a;a=this.get("searchQuery").length>0?this.get("searchResultsCurrentPageModel"):this.get("allItemsCurrentPageModel");if(!a.get("hasNextPage"))return;a.nextPage();a.load({},o.bind(function(){var t=this.get("data");o.Lang.isString(t)&&a.some(function(e){if(e.get("urlId")===t){this._selectedLoaded?a.remove(e):this._selectedLoaded=true;return true}},this);this.get("loadedItemsModel").add(a);this.renderAttachments()},this))},_loadSelected:function(){o.Data.get({url:o.Squarespace.API_ROOT+"content-items",data:{recordType:o.Squarespace.RecordType.ATTACHMENT,urlId:this.get("data")},success:function(e){var t=o.Object.getValue(e,["results"]);if(this._selectedLoaded||!o.Lang.isArray(t)||0===t.length)return;this._selectedLoaded=true;var a=new o.Squarespace.Models.ContentItem;a.setAttrs(t[0]);this.get("loadedItemsModel").add(a,{index:0});this.renderAttachments()}},this)},_selectAttachment:function(e,t){if(this._activeEditingEl)return;e=e.ancestor(".attachment",true);var a=e.getAttribute("data-urlId");e.addClass("selected");this.set("data",a,{silent:t})},_onScroll:function(e){var t=e.currentTarget.get("host");var a=t.get("scrollHeight")-t.get("scrollTop")-t.height();0===a&&this._loadNextPage()},_onAttachmentListClick:function(e){if(e.target.ancestor(".edit, .remove, .filename input",true))return;this._activeEditingEl?this._commitAttachmentEdit():e.target.ancestor(".attachment",true)&&this._selectAttachment(e.target.ancestor(".attachment",true))},_onRemoveClick:function(e){this._activeEditingEl&&this._cancelAttachmentEdit();this._promptDeleteAttachment(e)},_enterAttachmentEditMode:function(e){this._activeEditingEl&&this._cancelAttachmentEdit(e);this._activeEditingEl=e.currentTarget.ancestor(".attachment");this._activeEditingEl.addClass("editing");this._activeEditingEl.one(".filename input").select();e.halt(true)},_cancelAttachmentEdit:function(e){if(e&&e.target.ancestor(".edit, .remove, .filename-editable",true))return;if(this._committing||!this._activeEditingEl)return;this._activeEditingEl.removeClass("editing");var t=this._activeEditingEl.one(".filename");t.one("input.filename-editable").set("value",t.one(".filename-text").get("text"));this._activeEditingEl=false;e&&e.halt(true)},_commitAttachmentEdit:function(e){this._committing=true;if(!this._activeEditingEl)return;var t=this._activeEditingEl.getAttribute("data-id");var a=this._activeEditingEl.getAttribute("data-urlId");var i=this._activeEditingEl.one(".filename input.filename-editable");var s=i.get("value");var n=a===this.get("data");if(a===s)return;var r=this.get("loadedItemsModel").getById(t);r.set("filename",s).save(function(e,t){if(o.Lang.isNull(e)){n&&this.set("data",t.urlId,{silent:true});this._activeEditingEl.setAttribute("data-urlId",t.urlId);this._activeEditingEl.one(".filename-text").set("text",s);this._activeEditingEl.removeClass("editing");this._activeEditingEl=false}else{var a=o.Object.getValue(e,["errors","name"]);o.Lang.isString(a)&&new o.Squarespace.Widgets.Alert({"strings.title":l("File Name Error"),"strings.message":a})}this._committing=false}.bind(this))},_promptDeleteAttachment:function(e){e.halt(true);this._deletePrompt=true;var t=e.currentTarget.ancestor(".attachment",true);var a=t.getAttribute("data-id");var i=t.getAttribute("data-urlId");o.Squarespace.Fluent.Confirm({"strings.confirm":l("Delete"),"strings.title":l("Delete File"),"strings.message":l("Are you sure you want to delete this file?")}).then(o.bind(function(){this._deletePrompt=false;this._deleteAttachment(a,i)},this),o.bind(function(){this._deletePrompt=false},this))},_deleteAttachment:function(e,t){var a=this.get("loadedItemsModel").getById(e);a.destroy({remove:true},o.bind(function(e){if(o.Lang.isNull(e)){t===this.get("data")&&this.set("data",null,{silent:true});this._reloadFromFirstPage()}else console.error(e)},this))},_getHBTemplateContext:function(){return{attachments:this.get("loadedItemsModel").toJSON(),searchQuery:this.get("searchQuery"),selectedUrlId:this.get("data"),strings:this.get("strings")}}},{CSS_PREFIX:"sqs-file-manager",ASYNC_DATA:true,HANDLEBARS_TEMPLATE:"dialog-file-manager.html",ATTRS:{searchQuery:{value:"",validator:o.Lang.isString},loadedItemsModel:{value:new o.ModelList,validator:o.Squarespace.AttrValidators.isInstanceOf(o.ModelList)},allItemsCurrentPageModel:{value:new o.Squarespace.Models.AttachmentsList({pageSize:6}),validator:o.Squarespace.AttrValidators.isInstanceOf(o.Squarespace.Models.AttachmentsList)},searchResultsCurrentPageModel:{value:new o.Squarespace.Models.SearchedAttachmentsList({pageSize:6}),validator:o.Squarespace.AttrValidators.isInstanceOf(o.Squarespace.Models.SearchedAttachmentsList)},strings:{value:{noResultsFound:l("No results found…"),noFiles:l("You have not uploaded any files yet")}}}})},"1.0",{requires:["base","node-scroll-info","squarespace-attr-validators","squarespace-dialog","squarespace-dialog-field-2","squarespace-dialog-file-manager-template","squarespace-dialog-text","squarespace-fluent-confirmation","squarespace-hb-compare","squarespace-models-attachments-list","squarespace-models-content-item","squarespace-plugin-scroll-lock","squarespace-util","squarespace-widgets-alert","squarespace-widgets-confirmation"]})},"./src/main/webapp/universal/scripts-v6/dialog/dialog-file.js":function(e,t,a){var g=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var i=a("./src/main/webapp/universal/src/shared/constants/UploadModes.js");var m=a("./src/main/webapp/universal/src/shared/utils/UploadAPI.js");var f=a("./src/main/webapp/universal/src/shared/utils/uploadToken.js");var v=v||function(){};YUI.add("squarespace-dialog-file",function(h){var s=function(e){if(e<1e3)return"~1KB";if(e<1e6)return(e/1e3).toFixed(0)+"KB";return(e/1e6).toFixed(0)+"MB"};h.namespace("Squarespace.DialogFields");var n=h.Squarespace.DialogFields.File=h.Base.create("file",h.Squarespace.DialogField2,[],{initializer:function(){this.LANG=n.LANG;h.Squarespace.Uploader&&(this.uploader=this._createUploader());this.set("width",this.get("height"));this._plugTitleAndBindResizing();this.after("dataChange",function(){this.refreshItemPostData();this._bindDataEvents()},this);this._initializeAndLoadData();this.get("square")&&this.set("width",this.get("width"));this.publish("uploadStart")},renderUI:function(){n.superclass.renderUI.call(this);if(!this.uploader)return;var e=this.get("contentBox");var t=h.Squarespace.Plugin.ProgressSpinner.NS;this._progressPlugin=e.plug(h.Squarespace.Plugin.ProgressSpinner)[t];e.plug(h.Squarespace.Plugin.ProgressBar);if("none"===h.Uploader.TYPE)return;"flash"===h.Uploader.TYPE?h.later(300,this,function(){this.uploader.render(e)}):this.uploader.render(e)},destructor:function(){this.uploader&&this.uploader.destroy()},_uiSetWidth:function(e){this._uiSetDim("minWidth",e);this._uiSetDim("width",e)},bindUI:function(){n.superclass.bindUI.call(this);var e=this.uploader;if(!e)return;this._registerEvent(e.on("uploadstart",this._uploadStart,this));this._registerEvent(e.on("upload-complete",this._directUploadComplete,this));this._registerEvent(e.on("upload-failure",this._directUploadFailure,this));this.after("uploadUrlChange",function(){this.uploader.set("uploadURL",this.get("uploadUrl"))})},syncUI:function(){n.superclass.syncUI.call(this);this._dataLoaded?this._renderDataLoadedState():this._renderDataLoadingState()},didDataChange:function(){var e=this._initialData;var t=this.get("data");if(!e&&!t)return false;if(e&&0===Object.keys(e).length&&null===t)return false;if(!e||!t)return true;if(e.id!==t.get("id"))return true;var a=e.mediaFocalPoint;var i=t.get("mediaFocalPoint");return this._focalPointsDiffer(a,i)},_focalPointsDiffer:function(e,t){if(!e&&!t)return false;if(!e||!t)return true;return e.x&&t.x!==e.x||e.y&&t.y!==e.y},show:function(){this.syncUI();this.set("visible",true)},refreshItemPostData:function(){var e=this.get("data");if(e)switch(this.get("mode")){case i.ITEM:this._itemPostData={collectionId:e.get("collectionId"),recordType:e.get("recordType")};var t=e.get("id");t&&(this._itemPostData.replaceItemId=t);break;case i.CHILD:this._itemPostData={collectionId:e.get("collectionId"),recordType:e.get("recordType"),parentItemId:e.get("parentId")};break;default:this._itemPostData={};break}},_getUploadUrl:function(){var e=this.get("uploadUrl");if(null===e)return"/api/commondata/"+(this.isGlobalMode()?"SaveGlobalMedia":"SaveMedia");return e},saveFromUrl:function(e,t,a,i){this.saveFromUrlOrFile(e,t,a,i)},saveFromFile:function(e,t,a,i){this.saveFromUrlOrFile(e,t,a,i)},saveFromUrlOrFile:function(t,a,e,i){if(!this.uploader)return;this.fire("uploadStart");var s=this.get("boundingBox").one(".sqs-file-image-preview");if(this.get("persistTransient")){var n=this.get("data");h.Lang.isValue(n)&&!n.isNew()&&n.clearFileData(true)}else e?s&&s.hide():this.set("data",null);this.get("boundingBox").addClass("has-preview");var r=this._progressPlugin;r.set("show",true);var o="string"===typeof t;var l=o?{fileUrl:t}:{contentType:t.type,fileName:t.name,fileSize:t.size,Filedata:t};var c=h.merge(this._getFilePostData(),l);h.Lang.isValue(a)&&(c.licensedAssetPreview=a);h.Lang.isValue(i)&&(c.licensedAssetId=i);e&&(c.replaceItemId=e);if(!c.replaceItemId){var u=c.collectionId;var d=new h.Squarespace.Models.ContentItem({collectionId:u,recordType:c.recordType});d.save(h.bind(function(e){if(h.Lang.isValue(e)){new h.Squarespace.Widgets.Alert({"strings.title":g("Something Went Wrong"),"strings.message":this.LANG.ERR_FILE_UPLOAD});r.set("show",false);s&&s.show();this.get("boundingBox").removeClass("has-preview");return}this.saveFromUrlOrFile(t,a,d.get("id"),i)},this));return}if(o)h.Data.post({url:this._getUploadUrl(),data:c,success:this._onUploadComplete.bind(this,r)},this);else{var p=f.getUploadToken().getId();m.uploadFile(p,this._getUploadUrl(),c,{onProgress:v,onCancel:v}).then(function(e){this._onUploadComplete(r,e.data)}.bind(this))}},_onUploadComplete:function(e,t){if(t&&t.job){e.set("show",true);var a={placeholder:this.get("contentBox")};var i=this.uploader.get("createJob")(a,t);var s=this.get("boundingBox").one(".sqs-file-image-preview");s&&s.show();if(i){i.get("id")||i.set("id",t.job.id);var n=this.uploader;i.once("complete",h.bind(n._onJobHandler,n,"jobComplete",a));i.once("failure",h.bind(n._onJobHandler,n,"jobFailure",a));i.once("complete",this._onJobComplete,this);Static.JOB_MANAGER.addJob(i)}}var r=this.get("data");r&&!r.get("mediaProcessingState")&&r.set("mediaProcessingState",h.Squarespace.MediaProcessingState.QUEUED)},_loadItem:function(e){var t=new h.Squarespace.Models.ContentItem({id:e});t.load({forceReload:true},h.bind(function(e){h.Lang.isValue(e)||this.set("data",t)},this))},_onJobComplete:function(e){this._loadItem(e.target.get("data.contentItemId"))},isTransientMode:function(){return this.get("mode")===i.TRANSIENT},isGlobalMode:function(){return this.get("mode")===i.GLOBAL},isChildMode:function(){return this.get("mode")===i.CHILD},getUploaderConfig:function(){var e={uploadURL:this._getUploadUrl(),multipleFiles:false,appendNewFiles:false,isTransient:this.isTransientMode()||this.isGlobalMode(),persistTransient:this.get("persistTransient"),isGlobal:this.get("mode")===i.GLOBAL,autoUpload:true,selectButtonLabel:h.substitute("flash"===h.Uploader.TYPE?this.LANG.HINT_FILE_UPLOAD_CLICK_ONLY:this.LANG.HINT_FILE_UPLOAD,{type:this.get("contentLabel")}),dragAndDropArea:this.get("contentBox"),maxSize:this.get("maxSize"),processFile:h.bind(this._processFile,this),addPlaceholder:h.bind(this._addPlaceholder,this),preflight:this._getAsyncUploadUrlThenDoPreflight.bind(this)};"audio"===this.get("contentType")&&(e.fileFilters=[{description:g("Audio"),extensions:"*.mp3;*.mp4;*.ogg;*.m4a"}]);return e},_createUploader:function(){var e=this.getUploaderConfig();var t=h.Squarespace.Uploader;h.Squarespace.Utils.isInDamaskFrame()&&(t=h.config.win.top.Y.Squarespace.Uploader);return new t(e)},_getAsyncUploadUrlThenDoPreflight:function(t){var a=this.get("preflight")||function(e){e()};this._getAsyncUploadUrlFn()(function(e){this.uploader.set("uploadURL",e);a(t)}.bind(this))},_getAsyncUploadUrlFn:function(){var e=this.get("asyncUploadUrlFn");if(h.Lang.isFunction(e))return e;return function(e){e(this._getUploadUrl())}.bind(this)},_plugTitleAndBindResizing:function(){var e=this.get("contentBox");var t=this.get("strings.title");t&&this.plug(h.Squarespace.Plugin.DialogFieldLabel,{forNode:e,strings:{text:t}});this.after("render",this._calcAndSetBoxHeight,this)},_calcAndSetBoxHeight:function(){var e=this.get("contentBox");var t=this.get("height");if(t&&this.get("rendered")){var a=this.get("boundingBox").get("offsetHeight");var i=e.get("clientHeight");e.setStyle("height",2*i-a);this.get("boundingBox").setStyle("height",null)}},_initializeAndLoadData:function(){var t=this.get("data");this.refreshItemPostData();this._bindDataEvents();if(t){this._initialData={id:t.get("id"),mediaFocalPoint:t.get("mediaFocalPoint")};t.isNew()||this.get("mode")===i.GLOBAL||this.get("persistTransient")?this._dataLoaded=true:t.load(h.bind(function(e){e&&new h.Squarespace.Widgets.Alert({"strings.title":g("Missing Item"),"strings.message":g("We could not locate the item.")});this._initialData.mediaFocalPoint=t.get("mediaFocalPoint");this._dataLoaded=true;this.get("rendered")&&this.syncUI()},this))}else{this._initialData={};this._dataLoaded=true}},_bindDataEvents:function(){var e=this.get("data");e&&this.get("mode")===i.ITEM&&this._registerEvent(e.after("idChange",function(e){this._itemPostData.replaceItemId=e.newVal},this))},_cleanupResidualElements:function(){this.get("contentBox").all("."+n.CSS_PREFIX+"-preview").remove();var e=this._actionOverlay;e&&e.get("host").unplug(e.constructor);var t=this._spinner;t&&t.destroy()},_renderDataLoadedState:function(){this._cleanupResidualElements();var e=this.get("boundingBox");var t=this.get("data");this.get("contentBox").removeClass("data-loading");if(t&&t.get("hasFileData")){e.addClass("has-file");this._renderFilePreview()}else{e.removeClass("has-preview");e.removeClass("has-file");this._progressPlugin.set("show",false)}},_renderDataLoadingState:function(){this._cleanupResidualElements();var e=this.get("boundingBox");var t=this.get("contentBox");e.removeClass("has-preview");e.addClass("has-file");t.addClass("data-loading");this._spinner=new h.Squarespace.Spinner({size:"extra-large",render:t,color:this.get("spinnerColor")});this._spinner.get("boundingBox").setStyles({top:"50%",left:"50%",position:"absolute",marginLeft:"-20px",marginTop:"-20px"})},_renderFilePreview:function(){var e=h.Node.create('<div class="'+n.CSS_PREFIX+'-preview"></div>');var t=this.get("data");var a=t.get("filename");var i=t.get("dataSize");a&&e.append('<span class="file-meta file-meta-name">'+a+"</div>");i&&e.append('<span class="file-meta file-meta-size">'+s(i)+"</span>");this.get("contentBox").append(e);this._plugActionOverlay()},_plugActionOverlay:function(){this._actionOverlay=this.get("contentBox").plug(h.Squarespace.Plugin.ActionOverlay,{buttons:["remove"]}).actionOverlay;this._actionOverlay.on("button-remove",function(){this.set("data",null)},this)},_processFile:function(e){if(e.invalid){var t=e.invalid[0];var a=t.title;var i=t.message;if(this.get("strings.invalidDrop")){a=this.get("strings.invalidDrop.title");i=this.get("strings.invalidDrop.message")}new h.Squarespace.Widgets.Alert({"strings.title":a,"strings.message":i});return}e.postData=this._getFilePostData()},_getFilePostData:function(){var e=this.get("contentType");var t={process:-1!==["image","audio"].indexOf(e.slice(0,5))?"true":"false",contentType:e,isWordpressXmlFile:this.get("isWordpressXmlFile")};this.get("recordType")&&(t.recordType=this.get("recordType"));switch(this.get("mode")){case i.GLOBAL:case i.TRANSIENT:if(this.get("persistTransient")){var a=this.get("data");h.Lang.isValue(a)&&!a.isNew()&&(t.replaceItemId=a.get("id"))}break;case i.CHILD:if(this._itemPostData){t=h.merge(t,this._itemPostData,{childType:this.get("childType")});h.Lang.isUndefined(t.parentItemId)&&false}break;case i.ITEM:this._itemPostData&&(t=h.merge(t,this._itemPostData));break}return t},_addPlaceholder:function(){return this.get("contentBox")},_uploadStart:function(){this.fire("uploadStart");this._cleanupResidualElements();this.get("boundingBox").addClass("has-preview");this.get("contentBox").all('<div class="'+n.CSS_PREFIX+'-file-preview"></div>').remove()},_directUploadComplete:function(e){this.get("contentBox").all('<div class="'+n.CSS_PREFIX+'-file-preview"></div>').remove();if(e.media)this.set("data",new h.Squarespace.Models.ContentItem(e.media[0]));else{this.get("boundingBox").removeClass("has-preview");new h.Squarespace.Widgets.Alert({"strings.title":g("Bad File"),"strings.message":g("Unable to determine proper type information from uploaded file.")})}},_directUploadFailure:function(){this.set("data",null)}},{LANG:{TITLE_CLEAR_ASSET:g("Clear Asset"),CONFIRM_FILE_REMOVAL:g("Are you sure you want to remove this uploaded file?"),ERR_FILE_UPLOAD:g("Upload failed, please retry"),ERR_SINGLE_FILE_TITLE:g("Single File Only"),ERR_SINGLE_FILE:g("This field only accepts a single file."),HINT_FILE_UPLOAD:g("Add {type}."),HINT_FILE_UPLOAD_CLICK_ONLY:g("Click here to add {type}."),MSG_FILE_UPLOAD_OK:g("File Uploaded Successfully"),INVALID_IMAGE_TITLE:g("Invalid Image"),INVALID_IMAGE:g("The image does not have enough information to render."),ERR_INVALID_URL:g("That doesn't appear to be a valid URL."),TITLE_DOWNLOAD_IMAGES:g("Download Images from Page"),TITLE_PROCESSING_FAIL:g("Image Processing Failed"),ERR_PROCESSING_FAIL:g("We were unable to process your image.  Please try again."),DESC_DOWNLOAD_IMAGES:g("Paste the URL of a webpage with images and Squarespace will allow you to select one.")},CSS_PREFIX:"sqs-file",ATTRS:{cloneInitialData:{value:false},data:{value:null,setter:function(e){if(e){if(e instanceof h.Squarespace.Models.ContentItem)return e;if(h.Lang.isObject(e)){false;return new h.Squarespace.Models.ContentItem(h.Lang.isArray(e)?e[0]:e)}return h.Attribute.INVALID_VALUE}return null}},strings:{value:{title:""}},contentType:{value:"file"},contentLabel:{value:g("a File")},mode:{value:i.TRANSIENT},square:{value:false},spinnerColor:{value:"light"},recordType:{value:null},childType:{value:null},maxSize:{value:20},preflight:{value:null},isWordpressXmlFile:{value:false},uploadUrl:{value:null},persistTransient:{value:false,validator:h.Squarespace.AttrValidators.isBoolean},asyncUploadUrlFn:{valueFn:function(){return function(e){e(this._getUploadUrl())}.bind(this)}}}})},"1.0",{requires:["attribute","base","json","node","squarespace-attr-validators","squarespace-dialog-field-2","squarespace-dialog-label","squarespace-enum","squarespace-models-content-item","squarespace-plugin-actionoverlay","squarespace-plugin-progress-bar","squarespace-plugin-progress-spinner","squarespace-spinner","squarespace-ui-base","squarespace-uploader","squarespace-util","squarespace-widgets-alert"]})},"./src/main/webapp/universal/scripts-v6/dialog/dialog-flow.js":function(e,t,a){var r=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-dialog-flow",function(n){n.namespace("Squarespace");n.Squarespace.DialogFlow=n.Base.create("dialogFlow",n.Base,[],{initializer:function(e){this.set("options",e.options);this.set("title",e.title);this.set("fieldName",e.fieldName);this.set("initialField",e.initialField)},showPrescreen:function(t){var e=this.get("fieldName");var a=this.get("initialField");var i=[];n.Lang.isUndefined(t)&&(t={});n.Lang.isUndefined(a)||i.push(a);i.push({ctor:n.Squarespace.DialogFields.Description,config:{title:this.get("subtitle"),text:this.get("description")}},{ctor:n.Squarespace.DialogFields.MultiOption,config:{name:e,options:this.get("options"),optionClickCb:this.get("optionClickCb"),columns:this.get("optionColumns")}});var s=this._prescreen=new n.Squarespace.EditingDialog({name:this.get("fieldName"),overlay:.5,width:this.get("width"),style:"flyout",initialData:t,closeOthers:false,buttons:[{type:"cancel",title:r("Cancel")}],discardChangesConfirmation:false,primaryTabs:[{title:this.get("title"),icon:this.get("icon")||"/universal/images-v6/icons/icon-plus-16-light.png",fields:i}]});s.on("ready",function(){s.getField(e).after("dataChange",function(e){s.close();this.proceed(t,e.newVal)},this)},this);s.show()},close:function(){this._prescreen.close()},proceed:function(e,t){e[this.get("fieldName")]=t;var a=this.get("nextDialogGenerator");if(!a){this.fire("proceed",{valueChoice:t});return}var i=a(e);if(i instanceof n.Squarespace.DialogFlow)i.showPrescreen(e);else{if(!(i.constructor instanceof n.Squarespace.EditingDialog.constructor))throw void 0===i?new Error("nextDialog not specified"):new Error("Unsupported Dialog");i.show()}}},{NS:"dialogFlow",ATTRS:{description:{value:""},fieldName:{value:""},nextDialogGenerator:{value:null},options:{value:[]},optionClickCb:{value:null},optionColumns:{value:1},subtitle:{value:""},title:{value:""},width:{value:550}}})},"1.0",{requires:["base","squarespace-dialog","squarespace-dialog-description","squarespace-dialog-multi-option"]})},"./src/main/webapp/universal/scripts-v6/dialog/dialog-gallery-options.js":function(e,t,a){YUI.add("squarespace-dialog-gallery-options",function(s){s.namespace("Squarespace.DialogFields");var n=s.Squarespace.DialogFields.GalleryOptions=s.Base.create("galleryOptions",s.Squarespace.DialogField2,[],{initializer:function(e){this._originalSettings={};this._widgetsByName={};this.publish("options-changed",{emitFacade:false})},renderUI:function(){var e=this.get("options");var a=[];s.Object.each(e,function(e,t){this._originalSettings[t]=e;a.push(this._optToWidget(e,t))},this);s.Array.forEach(a,function(a){a.after("dataChange",function(e){var t=e.attrName;this.fire("options-changed",a,t)},this);this.add(a)},this);s.Squarespace.DialogFields.GalleryOptions.superclass.renderUI.call(this)},syncUI:function(){this._updateVisibleWidgets()},didDataChange:function(){var a=false;s.Object.each(this.get("data"),function(e,t){s.Object.hasKey(this._initialData,t)&&(a=this._initialData[t]!==e)});return a},_optToWidget:function(e,t){var a=e.type;switch(a){case"multiOption":return this._multiOption(e,t);case"select":return this._selectWidget(e,t);case"boolean":return this._checkWidget(e,t);case"slider":return this._sliderWidget(e,t)}},add:function(e){this._widgetsByName[e.get("name")]=e;s.Squarespace.DialogFields.GalleryOptions.superclass.add.call(this,e)},_getOriginalSettings:function(e){return this._originalSettings[e.get("name")]},_updateVisibleWidgets:function(){this.each(function(e){var t=this._getOriginalSettings(e);if(t.onlyFor){var a;a=t.matchAllOnlyFor?-1===t.onlyFor.map(function(e){return this._validateSettings(e)}.bind(this)).indexOf(false):s.Array.some(t.onlyFor,this._validateSettings,this);a?e.show():e.hide()}else e.show()},this)},_validateSettings:function(e){var t=this._parseFieldCondition(e);var a=this._widgetsByName[t.name];var i=a.get("visible");return i&&String(a.get("data"))===String(t.value)},_parseFieldCondition:function(e){var t=e.split(":");return{name:t[0],value:t[1]}},_resetValuesToDefaults:function(e){var t=this._getOriginalSettings(e);s.Lang.isUndefined(t.defaultValue)||e.set("data",t.defaultValue)},_multiOption:function(e,t){var a=[];s.Object.each(e.options,function(e,t){a.push({title:e.title,value:t,icon:e.icon})});var i=new s.Squarespace.DialogFields.MultiOption({defaultValue:e.defaultValue,options:a,name:t});this._monitorValueChange(i);return i},_selectWidget:function(e,t){var a=n.convertToOptionsArray(e.options);var i=new s.Squarespace.DialogFields.Select({"strings.title":e.title,"strings.description":e.description,options:a,data:e.defaultValue,className:"thin dark",name:t,visible:"design"!==t,prefix:""});i.unplug(s.Plugin.WidgetAnim);this._monitorValueChange(i);return i},_monitorValueChange:function(e){e.after("dataChange",function(){if("design"===e.get("name")){this.each(function(e){"design"!==e.get("name")&&this._resetValuesToDefaults(e)},this);this._applyValuesFromSelect(e)}this._updateVisibleWidgets()},this)},_applyValuesFromSelect:function(e){var t=this._getOriginalSettings(e);if(t.options){var a=t.options[e.get("data")];s.Object.each(a.values,function(e,t){var a=this._widgetsByName[t];a.set("data",e)},this)}},_sliderWidget:function(e,t){return new s.Squarespace.DialogFields.Slider({name:t,"strings.description":e.description,"strings.suffix":e.numericSuffix||"",range:[e.min,e.max],data:e.defaultValue,isNumericLabel:!("string"===typeof e.numericSuffix&&""!==e.numericSuffix.trim()),labelWidth:e.labelWidth,visible:false})},_checkWidget:function(e,t){var a=new s.Squarespace.DialogFields.Check({name:t,"strings.title":e.title,"strings.description":e.description,data:e.defaultValue,visible:false});a.after("dataChange",this._updateVisibleWidgets,this);return a}},{convertToOptionsArray:function(e){var i=[];if(s.Lang.isArray(e))return e;if(!s.Lang.isObject(e)&&!s.Lang.isValue(e)){false;return i}s.Object.each(e,function(e,t){var a=e.title||t;i.push({value:t,label:a})},this);return i},CSS_PREFIX:"sqs-gallery-options",ATTRS:{data:{getter:function(){var e=function(e){return e.get("visible")};return s.Array.reduce(s.Array.filter(this._items,e),{},function(e,t){e[t.get("name")]=t.get("data");return e})},setter:function(t){s.Array.each(this._items,function(e){e.set("data",t[e.get("name")])},this)},lazyAdd:false},options:{},currentDesign:{readOnly:true,getter:function(){return this._widgetsByName.design.get("data")}}}})},"1.0",{requires:["base","squarespace-dialog-check","squarespace-dialog-field-2","squarespace-dialog-multi-option","squarespace-dialog-select","squarespace-dialog-slider"]})},"./src/main/webapp/universal/scripts-v6/dialog/dialog-giftcard-pricing-placeholder.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/universal/src/shared/utils/formatting/substituteString.js");YUI.add("squarespace-dialog-giftcard-pricing-placeholder",function(a){a.namespace("Squarespace");var t=a.Squarespace.DialogFields.GiftCardPricingPlaceholder=a.Base.create("giftCardPricingPlaceholder",a.Squarespace.DialogFields.PricingPlaceholder,[],{initializer:function(){},renderUI:function(){t.superclass.renderUI.call(this);this._setAmountCount()},syncUI:function(){t.superclass.syncUI.call(this);this._setAmountCount()},_setAmountCount:function(){var e=this.get("data.variants").length;0===e&&(e=1);var t=e<=1?"":a.Node.create(s('<span class="separator">—</span>'+i("{numVariants} values"),{numVariants:e}));this.get("contentBox").one(".variant-count").setHTML(t)},_getHBTemplateContext:function(){var e=t.superclass._getHBTemplateContext.call(this);e.hasVariants=true;return e}},{CSS_PREFIX:"sqs-giftcard-pricing-placeholder",ATTRS:{}})},"1.0",{requires:["squarespace-dialog-pricing-placeholder"]})},"./src/main/webapp/universal/scripts-v6/dialog/dialog-hidden.js":function(e,t,a){var i=a("./common/temp/node_modules/lodash/noop.js");YUI.add("squarespace-dialog-hidden",function(e){e.namespace("Squarespace.DialogFields").Hidden=e.Base.create("hidden",e.Squarespace.DialogField2,[],{initializer:function(){this.unplug(e.Plugin.WidgetAnim)},focus:null,enable:null,disable:null,blur:null,renderUI:i,bindUI:i,syncUI:i},{CSS_PREFIX:"sqs-hidden",ATTRS:{visible:{value:false},focusable:{value:false}}});e.Squarespace.DialogFields.HiddenField=e.Squarespace.DialogFields.Hidden},"1.0",{requires:["base","squarespace-dialog-field-2"]})},"./src/main/webapp/universal/scripts-v6/dialog/dialog-html.js":function(e,t){YUI.add("squarespace-dialog-html",function(e){e.namespace("Squarespace.DialogFields");var t=e.Squarespace.DialogFields.HTML=e.Base.create("html",e.Squarespace.DialogField2,[],{bindUI:function(){t.superclass.bindUI.call(this);this._registerEvent(this.after("contentChange",this.syncUI,this))},syncUI:function(){t.superclass.syncUI.call(this);this.get("contentBox").empty().setHTML(this.get("content"))},focus:null,blur:null,enable:null,disable:null},{CSS_PREFIX:"sqs-dialog-field-html",ATTRS:{content:{value:""},focusable:{value:false}}})},"1.0",{requires:["base","squarespace-dialog-field-2"]})},"./src/main/webapp/universal/scripts-v6/dialog/dialog-item-push.js":function(e,t,a){var y=a("./common/temp/node_modules/react/index.js");var _=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var C=a("./common/temp/node_modules/@sqs/styles/variables/baseDamask.js");var E=a("./src/main/webapp/frontend/packages/enums/RecordType.js");YUI.add("squarespace-dialog-item-push",function(b){var S="tumblr";b.namespace("Squarespace.DialogFields").ItemPush=b.Base.create("itemPushDialogField",b.Squarespace.DialogField2,[],{initializer:function(e){this._widgets=[];this.isEmpty=true;b.Lang.isValue(this.get("dialog"))||this.show(true)},destructor:function(){b.Array.each(this._widgets,function(e){b.Object.each(e,function(e,t){b.Lang.isValue(e)&&e.destroy()})})},_isPushable:function(e){return b.Squarespace.ConnectedAccountCapabilities.can(e,b.Squarespace.ConnectedAccountCapabilities.PUSH)},_addEmptyMessage:function(){var e=['<div class="instructions">',"<p>",_("You do not have any accounts connected to your site configured for pushing content. Press the button below to connect an account."),"<p>","<p>",'<div class="add-account">',"<a>",_("Connect Account"),"</a>","</div>","<p>","</div>"].join("");var t='<div class="instructions"><p>'+_("You do not have any accounts connected to your site configured for pushing content. Go to your site management page to add an account.")+"</p></div>";var a=this.get("contentBox");if(Static.IN_BACKEND){a.append(e);a.one(".add-account").on("click",this._onAddAccountClick,this)}else a.append(t)},_onAddAccountClick:function(){new b.Squarespace.Widgets.Confirmation({showOverlay:true,"strings.title":_("Add Account"),"strings.message":_("All unsaved changes to this item will be lost. Are you sure you want to leave?")}).on("confirm",function(){b.Lang.isValue(this.get("dialog"))&&(this.get("dialog").params.discardChangesConfirmation=false);this._guideToConnectedAccounts()},this)},_guideToConnectedAccounts:function(){b.Squarespace.Singletons.Location.go("/settings/connected-accounts");b.Lang.isValue(this.get("dialog"))&&this.get("dialog").close()},show:function(){if(this._shownOnce)return;this._shownOnce=true;var e=this.get("models").filter(this._isPushable);e.length&&b.Array.each(e,this._renderAccount,this);this.isEmpty&&this._addEmptyMessage()},bindUI:function(){this.get("contentBox").delegate("click",this._hidePushedMessage,".already-pushed-msg",this)},_hidePushedMessage:function(e){var t=e.target.ancestor(".account",true);var a=t.one(".sqs-toggle-button");var i=b.Widget.getByNode(a);i&&i.set("active",true);t.removeClass("pushed")},_renderAccount:function(t){var e=t.get("pushEnabled");var a=t.get("pushAvailable");if(!e||!a)return;if(t.get("serviceName")===S&&this.get("recordType")===E.IMAGE)return;this.isEmpty=false;var i=this.get("contentBox");var s=i.appendChild('<div class="account"></div>');var n=t.get("hash");var r=this.get("pushedServices")[n];var o=this.get("pendingPushedServices")[n];var l=b.Array.some(this._initialData,function(e){return e.connectedAccountId===t.get("id")&&e.pushEnabled})&&!r&&!(this.get("published")&&o);var c=new b.Squarespace.Widgets.ConnectedAccount({model:t,editable:false});c.render(s);var u=new b.Squarespace.Widgets.ToggleButton;u.after("activeChange",function(){this.fire("edited");t.get("serviceName")!==S&&s.toggleClass("pushing",u.get("active"))},this);u.render(s);if(this.get("published")&&o){s.addClass("pushed").addClass("pushing");s.one(".sqs-toggle-button").insert('<div class="pending-push-msg"><div class="title">'+_("Content Push Pending")+'</div><div class="msg">This content is being sent to <span class="service-name">'+t.get("serviceName")+"</span>.</div></div>","after")}else if(r){s.addClass("pushed").addClass("pushing");s.one(".sqs-toggle-button").insert('<div class="already-pushed-msg"><div class="title">'+_("Content Already Pushed")+'</div><div class="msg">'+_('This content has already been sent to <span class="service-name">{serviceName}</span>. Click to re-send.',{serviceName:t.get("serviceName")})+"</div></div>","after")}u.set("active",l);var d=null;if(t.get("serviceName")===S)s.appendChild('<div class="desc">'+_("Content will be pushed to Tumblr in its entirety. No post format is needed.")+"</div>");else{var p=s.appendChild('<div class="format" type="text" spellcheck="false"><div class="structured-input"></div></div>');var h=b.Array.find(this._initialData,function(e){return e.connectedAccountId===t.get("id")});var g=b.Object.getValue(Static,["SQUARESPACE_CONTEXT","website","baseUrl"]);var m=b.Object.getValue(Static,["SQUARESPACE_CONTEXT","authenticatedAccount","displayName"]);var f=this.get("contentBox").one(".structured-input").getDOMNode().offsetWidth;var v=function(e){var t={overflowWrap:"break-word",display:"inline-block",maxWidth:f,paddingBottom:C.GRID_PX/2};return y.createElement("span",{style:t},e)};d=new b.Squarespace.DialogFields.StructuredInput({exampleTemplate:v,name:"defaultPushMessage",placeholder:"%t %u",variables:{"%t":{title:_("Title"),description:_("The title of this post."),exampleText:_("New Post Title")},"%a":{title:_("Author"),description:_("The author of this post."),exampleText:m},"%u":{title:_("URL"),description:_("The URL to this post."),exampleText:g+"/blog-post"}},data:h?h.message:t.get("defaultPushMessage"),render:p.one(".structured-input")})}this._widgets.push({account:c,toggle:u,format:d})}},{CSS_PREFIX:"sqs-dialog-item-push",ATTRS:{data:{getter:function(){if(!this._shownOnce)return this._initialData||[];return b.Array.map(this._widgets,function(e){var t=e.account.get("model");return{message:e.format&&e.format.get("data"),connectedAccountId:t.get("id"),pushEnabled:e.toggle.get("active")}})}},pushedServices:{value:{}},pendingPushedServices:{value:{}},models:{valueFn:function(){return new b.Squarespace.Models.ConnectedAccounts}},published:{value:false},recordType:{value:null}}})},"1.0",{requires:["base","squarespace-connected-account-capabilities","squarespace-connected-account-widget","squarespace-dialog-field-2","squarespace-models-connected-accounts","squarespace-singletons-location","squarespace-dialog-structured-input","squarespace-toggle","squarespace-widgets-confirmation"]})},"./src/main/webapp/universal/scripts-v6/dialog/dialog-label.js":function(e,t){YUI.add("squarespace-dialog-label",function(l){var a="-plugged";l.namespace("Squarespace.Plugin").DialogFieldLabel=l.Base.create("dialogFieldLabel",l.Plugin.Base,[],{initializer:function(e){this.afterHostMethod("renderUI",this._render,this);this.afterHostMethod("syncUI",this.syncLabel,this)},destructor:function(){l.detach(this.get("id")+"|*");var e=this.get("host"),t=e.get("boundingBox");e.get("rendered")&&t&&t._node&&e.get("boundingBox").removeClass(l.Squarespace.Plugin.DialogFieldLabel.CSS_PREFIX+a)},_render:function(){this.renderLabel();this.bindLabel();this.syncLabel();this.get("host").get("boundingBox").addClass(l.Squarespace.Plugin.DialogFieldLabel.CSS_PREFIX+a)},renderLabel:function(){this._labelNode=l.Node.create("<label></label>");this._labelNode.addClass(l.Squarespace.Plugin.DialogFieldLabel.CSS_PREFIX);var e=this._labelNode,t=this.get("renderNode"),a=this.get("className"),i=this.get("forNode"),s=this.get("host"),n=s.get("contentBox");a&&e.addClass(a);if(t){l.Lang.isString(t)&&(t=n.one(t));t.appendChild(e)}else if(i){l.Lang.isString(i)&&(i=n.one(i));var r=i.getAttribute("id");r&&e.setAttribute("for",r);i.insert(e,"before")}else{var o=n.one("input")||n.one("select")||n.one("textarea")||n.one("button");o.insert(e,"before")}},bindLabel:function(){var e=this.get("id");this.on(e+"|classNameChange",function(e){this._labelNode.removeClass(e.prevVal);this._labelNode.addClass(e.newVal)},this)},syncLabel:function(){this._labelNode.setContent(this.get("strings.text"))}},{NS:"label",CSS_PREFIX:"sqs-dialog-field-label",ATTRS:{strings:{value:{text:""}},renderNode:{value:null},className:{value:null},forNode:{value:null}}});l.namespace("Squarespace.DialogFields").DialogFieldLabel=function(e){l.Do.before(function(){this.plug(l.Squarespace.Plugin.DialogFieldLabel,l.merge({renderNode:e.labelRenderNode||null,forNode:e.labelForNode||null,className:e.labelClassName||null,"strings.text":this.get("strings.label")},e.labelConfig||{},this.getProperty("LABEL_CONFIG")||{}))},this,"renderUI",this)};l.Squarespace.DialogFields.DialogFieldLabel.NAME="dialogFieldLabel"},"1.0",{requires:["base","node","plugin","squarespace-dialog-field-2"]})},"./src/main/webapp/universal/scripts-v6/dialog/dialog-layout.js":function(e,t){YUI.add("squarespace-dialog-layout",function(s){s.namespace("Squarespace.DialogFields");s.namespace("Squarespace.Block.Editor");var e=s.Squarespace.DialogFields.Layout=s.Base.create("Layout",s.Squarespace.DialogField2,[],{initializer:function(){this._didDataChange=false},destructor:function(){var e=this.get("editController");e.destroyLayoutEditor(this.getLayoutNode());e.destroyBlockTrashInstance();this._imageLoaderRefreshHandle&&this._imageLoaderRefreshHandle.detach();var t=s.Array.some(s.Squarespace.Block.Editor.OPEN_DIALOGS,function(e){return e.layout===this.get("contentBox")},this);while(t&&s.Squarespace.Block.Editor.OPEN_DIALOGS&&s.Squarespace.Block.Editor.OPEN_DIALOGS.length)s.Squarespace.Block.Editor.OPEN_DIALOGS.shift().dialog.close();if(this._ecb){this._ecb.destroy();this._ecb=null}},renderUI:function(){this.get("scroll")||this.get("contentBox").one(".sqs-layout-scroll").plug(s.Squarespace.Plugin.ScrollLock);this.get("hideNodeExpander")||(this._nodeExpander=this.get("contentBox").one(".sqs-layout-wrapper").plug(s.Squarespace.Plugins.NodeExpander).NodeExpander)},bindUI:function(){var e=this.get("dialog");var t=this.get("editController");if(s.Lang.isValue(e)){this.after("focusedChange",function(e){this._replugImageLoader();if(e.newVal){t.alignInsertPoints(this.getLayoutNode());t.updateInsertMarkerConstrainNode()}},this);this.get("hideNodeExpander")||this._bindExpanderEvents(e);e.on("ready",this._onReady,this)}this._registerEvent(this.get("contentBox").one(".add-block").on("click",function(e){this.get("editController").showBlockMenu({align:{node:e.target,points:[s.WidgetPositionAlign.BR,s.WidgetPositionAlign.BR]},layoutNode:this.getLayoutNode()});this.get("dialog").fire("button-click",{type:"add-block"})},this))},syncUI:function(){var e=this._getECB().get("layout");var t=this.get("editController");var a=t.getBlockTrashInstance().get("boundingBox");this.get("boundingBox").append(a);var i=this.get("id");e.detach(i+"|*");this._didDataChange=false;this._registerEvent(e.after(i+"|change",function(e){if(e.changed.rows&&"setInitialData"!==e.source){this._didDataChange=true;this.get("dialog").setEdited()}},this))},_bindExpanderEvents:function(t){var a=this.get("editController");var i="sqs-node-expander-active";if(s.Lang.isValue(t)){this._nodeExpander.on("expand-start",function(e){t.el.addClass(i);t.overlayEl.addClass(i)},this);this._nodeExpander.on("contract-end",function(e){t.el.removeClass(i);t.overlayEl.removeClass(i)},this)}this._nodeExpander.on(["expand-start","contract-start"],function(){a.disableInsertPoints()});this._nodeExpander.on(["contract-end","expand-end"],function(e){a.enableInsertPoints();a.updateInsertMarkerConstrainNode()},this);this._nodeExpander.on(["contract-end","expand-end","expand-resized"],function(e){a.alignInsertPoints()},this)},show:function(){e.superclass.show.apply(this,arguments);this._hasLayoutEditor()||this._pluginLayout()},didDataChange:function(){return this._didDataChange},_hasLayoutEditor:function(){return!!this.getLayoutNode()[s.SQS.LayoutEngine.Layout.Editor.NS]},getLayoutEditor:function(){return this.getLayoutNode()[s.SQS.LayoutEngine.Layout.Editor.NS]||null},getLayoutNode:function(){return this.get("contentBox").one(".sqs-layout")},_pluginLayout:function(){s.SQS.LayoutEngine.PageLayoutTools.sanitizeImportedECB(this._getECB());var t=this._getECB().get("layout");var e=this.get("dialog")?this.get("dialog").getInitialData():this.get("contentItem");var a=s.Object.getValue(e,"collectionId");var i=s.Object.getValue(e,"id");t.set("collectionId",a);t.set("contentItemId",i);i||this.get("contentItem").once("idChange",function(e){t.set("contentItemId",e.newVal)});this._syncLayoutBuilderAndEditor()},_syncLayoutBuilderAndEditor:function(){var e=this.getLayoutNode();var t=this._getECB().get("layout");var a=this.get("editController");a.destroyLayoutEditor(e);a.pluginLayoutEditor({layoutNode:e,layoutModel:t,scrollNode:e});if(!this._imageLoaderRefreshHandle){var i=s.SQS.LayoutEngine.Events;this._imageLoaderRefreshHandle=i.on("layout-engine:grid-cleaned",function(){s.Squarespace.ImageLoadManager.refreshAll()})}},createLoadingOverlay:function(){this._loadingOverlay=this.get("contentBox").plug(s.Squarespace.Plugins.LoadingOverlay,{spinnerConfig:{size:"extra-large",color:"dark"}}).loadingOverlay},hideLoadingOverlay:function(){this._loadingOverlay.set("visible",false)},_getECB:function(){s.Lang.isValue(this._ecb)||(this._ecb=new s.SQS.LayoutEngine.Models.EditableContentBlock);return this._ecb},_setData:function(e,t,a){if(e){this._getECB().setAttrs(e,a);this._hasLayoutEditor()&&this._syncLayoutBuilderAndEditor()}},_getData:function(e){if(!this.get("rendered"))return e;var t=this._ecb.toJSON();return t},_onReady:function(){var e=this.getLayoutNode();var t=this.get("editController");t.alignInsertPoints(e);t.setInsertMarkerLayout(e);s.Lang.isValue(this.get("dialog"))&&this._registerTimer(s.later(500,this,function(){t.updateInsertMarkerConstrainNode(this.get("dialog").zIndex+1)}))},_replugImageLoader:function(){this.get("contentBox").all("img").each(function(e){if(e.hasPlugin(s.Squarespace.Loader2.NS)){var t=e.getAttribute("src");if(!s.Lang.isValue(t)||0===t.length){e.unplug(s.Squarespace.Loader2);e.plug(s.Squarespace.Loader2)}}})},CONTENT_TEMPLATE:'<div><div class="sqs-layout-wrapper"><div class="sqs-layout-scroll"><div class="sqs-layout"></div></div><button class="add-block" tabindex="-1"></button></div></div>'},{CSS_PREFIX:"sqs-dialog-layout-wrapper",ATTRS:{data:{lazyAdd:false,setter:"_setData",getter:"_getData"},dialog:{getter:function(e){if(s.Object.isEmpty(e))return this.get("panel");return e}},editController:{getter:function(){return s.Squarespace.LayoutEngine.EditController.getInstance()}},contentItem:{value:null},panel:{value:null},scroll:{value:false},hideNodeExpander:{value:false}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-block-editor-dialog","squarespace-dialog","squarespace-dialog-field-2","squarespace-layout-engine-edit-controller","squarespace-image-loader","@sqs/layout-engine/layout-builder","@sqs/layout-engine/events","@sqs/layout-engine/models-layout","squarespace-plugin-loading-overlay","squarespace-plugin-node-expander","squarespace-plugin-scroll-lock","squarespace-util-authenticated","widget-position-align"]})},"./src/main/webapp/universal/scripts-v6/dialog/dialog-map.js":function(e,t,a){var r=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var o=a("./common/temp/node_modules/lodash/debounce.js");var i=a("./src/main/webapp/universal/src/shared/constants/LayoutEngineClassnames.js");var l=i.DISABLE_DRAG_SELECTION_CLASSNAME;var c=a("./common/temp/node_modules/@sqs/site-rendering/Maps/MapView.js");var u=a("./src/main/webapp/universal/src/shared/utils/analytics/trackInternal.ts");YUI.add("squarespace-dialog-map",function(v){var i=13;var s=function(e){e.stopPropagation()};v.namespace("Squarespace.DialogFields");var n=v.Squarespace.DialogFields.Map=v.Base.create("dialogMap",v.Squarespace.DialogField2,[],{initializer:function(e){e.googleTrackingContext&&(this.googleTrackingContext=e.googleTrackingContext);e.panel&&(this.panel=e.panel)},destructor:function(){this.geocodeAndUpdateAddress.flush();this._locker&&this._locker.cancel();if(this._autocomplete){this._autocomplete.destroy();this._autocomplete=null}},renderUI:function(){n.superclass.renderUI.call(this);if(this.get("anchorMap"))this._mapDisplay=this.panel.getAnchorEl();else{this._initMapEl();this.show()}this._renderGoogleAutoComplete()},bindUI:function(){n.superclass.bindUI.call(this);var e=this.get("contentBox");var t=e.one(".map-address-fields").all(".field-input");t.each(function(e){e.on("keyup",this._updateDataBasedOn,this);e.on("focus",this._updateDataAfterBlur,this)},this);e.on("click",s);this._mapDisplay.on("click",s);var a=this.get("dialog")||this.get("panel");v.Lang.isValue(a)&&(this._rerenderHandler=a.after("tab-focused",function(e){this.map&&this._drawMap()},this));this._bindGoogleAutoComplete()},_renderGoogleAutoComplete:function(){var e=v.Squarespace.Damask.ContextGlobals.fromTop("Y");var t=this.get("boundingBox");u("google_maps_map_api_load_on_edit");this._autocomplete=new e.Squarespace.Widgets.GooglePlacesAutocomplete({inputNode:t.one("input.map-address-line1"),className:"sqs-dialog-map-google-autocomplete",googleTrackingContext:this.googleTrackingContext||{}});var a=t.ancestor(".standard-dialog-wrapper")||v.one("body");this._autocomplete.render(a);this._autocomplete.get("boundingBox").setStyle("zIndex",v.Squarespace.DIALOG_ZINDEX_BASE+10)},_bindGoogleAutoComplete:function(){this._lockedForAutocomplete=false;this._autocomplete.on("listMouseDown",function(){this._lockedForAutocomplete=true;this._locker=v.later(1e3,this,function(){this._lockedForAutocomplete=false},this)},this);this._autocomplete.on("keyboardContinue",function(){this._lockedForAutocomplete=true},this);this._autocomplete.on("select",function(){this._lockedForAutocomplete=true},this);this._autocomplete.on("placeDetails",this._populateFieldsFromAutocomplete,this)},_initMapEl:function(){this._mapDisplay=v.Node.create('<div class="field-map '+l+'"><div class="field-map-inner">'+r("Use the field above to select a location.")+"</div></div>");this.get("contentBox").one(".field-wrapper").append(this._mapDisplay);this.get("height")&&this._mapDisplay.setStyle("height",this.get("height"))},_updateDataAfterBlur:function(e){e.target&&e.target.once("blur",this._updateDataBasedOn,this)},_populateFieldsFromAutocomplete:function(e){var t=this.get("contentBox");var a=t.one(".map-address-line2");t.one(".map-address-line1").set("value",e.place.address);a.set("value",e.place.fullLocality);t.one(".map-address-country").set("value",e.place.country);this._lockedForAutocomplete=false;var i;if(this.get("showTitle")){var s=t.one(".map-address-title");s.focus();i=s.get("value")}else{a.focus();i=this.get("data").title}var n={addressTitle:i,addressLine1:e.place.address,addressLine2:e.place.fullLocality,addressCountry:e.place.country,markerLat:this.map.center.lat(),markerLng:this.map.center.lng()};if(!this.didDataChange(n))return;this.set("data",n,{silent:true});this.geocodeAndUpdateAddress()},_updateDataBasedOn:function(e){if(this._lockedForAutocomplete)return;if("blur"===e.type||e.keyCode&&e.keyCode===i){var t=this.get("contentBox");var a={addressLine1:t.one(".map-address-line1").get("value"),addressLine2:t.one(".map-address-line2").get("value"),addressCountry:t.one(".map-address-country").get("value")};this.get("showTitle")&&(a.addressTitle=t.one(".map-address-title").get("value"));if(e.keyCode){a.markerLat=this.map.center.lat();a.markerLng=this.map.center.lng()}if(!this.didDataChange(a))return;this.set("data",v.merge(this.get("data"),a),{silent:true});this.geocodeAndUpdateAddress()}},_clearLatLngData:function(e){e=v.Lang.isValue(e)?e:this.get("data");delete e.markerLat;delete e.markerLng;delete e.mapLat;delete e.mapLng;return e},geocodeAndUpdateAddress:o(function(){var r=this.get("data");var e=this.getSearchableAddress(r);if(!v.Lang.isValue(e))return;var t={address:e};var a=function(e,t){if(t===this.GMaps.GeocoderStatus.OK){var a=e[0].geometry.location;var i=a.lat();var s=a.lng();var n={mapLat:i,mapLng:s};n.markerLat=i;n.markerLng=s;this._updateMap({markerLatLng:v.Lang.isValue(n.markerLat)?a:null,mapCenterLatLng:a,mapOnlyUpdate:true});this.set("data",v.merge(r,n))}else this.showMessageForGeocoderStatus(t);v.Lang.isValue(this.panel)&&this.panel.fire("geocode",this)};u("google_maps_map_api_geocode_on_edit");this._geocoder.geocode(t,v.bind(a,this))},120),show:function(){this.set("visible",true);this._showMap()},_showMap:function(){this.mapView?this._refreshMapAndCenter():this.get("anchorMap")&&!this._mapDisplay.__view?this._mapDisplay.on("map-ready",function(e){this._drawMap()},this):this._drawMap()},_refreshMapAndCenter:function(){this._mapDisplay.setStyle("display","block");this.mapView&&this.mapView.centerMarker()},_drawMap:function(){if(this.get("destroyed"))return;if(this.get("anchorMap")){this.mapView=this._mapDisplay.__view;this._prepareMap()}else{var e=v.merge(this.get("defaultLocation"),this.get("data"));var t={disableDefaultUI:false,showControls:true,scrollwheel:this.get("scrollwheelEnabled"),linkOnClick:false};u("google_maps_map_load_on_edit");c.createView(t,e,this._mapDisplay.getDOMNode()).then(v.bind(function(e){this.mapView=e;this._prepareMap()},this)).catch(function(e){console.error(e)})}},_prepareMap:function(){this.map=this.mapView.map;this.GMaps=this.mapView.GMaps;this._geocoder=new this.GMaps.Geocoder;this.marker=this.mapView.marker;this.mapView.updateUIOptions({markerDraggable:true});this.GMaps.event.addListener(this.map,"idle",v.bind(this._updateDataFromGoogleMaps,this));this.GMaps.event.addListener(this.map,"dblclick",v.bind(this._updateMarker,this));this.bindMarkerDragEvent();this._mapDisplay.on("marker-created",this.bindMarkerDragEvent,this);this._setInitialState()},_updateMarker:function(e){v.Lang.isValue(e.latLng)&&this._updateMap({markerLatLng:e.latLng})},_updateDataFromGoogleMaps:function(){var e;var t=this.map;var a=this.marker;var i={};if(v.Lang.isNumber(t.center.lat())&&v.Lang.isNumber(t.center.lng())){i.mapLat=t.center.lat();i.mapLng=t.center.lng();i.mapZoom=t.getZoom()}if(a&&a.visible){i.markerLat=a.getPosition().lat();i.markerLng=a.getPosition().lng()}if(this.didDataChange(i)){e=v.merge(this.get("data"),i);this.set("data",e,{silent:true})}},_updateMap:function(e){if(this._mapDisplay.ancestor(".sqs-block",true))return;if(this.map){v.Lang.isValue(e.markerLatLng)&&this._setMarkerPosition(e.markerLatLng,e.mapOnlyUpdate);v.Lang.isUndefined(e.mapCenterLatLng)||this.isContainedInMap(this.map,e.markerLatLng)||this._setMapPosition(e.mapCenterLatLng,e.zoom)}},_setMapPosition:function(e,t){v.Lang.isValue(e)&&this.mapView.updateCenter(e.lat(),e.lng());v.Lang.isValue(t)&&this.mapView.setZoom(t)},_setMarkerPosition:function(e,t){this.mapView.updateMarker(e.lat(),e.lng());t||this._onMarkerChange()},bindMarkerDragEvent:function(){this.marker||(this.marker=this.mapView.marker);if(this.marker){var e=this.GMaps;v.Lang.isUndefined(this.markerDragListener)||e.event.removeListener(this.markerDragListener);this.markerDragListener=e.event.addListener(this.marker,"dragend",v.bind(this._onMarkerChange,this))}},isContainedInMap:function(e,t){if(v.Lang.isValue(e)&&v.Lang.isValue(t)){var a=e.getBounds();if(v.Lang.isValue(a))return a.contains(t)}return false},_onMarkerChange:function(){u("google_maps_map_api_geocode_on_edit");this._geocoder.geocode({location:this.marker.getPosition()},v.bind(function(e,t){t===this.GMaps.GeocoderStatus.OK?this.updateFormFields(e[0].address_components):this.showMessageForGeocoderStatus(t)},this))},_setInitialState:function(){var e=this.get("data");var t=this.get("contentBox");if(v.Lang.isObject(e)){e.addressTitle&&this.get("showTitle")&&t.one(".map-address-title").set("value",e.addressTitle);e.addressLine1&&t.one(".map-address-line1").set("value",e.addressLine1);e.addressLine2&&t.one(".map-address-line2").set("value",e.addressLine2);e.addressCountry&&t.one(".map-address-country").set("value",e.addressCountry);if(e.forceLoc){this.geocodeAndUpdateAddress();return}var a=this.GMaps;if(this.map&&!v.Lang.isUndefined(a)){var i;var s;e.markerLat&&e.markerLng&&(i=new this.GMaps.LatLng(e.markerLat,e.markerLng));e.mapLat&&e.mapLng&&(s=new this.GMaps.LatLng(e.mapLat,e.mapLng));this._updateMap({markerLatLng:i,mapCenterLatLng:s,zoom:e.mapZoom,mapOnlyUpdate:true})}}},updateFormFields:function(e){var t=this.get("contentBox");var a=this.get("data")||{};var i=t.one(".map-address-line1");var s=t.one(".map-address-line2");var n=t.one(".map-address-country");var r;var o;var l;var c;var u;var d;var p=[];var h=[];v.Object.each(e,function(e){if(-1!==e.types.indexOf("locality")){o=e.short_name;return}if(-1!==e.types.indexOf("administrative_area_level_1")){l=e.short_name;return}if(-1!==e.types.indexOf("country")){r=e.long_name;return}if(-1!==e.types.indexOf("route")){u=e.short_name;return}if(-1!==e.types.indexOf("street_number")){c=e.short_name;return}-1!==e.types.indexOf("postal_code")&&(d=e.short_name)},this);c&&p.push(c);u&&p.push(u);o&&h.push(o);l&&h.push(l);d&&h.push(d);if(i){i.set("value",p.join(" "));a.addressLine1=i.get("value")}if(s){s.set("value",h.join(", "));a.addressLine2=s.get("value")}if(n){n.set("value",r);a.addressCountry=n.get("value")}if(v.Lang.isValue(this.marker)){var g=this.marker.getPosition().lng();var m=this.marker.getPosition().lat();var f={markerLat:m,markerLng:g,mapLat:m,mapLng:g};a=v.merge(a,f)}this.set("data",a)},showMessageForGeocoderStatus:function(e){var t=this.GMaps;e===t.GeocoderStatus.OVER_QUERY_LIMIT?new v.Squarespace.Widgets.Alert({"strings.title":r("Too Many Queries"),"strings.message":r("You have exceeded Google Maps' maximum query rate. Please wait a moment before resuming.")}):e!==t.GeocoderStatus.ZERO_RESULTS&&new v.Squarespace.Widgets.Alert({"strings.title":r("Lookup Failed"),"strings.message":r("Address lookup was not successful: {geocodeStatus}",{geocodeStatus:status})})},getSearchableAddress:function(e){var t=[];""!==e.addressLine1&&t.push(e.addressLine1);""!==e.addressLine2&&t.push(e.addressLine2);""===e.addressTitle||t.length||t.unshift(e.addressTitle);""!==e.addressCountry&&t.push(e.addressCountry);return t.join(", ")},_roundedEqual:function(e,t){return v.Lang.isNumber(e)&&v.Lang.isNumber(t)&&Number(e).toFixed(6)===Number(t).toFixed(6)},didDataChange:function(e){var o=(e?this.get("data"):this._initialData)||{};var t=e||this.get("data");var l=this.get("defaultLocation");if(!v.Lang.isObject(t))return false;return v.Object.some(t,function(e,t){var a=o[t];var i=e===o[t]||this._roundedEqual(e,a);if(i)return false;var s=!v.Object.hasKey(l,t);var n=v.Lang.isValue(a);var r=this._roundedEqual(e,l[t]);return s||!(r&&n)},this)}},{CSS_PREFIX:"sqs-maps",HANDLEBARS_TEMPLATE:"dialog-map.html",ATTRS:{anchorMap:{},scrollwheelEnabled:{value:true},data:{setter:o(function(e){return e},100,{leading:true,trailing:true})},defaultLocation:{valueFn:function(){var e={mapLat:40.7207559,mapLng:-74.0007613,mapZoom:12};if(Static.SQUARESPACE_CONTEXT){var t=Static.SQUARESPACE_CONTEXT.website;t&&t.location&&(e=v.merge(e,t.location))}return e}},strings:{value:{placeholderAddressTitle:r("Business Name"),placeholderAddress1:r("Address"),placeholderAddress2:r("City, State, Zip"),placeholderAddressCountry:r("Country")}},showTitle:{value:true,validator:v.Squarespace.AttrValidators.isBoolean}}})},"1.0",{requires:["base","node","squarespace-attr-validators","squarespace-damask-context-globals","squarespace-dialog","squarespace-dialog-field-2","squarespace-dialog-map-template","squarespace-util","squarespace-widgets-alert","squarespace-widgets-google-places-autocomplete"]})},"./src/main/webapp/universal/scripts-v6/dialog/dialog-money-text.js":function(e,t){YUI.add("squarespace-dialog-money-text",function(e){e.namespace("Squarespace.DialogFields");var t=e.Squarespace.DialogFields.MoneyText=e.Base.create("moneyText",e.Squarespace.DialogFields.Text,[],{renderUI:function(){t.superclass.renderUI.call(this);this.get("contentBox").one("input").plug(e.Squarespace.Plugin.MoneyFormatter)},bindUI:function(){var e=this.get("contentBox").one("input");e.on("valuechange",function(){this.set("data",e.moneyFormatterPlugin.get("data"))},this)}},{CSS_PREFIX:"sqs-money-text",LABEL_CONFIG:{forNode:"input[type]"},ATTRS:{data:{value:0,validator:e.Lang.isNumber},validator:{value:e.Lang.isNumber}}})},"1.0",{requires:["base","squarespace-commerce-utils","squarespace-dialog-text","squarespace-plugin-money-formatter"]})},"./src/main/webapp/universal/scripts-v6/dialog/dialog-multi-frame.js":function(e,t){YUI.add("squarespace-dialog-multi-frame",function(s){var a=s.namespace("Squarespace.DialogFields").MultiFrame=s.Base.create("multiFrame",s.Squarespace.DialogField2,[],{initializer:function(){this.get("data")||this.set("data",this.get("frames")[0])},destructor:function(){this._frameWrapper=null},renderUI:function(){a.superclass.renderUI.call(this);this._frameWrapper=s.Node.create('<div class="multi-frame-wrapper"></div>');this.get("contentBox").append(this._frameWrapper);this.get("frames").forEach(this._renderFrameAndChildFields,this);this.get("variableHeight")&&this.get("boundingBox").addClass("variable-height")},syncUI:function(){a.superclass.syncUI.call(this);this._syncFrameSize();this._syncVisibleFrame();this.get("rendered")?this._syncAnimateClass():s.soon(this._syncAnimateClass.bind(this));if(this.get("variableHeight")){var e=this.get("contentBox").one('[data-name="'+this.get("data")+'"]');var t=e.get("offsetHeight");this.set("height",t)}},_renderFrameAndChildFields:function(e){var t=s.Node.create('<div class="frame" data-name="'+e.name+'"></div>');t.appendTo(this._frameWrapper);e.fields.forEach(this._renderField.bind(this,t))},_renderField:function(e,t){var a=s.merge(t.config,{render:e,childType:t.ctor});var i=this.get("dialog");if(i){a.dialog=i;a.data=i.params.initialData[a.name]}this.add(a)},_syncAnimateClass:function(){this._frameWrapper.toggleClass("animate-switch",this.get("animate"))},_syncFrameSize:function(){this._frameWrapper.setAttribute("data-frame-size",this.get("frames").length)},_syncVisibleFrame:function(){this._frameWrapper.setAttribute("data-frame-visible-index",this._getFrameIndex(this.get("data")))},switchFrames:function(e){this.set("data",e);this._syncVisibleFrame()},getField:function(t){var a;this.each(function(e){e.get("name")===t&&(a=e)},this);return a},_getFrameIndex:function(e){var t=this.get("frames");for(var a=0;a<t.length;a++)if(t[a].name===e)return a}},{CSS_PREFIX:"sqs-multi-frame",ATTRS:{variableHeight:{value:false},animate:{value:true},frames:{value:null},readOnly:{value:true}}})},"1.0",{requires:["base","squarespace-dialog-field-2"]})},"./src/main/webapp/universal/scripts-v6/dialog/dialog-multi-option.js":function(e,t,a){var r=a("./src/main/webapp/universal/src/shared/utils/BlockFeatureGatingUtils.js");YUI.add("squarespace-dialog-multi-option",function(n){var e=n.namespace("Squarespace.DialogFields").MultiOption=n.Base.create("multiOption",n.Squarespace.DialogField2,[],{initializer:function(e){this.get("data")||n.Lang.isUndefined(e.defaultValue)||this.set("data",e.defaultValue);this._selectedOptionEl=null;this.publish("option-click",{broadcast:2})},renderUI:function(){e.superclass.renderUI.call(this);this._renderTitle();this._renderOptions()},bindUI:function(){this._registerEvent(this.get("contentBox").delegate("click",this._onOptionClick,".option",this));this.after("optionsChange",this._renderOptions);this.after("optionsChange",this.syncUI);this.after("stringsChange",this._renderTitle)},syncUI:function(){e.superclass.syncUI.call(this);this._setupOptionWidths();this._setHeight()},selectOption:function(t){this.get("contentBox").all(".option").each(function(e){this._optionMatchesData(e,t)&&this._selectOption(e)},this)},_renderTitle:function(){var e=this.get("strings.title");var t=this.get("contentBox");var a=t.one(".title");e&&n.Lang.isNull(a)?t.append(n.Node.create('<div class="title">'+this.get("strings.title")+"</div>")):e?a.empty().setHTML(this.get("strings.title")):e||n.Lang.isNull(a)||a.remove(true)},_renderOptions:function(){var s=this.get("contentBox");var e=this.get("options");s.all(".option").remove();n.Array.each(e,function(e){if(e.section){s.append(n.Node.create('<div class="option-label">'+e.section+"</div>"));return}var t=n.Node.create(n.Lang.sub('<div class="option" data-value="{value}" data-test="MultiOption {value}"><div class="option-content"><div class="option-title">{title}</div></div></div>',e));t.setData(e);var a=t.one(".option-content");var i=e.description;i&&a.append(n.Node.create('<div class="option-description">'+i+"</div>"));e.childNode instanceof n.Node&&a.append(e.childNode);e.icon?t.addClass("icon-"+e.icon):t.addClass("no-icon");s.append(t);this._optionMatchesData(t)&&this._markSelected(t);e.locked&&t.addClass("locked");if(e.upsellLocked){"object"!==typeof e.upsellInfo&&(e.upsellInfo={});t.addClass("upsell-locked");t.one(".option-title").insert('<span class="option-logo"></span>',"after");this._registerEvent(t.on("click",function(){t.one(".option-logo button").getDOMNode().click()}));r.renderLogo({node:t.one(".option-logo").getDOMNode(),analyticsId:"commerce-add-product",featureGateClass:".sqs-featuregate-logo",upsellCopyOverrides:e.upsellInfo})}},this)},_setHeight:function(){var e=this.get("contentBox");var t=this.get("options");var a=e.one(".option");if(!a)return;var i=parseFloat(a.getComputedStyle("height"));var s=parseFloat(a.getComputedStyle("paddingTop"))+parseFloat(a.getComputedStyle("paddingBottom"));var n=this.get("columns")||t.length;var r=Math.ceil(t.length/n);e.setStyle("height",Math.ceil((i+s)*r))},_selectOptions:function(){this.get("contentBox").all(".option").each(function(e){this._optionMatchesData(e)&&this._selectOption(e)},this)},_optionMatchesData:function(e,t){n.Lang.isUndefined(t)&&(t=this.get("data"));var a=e.getData("value");if(this.get("numeric"))return t===n.Number.parse(a);n.Lang.isObject(a)&&n.Lang.isObject(t)&&false;return t===a},_onOptionClick:function(e){var t=e.target.hasClass("option")?e.target:e.target.ancestor(".option");var a=this.get("optionClickCb");if(!t.hasClass("upsell-locked")&&!t.hasClass("locked")){e.halt();this._selectOption(t)}n.Lang.isFunction(a)&&a(this.get("data"));this.fire("option-click",{option:this.get("data")})},_markSelected:function(e){if(e===this._selectedOptionEl)return;this._selectedOptionEl&&this._selectedOptionEl.removeClass("selected");e.addClass("selected");this._selectedOptionEl=e},_selectOption:function(e){if(e===this._selectedOptionEl)return;this._markSelected(e);var t=e.getData("value");if(this.get("numeric")){var a=n.Number.parse(t);n.Lang.isNumber(a)&&(t=a)}this.set("data",t);if(this.get("submitOnSelect")){var i=this.get("dialog");n.Lang.isValue(i)&&i.saveAndClose()}},_setupOptionWidths:function(){var e=this.get("columns")||this.get("options").length;parseInt(e,10)>0&&this.get("boundingBox").addClass(this.getClassName("columns-"+e))}},{CSS_PREFIX:"sqs-multi-option",ATTRS:{data:{setter:function(e){return this.get("numeric")?n.Number.parse(e):e}},options:{value:null},optionClickCb:{value:null,setter:function(e){if(!n.Lang.isFunction(e))return null;return e}},submitOnSelect:{value:false},columns:{value:null},numeric:{value:false,validator:n.Lang.isBoolean},readOnly:{value:true}}})},"1.0",{requires:["base","datatype-number-parse","squarespace-dialog-field-2"]})},"./src/main/webapp/universal/scripts-v6/dialog/dialog-music-track-list.js":function(e,t){YUI.add("squarespace-dialog-music-track-list",function(t){var a=t.namespace("Squarespace.DialogFields").TrackList=t.Base.create("TrackList",t.Squarespace.DialogField2,[],{initializer:function(e){a.superclass.initializer.apply(this,arguments);this._initalizeTrackList();this.after("dataChange",this._initalizeTrackList,this)},destructor:function(){if(this._trackList){this._trackList.destroy();this._trackList=null}},renderUI:function(){a.superclass.renderUI.apply(this,arguments);this._trackList.render(this.get("contentBox"))},bindUI:function(){a.superclass.bindUI.apply(this,arguments);this.after("dataChange",function(e){this._trackList.set("collection",e.newVal)});this.after("uploadPreflightChange",function(e){this._trackList.set("uploadPreflight",e.newVal)})},syncUI:function(){a.superclass.syncUI.apply(this,arguments)},_initalizeTrackList:function(){this._trackList&&this._trackList.destroy();var e=this.get("data");t.Lang.isNull(e)&&false;this._trackList=new t.Squarespace.Widgets.MusicAlbums.ListView({collection:e,items:e.items,stickyHeadersEnabled:false,uploadPreflight:this.get("uploadPreflight"),spinnerColor:this.get("spinnerColor")})},didDataChange:function(){return true}},{CSS_PREFIX:"sqs-music-track-list-field",ATTRS:{data:{validator:t.Squarespace.AttrValidators.isInstanceOf(t.Squarespace.Models.ContentCollection)},spinnerColor:{valueFn:function(){return"dark"}},uploadPreflight:{valueFn:function(){return t.bind(function(e){this.get("data").save({},e)},this)}},cloneInitialData:{value:false}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-dialog-field-2","squarespace-models-content-collection","squarespace-util","squarespace-widgets-music-albums-list-view"]})},"./src/main/webapp/universal/scripts-v6/dialog/dialog-numeric-text.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-dialog-numeric-text",function(e){var t=e.Squarespace.DialogFields.NumericText=e.Base.create("numericText",e.Squarespace.DialogFields.Text,[],{renderUI:function(){t.superclass.renderUI.call(this);this.get("contentBox").one("input").plug(e.Squarespace.Plugin.NumericFormatter,{displayFormatter:this.get("displayFormatter")})},bindUI:function(){t.superclass.bindUI.call(this);var e=this.get("contentBox").one("input");e.on("valuechange",function(){this.set("data",e.numericFormatterPlugin.get("data"))},this)},getErrors:function(){if(!this.get("validator")(this.get("data")))return[this.get("strings.validationFailMessage")];return[]}},{CSS_PREFIX:"sqs-numeric-text",LABEL_CONFIG:{forNode:"input[type]"},ATTRS:{strings:{value:{validationFailMessage:i("This must be numeric.")}},displayFormatter:{validator:e.Lang.isFunction,value:function(e){return e}},validator:{value:e.Lang.isNumber},data:{value:0,validator:e.Lang.isNumber}}})},"1.0",{requires:["base","squarespace-dialog-text","squarespace-plugin-numeric-formatter"]})},"./src/main/webapp/universal/scripts-v6/dialog/dialog-oembed.js":function(e,t,a){var i=a("./common/temp/node_modules/lodash/debounce.js");var c=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/universal/src/shared/utils/analytics/trackInternal.ts");var u=a("./src/main/webapp/universal/src/shared/utils/UrlUtils.js").isProperUrl;YUI.add("squarespace-dialog-oembed",function(l){var t=l.namespace("Squarespace.DialogFields").Oembed=l.Base.create("oembed",l.Squarespace.DialogField2,[],{destructor:function(){this._onChange.cancel();this._pendingTracking&&l.config.win.clearTimeout(this._pendingTracking)},renderUI:function(){t.superclass.renderUI.call(this);var e=this.get("contentBox");this._input=e.one(".input");this._manual=e.one(".manual");this._status=e.one(".status");this._updateStatus(true)},bindUI:function(){this._input.on("contextmenu",function(e){e.stopImmediatePropagation()});this._input.after("valuechange",this._onChange,this);this._manual&&this._manual.on("click",this._setManually,this)},syncUI:function(){t.superclass.syncUI.call(this);var e=l.Lang.isValue(this.get("strings.title"))&&this.get("strings.title").length>0;this.get("boundingBox").toggleClass("has-title",e)},focus:function(){this._input.focus()},didDataChange:function(){return this.get("edited")},_getEmbedModelJSON:function(e){var t={url:"",html:"",resolveObject:"",resolvedBy:"",resolved:false};if(!e)return t;return l.merge(t,e)},_updateStatus:function(e,t){if("manual"===this.get("data.resolvedBy")){this._input.set("value","");this._setStatus(false,c("Embed data has been manually set."));return}var a;if(e){a=this.get("data.url");this.set("lastUrl",this.get("data.url"))}else a=this.get("processingUrl");a?this.get("data.resolved")||this.get("data.resolvedBy")?this._setStatus(false,""):l.Lang.isString(t)?this._setStatus(false,t):this._setStatus(false,c("URL is not embeddable.")):this._setStatus(false,this.get("strings.description"))},_queueTrackFailure:function(t){var a=this.get("filter");this._pendingTracking&&l.config.win.clearTimeout(this._pendingTracking);this._pendingTracking=l.config.win.setTimeout(function(){var e=l.Object.some(l.Squarespace.oEmbedResolvers,function(e){return e.canProcess(t,a)});e||s("oembed_resolution_failure",{url:t});this._pendingTracking=null}.bind(this),1e3)},_onChange:i(function e(){var t=this._input.get("value");if(t===this.get("lastUrl"))return;this.set("processingUrl",t);this.set("lastUrl",this.get("processingUrl"));this.set("edited",true);if(""===this.get("processingUrl")){this._clear();this._updateStatus();return}var i=this.get("processingUrl");0!==i.search(/^https?:\/\//)&&(i="http://"+i.replace(/^\/\//,""));if(!u(i)){this._clear();this._updateStatus();return}var s=function(e,t,a){if(a!==i){this._clear(e);this._updateStatus();return}if(!t){this._clear(e);this._updateStatus();this._sendAnalyticsInfo("Empty",a);return}this.set("data",l.merge(this.get("data"),t));this._updateStatus();this._sendAnalyticsInfo("Success",a)};var n=function(e,t,a){this._clear(e);this._updateStatus();this._sendAnalyticsInfo("Failure",a)};var r=function(e,t,a){this._clear(e);this._updateStatus(null,c("The request to resolve this URL timed out, please try again.")+" ");this._sendAnalyticsInfo("Timeout",a)};var a=function(e,t){this._setStatus(true,c("Locating content at that URL…"));var a=e.getProvider();e.process(t,{onSuccess:s.bind(this,a),onFailure:n.bind(this,a),onTimeout:r.bind(this,a)},this)};var o=l.Object.some(l.Squarespace.oEmbedResolvers,function(e){if(e.canProcess(i,this.get("filter"))){a.call(this,e,i);return true}},this);if(!o){this._queueTrackFailure(i);a.call(this,l.Squarespace.oEmbedResolversGeneric,i);return}this._clear()},100),_sendAnalyticsInfo:function(e,t){s("system_oembed",{result:e,url:t})},_setStatus:function(e,t){this._status.empty(true);e&&new l.Squarespace.Spinner({render:this._status,color:"dark"});this._status.append(l.Node.create(t))},_setManually:function(){var t=new l.Squarespace.EditingDialog({style:"flyout",name:"edit-embed",closeOthers:false,overlay:.5,width:460,buttons:[{type:"cancel",title:c("Cancel")},{type:"saveAndClose",title:c("Set")}],primaryTabs:[{title:c("Embed Data"),icon:"/universal/images-v6/icons/icon-embed-16-light-solid.png",fields:[{ctor:l.Squarespace.DialogFields.TextArea,config:{name:"html","strings.placeholder":c("Paste a custom embed code here."),height:200}}]}]});t.on("send-requested",function(){var e={html:t.getData().html,resolvedBy:"manual",resolved:true};this.set("data",e);this.set("lastUrl",null);this.set("edited",true);this._updateStatus();t.close()},this);"manual"===this.get("data.resolvedBy")&&t.setInitialData({html:this.get("data.html")});this.get("dialog")&&this.get("dialog").addChildDialog(t);l.later(0,this,function(){t.show()})},_clear:function(e){var t={url:this._input.get("value")};e&&(t.resolvedBy=e);this.set("data",this._getEmbedModelJSON(t))}},{CSS_PREFIX:"sqs-oembed",HANDLEBARS_TEMPLATE:"dialog-oembed.html",ASYNC_DATA:true,ATTRS:{strings:{value:{title:"",description:"",inputPlaceholder:c("Enter an embeddable URL here")}},collection:{value:null},contentItem:{value:null},data:{value:{}},edited:{value:false},filter:{},item:{value:null},lastUrl:{value:null},manual:{value:true},processingUrl:{value:null}}})},"1.0",{requires:["base","event-valuechange","squarespace-dialog","squarespace-dialog-check","squarespace-dialog-field-2","squarespace-dialog-file-image","squarespace-dialog-oembed-template","squarespace-job-manager","squarespace-jobs","squarespace-oembed-resolvers","squarespace-spinner","squarespace-util"]})},"./src/main/webapp/universal/scripts-v6/dialog/dialog-pinterest-meta-data.js":function(e,t,a){var s=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-dialog-pinterest-meta-data",function(i){var t=i.namespace("Squarespace.DialogFields").PinterestMetaData=i.Base.create("pinterestMetaData",i.Squarespace.DialogField2,[],{initializer:function(e){var t=this.get("boards");var a=this.add({childType:i.Squarespace.DialogFields.Select,"strings.title":s("Push Target"),"strings.placeholder":s("Select Board"),"strings.description":s("Select the board to which Pins will be pushed. If you don't yet have a board you can create one on Pinterest and reconnect your account."),name:"boards",options:t,data:e.data.selectedBoardId,className:"thin dark"});this._pushTargetSelect=a.item(0);i.after(this._setupErrorFlyoutAnchor,this,"renderUI")},bindUI:function(){this.on("dataChange",this.syncUI);this.on("select:dataChange",function(e){var t=this.get("data");e.newVal?t.selectedBoardId=e.newVal:delete t.selectedBoardId;this.set("data",t)},this)},didDataChange:function(){var e=this._initialData;var t=this.get("data");return e.selectedBoardId!==t.selectedBoardId},_setupErrorFlyoutAnchor:function(){this._set("errorFlyoutAnchor",this._pushTargetSelect.get("boundingBox").one(".select-facade"))},showError:function(e){t.superclass.showError.call(this,s("Select a Pinterest board to push content to."))},isEmpty:function(){var e=this.get("data");return e.boardConnections.length>0&&!e.selectedBoardId}},{CSS_PREFIX:"sqs-pinterest-metadata",ATTRS:{data:{value:{},setter:function(t){i.Array.each(t.boardConnections,function(e){e.selected=e.id===t.selectedBoardId})}},boards:{}}})},"1.0",{requires:["base","squarespace-dialog-field-2","squarespace-dialog-select"]})},"./src/main/webapp/universal/scripts-v6/dialog/dialog-pricing-placeholder.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-dialog-pricing-placeholder",function(t){t.namespace("Squarespace");var a=t.namespace("Squarespace.DialogFields").PricingPlaceholder=t.Base.create("pricingPlaceholder",t.Squarespace.DialogField2,[],{initializer:function(){},renderUI:function(){a.superclass.renderUI.call(this);this.get("boundingBox").addClass("field-wrapper").addClass("major");this.get("contentBox").one(".placeholder").plug(t.Squarespace.Plugin.PulseWarn,{iterations:1,color:"#C1B12E"});if(this.get("data.variants")&&0===this.get("data.variants").length){var e={sku:t.Squarespace.Commerce.generateSKU(),price:0,salePrice:0,onSale:false,qtyInStock:1,len:0,width:0,height:0,attributes:{}};this.get("data").variants.push(e)}this._edited=false},bindUI:function(){this.get("contentBox").on("click",function(){this.fire("clicked")},this);this.after("dataChange",function(){this._edited=true;this.syncUI()},this)},syncUI:function(){var e={structuredContent:this.get("data")};this.get("contentBox").one(".pricing").empty().setHTML(t.Squarespace.Commerce.priceString(e))},didDataChange:function(){return this._edited},pulseWarn:function(){this.get("contentBox").one(".placeholder").pulseWarn.warn()}},{CSS_PREFIX:"sqs-pricing-placeholder",HANDLEBARS_TEMPLATE:"dialog-pricing-placeholder.html",ATTRS:{strings:{value:{prompt:i("Edit")}}}})},"1.0",{requires:["base","json","squarespace-animations","squarespace-commerce-utils","squarespace-damask-panel-mixin-pusher","squarespace-dialog-field-2","squarespace-dialog-pricing-placeholder-template","squarespace-hb-product-price-string","squarespace-hb-product-types","squarespace-plugin-pulsewarn","squarespace-util-authenticated"]})},"./src/main/webapp/universal/scripts-v6/dialog/dialog-radio.js":function(e,t){YUI.add("squarespace-dialog-radio",function(i){i.namespace("Squarespace.DialogFields");var e=i.Squarespace.DialogFields.Radio=i.Base.create("Radio",i.Squarespace.DialogFields.SelectBase,[],{bindUI:function(){e.superclass.bindUI.call(this);this.get("contentBox").delegate("click",function(e){this.set("data",e.target.get("value"))},'input[type="radio"]',this)},_createOptionGroupNode:function(e){return i.Node.create('<div class="option-group"><div class="option-group-label">'+e.label+"</div></div>")},_createOptionNode:function(e){var t=i.Lang.sub('<input id="{id}" type="radio" name="{name}" value="{value}"><label for="{id}">{label}</label>',{id:i.guid(),name:this.get("name"),value:e.value,label:e.label});var a=i.Node.create('<div class="option">'+t+"</div>");e.disabled&&a.setAttribute("disabled","disabled");return a},_updateSelectedOption:function(){var t=this.get("data");if(i.Lang.isValue(t)){var e=this.get("contentBox").all('input[type="radio"]');e.each(function(e){e.get("value")===t.toString()&&(e.getDOMNode().checked=true)})}}},{CSS_PREFIX:"sqs-radio",ATTRS:{}})},"1.0",{requires:["base","node","squarespace-dialog-select-base"]})},"./src/main/webapp/universal/scripts-v6/dialog/dialog-select-base.js":function(e,t){YUI.add("squarespace-dialog-select-base",function(i){i.namespace("Squarespace.DialogFields");var e=i.Squarespace.DialogFields.SelectBase=i.Base.create("SelectBase",i.Squarespace.DialogField2,[],{initializer:function(e){var t=e.defaultValue;!i.Lang.isValue(e.data)&&i.Lang.isValue(t)&&this.set("data",t)},renderUI:function(){e.superclass.renderUI.call(this);this._renderOptions()},bindUI:function(){e.superclass.bindUI.call(this);this.after("optionsChange",this._renderOptions)},syncUI:function(){e.superclass.syncUI.call(this);this._updateSelectedOption()},_renderOptions:function(){this.get("defaultOptionContainer").empty();i.Array.each(this.get("options"),function(e){this._isOptionGroup(e)?this._renderOptionGroup(e):this._renderOption(e)},this)},_renderOptionGroup:function(e){var t=this._createOptionGroupNode(e);i.Array.each(e.options,function(e){this._renderOption(e,t)},this);this.get("defaultOptionContainer").append(t)},_createOptionGroupNode:function(e){console.warn("SelectBase: Method '_createOptionGroupNode' must be implemented.")},_renderOption:function(e,t){var a=this._createOptionNode(e);i.Lang.isValue(t)?t.append(a):this.get("defaultOptionContainer").append(a)},_createOptionNode:function(e){console.warn("SelectBase: Method '_createOptionNode' must be implemented.")},_updateSelectedOption:function(){console.warn("SelectBase: Method '_updateSelectedOption' must be implemented.")},_isOptionGroup:function(e){return i.Object.hasKey(e,"options")}},{CSS_PREFIX:"sqs-select-base",ATTRS:{data:{setter:function(e){if(this.get("numeric")){e=parseInt(e,10);i.Lang.isNumber(e)||(e=0);return e}if(!i.Lang.isValue(e))return"";if(!i.Lang.isString(e))return e+"";return e}},numeric:{value:false,validator:i.Squarespace.AttrValidators.isBoolean},options:{value:[],validator:i.Squarespace.AttrValidators.isArray},rawOptions:{getter:function(){var e=this.get("options");return i.Array.reduce(e,[],function(e,t){if(this._isOptionGroup(t))return e.concat(t.options);e.push(t);return e},this)}},defaultOptionContainer:{getter:function(){return this.get("contentBox")},readOnly:true}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-dialog-field-2"]})},"./src/main/webapp/universal/scripts-v6/dialog/dialog-select-member-area.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-dialog-select-member-area",function(e){e.namespace("Squarespace.DialogFields.SelectMemberArea");e.Squarespace.DialogFields.SelectMemberArea=e.Base.create("select-member-area",e.Squarespace.DialogFields.Select,[],{},{CSS_PREFIX:"sqs-select",ATTRS:{data:{value:null,setter:function(e){return e}},strings:{value:{placeholder:i("Choose Member Area")}}}})},"1.0",{requires:["base","squarespace-dialog-select"]})},"./src/main/webapp/universal/scripts-v6/dialog/dialog-select.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/universal/src/shared/constants/AutocompleteTypes.js");var n=a("./src/main/webapp/universal/src/shared/constants/LayoutEngineClassnames.js");var o=n.DISABLE_DRAG_SELECTION_CLASSNAME;YUI.add("squarespace-dialog-select",function(n){n.namespace("Squarespace.DialogFields");var r=n.Squarespace.DialogFields.Select=n.Base.create("select",n.Squarespace.DialogFields.SelectBase,[],{renderUI:function(){r.superclass.renderUI.call(this);var e=this.get("contentBox");var t=this.get("autocompleteType");var a=e.one(".select-facade");var i=e.one("select");this._renderTitleAndDescription();this._setIconClasses(this.get("icon"));this._set("errorFlyoutAnchor",a);i.setAttribute("name",this.get("name"));t&&i.setAttribute("x-autocompletetype",t);var s=this.get("dialog");n.Lang.isValue(s)&&i.setAttribute("tabindex",s.getNextTabIndex())},bindUI:function(){r.superclass.bindUI.call(this);var e=this.get("contentBox");var t=e.one(".select-facade");var a=e.one("select");this.after("optionsChange",this.syncUI,this);this._registerEvent(t.on("click",function(e){if("disabled"===a.getAttribute("disabled"))return;this.get("haltClickEvent")?e.halt():e.preventDefault();"SELECT"!==e.target.get("tagName")&&a.simulate("mousedown")},this));a.after("change",function(){var e=a.get("value");e!==this.get("data")&&this.set("data",e)},this);var i=this.get("boundingBox");var s=this.getProperty("CSS_PREFIX")+"-focus";i.on("focus",function(){a.focus()},this);this._registerEvent(a.on("focus",function(){i.addClass(s)},this));this._registerEvent(a.on("blur",function(){i.removeClass(s)},this));this._registerEvent(a.on("keydown",function(e){8===e.keyCode&&e.halt()},this));this.after("stringsChange",this._renderTitleAndDescription,this);this.after("iconChange",function(e){this._setIconClasses(e.newVal,e.prevVal)},this)},syncUI:function(){r.superclass.syncUI.call(this);this._updateFacadeLabel()},focus:function(){r.superclass.focus.call(this);this.get("rendered")&&this.get("contentBox").one("select").focus()},blur:function(){r.superclass.blur.call(this);this.get("rendered")&&this.get("contentBox").one("select").blur()},disable:function(){r.superclass.disable.call(this);if(this.get("rendered")){var e=this.get("contentBox").one("select");var t=this.get("boundingBox");e.setAttribute("disabled","disabled");t.addClass(this.getProperty("CSS_PREFIX")+"-disabled")}},enable:function(){r.superclass.enable.call(this);if(this.get("rendered")){var e=this.get("contentBox").one("select");var t=this.get("boundingBox");e.removeAttribute("disabled");t.removeClass(this.getProperty("CSS_PREFIX")+"-disabled")}},_renderTitleAndDescription:function(){var e=this.get("contentBox");var t=e.one(".title");var a=this.get("strings.title");a?t.setHTML(a):t.hide();var i=e.one(".description");var s=this.get("strings.description");if(s){i.setHTML(s);i.show()}else i.hide()},_setIconClasses:function(e,t){var a=this.get("contentBox").one(".select-facade");var i=n.Lang.isString(e)&&""!==e;n.Lang.isString(t)&&a.removeClass(t);i&&a.addClass(e);a.toggleClass("icon",i)},_renderOptions:function(){r.superclass._renderOptions.call(this);this.get("contentBox").one("select").set("selectedIndex",-1)},_createOptionGroupNode:function(e){var t=n.Node.create("<optgroup></optgroup>");t.setAttribute("label",e.label);return t},_createOptionNode:function(e,t){var a=n.Node.create("<option></option>");a.setAttribute("value",e.value);a.setHTML(e.label);e.disabled&&a.setAttribute("disabled","disabled");return a},_updateSelectedOption:function(){var e=this.get("data");n.Lang.isValue(e)&&this.get("contentBox").one("select").set("value",e.toString())},_updateFacadeLabel:function(){this.hideError();var e=this.get("contentBox").one(".select-facade .label");var t=this.get("data");var a=!n.Lang.isValue(t)||""===t;e.setHTML(this._getFacadeLabel());e.toggleClass("empty",a)},_getFacadeLabel:function(){var a=this.get("data");var i;n.Lang.isValue(a)&&n.Array.some(this.get("rawOptions"),function(e,t){if(e.value.toString()===a.toString()){i=e.facadeLabel||e.label;return true}},this);if(!n.Lang.isValue(i)){var e=this.get("strings.placeholder");if(n.Lang.isValue(e)&&""!==e)i=e;else{i="&nbsp;";false}}return i},_getErrors:function(){if(this.get("required")&&this.isEmpty())return[i("This is a required field.")];return[]}},{CSS_PREFIX:"sqs-select",TEMPLATE:'<div class="title"></div><div class="select-facade '+o+'"><div class="label"></div><select></select></div><div class="description"></div>',ATTRS:{strings:{value:{placeholder:i("Select an option")}},defaultOptionContainer:{getter:function(){return this.get("contentBox").one("select")}},icon:{value:"",validator:n.Squarespace.AttrValidators.isString},autocompleteType:{value:null,writeOnce:"initOnly",validators:n.Squarespace.AttrValidators.isNullOrValueIn(s)},haltClickEvent:{value:true},testAttribute:{value:"select"}}})},"1.0",{requires:["base","node-event-simulate","squarespace-attr-validators","squarespace-dialog-select-base"]})},"./src/main/webapp/universal/scripts-v6/dialog/dialog-slider.js":function(e,t,a){YUI.add("squarespace-dialog-slider",function(i){var r="&nbsp;";i.namespace("Squarespace.DialogFields");i.Squarespace.DialogFields.Slider=i.Base.create("slider",i.Squarespace.DialogField2,[],{initializer:function(){this.unplug(i.Plugin.WidgetAnim);i.Lang.isValue(this._initialData)||(this._initialData=this.get("data"));var e=function(){i.throttle(this.refreshWidth.bind(this))};this._registerEvent(i.one(i.config.win).on("resize",e,this));this.get("pluralize")&&!this.get("getPluralizedSliderLabel")&&false},renderUI:function(){i.Squarespace.DialogFields.Slider.superclass.renderUI.call(this);this.slider=new i.Slider({axis:"x"});var e=this.get("contentBox");var t=e.one(".slider-container");var a=this.get("range");this.slider.setAttrs({thumbUrl:this.get("thumbUrl"),min:a[0],max:a[1],value:this.get("data")});this.slider.render(t);this._updateDisplayFromSliderValue();this.refreshWidth()},show:function(){var e=this.get("visible");i.Squarespace.DialogFields.Slider.superclass.show.call(this);e||this.refreshWidth()},refreshWidth:function(){var e=this.get("contentBox");this.slider.set("length",e.one(".slider-container").get("offsetWidth"))},bindUI:function(){i.Squarespace.DialogFields.Slider.superclass.bindUI.call(this);this.slider.after("thumbMove",this._updateDataFromSlider,this);this.slider.after("thumbMove",this._updateDisplayFromSliderValue,this);this.after("dataChange",this._updateSliderFromData,this);if(this.slider._dd){this.slider._dd.plug(i.Plugin.DDProxy,{cloneNode:true,moveOnEnd:true});this.slider._dd.on("start",function(e){this.get("node").setStyles({visibility:"hidden"})},this.slider._dd);this.slider._dd.on("end",function(e){this.get("node").setStyles({visibility:null})},this.slider._dd)}},_getDisplayValue:function(){var e=this.get("data");var t=this.get("getPluralizedSliderLabel");if(t)return t(e);var a=this.get("strings.suffix");var i=this.get("strings.zeroLabel");var s=this.get("pluralize");if(0===e&&i)return i;var n=1!==e;if(a)return e+r+a+(n&&s?"s":"");return e},_updateDisplayFromSliderValue:function(){var e=this.get("contentBox");e.one(".numeric-display").setContent(this._getDisplayValue(this.get("data")))},_updateDataFromSlider:function(){this.set("data",this.slider.get("value"))},_updateSliderFromData:function(){this.slider.set("value",this.get("data"))},destructor:function(){this.slider&&this.slider.destroy()}},{CSS_PREFIX:"sqs-slider",HANDLEBARS_TEMPLATE:"dialog-slider.html",ATTRS:{data:{value:null,getter:function(e){if(i.Lang.isValue(e))return e;return this.get("range")[0]},validator:i.Lang.isNumber},displayFormatter:{value:function(){return this._getDisplayValue(this.get("data"))}},range:{validator:function(e){var t=e[0];var a=e[1];return i.Lang.isNumber(t)&&i.Lang.isNumber(a)&&t<a},value:[0,100]},isNumericLabel:{value:null,getter:function(e){if(i.Lang.isValue(e))return e;var t=this.get("strings.suffix");return!("string"===typeof t&&""!==t||this.get("getPluralizedSliderLabel"))}},labelWidth:{value:20},pluralize:{value:true},disabled:{value:false},thumbUrl:{value:"/universal/images-v6/dialog/slider-thumb-dark.png"},getPluralizedSliderLabel:{value:null}}})},"1.0",{requires:["base","dd-proxy","squarespace-dialog-field-2","squarespace-dialog-slider-template"]})},"./src/main/webapp/universal/scripts-v6/dialog/dialog-subscription-details-placeholder.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-dialog-subscription-details-placeholder",function(t){t.namespace("Squarespace");var e=t.namespace("Squarespace.DialogFields").SubscriptionDetailsPlaceholder=t.Base.create("SubscriptionDetailsPlaceholder",t.Squarespace.DialogField2,[],{initializer:function(){},renderUI:function(){e.superclass.renderUI.call(this);this.get("boundingBox").addClass("field-wrapper").addClass("major");this._edited=false},bindUI:function(){this.get("contentBox").on("click",function(){this.fire("clicked")},this);this.after("dataChange",function(){this._edited=true;this.syncUI()},this)},syncUI:function(){var e=this.get("data");this.get("contentBox").one(".details-text").empty().setHTML(t.Squarespace.Commerce.merchantSubscriptionDetailsString(e))},didDataChange:function(){return this._edited}},{CSS_PREFIX:"sqs-subscription-details-placeholder",HANDLEBARS_TEMPLATE:"dialog-subscription-details-placeholder.html",ATTRS:{strings:{value:{prompt:i("Edit")}}}})},"1.0",{requires:["base","json","squarespace-animations","squarespace-commerce-utils","squarespace-damask-panel-mixin-pusher","squarespace-dialog-field-2","squarespace-dialog-subscription-details-placeholder-template","squarespace-hb-product-price-string","squarespace-hb-product-types","squarespace-util-authenticated"]})},"./src/main/webapp/universal/scripts-v6/dialog/dialog-summary-filter.js":function(e,t,a){var o=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var l=a("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/RelatedProductsEditor/WrappedCategoryPicker.tsx");YUI.add("squarespace-dialog-summary-filter",function(s){var i="featured";var n="tag";var r="category";var t="categoryIds";s.namespace("Squarespace.DialogFields").SummaryFilter=s.Base.create("summaryFilters",s.Squarespace.DialogField2,[],{initializer:function(e){var t=e.data||this.get("data")||{};this._tagField=new s.Squarespace.DialogFields.AutoComplete({"strings.title":o("Tag Filter"),"strings.placeholder":o("Enter a tag to filter by"),"strings.description":o("Only show items with this tag."),data:t.tag,acConfig:{source:[],resultFilters:"phraseMatch",zIndex:1e6}});this.set("tagField",this._tagField);this._categoryField=new s.Squarespace.DialogFields.AutoComplete({"strings.title":o("Category Filter"),"strings.placeholder":o("Enter a category to filter by"),"strings.description":o("Only show items with this category."),data:t.category,acConfig:{source:[],resultFilters:"phraseMatch",zIndex:1}});this.set("categoryField",this._categoryField);this._featuredField=new s.Squarespace.DialogFields.Check({"strings.title":o("Featured Filter"),"strings.description":o("Only show featured posts."),data:t.featured||false})},renderUI:function(){s.Squarespace.DialogFields.SummaryFilter.superclass.renderUI.call(this);var e=this.get("contentBox");this._categoryField.render(e);e.appendChild('<div class="nested-category-field"></div>');this._tagField.render(e);this._featuredField.render(e)},bindUI:function(){s.Squarespace.DialogFields.SummaryFilter.superclass.bindUI.call(this);this._tagField.after("dataChange",this._updateData,this,n);this._categoryField.after("dataChange",this._updateData,this,r);this._featuredField.after("dataChange",this._updateData,this,i);this.after("dataChange",this._handleRevertRequest,this);this.after("showNestedCategoriesChange",this.syncShowNestedCategoriesChange,this);this.after("collectionIdChange",this.syncNestedCategoriesCollectionId,this)},syncUI:function(){s.Squarespace.DialogFields.SummaryFilter.superclass.syncUI.call(this);this.syncShowNestedCategoriesChange()},resetNestedCategorySelection:function(){this._setRelatedAttrsInYUI("")},syncShowNestedCategoriesChange:function(){if(!this.get("showNestedCategories")){this._categoryField.show();if(this._wrappedCategoryPicker){this._wrappedCategoryPicker.destroy();this._wrappedCategoryPicker=null}return}this._categoryField.hide();var e=this.get("collectionId");if(!e)return;if(!this._wrappedCategoryPicker){this._wrappedCategoryPicker=new l({setRelatedAttrsInYUI:this._setRelatedAttrsInYUI.bind(this),container:this.get("contentBox").one(".nested-category-field").getDOMNode(),model:{collectionId:e,websiteId:s.config.win.Static.SQUARESPACE_CONTEXT.website.id},value:this.getNestedCategoryValue(),flush:true,damaskify:true});this._wrappedCategoryPicker.show()}},getNestedCategoryValue:function(){var e=this.get("data")[t];if(e)return e[0];return""},syncNestedCategoriesCollectionId:function(){if(!this._wrappedCategoryPicker)return;var e=this.get("collectionId");this._wrappedCategoryPicker.setCollectionId(e)},_setRelatedAttrsInYUI:function(e){this._updateData({newVal:e},t);this._wrappedCategoryPicker&&this._wrappedCategoryPicker.setValue(this.getNestedCategoryValue())},destructor:function(){this._categoryField.destroy();this._tagField.destroy();this._featuredField.destroy()},didDataChange:function(){var t=this._initialData||{};var a=this.get("data");var e=function(e){return t[e]!==a[e]};return e(n)||e(i)||e(r)},_updateData:function(e,t){var a=e.newVal;var i=this.get("data");s.Lang.isString(a)&&0===a.length&&(a=null);i[t]=a;this.set("data",i)},_handleRevertRequest:function(e){e.revert&&this._revertFields()},_revertFields:function(){this._tagField.set("data","");this._categoryField.set("data","");this._featuredField.set("data",false)}},{CSS_PREFIX:"sqs-summary-filter",ATTRS:{tags:{},data:{value:{}},categories:{},tagField:{readOnly:true},categoryField:{readOnly:true},showNestedCategories:{value:false},collectionId:{value:""}}})},"1.0",{requires:["autocomplete-filters","autocomplete-sources","base","squarespace-dialog-auto-complete","squarespace-dialog-check","squarespace-dialog-field-2"]})},"./src/main/webapp/universal/scripts-v6/dialog/dialog-table-import.js":function(e,t,a){var r=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var o=a("./common/temp/node_modules/papaparse/papaparse.js");YUI.add("squarespace-dialog-table-import",function(n){var e=[{ctor:n.Squarespace.DialogFields.Description,config:{name:"description",title:r("Import or Export Chart Data"),text:r("Your data is provided here in CSV (comma separated value) format. You can copy the text below and save it as a .csv file to export your data. To import a spreadsheet, first save it as a .csv file. Then open it with a text editor and copy and paste the content into the box below, overwriting the existing text.")}},{ctor:n.Squarespace.DialogFields.TextArea,config:{"strings.title":r("Chart Data"),name:"data-text"}},{ctor:n.Squarespace.DialogFields.Button,config:{name:"import-button","strings.text":r("Update"),disabled:true}},{ctor:n.Squarespace.DialogFields.Description,config:{name:"errors",text:""}}];n.namespace("Squarespace.DialogFields");var t=n.Squarespace.DialogFields.TableImport=n.Base.create("TableImport",n.Squarespace.DialogField2,[],{initializer:function(){this._fields=[];this._useJson=false;this._newData=null;this._changed=false;this._resetErrors()},destructor:function(){n.Array.invoke(this._fields,"destroy");this._fields=null},syncUI:function(){t.superclass.syncUI.call(this);this._renderFields();this._bindFields()},_renderFields:function(){n.Array.invoke(this._fields,"destroy");this._fields=this._constructFields();var e=this.get("contentBox");n.Squarespace.FormUtils.template(e,this._fields);this._renderImportData();this._renderErrors()},_renderImportData:function(){var e=this.get("contentBox");e.one("textarea").setContent(n.Escape.html(this._serializeData()))},_renderErrors:function(){function e(e,t,a){if(e.length>0){a+="<p>"+t+":</p><ul>";n.Array(e).forEach(function(e){a+="<li>"+e+"</li>"});a+="</ul>"}}var t=this.get("contentBox");var a="";this._parseErrors.length>0&&(a+="<p>"+r("Failed to update your data.")+"</p>");e(this._parseErrors,r("Errors"),a);e(this._parseWarnings,r("Warnings"),a);t.one(".errors").setContent(a)},_resetErrors:function(){this._parseErrors=[];this._parseWarnings=[]},_constructFields:function(){return n.Array.map(e,function(e){return new e.ctor(e.config)})},_bindFields:function(){var e=this._getField("data-text");var t=this._getField("import-button");this._registerEvent(e.on("dataChange",function(e){this._newData=e.newVal;t.enable()},this));this._registerEvent(t.on("click",this._handleImport,this))},_handleImport:function(e){if("confirmation"===e.source)return;if(this._newData){this._resetErrors();this._renderErrors();var t=new n.Squarespace.Widgets.Confirmation({"strings.title":r("Are You Sure?"),"strings.message":r("This will overwrite the current chart data.")});t.on("confirm",function(){this._import(this._newData)},this);t.show()}},_getField:function(t){return n.Array.find(this._fields,function(e){if(e.get("name")===t)return true;return false})},_serializeData:function(){var e=this.get("data");return this._useJson?this._serializeJSON(e):this._serializeCSV(e)},_serializeJSON:function(e){return JSON.stringify(e)},_serializeCSV:function(a){function i(e,t){e.push.apply(e,t);return e}var s=[i(["Label"],a.seriesLabels)];n.Array(a.data).forEach(function(e,t){s.push(i([a.sampleLabels[t]],e))});var e=o.unparse(s);return e},_padData:function(e,t){var a=false;function i(e,t,a){var i=false;while(e.length<a){i=true;e.push(t)}return i}if(i(e.seriesLabels,r("New Series"),t)){this._parseWarnings.push(r("One or more rows had extra columns."));a=true}i(e.sampleLabels,"",e.data.length);n.Array(e.data).forEach(function(e){i(e,0,t)});return a},_checkLimits:function(e,t){var a=this.get("maxSeries");var i=this.get("maxSamples");var s=false;if(t>a){e.seriesLabels=e.seriesLabels.slice(0,a);for(var n=0;n<e.data.length;n++)e.data[n]=e.data[n].slice(0,a);this._parseWarnings.push(r("Your dataset has been truncated to {maxSeries} columns.",{maxSeries:a}));s=true}if(e.data.length>i){e.data=e.data.slice(0,i);e.sampleLabels=e.sampleLabels.slice(0,i);this._parseWarnings.push(r("Your dataset has been truncated to {maxSamples} rows.",{maxSamples:i}));s=true}return s},_checkValid:function(e){if(e.sampleLabels.length<1){this._parseErrors.push(r("Your dataset must have at least one row."));return false}if(e.seriesLabels.length<1){this._parseErrors.push(r("Your dataset must have at least one column."));return false}if(e.data.length<1){this._parseErrors.push(r("Your dataset must have at least one row."));return false}return true},_deserializeCSV:function(e){this._resetErrors();var t=false;var a=o.parse(e,{skipEmptyLines:true,delimiter:","});if(a.errors.length>0){this._parseErrors.push(r("Malformed CSV data."));return false}var i={seriesLabels:a.data[0].slice(1),sampleLabels:n.Array.map(a.data.slice(1),function(e){return e[0]}),data:n.Array(a.data.slice(1)).map(function(e){return n.Array(e.slice(1)).map(function(e){return parseFloat(e)||0})})};if(!this._checkValid(i))return null;var s=Math.max.apply(null,n.Array(i.data).map(function(e){return e.length}));s=Math.max(s,i.seriesLabels.length);t=this._padData(i,s);t=t||this._checkLimits(i,s);if(t){this._newData=this._serializeCSV(i);this._changed=true}return i},_import:function(e){var t=this._deserializeCSV(e);if(0===this._parseErrors.length){this._newData=null;this.fire("importTable",{data:t});this._getField("import-button").disable()}else this._renderErrors()},didDataChange:function(){return this._changed},CONTENT_TEMPLATE:'<div><div data-field-name="description"></div><div data-field-name="data-type"></div><div data-field-name="data-text"></div><div data-field-name="import-button"></div><div data-field-name="errors" class="errors"><ul></ul></div></div>'},{CSS_PREFIX:"sqs-table-import",ATTRS:{maxSeries:{value:0},maxSamples:{value:0},data:{value:null}}})},"1.0",{requires:["array-invoke","base","escape","node","squarespace-dialog","squarespace-dialog-button","squarespace-dialog-field-2","squarespace-dialog-radio","squarespace-dialog-text-area","squarespace-form-utils","squarespace-widgets-confirmation"]})},"./src/main/webapp/universal/scripts-v6/dialog/dialog-text-area.js":function(e,t){YUI.add("squarespace-dialog-text-area",function(a){a.namespace("Squarespace.DialogFields");var i=a.Squarespace.DialogFields.TextareaField=a.Squarespace.DialogFields.TextArea=a.Base.create("textArea",a.Squarespace.DialogField2,[],{initializer:function(){this._edited=false;var e=this.get("dialog");if(e){var t=e.getData().raw;this._saveInitialData(t)}else this._saveInitialData()},renderUI:function(){i.superclass.renderUI.call(this);var e=this.get("dialog");if(a.Lang.isValue(e)){var t=this.get("contentBox").one("textarea");t.setAttribute("tabindex",e.getNextTabIndex())}},bindUI:function(){i.superclass.bindUI.call(this);var e=this.get("contentBox").one("textarea");e.after("valuechange",function(e){this._edited=true;this.set("data",e.newVal)},this);e.on("keydown",function(e){this.get("disableNewLine")&&13===e.keyCode&&e.halt()},this);this.after("dataChange",this._afterDataChange,this)},didDataChange:function(){return this._edited},focus:function(){i.superclass.focus.call(this);this.get("rendered")&&this.get("contentBox").one("textarea").focus()},blur:function(){i.superclass.blur.call(this);this.get("rendered")&&this.get("contentBox").one("textarea").blur()},_afterDataChange:function(){var e=this.get("contentBox").one("textarea");var t=e.get("value");var a=this.get("data");a!==t&&e.set("value",a)}},{CSS_PREFIX:"sqs-text-area",HANDLEBARS_TEMPLATE:"dialog-text-area.html",ATTRS:{data:{value:""},strings:{value:{placeholder:""}},disableNewLine:{value:false},testAttribute:{value:"text-area"}}})},"1.0",{requires:["base","node","squarespace-dialog-field-2","squarespace-dialog-text-area-template"]})},"./src/main/webapp/universal/scripts-v6/dialog/dialog-text-with-static.js":function(e,t){YUI.add("squarespace-dialog-text-with-static",function(e){e.namespace("Squarespace.DialogFields");var i=e.Squarespace.DialogFields.TextWithStatic=e.Base.create("TextWithStatic",e.Squarespace.Widgets.DialogField2,[],{renderUI:function(){i.superclass.renderUI.call(this);var e=this.get("contentBox");e.one(".sqs-editable-text").setContent(this.get("data"));e.one(".sqs-static-text").setContent(this.get("strings.staticText"))},bindUI:function(){i.superclass.bindUI.call(this);var e=this.get("contentBox").one(".sqs-editable-text");this._registerEvent(e.on("click",this.clearPlaceholder,this),e.on("blur",function(e){this.set("data",e.target.getContent());this.set("isEditing",false);this.hideError();this.syncUI()},this),e.on("keydown",function(e){13!==e.keyCode&&32!==e.keyCode||e.halt()}),e.on("keyup",function(e){13===e.keyCode&&e.target.blur();this.hideError();this.toggleError()},this));this.after("dataChange",this.syncUI)},syncUI:function(){i.superclass.syncUI.call(this);var e=this.get("data");var t=!e;var a=this.get("contentBox").one(".sqs-editable-text");this.get("boundingBox").toggleClass("is-empty",t);t?a.setContent(this.get("strings.placeholder")):a.setContent(e)},clearPlaceholder:function(){var e=this.get("contentBox").one(".sqs-editable-text");if(!this.get("data")&&!this.get("isEditing")){this.get("boundingBox").removeClass("is-empty");e.setContent("")}this.set("isEditing",true)},getErrors:function(){if(!this.get("data"))return["Required"];return[]}},{CSS_PREFIX:"sqs-dialog-text-with-static",TEMPLATE:'<div class="sqs-editable-text" contenteditable></div><div class="sqs-static-text"></div><div class="shadow"></div>',ATTRS:{data:{},isEditing:{value:false},strings:{value:{staticText:"",placeholder:""}}}})},"1.0",{requires:["base","squarespace-dialog-field-2","squarespace-dialog-text"]})},"./src/main/webapp/universal/scripts-v6/dialog/dialog-text.js":function(e,t,a){var o=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var i=a("./src/main/webapp/universal/src/shared/constants/AutocompleteTypes.js");var s=a("./src/main/webapp/universal/src/shared/constants/TextFilterNames.js");var l=a("./src/main/webapp/universal/src/shared/utils/TextFilters.js");YUI.add("squarespace-dialog-text",function(n){n.namespace("Squarespace.DialogFields");var t=n.config.doc.createElement("span");var a=n.Squarespace.DialogFields.Text=n.Squarespace.DialogFields.TextField=n.Base.create("text",n.Squarespace.DialogField2,[],{destructor:function(){this._textField&&this._textField.remove(true);this._textField=null},renderUI:function(){a.superclass.renderUI.call(this);this._textField=this.get("contentBox").one("input[type]");this.get("dialog")&&this._textField.setAttribute("tabindex",this.get("dialog").getNextTabIndex());this._textField.set("type",this.get("password")?"password":"text");var e=this.get("autocompleteType");e&&this._textField.setAttribute("x-autocompletetype",e);if(!this.get("autocompleteEnabled")){this.get("password")&&this.get("contentBox").prepend('<input type="password" tabindex="-1" class="sqs-offscreen" />');this._textField.setAttribute("autocomplete","off")}this._set("errorFlyoutAnchor",this._textField);this._textField.set("value",this._unescapeValue(this.get("data")));"undefined"===typeof this._initialValue&&(this._initialValue=this.get("data"))},bindUI:function(){a.superclass.bindUI.call(this);this.after("dataChange",this._afterDataChange);this._textField.after("valuechange",this._afterValueChange,this);this.after("disabledChange",this.syncUI);var e=this._textField.getDOMNode();var t="addEventListener";n.Lang.isFunction(e.attachEvent)&&(t="attachEvent");e[t]("focus",n.bind(this._afterFocus,this));e[t]("blur",n.bind(this._afterBlur,this));this._textField.on("click",function(e){e.halt()});this._textField.after("keyup",function(e){if(13===e.keyCode&&this.get("submitOnEnter")){this.fire("submit");var t=this.get("dialog");t&&t.saveAndClose()}else 27===e.keyCode?e.halt():this.fire("keyup",e)},this);this._textField.on("keypress",this.applyKeyFilter,this);this.on("readOnlyChange",function(e){e.newVal?this._textField.setAttribute("readonly","readonly"):this._textField.removeAttribute("readonly")},this)},syncUI:function(){a.superclass.syncUI.call(this);var e=this.get("strings.placeholder");e&&this._textField.setAttribute("placeholder",e);this.get("disabled")?this._textField.setAttribute("disabled","disabled"):this._textField.removeAttribute("disabled")},getErrors:function(){var e=this.get("data");if(!this.get("validator")(e))return[this.get("strings.validationFailMessage")];if(this.get("required")&&this.isEmpty())return[this.get("strings.requiredFieldEmptyMessage")];return[]},isEmpty:function(){return""===this.get("data")},focus:function(){a.superclass.focus.call(this);this.get("rendered")&&this._textField.focus()},select:function(){this.get("rendered")&&this._textField.select()},blur:function(){a.superclass.blur.call(this);this.get("rendered")&&this._textField&&this._textField.blur()},disable:function(){a.superclass.disable.call(this);this.get("rendered")&&this._textField.setAttribute("disabled","disabled")},enable:function(){a.superclass.enable.call(this);this.get("rendered")&&this._textField.removeAttribute("disabled")},applyKeyFilter:function(e){var t=this.get("keyFilter");var a=this.get("keyFilterExplanation");var i;if(t){if(0!==n.UA.gecko&&!e._event.isChar)return;if(13===e.charCode&&this.get("submitOnEnter"))return;i=String.fromCharCode(e.which);if(!i.match(new RegExp(t))&&i.length>0){a&&this.showError(a);e.halt()}}},_afterDataChange:function(e){e.dataSync||this._textField.set("value",this._unescapeValue(e.newVal||""),{dataSync:true});this.hideError();this.toggleError()},_afterValueChange:function(e){e.dataSync||this.set("data",this._escapeValue(e.newVal),{dataSync:true})},_escapeValue:function(e){if(this.get("escapeText")){t.textContent=e;e=t.innerHTML;t.innerHTML="";return e}return e},_unescapeValue:function(e){if(this.get("escapeText")){t.innerHTML=e;e=t.textContent;t.innerHTML="";return e}return e},_afterFocus:function(){"undefined"!==typeof CONFIG_PANEL&&CONFIG_PANEL.set("allowContextMenu",true);n.UA.ie||this.focus()},_afterBlur:function(){this.hideError();"undefined"!==typeof CONFIG_PANEL&&CONFIG_PANEL.set("allowContextMenu",false);var e=this._textField.get("value");this._textField&&this.set("data",this._escapeValue(e),{dataSync:true});this.blur()}},{CSS_PREFIX:"sqs-text",HANDLEBARS_TEMPLATE:"dialog-text.html",ATTRS:{strings:{value:{placeholder:"",validationFailMessage:o("This must be a string."),requiredFieldEmptyMessage:o("This is a required field.")}},data:{value:"",setter:function(e){n.Lang.isValue(e)||(e="");return e},validator:function(e){return n.Lang.isString(e)||!n.Lang.isValue(e)}},escapeText:{value:false},validator:{value:n.Lang.isString},password:{value:false,validator:n.Lang.isBoolean},submitOnEnter:{value:false,validator:n.Lang.isBoolean},disabled:{value:false,validator:n.Lang.isBoolean},autocompleteType:{value:null,writeOnce:"initOnly",validators:n.Squarespace.AttrValidators.isNullOrValueIn(i)},autocompleteEnabled:{value:true,validator:n.Lang.isBoolean,writeOnce:"initOnly"},keyFilter:{},keyFilterExplanation:{value:""},maxLength:{value:null},readOnly:{value:false},selectAllOnFocus:{value:false},testAttribute:{value:"text"}}});n.Squarespace.DialogFields.LabeledText=n.Base.create("labeledText",n.Squarespace.DialogFields.Text,[n.Squarespace.DialogFields.DialogFieldLabel],{},{CSS_PREFIX:"sqs-labeled-text",LABEL_CONFIG:{forNode:"input[type]"}});var r=n.Squarespace.DialogFields.Url=n.Base.create("urlText",n.Squarespace.DialogFields.Text,[],{renderUI:function(){r.superclass.renderUI.call(this);this._textField.wrap('<div class="sqs-input-wrapper-content"></div>');var e=this.get("contentBox").one(".sqs-input-wrapper-content");e.wrap('<div class="sqs-input-wrapper"></div>');e.prepend('<div class="prefix">'+this.get("prefix")+"</div>")},bindUI:function(){r.superclass.bindUI.call(this);this._textField.after("keyup",this.onKeyUp,this)},onKeyUp:function(e){var t=this._textField.get("value");var a=this._textField.selectionStart-(32===e.keyCode?0:1);var i=this.get("filter");var s=t;s=Array.isArray(i)?n.Array.reduce(i,t,function(e,t){return l.applyFilter(e,t)},this):l.applyFilter(t,i);if(t!==s){this._textField.set("value",this._unescapeValue(s));this._textField.selectionStart=a;this._textField.selectionEnd=a}},getErrors:function(){var e=r.superclass.getErrors.call(this);var t=this.get("additionalValidators");Array.isArray(t)||(t=[t]);if(t.length){var a=this._textField.get("value");var i=""===this._initialValue&&""===a;var s=-1!==t.indexOf("optional-on-creation");if(s&&i)return e;-1!==t.indexOf("url-slug-required-if-exists")&&""===a&&e.push(o("Slug cannot be blank."));-1!==t.indexOf("url-slug-min-length")&&a.length<3&&e.push(o("Slug must be at least 3 characters."));-1!==t.indexOf("url-slug-max-length")&&a.length>250&&e.push(o("Slug must be at most 250 characters."))}return e}},{CSS_PREFIX:"sqs-url-text",ATTRS:{filter:{value:s.URL_SLUG_WITH_SLASH},additionalValidators:{value:""},prefix:{value:"/"}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-dialog-field-2","squarespace-dialog-label","squarespace-dialog-text-template"]})},"./src/main/webapp/universal/scripts-v6/dialog/dialog-variants-table.js":function(e,t,a){var c=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/universal/src/shared/constants/HelpLinks.js");var u=a("./src/main/webapp/universal/src/shared/utils/commerce/analytics/trackProductEditor.ts");var d=a("./src/main/webapp/universal/src/shared/utils/commerce/analytics/mapProductTypeToString.ts");var i=a("./src/main/webapp/universal/src/shared/utils/commerce/analytics/types.ts");var p=i.ProductEditor.YUI_EDITOR;YUI.add("squarespace-dialog-variants-table",function(o){o.namespace("Squarespace.DialogFields");var l=o.Base.create("UserOption",o.Model,[],{},{ATTRS:{optionName:{value:null},displayName:{value:null}}});var e=o.Base.create("UserOptionList",o.ModelList,[],{model:l,getOptionsByName:function(t){return this.filter(function(e){return e.get("optionName")===t})},find:function(e){return this.getOptionsByName(e)[0]}},{});var t={SystemAttributes:["image","sku","onSale","price","pricing","denominations","stock","qtyInStock","salePrice","unlimited","dimensions","weight","length","width","height"]};var r=o.Squarespace.DialogFields.VariantsTable=o.Base.create("variantsTable",o.Squarespace.DialogField2,[o.WidgetParent],{_name:"variantsTable",initializer:function(){this._edited=false;this._tooltips=[];var t=new e;o.Array.each(this.get("data.variantOptionOrdering"),function(e){t.add({optionName:e,displayName:e})});t.on("*:change",function(){this._edited=true},this);this.set("optionsList",t)},destroy:function(){r.superclass.destroy.call(this);o.Array.each(this._tooltips,function(e){e.destroy()},this)},renderUI:function(){r.superclass.renderUI.call(this);var e=this.get("contentBox");var t=this.get("isGiftCard");var a=this.get("isPhysical");var i=t?this.get("strings.titleAmounts"):this.get("strings.title");var s=t?this.get("strings.descriptionAmounts"):this.get("strings.description");e.append('<div class="title">'+i+'</div><div class="description">'+s+'</div><div class="shipping-warning"><div class="shipping-warning-content"></div></div><div class="table"><div class="viewport"><div class="header"><div class="add-option '+(t?"hidden":"")+'"><img src="/universal/images-v6/standard/icon_add_11_light.png" /></div></div><div class="body"><div class="rows"></div><div class="add-variant"><img src="/universal/images-v6/standard/icon_add_11_light.png" /></div></div></div></div>');this._headerEl=e.one(".header");this._addOptionEl=this._headerEl.one(".add-option");this._bodyEl=e.one(".body");this._addVariantEl=this._bodyEl.one(".add-variant");this._childrenContainer=this._bodyEl.one(".rows");this._addOptionEl.plug(o.Squarespace.Plugin.PulseWarn,{iterations:3,color:"#C1B12E"});this._renderOption({optionName:"image",displayName:c("Image")},false);this._renderOption({optionName:"sku",displayName:c("SKU")},false);t?this._renderOption({optionName:"denominations",displayName:c("Values")},false):this._renderOption({optionName:"pricing",displayName:c("Pricing")},false);t||this._renderOption({optionName:"stock",displayName:c("Stock")},false);if(a){this._renderOption({optionName:"weight",displayName:'<div class="label">'+c("Weight")+'</div><div class="question">?</div>',tooltipConfig:{title:c("Shipping Weight"),body:c("Specify weight for shipping calculations if you use a weight-based formula or real-time carrier-calculated rates.")}},false);this._renderOption({optionName:"dimensions",displayName:'<div class="label">'+c("Dimensions")+'</div><div class="question">?</div>',tooltipConfig:{title:c("Packing Dimensions"),body:c("Specify the packing dimensions of your product if you want to estimate the cost of shipping via real-time carrier shipping-calculated rates.")}},false)}t||this.get("optionsList").each(function(e){this._renderOption(e.getAttrs(),true)},this);var n=this.get("data.variants");this._setupDragAndDrop();n.length>0?o.Array.each(n,this._addVariant,this):this._addVariant({id:o.Squarespace.Commerce.generateVariantId(),sku:o.Squarespace.Commerce.generateSKU(),price:0,salePrice:0,onSale:false,qtyInStock:1,len:0,width:0,height:0,attributes:{}});a&&this._showShippingWarnings(this.get("data.variants"));this._refreshData()},bindUI:function(){r.superclass.bindUI.call(this);this._addOptionEl.on("click",function(e){this._addEditOption()},this);this.get("optionsList").after(["*:add","*:remove","*:optionNameChange"],this._refreshData,this);this.after(["addChild","variantRow:removed","variantRow:dataChange"],this._refreshData,this);this.after("variantRow:next-row-execute-requested",this._editOrCreateNextRow,this);this.on("variantRow:removed",function(e){var t=e.target;this.remove(this.indexOf(t));o.Squarespace.Analytics.trackInternal("product_variant_removed")});this.on("variantRow:remove-requested",this._attemptDeleteRow,this);this.on("variantRow:removed",this._ddDelegate.syncTargets,this._ddDelegate);this._headerEl.delegate("click",this._editOption,".custom-option",this);this._addVariantEl.on("click",this._attemptAddNewVariant,this);this._bodyEl.delegate("click",this.hideError,"input",this);this.after("dataChange",this.hideError,this);this._ddDelegate.on("reorder:reordered",this._reorderRows,this);this.on("variantRow:validateForShipping",this._validateForShipping,this)},syncUI:function(){r.superclass.syncUI.call(this);this._bodyEl.toggleClass("one-variant",1===this.size());if(!this.get("isGiftCard")){var e=this.get("dialog").getField("isSubscribable");var t=e.get("data");var a=this._headerEl.one(".option-stock");a.toggleClass("hidden",t);this.each(function(e){e.toggleStockVisibility(t)},this)}},didDataChange:function(){return this._edited},_setupDragAndDrop:function(){this._ddDelegate=new o.SQS.DDWrappers.DD.Delegate({container:this._childrenContainer,nodes:".sqs-variant-row",groups:"variant-row",scrollNode:o.one(this.get("contentBox")).ancestor(".body-block"),enableDragReorder:true,enableDragScroll:true,enableDragConstrained:true,dragConstrainedConfig:{stickY:true}})},_editOrCreateNextRow:function(e){var t=this.indexOf(e.target);var a=e.command;var i=this.item(t+1);if(o.Lang.isValue(i))a.call(i);else{var s=this._attemptAddNewVariant();if(s){i=this.item(t+1);a.call(i)}}},_attemptDeleteRow:function(e){var t=e.target;if(1===this.size()){new o.Squarespace.Widgets.Alert({"strings.title":c("Cannot Remove"),"strings.message":c("Your product must have at least one choice.")});return}new o.Squarespace.Widgets.Confirmation({"strings.title":c("Delete Variant?"),"strings.message":c("Do you want to delete this product variant?")}).on("confirm",t.close,t)},_editOption:function(e){var t=e.currentTarget;var a=t.getData();this._isSystemVariantOption(a.optionName)||this._addEditOption(a,t)},_isSystemVariantOption:function(e){return-1!==t.SystemAttributes.indexOf(e)},_renderOption:function(e,t){var a=e.optionName;var i=e.tooltipConfig;var s=o.Node.create('<div class="option" data-option-name="'+a+'">'+e.displayName+"</div>");this._isSystemVariantOption(e.optionName)&&s.addClass("option-"+a);t&&s.addClass("custom-option");s.setData(e);this._headerEl.insert(s,this._headerEl.one(".add-option"));o.Lang.isValue(i)&&new o.Squarespace.ToolTip({target:".option-"+a,title:i.title,body:i.body,clickToShow:true,alwaysEnable:true,dialogTooltip:true})},_addVariant:function(e){var t=o.Lang.isValue(this.get("dialog"));var a=t?this.get("dialog"):this.get("data.editor");var i=new o.Squarespace.Widgets.VariantRow({optionsList:this.get("optionsList"),data:e,dialog:a,isPhysical:this.get("isPhysical"),isGiftCard:this.get("isGiftCard"),measurementStandard:this.get("measurementStandard"),inDialog:t,productModel:this.get("productModel")});this.add(i);this.fire("edited");this._ddDelegate.syncTargets();o.Squarespace.Analytics.trackInternal("product_variant_added")},_attemptAddNewVariant:function(){var e=this.get("data.variants");var t=this.get("productModel");var a=this.get("isGiftCard");var i=0===this.get("optionsList").size();if(i&&!a){new o.Squarespace.Widgets.Alert({"strings.title":c("Options Needed"),"strings.message":c('You must define at least one option (e.g. "color", "size") before adding product variants.')});this._addOptionEl.pulseWarn.warn();return false}if(e.length>=100){new o.Squarespace.Widgets.Alert({"strings.title":c("Too Many Variants"),"strings.message":c("You have reached the system limit of 100 variants per product. It is recommended that you divide this item into several separate products if you have more than 100 SKUs.")});return false}[51,65,80,95,99].includes(e.length)&&new o.Squarespace.Widgets.Alert({"strings.title":c("Warning: Variants Limit"),"strings.message":c("The system has a limit of 100 variants per product. You currently have {sub1}. It is recommended that you divide this item into several separate products if you have more than 100 SKUs.",{sub1:e.length})});var s=o.clone(e[e.length-1]);s.id=o.Squarespace.Commerce.generateVariantId();s.sku=o.Squarespace.Commerce.generateSKU();a&&(s=o.Squarespace.Commerce.GiftCardUtils.createGiftCardAmountVariant(s.price+2500));this._addVariant(s);this._addVariantEl.scrollIntoView();u.trackAddVariant({productId:t.get("id"),productName:t.get("title"),productType:d(t.get("productType")),variantId:s.id,productEditor:p});return true},_addEditOption:function(i,s){var e=i?[{type:"cancel",title:c("Cancel")},{type:"remove",title:c("Remove")},{type:"save",title:c("Save Option")}]:[{type:"cancel",title:c("Cancel")},{type:"save",title:c("Save Option")}];var n=new o.Squarespace.EditingDialog({top:120,width:300,overlay:.5,closeOthers:false,initialData:i,buttons:e,primaryTabs:[{title:c("Edit Option"),icon:"/universal/images-v6/form/light/24px/icon_radio_24_light.png",fields:[{ctor:o.Squarespace.DialogFields.Text,config:{name:"optionName",className:"thin",submitOnEnter:true,strings:{title:c("Option Name"),description:c("E.g. color, size, style, material")}}}]}]});var r=this.get("productModel");n.on("send-requested",function(){var e=n.getField("optionName").getValue().trim();if(""===e){n.getField("optionName").showError(c("The option name cannot be blank."));n.allowEditing();return}if(this._isSystemVariantOption(e)){n.getField("optionName").showError(c("That name is reserved by the system."));n.allowEditing();return}if("EACH"===e.toUpperCase()){n.getField("optionName").showError(c("That name is reserved by the system."));n.allowEditing();return}if(o.Lang.isValue(i)){s.setContent(e);s.setAttribute("data-option-name",e);var t=this.get("optionsList");var a=t.find(i.optionName);a.set("optionName",e);s.setData(a.getAttrs())}else{if(this.get("optionsList").getOptionsByName(e).length>0){n.getField("optionName").showError(c("You cannot create another option with the same name."));n.allowEditing();return}u.trackAddProductOption({optionName:e,productId:r.get("id"),productName:r.get("title"),productType:d(r.get("productType")),productEditor:p});this._renderOption({optionName:e,displayName:e},true);this.get("optionsList").add(new l({optionName:e,displayName:e}))}n.close()},this);n.on("remove-requested",function(){1===this.get("optionsList").size()&&this.size()>1?new o.Squarespace.Widgets.Alert({"strings.title":c("Cannot Remove"),"strings.message":c("Since you have several variants defined, you must have at least one option. If you really want to remove this option, remove your variants first.")}):new o.Squarespace.Widgets.Confirmation({"strings.title":c("Delete Option?"),"strings.message":c("Do you want to delete this option?")}).on("confirm",function(){var e=this.get("optionsList");e.remove(e.find(i.optionName));this._headerEl.all(".option").each(function(e){e.getData().optionName===i.optionName&&s.remove()});u.trackDeleteProductOption({optionName:i.optionName,productId:r.get("id"),productName:r.get("title"),productType:d(r.get("productType")),productEditor:p});n.close()},this)},this);n.show()},_getErrors:function(){var s={skuMap:{},priceMap:{},isSubscription:this.get("dialog").getField("isSubscribable")&&this.get("dialog").getField("isSubscribable").get("data")};var n=[];this.each(function(e){var t=e.get("data.sku");var a=e.get("data.price");var i=e.getError(s);if(o.Lang.isValue(i)){this._set("errorFlyoutAnchor",i.inputEl);this.fire("errors");n=[i.message]}s.skuMap[t]=true;s.priceMap[a]=true},this);return n},_reorderRows:function(e){var t=e.reordered;var a=this.remove(t.oldIndex);this.add(a,t.newIndex)},_refreshData:function(){var t=[];this.each(function(e){t.push(e.get("data"))},this);var a=[];this.get("optionsList").each(function(e){a.push(e.get("optionName"))});this.set("data",{variants:t,variantOptionOrdering:a,editor:this.get("data.editor"),productModel:this.get("productModel")})},_validateForShipping:function(){o.Data.post({headers:{"Content-Type":"application/json"},url:"/api/commerce/inventory/shipping-violations",data:o.JSON.stringify(this.get("data").variants),success:this._showShippingWarnings},this)},_showShippingWarnings:function(e){if(this.get("destroyed"))return;var t=this.get("contentBox").one(".shipping-warning");var a=t.one(".shipping-warning-content");var i=false;e=e||[];e.forEach(function(e){e.shippingViolations&&(i=true);a.setHTML('<div class="warning-icon"></div>'+c('Some of your product\'s variants are missing weight or dimensions, or exceed carrier shipping limits. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:s.CALCULATED_SHIPPING_RATES}))});i?t.addClass("visible"):t.removeClass("visible")}},{CSS_PREFIX:"sqs-variants-table",ATTRS:{strings:{value:{title:c("Product Variants"),description:c("Define the options of your item, create variants, and track stock levels. Each row in the table below represents a variant on this product. You can add additional options to those variants by adding columns. Subscription products do not have stock levels."),titleAmounts:c("Values"),descriptionAmounts:c("Edit the gift card values you want to offer.")}},isPhysical:{value:true},isGiftCard:{value:false},optionsList:{value:null},measurementStandard:{value:null},productModel:{value:null},editor:{}}})},"1.0",{requires:["base","model","squarespace-commerce-utils","squarespace-commerce-giftcard-utils","@sqs/yui-dd-wrappers/dd-delegate","squarespace-dialog","squarespace-dialog-field-2","squarespace-plugin-money-formatter","squarespace-plugin-numeric-formatter","squarespace-plugin-pulsewarn","squarespace-ui-base","squarespace-util","squarespace-variant-row","squarespace-widgets-alert","squarespace-widgets-confirmation"]})},"./src/main/webapp/universal/scripts-v6/dialog/dialog-video.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-dialog-video",function(e){e.namespace("Squarespace.DialogFields");var t=e.Squarespace.DialogFields.Video=e.Base.create("Video",e.Squarespace.Widgets.DialogField2,[],{initializer:function(){this._modelEditor=new e.Squarespace.ContentItemEditor.VideoMinimalGlobal({model:this.get("data")})},destructor:function(){this._modelEditor.destroy()},renderUI:function(){t.superclass.renderUI.call(this);this.get("contentBox").append('<div class="name">'+i("Test Test")+'</div><div class="edit-video">'+i("Edit")+"</div>")},bindUI:function(){t.superclass.bindUI.call(this);this.get("contentBox").one(".edit-video").on("click",function(){this._modelEditor.show()},this)}},{CSS_PREFIX:"sqs-dialog-video",ATTRS:{collectionConfig:{value:{},validator:e.Squarespace.AttrValidators.isObject,writeOnce:"initOnly"},data:{value:null,validator:e.Squarespace.AttrValidators.isNullOrInstanceOf(e.Squarespace.Models.ContentItem),writeOnce:"initOnly"}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-content-item-types-video","squarespace-dialog-field-2","squarespace-models-content-item"]})},"./src/main/webapp/universal/scripts-v6/dialog/dialog-wysiwyg.js":function(e,t,a){var n=a("./common/temp/node_modules/react/index.js");var r=a("./common/temp/node_modules/react-dom/index.js");var i=a("./common/temp/node_modules/@sqs/styles/variables/baseDamask.js");var s=a("./src/main/webapp/universal/src/shared/constants/TextEditor.js");var o=a("./src/main/webapp/universal/src/shared/components/fields/TextEditor/index.js");YUI.add("squarespace-dialog-wysiwyg",function(t){t.namespace("Squarespace.DialogFields").Wysiwyg=t.Base.create("wysiwyg",t.Squarespace.DialogField2,[],{initializer:function(e){this.get("boundingBox").addClass("field-wrapper clear");t.Lang.isValue(this.get("classNames"))&&this.get("boundingBox").addClass(this.get("classNames"))},destructor:function(){var e=this.get("contentBox").one(".rte");e&&e.unplug(t.Squarespace.Plugin.ScrollLock);r.unmountComponentAtNode(this.get("contentBox").one(".field-rte-wrapper").getDOMNode())},renderUI:function(){this.constructor.superclass.renderUI.apply(this,arguments);t.Lang.isValue(this.get("strings.title"))&&this.get("contentBox").one(".title").setHTML(this.get("strings.title"));t.Lang.isValue(this.get("description"))&&this.get("contentBox").one(".description").setHTML(this.get("description"));this._instantiateEditor();var e=this.get("contentBox").one(".rte");e&&e.plug(t.Squarespace.Plugin.ScrollLock)},_instantiateEditor:function(e){var t=this.get("data.html");var a=this.get("type");var i=this.get("toolbarOptions");var s=this.get("itemEditorZIndex");r.render(n.createElement(o,{color:"light",showSeparator:false,hideMenu:false,onChange:this.handleChange.bind(this),height:this.getEditorHeight(),value:t,itemEditorZIndex:s,toolbarOptions:i,type:a,forceUpdate:e,isNullable:this.get("isNullable"),preserveWhitespace:this.get("preserveWhitespace"),decodeHTMLEntities:true}),this.get("contentBox").one(".field-rte-wrapper").getDOMNode())},bindUI:function(){this.on("dataChange",function(e){t.Lang.isValue(e.newVal)||""===e.newVal||e.preventDefault()});this.after("dataChange",function(e){e.internal||this._instantiateEditor(true)});var e=this.get("data");t.Lang.isValue(e)&&t.Lang.isValue(e.html)||this.handleChange("")},handleChange:function(e){this.set("data",{html:e?e.toString():e,raw:false},{internal:true})},didDataChange:function(){var e=this.get("data.html");return e!==this.getValue("data",["html"])},getEditorHeight:function(){var e=this.get("editorHeight");return e-i.UI_PADDING_PX},_renderTitle:function(){if(this.config.title&&"top"===this.config.titleStyle)return t.Node.create('<div class="field-lhs">'+this.config.title+"</div>");return null}},{CSS_PREFIX:"sqs-dialog-wysiwyg",TEMPLATE:'<div class="title field-lhs"></div><div class="field-rhs"><div class="field-rte-wrapper"></div><div class="description"></div></div></div>',ATTRS:{type:{validator:t.Squarespace.AttrValidators.isValueIn(s.SchemaTypes),value:s.SchemaTypes.SIMPLE},editorHeight:{validator:t.Squarespace.AttrValidators.isNumber},data:{},classNames:{validator:t.Squarespace.AttrValidators.isString},title:{validator:t.Squarespace.AttrValidators.isString},label:{validator:t.Squarespace.AttrValidators.isString},itemEditorZIndex:{validator:t.Squarespace.AttrValidators.isNumber},toolbarOptions:{validator:t.Squarespace.AttrValidators.isNullOrArray},description:{validator:t.Squarespace.AttrValidators.isString},preserveWhitespace:{validator:t.Squarespace.AttrValidators.isBoolean},isNullable:{validator:t.Squarespace.AttrValidators.isBoolean}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-dialog-field-2","squarespace-plugin-scroll-lock"]})},"./src/main/webapp/universal/scripts-v6/dialog/dialog.js":function(e,t,a){a("./src/main/webapp/universal/src/shared/i18n/bootstrap.ts");a("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");a("./src/main/webapp/universal/src/shared/i18n/configurations/block-schemas.js");var s=a("./common/temp/node_modules/lodash/get.js");var n=a("./common/temp/node_modules/react/index.js");var r=a("./common/temp/node_modules/react-dom/index.js");var g=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var o=a("./src/main/webapp/universal/src/shared/utils/formatting/substituteString.js");var i=a("./src/main/webapp/universal/src/shared/utils/__legacyRouterHooks.js");var c=a("./src/main/webapp/universal/src/shared/utils/mediaQueries.js");var l=a("./src/main/webapp/universal/src/shared/utils/UrlUtils.js");var u=a("./src/main/webapp/universal/src/apps/App/shared/components/TabbedHeader/index.js");var d=a("./src/main/webapp/universal/src/shared/utils/CMSV7Events.js");var p=a("./src/main/webapp/universal/src/shared/utils/isAppleiPadOS13.js");YUI.add("squarespace-dialog",function(h){h.namespace("Squarespace");h.Squarespace.OPEN_DIALOGS=[];h.Squarespace.DialogStates={CLOSED:1,EDITING:2,LOADING:3,CLOSING:4,SAVING:5,MOVING:6};h.Squarespace.EditingDialog=Class.extend(h.Squarespace.ZombieGizmo,{_name:"EditingDialog",_events:{show:{},shown:{},aftershowanim:{},"align-to-anchor":{},"aligned-to-anchor":{},loading:{},"cancel-loading":{},"loading-ready":{},ready:{},drag:{},hide:{},hidden:{},close:{},closed:{},canceled:{},"cancel-clicked":{},"overlay-click":{},"render-anchor":{},datachange:{},datachanged:{},"send-requested":{emitFacade:true},"remove-requested":{},"data-saved":{},"auto-save":{},"auto-save-requested":{emitFacade:true},"allow-editing":{},"editing-allowed":{},"show-errors":{},"local-errors":{}},initialize:function(e){this._super(e);this.setParams(e);this._setState("CLOSED");this.bodyEvents=[];this.buttonEvents=[];this.globalEvents=[];this.childDialogs=[];this.verticalFields=[];this.timers=[];this.fields={};this.reactComponentContainers=[];this.reactEls=[];this.sections={};this._noNameFields=[];this._setEdited(false);this.NOTCH_WIDTH=20;this.BUTTONS_BASE_IDX=100;this.NOTCH_HEIGHT=11;this.lastTabIndex=1;this.on("datachange",this.onDataChange,this);this.on("duplicate",this.markDuplicateLifecycle,this);this.__legacyRouterUnlisten||(this.__legacyRouterUnlisten=i.onChange(this.close.bind(this),false));this.__legacyRouterUnlistenBefore||(this.__legacyRouterUnlistenBefore=i.onBeforeChange(function(e,t){if(this.isVisible()&&this.params.discardChangesConfirmation){var a=this.canClose(function(){this.saveAndClose();t()}.bind(this),function(){this.cancel();t()},function(){t(false)});a&&t()}else t()}.bind(this)));this.__legacyRouterUnload||(this.__legacyRouterUnload=i.onBeforeUnload(function(){if(this.isVisible()&&this.params.discardChangesConfirmation&&(this.edited||this.editedSinceLastSave))return g("You have unsaved changes.")}.bind(this)));this._debug=new h.Squarespace.Debugger({name:"EditingDialog",output:false});this.publish("show",{prefix:"EditingDialog",broadcast:2,emitFacade:true});this.publish("dismiss",{prefix:"EditingDialog",broadcast:2,emitFacade:true});this.publish("tab-shown",{prefix:"EditingDialog",broadcast:2,emitFacade:true});this.publish("button-click",{prefix:"EditingDialog",broadcast:2,emitFacade:true,preventable:false})},markDuplicateLifecycle:function(){this.isDuplicating=true;this.once("canceled",function e(){this.isDuplicating=false})},markCancelLifecycle:function(){this.isCanceling=true;this.once("canceled",function e(){this.isCanceling=false})},defaultOpts:{tabs:[],initialData:{},buttons:[],style:"standard",colorScheme:"light",buttonAlign:"right",position:"center",verticalHeight:"fixed",flyoutPointerDirection:"left",closingText:g("Canceled…"),savingText:g("Saving…"),loadingText:g("Loading…"),top:60,closeOthers:true,disableTips:true,closeable:true,autoFocus:true,discardChangesConfirmation:true,overlay:false,validateActiveTabOnly:false,edgeMargin:11,initialDataByReference:false,constrain:false,frameless:false},getName:function(){return this.params.name},getInitialData:function(){return this.params.initialData},setParams:function(e){if(!e)return;this.params=h.merge(this.defaultOpts,e);if(this.params.primaryTabs){this.params.tabs=this.params.tabs.concat(this.params.primaryTabs);delete this.params.primaryTabs}if(this.params.secondaryTabs){this.params.tabs=this.params.tabs.concat(this.params.secondaryTabs);delete this.params.secondaryTabs}this.params.tabs&&0!==this.params.tabs.length||!this.params.fields||(this.params.tabs=[{fields:this.params.fields}]);this.params.tabs[0].tabTitle||(this.params.tabs[0].tabTitle=g("Item"));this.params.tabs[0].name||(this.params.tabs[0].name="item");"transparent"===this.params.style&&(this.params.disableSaveOverlay=true);e.discardChangesConfirmation||0!==this.params.buttons.length||(this.params.discardChangesConfirmation=false);this.definitionChanged=true},show:function(e){this.fire("show");this._debug.log("Showing",["showParams",e],["this.params",this.params]);if(this.moving){this._setState("EDITING");this.animation&&this.animation.stop();this.fire("cancel-loading")}if(this.destroyTimer||this._isState("LOADING")||this._isState("CLOSING"))return;h.Squarespace.ToolTipManager&&(false===this.params.disableTips?h.Squarespace.ToolTipManager.enableTooltips():this.params.disableTips&&h.Squarespace.ToolTipManager.disableTooltips());this.anchorEl&&this.anchorEl.removeClass("targeted");e&&this._setShowParams(e);this.params.parentDialog&&this.params.parentDialog.addChildDialog(this);if(!this._isState("CLOSED")){if(!this.anchorEl)return;this.anchorEl.addClass("targeted");this._setState("LOADING");this.moving=true;this.updateTitle();this.fire("loading");this._updatePosition(false);if(this.position){this.animation=this._anim({node:this.el,to:{left:this.position.getX()+"px",top:this.position.getY()+"px"},duration:.25,easing:h.Easing.easeOutStrong});this.animation.on("end",function(){this.fire("loading-ready");this.dataReady()},this);this.animation.run()}return}this.definitionChanged=false;if(this.params.closeOthers)for(var t=0,a=h.Squarespace.OPEN_DIALOGS.length;t<a;++t)h.Squarespace.OPEN_DIALOGS[t].cancel();h.Squarespace.OPEN_DIALOGS.push(this);h.one(document.body).addClass("dialog-open");this.fire("loading");this._setState("LOADING");this.timers.push(h.later(100,this,function e(){this.params.closeable&&h.Squarespace.EscManager.addTarget(this);this.globalEvents.push(h.on("resize",this.onResize,h.one(window),this))}));this._addTitleEl();this._addBodyEl();this.mainEl=h.Node.create('<div class="main-container"></div>').append(this.titleEl).append(this.bodyEl).append(this.controlsEl);var i="";this.params.frameless?i+="frameless-dialog-wrapper ":this.params.disableStandardDialogWrapperClass||(i+="standard-dialog-wrapper ");i+=o("squarespace-managed-ui {sub1} {sub2} buttons-{sub3}",{sub1:this.params.style,sub2:this.params.colorScheme,sub3:this.params.buttonAlign});this.params.name&&(i+=" dialog-"+l.createUrlSafeString(this.params.name));this.el=h.Node.create('<div class="'+i+'"></div>').append(this.mainEl);this.bodyEvents.push(this.el.on("click",function(e){if(e.target.ancestor(".sqs-button",true))return;this.cancelChildDialogs();this.fire("click",e)},this));if(this.params.zIndex)this.zIndex=this.params.zIndex;else{h.Squarespace.DIALOG_ZINDEX_BASE+=10;this.zIndex=h.Squarespace.DIALOG_ZINDEX_BASE}this.el.setStyle("zIndex",this.zIndex);this.params.draggable&&this.enableDragging();this.params.hidable&&this._addHideEl();this.params.headerButton&&this._addHeaderButtonEl();this.buttonHolder=h.Node.create("<div>").addClass("button-holder");this.autosaveEl=h.Node.create("<div>").addClass("autosave-state");this.buttonStateEl=h.Node.create('<div class="sqs-text button-state-label">  <input type="text" readonly="readonly" value="'+(this.params.buttonStateMessage?this.params.buttonStateMessage:"")+'"></div>');if(this.controlsEl){this.controlsEl.append(this.buttonStateEl);this.controlsEl.append(this.autosaveEl);this.controlsEl.append(this.buttonHolder);this.params.tabs&&this._updateControlsForTab(this.params.tabs[0])}var s;s=this.anchorEl?this._positionWithAnchorEl():this._positionWithDefault();if(this.params.loadingState){var n=this._anim({node:this.el,to:s[1]?{opacity:.9,top:s[1]}:{opacity:.9},duration:.15,easing:h.Easing.easeOutStrong});n.on("end",function(){this.fire("loading-ready")},this);n.run()}else this.dataReady();if("full"===this.params.verticalHeight||"fit"===this.params.verticalHeight){this.el.setStyles({top:this.params.edgeMargin+"px",bottom:this.params.edgeMargin+"px"});this.params.top=this.params.edgeMargin}if(this.params.overlay){this.overlayEl=h.Node.create("<div>").addClass("dialog-screen-overlay");this.overlayEl.setStyle("zIndex",this.zIndex-1);this.overlayEl.addClass("hidden");h.one(document.body).append(this.overlayEl);h.soon(function(){this.overlayEl.removeClass("hidden")}.bind(this));this.globalEvents.push(h.on("click",this.onOverlayClick,this.overlayEl,this))}this.moveIntoView();h.later(300,this,function(){this._shown=true;this.fire("shown",this)})},_setShowParams:function(e){e.data&&(this.data=e.data);e.anchor&&(this.anchorEl=e.anchor);e.top&&(this.params.top=e.top);e.flyoutPointerDirection&&(this.params.flyoutPointerDirection=e.flyoutPointerDirection)},_addHeaderButtonEl:function(){var e=h.Node.create('<div class="header-button"></div>');var t=h.Node.create('<input type="button" value="'+this.params.headerButton.title+'" />');t.setData("type",this.params.headerButton.type);h.on("click",this.params.headerButton.onclick,t,this);this.el.append(e.append(t))},_addBodyEl:function(){this.bodyEl=h.Node.create('<div class="body-block"></div>');0!==this.params.buttons.length?this.controlsEl=h.Node.create('<div class="controls-block"></div>'):this.bodyEl.addClass("bottom")},_addTitleEl:function(){this.titleEl=h.Node.create('<div class="title-block loading"></div>');this.titleEl.toggleClass("singleTab",this.params.tabs.length<=1);this.titleTextEl=h.Node.create('<div class="text-holder"></div>');this.titleEl.append(this.titleTextEl);this.tabContainer=h.Node.create('<div class="tabbed-header-container"></div>');this.titleEl.append(this.tabContainer);this.updateTitle()},_addHideEl:function(){var e=h.Node.create('<div class="dialog-close"></div>');this.el.prepend(e);e.on("click",function(){this.fire("user-close");this.close()},this)},mount:function(){var e=this.params.mountNode||h.config.doc.body;h.one(e).append(this.el)},_positionWithAnchorEl:function(){var e,t,a,i,s,n;var r=this.params.width;this.el.setStyle("position",this.params.forcePosition||"absolute");this.anchorEl.addClass("targeted");if("left"===this.params.flyoutPointerDirection||"right"===this.params.flyoutPointerDirection){this.el.setStyle("width",r+this.NOTCH_HEIGHT+"px");this.mainEl.setStyle("width",r+"px");this.el.addClass("flyout");this.mount()}else if("hidden"===this.params.flyoutPointerDirection){this.el.setStyle("width",r+"px");this.mainEl.setStyle("width",r+"px");this.mount()}else if("top"===this.params.flyoutPointerDirection){this._initNotchEl("top");this.el.insertBefore(this.notchEl,this.mainEl);a=this.anchorEl.get("offsetWidth");i=this.anchorEl.get("offsetHeight");e=this.anchorEl.getX();t=this.anchorEl.getY()+i;r>a&&(e-=(r-a)/2);this.currentXY=[e,t-3];this.notchEl.setStyle("marginLeft",(r-33)/2+"px");s=this.params.left||this.currentXY[0];n=this.params.top||this.currentXY[1];this.el.setStyles({left:s+"px",top:n+"px",width:r+"px"});this.mainEl.setStyle("width",r+"px");this.mount()}else if("bottom"===this.params.flyoutPointerDirection){this._initNotchEl("top","bottom");this.el.append(this.notchEl);a=this.anchorEl.get("offsetWidth");i=this.anchorEl.get("offsetHeight");e=this.anchorEl.getX();t=this.anchorEl.getY()+i;r>a&&(e-=(r-a)/2);this.currentXY=[e,t-3];this.notchEl.setStyle("marginLeft",(r-33)/2+"px");s=this.params.left||this.currentXY[0];n=this.params.top||this.currentXY[1];this.el.setStyles({left:s+"px",top:n+"px",width:r+"px"});this.mainEl.setStyle("width",r+"px");this.mount()}else{this.currentXY=[this.anchorEl.getX()+(this.anchorEl.get("offsetWidth")-r)/2,this.anchorEl.getY()+(this.anchorEl.get("offsetHeight")-this.params.height)/2-15];this.el.setStyles({left:this.currentXY[0]+"px",top:this.currentXY[1]+"px",width:r+"px"});this.el.setStyle();this.mainEl.setStyle("width",r+"px");t=this.currentXY[1];this.mount()}return[e,t]},_positionWithDefault:function(){var e,t;var a=h.one(document).get("winWidth");this.el.setStyle("position","fixed");if("right"===this.params.position){this.el.setStyles({right:this.params.edgeMargin+"px",top:"0px"});if(0===this.params.edgeMargin){this.titleEl.setStyle("border-radius","0px");this.controlsEl.setStyle("border-radius","0px")}}else if("undefined"!==typeof this.params.left)this.currentXY=[this.params.left,this.params.top];else{this.currentXY=[(a-this.params.width)/2,this.params.top];this.el.setStyle("position","fixed")}if(this.currentXY){this.el.setStyles({left:this.currentXY[0]+"px",top:this.currentXY[1]+"px"});t=this.currentXY[1]}this.el.setStyle("width",this.params.width+"px");this.mainEl.setStyle("width",this.params.width+"px");this.mount();return[e,t]},isOpen:function(){return this._isState("LOADING")||this._isState("EDITING")},disableBodyScroll:function(){this.oldBodyScroll=h.one("body").getStyle("overflow");h.one("body").setStyle("overflow","hidden")},restoreBodyScroll:function(){this.hasOwnProperty("oldBodyScroll")&&(this.oldBodyScroll?h.one("body").setStyle("overflow",this.oldBodyScroll):h.one("body").setStyle("overflow",null))},getAnchorEl:function(){return this.anchorEl},getChildDialogs:function(){return this.childDialogs},addChildDialog:function(e){if(this.childDialogs.indexOf(e)<0){this.cancelChildDialogs();this._debug.log("addChildDialog",e);this.childDialogs.push(e)}e.params.parentDialog=this},removeChildDialog:function(t){this.childDialogs=h.Array.filter(this.childDialogs,function(e){return e!==t},this)},enableDragging:function(){this.titleEl.setStyle("cursor","move");this.dd=new h.DD.Drag({node:this.el,handles:this.titleEl&&this.titleEl._node?[this.titleEl]:null});this.dd.on("drag:start",this.cancelChildDialogs,this);this.dd.on("drag:drag",function(e){this.fire("drag",e)},this);this.dd.on("drag:end",function(e){this.moveIntoView()},this)},temporaryHide:function(e){this.fire("hide");h.Array.each(this.childDialogs,function(e){e.temporaryHide()},this);this.hideAnim&&this.hideAnim.stop();this._hideAnimEvent&&this._hideAnimEvent.detach();this.overlayHideAnim&&this.overlayHideAnim.stop();this._overlayHideAnimEvent&&this._overlayHideAnimEvent.detach();this.hideAnim=this._anim({node:this.el,to:{opacity:0},duration:.35,easing:h.Easing.easeOutStrong});if(this.overlayEl){this.overlayHideAnim=this._anim({node:this.overlayEl,to:{opacity:0},duration:.35,easing:h.Easing.easeOutStrong});this._overlayHideAnimEvent=this._subscribe(this.overlayHideAnim,"end",function(){this.overlayEl.setStyle("display","none")})}this._hideAnimEvent=this._subscribe(this.hideAnim,"end",function(){this.el.setStyle("display","none");this.fire("hidden",this)});if(e){this.el.setStyle("display","none");this.overlayEl&&this.overlayEl.setStyle("display","none");this.fire("hidden",this)}else{this.hideAnim.run();this.overlayEl&&this.overlayHideAnim.run()}},temporaryShow:function(e){this.fire("show",this);e&&this._setShowParams(e);this.hideAnim&&this.hideAnim.stop();this._hideAnimEvent&&this._hideAnimEvent.detach();this.overlayHideAnim&&this.overlayHideAnim.stop();if(this.overlayEl){this.overlayEl.setStyle("display","block");this.overlayHideAnim=this._anim({node:this.overlayEl,to:{opacity:this.params.overlay},duration:.35,easing:h.Easing.easeOutStrong});this.overlayHideAnim.run()}this.el.setStyle("display","block");this.hideAnim=this._anim({node:this.el,to:{opacity:1},duration:.35,easing:h.Easing.easeOutStrong});this._hideAnimEvent=this._subscribeOnce(this.hideAnim,"end",function(){this.fire("shown",this)});this.hideAnim.run();this._showChildren();this.moveIntoView()},_applyMethodToChildren:function(){var t=arguments[0];var a=Array.prototype.slice.call(arguments,1);h.Array.each(this.childDialogs,function(e){e[t].apply(e,a)},this)},_showChildren:function(){this._applyMethodToChildren("temporaryShow")},_hideChildren:function(){this._applyMethodToChildren("temporaryHide")},cancelChildDialogs:function(){this._applyMethodToChildren("cancel");this.childDialogs=[]},isVisible:function(){return!this._isState("CLOSED")},_updatePosition:function(e){if(this.el&&this.anchorEl){var t=this.el.get("offsetHeight");var a=this.params.flyoutPointerDirection;if("top"===a||"bottom"===a)return;if("centered"===a){var i=this.anchorEl.getXY();this.position=new h.Squarespace.Position({x:i[0]+(this.anchorEl.get("offsetWidth")-this.params.width)/2,y:i[1]+(this.anchorEl.get("offsetHeight")-t)/2,w:this.params.width,h:t});this.position.nudgeFix()}else{this.position=new h.Squarespace.Position({avoidElX:this.anchorEl,avoidElY:this.anchorEl,xdir:"right",ydir:"bottom",x:this.anchorEl.getX(),y:this.anchorEl.getY(),xo:2,yo:0,w:this.params.width+this.NOTCH_HEIGHT,h:t});this.position.reflectFix()}"hidden"!==a&&"centered"!==a&&this._reattachNotchEl();if(e){this.el.setXY(this.position.getXY());this._alignNotch(this.anchorEl)}}},_reattachNotchEl:function(){var e="right"===this.position.xdir?"left":"right";if(this.notchEl){this.notchEl.set("className","flyout-notch-"+e);this.notchEl.inDoc()&&this.notchEl.remove()}else this._initNotchEl(e);"right"===this.position.xdir?this.el.insertBefore(this.notchEl,this.mainEl):this.el.append(this.notchEl)},_initNotchEl:function(e,t){this.notchEl=h.Node.create('<div class="flyout-notch-'+e+'">&nbsp;</div>');h.Lang.isString(t)&&this.notchEl.addClass(t)},_alignNotch:function(e){if(!this.notchEl)return;var t=this.el.get("offsetHeight");var a=Math.max(t-36,220);var i=12;var s=11;var n=i;var r=this.el.get("region");var o=e.get("region");var l=o.top+o.height/2;if(o.top>r.top){n=l-r.top-s;n=Math.min(a,Math.max(i,n))}this.notchEl.setStyle("marginTop",n+"px")},onDataChange:function(e){this.fire("render-anchor",this.getData());this.setEdited();this._debug.log("onDataChange");this.fire("datachanged")},onOverlayClick:function(e){e.halt();this.fire("overlay-click");if(!this.params.disableOverlayCancel){this.isCanceling=true;this.close()}},setEdited:function(){if(this._isState("SAVING"))return;this._setEdited(true)},clearEdited:function(){this._setEdited(false)},_setEdited:function(e){this.edited=!!e;this.editedSinceLastSave=!!e},getEditedSinceLastSave:function(){return this.editedSinceLastSave},getNextTabIndex:function(){return this.lastTabIndex++},getEdited:function(){return this.edited},isState:function(e){return this.getState()===e},getState:function(){return this.state},setInitialData:function(e){this.params.initialDataByReference?this.params.initialData=e:this.params.initialData=h.clone(e,true);this.fields&&h.Object.each(this.fields,function(e,t){if(this._isDialogField2(e)&&e.get("name")&&!h.Lang.isUndefined(this.params.initialData[e.get("name")])){e.set("data",this.params.initialData[e.get("name")],{source:"setInitialData"});e.setCurrentDataAsInitial()}},this)},getBodyHeight:function(){if(this.params.height)return this.params.height;return this._getFullHeight()},setActiveFlyout:function(e){this.activeFlyout&&this.activeFlyout.field.closeFlyout();h.later(10,this,function(){this.activeFlyout=e})},clearActiveFlyout:function(){this.activeFlyout=null},onResize:function(){var e=h.one(document).get("winWidth");if(!this.anchorEl&&!this.params.draggable){var t={};if("full"===this.params.verticalHeight||"fit"===this.params.verticalHeight){this.bodyHeight=this.getBodyHeight();"fit"===this.params.verticalHeight&&this.bodyHeight>this.observedHeight&&(this.bodyHeight=this.observedHeight);this.bodyEl.setStyle("height",this.bodyHeight+"px");this.bodyEl.all(".scrollable-body").each(function(e){e.setStyles({height:this.bodyHeight-33+"px",paddingBottom:"33px"})},this);this.resizeVerticalFields()}if("right"!==this.params.position){this.hideErrors();t.left=(e-this.params.width)/2;t.top=this.params.top;this.params.left&&(t.left=this.params.left)}this.currentXY=[t.left,t.top];this.moveAnim&&this.moveAnim.stop();this.moveAnim=this._anim({node:this.el,to:t,duration:.15,easing:h.Easing.easeOutStrong});this.moveAnim.run()}this.moveIntoView()},moveIntoView:function(e){if(!this.params.draggable&&!this.params.constrain)return;!e||this.anchorEl||this.position||(e=false);var t={};var a=this.el.get("docScrollX");var i=this.el.get("docScrollY");var s=this.el.get("winWidth")+a;var n=this.el.get("winHeight");var r=n+i;var o=this.el.getY();var l=this.el.getX();o<i&&(t.top=i+this.params.edgeMargin);o+this.el.get("offsetHeight")>r&&(t.top=r-this.el.get("offsetHeight")-this.params.edgeMargin);l+this.el.get("offsetWidth")>s&&(t.left=s-this.el.get("offsetWidth")-this.params.edgeMargin);l<a&&(t.left=a+this.params.edgeMargin);e&&(t.top=t.top?Math.max(t.top,this.position.getY()):this.position.getY());"fixed"===this.params.forcePosition&&h.Lang.isValue(t.top)&&t.top>this.el.get("winHeight")&&(t.top=Math.max(0,n-this.el.get("offsetHeight")));var c=0!==h.Object.size(t);c&&this._anim({node:this.el,to:t,duration:.3,easing:h.Easing.easeOutStrong}).run();if(this.preferredHeight+120>n){this.bodyHeight=n-120;this.bodyEl.setHeight(this.bodyHeight)}else if(this.bodyHeight!==this.preferredHeight){this.bodyHeight=this.preferredHeight;this.bodyEl.setHeight(this.preferredHeight)}},scrollIntoView:function(e){this.el.scrollIntoView(e)},showErrors:function(e){this.fire("show-errors",e);this.allowEditing();this.currentErrors=e;this.errorCount=h.Object.size(e);this.errorsByTab={};h.Object.each(e,function(e,t){var a=this.getField(t);if(!a){false;return}this.errorsByTab[a.tab.name]?this.errorsByTab[a.tab.name]++:this.errorsByTab[a.tab.name]=1},this);this.renderNavigationTabs(this.currentErrors);this.activateErrors()},clearError:function(e){if(this.currentErrors&&this.currentErrors[e.getName()]){this.errorsByTab[e.tab.name]--;delete this.currentErrors[e.getName()];this.errorCount--;0===this.errorsByTab[e.tab.name]&&this.renderNavigationTabs(this.currentErrors)}},activateErrors:function(){if(this.errorCount){var e=this.currentTab.tabFields;var t=null;h.Array.each(e,function(e){if(this.currentErrors[e.getName()]){if(!t){t=e;t.scrollIntoView()}e.showError(this.currentErrors[e.getName()])}},this);t&&h.Lang.isFunction(t.focus)&&t.focus()}},hideErrors:function(){if(!this.currentTab)return;var e=this.currentTab.tabFields||[];h.Array.each(e,function(e){h.Lang.isFunction(e.hideError)&&e.hideError()},this);this.renderNavigationTabs()},setAndUpdateTitle:function(e){this.title=e;this.updateTitle()},updateTitle:function(e){var t=this.params.tabs[this.currentTabIndex];t&&this.currentTab&&t.title!==this.currentTab.title&&(this.currentTab.title=t.title);h.Lang.isUndefined(e)&&(e=this.state);var a;a=h.Lang.isString(this.title)?this.title:this.currentTab&&this.currentTab.title?this.currentTab.title:this.params.title;var i="";this.params.subtext&&(i='<div class="title-subtext">'+this.params.subtext+"</div>");switch(e){case h.Squarespace.DialogStates.LOADING:this.params.loadingText&&this.setTitleHtml('<div class="title-text">'+this.params.loadingText+"</div>"+i);break;case h.Squarespace.DialogStates.EDITING:a&&this.setTitleHtml('<div class="title-text">'+a+"</div>"+i);break;case h.Squarespace.DialogStates.SAVING:this.params.savingText&&this.setTitleHtml('<div class="title-text">'+this.params.savingText+"</div>"+i);break;default:break}},setTitleHtml:function(e){this.titleTextEl.setHTML(e)},setData:function(i){h.Array.each(this.currentTab.tabFields,function(e,t){if(e.setValue){var a=i[e.getName()];i.hasOwnProperty(e.getName())||(a=s(i,e.getName()));e.setValue(h.Lang.isValue(a)?a:null);this.fire("datachange",e)}},this)},focusTab:function(){if(!this.currentTab)return;this.fire("tab-focused",{tabName:this.currentTab.name});if(h.Lang.isArray(this.currentTab.tabFields)){if(p())return;h.Array.some(this.currentTab.tabFields,function(e,t){var a=!!(e.setValue&&e.focus);var i=this._isDialogField2(e);var s=!!(i&&e.get("focusable"));if(a&&!i||s){e.focus();return true}},this)}},_getFullHeight:function(){return h.one(document).get("winHeight")-2*this.params.edgeMargin-this.controlsHeight-this.titleEl.get("offsetHeight")},dataReady:function(){var e;this.clearEdited();this._setState("EDITING");this.titleEl.removeClass("loading");this.params.initialData||(this.params.initialData={});this.bodyHeight=this.params.height;"full"!==this.params.verticalHeight&&"fit"!==this.params.verticalHeight||(this.bodyHeight=this._getFullHeight());this.preferredHeight=this.bodyHeight;this.bodyEl.setStyle("width",this.params.width+"px");this.params.overlay&&!this.params.doNotDisableBodyScroll&&this.disableBodyScroll();if(this.moving){this.moving=false;this.updateTitle();if(this.definitionChanged){this.definitionChanged=false;this.destroyBody();this.destroyButtons();this.render();e=this._anim({node:this.bodyEl,duration:.25,easing:h.Easing.easeOutStrong,to:{height:this.bodyHeight}});e.on("end",function(){this.fire("ready")},this);e.run()}else{if(this.rendered){this.setData(this.params.initialData);this.params.autoFocus&&this.focusTab()}else this.once("rendered",function(){this.setData(this.params.initialData);this.params.autoFocus&&this.focusTab()},this);this.fire("ready")}this.clearEdited()}else{this.currentTabIndex=0;this.currentTab=this.params.tabs[0];this.updateTitle();if(this.params.loadingState){e=this._anim({node:this.el,to:{opacity:1},duration:.15,easing:h.Easing.easeOutStrong});e.run();if(this.controlsEl){e=this._anim({node:this.controlsEl,to:{height:this.controlsHeight},duration:.15,easing:h.Easing.easeOutStrong});e.run()}e=this._anim({node:this.bodyEl,to:{height:this.bodyHeight},duration:.25,easing:h.Easing.easeOutStrong});e.on("end",function(){this.render();this.fire("ready")},this);e.run()}else{this.render();this.currentData=this.params.initialData;var t=this;var a=function(){t.el&&t.el.setStyle("transform",null)};switch(this.params.showAnim){case"custom":this.params.customShowAnim(this.el,function(){t.fire("ready")});break;case"fade":this.el.transition({opacity:{duration:.2,value:1},easing:"ease-out"},function(){t.fire("ready");a()});break;case"noshow":this.el.setStyles({display:"none"});t.fire("ready");break;default:t.fire("ready");this.el.addClass("visible");break}}}},containsNode:function(e){return this.bodyEl&&this.bodyEl.contains(e)},activateTab:function(e){this.hideErrors();var a=parseInt(e.index,10);this.tabbedHeader&&a!==this.tabbedHeader.state.active&&this.tabbedHeader.setState({active:a});this.currentTab||(this.currentTab=e);h.Array.each(this.params.tabs,function(e,t){t===a&&this._showPanelByIndex(a)},this);var t=this.currentTab.reactData;var i=this.currentTab.tabPanelObj.getDOMNode();t&&-1===this.reactComponentContainers.indexOf(i)&&this._renderReactComponent(t,i)},_showField:function(e){(this._isDialogField2(e)&&e.get("visible")||!this._isDialogField2(e)&&!e.config.hidden)&&e.show(true)},_updateControlsForTab:function(e){this.controlsElButtonDisplayClass&&this.controlsEl.removeClass(this.controlsElButtonDisplayClass);if(e.hasOwnProperty("buttonDisplayClass")){this.buttonStateEl.setStyle("display","block");this.controlsHeight=109;this.controlsEl.addClass(e.buttonDisplayClass);this.controlsElButtonDisplayClass=e.buttonDisplayClass}else{this.buttonStateEl.setStyle("display","none");this.controlsHeight="standard"===this.params.style?65:60;this.controlsElButtonDisplayClass=null}this._shown&&this.onResize()},_showNewPanel:function(e,t,a,i,s,n){this.currentTab=e;this.currentTabIndex=t;this.updateTitle();e.tabPanelObj.removeClass("hidden");this._updateControlsForTab(e);if(this.params.noTabAnim){a=this.currentTab.tabFields;h.Array.forEach(a,function(e){this._showField(e)},this);this.focusTab();this.activateErrors()}else{i=this._anim({node:e.tabPanelObj,to:{left:0},duration:s,easing:n});i.on("end",function(){var e=this.currentTab.tabFields;h.Array.forEach(e,function(e){this._showField(e)},this);this.focusTab();this.activateErrors()},this);i.run();e.tabPanelObj.animation=i}if(this.currentTab.height){this.currentTab.tabPanelObj.setStyle("height",this.currentTab.height-50);this._anim({node:this.bodyEl,to:{height:this.currentTab.height},duration:s,easing:n}).run()}this.bodyEl.toggleClass("scrollable",!!this.currentTab.scroll);this.currentTab.scroll?this.bodyEl.plug(h.Squarespace.Plugin.ScrollLock):this.bodyEl.unplug(h.Squarespace.Plugin.ScrollLock);this.fire("tab-shown",{name:this.currentTab.name,title:this.currentTab.title})},_showPanelByIndex:function(e){if(e===this.currentTabIndex)return;var t;var a=.5;var i=h.Easing.easeBothStrong;var s=this.params.tabs[e];var n=this.params.tabs[this.currentTabIndex];if(!this.params.noTabAnim){s.tabPanelObj.animation&&s.tabPanelObj.animation.stop(true);n.tabPanelObj.animation&&n.tabPanelObj.animation.stop(true)}var r=n.tabFields;if(this.params.noTabAnim){n.tabPanelObj.setStyles({opacity:1,zIndex:"300"});n.tabPanelObj.addClass("hidden")}else{s.tabPanelObj.setStyles({left:(s.index>n.index?1:-1)*this.params.width+"px",opacity:1,zIndex:"300"});n.tabPanelObj.setStyle("zIndex","0");var o=(s.index<n.index?1:-1)*this.params.width;t=this._anim({node:n.tabPanelObj,to:{left:o+"px"},duration:a,easing:i});var l=this._showNewPanel.bind(this);t.on("end",function(){this.tab.addClass("hidden");c.isSubDesktop()&&l(s,e,r,t,.4,i)},{tab:n.tabPanelObj});t.run();n.tabPanelObj.animation=t}c.isDesktop()&&this._showNewPanel(s,e,r,t,a,i)},renderNavigationTabs:function(e){var t=106;var a=this.tabContainer.width()/this.params.tabs.length;var i=Math.max(t,a);var s=[];h.Array.each(this.params.tabs,function(e,t){e.index=t;s.push({tabTitle:e.tabTitle,onClick:this.params.tabs.length>1?this.activateTab.bind(this,e):null});if(!this.rendered){var a=!this.params.defaultTab&&0===t||this.params.defaultTab&&this.params.defaultTab===e.name;if(a){this.currentTab=e;this.currentTabIndex=t}this.renderTab(e,a)}},this);h.Object.each(e,function(e,t){var a=this.getField(t);if(!a){false;return}a.tab&&(s[a.tab.index].error=true)},this);s.length>1&&(this.tabbedHeader=r.render(n.createElement(u,{defaultTabIndex:this.currentTabIndex,tabs:s,tabWidth:i}),this.tabContainer.getDOMNode()))},render:function(){if(this.rendered)return;this.observedHeight=0;this.renderNavigationTabs();this.renderButtons();if(!this.bodyHeight){this.bodyHeight=this.observedHeight+14;this.preferredHeight=this.bodyHeight}switch(this.params.verticalHeight){case"fit":this.bodyHeight>this.observedHeight&&(this.bodyHeight=this.observedHeight);break;case"fixed":case"full":var e=this.titleEl?this.titleEl.height():0;var t=this.controlsEl?this.controlsEl.height():0;if(window.innerHeight<e+t+this.bodyHeight+this.params.top){this.el.setStyles({top:this.params.edgeMargin+"px"});this.params.top=this.params.edgeMargin;this.bodyHeight=window.innerHeight-2*this.params.top-e-t}break}this.fire("rendered");this.rendered=true;this.updateTitle(h.Squarespace.DialogStates.EDITING);this.bodyEl.setStyle("height",this.bodyHeight+"px");this._updatePosition(true);this.params.autoFocus&&this.focusTab();this.onResize()},getButtons:function(){return this.params.buttons},setButtons:function(){var e=arguments;1===arguments.length&&h.Lang.isArray(arguments[0])&&(e=arguments[0]);this.params.buttons=[];this.destroyButtons();e.forEach(function(e){this.params.buttons.push(e)},this);this.isVisible()&&this.renderButtons()},_removeButton:function(a){var e=h.Array.filter(this.getButtons(),function(e,t){return e!==a&&e.type!==a},this);this.setButtons(e)},_getNextTabIndex:function(){return this.BUTTONS_BASE_IDX+this.lastTabIndex++},disableButton:function(e){e.set("disabled","disabled");e.ancestor().addClass("disabled")},enableButton:function(e){e.removeAttribute("disabled");e.ancestor().removeClass("disabled")},renderButtons:function(){var e="javascript:noop();";this.saveAndCloseButton=h.Node.create(h.Lang.sub('<input class="saveAndClose" tabIndex="{tabIndex}" type="button" data-test="dialog-saveAndClose" value="'+g("Save &amp; Close")+'" />',{tabIndex:this._getNextTabIndex()}));this.saveButton=h.Node.create(h.Lang.sub('<input class="save" tabIndex="{tabIndex}" type="button" value="'+g("Save")+'" data-test="dialog-save"  />',{tabIndex:this._getNextTabIndex()}));this.cancelButton=h.Node.create(h.Lang.sub('<a class="cancel" href={href} tabIndex="{tabIndex}" data-test="dialog-cancel" >'+g("Cancel")+"</a>",{tabIndex:this._getNextTabIndex(),href:e}));this.removeButton=h.Node.create(h.Lang.sub('<input class="remove" tabIndex="{tabIndex}" type="button" value="'+g("Remove")+'"  data-test="dialog-remove" />',{tabIndex:this._getNextTabIndex()}));this.buttonEvents.push(h.on("click",function(e){e.halt();this._getButtonClickHandler("saveAndClose",this.saveAndClose)(e)},this.saveAndCloseButton,this),h.on("click",this._getButtonClickHandler("save",this.save),this.saveButton),h.on("click",this._getButtonClickHandler("remove",this.remove),this.removeButton),h.on("click",this._getButtonClickHandler("cancel",this.markCancelLifecycle),this.cancelButton),h.on("click",this._getButtonClickHandler("close",this.close),this.cancelButton),h.on("click",this._getButtonClickHandler("cancel",this.cancelClick),this.cancelButton));var t;var a=h.clone(this.params.buttons);var i=this.params.buttons.length;i>0&&a.reverse();while(--i>=0){var s;t=a[i];if(!t)continue;switch(t.type){case"cancel":this.cancelButton.set("innerHTML",t.title);s=h.Node.create('<div class="cancel-block"></div>');s.append(this.cancelButton);break;case"save":this.saveButton.set("value",t.title);s=h.Node.create('<div class="button-block"></div>');s.append(this.saveButton);break;case"remove":this.removeButton.set("value",t.title);s=h.Node.create('<div class="button-block"></div>');s.append(this.removeButton);break;case"saveAndClose":this.saveAndCloseButton.set("value",t.title);s=h.Node.create('<div class="button-block"></div>');s.append(this.saveAndCloseButton);break;default:var n;if("text"===t.style){n='<a href="'+e+'">'+t.title+"</a>";s=h.Node.create('<div class="cancel-block"></div>');s.append(n)}else{var r="dialog-"+t.className;n=h.Node.create('<input type="button" value="'+t.title+'" data-test="'+r+'" />');t.className&&n.addClass(t.className);s=h.Node.create('<div class="button-block"></div>');s.append(n)}this.publish("button-"+t.type,{emitFacade:true,prefix:"EditingDialog",broadcast:2});this.buttonEvents.push(h.on("click",this._getButtonClickHandler(t.type),n))}this.buttonHolder.append(s);t.disabled&&this.disableButton(n)}},cancelClick:function(e){this.fire("cancel-click")},_getButtonClickHandler:function(a,i){return h.bind(function(e){var t=!this.fire("button-"+a);t?e.halt():h.Lang.isFunction(i)&&i.call(this,e);this.fire("button-click",{type:a})},this)},showSaveOverlay:function(e){if(this.params.disableSaveOverlay)return;if(this.saveOverlay){this.saveOverlay.remove();this.saveOverlay=null}var t=this.titleEl.get("offsetHeight");var a=this.bodyEl?this.bodyEl.get("offsetWidth"):0;this.saveOverlay=h.Node.create('<div class="save-overlay">&nbsp;</div>');this.saveOverlay.on("mousedown",function(e){e.halt()});this.saveOverlay.setStyles({height:this.mainEl.get("offsetHeight")-t-10+"px",marginTop:t+5+"px",width:a+"px"});this.mainEl.append(this.saveOverlay);this.tabContainer.addClass("hidden");this.saveOverlay.addClass("visible")},hideSaveOverlay:function(){if(this.saveOverlay){this.saveOverlay.addClass("hidden");this.tabContainer.removeClass("hidden");h.later(300,this,function e(){this.saveOverlay&&this.saveOverlay.remove();this.saveOverlay=null});this._setState("EDITING");this.updateTitle()}else this._setState("EDITING")},allowEditing:function(){this.hideSaveOverlay();this.clearEdited();this.fire("editing-allowed");this._setState("EDITING")},save:function(){if(!this._showLocalErrors()){this._debug.log("save");this.closeOnSend=false;this._saveData()}},_showLocalErrors:function(){this.hideErrors();var t=function(e){return e.inActiveFrame};var a=this.currentTab;var i=function(e){return e.tab.name===a.name};var e=function(e){return t(e)&&i(e)};var s=function(e){return{field:e,errors:e.getErrors()}};var n=h.Object.values(this.fields);n=this.params.validateActiveTabOnly?n.filter(e,this):n.filter(t,this);var r=h.Array.map(n,s);var o=false;var l={};r.forEach(function(e){var t=e.errors;var a=t[t.length-1];if(a){l[e.field.getName()]=t[t.length-1];o=true}},this);o&&this.showErrors(l);return o},saveAndShow:function(){if(!this._showLocalErrors()){this._debug.log("saveAndShow");this.closeOnSend=false;this._saveData();this.show()}},saveAndClose:function(){if(!this._showLocalErrors()){var e=this.fire("preClose");if(!e){this._debug.log("preClose returned false, save prevented");return}this._debug.log("saveAndClose");this.params.closeable&&(this.closeOnSend=true);this._saveData()}},_saveData:function(){this._debug.log("_saveData");if(this._isState("SAVING")){this._debug.log("_saveData",g("Exiting because dialog state is in SAVING"));return}this.clearEdited();this.hideErrors();this._setState("SAVING");this.updateTitle();this.showSaveOverlay();this._debug.log("_saveData","fire","send-requested");this.fire("send-requested")},remove:function(e){e&&e.halt();this.fire("remove-requested")},canClose:function(e,t,a){if(!this._shown)return false;var i=h.Array.every(this.childDialogs,function(e){return e.canClose(this.saveAndClose,this.cancel)},this);if(!i)return false;var s=this._isReactDataDirty(this);if((s||this.edited||this.editedSinceLastSave)&&this.params.discardChangesConfirmation&&!this._isState("SAVING")){var n=s;for(var r in this.fields){var o=this.fields[r];o.didDataChange()&&(n=true)}if(n){var l=new h.Squarespace.Widgets.Confirmation({render:this.el.ancestor("body")||true,style:h.Squarespace.Widgets.Confirmation.TYPE.CONFIRM_OR_REJECT,showOverlay:true,"strings.confirm":g("Save"),"strings.reject":g("Discard"),"strings.title":g("Review Changes"),"strings.message":g("You have made changes. Do you want to save or discard them?")});l.on("confirm",function(){this.clearEdited();this._debug.log("canClose","calling onSuccess()",e);e.call(this)},this);l.on("reject",function(){this.clearEdited();this._debug.log("canClose","calling onReject()",t);t.call(this)},this);l.on("cancel",function(){h.Squarespace.EscManager.addTarget(this);this._debug.log("canClose","onCancel");a&&a.call(this);this.fire("cancel-close")},this);this._debug.log("canClose",false,"Showing confirmation dialog");return false}}this._debug.log("canClose",true);return true},close:function(e,t){this._debug.log("close",e);if(!this._isState("EDITING")&&!this._isState("SAVING")){this._debug.log("close","Exiting because state is in Editing or Saving.");this.isCanceling=false;return}if("boolean"===typeof t&&t)this._debug.log("canClose skipped due to force = true");else if(false===this.canClose(this.saveAndClose,this.cancel)){this._debug.log("close","Exiting because canClose came back false");this.isCanceling=false;return}this.trackCancel();this.isCanceling=false;this.fire("close");this.dismiss(true)},trackCancel:function(){if(this.isDuplicating||!this.isCanceling)return;var s=this.currentData;if(!s||!s.collectionId)return;try{h.Squarespace.ContentCollectionCache.getCollectionById(s.collectionId,function e(t){if(!t)return;var a=t.get("typeName")||"";var i;a.indexOf("blog")>-1?i="blog":a.indexOf("event")>-1&&(i="events");i&&d.cancelEditCollectionItem({itemId:s.id,collectionType:i,collectionId:s.collectionId})})}catch(e){window.SQUARESPACE_SENTRY&&window.SQUARESPACE_SENTRY.captureMessage("track cancel edit collection failed")}},cancel:function(e){this._debug.log("cancel",e);if(!this._isState("EDITING")&&!this._isState("SAVING"))return;this.clearEdited();this.fire("cancel");this.dismiss(false)},dismiss:function(e){var t=e?h.bind(this.destroy,this):h.bind(this._finishCancelation,this);this.fire("dismiss");this._setState("CLOSING");this.updateTitle();this.clearEdited();this._preDestroy();this.hideErrors();this.params.overlay&&this.restoreBodyScroll();switch(this.params.hideAnim){case"noHideAnimation":t();break;case"custom":this.params.customHideAnim(this.el,t);break;default:this.el.removeClass("visible");h.later(500,this,t);break}if(this.__legacyRouterUnlisten){this.__legacyRouterUnlisten();this.__legacyRouterUnlisten=null}if(this.__legacyRouterUnlistenBefore){this.__legacyRouterUnlistenBefore();this.__legacyRouterUnlistenBefore=null}if(this.params.overlay&&this.overlayEl){this.overlayEl.destroying=true;this.overlayEl.addClass("hidden");h.later(300,this,function e(){this.overlayEl&&this.overlayEl.remove();this.overlayEl=null})}},_finishCancelation:function e(){this.fire("render-anchor",this.getInitialData());this.destroy();this._setState("CLOSED");this.fire("canceled")},_preDestroy:function(){var e=0;var t;this._preDestroyCalled=true;var a=h.Squarespace.OPEN_DIALOGS.indexOf(this);-1!==a&&h.Squarespace.OPEN_DIALOGS.splice(a,1);0===h.Squarespace.OPEN_DIALOGS.length&&h.one(document.body).removeClass("dialog-open");this._applyMethodToChildren("close");for(e=0,t=this.timers.length;e<t;++e)this.timers[e].cancel();this.timers=[];h.Squarespace.EscManager&&h.Squarespace.EscManager.removeTarget(this);this.activeFlyout&&this.activeFlyout.field.closeFlyout();h.Squarespace.ToolTipManager&&this.params.disableTips&&h.Squarespace.ToolTipManager.enableTooltips();if(this.firstShowEvent){this.firstShowEvent.detach();this.firstShowEvent=null}this.anchorEl&&this.anchorEl._node&&this.anchorEl.removeClass("targeted")},getErrors:function(){var e=0;var t={};for(var a in this.fields){var i=this.fields[a];var s=false;s=this._isDialogField2(i)?i.get("required")&&i.isEmpty():i.config.required&&(""===i.getValue()||0===i.getValue());if(s){t[i.getName()]=g("This is a required field.");e++}}return{errors:e,errorSet:t}},send:function(){var e=this.getErrors();var t=e.errors;var a=e.errorSet;if(t){this.showErrors(a);this.fire("local-errors")}else{if(this.closeOnSend){this.saved=true;this.closeOnSend=false;this.close()}this.fire("sent")}},updateAutoSave:function(e,t){if(!this.autosaveEl.inDoc()){this.editedSinceLastSave=false;return}this.autosaveEl.setStyle("display","block");var a=this._anim({node:this.autosaveEl,from:{opacity:1},to:{opacity:.5},duration:.25,easing:h.Easing.easeOutStrong});a.on("end",function(){if(e)this.autosaveEl.set("innerHTML",e);else{this.autosaveEl.set("innerHTML",g('Last saved <span class="time"></span>.'));this.autosaveEl.one(".time").plug(h.Squarespace.RelativeTimeDisplay)}t?this.autosaveEl.addClass("error"):this.autosaveEl.removeClass("error");this.autosaveEl.ancestor("body")&&this._anim({node:this.autosaveEl,from:{opacity:.5},to:{opacity:1},duration:.25,easing:h.Easing.easeOutStrong}).run()},this);a.run();this.editedSinceLastSave=false},_recordFieldData:function(s,e){h.Object.each(e.fields,function(e){if(h.Lang.isFunction(e.getValue)){var t=e.getValue();s[e.getName()]=t;if(void 0!==e.getAssociatedVars){var a=e.getAssociatedVars();for(var i=0;i<a.length;i++)s[a[i].name]=a[i].value}}e.fields&&this._recordFieldData(s,e)},this)},_isReactDataDirty:function(e){var a=false;h.Object.each(e.reactEls,function(e){var t=e.props.getData();a=a||t.isDirty},this);return a},_recordReactData:function(a,e){h.Object.each(e.reactEls,function(e){var t=e.props.getData();a=h.merge(a,t)},this);return a},getData:function(){var e={};for(var t in this.params.initialData)e[t]=this.params.initialData[t];this._recordFieldData(e,this);return this._recordReactData(e,this)},getField:function(e){var t=this.fields[e];if(h.Lang.isValue(t))return t;for(var a in this.fields)if(this.fields[a].getField){t=this.fields[a].getField(e);if(h.Lang.isValue(t))return t}return},getSection:function(e){return this.sections[e]},_renderFields:function(n,r,o,l){var c=33;h.Array.each(r,function(e,t){var a;var i;if(!e)return;var s=e.type;l||this.params.dontSetWidthOnFields||(l=this.params.width-2*c);if(l&&!isNaN(l)){this._debug.log("availableWidth: ",l);this._debug.log("fieldConfig.width: ",e.width);a=(e.ctor&&e.config?e.config.width:e.width)||1;i=a<=1?Math.floor(a*l):a}"splitter"===s?this._renderSplitter(e,t,r,n,o,l,i):"multi-frame"===s?this._renderMultiFrame(e,t,r,n,o,l,i):"section"===s?this._renderSection(e,t,r,n,o,l,i):"stack"===s?this._renderStack(e,t,r,n,o,l,i):e.ctor&&e.ctor===h.Squarespace.DialogFields.MultiFrame?this._renderDF2MultiFrame(e,t,r,n,o,l,i):this._renderField(e,t,r,n,o,l,i)},this)},_renderReactComponent:function(e,t){var a=window.CONFIG_PANEL.get("router");var i=h.merge({router:a,location:a.getCurrentLocation()},e.props);var s=n.createElement(e.component,i);r.render(s,t);this.reactComponentContainers.push(t);this.reactEls.push(s)},_renderSplitter:function(e,t,a,i,s,n,r){var o;var l=33;var c=h.Node.create('<div class="split-field clear '+(e.fields.length>1?"padding-adjust":"")+'"></div>');e.width||(e.width=1);if(n&&!isNaN(n)){c.setStyle("width",Math.round(e.width*n)+l+"px");o=n-l*(e.fields.length-1)}else o=s.get("offsetWidth")-l*(e.fields.length-1)-2*l;s.append(c);this._renderFields(i,e.fields,c,o);e.countHeight&&(this._takenHeight+=c.get("offsetHeight"));e.hidden&&c.hide()},_renderMultiFrame:function(e,t,a,i,s,n,r){var o=new h.Squarespace.DialogFieldGenerators["multi-frame"](e,this.params.initialData,this);o.type=e.type;o.append(i,a,s,n);o.getName()?this.fields[o.getName()]=o:this._noNameFields.push(o)},_renderDF2MultiFrame:function(e,t,a,i,s,n,r){var o;var l=h.merge(e,e.config,{dialog:this,data:this.params.initialData[e.config.name],render:s});o=new e.ctor(l);n&&o.get("boundingBox").setStyle("width",r+"px");var c=o.getName()||o.get("name");c?this.fields[c]=o:this._noNameFields.push(o);o.each(function(e){var t=e.getName()||e.get("name");t?this.fields[t]=e:this._noNameFields.push(e);i.tabFields.push(e);e.tab=i},this)},_renderSection:function(e,t,a,i,s,n,r){var o;var l;var c=h.Node.create('<div class="section-inner clear"></div>');var u="section-field container-field-wrapper field-wrapper clear ";void 0!==e.style&&(u+=e.style);var d=h.Node.create('<div class="'+u+'"></div>');d.append(c);s.append(d);e.width||(e.width=1);l=n;var p=Math.round(e.width*l);p&&d.setStyle("width",p+"px");o=Math.round(e.width*l);this._renderFields(i,e.fields,c,o);e.hidden&&d.hide();e.name&&(this.sections[e.name]=d)},_renderStack:function(e,t,a,i,s,n,r){var o;var l=33;var c=n;n||(c=this.params.width-2*l);var u=h.Node.create('<div class="stack-field stack-field-wrapper clear"></div>');s.append(u);e.width||(e.width=1);e.float&&u.setStyle("float",e.float);u.setStyle("width",Math.round(e.width*c)+"px");t!==a.length-1&&u.setStyle("paddingRight",l+"px");o=Math.round(e.width*c);this._renderFields(i,e.fields,u,o);e.hidden&&u.hide();e.name&&(this.sections[e.name]=u)},_renderField:function(e,t,a,i,s,n,r){var o;var l=h.merge(e,e.config||{},{dialog:this,render:s});var c=l.name||e.name;this._debug.isTimingEnabled()&&this._debug.time("render field: "+c);if(h.Lang.isUndefined(l.data)&&this.params.initialData&&!h.Lang.isUndefined(c)){l.data=this.params.initialData[c];l.panel=this}if(e.ctor)o=new e.ctor(l);else{if(!e.type){false;throw new Error("Could not find field constructor or field type.")}var u=this._convertToDialogField2Name(e.type);var d=h.namespace("Squarespace.DialogFields")[u];if(!d&&!h.Squarespace.DialogFieldGenerators[e.type])throw new Error("Unknown field type: "+e.type);this._debug.log("Generating field type: ",e.type);if(d)o=new d(l);else{false;var p=h.Squarespace.DialogFieldGenerators[e.type];o=new p(e,this.params.initialData,this);o.type=e.type;o.append(s)}}e.verticalSpan&&(this._verticalEl=o);if(e.countHeight&&!e.verticalSpan)if(o.getTakenHeight)this._takenHeight+=o.getTakenHeight();else{this._takenHeight+=o.get("boundingBox").get("offsetHeight");this._takenHeight+=parseInt(o.get("boundingBox").getStyle("marginTop"),10);this._takenHeight+=parseInt(o.get("boundingBox").getStyle("marginBottom"),10)}if(n)if(this._isDialogField2(o)){this._debug.log("setting width",r);o.get("boundingBox").setStyle("width",r+"px")}else if(o.html){this._debug.log("setting width",r);o.html.setStyle("width",r+"px")}o.resize&&o.resize();e.hidden&&o.temporaryHide(true);this._isDialogField2(o)?this.bodyEvents.push(o.on("dataStateChange",function(e){var t=e.newVal;this.fire("field-loading-change",{field:o,loading:t===t.LOADING})},this)):this.bodyEvents.push(o.on("loadingChange",function(e){this.fire("field-loading-change",{field:o,loading:e.newVal})},this));o.getName()?this.fields[o.getName()]=o:this._noNameFields.push(o);i.tabFields.push(o);o.tab=i;this._debug.isTimingEnabled()&&this._debug.timeEnd(g("render field: {fieldName}",{fieldName:c}))},_isDialogField2:function(e){return h.Lang.isValue(e)&&h.Lang.isValue(h.Squarespace.DialogField2)&&e instanceof h.Squarespace.DialogField2},_setState:function(e){h.Lang.isValue(h.Squarespace.DialogStates[e])?this.state=h.Squarespace.DialogStates[e]:console.warn("[Dialog] Invalid state.")},_isState:function(e){if(h.Lang.isString(e))return this.state===h.Squarespace.DialogStates[e];return this.state===e},resizeVerticalFields:function(){h.Array.each(this.verticalFields,function(e,t){var a=this.getBodyHeight()-e._takenHeight;if(this._isDialogField2(e)){a-=parseInt(e.get("boundingBox").getStyle("marginTop"),10);a-=parseInt(e.get("boundingBox").getStyle("marginBottom"),10);e.set("height",a)}else e.setHeight(a)},this)},renderTab:function(e,t){var a=h.Node.create('<div class="tab-wrapper"></div>');h.Lang.isValue(e.name)&&a.addClass("dialog-tab-"+e.name);a.setStyles({width:this.params.width+"px",left:t?"0px":this.params.width+"px"});this.bodyEl.append(a);e.tabFields=[];this._verticalEl=null;this._takenHeight=0;this._renderFields(e,e.fields||[],a);t&&e.reactData&&this._renderReactComponent(e.reactData,a.getDOMNode());e.noTabTitle&&a.addClass("noTabTitle");if(this._verticalEl){var i=parseInt(a.getStyle("paddingTop"),10);isNaN(parseInt(a.getStyle("marginTop"),10))||(i+=parseInt(a.getStyle("marginTop"),10));this._takenHeight+=i;var s=this._isDialogField2(this._verticalEl);s||this._verticalEl.setHeight||true;var n=this.getBodyHeight()-this._takenHeight;if(s){var r=this._verticalEl.get("boundingBox");n-=parseInt(r.getStyle("marginTop"),10);n-=parseInt(r.getStyle("marginBottom"),10);this._verticalEl.set("height",n)}else this._verticalEl.setHeight(n);this._verticalEl._takenHeight=this._takenHeight;this.verticalFields.push(this._verticalEl)}e.tabPanelObj=a;var o=a.get("offsetHeight");(!this.observedHeight||o>this.observedHeight)&&(this.observedHeight=o);t&&e.tabFields&&h.Array.forEach(e.tabFields,function(e){this._showField(e)},this);this.bodyEl.toggleClass("scrollable",!!e.scroll);t||a.addClass("hidden");this.updateTitle();return a},_convertToDialogField2Name:function(e){var t=l.createUrlSafeString(e).split("-");for(var a=t.length-1;a>=0;a--)t[a].capitalize&&(t[a]=t[a].capitalize());return t.join("")+"Field"},_destroyFields:function(){if(this.fields){h.Object.each(this.fields,function(e,t){e.destroy()},this);this._destroyNoNameFields()}this.fields={}},_destroyReactComponents:function(){h.Object.each(this.reactEls,function(e){e.props.onDestroy&&e.props.onDestroy()},this);this.reactComponentContainers.length&&h.Object.each(this.reactComponentContainers,r.unmountComponentAtNode);this.reactComponents=[]},_destroyNoNameFields:function(){h.Array.each(this._noNameFields,function(e){e&&e.destroy()},this);this._noNameFields=[]},destroyBody:function(){this.rendered=false;this._destroyFields();this._destroyReactComponents();this.bodyEl&&this.bodyEl._node&&this.bodyEl.empty();h.Array.each(this.params.tabs,function(e){e.tabPanelObj=null;e.tabFields=null});this._detachEventArray(this.bodyEvents);this.bodyEvents=[]},_detachEventArray:function(e){h.Array.each(e,function(e){e.detach()})},destroyButtons:function(){this._detachEventArray(this.buttonEvents);this.buttonEvents=[];this.buttonHolder&&this.buttonHolder._node&&this.buttonHolder.set("innerHTML","")},_destroy:function(){this.preDestroyCalled||this._preDestroy();this.destroyTimer=null;this.currentErrors=null;this.bodyHeight=null;this.destroyBody();this.destroyButtons();if(this.overlayEl&&!this.overlayEl.destroying){this.overlayEl.remove();this.overlayEl=null}this._onBeforeUnloadEvt&&this._onBeforeUnloadEvt.detach();this._detachEventArray(this.globalEvents);if(this.dd){this.dd.destroy();this.dd=null}this.globalEvents=[];if(this.el){this.el.remove(true);this.el=null;this.bodyEl=null}if(this.params.parentDialog){this.params.parentDialog.removeChildDialog(this);this.params.parentDialog=null}this._setState("CLOSED");this.position=null;this.anchorEl=null;if(this.__legacyRouterUnlisten){this.__legacyRouterUnlisten();this.__legacyRouterUnlisten=null}if(this.__legacyRouterUnlistenBefore){this.__legacyRouterUnlistenBefore();this.__legacyRouterUnlistenBefore=null}if(this.__legacyRouterUnload){this.__legacyRouterUnload();this.__legacyRouterUnload=null}}})},"1.0",{requires:["anim","attribute","datatype-date","dd","json","node","node-event-simulate","node-focusmanager","squarespace-debugger","squarespace-dialog-field-2","squarespace-dialog-fields","squarespace-dialog-legacy-multi-frame","squarespace-escmanager","squarespace-gizmo","squarespace-plugin-scroll-lock","squarespace-ui-base","squarespace-util","squarespace-widgets-confirmation","transition"]})},"./src/main/webapp/universal/scripts-v6/dialog/legacy/multi-frame.js":function(e,t){YUI.add("squarespace-dialog-legacy-multi-frame",function(o){o.namespace("Squarespace.DialogFieldGenerators");o.Squarespace.DialogFieldGenerators["multi-frame"]=Class.extend(o.Squarespace.DialogField,{initialize:function(e,t,a){this._super(e,t,a);this.frames={};this.activeEl=null;this.value=this.config.initialFrame;this.panel.bodyEvents.push(o.on("click",this.onClick,this.html,this))},onClick:function(e){this.panel.fire("datachange",this)},show:function(e){var t=this.frames[e];if(!!t&&t===this.activeEl)return;if(this.activeEl){this.activeEl.a&&this.activeEl.a.stop();var a=this.activeEl.fields;this.activeEl.a=this._anim({node:this.activeEl.el,to:{height:0},duration:.3,easing:o.Easing.easeOutStrong});a.forEach(this.setInActiveFrame(false),this);this.activeEl.a.on("end",function(e){e.target.get("node").addClass("hidden")},this);this.activeEl.a.run()}t.a&&t.a.stop();this.activeEl&&t.el.ancestor().insertBefore(t.el,this.activeEl.el.next());t.el.removeClass("hidden");var i=t.el.getStyle("height");t.el.setStyles({height:null});t.realHeight=t.el.get("offsetHeight");t.el.setStyles({height:i});t.a=this._anim({node:t.el,to:{height:t.realHeight},duration:.3,easing:o.Easing.easeOutStrong});t.a.on("end",function(e,t){for(var a=0;a<t.fields.length;++a){var i=this.panel.fields[t.fields[a].name];i&&i.updateInlineTitle&&i.updateInlineTitle()}this.focusCurrentFrame()},this,t);t.a.run();t.fields.forEach(this.setInActiveFrame(true),this);this.activeEl=t;this.value=e},focusCurrentFrame:function(){var e;for(var t=0;t<this.activeEl.fields.length;++t){e=this.activeEl.fields[t];var a=this.panel.fields[e.name||o.Object.getValue(e,["config","name"])];if(o.Lang.isValue(a)&&a.getNode){a.getNode().focus();return}}},setInActiveFrame:function(a){return function(e){if(e.name){var t=this.panel.getField(e.name);t.inActiveFrame=a;t.fire("mutli-frame-focus")}}},append:function(e,t,a,i){for(var s in this.config.frames){var n=this.config.frames[s];var r=o.Node.create('<div class="frame-wrapper clear"></div>');a.append(r);this.panel._renderFields(e,n.fields,r,i);this.frames[s]=this.config.frames[s];this.frames[s].el=r;this.frames[s].realHeight=r.get("offsetHeight");if(s!=this.config.initialFrame){r.setStyle("height","0px");r.addClass("hidden");this.frames[s].visible=false;this.config.frames[s].fields.forEach(this.setInActiveFrame(false),this)}else{this.activeEl=this.frames[s];this.frames[s].visible=true;this.config.frames[s].fields.forEach(this.setInActiveFrame(true),this)}}}})},"1.0",{requires:["anim","squarespace-dialog-fields","squarespace-util","widget"]})},"./src/main/webapp/universal/scripts-v6/dialog/legacy/wysiwyg.js":function(e,t,s){var l=s("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var c=s("./src/main/webapp/universal/src/shared/utils/formatting/substituteString.js");var n=s("./common/temp/node_modules/lodash/debounce.js");YUI.add("squarespace-dialog-legacy-wysiwyg",function(d){d.namespace("Squarespace.DialogFieldGenerators");var o=s("./src/main/webapp/universal/src/shared/components/BaseCodeMirror.js");var a="field-wysiwyg-editor-container";var u="field-wysiwyg";var p="box-view";var r="page-view";var h="fullscreen-view";var e=200;var i=60;d.Squarespace.DialogFieldGenerators.wysiwyg=Class.extend(d.Squarespace.DialogField,{initialize:function(e,t,a){this._super(e,t,a);this.events=[];this.containerHeight=this.config.height||null;this.containerWidth=this.config.width||null;this.tabIndex=a.getNextTabIndex();this._preventThrottling=e.preventThrottling;var i=this.config.className;i&&(this.className=i);this.viewMode=p;this.config.pageview&&(this.viewMode=r);this.menuConfig=e.menuConfig||"source";this.menuConfigs={code:{code:[{cmd:"sourcecode",title:l("Show Source"),type:"button",html:l("Display Source")},{type:"container",style:"float: right",contents:[{type:"select",title:l("Editor Mode"),selected:"htmlmixed",options:{css:l("CSS"),htmlmixed:l("HTML"),javascript:l("JavaScript"),markdown:l("Markdown"),null:l("Plain Text")}}]}]},markdown:{markdown:[{cmd:"bold",title:l("Bold"),type:"button"},{cmd:"italic",title:l("Italic"),type:"button"},{cmd:"link",title:l("Link"),type:"button"},{type:"separator"},{cmd:"h1",title:l("H1"),type:"button"},{cmd:"h2",title:l("H2"),type:"button"},{type:"separator"},{cmd:"blockquote",title:l("Block Quote"),type:"button"},{cmd:"unorderedlist",title:l("Unordered List"),type:"button"},{cmd:"orderedlist",title:l("Ordered List"),type:"button"}]}};if("code"===this.config.engine||"markdown"===this.config.engine){this.modes={source:this._loadTextEditor};this.mode="source"}else{this.modes={markdown:this._loadTextEditor,html:this._loadTextEditor,source:this._loadTextEditor};"html"!==this.mode&&"markdown"!==this.mode||(this.mode="source");this.mode=this.mode}this.modeEls={};this.config.titleStyle||(this.config.titleStyle="top");this.initialFieldData=t[this.config.name];var s=this._determineModeContent(this.initialFieldData);this.mode=s.mode;this.codeMode=s.codeMode;this.isSource=s.isSource;var n=s.content||this.config.defaultValue;if(!this.modes[this.mode]){false;this.mode="source";n=n||this.config.defaultValue}this.render();this.loadEditor(n);this.hookEvents();this.preCloseEvent=this.dialog.on("preClose",function(){this.dialog.fire("datachange",this)},this);this.publish("maximize-started",{broadcast:2});this.publish("maximize-complete",{broadcast:2});this.publish("minimize-started",{broadcast:2});this.publish("minimize-complete",{broadcast:2})},focus:function(){this.editor.focus()},didDataChange:function(){var e=d.Lang.isObject(this.initialFieldData)?this.initialFieldData.html:"";return e!==this.getValue().html},getTakenHeight:function(){return this.html.get("offsetHeight")-60},switchMode:function(a){var i=this.html;var e=this._determineModeContent(this.getValue()),s=e.content,t=false;s=this.generateHTML(s);this._isContentEmpty(s)||"markdown"===a&&(t=true);function n(){var e=this.isFullscreen();this.editor.destroy();this.destroyEvents();this.mode=a;this.render();var t=i.getStyle("width");t&&this.html.setStyle("width",t);i.replace(this.html);this.select.setValue(a);this.loadEditor(s);this.hookEvents();this.show();if(e){this.addFullscreenButtons();this.html.addClass("fullscreenEditor")}this.adjustHeight();this.dialog.fire("datachange",this)}if(t&&null===s){this.select.setValue(this.mode);new d.Squarespace.Widgets.Confirmation({"strings.title":l("Change Mode / Data Loss"),"strings.message":l("When switching to this mode you will lose all your previous data.")}).on("confirm",function(){n.call(this);this.select.setValue(a)},this)}else if(t){this.select.setValue(this.mode);new d.Squarespace.Widgets.Confirmation({"strings.title":l("Change Mode"),"strings.message":l("You might lose special formatting switching to this mode.")}).on("confirm",function(){n.call(this);this.select.setValue(a)},this)}else n.call(this)},_isContentEmpty:function(e){if(null===e)return true;if("string"===typeof e&&e.trim().length<=0)return true;if("object"===typeof e){for(var t in e.containers){if(!e.containers.hasOwnProperty(t))continue;return false}return true}return false},loadEditor:function(e){this.modes[this.mode].apply(this,[e])},_determineModeContent:function(e){e=e||{};if(e.wysiwyg&&e.wysiwyg.markdown){e.wysiwyg.source=e.wysiwyg.markdown;e.wysiwyg.markdown="";e.wysiwyg.mode="markdown"}return{content:e.wysiwyg.source||e.html,codeMode:e.wysiwyg.mode,isSource:e.wysiwyg.isSource,mode:"source"}},_initializeLinkFlyout:function(){this._linkEdit=new d.Squarespace.Flyout.LinkEdit;this.editor._linkEdit=this._linkEdit;this._linkEdit.on("dataChange",function(e){var t=e.newVal;var a=t.anchorNode;if(a){a.setAttribute("href",t.linkUrl);t.newWindow?a.setAttribute("target","_blank"):a.removeAttribute("target")}this.editor._onContentChange()},this);this._linkEdit.on("open",function(){this.editor.saveSelection()},this);this._linkEdit.on("close",function(e){this.editor.restoreSelection()},this);this._linkEdit.on("unlink",function(e){d.Squarespace.EditorBase.unwrap(e.anchorNode)})},_loadTextEditor:function(e){"markdown"===this.config.engine?this.editor=new d.Squarespace.MarkdownEditor({el:this.control,mode:this.codeMode,isSource:this.isSource,tabIndex:this.tabIndex}):this.editor=new d.Squarespace.CodeEditor({el:this.control,mode:this.codeMode,isSource:this.isSource,tabIndex:this.tabIndex});this.editor.on("modeChange",function(e){this.codeMode=e.newVal;var t=this.menuEl.one("select");if(t){t.set("value",e.newVal);var a=this.menuEl.one(".field-wysiwyg-tool-sourcecode");if("htmlmixed"===e.newVal||"markdown"===e.newVal)a.removeAttribute("disabled");else{this.isSource=true;a.addClass("active");a.setAttribute("disabled","disabled")}this.dialog.fire("datachange",this)}},this);this.editor.setContent(e);this.editor.editor.on("change",d.bind(this.onEditorContentChange,this));this.control.on("wysiwyg|focus",this._onfocus,this);this.control.on("wysiwyg|blur",this._onblur,this);this.events.push(this.menuEl.delegate("click",function(e){if(!e.currentTarget._node.disabled){this.isSource=!this.isSource;e.currentTarget.toggleClass("active",this.isSource);this.dialog.fire("datachange",this)}},".field-wysiwyg-tool-sourcecode",this));this.events.push(this.menuEl.delegate("change",function(e){this.editor.set("mode",e.currentTarget.get("value"))},"select",this));var t=this.menuEl.one("select");t&&t.set("value",this.codeMode);var a=this.menuEl.one(".field-wysiwyg-tool-sourcecode");if(a){if("htmlmixed"===this.codeMode||"markdown"===this.codeMode)a.removeAttribute("disabled");else{this.isSource=true;a.setAttribute("disabled","disabled")}a.toggleClass("active",this.isSource)}},_onblur:function(){if(window.CONFIG_PANEL){window.CONFIG_PANEL.set("allowContextMenu",false);var e=this.control.ancestor(".field-rhs");e&&e.removeClass("focused")}},_onfocus:function(e){if(window.CONFIG_PANEL){window.CONFIG_PANEL.set("allowContextMenu",true);var t=this.control.ancestor(".field-rhs");t&&t.addClass("focused")}},_onEditorContentChange:function(){this.adjustHeight();this.dialog.fire("datachange",this)},debounceOnEditorContentChange:n(function(){var e=arguments[0].that;this.throttleChangeFlag=false;e._onEditorContentChange.apply(e)},e),onEditorContentChange:function(e){this.cachedContent=null;this.cachedValue=null;this.viewMode===h&&this.hideMenuBar(e);this._preventThrottling?this._onEditorContentChange():this.debounceOnEditorContentChange({that:this})},render:function(){var e=this._textEditorRender.apply(this);var t=this.mode;"markdown"!==this.mode&&"html"!==this.mode||(t="code");this.modeEls[this.mode]=e;this.control=e.control;this.fieldTitleEl=e.title;this.menuElems=e.menu;this.menuEl=d.Node.create('<div class="field-wysiwyg-control clear"></div>');d.Lang.isArray(this.menuElems)?this.menuElems.forEach(function(e){this.menuEl.append(e)},this):this.menuEl.append(this.menuElems);var a=c("field-wrapper wysiwyg-field-wrapper clear {sub1} {sub2}-mode mode-{newMode}",{sub1:this.config.style,sub2:this.mode,newMode:t});this.html=d.Node.create('<div class="'+a+'"></div>');var i=d.Node.create('<div class="field-rhs"></div>');var s=d.Node.create('<div class="field-wysiwyg-control-wrapper"></div>');s.append(this.menuEl);var n=d.Node.create('<div class="'+u+'"></div>');n.append(this.control);i.append(s);i.append(n);this.config.description&&i.append('<div class="field-description-wrapper"><div class="field-description">'+this.config.description+"</div></div>");this.html.append(this.fieldTitleEl);this.html.append(i);var r=this.html.one("."+u);null!==this.containerHeight&&r.setStyle("height",this.containerHeight+"px");null!==this.containerWidth&&this.html.setStyle("width",this.containerWidth+"px")},hookEvents:function(){this.events.push(this.menuEl.delegate("click",d.bind(function(e){var t=e.currentTarget.get("className");try{t=t.substring(t.lastIndexOf("-")+1);t=-1!==t.indexOf(" ")?t.substring(0,t.indexOf(" ")):t;switch(t){case"bold":this.editor.execCommand("bold");break;case"italic":this.editor.execCommand("italic");break;case"link":this.editor.execCommand("link");break;case"unlink":this.editor.execCommand("unlink");break;case"unorderedlist":this.editor.execCommand("insertunorderedlist");break;case"orderedlist":this.editor.execCommand("insertorderedlist");break;case"h1":this.editor.execCommand("heading","1");break;case"h2":this.editor.execCommand("heading","2");break;case"blockquote":this.editor.execCommand("blockquote");break}}catch(e){console.error("Error executing command",t,"Error was:",e);throw e}finally{e.halt()}},this),".field-wysiwyg-tool"))},_containersHandler:function(e){var t;for(t in e.prevVal){t in e.newVal||d.one(".field-wysiwyg-tool-"+t).removeClass("active");if("link"===t&&(!e.newVal[t]||e.newVal[t]&&e.prevVal[t].getAttribute("href")!==e.newVal[t].getAttribute("href"))){this._linkEdit.updateLink();this._linkEdit.close(true)}}for(t in e.newVal){t in(e.prevVal||[])||d.one(".field-wysiwyg-tool-"+t).addClass("active");"link"===t&&(!e.prevVal||!e.prevVal[t]||e.prevVal[t]&&e.prevVal[t].getAttribute("href")!==e.newVal[t].getAttribute("href"))&&this._linkEdit.openPrompt(e.newVal[t])}},destroyEvents:function(){this.control.detach("wysiwyg|*");for(var e=0;e<this.events.length;++e){var t=this.events[e];t.detach?t.detach():t.removeListener&&t.removeListener()}this.events=[];this.debounceOnEditorContentChange&&this.debounceOnEditorContentChange.cancel&&this.debounceOnEditorContentChange.cancel()},onDataChanged:function(e){this.dialog.fire("datachange",this)},getMode:function(){return this.mode},getContent:function(){return this.editor.getContent()},cleanHTML:function(e){if(!e)return null;return e.replace(new RegExp("<p\\s+>","g"),"<p>")},getValue:function(){var e=this.getContent();return{source:e,isSource:this.isSource,mode:this.codeMode,engine:this.mode,rendered:this.cleanHTML(this.generateHTML(e))||""}},generateHTML:function(e){if(this.isSource){var t=d.Node.create("<div></div>");o.runMode(e,this.codeMode,t._node);return'<pre class="source-code">'+t.getContent()+"</pre>"}if("markdown"===this.codeMode){var a=e;var i=' data-preserve-html-node="true"';this.config.markEmbeddedHTML&&(a=e.replace(new RegExp("<[^\\s/\\->]+","gm"),"$&"+i));var s=d.Squarespace.Lang.markdownToHTML(a);if(this.config.markEmbeddedHTML){var n=d.Node.create("<div>"+s+"</div>");var r=n.all("code");r.each(function(e){var t=e.getHTML().replace(new RegExp(i,"g"),"");e.empty().append(t)});s=n.getContent();n.destroy();r.destroy()}return s}return e},setValue:function(e){var t=this._determineModeContent(e);t.mode=t.mode||"source";this.mode!==t.mode&&this.switchMode(t.mode);this.isSource=t.isSource;this.codeMode=t.codeMode;this.editor.setContent(t.content)},show:function(){this._textEditorShow.apply(this);this.wasShown=true;this.dialog.fire("currentMode",this.mode)},toggleInvertedStyle:function(){this.html.toggleClass("inverted");this.editor.focus()},updateEditorWidth:function(){if(this.editor.setWidth&&("html"===this.mode||"markdown"===this.mode)){var e=this.html.one("textarea").get("offsetWidth");this.editor.setWidth(e)}this.adjustHeight()},setSmallWidth:function(e){this.html.removeClass("width-large");this.html.addClass("width-small");this.updateEditorWidth();this.editor.focus()},setMediumWidth:function(e){this.html.removeClass("width-small");this.html.removeClass("width-large");this.updateEditorWidth();this.editor.focus()},setLargeWidth:function(e){this.html.removeClass("width-small");this.html.addClass("width-large");this.updateEditorWidth();this.editor.focus()},toggleFullScreen:function(e){this.menuHidden=false;"undefined"!==typeof this.hideMenuEvent&&this.hideMenuEvent&&this.hideMenuEvent.detach();"undefined"!==typeof this.showMenuEvent&&this.showMenuEvent&&this.showMenuEvent.detach();e.stopPropagation();var t=this.isFullscreen();if(t){this.fire("minimize-started");d.Global.fire("minimize-started");this.recessTransition()}else{if(this.dialog.activeFlyout){this.dialog.activeFlyout.field.closeFlyout();this.dialog.activeFlyout=null}this.fire("maximize-started");d.Global.fire("maximize-started");this.expandTransition()}this.editor.focus()},expandDialogBox:function(){if(this.dialog.el){var e={top:this.dialog.el.getStyle("top"),left:this.dialog.el.getStyle("left"),height:this.dialog.el.getStyle("height"),width:this.dialog.el.getStyle("width")};this.dialogOldStyle=e;this.dialog.el.setStyle("top","0px");this.dialog.el.setStyle("left","0px");this.dialog.el.setStyle("height","5000px");this.dialog.el.setStyle("width","5000px")}},recessDialogBox:function(){if(this.dialog.el&&this.dialogOldStyle){this.dialog.el.setStyle("top",this.dialogOldStyle.top);this.dialog.el.setStyle("left",this.dialogOldStyle.left);this.dialog.el.setStyle("height",this.dialogOldStyle.height);this.dialog.el.setStyle("width",this.dialogOldStyle.width);delete this.dialogOldStyle}},recessTransition:function(){if(!this.isExpanded)return;this.recessDialogBox();this.dialog.params.disableSaveOverlay=false;this.isExpanded=false;if("undefined"!==typeof this.resizeEvent&&null!==this.resizeEvent){this.resizeEvent.detach();this.resizeEvent=null}this.removeFullscreenButtons();var e=this.html.cloneNode(true);e.removeClass("fullscreenEditor");e.one(".field-wysiwyg").setContent("");e.one(".field-wysiwyg").setStyle("background","white");var t=e.one(".field-lhs");t&&t.remove();var a=e.one(".field-description-wrapper");a&&a.remove();e.setStyles({position:"fixed",top:0,left:0,"z-index":3e5,height:this.html.get("offsetHeight")+"px",width:this.html.get("offsetWidth")+"px",background:"transparent",padding:"0",overflow:"hidden"});this.events.push(e.on("click",function(e){e.stopPropagation()}));var i="opacity: 1; background: black; position: fixed; top: 0px; left: 0px; height: 5000px; width: 5000px; z-index: 250000";var s=d.Node.create('<div class="background" style="'+i+'"></div>');d.one("body").insert(e);d.one("body").insert(s);var n=this.html.getData("replaceNode");this.html.remove();this.html.setStyle("zIndex",null);n.replace(this.html);d.all(".standard-dialog-wrapper .wysiwyg-field-wrapper.fullscreenEditor").size()<=1&&d.one("body").removeClass("fullscreenEditor");this.viewMode=p;this.html.removeClass("fullscreenEditor");this.html.removeClass("inverted");var r=this.html.one("."+u);r.setStyle("height",this.containerHeight);var o=this._anim({node:e,to:{top:this.html.one(".field-rhs").getY()-d.one(document.body).get("docScrollY")+"px",height:this.originalTransData.height,left:this.html.one(".field-rhs").getX()-d.one(document.body).get("docScrollX")+"px",width:this.originalTransData.width},easing:"easeOutStrong",duration:.3});var l=this._anim({node:s,from:{opacity:1},to:{opacity:0},duration:.3,easing:"easeOutStrong"});var c=this._anim({node:e,to:{opacity:0},duration:.3,easing:"easeOutStrong"});o.on("end",function(){l.run()},this);l.on("end",function(){s.remove();c.run()},this);c.on("end",function(){e.remove();this.fire("minimize-complete");d.Global.fire("minimize-complete")},this);o.run();d.Squarespace.EscManager.removeTarget(this)},expandTransition:function(){if(this.isExpanded)return;this.dialog.params.disableSaveOverlay=true;this.isExpanded=true;var e=this.html.one(".field-wysiwyg-control-wrapper").get("offsetHeight");e+=this.html.one(".field-wysiwyg").get("offsetHeight");this.originalTransData={top:this.html.one(".field-rhs").getY()-d.one(document.body).get("docScrollY")+"px",left:this.html.one(".field-rhs").getX()-d.one(document.body).get("docScrollX")+"px",height:e+"px",width:this.html.one(".field-rhs").get("offsetWidth")+"px"};var t=this.html.cloneNode(true);t.one(".field-wysiwyg").remove();var a=t.one(".field-lhs");a&&a.remove();var i=t.one(".field-description-wrapper");i&&i.remove();t.setStyle("position","fixed");t.setStyle("top",this.originalTransData.top);t.setStyle("left",this.originalTransData.left);t.setStyle("z-index",3e5);t.setStyle("height",e+"px");t.setStyle("width",this.originalTransData.width);t.setStyle("background","white");t.setStyle("padding","0");t.setStyle("opacity","1");var s=t.one(".field-rhs");s&&s.setStyle("height","100%");var n="opacity: 0; background: black; position: fixed; top: 0px;left: 0px; height: 5000px; width: 5000px; z-index: 250000";var r=d.Node.create('<div class="background" style="'+n+'"></div>');var o=d.one("body");o.insert(t);o.insert(r);o.addClass("fullscreenEditor");this.viewMode=h;var l=this._anim({node:r,to:{opacity:1},duration:.3,easing:"easeOutStrong"});var c=this._anim({node:t,to:{top:"0px",height:this.html.get("winHeight")+"px",left:"0px",width:this.html.get("winWidth")+"px"},easing:"easeOutStrong",duration:.3});var u=this._anim({node:t,to:{opacity:0},duration:.3,easing:"easeOutStrong"});l.on("end",function(){this.updateEditorWidth();this.addFullscreenButtons();c.run()},this);c.on("end",function(){this.adjustHeight();var e=d.Node.create('<div class="replaceNode"></div>');this.html.setData("replaceNode",e);this.html.replace(e);d.one("body").append(this.html);this.html.setStyle("zIndex",d.Squarespace.DIALOG_ZINDEX_BASE+10);d.Squarespace.EscManager.addTarget(this);this.html.addClass("fullscreenEditor");this.resizeEvent=d.on("resize",this.fullScreenEditorResize,d.one(window),this);this.hideMenuEvent=this.dialog.on("keydown",this.hideMenuBar,this);this.events.push(this.hideMenuEvent);r.remove();this.expandDialogBox();u.run()},this);u.on("end",function(){this.fire("maximize-complete");d.Global.fire("maximize-complete");t.remove()},this);l.run()},cancel:function(e){this.isExpanded&&(27===e.keyCode?this.toggleFullScreen(e):d.Squarespace.EscManager.addTarget(this))},addFullscreenButtons:function(){var e={type:"container",contents:[{type:"separator"},{cmd:"inverted",title:l("Inverted"),type:"button"},{type:"separator"},{cmd:"widthsmall",title:l("Small"),type:"button"},{cmd:"widthmedium",title:l("Medium"),type:"button"},{cmd:"widthlarge",title:l("Large"),type:"button"}]};var t=this._renderContainer(e);t.addClass("fullscreen-options");var a=this.html.one(".field-wysiwyg-control");var i=a.get("children");a.insert(t,i.size()-1)},removeFullscreenButtons:function(){var e=this.html.all(".fullscreen-options");e.remove()},hideMenuBar:function(e){if(e&&e.pageY<=i)return;if(this.menuHidden||this.viewMode!==h)return;this.menuHidden=true;var t=this.html.one(".field-wysiwyg-control-wrapper");var a=this.dialog.el.one(".autosave-state");this.hideMenuEvent&&this.hideMenuEvent.detach();if(!t||!t._node||t.get("id")!==t._node.id){console.log("no menu node");this.hideMenuEvent.detach();return}this.hideMenuAnim=new d.Anim({node:t,to:{top:"-"+t.get("offsetHeight")},duration:.3,easing:d.Easing.easeOutStrong});this.hideMenuAnim.run();a&&a.setStyle("visibility","hidden");this.showMenuEvent=d.one("window").on("mousemove",this.showMenuBar,this);this.events.push(this.showMenuEvent);this.showMenuEvent=d.one("body").on("mousemove",this.showMenuBar,this)},showMenuBar:function(e){if(e.pageY>i)return;"undefined"!==typeof this.hideMenuAnim&&this.hideMenuAnim&&this.hideMenuAnim.stop();var t=this.html.one(".field-wysiwyg-control-wrapper");var a=this.dialog.el.one(".autosave-state");if(!t||!t._node||t.get("id")!==t._node.id){this.showMenuEvent.detach();return}this.showMenuEvent&&this.showMenuEvent.detach();this.showMenuAnim=new d.Anim({node:t,to:{top:"0px"},duration:.3,easing:d.Easing.easeOutStrong});this.showMenuAnim.run();a&&a.setStyle("visibility","");this.showMenuEvent&&this.showMenuEvent.detach();this.menuHidden=false},fullScreenEditorResize:function(e){this.adjustHeight()},isFullscreen:function(){if(this.viewMode===h)return true;return false},_textEditorShow:function(){this.events.push(d.one("body").on("click",this.onBodyClick,this));this.viewMode!==r||this.resizeEvent||(this.resizeEvent=d.on("resize",this.adjustHeight,d.one(window),this))},getIdealColumnWidth:function(){var e=this.editor.getTemplate();var t=this.html.get("offsetWidth")-130;t-=(e.getColumns()-1)*e.getMarginWidth();return t/e.getColumns()},onBodyClick:function(e){if(e.target.ancestor(".field-wysiwyg-control-wrapper",true))return;this.viewMode===h&&this.hideMenuBar(e)},getContentHeight:function(){if("html"===this.mode||"markdown"===this.mode)return this.editor.getContentHeight();return-1},adjustHeight:function(){var e=this.html.one("."+u);var t;if(this.viewMode===h){t=e.get("winHeight");e.setStyle("height",null)}else if(this.viewMode===r){t=e.get("winHeight");var a=d.one(".content-title").get("offsetHeight");var i=Math.max(t-a-34-20,this.getContentHeight());this.control.setStyle("height",i+"px")}},setHeight:function(e){e=parseInt(e,10);if(this.viewMode===p){e=e-this.menuEl.get("offsetHeight")-30;var t=this.html.one("."+u);this.containerHeight=e;t.setStyle("height",this.containerHeight+"px")}},_renderTitle:function(){if(this.config.title&&"top"===this.config.titleStyle)return d.Node.create('<div class="field-lhs">'+this.config.title+"</div>");return null},_renderButton:function(e){var t=d.Lang.sub('<button tabIndex="-1" class="field-wysiwyg-tool field-wysiwyg-tool-{cmd}"><span class="icon">{iconText}</span></button>',{cmd:e.cmd,iconText:e.html||"&nbsp;"});return d.Node.create(t)},_renderMenuSeparator:function(e){return d.Node.create('<div class="separator"></div>')},_renderContainer:function(e){var t=d.Node.create('<div class="sqs-container" style="'+(e.style||"")+'"></div>');var a=this._renderMenu(e.contents);for(var i=0;i<a.length;++i)t.append(a[i]);return t},_renderSelect:function(e){var t=d.Node.create('<select class="field-wysiwyg-select" tabIndex="-1"></select>');for(var a in e.options){var i=e.options[a];var s=d.Node.create('<option value="'+a+'">'+i+"</option>");e.selected&&e.selected===a&&s.setAttribute("selected","selected");t.append(s)}return t},_textEditorRender:function(){var e="sqs-text-edit mode-"+this.mode;var t=d.Node.create('<textarea id="'+a+'" class="'+e+'" style="border:none" ></textarea>');return{control:t,title:this._renderTitle(),menu:this._textEditorRenderMenu()}},_textEditorRenderMenu:function(){return this._renderMenu(this.menuConfigs[this.menuConfig].code||this.menuConfigs[this.menuConfig].other||this.menuConfigs[this.menuConfig].markdown)},_renderMenu:function(e){var t=[];for(var a=0;a<e.length;++a){var i=e[a];"separator"===i.type?t.push(this._renderMenuSeparator(i)):"button"===i.type?t.push(this._renderButton(i)):"container"===i.type?t.push(this._renderContainer(i)):"select"===i.type&&t.push(this._renderSelect(i))}return t},_destroy:function(){this._super();this.destroyEvents();if("undefined"!==typeof this.resizeEvent&&null!==this.resizeEvent){this.resizeEvent.detach();this.resizeEvent=null}this.editor&&this.editor.destroy();this.preCloseEvent&&this.preCloseEvent.detach()}})},"1.0",{requires:["node","squarespace-dialog","squarespace-flyout-link-edit","squarespace-markdown","squarespace-markdown-editor","squarespace-code-editor","squarespace-util","squarespace-widgets-confirmation","transition"]})},"./src/main/webapp/universal/scripts-v6/dialog/stringset.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-dialog-stringset",function(c){var o="boundingBox";var u="contentBox";var d=c.namespace("Squarespace.DialogFields").Stringset=c.Base.create("stringset-field",c.Squarespace.DialogField2,[c.WidgetParent,c.Squarespace.Mixins.StringSetUtils],{initializer:function(e){var t=this.get("mode");var a="input"===t;var i=c.Lang.isValue(e.existingMembers);var s=e.allowOnlyExistingMembers;var n=c.Lang.isValue(e.requestUrl);var r=a&&!i&&!s&&n;c.Lang.isValue(e.existingMembers)||this.set("existingMembers",[]);e.panel&&(this.panel=e.panel);!c.Lang.isNumber(e.maxMemberChars)&&c.Lang.isNumber(parseInt(e.maxMemberChars,10))&&this.set("maxMemberChars",parseInt(e.maxMemberChars,10));if(r)this._requestMemberData(this._loadInputMembersSuccess);else if("select"===t){n||this.set("requestUrl","/api/commondata/GetCollectionCategories");this._requestMemberData(this._loadSelectMembersSuccess)}this.get(o).addClass(this.get("style"))},renderUI:function(){d.superclass.renderUI.call(this);var e=this.get(u);var t=e.one(this._setFieldWrapper);var a=this.get("style");var i=this.get("description");var s=this.get("title")||"";var n=c.Object.hasKey(this.PARTIALS,a)?a:"thin";var r=this.PARTIALS[n];var o;var l;o=c.Node.create(c.Lang.sub(r,{title:s}));o.one(this._inputWrapperSelector).append(this.memberControl);if(c.Lang.isValue(i)){l=c.Node.create(c.Lang.sub(this.PARTIALS.descTemplate,{desc:i}));o.append(l)}t.addClass(a);t.append(o);this.memberControl=e.one(this._memberContainerSelector);this.flyoutTarget=e.one(this._flyoutTargetSelector);this._renderSetMembers()},bindUI:function(){d.superclass.bindUI.call(this);this.get(u).on("click",this.handleWidgetClick,this);this.memberControl.on("mouseenter",this.recalcMeasurements,this);this.memberControl.on("mouseover",this.blurInactiveMember,this);this.memberControl.on("mouseout",this.resetViewportAnimation,this);this.memberControl.on("mousemove",this.mapViewportToMousePosition,this);this.on("activeMemberChange",this._animateActiveMember,this);this.on("dataChange",this.afterDataChange,this);this.on("removingMemberChange",this._tryAddPlaceholder,this)},syncUI:function(){d.superclass.syncUI.call(this);this._updateMeasurements()},afterDataChange:function(e){var t=e.newVal;var a=c.Lang.isArray(e.prevVal)?e.prevVal:[];var i="_injectNewMemberList";var s=[];if(c.Lang.isArray(e.newVal)&&t.length!==a.length){0===a.length&&this.memberControl.empty();t.length<a.length&&(i="_ejectMemberList");s=this.diffStringSets(t,a);this[i](s)}this.flyout&&this.flyout.set("data",t)},handleWidgetClick:function(e){e.halt();var t=e.target;var a=this.get("mode");var i;if(t.hasClass("x")){i=t.ancestor("."+this.get("memberClass"));i&&this._destroyMember(i.getData("data"))}else if(this._isFlyoutOpen());else if("input"===a||"select"===a){this.panel&&this.panel.setActiveFlyout({constraintClasses:".workflow-flyout",field:this});this.showFlyout()}},recalcMeasurements:function(e){c.Lang.isNumber(this.get("memberContainerWidth"))&&this._updateMeasurements()},blurInactiveMember:function(e){this._cancelTimers();if(e.target===this.get("activeMember")||e.target===this.get("removingMember"))return;if(e.target.hasClass("tag")){this._blurMember();this.set("activeMember",e.target)}},resetViewportAnimation:function(e){var t=e.target;var a=t.hasClass("x");var i=!c.Lang.isNull(this._blurTimer);if(a||i)return;this.snapBackTimer||(this.snapBackTimer=c.later(150,this,this._nudgeViewportTo,0));this.blurTimer=c.later(50,this,this._blurMember)},mapViewportToMousePosition:function(e){var t=this.get(u).one(this._inputWrapperSelector);var a=t.get("offsetWidth");var i=this._getViewportOverhang();var s;if(i>0){s=(e.clientX-t.getX())/a;this._nudgeViewportToPercent(s)}},_updateData:function(e){var t=this.get("data");var a=e.newVal;var i=this.get("existingMembers");if(!(c.Lang.isString(a)||c.Lang.isArray(a)))return;c.Lang.isString(a)&&(a=[a]);i=i.concat(a);this.set("existingMembers",c.Array.dedupe(i));c.Array.each(a,function(e){this._hasTag(e)?t.splice(t.indexOf(e),1):t.push(e)},this);this.set("data",t)},_tryAddPlaceholder:function(e){c.Lang.isNull(e.newVal)&&0===this.get("data").length&&this._addPlaceholder()},showFlyout:function(){if(this.flyout){this.closeFlyout(c.bind(this.showFlyout,this));return}var e=this._getMemberEditorWidget();var t={alignment:"tl",animateOpacity:true,overflow:"visible"};this._initFlyout(e,t);0===this.get("data").length&&this._addPlaceholder()},closeFlyout:function(e,t){var a=this.flyoutPlugin,i=this.flyoutTarget,s=c.Lang.isValue(i)&&i.hasPlugin(a.NS);if(!this.flyout)return;if(s){c.Lang.isValue(this.flyout)&&c.Lang.isFunction(this.flyout.hide)&&this.flyout.hide();i[a.NS].on("hidden",this._cleanUpFlyout,this,e,t);i[a.NS].hide()}0===this.get("data").length&&this._addPlaceholder(false)},_getMemberEditorWidget:function(){var e=this.get("mode");switch(e){case"input":return new c.Squarespace.DialogFields.InputEditor({allowOnlyExistingMembers:this.get("allowOnlyExistingMembers"),autoCompleteIndex:-1,data:this.get("data"),editorLabel:this.get("editorLabel"),placeholder:this.get("inputPlaceholder"),existingMembers:this.get("existingMembers"),memberClass:this.get("memberClass"),visible:false});case"select":return new c.Squarespace.DialogFields.SelectEditor({addMemberText:this.get("addMemberText"),canAddMembers:this.get("canAddMembers"),collectionId:this.get("collectionId"),editorLabel:this.get("editorLabel"),data:this.get("data"),maxLength:this.get("maxMemberChars"),memberClass:this.get("memberClass"),options:this.get("existingMembers")});default:false;break}},_animate:function(e){if(this.get("destroyed"))return;var t=new c.Anim(e);this._anims.add(t);return t},_getViewportOverhang:function(){var e=this.get(u),t=e.one(this._inputWrapperSelector).get("offsetWidth"),a=this.get("memberContainerWidth")||0;return a-t},_nudgeViewportToPercent:function(e){var t=this._getViewportOverhang(),a;if(t>0){(e<.04||e>.94)&&(e=Math.min(Math.round(e),1));a=-1*t*e;this.get(u).one(this._memberContainerSelector).setStyle("left",a)}},_nudgeViewportTo:function(e){var t=this._memberContainerSelector,a=this.get(u).one(t);if(this.get("destroyed"))return;this.snapBackAnim&&this.snapBackAnim.stop();this.snapBackAnim=this._animate({node:a,duration:.3,easing:c.Easing.easeOutStrong,to:{left:e}});this.snapBackAnim.run();this.snapBackTimer=null},_blurMember:function(){var e;var t;if(this.get("destroyed"))return;e=this.get("activeMember");if(c.Lang.isValue(e)){c.Object.hasKey(e,"anim")&&e.anim.stop();t=e.one(":last-child");t&&t.remove();e.setStyle("paddingRight",this.get("activeMemberPadding")+"px");e.anim=this._animate({node:e,duration:.25,easing:c.Easing.easeOutStrong,to:{paddingRight:this.get("defaultMemberPadding")}});e.anim.run();this.set("activeMember",null)}},_animateActiveMember:function(e){if(c.Lang.isNull(e.newVal))return;var t=e.newVal;t.anim=this._animate({node:t,duration:.25,easing:c.Easing.easeOutStrong,to:{paddingRight:this.get("activeMemberPadding")+"px"}});t.anim.on("end",function(){var e=this.get("node");var t=c.Node.create('<span class="x">&times;</span>');e.append(t);e.setStyle("paddingRight","2px")});t.anim.run()},_cancelTimers:function(){if(this.blurTimer){this.blurTimer.cancel();this.blurTimer=null}if(this.snapBackTimer){this.snapBackTimer.cancel();this.snapBackTimer=null}},_updateMeasurements:function(e){var t=this.get(u),a;c.Lang.isNumber(e)||(e=0);if(this.get("data").length>0){a=t.one(this._memberContainerSelector).get("offsetWidth")+e+this.get("defaultMemberPadding");this.set("memberContainerWidth",a)}},_renderSetMembers:function(){var e=this.get("data");this.memberControl.empty();c.Lang.isArray(e)&&e.length>0?c.Array.each(e,function(e,t){this.memberControl.append(this._createMemberNode(e))},this):this._addPlaceholder()},_addPlaceholder:function(e){var t;c.Lang.isUndefined(e)&&(e=this._isFlyoutOpen());c.Lang.isValue(this.memberControl)||(this.memberControl=this.get(u).one(this._memberContainerSelector));this.memberControl.empty();t=c.Lang.sub('<div class="text dialog-element">{label}</div>',{label:e?this.get("emptyText"):'<div class="add-header">'+this.get("addText")+"</div>"});this.memberControl.append(t)},_initFlyout:function(e,t){var a=this.flyoutPlugin;var i=this.get(u).one(this._flyoutTargetSelector);var s=["addMember","removeMember"];if(!c.Lang.isObject(e))throw new Error("Flyout widget is missing.");this.flyout=this.add(e).item(0);i.hasPlugin(a.NS)&&i.unplug(a.NS);t=c.merge(t,{host:this,node:this.flyout.get("flyoutNode"),duration:.2,overflow:"visible"});i.plug(a,t);i[a.NS].show();this.flyout.after(s,this._updateData,this)},_cleanUpFlyout:function(e,t,a){var i=this.flyoutPlugin,s=this.get(u),n=s.one(this._flyoutTargetSelector);this.removeAll();this.flyout.destroy(true);this.flyout=null;n.unplug(i.NS);c.Lang.isFunction(t)&&t.apply(a||this,arguments)},_createMemberNode:function(e){var t;t=c.Node.create('<div class="tag"></div>');t.set("text",e);t.addClass(this.get("memberClass"));t.setData("data",e);return t},_destroyMember:function(a){var e=this.get(u).all("."+this.get("memberClass")),i=[];e.each(function(e){var t=e.getData("data");t!==a&&i.push(t)});this.set("data",i)},_injectNewMember:function(e){var t=0,a=0,i=0,s=this._createMemberNode(e);s.setStyle("opacity",0);this.memberControl.append(s);t=s.get("offsetWidth");i=s.getStyle("paddingLeft");a=s.getStyle("paddingRight");s.setStyles({width:0,paddingLeft:0,opacity:1});var n={node:s,duration:.25,easing:c.Easing.easeOutStrong};n=c.merge(n,{to:{width:t-20,paddingRight:a,paddingLeft:i}});s.anim=this._animate(n);s.anim.on("end",function(){this.get("node").setStyle("width","")});s.anim.run()},_injectNewMemberList:function(e){c.Array.each(e,function(e,t){this._injectNewMember(e)},this)},_ejectMember:function(i){var e=this.get(u),t=e.all(".tag."+this.get("memberClass")),s=[],a=0,n;t.each(function(e,t){var a=e.getData("data");a===i&&s.push(e)});if(s.length){a>1&&console.warn("Duplicate items detected!");n=s[0];if(n===this.get("activeMember")){this.set("activeMember",null);this.set("removingMember",n)}c.Object.hasKey(n,"anim")&&n.anim.stop();n.anim=this._animate({node:n,duration:.22,easing:c.Easing.easeOutStrong,to:{width:0,paddingRight:0,paddingLeft:0,marginRight:0}});n.anim.on("end",c.bind(function(e){n.anim.get("node").remove(true);this.set("removingMember",null)},this));n.anim.run()}},_ejectMemberList:function(e){c.Array.each(e,function(e){this._ejectMember(e)},this)},_isFlyoutOpen:function(){var e=this.flyoutPlugin;var t=this.flyoutTarget;if(c.Lang.isValue(t))return!!t.hasPlugin(e.NS);return false},_hasTag:function(e,t){c.Lang.isUndefined(t)&&(t=this.get("data"));if(c.Lang.isArray(t))return this.memberInSet(t,e);return false},_loadInputMembersSuccess:function(e){this.set("existingMembers",e)},_loadSelectMembersSuccess:function(e){var a=[];c.Object.each(e,function(e,t){a.push(e.name)},this);this.set("existingMembers",a)},_requestMemberData:function(e){var t={collectionId:this.get("collectionId")};var a=this.get("requestUrl");c.Data.get({url:a,data:t,success:c.bind(e,this)},this)},_memberContainerSelector:".tag-field-container",_flyoutTargetSelector:".field-input-wrapper",_setFieldWrapper:".tag-field-wrapper",_inputWrapperSelector:".field-input-wrapper",_snapBackTimer:null,_blurTimer:null,flyoutPlugin:c.Squarespace.Animations.Flyout,PARTIALS:{thin:'<div class="field-lhs title">{title}</div><div class="field-rhs"><div class="field-input-wrapper"><div class="tag-field clear"><div class="tag-field-container"></div></div></div></div>',minor:'<div class="field-rhs"><div class="field-lhs title">{title}</div><div class="field-input-wrapper"><div class="tag-field clear"><div class="tag-field-container"></div></div></div></div>',descTemplate:'<div class="field-description-wrapper"><div class="field-description">{desc}</div></div>'}},{CSS_PREFIX:"sqs-stringset",TEMPLATE:'<div class="field-wrapper tag-field-wrapper clear"></div>',ATTRS:{activeMember:{},addText:{value:i("Click to add tags.")},addMemberText:{value:i("Create tag")},activeMemberPadding:{value:18},allowOnlyExistingMembers:{value:false},canAddMembers:{value:false},collectionId:{},data:{value:[],setter:function(e){return c.Lang.isArray(e)?e:[]},getter:function(e){return e.concat([])}},defaultMemberPadding:{value:6},description:{},inputPlaceholder:{value:i("Tags, comma separated")},editorLabel:{},emptyText:{},existingMembers:{value:[],validator:c.Lang.isArray},memberClass:{value:"tag"},mode:{value:"input",validator:function(e){var t=["input","select"];return-1!==t.indexOf(e)}},maxMemberChars:{value:null},removingMember:{},requestUrl:{},style:{value:"thin",validator:c.Lang.isString,getter:function(e){return e.toLowerCase()}},memberContainerWidth:{},title:{},visible:{value:true}}})},"1.0",{requires:["base","squarespace-dialog-field-2","squarespace-dialog-stringset-input-editor","squarespace-dialog-stringset-select-editor","squarespace-node-flyout","squarespace-stringset-utils-mixin"]})},"./src/main/webapp/universal/scripts-v6/dialog/text-with-refresh.js":function(e,t){YUI.add("squarespace-dialog-text-with-refresh",function(e){e.namespace("Squarespace.DialogFields");var t=e.Squarespace.DialogFields.TextWithRefresh=e.Base.create("TextWithRefresh",e.Squarespace.DialogFields.Text,[],{initializer:function(){this.publish("refresh")},renderUI:function(){t.superclass.renderUI.call(this);this.get("contentBox").append('<div class="refresh-icon"></div>')},bindUI:function(){t.superclass.bindUI.call(this);this.get("contentBox").one(".refresh-icon").after("click",function(){this.fire("refresh")}.bind(this));this._textField.after("keyup",function(e){13===e.keyCode&&this.fire("refresh")}.bind(this))}},{CSS_PREFIX:"sqs-dialog-text-with-refresh",ATTRS:{}})},"1.0",{requires:["base","squarespace-dialog-text"]})},"./src/main/webapp/universal/scripts-v6/dom-emitters/resize.js":function(e,t){YUI.add("squarespace-dom-emitters-resize",function(e){e.Squarespace.ResizeEmitter=e.SQS.Gallery.ResizeEmitter},"1.0",{requires:["@sqs/yui-gallery/resize-emitter"]})},"./src/main/webapp/universal/scripts-v6/dom-emitters/scroll.js":function(e,t){YUI.add("squarespace-dom-emitters-scroll",function(a){a.namespace("Squarespace");a.Squarespace.ScrollEmitter=a.Base.create("ScrollEmitter",a.Base,[],{initializer:function(){var t=false;this.scrollEventHandle=this.get("target").on("scroll",function(){t||this.fire("scroll:start");t=true;this.timer&&this.timer.cancel();this.timer=a.later(this.get("timeout"),this,function e(){if(!a.Env)return;this.fire("scroll:end");t=false});this.fire("scroll")},this)},destructor:function(){this.timer&&this.timer.cancel();this.scrollEventHandle.detach()}},{ATTRS:{target:{valueFn:function(){return a.one(a.config.doc)}},timeout:{value:300}}})},"1.0",{requires:["base","node","event"]})},"./src/main/webapp/universal/scripts-v6/domains/dns-table/configs.js":function(e,t,a){var n=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-domains-dns-table-configs",function(a){a.namespace("Squarespace.Domains.DNSTable");a.Squarespace.Domains.DNSTable.fieldMap={A:{host:"subdomain",record:"type",priority:"priority",data:"ip"},AAAA:{host:"subdomain",record:"type",priority:"priority",data:"ip"},CNAME:{host:"subdomain",record:"type",priority:"priority",data:"hostname"},MX:{host:"subdomain",record:"type",priority:"priority",data:"hostname"},TXT:{host:"subdomain",record:"type",priority:"priority",data:"text"}};a.Squarespace.Domains.DNSTable.mapRecordsToTableData=function e(t){if(!t)return[];return t.map(function(e){if("SRV"===e.type)return{host:e.subdomain,record:e.type,priority:e.priority,data:e.weight+" "+e.port+" "+e.hostname};var t=a.Squarespace.Domains.DNSTable.fieldMap[e.type];return{host:e[t.host],record:e[t.record],priority:e[t.priority],data:e[t.data]}})};var e={className:"sqs-select-light",data:"A",options:[{label:"A",value:"A"},{label:"AAAA",value:"AAAA"},{label:"CNAME",value:"CNAME"},{label:"MX",value:"MX"},{label:"TXT",value:"TXT"},{label:"SRV",value:"SRV"}]};var t={"strings.placeholder":n("N/A"),disabled:true};var i=a.Squarespace.Domains.DNSTable.validatorForRecordType={A:a.Squarespace.Domains.DNSTable.validators.isIPAddress,CNAME:function(e){return a.Squarespace.Domains.DNSTable.validators.isNotIPAddress(e)||a.Squarespace.Domains.DNSTable.validators.isHostname(e)},MX:a.Squarespace.Domains.DNSTable.validators.isHostname,AAAA:a.Squarespace.Domains.DNSTable.validators.isIPv6Address,TXT:a.Squarespace.Domains.DNSTable.validators.valueNotEmpty,SRV:a.Squarespace.Domains.DNSTable.validators.isSrvData};var s=a.Squarespace.Domains.DNSTable.dialogConfigForRecordType={A:[{"strings.placeholder":"@",data:"@",validator:a.Squarespace.Domains.DNSTable.validators.isValidHost},a.merge(e,{data:"A"}),t,{"strings.placeholder":n("Enter IP address"),validator:i.A}],CNAME:[{"strings.placeholder":"www",data:"",validator:a.Squarespace.Domains.DNSTable.validators.isValidHost},a.merge(e,{data:"CNAME"}),t,{"strings.placeholder":n("Enter alias data"),validator:i.CNAME}],MX:[{"strings.placeholder":"@",data:"@",validator:a.Squarespace.Domains.DNSTable.validators.isValidHost},a.merge(e,{data:"MX"}),{"strings.placeholder":10,disabled:false},{"strings.placeholder":n("Enter mail server"),validator:i.MX}],AAAA:[{"strings.placeholder":"www",data:"",validator:a.Squarespace.Domains.DNSTable.validators.isValidHost},a.merge(e,{data:"AAAA"}),t,{"strings.placeholder":n("Enter IPv6 address"),validator:i.AAAA}],TXT:[{"strings.placeholder":"@",data:"",validator:a.Squarespace.Domains.DNSTable.validators.isValidHost},a.merge(e,{data:"TXT"}),t,{"strings.placeholder":n("Text"),validator:i.TXT}],SRV:[{"strings.placeholder":"_http._tcp",data:"",validator:a.Squarespace.Domains.DNSTable.validators.isValidHost},a.merge(e,{data:"SRV"}),{"strings.placeholder":10,disabled:false},{"strings.placeholder":"5 8080 example.com",validator:i.SRV}]};a.Squarespace.Domains.DNSTable.fields=[{name:"host",editable:false,header:n("Host"),inputCell:{dialog:a.Squarespace.DialogFields.Text,dialogConfig:s.A[0]}},{name:"record",editable:false,header:n("Record"),validator:a.Squarespace.Domains.DNSTable.validators.valueNotEmpty,inputCell:{dialog:a.Squarespace.DialogFields.Select,dialogConfig:e}},{name:"priority",locked:true,editable:false,header:n("Priority"),inputCell:{dialog:a.Squarespace.DialogFields.Text,dialogConfig:s.A[2]}},{name:"data",editable:true,header:n("Data"),validator:i.A,inputCell:{dialog:a.Squarespace.DialogFields.Text,dialogConfig:s.A[3]}}]},"1.0",{requires:["squarespace-dialog-select","squarespace-dialog-text","squarespace-domains-dns-table-validators"]})},"./src/main/webapp/universal/scripts-v6/domains/dns-table/records-dialog-row.js":function(e,t){YUI.add("squarespace-domains-dns-table-records-dialog-row",function(t){t.namespace("Squarespace.Domains.DNSTable");var a="record-type-";var s=function(){};var i=t.Object.keys(t.Squarespace.Domains.DNSTable.fieldMap).map(function(e){return e.toLowerCase()});var e=t.Squarespace.Domains.DNSTable.RecordsDialogRow=t.Base.create("RecordsDialogRow",t.Squarespace.Widgets.EditTable.DialogRow,[],{bindUI:function(){e.superclass.bindUI.call(this);this._registerEvent(this.get("cells").map(function(e){return e.on("cell:edit",function(e){if("record"===e.cell.get("name")){var t=e.cell.get("data");this._changeDialogCells(t);this._setBoundingClassForRecordType(t)}},this)},this))},_changeDialogCells:function(e){var i=t.Squarespace.Domains.DNSTable.dialogConfigForRecordType[e];this.get("cells").forEach(function(e,t){var a=i[t];if(!a)return;"priority"===e.get("name")&&(a.data="");a.validator||(a.validator=s);e.setDialogConfig(a);e.setAttrs({validator:a.validator,error:null})})},_setBoundingClassForRecordType:function(e){var t=this.get("boundingBox");i.forEach(function(e){t.removeClass(a+e)});t.addClass(a+e.toLowerCase())}})},"1.0",{requires:["base","squarespace-domains-dns-table-configs","squarespace-domains-dns-table-validators","squarespace-widgets-edit-table-dialog-row"]})},"./src/main/webapp/universal/scripts-v6/domains/dns-table/records-row.js":function(e,t,a){var n=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-domains-dns-table-records-row",function(s){s.namespace("Squarespace.Domains.DNSTable");var t=s.Squarespace.Domains.DNSTable.RecordsRow=s.Base.create("RecordsRow",s.Squarespace.Widgets.EditTable.Row,[],{renderUI:function(){t.superclass.renderUI.call(this);var e=this.get("data").record;this.get("boundingBox").addClass("record-type-"+e.toLowerCase())},collectCurrentData:function(){var e=t.superclass.collectCurrentData.call(this);-1===["MX","SRV"].indexOf(e.record)?e.priority="":e.priority=parseInt(e.priority,10);return e}},{ATTRS:{cells:{valueFn:function(){var a=this.get("data");var e=a.record;var i=s.Squarespace.Domains.DNSTable.validatorForRecordType[e];-1===["MX","SRV"].indexOf(e)&&(a.priority=n("N/A"));return this.get("fields").map(function(e){var t={data:a[e.name],field:e};if("action"===e.name)return new s.Squarespace.Widgets.EditTable.DeleteCell(t);"data"===e.name&&(t.validator=i);return new this.CELL_CONSTRUCTOR(t)},this)}}}})},"1.0",{requires:["base","squarespace-domains-dns-table-configs","squarespace-widgets-edit-table-row"]})},"./src/main/webapp/universal/scripts-v6/domains/dns-table/records-table.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var r=a("./src/main/webapp/universal/src/shared/utils/domains/analytics/DomainManagementEvents.ts");YUI.add("squarespace-domains-dns-table-records-table",function(s){s.namespace("Squarespace.Domains.DNSTable");var n=["AAAA","CNAME","SRV"];var e=s.Squarespace.Domains.DNSTable.RecordsTable=s.Base.create("RecordsTable",s.Squarespace.Widgets.EditTable.GroupTable,[],{ROW_CONSTRUCTOR:s.Squarespace.Domains.DNSTable.RecordsRow,bindUI:function(){e.superclass.bindUI.call(this);this.before("edit-table:row-add",function(e){var t=this._runCustomValidation(e.data);if(!t){e.halt(true);return}this._sendAnalyticEvent(e.data.record)})},_sendAnalyticEvent:function(e){var t=this.get("domain");r.addCustomDNSRecord(t.get("name"),e,t.get("isPurchasedFree"),t.get("managedDomainExpiration"),t.get("registeredOn"))},_createInputRow:function(){if(false===this.get("inputRow"))return;this.set("inputRow",new s.Squarespace.Domains.DNSTable.RecordsDialogRow({fields:this.get("fields")}))},_runCustomValidation:function(e){var t=this.collectCurrentData();return this._validateCNAMEHosts(e,t)&&this._validateDuplicateSubdomains(e,t)&&this._validateMXPriority(e)},_validateCNAMEHosts:function(t,e){var a=e.some(function(e){return"CNAME"===e.record&&e.host===t.host});if(a){this.get("inputRow").setCellError(0,this.get("strings.cnameHasHost"));return false}return true},_validateDuplicateSubdomains:function(e,t){if(-1===n.indexOf(e.record))return true;var a=e.host;var i=t.some(function(e){return e.host===a&&-1!==n.indexOf(e.record)});if(i){this.get("inputRow").setCellError(0,s.Lang.sub(this.get("strings.duplicateError"),e));return false}return true},_validateMXPriority:function(e){if(-1===["MX","SRV"].indexOf(e.record))return true;var t=parseInt(e.priority);if(isNaN(t)||t<0||t>255){this.get("inputRow").setCellError(2,this.get("strings.mxPriorityNaN"));return false}return true}},{CSS_PREFIX:"sqs-domains-manage-dns-records-table",ATTRS:{fields:{value:s.clone(s.Squarespace.Domains.DNSTable.fields)},domain:{},"strings.cnameHasHost":{value:i("This host is already in use by a CNAME record.")},"strings.duplicateError":{value:i("Host cannot be duplicated for {record} records.")},"strings.mxPriorityNaN":{value:i("Priority must be a number between 0 and 255.")}}})},"1.0",{requires:["base","node","squarespace-domains-dns-table-configs","squarespace-domains-dns-table-records-dialog-row","squarespace-domains-dns-table-records-row","squarespace-widgets-edit-table-group-table"]})},"./src/main/webapp/universal/scripts-v6/domains/dns-table/validators.js":function(e,t,a){var l=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-domains-dns-table-validators",function(a){a.namespace("Squarespace.Domains.DNSTable");var n=/^[a-fA-F0-9]{1,4}$/;var i=/^[a-z\d_]([a-z\d\-_]{0,61}[a-z\d_])?(\.[a-z\d_]([a-z\d\-_]{0,61}[a-z\d_])?)+$/i;var s=/^[a-z\d_]([a-z\d\-_]{0,61}[a-z\d_])?$/i;var r=/^(https?:)?(\/\/)?[a-zA-Z0-9][a-zA-Z0-9_\-\.]*\.[a-zA-Z]{2,3}(\S*)?$/i;var o=a.Squarespace.Domains.DNSTable.validators={isIPAddress:function(e){var t=e.split(".");var a=t.length;var i=l("Not a valid IP address.");if(4!==a){console.error(e,i);return i}for(var s=0;s<a;s+=1){var n=+t[s];if(isNaN(n)||n<0||n>255){console.error(e,i);return i}}},isIPv6Address:function(e){var t=e.split(":");var a=t.length;var i=l("Not a valid IPv6 address.");if(8!==a){console.error(e,i);return i}for(var s=0;s<a;s+=1)if(!n.test(t[s])){console.error(e,i);return i}},isSrvData:function(e){var t=e.split(" ");var a=l("Please enter your SRV weight, port and mapping in the correct format: 5 8080 www.example.com");if(3!==t.length){console.error(e,a);return a}if(isNaN(t[0])||isNaN(t[1])||!r.test(t[2])){console.error(e,a);return a}},isHostname:function(e){var t=l("Not a valid host name.");if(!i.test(e)){console.error(t);return t}},isValidUrl:function(e){var t=l("Not a valid url.");if(!r.test(e)){console.error(t);return t}},isValidHost:function(e){var t=l("Not a valid host.");var a=e.split(".");var i=e.length<=255&&-1===e.indexOf("..")&&(a.every(function(e){return s.test(e)||""===e})||"@"===e||"*"===e);if(!i){console.log(t);return t}},valueNotEmpty:function(e){if(""===a.Lang.trim(e)){var t=l("Cannot be empty.");console.error(e,t);return t}},isNotIPAddress:function(e){var t=o.isIPAddress(e);var a=l("Cannot be an IP address.");if(!t){console.error(e,a);return a}return o.valueNotEmpty(e)}}},"1.0",{requires:[]})},"./src/main/webapp/universal/scripts-v6/domains/events.js":function(e,t){YUI.add("squarespace-domains-events",function(e){e.namespace("Squarespace.Domains");var t={broadcast:2};var a=new e.EventTarget;a.publish("domain:link-status-load");a.publish("domain:search",t);a.publish("domain:add-to-cart",t);a.publish("domain:remove-from-cart",t);a.publish("domain:select-provider",t);a.publish("domain:purchase-complete",t);a.publish("domain:www-toggle",t);a.publish("domain:lock-toggle",t);a.publish("preset:add",t);a.publish("preset:remove",t);e.Lang.isValue(e.Squarespace.Domains.Events)||(e.Squarespace.Domains.Events=a)},"1.0",{requires:["event"]})},"./src/main/webapp/universal/scripts-v6/domains/link-status/base.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./common/temp/node_modules/lodash/zip.js");YUI.add("squarespace-domains-link-status-base",function(n){n.namespace("Squarespace.Domains.LinkStatus");n.Squarespace.Domains.LinkStatus.Base=n.Base.create("LinkStatusBase",n.Squarespace.Widgets.SSWidget,[],{destructor:function(){this.get("header").destroy(true);this.get("spinner").destroy(true);n.Array.invoke(this.get("rows"),"destroy",true)},renderUI:function(){var e=this.get("contentBox");var t=this.get("tableElement");var a=this.get("header");a.render(t);t.appendTo(e);this._createRows()},bindUI:function(){var e=this.get("linkStatusList");this._registerEvent(e.after("load-start",function(){this.set("loading",true)},this),e.after("load",function(){this._createRows();this.set("loading",false)},this));this.after("loadingChange",this.syncUI)},syncUI:function(){this.get("boundingBox").toggleClass("loading",this.get("loading"))},_createRow:function(e){var t=this.get("headerStrings");e.values=s(t,e.values).flat();return new n.Squarespace.Domains.LinkStatus.Row(e)},_createRows:function(){n.Array.invoke(this.get("rows"),"destroy",true);var e=this.get("linkStatusList");var t=e.map(this._parseLinkStatusData,this);var a=n.Array.map(t,this._createRow.bind(this));n.Array.invoke(a,"render",this.get("tableElement"));this.set("rows",a)},_parseLinkStatusData:function(e){var t=e.get("status");var a=n.Lang.isValue(t);var i=e.get("deprecated");var s;s=a&&"www.squarespace.com"===e.get("value")?this.get("strings.incorrect"):a?e.get("value"):e.get("deprecated")?this.get("strings.warnings.deprecated"):this.get("strings.correct");return{values:[e.get("subDomain"),e.get("expectedRecordType"),e.get("expectedValue"),s],hasErrors:a,hasWarnings:i}}},{CSS_PREFIX:"sqs-domains-link-status-table",ATTRS:{headerStrings:{valueFn:function(){return[this.get("strings.host"),this.get("strings.record"),this.get("strings.status"),this.get("strings.details")]}},header:{valueFn:function(){return new n.Squarespace.Domains.LinkStatus.Row({header:true,values:this.get("headerStrings")})}},loading:{valueFn:function(){return this.get("linkStatusList").isEmpty()}},tableElement:{valueFn:function(){return new n.Node.create("<table></table>")},validator:n.Squarespace.AttrValidators.isInstanceOf(n.Node)},linkStatusList:{validator:n.Squarespace.AttrValidators.isNullOrInstanceOf(n.Squarespace.Domains.ViewModels.LinkStatusList)},rows:{value:[],validator:n.Squarespace.AttrValidators.isArray},spinner:{valueFn:function(){return new n.Squarespace.Spinner({size:44,color:"dark",render:this.get("contentBox")})}},strings:{value:{host:i("Host"),record:i("Record"),details:i("Current Data"),status:i("Required Data"),correct:i("Correct"),incorrect:i("Incorrect"),warnings:{deprecated:i("Deprecated")},errors:{missingValue:"{value}",host:i("HOST should be <strong>{value}</strong>"),details:i("DETAILS should be <strong>{value}</strong>")}}}}})},"1.0",{requires:["array-invoke","base","node","squarespace-attr-validators","squarespace-domains-link-status-row","squarespace-domains-view-models-link-status-list","squarespace-spinner","squarespace-ss-widget"]})},"./src/main/webapp/universal/scripts-v6/domains/link-status/row.js":function(e,t){YUI.add("squarespace-domains-link-status-row",function(i){i.namespace("Squarespace.Domains.LinkStatus");var t=i.Squarespace.Domains.LinkStatus.Row=i.Base.create("Row",i.Base,[i.Squarespace.Mixins.EventRegistrar],{initializer:function(){this.set("rows",i.Array.map(this.get("values"),function(e){return t.createColumn(e,this.get("header"))},this));this._renderRows()},destructor:function(){this.get("rowElement").remove(true)},render:function(e){var t=this.get("rowElement");t.toggleClass("has-errors",this.get("hasErrors"));t.toggleClass("has-warnings",this.get("hasWarnings"));e.append(t)},_renderRows:function(){var t=this.get("rowElement");i.Array.each(this.get("rows"),function(e){t.append(e)})}},{createColumn:function(e,t){var a="td";t&&(a="th");return new i.Node.create(i.Lang.sub("<{element}>{value}</{element}>",{element:a,value:e||""}))},CSS_PREFIX:"sqs-domains-link-status-table-row",ATTRS:{values:{value:[],validator:i.Squarespace.AttrValidators.isArray},rows:{value:[],validator:i.Squarespace.AttrValidators.isArray},rowElement:{valueFn:function(){var e=new i.Node.create("<tr></tr>");e.toggleClass("header",this.get("header"));return e},validator:i.Squarespace.AttrValidators.isInstanceOf(i.Node)},hasErrors:{value:false,validator:i.Squarespace.AttrValidators.isBoolean},hasWarnings:{value:false,validator:i.Squarespace.AttrValidators.isBoolean},header:{value:false,validator:i.Squarespace.AttrValidators.isBoolean}}})},"1.0",{requires:["base","node","squarespace-attr-validators","squarespace-mixins-event-registrar"]})},"./src/main/webapp/universal/scripts-v6/domains/manage/dns/edit-section.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-domains-manage-dns-edit-section",function(a){a.namespace("Squarespace.Domains.Manage.DNS");var t=a.Squarespace.Domains.Manage.DNS.EditSection=a.Base.create("EditSection",a.Squarespace.Widgets.SSWidget,[],{BOUNDING_TEMPLATE:"<section></section>",CONTENT_TEMPLATE:null,initializer:function(){this.publish("state-change")},destructor:function(){this.get("description").destroy(true);this.get("editTable").destroy(true);this.get("spinner").destroy(true)},renderUI:function(){t.superclass.renderUI.call(this);var e=this.get("boundingBox");this.get("description").appendTo(e);this.get("spinner").render(e)},bindUI:function(){var e=this.get("editTableDirtyEvents");this._registerEvent(this.get("editTable").after(e,function(){this.fire("state-change",{dirty:true})},this));this.get("loadableData").load(this._onLoadableDataLoad.bind(this))},hide:function(){this.get("boundingBox").hide()},show:function(){this.get("boundingBox").show()},saveChanges:function(){console.log("implement me plox");return a.when()},revertChanges:function(){this.get("editTable").revertChanges();this.fire("state-change",{dirty:false});return a.when()},_onLoadableDataLoad:function(){this.get("spinner").stop();this._renderTable()},_renderTable:function(){console.log("implement me plox")},_resetTableData:function(){var e=this.get("editTable");var t=this._getTableData();e.set("initialData",a.clone(t));e.setData(t)},_restoreTable:function(){var e=this.get("editTable");var t=this.get("loadableData");var a=this.get("restoreButton");var i=function(){e.set("isLoading",false);a.set("disabled",false)};e.set("isLoading",true);a.set("disabled",true);t.restoreDefaults(function(){t.load(function(){this._resetTableData();i();this.fire("state-change",{dirty:false})}.bind(this))}.bind(this),function(){this._showSaveError();i()}.bind(this))},_showSaveError:function(e){new a.Squarespace.Widgets.Alert({"strings.title":this.get("strings.errorTitle"),"strings.message":e||i("An unexpected error occured while changing your DNS settings.")})},_getTableData:function(){return this.get("loadableData")}},{CSS_PREFIX:"sqs-domains-manage-dns-edit-section",ATTRS:{domain:{},description:{valueFn:function(){return a.Node.create("<p></p>").setContent(this.get("strings.description"))}},editTable:{validator:a.Squarespace.AttrValidators.isInstanceOf(a.Squarespace.Widgets.EditTable.Table)},editTableDirtyEvents:{value:["edit-table:row-delete","edit-table:row-add","edit-table:cell-edit"],validator:a.Squarespace.AttrValidators.isArray},loadableData:{},spinner:{valueFn:function(){return new a.Squarespace.Spinner({size:44,color:"dark"})}},usingDefaultNameservers:{value:true}}})},"1.0",{requires:["base","node","squarespace-domains-view-models-preset-template-list","squarespace-dialog-button","squarespace-ss-widget","squarespace-spinner","squarespace-widgets-confirmation","squarespace-widgets-edit-table-table"]})},"./src/main/webapp/universal/scripts-v6/domains/manage/dns/edit.js":function(e,t,a){var s=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var n=a("./common/temp/node_modules/react/index.js");var r=a("./common/temp/node_modules/react-dom/index.js");var o=a("./src/main/webapp/universal/src/apps/App/shared/components/MenuHeader/index.jsx").default;var l=a("./src/main/webapp/universal/src/shared/contexts/LocationContext.js");var c=a("./src/main/webapp/universal/src/shared/contexts/RouterContext.js");YUI.add("squarespace-domains-manage-dns-edit",function(a){a.namespace("Squarespace.Domains.Manage.DNS");var i=a.Squarespace.Domains.Manage.DNS.Edit=a.Base.create("Edit",a.Squarespace.Widgets.SSWidget,[a.Squarespace.Damask.Panel.MixinPanel,a.Squarespace.Mixins.SaveChanges],{renderUI:function(){i.superclass.renderUI.call(this);var e=this.get("contentBox");var t=this.get("nameserverSection");this.get("headerTray").render(e);this.get("recordSection").render(e);this._renderMenuHeader();t.render(e);t.hide()},bindUI:function(){i.superclass.bindUI.call(this);this.on("activeSectionChange",function(e){e.prevVal.hide();e.newVal.show()});var t=this.get("recordSection");var e=this.get("nameserverSection");this._registerEvent(this.get("headerTray").on("tab-switch-requested",this._handleTabSwitch,this),t.on("state-change",this._consumeStateChange,this),e.on("state-change",this._consumeStateChange,this),e.after("usingDefaultNameserversChange",function(e){t.set("usingDefaultNameservers",e.newVal)}))},_consumeStateChange:function(e){this.set("dirty",e.dirty)},_handleTabSwitch:function(t){if(t.dunzo)return;t.halt();this.ensureSavedChanges().then(function(){var e=this.get(t.button.get("name")+"Section");this.set("activeSection",e);this.get("headerTray").fire("tab-switch-requested",a.merge(t,{dunzo:true}))}.bind(this))},_saveChanges:function(){this.set("dirty",false);return this.get("activeSection").saveChanges()},_revertChanges:function(){return this.get("activeSection").revertChanges()},_renderMenuHeader:function(){var e;var t;if(this.get("menuHeaderChildWidget")){t=n.createRef();e=n.createElement("div",{ref:t})}r.render(n.createElement(c.Provider,{value:this.get("router")},n.createElement(l.Provider,{value:this.get("location")},n.createElement(o,{onBackClick:this.get("router")&&this.get("router").goBack,router:this.get("router"),location:this.get("location"),isDirty:this.get("dirty"),onSaveClick:this._saveChanges?this._saveChanges.bind(this):null,onDiscardClick:this._revertChanges?this._revertChanges.bind(this):null,children:e}))),this.get("menuHeaderNode").getDOMNode(),function(){t&&this.get("menuHeaderChildWidget").render(t.current)}.bind(this))}},{CSS_PREFIX:"sqs-domains-manage-dns-edit",ATTRS:{activeSection:{valueFn:function(){return this.get("recordSection")}},domain:{},headerTray:{valueFn:function(){var e=[{name:"record",label:this.get("strings.recordsTabLabel")}];var t=this.get("domain").get("tldFeatures");t.canUpdateNameserverSettings&&e.push({name:"nameserver",label:this.get("strings.nameserversTabLabel")});return new a.Squarespace.Widgets.TabbedHeaderTray({"strings.title":this.get("strings.title"),buttons:e})}},menuHeaderChildWidget:{},menuHeaderNode:{valueFn:function(){return new a.Node.create("<div>")}},location:{},router:{},recordSection:{valueFn:function(){return new a.Squarespace.Domains.Manage.DNS.RecordsEdit({domain:this.get("domain")})}},nameserverSection:{valueFn:function(){return new a.Squarespace.Domains.Manage.DNS.NameserversEdit({domain:this.get("domain")})}},strings:{value:{title:s("Advanced Settings"),recordsTabLabel:s("DNS Records"),nameserversTabLabel:s("Nameservers")}}}})},"1.0",{requires:["base","squarespace-damask-panel-mixin-panel","squarespace-domains-manage-dns-nameservers-edit","squarespace-domains-manage-dns-records-edit","squarespace-mixin-save-changes","squarespace-ss-widget","squarespace-tray"]})},"./src/main/webapp/universal/scripts-v6/domains/manage/dns/nameservers-edit.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/universal/src/shared/constants/HelpLinks.js");var n=a("./src/main/webapp/universal/src/shared/utils/domains/analytics/DomainManagementEvents.ts");YUI.add("squarespace-domains-manage-dns-nameservers-edit",function(r){r.namespace("Squarespace.Domains.Manage.DNS");var a=r.Squarespace.Domains.Manage.DNS.NameserversEdit=r.Base.create("NameserversEdit",r.Squarespace.Domains.Manage.DNS.EditSection,[],{renderUI:function(){var e=this.get("boundingBox");this.get("description").appendTo(e);this.get("title").appendTo(e);this.get("presetRadio").render(e);this.get("spinner").render(e)},bindUI:function(){a.superclass.bindUI.call(this);this._registerEvent(this.get("presetRadio").after("dataChange",function(e){if(!e.fromDefault){this.fire("state-change",{dirty:true});"custom"===e.prevVal&&this.set("customNameservers",this.get("editTable").collectCurrentData());this._sendAnalyticEvent(e.newVal)}this.set("usingDefaultNameservers","squarespace"===e.newVal);this.syncUI()},this))},syncUI:function(){a.superclass.syncUI.call(this);this.syncTable()},saveChanges:function(){var n=this.get("editTable");var e=this.get("loadableData");var t=n.collectCurrentData();var a=r.Array.dedupe(t.map(function(e){return e.hostName}));n.set("isLoading",true);e.reset(t);return r.Squarespace.Promises.create(function(i,s){if(a.length<2||a.length>13){this._showSaveError(this.get("strings.countErrorMessage"));n.set("isLoading",false);n.setData(a.map(function(e){return{hostName:e}}));s();return}e.sync("update",{},function(e,t){n.set("isLoading",false);if(!e){i();n.set("initialData",r.clone(this._getTableData()));var a=this.get("presetRadio").get("data");this.set("defaultOption",a);this.set("usingDefaultNameservers","squarespace"===a);return}e.responseJSON&&e.responseJSON.hostName?this.highlightBadNameserver(e.responseJSON):this._showSaveError(e.responseJSON.message);s()}.bind(this))},this)},highlightBadNameserver:function(e){var a=e.message.split(", ").shift();var i=e.hostName;this.get("editTable").get("rows").forEach(function(e){var t=e.collectCurrentData();t.hostName===i&&e.setCellError(0,a)})},_sendAnalyticEvent:function(e){var t=this.get("domain");n.toggleNameserverType(t.get("name"),e,t.get("isPurchasedFree"),t.get("managedDomainExpiration"),t.get("registeredOn"))},_onLoadableDataLoad:function(){a.superclass._onLoadableDataLoad.call(this);this.get("loadableData").getDefaults(function(e){this.set("loadableAndDefaultDataLoaded",true);this.set("defaultNameservers",e.nameServers);var t=this.isCurrentDataDefault();t||this.set("customNameservers",this._getTableData());this.updatePresetRadio(t);this.syncUI()}.bind(this))},_renderTable:function(){var e=this.get("editTable");var t=this._getTableData();e.render(this.get("boundingBox"));e.set("initialData",r.clone(t));e.setData(t);this.updatePresetRadio(this.isCurrentDataDefault())},_getTableData:function(){return this.get("loadableData").toJSON().nameServers},revertChanges:function(){var e=this.get("defaultOption");var t="squarespace"===e?"hide":"show";this.get("presetRadio").set("data",e,{fromDefault:true});a.superclass.revertChanges.call(this);this.toggleInputRow(t);return r.when()},show:function(){a.superclass.show.call(this);this.updatePresetRadio(this.isCurrentDataDefault())},updatePresetRadio:function(e){if(!this.get("loadableAndDefaultDataLoaded"))return;var t="custom";if(e){this.toggleInputRow("hide");t="squarespace"}this.set("defaultOption",t);this.get("presetRadio").set("data",t,{fromDefault:true})},syncTable:function(){if(!this.get("presetRadio").get("data"))return;var e=this.get("editTable");var t="show";if("squarespace"===this.get("presetRadio").get("data")){e.setData(this.get("defaultNameservers"));t="hide"}else e.setData(this.get("customNameservers"));this.toggleInputRow(t)},toggleInputRow:function(e){var t="hide"===e;var a=this.get("editTable");a.toggleInputRow(e);a.set("locked",t)},isCurrentDataDefault:function(){if(!this.get("loadableAndDefaultDataLoaded"))return;var e=this._getTableData();var t=this.get("defaultNameservers");var a=function(e){return e.hostName};return e.map(a).join("")===t.map(a).join("")}},{CSS_PREFIX:"sqs-domains-manage-dns-nameservers-edit",ATTRS:{editTable:{valueFn:function(){return new r.Squarespace.Widgets.EditTable.LockableTable({className:"bleed",header:null,fields:[{name:"hostName",editable:true,validator:r.Squarespace.Domains.DNSTable.validators.valueNotEmpty,inputCell:{dialogConfig:{"strings.placeholder":i("Enter Name Server")}}}],"strings.unlockConfirmTitle":this.get("strings.unlockConfirmTitle"),"strings.unlockConfirmMessage":this.get("strings.unlockConfirmMessage")})}},loadableData:{valueFn:function(){return new r.Squarespace.Domains.ViewModels.NameserverSet({domainId:this.get("domain").get("id")})}},title:{valueFn:function(){return r.Node.create('<h4 class="section-title">'+i("Nameservers")+"</h4>")}},presetRadio:{valueFn:function(){return new r.Squarespace.DialogFields.Radio({name:"nameserverPreset",className:"preset-radio",options:[{label:i("Use Squarespace nameservers"),value:"squarespace"},{label:i("Use custom nameservers"),value:"custom"}]})}},defaultNameservers:{value:[]},customNameservers:{value:[]},defaultOption:{},loadableAndDefaultDataLoaded:{value:false},"strings.description":{value:i('Nameservers control how your website is located based on your domain name. Use Squarespace\'s nameservers unless another service will host your domain. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:s.ADVANCED_DNS_SETTINGS_LANDING})},"strings.errorTitle":{value:i("Nameserver Error")},"strings.countErrorMessage":{value:i("You must specify at least 2 and at most 13 valid and unique nameservers.")}}})},"1.0",{requires:["base","squarespace-domains-dns-table-validators","squarespace-domains-manage-dns-edit-section","squarespace-domains-view-models-nameserver-set","squarespace-promises","squarespace-widgets-edit-table-lockable-table"]})},"./src/main/webapp/universal/scripts-v6/domains/manage/dns/preset-form.js":function(e,t,i){var s=i("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-domains-manage-dns-preset-form",function(r){r.namespace("Squarespace.Domains.Manage.DNS");var a=i("./src/main/webapp/frontend/packages/enums/DomainPresetTemplateId.js");var t={};t[a.SQUARESPACE_APEX_FORWARDING]={fieldOrder:["url"],fields:{url:{constructor:function(){return new r.Squarespace.DialogFields.Text({className:"forward-url",required:true,"strings.placeholder":s("URL")})},validator:r.Squarespace.Domains.DNSTable.validators.isValidUrl}},validate:["url"]};t[a.SQUARESPACE_SUBDOMAIN_FORWARDING]={fieldOrder:["subdomain","arrow","target"],fields:{subdomain:{constructor:function(e){return new r.Squarespace.DialogFields.TextWithStatic({className:"subdomain-subdomain",required:true,"strings.placeholder":s("subdomain"),"strings.staticText":e})},validator:r.Squarespace.Domains.DNSTable.validators.isValidHost},arrow:{constructor:function(){return r.Node.create('<div class="subdomain-arrow"><span class="icon icon-arrow"></span></div>')}},target:{constructor:function(){return new r.Squarespace.DialogFields.Text({className:"subdomain-target",required:true,"strings.placeholder":s("URL")})},validator:r.Squarespace.Domains.DNSTable.validators.isValidUrl}},validate:["subdomain","target"]};t[a.SQUARESPACE_SUBDOMAIN_WEBSITE]={fieldOrder:["subdomain"],fields:{subdomain:{constructor:function(){return new r.Squarespace.DialogFields.Text({className:"forward-url",required:true,"strings.placeholder":s("Subdomain")})},validator:function(e){return r.Squarespace.Domains.DNSTable.validators.valueNotEmpty(e)||r.Squarespace.Domains.DNSTable.validators.isValidHost(e)}}},validate:["subdomain"]};t[a.GOOGLE_APPS_VERIFICATION]={fieldOrder:["verification"],fields:{verification:{constructor:function(){return new r.Squarespace.DialogFields.Text({className:"verification-id",required:true,"strings.placeholder":"google-site-verification=DUHrIFSas3fS…"})},validator:function(e){return r.Squarespace.Domains.DNSTable.validators.valueNotEmpty(e)}}},validate:["verification"]};var e=r.Squarespace.Domains.Manage.DNS.PresetForm=r.Base.create("PresetForm",r.Squarespace.Widgets.SSWidget,[],{CONTENT_TEMPLATE:null,destructor:function(){var e=this.get("fields");r.Object.each(e,function(e,t){t.destroy()})},bindUI:function(){this.after("templateIdChange",function(e){this.set("config",t[e.newVal]||{});this.syncUI()})},syncUI:function(){e.superclass.syncUI.call(this);var a=this.get("config");var i=this.get("boundingBox");var s=this.get("hostname");var n={};i.empty();if(!a||!a.fieldOrder)return;a.fieldOrder.forEach(function(e){var t=a.fields[e].constructor(s);t instanceof r.Node?i.append(t):t.render(i);n[e]=t});this.set("fields",n)},isValid:function(){if(!this.get("dataRequired"))return true;var i=this.get("fields");var s=this.get("config");var n=true;this.get("config").validate.forEach(function(e){var t=i[e];var a=s.fields[e].validator(t.get("data")||"");a&&(n=false);t.toggleError(a)});return n},getData:function(){var e=this.get("templateId");var t=this.get("fields");if(e===a.SQUARESPACE_APEX_FORWARDING)return{forwardingUrl:t.url.get("data")};if(e===a.SQUARESPACE_SUBDOMAIN_FORWARDING)return{subdomain:t.subdomain.get("data"),forwardingUrl:t.target.get("data")};if(e===a.SQUARESPACE_SUBDOMAIN_WEBSITE)return{subdomain:t.subdomain.get("data")};if(e===a.GOOGLE_APPS_VERIFICATION)return{subdomain:"@",value:t.verification.get("data")};return{}},reset:function(){r.Object.each(this.get("fields"),function(e){e.set("data","")})}},{CSS_PREFIX:"sqs-domains-manage-dns-preset-form",ATTRS:{templateId:{setter:function(e){return parseInt(e)}},config:{valueFn:function(){return t[this.get("templateId")]||{}}},hostname:{},dataRequired:{getter:function(){return!!this.get("config").fieldOrder}}}})},"1.0",{requires:["base","node","squarespace-dialog-text","squarespace-dialog-text-with-static","squarespace-domains-dns-table-validators","squarespace-ss-widget"]})},"./src/main/webapp/universal/scripts-v6/domains/manage/dns/preset-table.js":function(e,t){YUI.add("squarespace-domains-manage-dns-preset-table",function(e){e.namespace("Squarespace.Domains.Manage.DNS");var t=e.clone(e.Squarespace.Domains.DNSTable.fields);t[t.length-1].editable=false;var a=45;var i=22;var s=e.Squarespace.Domains.Manage.DNS.PresetTable=e.Base.create("PresetTable",e.Squarespace.Widgets.SSWidget,[],{initializer:function(){this.set("table",new e.Squarespace.Domains.DNSTable.RecordsTable({className:"bleed preset-table",locked:true,fields:t,header:null,inputRow:false,actionColumn:null,groupOrder:["CNAME","A","MX","AAAA","TXT","SRV"],groupKey:"record",data:e.clone(this.get("data"))}));this.publish("remove")},renderUI:function(){s.superclass.renderUI.call(this);this.get("table").render(this.get("contentBox"));this.get("boundingBox").addClass(this.get("key")+"-section");this.setMaxHeight()},bindUI:function(){s.superclass.bindUI.call(this);this.after("isLoadingChange",function(e){this.get("table").set("isLoading",e.newVal)});this.after("selectedChange",this.syncUI);this.after("extraDataChange",this.syncUI);this.get("boundingBox").delegate("click",function(){this.fire("remove")},".remove-button",this);this.after("dataChange",function(e){this.get("table").setData(e.newVal)})},syncUI:function(){s.superclass.syncUI.call(this);var e=this.get("contentBox");var t=this.get("boundingBox");var a=e.one(".extra-data");var i=this.get("extraData");a.toggleClass("is-empty",!i);a.setContent(i);e.one(".table-heading").setContent(this.get("name"));t.toggleClass("is-hidden",!this.get("selected"));t.toggleClass("has-missing-records",this.get("hasMissingRecords"));this.setMaxHeight()},setMaxHeight:function(){var e=this.get("table").get("boundingBox").get("scrollHeight")+i;this.get("extraData")&&(e+=a);this.get("boundingBox").setStyle("max-height",e)}},{CSS_PREFIX:"sqs-domains-preset-table",TEMPLATE:'<div class="table-heading"></div><div class="extra-data"></div><div class="remove-button"><span class="icon icon-delete"></span></div>',ATTRS:{key:{},name:{},data:{},selected:{value:false},table:{},extraData:{},isLoading:{},hasMissingRecords:{value:false}}})},"1.0",{requires:["base","node","squarespace-domains-dns-table-configs","squarespace-domains-dns-table-records-table","squarespace-ss-widget"]})},"./src/main/webapp/universal/scripts-v6/domains/manage/dns/presets.js":function(e,t,a){var r=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var i=a("./src/main/webapp/frontend/packages/enums/DomainPresetTemplateId.js");YUI.add("squarespace-domains-manage-dns-presets",function(l){l.namespace("Squarespace.Domains.Manage.DNS");var c=l.Squarespace.Domains.DNSTable.mapRecordsToTableData;var s={mail:r("Mail MX Records"),forward:r("Forwarding"),website:r("Squarespace Records"),verification:r("Domain Verification")};var t=l.Squarespace.Domains.Manage.DNS.Presets=l.Base.create("Presets",l.Squarespace.Widgets.SSWidget,[],{CONTENT_TEMPLATE:null,initializer:function(){this.tableEvents=[];this.get("presetList").load(this.handlePresetLoad.bind(this));this.get("presetTemplates").load(this.generateTables.bind(this));this.publish("add");this.publish("remove");this.publish("missingRecordsFound")},destructor:function(){if(this.tableEvents){l.Array.invoke(this.tableEvents,"detach");this.tableEvents=null}},renderUI:function(){t.superclass.renderUI.call(this);var e=this.get("boundingBox");this.get("headingTable").render(e.one(".heading-table"));this.get("select").render(e.one(".select"));this.get("addButton").render(e.one(".add-button"));this.get("currentForm").render(e.one(".additional-fields"))},bindUI:function(){t.superclass.bindUI.call(this);this._registerEvent(this.get("addButton").on("click",this.addPreset,this),this.get("select").on("dataChange",function(e){this.get("currentForm").set("templateId",e.newVal)},this))},generateTables:function(){var a={};var i=function(e){return{label:e.get("displayName"),value:e.get("id")}};this.get("presetTemplates").toArray().forEach(function(e){var t=e.get("type");a[t]?a[t].options.push(i(e)):a[t]={label:s[t],options:[i(e)]}});a=l.Object.values(a);this.get("select").setAttrs({options:a})},addPreset:function(){var i=parseInt(this.get("select").get("data"));if(window.isNaN(i))return;var e=this.get("currentForm");if(e.get("dataRequired")&&!e.isValid()){console.log("Form errors");return}var t=e.getData();var a={templateId:i,type:this.get("presetTemplates").getTypeById(i)};if(t.subdomain){a.subdomain=t.subdomain;delete t.subdomain}a.data=t;var s=this.get("addButton");var n=function(){s.set("isLoading",false);e.reset()};s.set("isLoading",true);this.get("presetList").create(a,function(e){var t=this.get("presetList").getById(e.id);var a=this.createTable(t,false);this.get("tables")[e.id]=a;l.config.win.setTimeout(a.set.bind(a,"selected",true),100);l.Squarespace.Domains.Events.fire("preset:add",{templateId:i});n()}.bind(this),function(e){var t=e&&e.message||r("Failed to apply preset.");l.Squarespace.Widgets.Alert.show({"strings.title":r("DNS Record Conflict"),"strings.message":t});n()})},removePreset:function(e){var t=this.get("presetList");var a=t.getById(e);var i=this.get("tables")[e];if(this.isPresetThePrimarySubdomain(a,i)){l.Squarespace.Widgets.Alert.show({"strings.title":this.get("strings.primaryWarningTitle"),"strings.message":this.get("strings.primaryWarningMessage")});return}i.set("isLoading",true);var s=i.set.bind(i,"isLoading",false);t.remove(a,function(){i.set("selected",false);l.Squarespace.Domains.Events.fire("preset:remove",{preset:a});s()},null,function(){l.Squarespace.Widgets.Alert.show({"strings.title":this.get("strings.removeFailureTitle"),"strings.message":this.get("strings.removeFailureMessage")});s()})},handlePresetLoad:function(){var e=this.get("presetList").toArray();var i=this.get("tables");var s=this.get("hostname");e.forEach(function(e){e.get("missingRecords").length&&this.fire("missingRecordsFound");var t=this.createTable(e,true);var a=e.get("data");i[e.get("id")]=t;a&&t.set("extraData",e.formatExtraData(s))},this);this.set("tables",i)},createTable:function(e,t){var a=this.get("boundingBox").one(".tables");var i=e.get("id");var s=e.get("data");var n=e.get("existingRecords");var r=e.get("missingRecords");r.length&&(n=r);var o=new l.Squarespace.Domains.Manage.DNS.PresetTable({key:i,name:e.get("displayName"),data:c(n),render:a,selected:t,hasMissingRecords:!!e.get("missingRecords").length});s&&o.set("extraData",e.formatExtraData(this.get("hostname")));this.tableEvents.push(o.on("remove",this.removePreset.bind(this,i)));return o},isPresetThePrimarySubdomain:function(e,t){if(e.get("templateId")!==i.SQUARESPACE_SUBDOMAIN_WEBSITE)return false;var a=this.get("primarySubdomain");if(""===a)return false;return a===t.get("data")[0].host}},{CSS_PREFIX:"sqs-domains-manage-dns-presets",TEMPLATE:'<div class="form"><div class="select"></div><div class="additional-fields"></div><div class="add-button"></div></div><div class="sqs-domains-preset-table heading-table"></div><div class="tables"></div>',ATTRS:{presetList:{},presetTemplates:{},hostname:{},primarySubdomain:{},select:{valueFn:function(){return new l.Squarespace.DialogFields.Select({className:"sqs-select-light"})}},addButton:{valueFn:function(){return new l.Squarespace.DialogFields.Button({className:"primary add","strings.text":r("Add")})}},headingTable:{valueFn:function(){return new l.Squarespace.Widgets.EditTable.Table({className:"preset-table bleed",fields:l.clone(l.Squarespace.Domains.DNSTable.fields),inputRow:false})}},tables:{value:{}},currentForm:{valueFn:function(){return new l.Squarespace.Domains.Manage.DNS.PresetForm({hostname:"."+this.get("hostname")})}},strings:{value:{primaryWarningTitle:r("Change Primary Domain"),primaryWarningMessage:r("You must set a new primary domain before removing this preset."),removeFailureTitle:r("Something Went Wrong"),removeFailureMessage:r("Failed to remove preset.")}}}})},"1.0",{requires:["base","node","squarespace-dialog-button","squarespace-dialog-select","squarespace-domains-dns-table-configs","squarespace-domains-dns-table-records-table","squarespace-domains-events","squarespace-domains-manage-dns-preset-form","squarespace-domains-manage-dns-preset-table","squarespace-ss-widget","squarespace-widgets-alert","squarespace-widgets-edit-table-table"]})},"./src/main/webapp/universal/scripts-v6/domains/manage/dns/records-edit.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./common/temp/node_modules/react/index.js");var r=a("./common/temp/node_modules/react-dom/index.js");var o=a("./src/main/webapp/universal/src/shared/constants/HelpLinks.js");var l=a("./src/main/webapp/universal/src/apps/App/shared/components/Panel/Notification.jsx");YUI.add("squarespace-domains-manage-dns-records-edit",function(n){n.namespace("Squarespace.Domains.Manage.DNS");var t=n.Squarespace.Domains.Manage.DNS.RecordsEdit=n.Base.create("RecordsEdit",n.Squarespace.Domains.Manage.DNS.EditSection,[],{bindUI:function(){t.superclass.bindUI.call(this);var e=this.get("presets");this.after("usingDefaultNameserversChange",this.syncUI);this._registerEvent([e.on("missingRecordsFound",function(){var e=this.get("contentBox");var t=this.get("missingRecordsBanner");t.render(e);e.prepend(t.get("boundingBox"))},this),n.Squarespace.Domains.Events.on("domain:link-status-load",this._renderDeprecatedIPAddressNotification.bind(this))])},renderUI:function(){var e=this.get("boundingBox");this.get("deprecatedIPAddressNotification").appendTo(e);this.get("nameserversWarning").appendTo(e);this.get("description").appendTo(e);this.get("title").appendTo(e);this.get("presets").render(e);this.get("customHeading").appendTo(e);this.get("spinner").render(e)},syncUI:function(){this.get("nameserversWarning").toggleClass("is-visible",!this.get("usingDefaultNameservers"))},saveChanges:function(){var s=this.get("editTable");var e=this._mapTableDataToRecordSet(s.collectCurrentData());var t=this.get("loadableData");s.set("isLoading",true);t.reset(e);return n.Squarespace.Promises.create(function(a,i){t.sync("update",{},function(e,t){s.set("isLoading",false);if(e){console.error(t);this._showSaveError(e.responseJSON.message);i();return}this.get("editTable").set("initialData",n.clone(this._getTableData()));a()}.bind(this))},this)},_renderDeprecatedIPAddressNotification:function(){var e=n.Array.some(this.get("domain").get("linkStatusList"),function(e){return e.get("deprecated")});e&&r.render(s.createElement(l,{title:i("Invalid IP Address"),type:"error"},s.createElement("div",null,i("We are unable to create an SSL certificate for your domain because it is using an invalid IP address. Please follow {theseSteps} to update your DNS records with the correct IP addresses.",{theseSteps:s.createElement("a",{href:o.CONNECT_DOMAIN,target:"_blank"},i("these steps"))}))),this.get("deprecatedIPAddressNotification").getDOMNode())},_renderTable:function(){this.get("editTable").render(this.get("boundingBox"));this._resetTableData()},_renderResetButton:function(){},_getTableData:function(){return n.Squarespace.Domains.DNSTable.mapRecordsToTableData(this.get("loadableData").toJSON().records)},_mapTableDataToRecordSet:function(e){var t=n.Squarespace.Domains.DNSTable.fieldMap;return e.map(function(a){var i={};if("SRV"===a.record){var e=a.data.split(" ");i.subdomain=a.host;i.type=a.record;i.priority=a.priority;i.weight=e[0];i.port=e[1];i.hostname=e[2];return i}n.Object.each(t[a.record],function(e,t){i[e]=a[t]});return i})},destructor:function(){r.unmountComponentAtNode(this.get("deprecatedIPAddressNotification"));this.get("deprecatedIPAddressNotification").destroy(true);this.get("nameserversWarning").destroy(true);this.get("description").destroy(true);this.get("title").destroy(true);this.get("presets").destroy(true);this.get("customHeading").destroy(true);this.get("spinner").destroy(true);this.get("missingRecordsBanner").destroy(true)}},{CSS_PREFIX:"sqs-domains-manage-dns-records-edit",ATTRS:{editTable:{valueFn:function(){return new n.Squarespace.Domains.DNSTable.RecordsTable({className:"bleed custom-table",header:null,groupOrder:["CNAME","A","MX","AAAA","TXT","SRV"],groupKey:"record",domain:this.get("domain")})}},customHeading:{valueFn:function(){return n.Node.create('<div class="table-heading">'+i("Custom Records")+"</div>")}},presets:{valueFn:function(){var e=this.get("domain");return new n.Squarespace.Domains.Manage.DNS.Presets({presetList:this.get("presetList"),presetTemplates:this.get("presetTemplateList"),hostname:e.get("name"),primarySubdomain:e.get("chosenPrimarySubdomain")})}},loadableData:{valueFn:function(){return new n.Squarespace.Domains.ViewModels.RecordSet({domainId:this.get("domain").get("id")})}},presetList:{valueFn:function(){return new n.Squarespace.Domains.ViewModels.PresetList({domainId:this.get("domain").get("id")})}},presetTemplateList:{valueFn:function(){return new n.Squarespace.Domains.ViewModels.PresetTemplateList}},title:{valueFn:function(){return n.Node.create('<h4 class="section-title">'+i("Add Presets")+"</h4>")}},nameserversWarning:{valueFn:function(){return n.Node.create('<div class="nameservers-warning">'+this.get("strings.nameserversWarning")+"</div>")}},deprecatedIPAddressNotification:{valueFn:function(){return n.Node.create('<div class="deprecated-ip-address-notification"></div>')}},missingRecordsBanner:{valueFn:function(){return new n.Squarespace.DialogFields.StateIndicatorBanner({name:"missingRecords",data:1,stateDisplays:[{value:1,state:1,message:i("There was a problem adding one or more of your presets. Please remove the highlighted presets and try adding them again."),className:"error"}]})}},"strings.description":{value:i('Custom records define how your domain behaves. Common uses include pointing your domain at your web service or configuring email delivery for your domain. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:o.ADVANCED_DNS_SETTINGS_LANDING})},"strings.errorTitle":{value:i("DNS Record Conflict")},"strings.nameserversWarning":{value:i("We noticed you are using custom nameservers. Your DNS settings will be managed with your third-party nameserver provider. Use Squarespace's nameservers to activate the DNS settings below.")}}})},"1.0",{requires:["base","squarespace-dialog-state-indicator-banner","squarespace-domains-dns-table-configs","squarespace-domains-dns-table-records-table","squarespace-domains-manage-dns-edit-section","squarespace-domains-manage-dns-presets","squarespace-domains-view-models-preset-list","squarespace-domains-view-models-preset-template-list","squarespace-domains-view-models-record-set","squarespace-promises","squarespace-widgets-alert"]})},"./src/main/webapp/universal/scripts-v6/domains/manage/dns/setup.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-domains-manage-dns-setup",function(n){n.namespace("Squarespace.Domains.Manage.DNS");n.Squarespace.Domains.Manage.DNS.Setup=n.Base.create("Setup",n.Squarespace.Widgets.SSWidget,[n.Squarespace.Damask.Panel.MixinPanel],{initializer:function(){this.get("model").getProvider().then(n.bind(function(e){this._updateDescriptionsWithProviderInfo(e)},this)).catch(function(e){false})},destructor:function(){this.get("headerTray").destroy(true);this.get("statusTable").destroy(true);this.get("checkButton").destroy(true);this.get("testConnectionButton").destroy(true)},renderUI:function(){var e=this.get("contentBox");this.get("headerTray").render(e);this.get("statusTable").render(e);this.get("checkButton").render(e);this.get("testConnectionButton").render(e)},bindUI:function(){this._registerEvent(this.get("checkButton").on("click",function(){this.get("model").loadLinkStatus()},this))},_updateDescriptionsWithProviderInfo:function(e){var t=e.toJSON();var a=n.Lang.isValue(e.get("providerUrl"))?this.get("strings.headerSubtitleLogin"):this.get("strings.headerSubtitleLoginNoProvider");var i=this.get("strings.headerSubtitleLead")+a+this.get("strings.headerSubtitleHelpArticle");var s=n.Lang.sub(i,t);this.get("headerTray").set("strings.subtitle",s)}},{CSS_PREFIX:"sqs-domains-panel sqs-domains-manage-dns-setup",ATTRS:{model:{validator:n.Squarespace.AttrValidators.isInstanceOf(n.Squarespace.Domains.ViewModels.Domain)},headerTray:{valueFn:function(){return new n.Squarespace.Widgets.HeaderTray({"strings.title":this.get("strings.headerTitle"),"strings.subtitle":""})}},statusTable:{valueFn:function(){return new n.Squarespace.Domains.LinkStatus.Base({linkStatusList:this.get("model").get("linkStatusList")})}},checkButton:{valueFn:function(){return new n.Squarespace.DialogFields.Button({className:"primary","strings.text":this.get("strings.checkLabel")})}},testConnectionButton:{valueFn:function(){return new n.Squarespace.DialogFields.Button({className:"minor","strings.text":this.get("strings.testConnectionButton"),newWindow:true,href:"http://"+this.get("model").get("name")})}},strings:{value:{headerTitle:i("DNS Settings"),headerSubtitleLead:i("This table shows you the DNS entries needed to connect your domain. Incorrect or missing entries are highlighted in red.")+" ",headerSubtitleLogin:i('<a href="{providerUrl}" target="_blank">Log in to your domain provider</a> to manage these settings.')+" ",headerSubtitleLoginNoProvider:i("Log in to your domain provider to manage these settings.")+" ",headerSubtitleHelpArticle:i('If you need help adding and removing DNS entries, follow our <a href="{helpArticleUrl}" target="_blank">step-by-step guide</a> that walks you through the process.'),checkLabel:i("Refresh"),testConnectionButton:i("Test Connection")}}}})},"1.0",{requires:["base","squarespace-damask-panel-mixin-panel","squarespace-dialog-button","squarespace-dialog-description","squarespace-domains-link-status-base","squarespace-domains-view-models-domain","squarespace-ss-widget","squarespace-tray","squarespace-widgets-alert"]})},"./src/main/webapp/universal/scripts-v6/domains/models/cancellation-preview.js":function(e,t,a){var i=a("./common/temp/node_modules/@sqs/i18n-ui/lib/money/index.js");YUI.add("squarespace-domains-models-cancellation-preview",function(e){e.namespace("Squarespace.Domains.Models");e.Squarespace.Domains.Models.CancellationPreview=e.Base.create("CancellationPreview",e.Model,[e.Squarespace.ModelSync.REST],{url:e.Squarespace.API_ROOT+"billing/subscriptions/{id}/cancellation-preview"},{ATTRS:{id:{validator:e.Squarespace.AttrValidators.isString},refundAmount:{setter:function(e){return i.fromJson(e)}}}})},"1.0",{requires:["base","model","squarespace-model-sync-rest","squarespace-attr-validators"]})},"./src/main/webapp/universal/scripts-v6/domains/models/domain.js":function(e,t,a){var s=a("./common/temp/node_modules/@sqs/i18n-ui/lib/money/index.js");var n=a("./src/main/webapp/frontend/packages/enums/DomainSubscriptionState.js");var r=a("./src/main/webapp/frontend/packages/enums/DomainPlanLevel.js");YUI.add("squarespace-domains-models-domain",function(a){a.namespace("Squarespace.Domains.Models");var i=a.Squarespace.Domains.Models.Domain=a.Base.create("Domain",a.Model,[a.Squarespace.ModelSync.REST],{root:a.Squarespace.REST_API_ROOT+"domains",serialize:function(){var e=i.superclass.toJSON.apply(this,arguments);delete e.discountExpiresOn;delete e.planLevel;delete e.certificates;e.basePrice instanceof s&&(e.basePrice=e.basePrice.toJson());var t=a.JSON.stringify(e);return t}},{ATTRS:{id:{validator:a.Squarespace.AttrValidators.isString},autoRenew:{validator:a.Squarespace.AttrValidators.isBoolean},renewsOn:{validator:a.Squarespace.AttrValidators.isNullOrNumber},createdOn:{validator:a.Squarespace.AttrValidators.isNumber},certificates:{validator:a.Squarespace.AttrValidators.isArray},discountExpiresOn:{setter:function(e){if(e instanceof Date)return e;if(a.Lang.isNumber(e))return new Date(e);return null}},isVerified:{validator:a.Squarespace.AttrValidators.isBoolean},locked:{validator:a.Squarespace.AttrValidators.isBoolean},managedDomainExpiration:{validator:a.Squarespace.AttrValidators.isNullOrNumber},name:{validator:a.Squarespace.AttrValidators.isString},planLevel:{validator:a.Squarespace.AttrValidators.isValueIn(r)},basePrice:{value:null,setter:function(e){!a.Lang.isObject(e)||e instanceof s||(e=s.fromJson(e));if(null!==e&&!(e instanceof s))return a.Attribute.INVALID_VALUE;return e}},providerId:{validator:a.Squarespace.AttrValidators.isNumber},purchasedGoogleApps:{validator:a.Squarespace.AttrValidators.isBoolean},revocable:{validator:a.Squarespace.AttrValidators.isBoolean},subscriptionId:{validator:a.Squarespace.AttrValidators.isString},subscriptionState:{validator:a.Squarespace.AttrValidators.isValueIn(n)},type:{validator:a.Squarespace.AttrValidators.isNumber},verficationCode:{validator:a.Squarespace.AttrValidators.isNullOrString},withinPropagationWindow:{validator:a.Squarespace.AttrValidators.isBoolean},whoisPrivacy:{validator:a.Squarespace.AttrValidators.isNullOrBoolean}}})},"1.0",{requires:["base","model","squarespace-attr-validators","squarespace-model-sync-rest"]})},"./src/main/webapp/universal/scripts-v6/domains/models/email-verification.js":function(e,t){YUI.add("squarespace-domains-models-email-verification",function(e){e.namespace("Squarespace.Domains.Models");e.Squarespace.Domains.Models.EmailVerification=e.Base.create("EmailVerification",e.Model,[],{},{ATTRS:{daysToSuspend:{validator:e.Squarespace.AttrValidators.isNumber},sentToEmail:{validator:e.Squarespace.AttrValidators.isString},status:{validator:e.Squarespace.AttrValidators.isNumber},verificationDeadline:{validator:e.Squarespace.AttrValidators.isNumber}}})},"1.0",{requires:["base","model","model-sync-rest","squarespace-attr-validators"]})},"./src/main/webapp/universal/scripts-v6/domains/models/link-status.js":function(e,t){YUI.add("squarespace-domains-models-link-status",function(e){e.namespace("Squarespace.Domains.Models");e.Squarespace.Domains.Models.LinkStatus=e.Base.create("LinkStatus",e.Model,[],{},{ATTRS:{subDomain:{validator:e.Squarespace.AttrValidators.isString},type:{validator:e.Squarespace.AttrValidators.isNumber},recordType:{validator:e.Squarespace.AttrValidators.isString},expectedRecordType:{validator:e.Squarespace.AttrValidators.isString},value:{validator:e.Squarespace.AttrValidators.isString},expectedValue:{validator:e.Squarespace.AttrValidators.isString}}})},"1.0",{requires:["base","model","squarespace-attr-validators"]})},"./src/main/webapp/universal/scripts-v6/domains/models/nameserver.js":function(e,t){YUI.add("squarespace-domains-models-nameserver",function(e){e.namespace("Squarespace.Domains.Models");e.Squarespace.Domains.Models.Nameserver=e.Base.create("Nameserver",e.Model,[],{},{ATTRS:{hostName:{validator:e.Squarespace.AttrValidators.isString}}})},"1.0",{requires:["base","model","squarespace-attr-validators"]})},"./src/main/webapp/universal/scripts-v6/domains/models/preset-template.js":function(e,t){YUI.add("squarespace-domains-models-preset-template",function(e){e.namespace("Squarespace.Domains.Models");e.Squarespace.Domains.Models.PresetTemplate=e.Base.create("PresetTemplate",e.Model,[],{},{ATTRS:{type:{validator:e.Squarespace.AttrValidators.isString},displayName:{validator:e.Squarespace.AttrValidators.isString},records:{}}})},"1.0",{requires:["base","model","squarespace-attr-validators"]})},"./src/main/webapp/universal/scripts-v6/domains/models/preset.js":function(e,t){YUI.add("squarespace-domains-models-preset",function(e){e.namespace("Squarespace.Domains.Models");e.Squarespace.Domains.Models.Preset=e.Base.create("Preset",e.Model,[],{},{ATTRS:{id:{validator:e.Squarespace.AttrValidators.isString},templateId:{validator:e.Squarespace.AttrValidators.isNumber},type:{validator:e.Squarespace.AttrValidators.isString},subdomain:{validator:e.Squarespace.AttrValidators.isString},displayName:{validator:e.Squarespace.AttrValidators.isString},existingRecords:{validator:e.Squarespace.AttrValidators.isArray},data:{}}})},"1.0",{requires:["base","model","squarespace-attr-validators"]})},"./src/main/webapp/universal/scripts-v6/domains/models/provider.js":function(e,t){YUI.add("squarespace-domains-models-provider",function(e){e.namespace("Squarespace.Domains.Models");e.Squarespace.Domains.Models.Provider=e.Base.create("Provider",e.Model,[e.ModelSync.REST],{root:"/api/domain-providers"},{ATTRS:{id:{validator:e.Squarespace.AttrValidators.isNullOrNumber,value:null},name:{validator:e.Squarespace.AttrValidators.isString},providerUrl:{validator:e.Squarespace.AttrValidators.isString},helpArticleUrl:{validator:e.Squarespace.AttrValidators.isString}}})},"1.0",{requires:["base","model","squarespace-attr-validators"]})},"./src/main/webapp/universal/scripts-v6/domains/models/record.js":function(e,t){YUI.add("squarespace-domains-models-record",function(e){e.namespace("Squarespace.Domains.Models");e.Squarespace.Domains.Models.Record=e.Base.create("Record",e.Model,[],{},{ATTRS:{type:{validator:e.Squarespace.AttrValidators.isString},domainName:{validator:e.Squarespace.AttrValidators.isString},subdomain:{validator:e.Squarespace.AttrValidators.isString},ip:{validator:e.Squarespace.AttrValidators.isNullOrString},hostname:{validator:e.Squarespace.AttrValidators.isNullOrString},text:{validator:e.Squarespace.AttrValidators.isNullOrString},priority:{}}})},"1.0",{requires:["base","model","squarespace-attr-validators"]})},"./src/main/webapp/universal/scripts-v6/domains/view-models/domain-list.js":function(e,t){YUI.add("squarespace-domains-view-models-domain-list",function(e){e.namespace("Squarespace.Domains.ViewModels");e.Squarespace.Domains.ViewModels.DomainList=e.Base.create("domains",e.Squarespace.Models.ModelList,[],{model:e.Squarespace.Domains.ViewModels.Domain,comparator:function(e){return e.get("name").toLowerCase()},initializer:function(){this.on("*:primary",function(e){this.fire("primaryChange",e)});this.after("*:autoRenewChange",function(e){this.fire("domainAutoRenewChanged",e)});this.after("*:expiredChange",function(e){this.fire("domainExpiredChanged",e)})},getBuiltIn:function(){return this.filter({asList:true},function(e){return e.get("builtIn")})},getLinked:function(){return this.filter({asList:true},function(e){return!e.get("builtIn")&&!e.get("managed")})},getManaged:function(){return this.filter({asList:true},function(e){return e.get("managed")})},hasLinked:function(){return!this.getLinked().isEmpty()},hasManaged:function(){return!this.getManaged().isEmpty()},getByName:function(a){return this.toArray().find(function(e){var t=e.get("name");return a===t})}},{ATTRS:{purchasedGoogleApps:{getter:function(){return this.some(function(e){return e.get("purchasedGoogleApps")})}}}})},"1.0",{requires:["base","model-list","model-sync-rest","squarespace-domains-view-models-domain","squarespace-models-model-list"]})},"./src/main/webapp/universal/scripts-v6/domains/view-models/domain.js":function(e,t,a){var n=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var r=a("./src/main/webapp/universal/src/shared/utils/dateFormat.js");var o=a("./src/main/webapp/universal/src/shared/utils/calculateDateDiff.js");var l=a("./common/temp/node_modules/lodash/endsWith.js");var c=a("./src/main/webapp/universal/src/shared/stores/billing/TaxPreviewStore.js");var u=a("./src/main/webapp/universal/src/shared/i18n/index.ts").formatMoney;var d=a("./src/main/webapp/universal/src/shared/utils/SslCertificateUtils.js");var p=a("./src/main/webapp/frontend/packages/enums/BillingTaxType.js");var h=a("./src/main/webapp/universal/src/shared/domains/components/DomainTransferConnect/actions/LinkProviderActions.ts");YUI.add("squarespace-domains-view-models-domain",function(s){s.namespace("Squarespace.Domains.ViewModels");var i="www.";var e=s.Squarespace.Domains.ViewModels.Domain=s.Base.create("domain",s.Squarespace.Domains.Models.Domain,[],{initializer:function(){if(this.get("builtIn")){this.set("statusLoaded",true);return}this.loadLinkStatus();this.get("managed")&&this.get("emailVerificationDetails").load(s.bind(function(){this.set("statusLoaded",true)},this))},toJSON:function(){return this.getAttrs(s.Object.keys(e.superclass.constructor.ATTRS))},loadCancellationPreview:function(){if(!this.get("managed")||!s.Lang.isValue(this.get("subscriptionId")))return;this.get("cancellationPreview").load()},loadLinkStatus:function(e){if(!s.Lang.isValue(this.get("id")))return;var t=s.bind(function(){this.get("managed")||this.set("statusLoaded",true);s.Squarespace.Domains.Events.fire("domain:link-status-load",{domain:this});e&&e()},this);this.get("linkStatusList").load(t)},getProvider:function(){if(!s.Lang.isValue(this.get("providerId")))return this.identifyProvider();return this.loadStoredProvider()},loadStoredProvider:function(){return s.Squarespace.Domains.ViewModels.Provider.loadFromId(this.get("providerId"))},identifyProvider:function(){return h.identifyProvider(this.get("name")).then(function(e){if(200!==e.status||!e.data)throw new Error("Failed to identify provider");return new s.Squarespace.Domains.ViewModels.Provider(e.data)}).catch(function(e){throw e})},reactivate:function(){if(!this.get("expired"))return;return s.Squarespace.Promises.create(function(e,t){t()})},_toggleWWW:function(e){if(!this.get("primary"))return;var t=this.get("name");e&&(t=i+t);var a=this.get("systemPrimaryDomain");this._postToPrimaryEndpoint(t,function e(){this.set("systemPrimaryDomain",t);this.fire("wwwToggle",{domain:this,prevVal:a,newVal:t})},function e(){this.fire("wwwToggleFailure",{domain:this});new s.Squarespace.Widgets.Information({"strings.title":this.get("strings.wwwToggleFailureTitle"),"strings.message":this.get("strings.wwwToggleFailureMessage")})})},_postToPrimaryEndpoint:function(e,t,a){s.Data.put({url:"/api/rest/websites/primary-domain",data:{primaryDomain:e},success:t,failure:a},this)}},{ATTRS:{primary:{readOnly:true,getter:function(){var e=this.get("systemPrimaryDomain");var t=this.get("name");if(!s.Lang.isValue(e))return this.get("builtIn");return e===t||this.get("linked")&&this.get("usingWWW")&&i+t===e||this.get("managed")&&l(e,"."+t)}},builtIn:{getter:function(){return this.get("type")===s.Squarespace.DomainTypes.APPLICATION},readOnly:true},certificateStatus:{getter:function(){return d.getCumulativeStatus(this.get("certificates"))}},linked:{getter:function(){var e=this.get("providerId");var t=this.get("type");return t===s.Squarespace.DomainTypes.LINKED||t===s.Squarespace.DomainTypes.GOOGLE||e===s.Squarespace.DomainProviderId.NAMECHEAP},readOnly:true},managed:{getter:function(){return this.get("type")===s.Squarespace.DomainTypes.SQUARESPACE},readOnly:true},interpretedType:{getter:function(){var e=["managed","builtIn","linked"];var t=e.find(function(e){return this.get(e)}.bind(this));false;return t},readOnly:true},expired:{getter:function(){if(!s.Lang.isValue(this.get("managed")))return false;return this.get("subscriptionState")===s.Squarespace.DomainSubscriptionState.EXPIRED}},suspended:{getter:function(){if(!this.get("managed"))return false;var e=this.get("emailVerificationDetails").get("status");return e===s.Squarespace.DomainVerificationStatus.SUSPENDED},readOnly:true},pastDue:{getter:function(){if(!this.get("managed"))return false;return this.get("subscriptionState")===s.Squarespace.DomainSubscriptionState.PASTDUE}},active:{getter:function(){return this.get("subscriptionState")===s.Squarespace.DomainSubscriptionState.ACTIVE}},daysToExpiration:{getter:function(){if(!this.get("managed")||this.get("autoRenew"))return null;var e=new Date(this.get("managedDomainExpiration"));var t=new Date;var a=o(t,e);var i=360*a.year+30*a.month+7*a.week+a.day;return e>t?i:-i}},showExpirationWarning:{getter:function(){var e=this.get("daysToExpiration");return!this.get("autoRenew")&&e>0&&e<=15}},free:{getter:function(){return this.get("planLevel")===s.Squarespace.DomainPlanLevel.FREE}},purchasedFree:{getter:function(){return this.get("free")||!!this.get("discountExpiresOn")}},context:{getter:function(){return s.Squarespace.Context.getInstance()}},emailVerificationDetails:{valueFn:function(){if(!this.get("managed"))return null;return new s.Squarespace.Domains.ViewModels.EmailVerification({domainId:this.get("id")})},validator:s.Squarespace.AttrValidators.isNullOrInstanceOf(s.Squarespace.Domains.ViewModels.EmailVerification)},emailPending:{getter:function(){var e=this.get("emailVerificationDetails");if(!s.Lang.isValue(e))return false;return e.get("status")===s.Squarespace.DomainVerificationStatus.PENDING}},systemPrimaryDomain:{getter:function(){return this.get("context").get("website").get("primaryDomain")},setter:function(e){this.get("context").get("website").set("primaryDomain",e)}},chosenPrimarySubdomain:{getter:function(){if(!this.get("primary"))return null;var e=this.get("systemPrimaryDomain");return e.substr(0,e.indexOf(this.get("name"))-1)}},isTaxCollected:{getter:function(){var e=c.getState();return e&&e.isTaxCollected&&!e.isExempt}},taxType:{getter:function(){var e=c.getState();return e&&e.taxType}},displayRenewsOn:{getter:function(){var e=this.get("renewsOn");if(!s.Lang.isValue(e))return"";var t=r(new Date(e));var a=this.get("basePrice");var i=this.get("isTaxCollected")&&this.get("taxType")===p.VAT;if(this.get("free"))return n("{date} (Free Domain)",{date:t});if(a&&i)return n("{date} for {domainPrice} excl. VAT",{date:t,domainPrice:u(a)});if(a)return n("{date} for {domainPrice}",{date:t,domainPrice:u(a)});return t}},displayCreatedOn:{valueFn:function(){return r(new Date(this.get("createdOn")))},writeOnce:true,readOnly:true},displayExpiration:{valueFn:function(){var e=this.get("managedDomainExpiration");if(!s.Lang.isValue(e))return"";return r(new Date(e))}},usingWWW:{getter:function(){var e=this.get("systemPrimaryDomain");return e&&0===e.indexOf(i)},setter:"_toggleWWW"},cancellationPreview:{valueFn:function(){return new s.Squarespace.Domains.Models.CancellationPreview({id:this.get("subscriptionId")})},validator:s.Squarespace.AttrValidators.isNullOrInstanceOf(s.Squarespace.Domains.Models.CancellationPreview)},linkStatusList:{valueFn:function(){return new s.Squarespace.Domains.ViewModels.LinkStatusList({domainId:this.get("id")})},validator:s.Squarespace.AttrValidators.isNullOrInstanceOf(s.Squarespace.Domains.ViewModels.LinkStatusList)},recentlyAdded:{value:false,validator:s.Squarespace.AttrValidators.isBoolean},statusLoaded:{value:false,validator:s.Squarespace.AttrValidators.isBoolean}}})},"1.0",{requires:["base","parallel","squarespace-attr-validators","squarespace-context","squarespace-domains-events","squarespace-domains-models-domain","squarespace-domains-models-cancellation-preview","squarespace-domains-view-models-email-verification","squarespace-domains-view-models-link-status-list","squarespace-domains-view-models-provider","squarespace-enum","squarespace-promises"]})},"./src/main/webapp/universal/scripts-v6/domains/view-models/email-verification.js":function(e,t){YUI.add("squarespace-domains-view-models-email-verification",function(e){e.namespace("Squarespace.Domains.ViewModels");e.Squarespace.Domains.ViewModels.EmailVerification=e.Base.create("EmailVerification",e.Squarespace.Domains.Models.EmailVerification,[e.ModelSync.REST],{url:"/api/rest/domains/{domainId}/email-verification-status"},{ATTRS:{domainId:{validator:e.Squarespace.AttrValidators.isString}}})},"1.0",{requires:["base","model-sync-rest","squarespace-attr-validators","squarespace-domains-models-email-verification"]})},"./src/main/webapp/universal/scripts-v6/domains/view-models/link-status-list.js":function(e,t){YUI.add("squarespace-domains-view-models-link-status-list",function(t){t.namespace("Squarespace.Domains.ViewModels");var e=t.Squarespace.Domains.ViewModels.LinkStatusList=t.Base.create("LinkStatusList",t.Squarespace.Models.ModelList,[],{url:t.Squarespace.REST_API_ROOT+"domains/{domainId}/link-status",model:t.Squarespace.Domains.ViewModels.LinkStatus,load:function(){this.fire("load-start");e.superclass.load.apply(this,arguments)}},{ATTRS:{domainId:{validator:t.Squarespace.AttrValidators.isNullOrString,value:null},statuses:{getter:function(){return t.Array.filter(this.get("status"),function(e){return t.Lang.isValue(e)})}}}})},"1.0",{requires:["base","model","squarespace-attr-validators","squarespace-domains-view-models-link-status","squarespace-models-model-list"]})},"./src/main/webapp/universal/scripts-v6/domains/view-models/link-status.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-domains-view-models-link-status",function(e){e.namespace("Squarespace.Domains.ViewModels");var t=e.Squarespace.Domains.ViewModels.LinkStatus=e.Base.create("LinkStatus",e.Squarespace.Domains.Models.LinkStatus,[],{_getStatus:function(){if(this.get("value")===t.DEFAULTS.VALUE)return{type:"missingValue",value:this.get("expectedValue"),recordType:this.get("expectedRecordType")};if(!this.get("isCorrectType"))return{type:"host",value:this.get("expectedRecordType"),recordType:this.get("expectedRecordType")};if(!this.get("isCorrectValue")||this.get("deprecated")&&"www.squarespace.com"===this.get("value"))return{type:"details",value:this.get("expectedValue"),recordType:this.get("expectedRecordType")}}},{DEFAULTS:{VALUE:i("Record not found"),SUBDOMAIN:"@"},ATTRS:{subDomain:{getter:function(e){return e||t.DEFAULTS.SUBDOMAIN}},value:{getter:function(e){return e||t.DEFAULTS.VALUE}},isExpected:{getter:function(){return e.Lang.isValue(this.get("expectedValue"))}},isDetected:{getter:function(){return e.Lang.isValue(this.get("value"))}},isCorrectValue:{getter:function(){return this.get("isDetected")&&this.get("expectedValue")===this.get("value")}},isCorrectType:{getter:function(){return e.Lang.isValue(this.get("recordType"))&&this.get("expectedRecordType")===this.get("recordType")}},status:{getter:"_getStatus"}}})},"1.0",{requires:["base","squarespace-domains-models-link-status"]})},"./src/main/webapp/universal/scripts-v6/domains/view-models/namserver-set.js":function(e,t,a){var s=a("./common/temp/node_modules/lodash/noop.js");YUI.add("squarespace-domains-view-models-nameserver-set",function(a){a.namespace("Squarespace.Domains.ViewModels");var i=a.Squarespace.Domains.ViewModels.NameserverSet=a.Base.create("NameserverSet",a.ModelList,[a.Squarespace.ModelSync.REST],{url:a.Squarespace.REST_API_ROOT+"domains/{domainId}/nameserver-set",model:a.Squarespace.Domains.Models.Nameserver,parse:function(e){var t=i.superclass.parse.call(this,e);return t.nameServers},toJSON:function(){var e=i.superclass.toJSON.call(this);return{nameServers:e}},restoreDefaults:function(e,t){a.Data.post({url:this.getURL("read")+"/reseter",success:e||s,failure:t||s})},getDefaults:function(e,t){a.Data.get({url:this.getURL("read")+"/default",success:e||s,failure:t||s})}},{ATTRS:{domainId:{}}})},"1.0",{requires:["base","model-list","squarespace-domains-models-nameserver","squarespace-model-sync-rest"]})},"./src/main/webapp/universal/scripts-v6/domains/view-models/preset-list.js":function(e,t,a){var n=a("./common/temp/node_modules/lodash/noop.js");YUI.add("squarespace-domains-view-models-preset-list",function(i){i.namespace("Squarespace.Domains.ViewModels");var s=i.Squarespace.Domains.ViewModels.PresetList=i.Base.create("PresetList",i.Squarespace.Models.ModelList,[i.Squarespace.ModelSync.REST],{url:i.Squarespace.REST_API_ROOT+"domains/{domainId}/presets",model:i.Squarespace.Domains.ViewModels.Preset,create:function(e,t,a){if(!e)return;e.subdomain||(e.subdomain="@");e.data||(e.data={});i.Data.post({url:this.getURL("read"),json:true,data:e,success:function(e){this.add(e);t&&t(e)}.bind(this),failure:a||n})},remove:function(e,t,a){i.Data.del({url:this.getURL("read")+"/"+e.get("id"),success:t||n,failure:a||n});s.superclass.remove.call(this,e)}},{ATTRS:{domainId:{}}})},"1.0",{requires:["base","squarespace-data","squarespace-domains-view-models-preset","squarespace-model-sync-rest","squarespace-models-model-list"]})},"./src/main/webapp/universal/scripts-v6/domains/view-models/preset-template-list.js":function(e,t){YUI.add("squarespace-domains-view-models-preset-template-list",function(e){e.namespace("Squarespace.Domains.ViewModels");e.Squarespace.Domains.ViewModels.PresetTemplateList=e.Base.create("PresetTemplateList",e.Squarespace.Models.ModelList,[e.Squarespace.ModelSync.REST],{url:e.Squarespace.API_ROOT+"domain-preset-templates",model:e.Squarespace.Domains.Models.PresetTemplate,getTypeById:function(e){var t=this.getById(e);return t&&t.get("type")}})},"1.0",{requires:["base","squarespace-domains-models-preset-template","squarespace-model-sync-rest","squarespace-models-model-list"]})},"./src/main/webapp/universal/scripts-v6/domains/view-models/preset.js":function(e,t,a){var r=a("./src/main/webapp/universal/src/shared/utils/formatting/substituteString.js");YUI.add("squarespace-domains-view-models-preset",function(e){e.namespace("Squarespace.Domains.ViewModels");var n=a("./src/main/webapp/frontend/packages/enums/DomainPresetTemplateId.js");e.Squarespace.Domains.ViewModels.Preset=e.Base.create("Preset",e.Squarespace.Domains.Models.Preset,[],{formatExtraData:function(e){var t=this.get("data");if(!t)return;var a=this.get("templateId");var i=' <span class="icon icon-arrow"></span> ';var s="";if(a===n.SQUARESPACE_SUBDOMAIN_FORWARDING){s=this.get("subdomain")+"."+e;return s+i+t.forwardingUrl}if(a===n.SQUARESPACE_APEX_FORWARDING){s=r("{hostname}, www.{hostname}",{hostname:e});return s+i+t.forwardingUrl}}})},"1.0",{requires:["base","squarespace-domains-models-preset"]})},"./src/main/webapp/universal/scripts-v6/domains/view-models/provider.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/constants/HelpLinks.js");YUI.add("squarespace-domains-view-models-provider",function(s){s.namespace("Squarespace.Domains.ViewModels");s.Squarespace.Domains.ViewModels.Provider=s.Base.create("Provider",s.Squarespace.Domains.Models.Provider,[],{},{loadFromId:function(i){return new s.Squarespace.Promises.create(function(e,t){var a=new s.Squarespace.Domains.ViewModels.Provider({id:i});a.load(function(){e(a)})})},ATTRS:{isUnknown:{getter:function(){return this.get("id")===s.Squarespace.DomainProviderId.UNKNOWN}},helpArticleUrl:{getter:function(e){if(!s.Lang.isValue(e))return i.CONNECT_DOMAIN;return e}}}})},"1.0",{requires:["base","squarespace-domains-models-provider","squarespace-enum","squarespace-promises"]})},"./src/main/webapp/universal/scripts-v6/domains/view-models/record-set.js":function(e,t,a){var s=a("./common/temp/node_modules/lodash/noop.js");YUI.add("squarespace-domains-view-models-record-set",function(a){a.namespace("Squarespace.Domains.ViewModels");var i=a.Squarespace.Domains.ViewModels.RecordSet=a.Base.create("RecordSet",a.ModelList,[a.Squarespace.ModelSync.REST],{url:a.Squarespace.REST_API_ROOT+"domains/{domainId}/custom-record-set",model:a.Squarespace.Domains.Models.Record,parse:function(e){var t=i.superclass.parse.call(this,e);return t.records},toJSON:function(){var e=i.superclass.toJSON.call(this);return{records:e}},restoreDefaults:function(e,t){a.Data.post({url:this.getURL("read")+"/reseter",success:e||s,failure:t||s})}},{ATTRS:{domainId:{}}})},"1.0",{requires:["base","model-list","squarespace-domains-models-record","squarespace-model-sync-rest"]})},"./src/main/webapp/universal/scripts-v6/editor/form-product.js":function(e,t,a){var n=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var i=a("./src/main/webapp/universal/src/shared/constants/FormModelFieldsets.js");YUI.add("squarespace-editor-form-product",function(s){s.namespace("Squarespace");s.Squarespace.ProductFormModelEditor=s.Base.create("productFormModelEditor",s.Squarespace.FormModelEditor,[],{initializer:function(){this.get("dialog").on("remove-requested",this._confirmAndRemove,this)},_confirmAndRemove:function(){var e=this.get("model");var t=e.isNew();var a=n(t?"Discard Form":"Delete Form");var i;i=n(t?"Are you sure you wish to discard this form?":'Are you sure you wish to delete this form? Any products that are currently using this form in their Workflow settings will be set to "No Form Required".');new s.Squarespace.Widgets.Confirmation({"strings.title":a,"strings.message":i}).on("confirm",function(){e.destroy({remove:true});this.destroy()},this)}},{ATTRS:{dialogConfigStrings:{value:{title:n("Edit Product Form"),loadingText:n("Editing Product Form…")}},fieldsets:{valueFn:function(){return[i.BUILD]}}}})},"1.0",{requires:["base","squarespace-editor-form","squarespace-ui-base","squarespace-widgets-confirmation"]})},"./src/main/webapp/universal/scripts-v6/editor/form.js":function(e,t,a){var o=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var i=a("./src/main/webapp/universal/src/apps/App/shared/stores/FeaturesStore.js");var s=a("./src/main/webapp/frontend/packages/enums/Features.js");var l=a("./src/main/webapp/frontend/packages/enums/FormBackendConnectionType.js");var c=a("./src/main/webapp/frontend/packages/enums/FormBackendConnectionState.js");var u=a("./src/main/webapp/universal/src/shared/constants/FormModelFieldsets.js");var d=a("./src/main/webapp/universal/src/shared/constants/HelpLinks.js");var p=a("./src/main/webapp/universal/src/shared/utils/GoogleReCaptchaAPIAuthenticated.js");var h=a("./src/main/webapp/frontend/packages/enums/GoogleReCaptchaAlignmentType.js");var g=a("./src/main/webapp/frontend/packages/enums/GoogleReCaptchaThemeType.js");var m=a("./src/main/webapp/universal/src/shared/utils/commerce/analytics/trackProductEditor.ts");var f=a("./src/main/webapp/universal/src/shared/utils/commerce/analytics/types.ts");YUI.add("squarespace-editor-form",function(n){n.namespace("Squarespace");var r=n.Squarespace.FormModelEditor=n.Base.create("formModelEditor",n.Squarespace.ModelEditorDialog,[],{initializer:function(){var a=this.get("dialog");a.on("ready",function(){var e=a.getField("formFields");var t=a.getField("formPreview");e&&t&&e.on("change",t.syncUI,this);if(this.hasFieldset(u.CAPTCHA)){this._syncModelFieldWithPreview("captchaEnabled");this._syncModelFieldWithPreview("captchaTheme");this._syncModelFieldWithPreview("captchaAlignment");this._updateCaptchaOptionsByFieldChange()}},this)},hasFieldset:function(e){return-1!==this.get("fieldsets").indexOf(e)},_updateCaptchaOptionsByFieldChange:function(){var e=this.get("dialog");var t=e.getField("captchaEnabled");if(!t)return;t.after("dataChange",this._updateCaptchaOptionsByFieldChange);if(false===t.get("data")){e.getField("captchaTheme").hide();e.getField("captchaAlignment").hide()}else{e.getField("captchaTheme").show();e.getField("captchaAlignment").show()}},_syncModelFieldWithPreview:function(t){var e=this.get("dialog");var a=e.getField(t);if(!a)return;a.after("dataChange",function(e){this._formCopy.set(t,e.newVal)},this)},getDialogData:function(){var e=this.get("model").toJSON();var t=this._formCopy=new n.Squarespace.Models.Form(e);var a={};if(this.hasFieldset(u.BUILD)){a.formName=t.get("name");a.formFields=t.get("fields");a.formPreview=t}this.hasFieldset(u.STORAGE)&&this._setStorageBackendsData(a,t);if(this.hasFieldset(u.ADVANCED)){a=n.merge(a,t.getAttrs(["submitButtonText"]));this.hasFieldset(u.DISCLAIMER)&&(a=n.merge(a,t.getAttrs(["disclaimerMessage"])));a=n.merge(a,t.getAttrs(["submissionMessage","submissionHTML"]));var i=t.get("successRedirect");i&&(a=n.merge(a,{successRedirect:{url:i}}))}this.hasFieldset(u.CAPTCHA)&&(a=n.merge(a,t.getAttrs(["captchaEnabled","captchaTheme","captchaAlignment"])));return a},sanitizeDialogData:function(e){e=r.superclass.sanitizeDialogData.call(this,e);var t={};this.hasFieldset(u.BUILD)&&(t.name=e.formName);this.hasFieldset(u.STORAGE)&&(t.backendConnectionConfigs={emailConnect:n.merge(e.emailConnect,{backendType:l.EMAIL}),googleDocsConnect:n.merge(e.googleDocsConnect,{backendType:l.GOOGLE}),mailchimpConnect:n.merge(e.mailchimpConnect,{backendType:l.MAILCHIMP}),campaignsConnect:n.merge(e.campaignsConnect,{backendType:l.CAMPAIGNS}),zapierConnect:n.merge(e.zapierConnect,{backendType:l.ZAPIER})});if(this.hasFieldset(u.ADVANCED)){t.submissionMessage=e.submissionMessage;t.submissionHTML=e.submissionHTML;t.submitButtonText=e.submitButtonText;e.successRedirect?"string"===typeof e.successRedirect?t.successRedirect=e.successRedirect:"object"===typeof e.successRedirect&&e.successRedirect.url&&(t.successRedirect=e.successRedirect.url):t.successRedirect=""}this.hasFieldset(u.DISCLAIMER)&&(t.disclaimerMessage=e.disclaimerMessage);if(this.hasFieldset(u.CAPTCHA)){t.captchaEnabled=e.captchaEnabled;t.captchaTheme=e.captchaTheme;t.captchaAlignment=e.captchaAlignment}this._formCopy.setAttrs(t);return this._formCopy.toJSON()},_setStorageBackendsData:function(t,e){var a=e.get("connectedBackends");n.Lang.isValue(a)&&n.Array.each(a,function(e){n.Lang.isValue(e.backendId)&&this._setStorageBackendData(t,e)},this)},_setStorageBackendData:function(e,t){var a=t.backendId;var i=t.socialConfig;switch(t.backendType){case l.EMAIL:e.emailConnect={connectionState:c.CONNECTED,email:a};break;case l.GOOGLE:e.googleDocsConnect={connectionState:c.CONNECTED,username:i.profileUserName,socialConfig:i,spreadsheetName:t.config.spreadsheetName};break;case l.MAILCHIMP:var s=!!(t.config&&"true"===t.config.useSingleOptIn);e.mailchimpConnect={connectionState:c.CONNECTED,username:i.profileUserName,useSingleOptIn:s,socialConfig:i,list:a};break;case l.ZAPIER:e.zapierConnect={connectionState:c.CONNECTED,url:a};break;case l.CAMPAIGNS:e.campaignsConnect={connectionState:c.CONNECTED,listId:a};break}},_onSendRequested:function(e){if(this.hasFieldset(u.STORAGE)){var a=this.get("dialog").getData();var t=Object.keys(a).reduce(function(e,t){t.endsWith("Connect")&&e.push(a[t].connectionState);return e},[]);var i=-1!==t.indexOf(c.CONNECTED)||-1!==t.indexOf(c.PENDING);if(!i){var s=new n.Squarespace.Widgets.Alert({"strings.title":o("No Storage Configured"),"strings.message":o("Must configure a storage option before saving this form.")});s.on("confirm",function(){this.get("dialog").allowEditing()}.bind(this));return}}"productFormModelEditor"===this.name&&(this.get("model").get("id")||m.trackCreateForm(f.ProductEditor.YUI_EDITOR));r.superclass._onSendRequested.call(this,e)},_getTabConfigs:function(){var t=[];n.Array.each(this.get("fieldsets"),function(e){switch(e){case u.BUILD:t.push({tabTitle:o("Build"),fields:this._getBuildFieldConfigs()});break;case u.STORAGE:t.push({tabTitle:o("Storage"),fields:this._getStorageFieldConfigs()});break;case u.ADVANCED:t.push({tabTitle:o("Advanced"),scroll:true,fields:this._getAdvancedFieldConfigs()});break;case u.CAPTCHA:p.isCaptchaEnabled()&&t.push({tabTitle:o("Captcha"),scroll:true,fields:this._getCaptchaFieldConfigs()});break}},this);t[0].icon="/universal/images-v6/icons/icon-form-16-light.png";return t},_getBuildFieldConfigs:function(){return[{ctor:n.Squarespace.DialogFields.Text,config:{name:"formName","strings.title":o("Form Name")}},{type:"splitter",fields:[{type:"stack",name:"formBuilder",width:.5,fields:[{ctor:n.Squarespace.DialogFields.HTML,config:{name:"formBuilderTitle",content:"<strong>"+o("Manage Form Fields")+"</strong>",className:"manageFormFieldsTitle"}},{ctor:n.Squarespace.DialogFields.FormBuilder,config:{name:"formFields",minimumLength:this.get("minimumLength"),excludedFieldTypes:this.get("excludedFieldTypes")}}]},{type:"stack",name:"preview",width:.5,fields:[{ctor:n.Squarespace.DialogFields.HTML,config:{name:"formPreviewTitle",content:"<strong>"+o("Live Form Preview")+"</strong>"}},{ctor:n.Squarespace.DialogFields.FormPreview,config:{name:"formPreview"}}]}]}]},_getStorageFieldConfigs:function(){var t=[];n.Array.each(this.get("acceptedBackendTypes"),function(e){switch(e){case l.GOOGLE:t.push({ctor:n.Squarespace.DialogFields.GoogleDocsServiceConnect,config:{name:"googleDocsConnect"}});break;case l.MAILCHIMP:i.isFeatureEnabled(s.MAILCHIMP_INTEGRATION)&&t.push({ctor:n.Squarespace.DialogFields.MailChimpServiceConnect,config:{name:"mailchimpConnect"}});break;case l.EMAIL:t.push({ctor:n.Squarespace.DialogFields.EmailServiceConnect,config:{name:"emailConnect"}});break;case l.ZAPIER:i.isFeatureEnabled(s.FORMS_API)&&t.push({ctor:n.Squarespace.DialogFields.ZapierServiceConnect,config:{name:"zapierConnect",getZapsConnected:n.bind(function(){var e=this.get("model");return e.getConnBackend(l.ZAPIER).length},this)}});break;case l.CAMPAIGNS:t.push({ctor:n.Squarespace.DialogFields.CampaignsServiceConnect,config:{name:"campaignsConnect"}});break}},this);return t},_getAdvancedFieldConfigs:function(){var e=[];e.push({ctor:n.Squarespace.DialogFields.Text,config:{name:"submitButtonText",className:"thin","strings.title":o("Submit Button Label"),"strings.placeholder":o("Submit")}});if(this.hasFieldset(u.DISCLAIMER)){e.push({ctor:n.Squarespace.DialogFields.Description,config:{name:"disclaimerDescription",title:o("Disclaimer"),text:o("Displayed below the input field.")}});e.push({ctor:n.Squarespace.DialogFields.Wysiwyg,config:{name:"disclaimerMessage",editorHeight:125,classNames:"disclaimer"}})}e.push({ctor:n.Squarespace.DialogFields.Description,config:{name:"successRedirectDescription",title:o("Post-Submit Redirect"),text:o("If provided, the user will be redirected upon form submission.")}});e.push({ctor:n.Squarespace.DialogFields.CreateLink,config:{name:"successRedirect",disableNewWindow:true,condensed:true,required:false,renderTabs:{content:true,external:true,files:false}}});e.push({ctor:n.Squarespace.DialogFields.Description,config:{name:"submissionMessageDescription",title:o("Post-Submit Message"),text:o("Display this message to users after they submit your form.")}});e.push({ctor:n.Squarespace.DialogFields.Wysiwyg,config:{name:"submissionMessage",editorHeight:175,classNames:"submissionMessage"}});e.push({ctor:n.Squarespace.DialogFields.Description,config:{name:"submissionHTMLDescription",title:o("Post-Submit HTML"),text:o("HTML to be rendered in addition to the Post-Submit Message.")}});e.push({ctor:n.Squarespace.DialogFields.HtmlCode,config:{name:"submissionHTML"}});return e},_getCaptchaFieldConfigs:function(){return[{ctor:n.Squarespace.DialogFields.Description,config:{name:"captchaDescription",title:o("Google ReCaptcha"),text:o('Prevent spam and abuse by asking visitors to check I’m not a robot before submitting. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:d.GOOGLE_RECAPTCHA_SETUP})}},{ctor:n.Squarespace.DialogFields.Check,config:{name:"captchaEnabled","strings.title":o("Add Google reCaptcha")}},{ctor:n.Squarespace.DialogFields.Select,config:{name:"captchaTheme","strings.title":o("Theme"),defaultValue:g.LIGHT,className:"thin dark",numeric:true,options:[{value:g.LIGHT,label:o("Light")},{value:g.DARK,label:o("Dark")}]}},{ctor:n.Squarespace.DialogFields.Select,config:{name:"captchaAlignment","strings.title":o("Alignment"),defaultValue:h.LEFT,className:"thin dark",numeric:true,options:[{value:h.LEFT,label:o("Left")},{value:h.CENTER,label:o("Center")},{value:h.RIGHT,label:o("Right")}]}}]}},{ATTRS:{dialogConfigStrings:{value:{title:o("Form"),loadingText:o("Editing Form…")},validator:n.Squarespace.AttrValidators.isObject},fieldsets:{valueFn:function(){return[u.BUILD,u.STORAGE,u.ADVANCED,u.CAPTCHA]},validator:n.Squarespace.AttrValidators.isArray},minimumLength:{value:0,validator:n.Squarespace.AttrValidators.isNumber},excludedFieldTypes:{values:[],validator:n.Squarespace.AttrValidators.isArray},buttons:{value:[{type:"cancel",title:o("Cancel")},{type:"remove",title:o("Delete Form")},{type:"saveAndClose",title:o("Save")}],validator:n.Squarespace.AttrValidators.isArray},acceptedBackendTypes:{valueFn:function(){return n.Object.values(l)}},model:{value:null,validator:function(e){return n.instanceOf(e,n.Squarespace.Models.Form)}},dialogConfig:{getter:function(){var e=this.get("dialogConfigStrings");var t={name:"editForm",title:e.title,loadingText:e.loadingText,closeOthers:false,overlay:.7,style:"flyout",flyoutPointerDirection:"hidden",initialDataByReference:true,width:850,height:454,buttons:this.get("buttons"),tabs:this._getTabConfigs()};return t}}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-dialog-create-link","squarespace-dialog-email-service-connect","squarespace-dialog-form-builder","squarespace-dialog-form-preview","squarespace-dialog-google-docs-service-connect","squarespace-dialog-html","squarespace-dialog-mailchimp-service-connect","squarespace-dialog-text","squarespace-dialog-wysiwyg","squarespace-dialog-zapier-service-connect","squarespace-enum","squarespace-model-editor","squarespace-models-form","squarespace-ui-base","squarespace-widgets-alert"]})},"./src/main/webapp/universal/scripts-v6/editor/slide-custom-form.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/frontend/packages/enums/FormBackendConnectionType.js");var n=a("./src/main/webapp/universal/src/shared/constants/FormModelFieldsets.js");YUI.add("squarespace-editor-slide-custom-form",function(e){e.namespace("Squarespace");e.Squarespace.SlideCustomFormEditor=e.Base.create("SlideCustomFormEditor",e.Squarespace.FormModelEditor,[],{},{ATTRS:{dialogConfigStrings:{value:{title:i("Edit Form"),loadingText:i("Editing Form…")}},buttons:{value:[{type:"cancel",title:i("Cancel")},{type:"saveAndClose",title:i("Save")}]},fieldsets:{valueFn:function(){return[n.BUILD,n.STORAGE,n.ADVANCED,n.DISCLAIMER,n.CAPTCHA]}},acceptedBackendTypes:{valueFn:function(){return[s.EMAIL,s.GOOGLE,s.MAILCHIMP,s.ZAPIER]}}}})},"1.0",{requires:["base","squarespace-editor-form","squarespace-enum"]})},"./src/main/webapp/universal/scripts-v6/editor/slide-newsletter-form.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/frontend/packages/enums/FormBackendConnectionType.js");var n=a("./src/main/webapp/universal/src/shared/constants/FormModelFieldsets.js");YUI.add("squarespace-editor-slide-newsletter-form",function(e){e.namespace("Squarespace");e.Squarespace.SlideNewsletterFormEditor=e.Base.create("SlideNewsletterFormEditor",e.Squarespace.FormModelEditor,[],{},{ATTRS:{dialogConfigStrings:{value:{title:i("Edit Newsletter Signup"),loadingText:i("Editing Newsletter Signup")}},buttons:{value:[{type:"cancel",title:i("Cancel")},{type:"saveAndClose",title:i("Save")}]},fieldsets:{valueFn:function(){return[n.STORAGE,n.ADVANCED,n.DISCLAIMER]}},acceptedBackendTypes:{valueFn:function(){return[s.CAMPAIGNS,s.GOOGLE,s.MAILCHIMP]}}}})},"1.0",{requires:["base","squarespace-editor-form","squarespace-enum"]})},"./src/main/webapp/universal/scripts-v6/enum.js":function(e,t,a){YUI.add("squarespace-enum",function(e){var t=e.namespace("Squarespace");t.AccessPermissions=a("./src/main/webapp/frontend/packages/enums/AccessPermissions.js");t.AccountStates=a("./src/main/webapp/frontend/packages/enums/AccountStates.js");t.AchievementType=a("./src/main/webapp/frontend/packages/enums/AchievementType.js");t.AdvertisingProviderType=a("./src/main/webapp/frontend/packages/enums/AdvertisingProviderType.js");t.AgeTypes=a("./src/main/webapp/frontend/packages/enums/AgeTypes.js");t.AggregationGroupSortByTypes=a("./src/main/webapp/frontend/packages/enums/AggregationGroupSortByTypes.js");t.AggregationTypes=a("./src/main/webapp/frontend/packages/enums/AggregationTypes.js");t.AnnouncementBarStyle=a("./src/main/webapp/frontend/packages/enums/AnnouncementBarStyle.js");t.ApplicationSettingType=a("./src/main/webapp/frontend/packages/enums/ApplicationSettingType.js");t.AuthenticationFrameMessageType=a("./src/main/webapp/frontend/packages/enums/AuthenticationFrameMessageType.js");t.BackgroundSource=a("./src/main/webapp/frontend/packages/enums/BackgroundSource.js");t.BillingError=a("./src/main/webapp/frontend/packages/enums/BillingError.js");t.BillingProductTypes=a("./src/main/webapp/frontend/packages/enums/BillingProductTypes.js");t.BillingStatus=a("./src/main/webapp/frontend/packages/enums/BillingStatus.js");t.BillingSubscriptionStatus=a("./src/main/webapp/frontend/packages/enums/BillingSubscriptionStatus.js");t.BillingTaxType=a("./src/main/webapp/frontend/packages/enums/BillingTaxType.js");t.BlockForeignKeyFieldNames=a("./src/main/webapp/frontend/packages/enums/BlockForeignKeyFieldNames.js");t.BlockType=a("./src/main/webapp/frontend/packages/enums/BlockType.js");t.CanadianProvinces=a("./src/main/webapp/frontend/packages/enums/CanadianProvinces.js");t.CardBrands=a("./src/main/webapp/frontend/packages/enums/CardBrands.js");t.CensusDataMetric=a("./src/main/webapp/frontend/packages/enums/CensusDataMetric.js");t.CensusDataType=a("./src/main/webapp/frontend/packages/enums/CensusDataType.js");t.CensusEventType=a("./src/main/webapp/frontend/packages/enums/CensusEventType.js");t.CensusGranularity=a("./src/main/webapp/frontend/packages/enums/CensusGranularity.js");t.CertificateStatus=a("./src/main/webapp/frontend/packages/enums/CertificateStatus.js");t.ChannelMappingState=a("./src/main/webapp/frontend/packages/enums/ChannelMappingState.js");t.CollectionOrdering=a("./src/main/webapp/frontend/packages/enums/CollectionOrdering.js");t.CollectionTypes=a("./src/main/webapp/frontend/packages/enums/CollectionTypes.js");t.CommentSortTypes=a("./src/main/webapp/frontend/packages/enums/CommentSortTypes.js");t.CommentStates=a("./src/main/webapp/frontend/packages/enums/CommentStates.js");t.CommentStatuses=a("./src/main/webapp/frontend/packages/enums/CommentStatuses.js");t.CommentTargetTypes=a("./src/main/webapp/frontend/packages/enums/CommentTargetTypes.js");t.CommerceCouponType=a("./src/main/webapp/frontend/packages/enums/CommerceCouponType.js");t.CommerceDiscountType=a("./src/main/webapp/frontend/packages/enums/CommerceDiscountType.js");t.CommerceEmailTypes=a("./src/main/webapp/frontend/packages/enums/CommerceEmailTypes.js");t.Compositions=a("./src/main/webapp/frontend/packages/enums/Compositions.js");t.ConfigurationMenuItemType=a("./src/main/webapp/frontend/packages/enums/ConfigurationMenuItemType.js");t.CurrencySymbol=a("./src/main/webapp/frontend/packages/enums/CurrencySymbol.js");t.CustomerField=a("./src/main/webapp/frontend/packages/enums/CustomerField.js");t.CustomerSortDirection=a("./src/main/webapp/frontend/packages/enums/CustomerSortDirection.js");t.DeviceCategory=a("./src/main/webapp/frontend/packages/enums/DeviceCategory.js");t.DiscountCriteriaType=a("./src/main/webapp/frontend/packages/enums/DiscountCriteriaType.js");t.DiscountStatus=a("./src/main/webapp/frontend/packages/enums/DiscountStatus.js");t.DiscountTemplateType=a("./src/main/webapp/frontend/packages/enums/DiscountTemplateType.js");t.DiscountTriggerType=a("./src/main/webapp/frontend/packages/enums/DiscountTriggerType.js");t.DiscountValidationErrorType=a("./src/main/webapp/frontend/packages/enums/DiscountValidationErrorType.js");t.DNSProviderIdentifier=a("./src/main/webapp/frontend/packages/enums/DNSProviderIdentifier.js");t.DomainAvailability=a("./src/main/webapp/frontend/packages/enums/DomainAvailability.js");t.DomainNameStatus=a("./src/main/webapp/frontend/packages/enums/DomainNameStatus.js");t.DomainPlanLevel=a("./src/main/webapp/frontend/packages/enums/DomainPlanLevel.js");t.DomainPresetTemplateId=a("./src/main/webapp/frontend/packages/enums/DomainPresetTemplateId.js");t.DomainProviderId=a("./src/main/webapp/frontend/packages/enums/DomainProviderId.js");t.DomainSubscriptionState=a("./src/main/webapp/frontend/packages/enums/DomainSubscriptionState.js");t.DomainTransferStatus=a("./src/main/webapp/frontend/packages/enums/DomainTransferStatus.js");t.DomainTypes=a("./src/main/webapp/frontend/packages/enums/DomainTypes.js");t.DomainVerificationStatus=a("./src/main/webapp/frontend/packages/enums/DomainVerificationStatus.js");t.EmailTypes=a("./src/main/webapp/frontend/packages/enums/EmailTypes.js");t.EventView=a("./src/main/webapp/frontend/packages/enums/EventView.js");t.ExternalServiceProviders=a("./src/main/webapp/frontend/packages/enums/ExternalServiceProviders.js");t.ExternalServiceProvidersOnlyOneAllowed=a("./src/main/webapp/frontend/packages/enums/ExternalServiceProvidersOnlyOneAllowed.js");t.FeatureLevels=a("./src/main/webapp/frontend/packages/enums/FeatureLevels.js");t.Features=a("./src/main/webapp/frontend/packages/enums/Features.js");t.FeatureSetIdentifiers=a("./src/main/webapp/frontend/packages/enums/FeatureSetIdentifiers.js");t.Flag=a("./src/main/webapp/frontend/packages/enums/Flag.js");t.FocalPointSources=a("./src/main/webapp/frontend/packages/enums/FocalPointSources.js");t.FormType=a("./src/main/webapp/frontend/packages/enums/FormType.js");t.GettyError=a("./src/main/webapp/frontend/packages/enums/GettyError.js");t.GoogleAppsPlanType=a("./src/main/webapp/frontend/packages/enums/GoogleAppsPlanType.js");t.GoogleAppsSubscriptionState=a("./src/main/webapp/frontend/packages/enums/GoogleAppsSubscriptionState.js");t.GoogleAppsSubscriptionStatus=a("./src/main/webapp/frontend/packages/enums/GoogleAppsSubscriptionStatus.js");t.GraphicalStyles=a("./src/main/webapp/frontend/packages/enums/GraphicalStyles.js");t.GroupSizes=a("./src/main/webapp/frontend/packages/enums/GroupSizes.js");t.ImageFamilies=a("./src/main/webapp/frontend/packages/enums/ImageFamilies.js");t.ImportingSources=a("./src/main/webapp/frontend/packages/enums/ImportingSources.js");t.IndexType=a("./src/main/webapp/frontend/packages/enums/IndexType.js");t.InvoiceProvider=a("./src/main/webapp/frontend/packages/enums/InvoiceProvider.js");t.InvoiceStatuses=a("./src/main/webapp/frontend/packages/enums/InvoiceStatuses.js");t.JobStatuses=a("./src/main/webapp/frontend/packages/enums/JobStatuses.js");t.JobTypes=a("./src/main/webapp/frontend/packages/enums/JobTypes.js");t.LicensedAssetSource=a("./src/main/webapp/frontend/packages/enums/LicensedAssetSource.js");t.LinkStatusType=a("./src/main/webapp/frontend/packages/enums/LinkStatusType.js");t.MarketingCouponExpirationTypes=a("./src/main/webapp/frontend/packages/enums/MarketingCouponExpirationTypes.js");t.MeasurementStandard=a("./src/main/webapp/frontend/packages/enums/MeasurementStandard.js");t.MediaProcessingState=a("./src/main/webapp/frontend/packages/enums/MediaProcessingState.js");t.MemberAccountGuild=a("./src/main/webapp/frontend/packages/enums/MemberAccountGuild.js");t.MemberAccountStatus=a("./src/main/webapp/frontend/packages/enums/MemberAccountStatus.js");t.MemberAccountRole=a("./src/main/webapp/frontend/packages/enums/MemberAccountRole.js");t.MobileInfoBarStyle=a("./src/main/webapp/frontend/packages/enums/MobileInfoBarStyle.js");t.OrderDirection=a("./src/main/webapp/frontend/packages/enums/OrderDirection.js");t.OrderEventType=a("./src/main/webapp/frontend/packages/enums/OrderEventType.js");t.OrderFulfillmentStates=a("./src/main/webapp/frontend/packages/enums/OrderFulfillmentStates.js");t.OrderPaymentStates=a("./src/main/webapp/frontend/packages/enums/OrderPaymentStates.js");t.OrderStates=a("./src/main/webapp/frontend/packages/enums/OrderStates.js");t.Orientations=a("./src/main/webapp/frontend/packages/enums/Orientations.js");t.PageAction=a("./src/main/webapp/frontend/packages/enums/PageAction.js");t.PageFeatures=a("./src/main/webapp/frontend/packages/enums/PageFeatures.js");t.PageTypes=a("./src/main/webapp/frontend/packages/enums/PageTypes.js");t.PaymentProviderType=a("./src/main/webapp/frontend/packages/enums/PaymentProviderType.js");t.PaymentSettingsErrorType=a("./src/main/webapp/frontend/packages/enums/PaymentSettingsErrorType.js");t.PayPalCheckoutErrorTypes=a("./src/main/webapp/frontend/packages/enums/PayPalCheckoutErrorTypes.js");t.PinterestDomainVerificationState=a("./src/main/webapp/frontend/packages/enums/PinterestDomainVerificationState.js");t.PlanGenus=a("./src/main/webapp/frontend/packages/enums/PlanGenus.js");t.PlanViolationErrors=a("./src/main/webapp/frontend/packages/enums/PlanViolationErrors.js");t.PriceTaxInterpretations=a("./src/main/webapp/frontend/packages/enums/PriceTaxInterpretations.js");t.ProductLines=a("./src/main/webapp/frontend/packages/enums/ProductLines.js");t.ProductTypes=a("./src/main/webapp/frontend/packages/enums/ProductTypes.js");t.RecordType=a("./src/main/webapp/frontend/packages/enums/RecordType.js");t.ReferralMatchType=a("./src/main/webapp/frontend/packages/enums/ReferralMatchType.js");t.ReferralSearchResultStatus=a("./src/main/webapp/frontend/packages/enums/ReferralSearchResultStatus.js");t.ReferralSource=a("./src/main/webapp/frontend/packages/enums/ReferralSource.js");t.ReferralState=a("./src/main/webapp/frontend/packages/enums/ReferralState.js");t.ShippingRateTypes=a("./src/main/webapp/frontend/packages/enums/ShippingRateTypes.js");t.SliceType=a("./src/main/webapp/frontend/packages/enums/SliceType.js");t.SlideLayoutCategory=a("./src/main/webapp/frontend/packages/enums/SlideLayoutCategory.js");t.SlideLayoutStatus=a("./src/main/webapp/frontend/packages/enums/SlideLayoutStatus.js");t.SlideType=a("./src/main/webapp/frontend/packages/enums/SlideType.js");t.SocialIconAlignments=a("./src/main/webapp/frontend/packages/enums/SocialIconAlignments.js");t.SocialIconColors=a("./src/main/webapp/frontend/packages/enums/SocialIconColors.js");t.SocialIconSizes=a("./src/main/webapp/frontend/packages/enums/SocialIconSizes.js");t.SocialIconStyles=a("./src/main/webapp/frontend/packages/enums/SocialIconStyles.js");t.SocialSearchReferenceType=a("./src/main/webapp/frontend/packages/enums/SocialSearchReferenceType.js");t.SocialSearchStatus=a("./src/main/webapp/frontend/packages/enums/SocialSearchStatus.js");t.SocialServices=a("./src/main/webapp/frontend/packages/enums/SocialServices.js");t.SortOrders=a("./src/main/webapp/frontend/packages/enums/SortOrders.js");t.SSBadgeDevices=a("./src/main/webapp/frontend/packages/enums/SSBadgeDevices.js");t.SSBadgePosition=a("./src/main/webapp/frontend/packages/enums/SSBadgePosition.js");t.SSBadgeType=a("./src/main/webapp/frontend/packages/enums/SSBadgeType.js");t.SSBadgeVisibility=a("./src/main/webapp/frontend/packages/enums/SSBadgeVisibility.js");t.SslSetting=a("./src/main/webapp/frontend/packages/enums/SslSetting.js");t.StatusConstants=a("./src/main/webapp/frontend/packages/enums/StatusConstants.js");t.StoreStates=a("./src/main/webapp/frontend/packages/enums/StoreStates.js");t.SubscriptionEventRecordTypes=a("./src/main/webapp/frontend/packages/enums/SubscriptionEventRecordTypes.js");t.SubscriptionLineItemType=a("./src/main/webapp/frontend/packages/enums/SubscriptionLineItemType.js");t.SuspensionState=a("./src/main/webapp/frontend/packages/enums/SuspensionState.js");t.SystemBlogCollectionPostDisplay=a("./src/main/webapp/frontend/packages/enums/SystemBlogCollectionPostDisplay.js");t.SystemWebsiteSubjects=a("./src/main/webapp/frontend/packages/enums/SystemWebsiteSubjects.js");t.TaxCategoryTypes=a("./src/main/webapp/frontend/packages/enums/TaxCategoryTypes.js");t.TaxJurisdictionType=a("./src/main/webapp/frontend/packages/enums/TaxJurisdictionType.js");t.TaxScopes=a("./src/main/webapp/frontend/packages/enums/TaxScopes.js");t.TemplateErrorType=a("./src/main/webapp/frontend/packages/enums/TemplateErrorType.js");t.TermsAcceptanceRequirement=a("./src/main/webapp/frontend/packages/enums/TermsAcceptanceRequirement.js");t.TermTypes=a("./src/main/webapp/frontend/packages/enums/TermTypes.js");t.TransferAvailability=a("./src/main/webapp/frontend/packages/enums/TransferAvailability.js");t.TweakTypes=a("./src/main/webapp/frontend/packages/enums/TweakTypes.js");t.VideoFilterOption=a("./src/main/webapp/frontend/packages/enums/VideoFilterOption.js");t.WebsiteCompRecordType=a("./src/main/webapp/frontend/packages/enums/WebsiteCompRecordType.js");t.WebsiteContentCategory=a("./src/main/webapp/frontend/packages/enums/WebsiteContentCategory.js");t.WebsiteContentSubcategory=a("./src/main/webapp/frontend/packages/enums/WebsiteContentSubcategory.js");t.WebsiteDisambiguationType=a("./src/main/webapp/frontend/packages/enums/WebsiteDisambiguationType.js");t.WebsiteGoal=a("./src/main/webapp/frontend/packages/enums/WebsiteGoal.js");t.WebsiteRole=a("./src/main/webapp/frontend/packages/enums/WebsiteRole.js");t.WebsiteTaxonomyFilterFlag=a("./src/main/webapp/frontend/packages/enums/WebsiteTaxonomyFilterFlag.js");t.WebsiteType=a("./src/main/webapp/frontend/packages/enums/WebsiteType.js");t.WorkflowStates=a("./src/main/webapp/frontend/packages/enums/WorkflowStates.js")},"1.0",{requires:[]})},"./src/main/webapp/universal/scripts-v6/escaping-utils.js":function(e,t){YUI.add("squarespace-escaping-utils",function(e){e.namespace("Squarespace");e.Squarespace.Escaping={escapeForHtml:function(e){if(!e)return e;return e.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;")},escapeForHtmlTag:function(e){if(!e)return e;return e.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/`/g,"&#x60;")}}},"1.0",{requires:[]})},"./src/main/webapp/universal/scripts-v6/escmanager.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/apps/App/shared/actions/FrameActions.js");YUI.add("squarespace-escmanager",function(r){r.Squarespace.STANDARD_CONTROL_CLASSES=[".standard-dialog-wrapper",".yui3-panel-type-tooltip",".sqsp-tooltip",".tooltip",".inline-field-title",".workflow-flyout",".page-map",".map-widget",".dialog-element",".error-message-wrapper",".squarespace-block",".sqs-block",".buttons a",".sqs-shopping-cart",".panel-menu-item",".flyout-variant-edit",".image-focal-point","a.return-button","a#deactivated-account-link",".site-chooser-glyph",".lightbox-inner",".sqs-configuration-menu .site-title-text",".sqs-configuration-menu .user-id",".sqs-add-to-cart-button",".additional-fields",".rte",".sqs-scroll-ac-item",".sqs-layout-insert-block-menu",".sqs-widgets-confirmation",".sqs-widgets-flow-dialog",".sqs-password-prompt",".tag-bubble",".sqs-fullscreen-overlay-imagepicker",".u-ActionButtons-container",".ReactModal__Overlay",".escmanager-ignore",".CCLinkEditorModal",".CCPageDropDown",".sqs-dialog-field:not(.sqs-dialog-layout-wrapper)"];r.namespace("SQS.DDWrappers").STANDARD_CONTROL_CLASSES=r.Squarespace.STANDARD_CONTROL_CLASSES;r.Squarespace.EscManager={closeTargets:[],ignores:0,attached:[],attach:function(e){e=e||r.one(r.config.win);var t=e.generateID();if(-1!==this.attached.indexOf(t))return;var a=r.Squarespace.EscManager;r.Squarespace.Utils.isInDamaskFrame()&&(a=r.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.EscManager"));var i=e;i.on("keyup",a.onKeyUp,a);i.on("click",a.onBodyClick,a);i.on("mousedown",a._onBodyDown,a);i.on("mouseup",a._onBodyUp,a);this.attached.push(t);this._disabled=false},destroy:function(){this.detach();this._bodyDownTarget=null;this._bodyUpTarget=null},detach:function(e){e=e||r.one(r.config.win);e.detachAll()},onShiftEsc:function(){r.Squarespace.Utils.logout()},addIgnore:function(){this.ignores++},disable:function(){this._disabled=true},enable:function(){this._disabled=false},onEsc:function(){if(this.ignores){this.ignores--;return}if(r.config.win.Static&&Static.IN_BACKEND)r.one("html").hasClass("sqs-guide-open")?window.CONFIG_PANEL.closeGuide():i.toggleExpanded();else if(window.SQUARESPACE_LOGIN&&window.SQUARESPACE_LOGIN.getAccount())this._redirectToConfig();else{var e=r.Object.getValue(r.config.win,"Static.SQUARESPACE_CONTEXT.websiteSettings.useEscapeKeyToLogin".split("."));if(!e)return;window.SQUARESPACE_LOGIN&&window.SQUARESPACE_LOGIN.params&&(window.SQUARESPACE_LOGIN.params.disableCreateAccount=true);r.Squarespace.Signup&&r.Squarespace.Signup.signupDialog&&r.Squarespace.Signup.signupDialog.isVisible()?r.Squarespace.Signup.signupDialog.cancel():this._redirectToConfig()}},addTarget:function(e){this.closeTargets.push(e)},removeTarget:function(e){var t=this.closeTargets.indexOf(e);-1!==t&&this.closeTargets.splice(t,1)},onKeyUp:function(e){if(27===e.keyCode&&!this._disabled){e.halt();if(this.closeTargets.length>0){var t=this.closeTargets.pop();this._closeTarget(t,e)}else e.shiftKey?r.later(10,this,this.onShiftEsc,e):r.later(10,this,this.onEsc,e)}},_redirectToConfig:function(){var e=r.config.win.location;var t="https://"+Static.SQUARESPACE_CONTEXT.website.identifier+"."+Static.SQUARESPACE_CONTEXT.appDomain+"/config/?frameUrl="+e.pathname+e.search;r.config.win.location=t},_closeTarget:function(t,e){r.Lang.isFunction(t.close)?t.close(e,function(e){false===e&&this.closeTargets.push(t)}.bind(this)):r.Lang.isFunction(t.cancel)?t.cancel(e):!!r.Lang.isFunction(t.hide)&&t.hide(e)},_onBodyDown:function(e){this._bodyDownTarget=e.target},_onBodyUp:function(e){this._bodyUpTarget=e.target},_didMouseDownMouseUpMatch:function(){var e=this._bodyDownTarget===this._bodyUpTarget;this._bodyDownTarget=null;this._bodyUpTarget=null;return e},onBodyClick:function(e){if(this.closeTargets&&this.closeTargets.length>0){var t=this.closeTargets[this.closeTargets.length-1];if(!this._didMouseDownMouseUpMatch())return;if(t.ignoreBodyClicks)return;var a=e.clientX;var i=e.clientY;var s=e.target.get("winWidth");var n=e.target.get("winHeight");if(a<0||a>s||i<0||i>n)return;if(t.activeFlyout){if(!e.target.ancestor(t.activeFlyout.constraintClasses,true)){t.activeFlyout.field.closeFlyout();t.activeFlyout=null;r.fire("target-closed",{target:t})}}else if(!e.target.ancestor(r.Squarespace.STANDARD_CONTROL_CLASSES.join(", "),true)){r.fire("target-closed",{target:t});e.halt();this.closeTargets.pop();this._closeTarget(t,e)}}}};"undefined"!==typeof window&&(window.ESC_MANAGER?r.Squarespace.EscManager=window.ESC_MANAGER:window.ESC_MANAGER=r.Squarespace.EscManager)},"1.0",{requires:["event","node","squarespace-damask-context-globals","squarespace-util"]})},"./src/main/webapp/universal/scripts-v6/event-dbltap.js":function(e,t){YUI.add("squarespace-event-dbltap",function(i){i.Event.define("dbltap",{on:function(e,t,a){this._clear(t);t._handle=e.on("tap",function(e){t._timer&&t._timer.cancel();if(2===++t._counter){this._clear(t);a.fire(e)}else t._timer=i.later(300,this,this._clear,[t])},null,this)},detach:function(e,t,a){t._handle.detach();t._timer&&t._timer.cancel()},_clear:function(e){e._counter=0;e._timer=null}})},"1.0",{requires:["event","event-synthetic","event-tap"]})},"./src/main/webapp/universal/scripts-v6/events-collection-calendar.js":function(e,t,a){var r=a("./common/temp/node_modules/moment/moment.js");YUI.add("squarespace-events-collection-calendar",function(i){var e=i.namespace("Squarespace").EventsCollectionCalendar=i.Base.create("eventsCollectionCalendar",i.Squarespace.SquarespaceCalendar,[],{initializer:function(){this.set("_history",new i.History);this._addHistory()},destructor:function(){this._navClickEvent.detach();this._historyChangeEvent.detach()},bindUI:function(){e.superclass.bindUI.call(this);this._navClickEvent=this.get("contentBox").delegate("click",this._addHistory,".yui3-calendarnav-prevmonth, .yui3-calendarnav-nextmonth",this);this._historyChangeEvent=i.on("history:change",function(e){e.src===i.HistoryHTML5.SRC_POPSTATE&&e.newVal.month&&this.set("date",e.newVal.month)},this)},_addHistory:function(){var e=this.get("date");var t=this._buildQueryStringForHistoryUrl(e);var a=i.config.win.location.pathname+t;this.get("_history").addValue("month",e,{url:a})},_buildQueryStringForHistoryUrl:function(e){var t=r(e).locale("en").format("MM-YYYY");var a=this.get("category");var i=this.get("tag");var s=this.get("author");var n="?view=calendar&month="+t+(a?"&category="+a:"")+(i?"&tag="+i:"")+(s?"&author="+s:"");return n},_preventSelectionStart:null},{ATTRS:{}})},"1.0",{requires:["base","history","node","squarespace-calendar-core-renderer","squarespace-util"]})},"./src/main/webapp/universal/scripts-v6/events-collection.js":function(e,t,a){var l=a("./src/main/webapp/universal/src/shared/utils/shiftForWebsiteTimezoneDisplay.js");var c=a("./common/temp/node_modules/moment/moment.js");YUI.add("squarespace-events-collection",function(o){o.namespace("Squarespace.EventsCollection").ListViewPlugin=o.Base.create("eventsCollectionListViewPlugin",o.Plugin.Base,[],{initializer:function(){this.set("thumbnails",this.get("host").all(".eventlist-column-thumbnail img[data-src]"));this.get("thumbnails").each(function(e){e.plug(o.Squarespace.Loader2,{load:true,mode:"fill"})});this._syncUI();this._bindUI()},destructor:function(){this._resizeEvent&&this._resizeEvent.detach();this._tweakChangeEvent&&this._tweakChangeEvent.detach();this._tweakResetEvent&&this._tweakResetEvent.detach()},_bindUI:function(){this._resizeEvent=o.on("windowresize",function(){this._syncUI()},o.config.win,this);this._bindTweakEvents()},_syncUI:function(){this.get("thumbnails").each(function(e){e.fire("refresh")})},_bindTweakEvents:function(){this._tweakChangeEvent=o.Global.on("tweak:change",function(e){var t=e.getName();"event-thumbnails"!==t&&"event-thumbnail-size"!==t&&"event-list-compact-view"!==t&&"event-show-past-events"!==t||this._syncUI()},this);this._tweakResetEvent=o.Global.on("tweak:reset",function(e){this._syncUI()},this)}},{NS:"eventsCollection"});o.Squarespace.EventsCollection.initializeListView=function(e){e.plug(o.Squarespace.EventsCollection.ListViewPlugin)};o.Squarespace.EventsCollection.initializeCalendarView=function(e){var t=o.QueryString.parse(o.config.win.location.search.substring(1));var a;if(t.month){a=t.month;var i=a.substring(0,2);var s=o.config.win.parseInt(i,10);var n=!o.config.win.isNaN(s);var r=n?"MM-YYYY":"MMMM-YYYY";a=c(a,r).toDate()}else a=l(new Date);new o.Squarespace.EventsCollectionCalendar({contentBox:e,collectionId:e.getAttribute("data-collection-id"),date:a,category:t.category||"",tag:t.tag||"",author:t.author||"",render:true}).plug(o.Squarespace.SquarespaceCalendarRenderer)};o.config.win.Squarespace.onInitialize(o,function(){o.one(".sqs-events-collection-list")&&o.all(".sqs-events-collection-list").each(o.Squarespace.EventsCollection.initializeListView);o.one(".sqs-events-collection-calendar")&&o.all(".sqs-events-collection-calendar").each(o.Squarespace.EventsCollection.initializeCalendarView)});o.config.win.Squarespace.onDestroy(o,function(){o.one(".sqs-events-collection-list")&&o.all(".sqs-events-collection-list").each(function(e){e.unplug(o.Squarespace.EventsCollection.ListViewPlugin)});o.one(".sqs-events-collection-calendar")&&o.all(".sqs-events-collection-calendar").each(function(e){var t=o.Widget.getByNode(e);if(!t){false;return}t.destroy()})});o.namespace("Squarespace").EventCollectionCalendar=o.Base.create("eventCollectionCalendar",o.Widget,[],{render:function(){new o.Squarespace.EventsCollectionCalendar({contentBox:this.get("contentBox"),collectionId:o.config.win.Static.SQUARESPACE_CONTEXT.collectionId,render:true}).plug(o.Squarespace.SquarespaceCalendarRenderer)}},{ATTRS:{}})},"1.0",{requires:["base","node","squarespace-calendar-core-renderer","squarespace-events-collection-calendar","squarespace-image-loader"]})},"./src/main/webapp/universal/scripts-v6/existing-content-link-tab.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-existing-content-link-tab",function(s){s.namespace("Squarespace.Views");var t=s.Squarespace.Views.ExistingContentLinkTab=s.Base.create("ExistingContentLinkTab",s.Squarespace.View,[],{template:"existing-content-link-tab.html",initializer:function(e){t.superclass.initializer.apply(this,arguments);this._contentOptions=new s.Squarespace.DialogFields.ContentSelector({data:this.get("selectedContent")});this.get("disableNewWindow")||(this._newWindowField=new s.Squarespace.DialogFields.Check({name:"newWindow","strings.title":i("Open in New Window"),data:this.get("newWindow")}))},render:function(){t.superclass.render.apply(this,arguments);var e=this.get("container");this._contentOptions.render(e.one(".content-options"));this.get("disableNewWindow")||this._newWindowField.render(e.one(".existing-content-link-tab"));this.bindUI()},bindUI:function(){this._contentOptions.on("dataChange",function(e){this.set("selectedContent",e.newVal);this._dataChanged()},this);this.get("disableNewWindow")||this._newWindowField.after("dataChange",function(e){this.set("newWindow",e.newVal);this._dataChanged(true)},this)},reset:function(){this.set("selectedContent",null);this._contentOptions.clearSelected()},_dataChanged:function(e){var t=this.get("onDataChange");if(s.Lang.isFunction(t)){var a=this.get("selectedContent");var i=this.get("newWindow");t(a,i,e)}}},{ATTRS:{onDataChange:{value:null},selectedContent:{value:null},disableNewWindow:{value:false},newWindow:{value:false}}})},"1.0",{requires:["base","squarespace-dialog-check","squarespace-dialog-content-selector","squarespace-dialog-html","squarespace-dialog-text","squarespace-existing-content-link-tab-template","squarespace-models-template-navigation-list","squarespace-ss-widget","squarespace-ui-base","squarespace-util-authenticated","squarespace-view"]})},"./src/main/webapp/universal/scripts-v6/external-image-picker.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-external-image-picker",function(o){var t=o.namespace("Squarespace.Widgets").ExternalImagePicker=o.Base.create("externalImagePicker",o.Squarespace.SSWidget,[o.WidgetParent],{initializer:function(e){if(!e.scrapeUrl)throw new Error(this.name+": A scrapeUrl is required in the initialization config.")},renderUI:function(){t.superclass.renderUI.call(this);this._imagePicker=new o.Squarespace.Widgets.ImagePicker({hideOnSelect:this.get("hideOnSelect"),"strings.noImages":i("No large images available at that URL.")});this.after(this.get("id")+"|hideOnSelectChange",function(e){this._imagePicker.set("hideOnSelect",e.newVal)},this);this.add(this._imagePicker)},bindUI:function(){t.superclass.bindUI.call(this);var e=this.get("id");this._imagePicker.after(e+"|selectedImageURLChange",function(e){this._set("selectedImageURL",e.newVal)},this);this._imagePicker.after(e+"|cancel",function(e){this.fire("cancel")},this);this.on(e+"|visibleChange",this._updateVisibility,this)},syncUI:function(){t.superclass.syncUI.call(this);this._scrapeUrl()},_scrapeUrl:function(){this._imagePicker.set("dataState",this._imagePicker.getProperty("DATA_STATES").LOADING);o.Data.post({url:"/api/scrape/LocateInterestingTags",data:{url:this.get("scrapeUrl")},success:function(e){this._showLargeImages(e.images)},failure:function(e){var t=this._imagePicker.getProperty("DATA_STATES").LOAD_FAILED;this._imagePicker.set("dataState",t)}},this)},_showLargeImages:function(e){if(e&&0===e.length){this._imagePicker.setLoadedState();return}var t=this.get("id");var s=new o.Squarespace.AsyncTaskSynchronizer({completionCallback:function(e){this._imagePicker.setLoadedState()},callbackContext:this});var n=this.get("minimumImageDimensions"),r=[];o.Array.each(e,function(a){var i=new o.Squarespace.Image({src:a,loadOnSrcChange:false});i.after(t+"|loadCompleteChange",function(e){if(i.get("loadFailed"))return;if(i.get("width")>=n.width&&i.get("height")>=n.height){var t=this._imagePicker.get("imageURLs");t.push(a);this._imagePicker.set("imageURLs",t)}},this);s.add(i,"loadCompleteChange");r.push(i)},this);o.Array.each(r,function(e){e.load()},this)},_updateVisibility:function(e){if(e.silent||e.newVal===e.prevVal)return;e.preventDefault();this._imagePicker.after(this.get("id")+"|visibleChange",function(e){this.set("visible",e.newVal,{silent:true})},this);e.newVal?this._imagePicker.show():this._imagePicker.hide()},show:function(){t.superclass.show.call(this);this.set("visible",true)},hide:function(){t.superclass.hide.call(this);this.set("visible",false)}},{CSS_PREFIX:"sqs-external-image-picker",ATTRS:{visible:{value:false},scrapeUrl:{value:"",writeOnce:"initOnly"},minimumImageDimensions:{writeOnce:"initOnly",value:{height:150,width:150}},selectedImageURL:{value:null,readOnly:true},hideOnSelect:{value:true}}})},"1.0",{requires:["base","squarespace-async-task-synchronizer","squarespace-image","squarespace-image-picker","squarespace-ss-widget","squarespace-ui-base"]})},"./src/main/webapp/universal/scripts-v6/external-link-tab.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-external-link-tab",function(a){var t=a.namespace("Squarespace.Views").ExternalLinkTab=a.Base.create("ExternalLinkTab",a.Squarespace.View,[],{template:"external-link-tab.html",initializer:function(e){t.superclass.initializer.apply(this,arguments);this._protocolRegex=/(?:^#)|(?:^\.{0,2}\/)|(?:^mailto:)|^[a-z]+:\/\//;this._defaultProtocol="http://";this._initialLinkUrl=this.get("linkUrl");this._input=new a.Squarespace.DialogFields.Text({data:"#"==this.get("linkUrl")?null:this.get("linkUrl"),"strings.placeholder":i("http://…")});this.get("disableNewWindow")||(this._newWindowField=new a.Squarespace.DialogFields.Check({name:"newWindow","strings.title":i("Open in New Window"),data:this.get("newWindow"),className:this.get("className")}))},destructor:function(){this._newWindowField&&this._newWindowField.destroy()},render:function(){t.superclass.render.apply(this,arguments);var e=this.get("container");this._input.render(e.one(".link"));this.get("disableNewWindow")||this._newWindowField.render(e.one(".external-link-tab"));this.bindUI()},bindUI:function(){var e=this._input.get("contentBox").one("input");e.on("valuechange",this._inputChange,this);e.on("key",function(e){this._dataChanged(true);e.halt()},"down:13",this);this.get("disableNewWindow")||this._newWindowField.after("dataChange",function(e){this.set("newWindow",e.newVal);this._dataChanged()},this);this.get("container").one(".visit").on("click",this._visit,this)},reset:function(){this.set("linkUrl","");this.set("newWindow",false);this.get("container").one('input[type="text"]').set("value","")},_inputChange:function(){var e=this._linkTrim(this._input.get("contentBox").one("input").get("value"));e&&!this._protocolRegex.test(e)&&-1===e.indexOf(":")&&(e=this._defaultProtocol+e);this.set("linkUrl",e);this._dataChanged()},_visit:function(){var e=this._input.get("contentBox").one("input").get("value");if(e){this._protocolRegex.test(e)||(e=this._defaultProtocol+e);window.open(e,"visitLink")}},_dataChanged:function(e){var t=this.get("onDataChange");a.Lang.isFunction(t)&&t(this.get("linkUrl"),this.get("newWindow"),e)},_linkTrim:function(e){var t=/(?:^[^!-~]+)|(?:\s+$)/g;return(e||"").replace(t,"")}},{ATTRS:{disableNewWindow:{value:false},linkUrl:{value:null},newWindow:{value:false},externalServiceProviderType:{value:null},onDataChange:{value:null}}})},"1.0",{requires:["base","squarespace-dialog-check","squarespace-dialog-text","squarespace-external-link-tab-template","squarespace-view"]})},"./src/main/webapp/universal/scripts-v6/factory-utils.js":function(e,t){YUI.add("squarespace-factory-utils",function(o){o.namespace("Squarespace");o.Squarespace.FactoryUtils={createEnumToClassFactory:function(e,s,n,r){var i={};var t=o.Object.values(e);o.Array.reduce(t,i,function(e,t){var a;var i=o.Object.some(s,function(e){if(e[n]===t){a=e;return true}});i?e[t]=a:o.Lang.isValue(r)&&(e[t]=s[r]);return e});return{create:function(e,t){var a=i[e];if(!o.Lang.isValue(a))throw new Error("FactoryUtils: Could not find ctor for enumValue "+e+".");return new a(t||{})}}}}},"1.0",{requires:[]})},"./src/main/webapp/universal/scripts-v6/file-manager-tab.js":function(e,t,a){var r=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-file-manager-tab",function(i){var s=r("Add a file");var a=r("Uploading file…");var n=r("Uploaded ");var t=i.namespace("Squarespace.Views").FileManagerTab=i.Base.create("FileManagerTab",i.Squarespace.View,[],{template:"file-manager-tab.html",initializer:function(e){t.superclass.initializer.apply(this,arguments);this._options=new i.Squarespace.DialogFields.MultiOption({data:this.get("selectedFile")?"existing":"new",options:[{value:"new",title:r("New File"),icon:"new"},{value:"existing",title:r("Existing File"),icon:"existing"}]});this._frames=new i.Squarespace.DialogFields.MultiFrame({data:this.get("selectedFile")?"existing":"new",frames:[{name:"new",fields:[]},{name:"existing",fields:[{ctor:i.Squarespace.DialogFields.FileManager,config:{name:"selectFile",data:this.get("selectedFile")}}]}]});this._uploader=new i.Squarespace.Uploader({process:false,autoUpload:true,uploadURL:"/api/uploads/files"});this._spinnerEl=i.Node.create('<div class="spinner"></div>');this.get("disableNewWindow")||(this._newWindowField=new i.Squarespace.DialogFields.Check({name:"newWindow","strings.title":r("Open in New Window"),data:this.get("newWindow")}))},render:function(){t.superclass.render.apply(this,arguments);var e=this.get("container");this._options.render(e.one(".options"));this._frames.render(e.one(".frames"));this._frames.get("contentBox").all(".frame").each(function(e){if("new"===e.getAttribute("data-name")){this._uploader.set("dragAndDropArea",e);this._uploader.render(e);var t=this._uploader.get("contentBox");this._uploaderIcon=t.one(".icon");this._uploaderText=t.one(".text");this._spinnerEl.hide();this._uploaderIcon.append(this._spinnerEl)}},this);this.get("disableNewWindow")||this._newWindowField.render(e.one(".file-manager-tab"));this.bindUI()},bindUI:function(){this._options.on("dataChange",function(e){this._frames.switchFrames(e.newVal);if("existing"===e.newVal){var t=this._frames.get("contentBox");t.one(".search input").focus();t.set("scrollLeft",0)}},this);this._frames.getField("selectFile").on("dataChange",function(e){this.set("selectedFile",e.newVal);this._dataChanged()},this);this._uploader.set("processFile",i.bind(function(e){if(e.invalid){var t=e.invalid[0];new i.Squarespace.Widgets.Alert({"strings.title":t.title,"strings.message":t.message})}else{this._uploaderIcon.addClass("loading");this._uploaderText.setContent(a);this._spinner=new i.Squarespace.Spinner({color:"dark",size:"large",render:this._spinnerEl});this._spinnerEl.show();e.postData={contentType:"binary",recordType:i.Squarespace.RecordType.ATTACHMENT,useFilenameAsUrlId:"true"}}},this));this._uploader.set("fileComplete",i.bind(function(e,t){var a=t.media[0];this.set("selectedFile",a.urlId);this._spinnerEl.anim({opacity:0},{duration:1.25,start:function(){this._uploaderText.setContent(n+i.Escape.html(t.media[0].filename))},end:function(){this._spinnerEl.hide();this._dataChanged();new i.Squarespace.Widgets.Information({"strings.title":r("File Uploaded"),"strings.message":r("Your file has been successfully uploaded.")});i.later(1e3,this,function(){this._uploaderIcon.removeClass("loading");this._uploaderText.setContent(s);var e=this._frames.getField("selectFile");e.set("data",a.urlId,{silent:true});e.updateFullList();this._options.selectOption("existing")})},context:this}).run()},this));this.get("disableNewWindow")||this._newWindowField.after("dataChange",function(e){this.set("newWindow",e.newVal);this._dataChanged()},this)},reset:function(){this.set("selectedFile",null);this._options.selectOption("new");this._frames.set("data",null);this.set("newWindow",false);this._frames.get("contentBox").all(".attachment").removeClass("selected")},_dataChanged:function(){var e=this.get("onDataChange");if(i.Lang.isFunction(e)){var t=this.get("selectedFile");var a=this.get("newWindow");e(t,a)}}},{ATTRS:{selectedFile:{value:null},onDataChange:{value:null},disableNewWindow:{value:false},newWindow:{value:false}}})},"1.0",{requires:["base","squarespace-dialog-check","squarespace-dialog-file-manager","squarespace-dialog-html","squarespace-dialog-multi-frame","squarespace-dialog-multi-option","squarespace-dialog-text","squarespace-file-manager-tab-template","squarespace-spinner","squarespace-ui-base","squarespace-uploader","squarespace-view","squarespace-widgets-alert","squarespace-widgets-information"]})},"./src/main/webapp/universal/scripts-v6/fluent-confirmation.js":function(e,t){YUI.add("squarespace-fluent-confirmation",function(r){var e=r.namespace("Squarespace.Fluent");var o=function(e,t,a,i){e.on("confirm",r.bind.apply(this,[t,this].concat(i)));e.on("reject",r.bind(a,this,{cancel:false}));e.on("cancel",r.bind(a,this,{cancel:true}))};var i=function(i,s,n){return new r.Promise(function(e,t){s=r.Lang.isObject(s)&&!r.Lang.isArray(s)?s:{};var a=new i(s);o(a,e,t,n)})};var t=function(a){return function(t){return function(){var e=Array.prototype.slice.call(arguments,0);return i(a,t,e)}}};var a=function(a){return function(e,t){t=t?[t]:[];return i(a,e,t)}};e.Confirm=a(r.Squarespace.Widgets.Confirmation);e.Alert=a(r.Squarespace.Widgets.Alert);e.Inform=a(r.Squarespace.Widgets.Information);e.DataConfirm=a(r.Squarespace.Widgets.DataConfirmation);e.Confirmation=t(r.Squarespace.Widgets.Confirmation);e.Alerting=t(r.Squarespace.Widgets.Alert);e.Information=t(r.Squarespace.Widgets.Information);e.DataConfirmation=t(r.Squarespace.Widgets.DataConfirmation);e.TYPE=r.Squarespace.Widgets.Confirmation.TYPE;e.ANCHOR=r.Squarespace.Widgets.Confirmation.ANCHOR},"1.0",{requires:["promise","squarespace-ui-base","squarespace-widgets-alert","squarespace-widgets-confirmation","squarespace-widgets-data-confirmation","squarespace-widgets-information"]})},"./src/main/webapp/universal/scripts-v6/flyout-link-edit.js":function(e,t,a){var n=a("./common/temp/node_modules/react-dom/index.js");var r=a("./common/temp/node_modules/react/index.js");var i=a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts");var o=a("./src/main/webapp/frontend/packages/enums/Flag.js");var l=a("./src/main/webapp/universal/src/shared/constants/LayoutEngineClassnames.js");var c=a("./src/main/webapp/universal/src/shared/components/fields/TextEditor/components/LinkPreview.jsx");var u=a("./src/main/webapp/universal/src/shared/components/fields/TextEditor/components/LinkEditor/LinkEditorPopOver.js");var d=a("./src/main/webapp/universal/src/shared/components/fields/TextEditor/components/LinkEditor/getAnchor.js");YUI.add("squarespace-flyout-link-edit",function(s){s.namespace("Squarespace.Flyout");s.Squarespace.Flyout.LinkEdit=s.Base.create("LinkEdit",s.Base,[],{initializer:function(){this.editorContainer=s.Node.create("<div></div>");this.previewContainer=s.Node.create("<div></div>");this.previewContainer.on("mouseup",function(e){e.stopPropagation()});var e=s.one(s.config.doc.body);e.append(this.editorContainer);e.append(this.previewContainer);this.publish("updateLink");this.publish("removeLink");this.publish("close")},destructor:function(e){this.close();n.unmountComponentAtNode(this.editorContainer.getDOMNode());n.unmountComponentAtNode(this.previewContainer.getDOMNode());this.editorContainer.remove(true);this.previewContainer.remove(true);this.editorContainer=null;this.previewContainer=null},render:function(){this.renderEditor();this.renderPreview()},renderEditor:function(){var e=this.get("editorSelectionCoords");var t=this.get("toolbarOffset");var a={x:0,y:t};e&&(a={x:e.x,y:e.y+t});if(this.get("cursorAtLink")){var i=d(this.get("getSelection")());i&&(a={x:i.left,y:i.bottom+t})}n.render(r.createElement(u,{key:this.get("isEditorOpen"),isOpen:this.get("isEditorOpen"),cursorAtLink:this.get("cursorAtLink"),canEditTextContent:this.get("canEditTextContent"),className:this.get("classNames"),modalClassName:this.get("classNames"),pageDropdownClassName:this.get("classNames"),value:{url:this.get("linkUrl"),newWindow:this.get("newWindow"),name:this.get("textContent")},onChange:this.updateLink.bind(this),onRequestClose:this.close.bind(this),initialPosition:a}),this.editorContainer.getDOMNode())},renderPreview:function(){var e=this.get("getSelection");var t=c.getAnchor(e())||{left:0,top:0};var a={left:t.left,top:t.top+this.get("toolbarOffset")};n.render(r.createElement(c,{key:this.get("isPreviewOpen")+"-"+this.get("linkUrl"),isOpen:this.get("isPreviewOpen"),getSelection:e,anchor:a,link:{href:this.get("linkUrl"),target:this.get("newWindow")?"_blank":null},onRemoveLink:this.removeLink.bind(this),onEditLink:this.openEditorFromPreview.bind(this,a),className:this.get("classNames")}),this.previewContainer.getDOMNode())},openEditorFromPreview:function(e){this.openEditor(this.get("linkUrl"),this.get("newWindow"),this.get("linkId"),e)},openEditor:function(e,t,a,i){this.get("isEditorOpen")||this.get("isPreviewOpen")||s.Squarespace.EscManager.addTarget(this);this.setAttrs({anchor:i||this.get("anchor"),isEditorOpen:true,isPreviewOpen:false,linkUrl:e||"",linkId:a||"",newWindow:s.Lang.isBoolean(t)?t:this.get("newWindow")});this.render()},openPreview:function(e,t,a){this.get("isEditorOpen")||this.get("isPreviewOpen")||s.Squarespace.EscManager.addTarget(this);this.setAttrs({isEditorOpen:false,isPreviewOpen:true,linkUrl:e||"",linkId:a||"",newWindow:s.Lang.isBoolean(t)?t:this.get("newWindow")});this.render()},close:function(){(this.get("isEditorOpen")||this.get("isPreviewOpen"))&&s.Squarespace.EscManager.removeTarget(this);this.setAttrs({isEditorOpen:false,isPreviewOpen:false,forceUpdate:false});this.render();this.fire("close")},updateLink:function(e){if(this.get("forceUpdate")||e.url!==this.get("linkUrl")||e.newWindow!==this.get("newWindow")||e.name!==this.get("textContent")){this.setAttrs({linkUrl:e.url,newWindow:e.newWindow,textContent:e.name});this.fire("updateLink",this.getAttrs(["linkUrl","newWindow","textContent"]))}},removeLink:function(){this.setAttrs({linkUrl:null});this.fire("removeLink");this.close()}},{ATTRS:{anchor:{value:null,setter:function(e){if(e&&e.getDOMNode)return e.getDOMNode();return e},getter:function(e){if(e&&e.nodeType)return e;return e||"mousepointer"}},canEditTextContent:{value:true},disableNewWindow:{value:false},linkId:{value:""},linkIndex:{value:""},linkUrl:{value:"#"},textContent:{value:""},newWindow:{value:true},isEditorOpen:{value:false},isPreviewOpen:{value:false},forceUpdate:{value:false},getSelection:{value:function(){return s.config.win.getSelection()}},toolbarOffset:{value:i.isFeatureEnabled(o.NEW_STACKED_INDEX)?55:0,valueFn:function(){return this.get("toolbarOffsetOverride")}},toolbarOffsetOverride:{value:void 0},classNames:{value:l.NONINTERACTIVE_CLASSNAME}}})},"1.0",{requires:["base","squarespace-escmanager"]})},"./src/main/webapp/universal/scripts-v6/follow-button.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/universal/src/shared/utils/formatting/substituteString.js");YUI.add("squarespace-follow-button",function(a){a.namespace("Squarespace.Widgets").FollowButton=a.Base.create("followButton",a.Widget,[],{renderUI:function(){this.get("contentBox").setContent(s('<a href="https://twitter.com/{username}" class="twitter-follow-button" data-show-count="false">'+i("Follow @{username}")+"</a>",{username:this.get("username")}))},syncUI:function(){var e=function(){false};var t=function(){this.show()};a.Get.script("//platform.twitter.com/widgets.js",{onSuccess:t,onFailure:e,onTimeout:e,timeout:1e4,context:this,win:a.config.win})}},{ATTRS:{username:{value:""},visible:{value:false}},CSS_PREFIX:"sqs-follow-button"})},"1.0",{requires:["base","widget"]})},"./src/main/webapp/universal/scripts-v6/follow-buttons.js":function(e,t){YUI.add("squarespace-follow-buttons",function(i){i.namespace("Squarespace");i.Squarespace.FollowButtonUtils=function(){var a=function(e){var t=e.one(".sqs-follow-button");if(t){var a=i.Widget.getByNode(t);a&&a.destroy()}};var t=function(e){a(e);var t=e.getAttribute("data-username");t&&t.length&&new i.Squarespace.Widgets.FollowButton({username:t}).render(e)};return{renderAll:function(){i.all(".squarespace-follow-button").each(function(e){t(e)})}}}();i.on("domready",function(){i.Squarespace.FollowButtonUtils.renderAll()})},"1.0",{requires:["squarespace-follow-button"]})},"./src/main/webapp/universal/scripts-v6/form-builder-field-editor.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/universal/src/shared/constants/HelpLinks.js");var n=a("./src/main/webapp/universal/src/shared/constants/FormBuilderFieldNames.js");YUI.add("squarespace-form-builder-field-editor",function(l){var t={MAX_CHARACTER_LIMIT:1e5};var c={description:{ctor:l.Squarespace.DialogFields.TextArea,config:{name:"description","strings.description":i("A description / instructions for this field."),"strings.placeholder":i("Description")}},required:{ctor:l.Squarespace.DialogFields.Check,config:{name:"required","strings.title":i("Required")}},placeholder:{ctor:l.Squarespace.DialogFields.Text,config:{name:"placeholder",className:"thin","strings.placeholder":i("Placeholder text")}},maxLength:{ctor:l.Squarespace.DialogFields.NumericText,config:{name:"maxLength",className:"thin","strings.title":i("Character Limit (optional)"),"strings.validationFailMessage":i("Please enter a number between 1 and {max}",{max:t.MAX_CHARACTER_LIMIT}),displayFormatter:function e(t){return t||""},validator:function(e){return 0===e.length||l.Lang.isNumber(e)&&e>0&&e<t.MAX_CHARACTER_LIMIT}}},currencySymbol:{ctor:l.Squarespace.DialogFields.Text,config:{name:"currencySymbol",className:"thin","strings.placeholder":i("Currency symbol"),maxLength:1}},showCountryCode:{ctor:l.Squarespace.DialogFields.Check,config:{name:"showCountryCode","strings.title":i("Show Country Code")}},options:{ctor:l.Squarespace.DialogFields.TextArea,config:{name:"options","strings.placeholder":i("Options"),"strings.description":i("Enter options one per line.")}},underline:{ctor:l.Squarespace.DialogFields.Check,config:{name:"underline","strings.title":i("Underline")}},key:{ctor:l.Squarespace.DialogFields.Text,config:{name:"key",className:"thin",disabled:true,"strings.placeholder":i("Key"),"strings.description":i('<strong>This is a hidden field.</strong> Hidden fields can be used to collect variables from the URL in your form submissions. To fill in this field, include the variable from the box above in the query string for this page. <a target="_blank" href="{url}">Learn more</a>',{url:s.HIDDEN_FORM_FIELD})}},value:{ctor:l.Squarespace.DialogFields.Text,config:{name:"value",className:"thin","strings.placeholder":i("Default Value"),"strings.description":i("If no value is passed through the query string, the default value above will be used.")}}};l.namespace("Squarespace.Widgets");var a=l.Squarespace.Widgets.FormBuilderFieldEditor=l.Base.create("FormBuilderFieldEditor",l.Squarespace.Widgets.SSWidget,[l.WidgetParent],{renderUI:function(){a.superclass.renderUI.call(this);var o=this.get("field");var e=n[o.type];var t=e.map(function e(t){var a=l.merge({},c[t]);var i=o[t];if(l.Lang.isValue(i)){"options"===t&&(i=i.join("\n"));a.config.data=i}var s=a.ctor;var n=a.config;var r=new s(n);return r});this.add(t)},bindUI:function(){a.superclass.bindUI.call(this);var i=this.get("field");this.each(function(e){var a=e.get("name");e.after("dataChange",function(e){var t=e.newVal;if("options"===a){t=t.split("\n");t=l.Array.map(t,function(e){return e.trim()})}i[a]=t;this.fire("change",{fieldName:a,data:t})},this)},this)}},{CSS_PREFIX:"sqs-form-builder-field-editor",ATTRS:{field:{value:null}}})},"1.0",{requires:["base","node","widget-parent","squarespace-ss-widget","squarespace-dialog-check","squarespace-dialog-text","squarespace-dialog-text-area","squarespace-dialog-numeric-text"]})},"./src/main/webapp/universal/scripts-v6/form-builder-field.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-form-builder-field",function(t){t.namespace("Squarespace.Widgets");var a=t.Squarespace.Widgets.FormBuilderField=t.Base.create("formBuilderField",t.Squarespace.Widgets.SSWidget,[t.WidgetChild,t.Squarespace.Mixins.Expandable],{initializer:function(){this.publish("removeClicked",{emitFacade:true});var e=this.get("field");this._titleField=new t.Squarespace.DialogFields.Text({name:"fieldTitle",data:e.title});"hidden"===e.type&&(e.key=this._cleanTitleForHidden(e.title));this._editor=new t.Squarespace.Widgets.FormBuilderFieldEditor({field:e})},destructor:function(){this._titleField.destroy();this._editor.destroy()},renderUI:function(){a.superclass.renderUI.call(this);var e=this.get("contentBox");this._editButton=e.one(".edit-field");this._editorWrapper=e.one(".editor-wrapper");this._set("expandableNode",this._editorWrapper);this._editorWrapper.hide(true);this._titleField.render(e.one(".field-title"));this._editor.render(this._editorWrapper)},bindUI:function(){a.superclass.bindUI.call(this);this.after("editingChange",this.syncUI,this);this._editor.on("change",function(e){this.fire("fieldChange")},this);this._bindTitleField();this._bindEditButton();this._bindRemoveButton()},syncUI:function(){a.superclass.syncUI.call(this);if(this.get("editing")){this._editButton.setContent(this.get("strings.doneText"));this.open()}else{this._editButton.setContent(this.get("strings.editText"));this.close()}var e=this.get("field").locked;this.get("contentBox").toggleClass("field-locked",e)},openEdit:function(){this._set("editing",true)},closeEdit:function(){this._set("editing",false)},focusAndSelect:function(){var e=this._titleField;e.focus();e.select()},lock:function(){this.get("field").locked=true;this.fire("fieldChange");this.syncUI()},unlock:function(){this.get("field").locked=false;this.fire("fieldChange");this.syncUI()},_bindTitleField:function(){var e=this._titleField;var a=this.get("field");e.after("dataChange",function(e){a.title=e.newVal;if("hidden"===a.type){var t=this._cleanTitleForHidden(a.title);this._editor.item(0).set("data",t)}this.fire("fieldChange")},this)},_bindEditButton:function(){this._editButton.on("click",function(){if(this.get("animating"))return;this.get("editing")?this.closeEdit():this.openEdit()},this)},_bindRemoveButton:function(){this.get("contentBox").one(".remove-field").on("click",function(e){e.halt();this.fire("removeClicked")},this)},_cleanTitleForHidden:function(e){var t=e.trim().replace(/\W/g,"_").toUpperCase();0!==t.indexOf("SQF_")&&(t="SQF_"+t);return t}},{CSS_PREFIX:"sqs-form-builder-field",HANDLEBARS_TEMPLATE:"form-builder-field.html",ATTRS:{strings:{value:{editText:i("Edit"),doneText:i("Done")},validator:t.Squarespace.AttrValidators.isObject,writeOnce:"initOnly"},field:{value:null,validator:t.Squarespace.AttrValidators.isNullOrObject,writeOnce:"initOnly"},editing:{value:false,validator:t.Squarespace.AttrValidators.isBoolean,readOnly:true},animating:{value:false,validator:t.Squarespace.AttrValidators.isBoolean,readOnly:true}}})},"1.0",{requires:["base","squarespace-animations","squarespace-attr-validators","squarespace-dialog-text","squarespace-form-builder-field-editor","squarespace-form-builder-field-template","squarespace-mixins-expandable","squarespace-ss-widget","widget-child"]})},"./src/main/webapp/universal/scripts-v6/form-editing-utils.js":function(e,t,a){var s=a("./src/main/webapp/universal/src/shared/utils/UrlUtils.js");YUI.add("squarespace-form-editing-utils",function(i){i.namespace("Squarespace");i.Squarespace.FormEditingUtils={resolveFieldTitle:function(t,e){var a=0;i.Array.each(e,function(e){e.type===t.type&&a++},this);a>0&&(t.title=t.title+" "+a)},resolveFieldId:function(e,t){if(e.id)return;i.Lang.isValue(e.title)||i.Squarespace.FormEditingUtils.resolveFieldTitle(e,t);e.id=i.guid(s.createUrlSafeString(e.type)+"-")}}},"1.0",{requires:[]})},"./src/main/webapp/universal/scripts-v6/form-preview.js":function(e,t,a){var i=a("./src/main/webapp/frontend/packages/enums/BlockType.js");var l=a("./src/main/webapp/universal/src/shared/utils/GoogleReCaptchaAPI.js");var c=a("./src/main/webapp/universal/src/shared/utils/GoogleReCaptchaAPIAuthenticated.js");var u=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/universal/src/shared/utils/evaluateJsonTemplate.js");var n=a("./src/main/webapp/universal/src/shared/utils/network.js");var d=a("./src/main/webapp/universal/src/shared/components/forms/CharacterCounter.js");var r=false;YUI.add("squarespace-form-preview",function(o){o.namespace("Squarespace.Widgets");var e=o.Squarespace.Widgets.FormPreview=o.Base.create("formPreview",o.Squarespace.Widgets.SSWidget,[],{initializer:function(){false;n.get("/api/template/GetTemplateSchema",{params:{type:i.FORM}}).then(this.onTemplateSchemaLoaded.bind(this))},onTemplateSchemaLoaded:function e(t){false;if(!this.get("destroyed")){this._template=t.data;this.syncUI()}},destructor:function(){this._template=null},makeHandleChange:function(e){return function e(t){false;this.syncUI()}},bindUI:function(){e.superclass.bindUI.call(this);this.after(["useLightboxChange","lightboxHandleTextChange","buttonAlignmentChange"],this.makeHandleChange("[FormPreview] Block Model changed, redraw preview"),this);this.get("form").after("change",this.makeHandleChange("[FormPreview] Form Model changed, redraw preview"),this)},syncUI:function e(){var t=this.get("contentBox");var a=t.getDOMNode();if(!a)return;false;if(!this._template||!this._template.html){false;return}var i=this.get("form");i.get("type")!==o.Squarespace.FormType.NEWSLETTER_BLOCK&&i.get("type")!==o.Squarespace.FormType.SLIDE&&i.set("disclaimerMessage",null);var s=this.get("useLightbox");var n={showTitle:s,useLightbox:s,lightboxHandleText:this.get("lightboxHandleText")||u("Open Form"),buttonAlignment:this.get("buttonAlignment"),formFields:i.get("fields"),formSubmitButtonText:i.get("submitButtonText"),formSubmissionMessage:i.get("submissionMessage"),hideSubmitButton:this.get("hideSubmitButton"),formId:i.get("id"),disclaimerMessage:i.get("disclaimerMessage"),captchaEnabled:i.get("captchaEnabled"),captchaAlignment:i.get("captchaAlignment"),captchaTheme:i.get("captchaTheme")};false;var r=this.evaluateTemplate(n);t.empty().setHTML(r);d(t.getDOMNode());i.get("captchaEnabled")&&c.isCaptchaEnabled()&&l.render(o.config.win,t.one(".captcha-container").getDOMNode())},evaluateTemplate:function(e){try{return s(this._template.html,o.merge({},e,{localizedStrings:this._template.localizedStrings}))}catch(e){return e.message}}},{CSS_PREFIX:"sqs-preview-form",ATTRS:{form:{value:null,validator:function(e){return o.instanceOf(e,o.Squarespace.Models.Form)}},useLightbox:{value:false},lightboxHandleText:{value:u("Open Form")},hideSubmitButton:{value:false}}})},"1.0",{requires:["base","json","node","squarespace-enum","squarespace-models-form","squarespace-ss-widget"]})},"./src/main/webapp/universal/scripts-v6/form-rendering-utils.js":function(e,t,a){var c=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var u=a("./src/main/webapp/universal/src/shared/utils/GoogleReCaptchaAPI.js");var d=a("./src/main/webapp/universal/src/shared/components/forms/CharacterCounter.js");YUI.add("squarespace-form-rendering-utils",function(o){o.namespace("Squarespace");function l(e){var t=e.cloneNode(true);var a=t.one(".form-button-wrapper .sqs-system-button");a&&a.removeClass("sqs-editable-button");var i=u.getCaptchaContainer(o.config.win,t.getDOMNode());i&&u.destroy(i);return t}function t(e){if(!e.one(".form-wrapper"))return;var i=e.one(".form-wrapper").remove().removeClass("hidden");var t=e.one(".lightbox-handle");var a=t.getData("lightbox");if(!a){var s=l(i);d(s.getDOMNode());var n=new o.Squarespace.Widgets.ModalLightbox({content:s,title:c("Form"),render:o.one("body")});var r=u.getCaptchaContainer(o.config.win,s.getDOMNode());r&&u.render(o.config.win,r);n.on("close",function e(){s=l(i);var t=s.getDOMNode();d(t);n.set("content",s);var a=u.getCaptchaContainer(o.config.win,t);a&&u.render(o.config.win,a)},this);t.setData("lightbox",n)}t.detach("click");t.on("click",function(e){e.halt();n.open()},this)}o.Squarespace.FormRenderingUtils={initializeFormLightbox:function(e){e.all(".sqs-block-form").each(function(e){if(!e.one(".lightbox-handle"))return;t(e)})}};o.config.win.Squarespace.onInitialize(o,function(){var e=o.config.doc;var t=o.one(e.body);o.Squarespace.FormRenderingUtils.initializeFormLightbox(t)})},"1.0",{requires:["squarespace-modal-lightbox"]})},"./src/main/webapp/universal/scripts-v6/form-submit.js":function(module,exports,__webpack_require__){var Flag=__webpack_require__("./src/main/webapp/frontend/packages/enums/Flag.js");var BetaFeaturesUtils=__webpack_require__("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts");var trackEvent=__webpack_require__("./src/main/webapp/universal/src/shared/utils/commerce/trackEvent.ts");var network=__webpack_require__("./src/main/webapp/universal/src/shared/utils/network.js");var GoogleReCaptchaAPI=__webpack_require__("./src/main/webapp/universal/src/shared/utils/GoogleReCaptchaAPI.js");var pixelConstants=__webpack_require__("./src/main/webapp/universal/src/shared/constants/FacebookPixelConstants.js");var FormHandler=__webpack_require__("./src/main/webapp/universal/src/shared/utils/FormHandler.js");var CensusUtils=__webpack_require__("./src/main/webapp/universal/src/shared/utils/census/CensusUtils.ts");var focusableSelector=__webpack_require__("./common/temp/node_modules/@sqs/utils/focus/index.js").focusableSelector;YUI.add("squarespace-form-submit",function(Y){Y.namespace("Squarespace");var FormSubmitV1=Y.Base.create("FormSubmitV1",Y.Base,[],{initializer:function(){this._submitButton=this.get("formNode").one("[type=submit]");this._submitButtonText=this._submitButton.get("value");var e=this._getMultiFieldVal;this._typeGetterMap={date:e,name:e,time:e,address:e,phone:this._getPhoneFieldVal,radio:this._getRadioFieldVal,checkbox:this._getCheckFieldVal,select:this._getSelectVal,likert:this._getLikertVal,hidden:this._getHiddenVal};this._defaultGetter=this._getSingleFieldVal;Y.Global.publish("form:submitSuccess")},submit:function e(t,a,i,s,n){var r=this.get("formNode");var o;if("object"===typeof t){o=t.formId;a=t.collectionId;i=t.objectName;s=t.isOverlayForm;n=t.submitButtonText}else o=t;try{if(r.hasClass("submitting"))return;this._clearErrors();this._lock();var l=GoogleReCaptchaAPI.getCaptchaContainer(Y.config.win,this.get("formNode").getDOMNode());if(l){var c=GoogleReCaptchaAPI.validate(Y.config.win,l);c?this._saveFormSubmission(o,a,i,s,n,c):this._submitFailure(FormHandler.strings.CAPTCHA_INCOMPLETE_ERROR)}else this._saveFormSubmission(o,a,i,s,n)}catch(e){this._submitFailure(FormHandler.strings.SUBMIT_ERROR)}finally{return false}},_createErrorNode:function(e){return Y.Node.create('<div class="field-error">'+e+"</div>")},_clearErrors:function(){var e=this.get("formNode");e.all(".field-error").each(function(e){e.remove()});e.all(".form-item.error").each(function(e){e.removeClass("error")})},_lock:function(){this.get("formNode").addClass("submitting");this._submitButton.set("value",FormHandler.strings.SUBMIT_TEXT_IN_PROGRESS)},_unlock:function(){this.get("formNode").removeClass("submitting");this._submitButton.set("value",this._submitButtonText)},_saveFormSubmission:function(a,i,s,n,r,o){var l={withCredentials:true};network.post("/api/form/FormSubmissionKey",{},l).then(function(e){if(e.data.key){var t={key:e.data.key,formId:a,collectionId:i,objectName:s,isOverlayForm:n,submitButtonText:r,form:Y.JSON.stringify(this._getData()),captchaKey:o};CensusUtils.addIntraPageEventFields(t);network.post("/api/form/SaveFormSubmission",t,l).then(this._submitSuccess.bind(this)).catch(this._submitFailure.bind(this))}else this._submitFailure(e)}.bind(this)).catch(this._submitFailure.bind(this))},_submitSuccess:function(){var e=this.get("formNode");e&&(e.hasClass("newsletter-form")||e.getById(pixelConstants.NEWSLETTER_OVERLAY_NODE_ID))&&trackEvent.trackSubscribeNewsletter();Y.Global.fire("form:submitSuccess");var t=e.getData("success-redirect");if(t){window.history.replaceState&&window.history.replaceState({},document.title,window.location.href);window.location.href=t;return}this._unlock();this._renderSuccess()},_submitFailure:function(e){var s=this.get("formNode");var t=s.hasClass("newsletter-form");var a=null;if(Y.Lang.isString(e))a=e;else if(FormHandler.errorCodes[e.status])a=FormHandler.errorCodes[e.status];else if(400===e.status&&e.data.errors){Y.Object.each(e.data.errors,function(e,t){var a=s.one("#"+t);var i=a.one(".title");i.insert(this._createErrorNode(e),"before");a.addClass("error")},this);t||(a=FormHandler.strings.ERROR_ABOVE)}else a=e.data.error?e.data.error:FormHandler.strings.UNKNOWN_ERROR;if(a){var i=this._createErrorNode(a);t?s.insertBefore(i,s.one(".newsletter-form-body")):s.prepend(i);i.setAttribute("tabindex",-1);i.focus()}else{var n=s.one(".error");if(n){var r=n.getDOMNode().matches(focusableSelector)&&n||n.one(focusableSelector);r&&r.focus()}}var o=s.one(".captcha-container");if(o){var l=this._submitButton.getDOMNode();l&&l.getAttribute("data-captcha-bound")&&(l.disabled=true);GoogleReCaptchaAPI.reset(Y.config.win,o)}this._unlock()},_renderSuccess:function(){var formEl=this.get("formNode");var messageNode=formEl.one(".form-submission-text");var htmlNode=formEl.one(".form-submission-html");var postSubmitHtml=htmlNode.getData("submission-html");formEl.all("*").each(function(e){e.addClass("hidden")});htmlNode.setHTML(postSubmitHtml);htmlNode.removeClass("hidden");messageNode.removeClass("hidden");messageNode.all("*").each(function(e){e.removeClass("hidden")});var movedFocus=false;function focusOn(e){e.setAttribute("tabindex",-1);e.focus();movedFocus=true}messageNode.getDOMNode().textContent.trim().length>0?focusOn(messageNode):htmlNode.getDOMNode().textContent.trim().length>0&&focusOn(htmlNode);if(!movedFocus){var win=Y.config.win;var formElY=formEl.getY();formElY<win.scrollY&&win.scrollTo(0,formElY-25)}htmlNode.all("script").each(function(script){if(script.hasAttribute("src")){var dupeScriptDOMNode=document.createElement("script");var attributes=script.getDOMNode().attributes;Y.Array.each(attributes,function(e){dupeScriptDOMNode[e.name]=e.value});script.replace(dupeScriptDOMNode)}else try{eval(script.getHTML())}catch(e){false}},this)},_getData:function(){var t={};this.get("formNode").all(".form-item").each(function(e){t[e.get("id")]=this._getFieldData(e)},this);return t},_getFieldData:function(e){var t=this._typeGetterMap;var a=e.get("className").split(new RegExp("\\s"));var i;var s=false;Y.Array.each(a,function(e){Y.Object.hasKey(t,e)?i=t[e]:"section"===e&&(s=true)},this);if(s)return;i=i||this._defaultGetter;return i.call(this,e)},_getSingleFieldVal:function(e){var t=e.one(".field-element");if(t)return t.get("value");return null},_getMultiFieldVal:function(e){var t=[];e.all(".field-element").each(function(e){t.push(e.get("value"))});return t},_getPhoneFieldVal:function(e){var t=this._getMultiFieldVal(e);t&&3===t.length&&t.unshift("");return t},_getRadioFieldVal:function(e){return this._getCheckFieldVal(e)[0]},_getCheckFieldVal:function(e){var t=[];e.all("input").each(function(e){e.get("checked")&&t.push(e.get("value"))},this);return t},_getSelectVal:function(e){return e.one("select").get("value")},_getLikertVal:function(e){var a={};e.all(".item").each(function(e){var t;e.all("input").each(function(e){e.get("checked")&&(t=e.get("value"))});Y.Lang.isValue(t)&&(a[e.getAttribute("data-question")]=t)});return a},_getHiddenVal:function(e){var t;Y.Lang.isValue(this._query)||(this._query=Y.QueryString.parse(window.location.search.replace(/^\?/,"")));var a=e.get("name");t=Y.Object.hasKey(this._query,a)?this._query[a]:e.get("value");return t.toString()}},{ATTRS:{formNode:{value:null,validator:Y.Squarespace.AttrValidators.isNullOrInstanceOf(Y.Node),writeOnce:"initOnly"}}});Y.Squarespace.FormSubmit=function(e){var t;t=e instanceof Element?BetaFeaturesUtils.isFeatureEnabled(Flag.VANILLA_FORM_HANDLER)?new FormHandler(Y.config.win,e):new FormSubmitV1({formNode:Y.Node(e)}):new FormSubmitV1(e);this.submit=t.submit.bind(t);if(BetaFeaturesUtils.isFeatureEnabled(Flag.VANILLA_FORM_HANDLER)){this.clearErrors=t.clearErrors.bind(t);this.createErrorNode=t.createErrorNode.bind(t)}else{this.clearErrors=t._clearErrors.bind(t);this.createErrorNode=t._createErrorNode.bind(t)}return this}},"1.0",{requires:["base","json","node","querystring-parse","squarespace-attr-validators","squarespace-util"]})},"./src/main/webapp/universal/scripts-v6/form-utils.js":function(e,t,a){YUI.add("squarespace-form-utils",function(s){var e=s.namespace("Squarespace.FormUtils");e.setData=function(e,a){if(!s.Lang.isValue(a))return;s.Array.each(e,function(e){var t=a[e.get("name")];s.Lang.isUndefined(t)||e.set("data",t)})};e.getData=function(e){e=e||[];return s.Array.reduce(e,{},function(e,t){var a=t.get("data");!s.Lang.isUndefined(a)&&s.Lang.isValue(t.get("name"))&&(e[t.get("name")]=a);return e})};e.template=function(i,e){s.Lang.isArray(e)?s.Array.each(e,function(e){var t=e.get("name");var a=i.one('[data-field-name="'+t+'"]');!!a&&e.render(a)}):s.Lang.isObject(e)&&s.Object.each(e.groups||{},function(e,t){var a=i.one('[data-field-group="'+t+'"]');a&&s.Array.each(e,function(e){e.render(a)})})};e.validate=function(e){return s.Array.reduce(e,{},function(e,t){if(s.Lang.isFunction(t.getErrors)){var a=t.getErrors();a.length&&(e[t.get("name")]=a[0])}return e})};e.showErrors=function(e,a){s.Array.each(e,function(e){var t=a[e.get("name")];s.Lang.isValue(t)&&""!==t&&s.Lang.isFunction(e.showError)&&e.showError(t)})};e.hideErrors=function(e){s.Array.each(e,function(e){s.Lang.isFunction(e.hideError)&&e.hideError()})}},"1.0",{requires:["array-extras","node"]})},"./src/main/webapp/universal/scripts-v6/frontend/content-mode.js":function(e,t,a){a("./src/main/webapp/universal/src/shared/i18n/bootstrap.ts");a("./src/main/webapp/universal/src/shared/i18n/configurations/core-components.js");a("./src/main/webapp/universal/src/shared/i18n/configurations/block-schemas.js");var i=a("./common/temp/node_modules/@sqs/rum-collector/timing.js");var p=a("./src/main/webapp/frontend/packages/enums/CollectionTypes.js");var h=a("./src/main/webapp/frontend/packages/enums/Flag.js");var g=a("./src/main/webapp/frontend/packages/enums/MemberAccountGuild.js");var m=a("./src/main/webapp/frontend/packages/enums/SliceType.js");var f=a("./common/temp/node_modules/@sqs/cookie-cutter/index.js");var v=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var b=a("./src/main/webapp/universal/src/shared/constants/BlockTypeStrings.js");var S=a("./src/main/webapp/universal/src/shared/constants/Constants.js");var y=a("./src/main/webapp/universal/src/shared/utils/BlockFeatureGatingUtils.js");var _=a("./src/main/webapp/universal/src/shared/utils/CMSV7Events.js");var s=a("./src/main/webapp/universal/src/shared/utils/Loggers.ts");var C=a("./src/main/webapp/universal/src/shared/utils/TemplateVersionUtils.js");var E=a("./src/main/webapp/universal/src/shared/utils/getCollectionDataFromContext.js");var w=a("./src/main/webapp/universal/src/shared/utils/setDragEffect.js");var A=a("./src/main/webapp/universal/src/apps/App/shared/stores/TemplateStore.js");var T=a("./src/main/webapp/universal/src/shared/constants/SliceTypeByName.js");var I=a("./src/main/webapp/universal/src/apps/App/components/Annotations/OverlayAnnotationController.js");var q=a("./src/main/webapp/universal/src/apps/App/shared/actions/AnnotationsActions.js");var k=a("./src/main/webapp/universal/src/apps/App/shared/actions/FrameActions.js");var L=a("./src/main/webapp/universal/src/apps/App/shared/actions/SectionsPersistenceHelper.js").finishEditing;var D=a("./src/main/webapp/universal/src/apps/App/shared/stores/AnnotationsStore.js");var N=a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/index.js");var R=a("./src/main/webapp/universal/src/apps/App/shared/stores/BillingStatusStore.js");var O=a("./src/main/webapp/universal/src/apps/App/shared/stores/AuthenticatedAccountStore.js");var P=a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts");var x=a("./src/main/webapp/universal/src/apps/App/shared/utils/contentPreviewer/index.js");var B=a("./src/main/webapp/universal/src/apps/App/components/Catalog/PageCatalog.js");var M=a("./src/main/webapp/universal/src/apps/App/shared/constants/PageCatalogType.js");var F=a("./src/main/webapp/universal/src/apps/App/components/Catalog/utils/CatalogContentInitializer.js");var n=a("./src/main/webapp/universal/src/apps/App/components/Catalog/constants/CatalogPerformanceEvents.js");var r=a("./src/main/webapp/universal/src/apps/App/components/Catalog/utils/CatalogPerformanceGuidUtils.js");var j=a("./src/main/webapp/universal/src/shared/stores/DeviceViewStore.js");var U=a("./src/main/webapp/universal/src/shared/constants/DeviceViewType.js");var o=false;var V=s.createLogger("ContentModeController","khaki",o);var H=s.createWarningLogger("ContentModeController");var G=s.createErrorLogger("ContentModeController");var W=i.mark;var z=i.measure;var Y=n.ITEM_CATALOG_FULLY_LOADED;var Q=n.PAGE_CATALOG_FULLY_LOADED;var X=n.ITEM_CATALOG_RENDERED;var K=n.PAGE_CATALOG_RENDERED;var J=n.ITEM_CATALOG_ENTRY_ADDED;var $=n.PAGE_CATALOG_ENTRY_ADDED;var Z=n.PAGE_CATALOG_PRELOAD_EFFECTIVENESS;var ee=n.ITEM_CATALOG_PRELOAD_EFFECTIVENESS;var te=r.getGuid;var ae=r.resetGuid;YUI.add("squarespace-frontend-content-mode",function(o){var l=o.Squarespace.Navigation.ListUtils;var a=250;var e=1e4;var t=o.namespace("Squarespace.Frontend");var i=S.IGNORED_ITEM_ANNOTATION_SELECTORS;var s=S.REGISTERED_ACTIONS_FOR_NEXT_LOAD_STORE_KEY;var n=["sqs-layout-dark","sqs-frontend-overlay-editor-widget"];var r=o.Base.create("ContentModeController",o.Base,[o.Squarespace.Mixins.EventRegistrar],{initializer:function(){this._events=[];this.annotationControllers=[];this.logReadyState();o.Global.publish("annotationControllersInitialized");this.publish("refresh",{emitFacade:true});this.on("*:navigate",this._navigate,this);this.after("editableChange",function(e){o.one(o.config.doc.body).toggleClass("sqs-hide-overlay-widgets",!!e.newVal);o.one(o.config.doc.body).toggleClass("sqs-edit-mode-active",!!e.newVal)});this._bindBrowserDragStart();q.reset();this._events.push(o.on("domready",function(){var e=o.Object.getValue(Static,["SQUARESPACE_CONTEXT","accessPermissions"]);var t=o.Squarespace.AccessPermissions.CONFIG_CONTENT_MANAGER;if(!e||!e.includes(t))return;var a=this.get("contextCollection");var i={contentModeController:this,win:o.config.win,mouse:o.Squarespace.Mouse,overlayEditorClassName:"",placeLastClassifications:[],allocateTopLeftCorner:false};if(a&&a.get("type")===o.Squarespace.CollectionTypes.SPLASH_PAGE){i.overlayEditorClassName="sqs-cover-page-overlay";i.placeLastClassifications.push("Gallery");i.allocateTopLeftCorner=true}this.overlayAnnotationController=new I(i);this.logReadyState();this.stack=new o.Parallel;this.stack.done(function(){this._stackTimeoutId=setTimeout(function(){if(!this.get("destroyed")){this._stackTimeoutId=null;this.set("annotationControllersInitialized",true);o.Global.fire("annotationControllersInitialized",{annotationControllers:this.annotationControllers})}}.bind(this),100)}.bind(this));this._initializeAnnotationControllers();this._handleRegisteredActionsOnNextLoad();this.controllersInitailizedForRefreshToWork=true},this));this.after("visibleChange",this._sync);this.windowExists()&&o.config.win.MutationObserver?this._bindDOMListeners():this._bindWatcher();this.bindLayoutEngineUpgradePills();this.bindNetworkListener();this.bindOrientationListener();this.bindDeviceViewStore()},logReadyState:function(){V("document.readyState",{ready:o.config.doc.readyState,doc:o.config.doc})},bindDeviceViewStore:function(){this.detachDeviceViewStoreListener=j.listen(function(){var e=j.getState().view===U.PHONE;o.one(o.config.doc.body).toggleClass("mobile-preview-editing",e)})},bindNetworkListener:function(){o.config.win.addEventListener("online",this._updateOnlineStatus.bind(this));o.config.win.addEventListener("offline",this._updateOnlineStatus.bind(this))},detachNetworkListener:function(){o.config.win.removeEventListener("online",this._updateOnlineStatus.bind(this));o.config.win.removeEventListener("offline",this._updateOnlineStatus.bind(this))},_updateOnlineStatus:function(){var e=navigator.onLine?"online":"offline";var t=Date.now();o.Global.fire("network:"+e);if("online"===e){var a=this.disconnectedAt?t-this.disconnectedAt:void 0;this.disconnectedAt=void 0;_.userNetworkReconnect(a)}else this.disconnectedAt=t},bindOrientationListener:function(){o.config.win.addEventListener("orientationchange",this._handleOrientationChange.bind(this))},detachOrientationListener:function(){o.config.win.removeEventListener("orientationchange",this._handleOrientationChange.bind(this))},_handleOrientationChange:function(){_.userDeviceOrientationChange()},bindLayoutEngineUpgradePills:function(){var e=o.config.win;o.Do.after(this.renderLayoutEngineUpgradeWrappers,e.Squarespace,"initializeLayoutBlocks",e.Squarespace);this._registerEvent(o.on("renderLayoutEngineUpgradeWrappers",this.renderLayoutEngineUpgradeWrappers,this));e.Squarespace.SQUARESPACE_INITIALIZED_ONCE&&this.renderLayoutEngineUpgradeWrappers();R.isTrial()&&o.one(o.config.doc.documentElement).addClass("squarespace-page-in-trial");var t=O.getState().toJS().guilds;var a=t&&t[g.CIRCLE_USER]||false;(a||o.config.win.top.Static.SQUARESPACE_CONTEXT.isCircleMemberWebsite)&&o.one(o.config.doc.documentElement).addClass("squarespace-circle-member")},renderLayoutEngineUpgradeWrappers:function(){var a=o.one(o.config.doc);y.getFeatureGatedBlockTypes().forEach(function(t){var e=".sqs-block-"+b.BlockTypeNames[t];a.all(e).each(function(e){y.renderBlockWrapper({node:e.getDOMNode(),blockType:t})})})},_handleRegisteredActionsOnNextLoad:function(){try{this._getRegisteredActionsOnNextLoad().forEach(function(e){if("enterPostEditFlow"===e.action)this._enterEditPostFlow(e.options);else if("ensureCollectionInStackedIndexIsOnScreen"===e.action){var t=e.options.collectionId;var a=e.options.parentCollectionId;this.ensureCollectionInStackedIndexIsOnScreen(t,a)}}.bind(this))}catch(e){H("Issue handling registered actions on next load.",e)}finally{f.set(s,"",{expires:new Date(0),path:"/"})}},_enterEditPostFlow:function(e){var t=this._getAnnotationControllerByType(N.ContentItemMinimal);t&&t.requestEditFlowEntrance()},_getRegisteredActionsOnNextLoad:function(){var e=[];try{var t=f.get(s,{path:"/"});t&&(e=JSON.parse(t))}catch(e){H("Error de-serializing Set<ActionOnNextLoad>",e)}return o.Lang.isArray(e)?e:[]},registerActionOnNextLoad:function(e){var t=this._getRegisteredActionsOnNextLoad();t.push(e);f.set(s,JSON.stringify(t),{path:"/"})},_bindDOMListeners:function(){if(!o.config.doc.body)return;this._mutationObserver=new o.config.win.MutationObserver(function(e){if(!this.get("visible"))return;var t=e.find(function(e){if(!e.target){H("mutation.target is not real!",e);return true}var t=e.target.classList;if(!t)return true;var a=n.find(function(e){return t.contains(e)});return!o.Lang.isValue(a)});if(!o.Lang.isValue(t))return;if(!this.windowExists())return;this._domChangeResponder&&this._domChangeResponder.cancel();this._domChangeResponder=o.later(a,this,function e(){this._domChangeResponder=null;this._refreshLiveAnnotationControllers()})}.bind(this));this._mutationObserver.observe(o.config.doc.body,{childList:true,attributes:true,subtree:true})},windowExists:function(){return o&&o.config&&o.config.win},_bindWatcher:function(){this._domWatcher=o.later(e,this,this._refreshLiveAnnotationControllers,null,true)},_refreshLiveAnnotationControllers:function e(){if(!this.windowExists())return;if(!this.controllersInitailizedForRefreshToWork)return;V("Request to update live edit controllers!");this.initializeBlockFields();this._initializeNavigations();this.getHotAnnotationControllers().filter(function(e){return e instanceof N.Index}).forEach(function(e){e.syncChildCollectionAnnotationControllers()});this.overlayAnnotationController&&this.overlayAnnotationController.invalidateAndRequestRepaint()},_bindBrowserDragStart:function(){o.one(o.config.doc).on(["dragenter","dragover"],function(e){e.stopPropagation();e.preventDefault();var t=e._event.dataTransfer;w(t,"none")})},destructor:function(){o.Array.each(this.annotationControllers,function(e){e.destroy(true)},this);o.Array.each(this._events,function(e){e.detach()});this.annotationControllers.length=0;this._events.length=0;if(this._stackTimeoutId){clearTimeout(this._stackTimeoutId);this._stackTimeoutId=null}if(this._domWatcher){this._domWatcher.cancel();this._domWatcher=null}if(this._mutationObserver){this._mutationObserver.disconnect();this._mutationObserver=null}this._domChangeResponder&&this._domChangeResponder.cancel();if(this._slideEditController){this._slideEditController.destroy();this._slideEditController=null}if(this._slideUpdateRenderSynchronizerHandle){this._slideUpdateRenderSynchronizerHandle.detach();this._slideUpdateRenderSynchronizerHandle=null}if(this.overlayAnnotationController){this.overlayAnnotationController.destroy();this.overlayAnnotationController=null}if(this._popupOverlayShowingHandle){this._popupOverlayShowingHandle.detach();this._popupOverlayShowingHandle=null}if(this.catalogContentInitializer){this.catalogContentInitializer.destroy();this.catalogContentInitializer=null}this.detachNetworkListener();this.detachOrientationListener();q.reset.defer();this.detachDeviceViewStoreListener&&this.detachDeviceViewStoreListener()},_initializeAnnotationControllers:function(){this.initializeBlockFields();this._initializeSiteTitle();this._initializeSiteHeader();this._initializeSiteDescription();this._initializePageConfiguration();this._initializeSlideAnnotationController();this._initializeNavigations();this._initializeContentField("connected-accounts",N.ConnectedAccounts);this._initializeContentField("business-information",N.BusinessInformation);if(C.isSevenOne()){o.one("body").addClass("sqs-jacquard");o.one("body").addClass("sqs-jacquard-outline-beta");this._initializeSections("[data-page-sections]",N.PageSections);this._initializeSections("[data-footer-sections]",N.FooterSections)}this._registerEvent(o.on("beforeunload",this.destroy,this));this._sync()},isInitializing:function(){return!this.get("annotationControllersInitialized")},_navigate:function(e){if(e.source===this.name)return;var t={source:this.name};e.shimmy&&(t.shimmy=e.shimmy);e.focus&&(t.focus=e.focus);o.Squarespace.Singletons.Location.go(e.path,t);e.stopPropagation()},isNodeVisible:function(e,t){var a=e.get("region");var i=a.width>0||a.height>0;if(!i)return false;var s=e.getComputedStyle("visibility");if("hidden"===s)return false;var n=e.get("parentNode");if(t&&n&&n!==o.one(o.config.doc))return this.isNodeVisible(n,t);return true},_initializeSiteTitle:function(){if(P.isFeatureEnabled(h.SITE_HEADER_FOOTER))return;var e=o.all('[data-content-field="site-title"]');e.each(function(e){if(!this.isNodeVisible(e))return;this.registerAnnotationController(N.SiteTitle,{rootNode:e})},this)},_initializeSiteHeader:function(){if(!P.isFeatureEnabled(h.SITE_HEADER_FOOTER))return;var e=o.all("header#header");e.each(function(e){if(!this.isNodeVisible(e))return;this.registerAnnotationController(N.SiteHeader,{rootNode:e})},this)},_initializeSiteDescription:function(){var e=o.all('[data-content-field="site-description"]');e.each(function(e){if(!this.isNodeVisible(e))return;this.registerAnnotationController(N.SiteDescription,{rootNode:e})},this)},_initializeSlideAnnotationController:function(){if(!o.one(".sqs-slide")){this._popupOverlayShowingHandle=o.Global.once("popupOverlay:showing",function(){this._createSlideController(true)}.bind(this));return}this._createSlideController()},_createSlideController:function(e){this._slideEditController=new o.Squarespace.SlideRendering.EditController({stack:this.stack,shouldShowPopup:e});if(!this.get("contextCollection"))return;this._slideUpdateRenderSynchronizerHandle=o.Global.after(["slideUpdateRendered","slideComponentSync"],function(){this._syncSliceAnnotationControllers();this._syncBodyClasses()}.bind(this));this._syncSliceAnnotationControllers()},_syncSliceAnnotationControllers:function(){var s=[];var n=[];this.getHotAnnotationControllers().forEach(function(e){var t=e.state.rootNode;var a=t.getDOMNode();if(e.state.destroyed||!a||!t.inDoc()){s.push(e);return}n.push(a);var i=t.ancestor("[data-compound-type]");i&&n.push(i.getDOMNode())});for(var e=0;e<s.length;e++)this.removeAnnotationController(s[e]);o.all("[data-slice-type]").each(function(e){var t=this._getValidRootNodeForSliceTypeNode(e);if(n.indexOf(t.getDOMNode())>-1)return;this._createAnnotationControllerForSliceNode(e)},this)},_getValidRootNodeForSliceTypeNode:function(e){var t=e.getAttribute("data-slice-type");var a=T[t];if(a===m.IMAGE){var i=e.one("img");if(i)return i}else if(a===m.HEADING){var s=e.one("h1");if(s)return s}return e},_createAnnotationControllerForSliceNode:function(e){var t=this._getValidRootNodeForSliceTypeNode(e);var a=e.hasAttribute("data-compound-type")?e.getAttribute("data-compound-type"):e.getAttribute("data-slice-type");this.registerAnnotationController(N.PanelLink,{contextCollectionId:this.get("contextCollection").get("id"),rootNode:t,sliceTypeStr:a,visible:this.get("visible")})},_isDemoCollectionPage:function(){var e=o.config.win.Static.SQUARESPACE_CONTEXT.collectionId;return o.Squarespace.ContentCollectionUtils.isDemoCollectionId(e)},_isItemView:function(){var e=o.config.win.Static.SQUARESPACE_CONTEXT.itemId;return o.Lang.isValue(e)},_initializePageConfiguration:function(){var a=['[data-content-field="main-content"]','.sqs-layout[data-type="page"]',"[data-collection-id]"].join(",");if(C.isSevenOne())return;var e=o.all(a);V("Found "+e.size()+" page configuration wrappers.");e.each(function(e){if(e.ancestor(a))return;for(var t=0;t<i.length;t++)if(e.hasClass(i[t]))return;this.initializeAnnotationControllerForNode(e)},this)},initializeAnnotationControllerForNode:function(e,t){var a=this._getCollection(e);var i=this.getPageConfigurationCtor(a);if(!o.Lang.isFunction(i)){V("Could not find a PageConfigurationCtor for node.",e.getDOMNode());return}if(this.isBound(e,i)){V("Not rebinding on element.",e.getDOMNode(),i.NAME);return}if(i===N.Page&&!e.test('.sqs-layout[data-type="page"]')){var s=e.all('.sqs-layout[data-type="page"]');if(1===s.size())e=s.item(0);else{s.size()>1&&H("Multiple .sqs-layout found inside of wrapper. Creating generic annotation.",s._nodes);i=N.PageWrapper}}var n=this.registerAnnotationController(i,{rootNode:e,overlayRootNode:t||e,collection:a});t&&t!==e&&n.set("placeAnnotationInside",true);V("Plugged",i.NAME,"for ",a.toDebugString(),e.getDOMNode());return n},getPageConfigurationCtor:function(e){if(!o.Lang.isValue(e))return null;var t=e.get("typeName");var a=e.get("type");o.Lang.isValue(a)||(a=e.getTemplateConfiguration().get("collectionType"));if(!t&&a===p.COLLECTION_TYPE_PAGE){e.set("typeName","page");t="page"}if(a===p.COLLECTION_TYPE_GENERIC){var i=e.get("ordering");if(!o.Lang.isValue(i)){var s=A.getCollectionConfig(t);var n=A.getPageConfig(t);var r=s||n;i=r?r.ordering:null}if(o.Squarespace.ContentCollectionUtils.isIndex(e)){if(l.isCollectionAStackedIndex(e))return N.StackedIndex;return N.Index}if(i===o.Squarespace.CollectionOrdering.USER)return N.Gallery;if(i===o.Squarespace.CollectionOrdering.CHRONOLOGICAL)return N.Blog;if(i===o.Squarespace.CollectionOrdering.CALENDAR)return N.Calendar;if(i===o.Squarespace.CollectionOrdering.MUSIC_ALBUM)return N.MusicAlbum}if(a===p.COLLECTION_TYPE_PAGE)return N.Page;if(a===p.PRODUCTS)return N.Products},_getCollection:function(e){var t=o.Squarespace.ContentCollectionCache;var a=null;e.hasAttribute("data-collection-id")&&(a=e.getAttribute("data-collection-id"));e.test('.sqs-layout[data-type="page"]')&&(a=e.getAttribute("id").substr("page-".length));if(o.Lang.isString(a)&&a.length){if(o.config.win.Static.SQUARESPACE_CONTEXT.collectionId===a)return t.getCollectionFromData(o.config.win.Static.SQUARESPACE_CONTEXT.collection);return t.getById(a)}var i=o.config.win.Static.SQUARESPACE_CONTEXT.collection;if(o.Lang.isObject(i))return o.Squarespace.ContentCollectionCache.getCollectionFromData(i)},_initializeSections:function(a,i){var e=o.all(a);V("Found "+e.size()+" page sections.");var s=o.Array.filter(this.annotationControllers,function(e){return e instanceof i});e.each(function(e){if(!e.all(a).isEmpty())return;var t=this._getRegisteredAnnotationController(e);!t&&this.isNodeVisible(e)?this.registerAnnotationController(i,{rootNode:e}):t&&s.includes(t)&&this.isNodeVisible(e)&&s.remove(t)},this);if(s.length>0){V("Page sections are waiting for garbage collection",s);for(var t=0;t<s.length;t++)this.removeAnnotationController(s[t])}},_initializeNavigations:function(){var a='[data-content-field^="navigation"]';var e=o.all(a);V("Found "+e.size()+" navigations.");var i=o.Array.filter(this.annotationControllers,function(e){return e instanceof N.Navigation});e.each(function(e){if(!e.all(a).isEmpty())return;var t=this._getRegisteredAnnotationController(e);!t&&this.isNodeVisible(e)?this.registerAnnotationController(N.Navigation,{rootNode:e}):t&&i.includes(t)&&this.isNodeVisible(e)&&i.remove(t)},this);if(i.length>0){V("Navigations waiting for garbage collection.",i);for(var t=0;t<i.length;t++)this.removeAnnotationController(i[t])}},_initializeContentField:function(e,t){o.all('[data-content-field="'+e+'"]').each(function(e){this.isNodeVisible(e)&&this.registerAnnotationController(t,{rootNode:e})},this)},getValidBlockFieldNodes:function(){var e=o.all('.sqs-layout[data-type="block"], .sqs-layout[data-type="block-field"]');var t=[];e.each(function(e){if(!this.isNodeVisible(e)&&!o.Squarespace.Utils.isDeveloperModeEnabled()){V("Skipping blockField because element is not visible.",e._node);return}t.push(e)},this);return t},initializeBlockFields:function(){var e=this.getValidBlockFieldNodes();V("Valid block nodes",e);var a=o.Array.filter(this.annotationControllers,function(e){return e instanceof N.BlockField});o.Array.each(e,function(e){var t=this._getRegisteredAnnotationController(e);o.Lang.isValue(t)||(t=this.registerAnnotationController(N.BlockField,{rootNode:e}));a.includes(t)&&a.remove(t)},this);if(a.length>0){V("Block fields waiting for garbage collection",a);for(var t=0;t<a.length;t++)this.removeAnnotationController(a[t])}},removeAnnotationController:function(e){this.annotationControllers.remove(e);e.destroy();this.overlayAnnotationController.repaintRequest()},registerAnnotationController:function e(t,a){if(!this.overlayAnnotationController){G("Tried to registerAnnotationController without overlayAnnotationController");return}var i={annotationController:this.overlayAnnotationController,contentModeControllerSet:this.set.bind(this),fireRequestDiscardChangesEvent:this.fireRequestDiscardChangesEvent.bind(this),fireRequestSaveChangesEvent:this.fireRequestSaveChangesEvent.bind(this),initializeAnnotationControllerForNode:this.initializeAnnotationControllerForNode.bind(this),isNodeVisible:this.isNodeVisible.bind(this),registerActionOnNextLoad:this.registerActionOnNextLoad.bind(this),registerAnnotationController:this.registerAnnotationController.bind(this),removeAnnotationController:this.removeAnnotationController.bind(this),stack:this.stack,trackButtonClick:this.trackButtonClick.bind(this),Y:o};var s=new t(i,a);this.get("visible")!==s.state.visible&&s.set("visible",this.get("visible"));s.addAfterChangeHandler("dirty",this._syncDirtyState,this);s.addAfterChangeHandler("editable",this._syncEditableState,this);s.addAfterChangeHandler("visible",function(){this.overlayAnnotationController.repaintRequest()},this);this.annotationControllers.push(s);this.overlayAnnotationController.repaintRequest();return s},trackButtonClick:function(e){o.Global.fire("annotation-overlay-button-click",e)},isBound:function(t,a){return o.Lang.isValue(o.Array.find(this.annotationControllers,function(e){return e instanceof a&&e.state.rootNode===t}))},_getAnnotationControllerByType:function(t){if(!this.annotationControllers)return;return o.Array.find(this.annotationControllers,function(e){return e instanceof t})},_getRegisteredAnnotationController:function(t){return o.Array.find(this.annotationControllers,function(e){return e.state.rootNode===t})},_getPropertyFromAnnotationController:function(t){return o.Array.map(this.annotationControllers,function(e){return e.state[t]})},_syncDirtyState:function(){this.set("dirty",this._getPropertyFromAnnotationController("dirty").includes(true))},_syncEditableState:function(){this.set("editable",this._getPropertyFromAnnotationController("editable").includes(true))},__getActiveAnnotationController:function(){return o.Array.find(this.annotationControllers,function(e){return e.state.editable})},getActiveAnnotationControllerLabel:function(){var e=o.Array.find(this.annotationControllers,function(e){return e.state.editable});if(e instanceof N.LayoutBase)return e.getClassificationLabel();return null},fireRequestDiscardChangesEvent:function(){this.fire("request-discard-changes")},revertAnnotationControllerChangesAndDisableEditing:function(){var e=o.Promise.all(o.Array.map(this.annotationControllers,function(a){return new o.Promise(function(e,t){if(a.state.dirty)a.revert().then(function(){a.set("editable",false);e()},t);else{L();a.set("editable",false);e()}})}));C.isSevenOne()&&e.then(function(){k.disableEditing();k.refresh.defer("content-mode revertAnnotationControllerChangesAndDisableEditing")});e.catch(function(e){G("Error reverting edit controller changes",e);return new o.Squarespace.Widgets.Alert({"strings.title":v("Error Reverting"),"strings.message":e||v("Please try reverting again.")})});return e},fireRequestSaveChangesEvent:function(e){var t={};e&&(t.model=e);this.fire("request-save-changes",t)},saveAnnotationControllerChangesAndDisableEditing:function(){if(D.getState().isSaving)return o.Promise.reject(new Error("Save in progress"));var e=o.Promise.all(o.Array.reduce(this.annotationControllers,[],function(e,t){if(t.state.dirty){q.setIsSaving(true);e.push(t.save().then(function(){t.set("editable",false);q.setIsSaving(false)}).catch(function(e){q.setIsSaving(false);return o.Promise.reject(e)}))}t.set("editable",false);return e}));e.catch(function(e){G("Error saving edit controller changes",e);return new o.Squarespace.Widgets.Alert({"strings.title":v("Error Saving"),"strings.message":e||v("Please try saving again.")})});return e},_sync:function(){var t=this.get("visible");this._syncBodyClasses();var a=[];o.Array.each(this.annotationControllers,function(e){if(!e.state.rootNode.inDoc()){a.push(e);return}V("Set edit controller visible",{controller:e,isVisible:t});e.set("visible",t)},this);while(0!==a.length){var e=a.shift();this.removeAnnotationController(e)}},_syncBodyClasses:function(){var e=this.get("visible");o.one(o.config.doc.body).toggleClass("sqs-edit-mode",e);o.one(o.config.doc.body).toggleClass("sqs-hide-overlay-widgets",!e);o.Global.fire("_syncBodyClasses",o.config.win)},getDamaskHideFields:function(){var a=[];o.Array.each(this.annotationControllers,function(e){var t=e.state.damaskFieldsToHide;if(!o.Lang.isValue(t))return;o.Object.each(t,function(e,t){e.call(this)&&a.push(t)},e)});return a},getHotAnnotationControllers:function(){return this.annotationControllers},goToContentItem:function(e){if(!o.config.win)return;o.config.win.location.href=e.get("fullUrl")},ensureCollectionInStackedIndexIsOnScreen:function(e,t,a){var i=this.get("contextCollection");if(a||!i||i.get("id")!==t&&!l.isCollectionInIndex(i)){this.registerActionOnNextLoad({action:"ensureCollectionInStackedIndexIsOnScreen",options:{collectionId:e,parentCollectionId:t}});if(!o.config)return;a&&o.config.win.location.reload();var s=o.Squarespace.ContentCollectionCache.getById(e);var n=CONFIG_PANEL.get("contentBridge").getCollectionUrl(s);o.Squarespace.Singletons.Location.setFrameUrlOrRefresh(n);return}var r=this._getAnnotationControllerByType(N.Index);if(!r)return;r.ensureCollectionIsInView(e)},runContentPreviewer:function(e){return x(e,o.config.win.location.pathname,o.config.win.frameElement)},getContentInitializer:function(){this.catalogContentInitializer||(this.catalogContentInitializer=new F(o));return this.catalogContentInitializer},showPageCatalog:function(e,t){ae();var a={detail:te()};W(K,a);W(Q,a);W($,a);if(!this.pageCatalog){z(Z);this.pageCatalog=new B({catalogType:M.COLLECTION,onInitializeContent:this.getContentInitializer().initializePages,getDestinationNode:function(){if(o&&o.config&&o.config.win)return o.config.win.document.body;G("Catalog Render Fail, destination node unavailable");return null},onSelectItem:t||o.Global.fire.bind(o.Global)})}this.pageCatalog.showCatalog(e)},showItemCatalog:function(a){ae();var e={detail:te()};W(X,e);W(Y,e);W(J,e);if(!this.itemCatalog){z(ee);this.itemCatalog=new B({catalogType:M.ITEM,onInitializeContent:this.getContentInitializer().initializePages,getDestinationNode:function(){if(o&&o.config&&o.config.win)return o.config.win.document.body;G("Catalog Render Fail, destination node unavailable");return null},onSelectItem:function(e,t){if(!t||!Object.keys(t).length)return a(null);a(Object.assign({},t,{toCollectionId:this.get("contextCollection").get("id")}))}.bind(this)})}this.itemCatalog.showCatalog()}},{ATTRS:{visible:{value:false},dirty:{value:false},annotationControllersInitialized:{value:false},contextCollection:{}}});if(o.Squarespace.Utils.isInDamaskFrame()){var c=o.config.win.Static.SQUARESPACE_CONTEXT.collection;var u;if(o.Lang.isObject(c)){u=o.Squarespace.ContentCollectionCache.getCollectionFromData(E(c));var d={};o.config.win.SQSSectionTweak={watch:function(e,t){d[e]=t},disconnect:function(e,t){if(!d[e]||!d[e]!==t)return;delete d[e]},refresh:function(e,t){if(d[e])return d[e](t);return false}};o.Global.fire("section:tweaks:ready")}t.ContentModeController=new r({contextCollection:u})}},"1.0",{requires:["base","promise","@sqs/layout-engine/block-content-html","@sqs/layout-engine/events","@sqs/layout-engine/layout-builder","@sqs/layout-engine/models-layout","squarespace-attr-validators","squarespace-block-content-html-editor","squarespace-content-collection-utils","squarespace-content-item-types-editor","squarespace-content-item-types-enum-record-type","squarespace-content-manager-navigation-ui-utils","squarespace-damask-context-globals","squarespace-enum","squarespace-layout-engine-edit-controller","squarespace-layout-renderable-blocks-web-app","squarespace-logger","squarespace-mixins-event-registrar","squarespace-models-content-collection","squarespace-models-content-item","squarespace-models-layout-block-field","squarespace-models-layout-page-collection-data","squarespace-models-template-navigation-list","squarespace-navigation-list-utils","squarespace-promises","squarespace-singletons-location","squarespace-slice-type-groups","squarespace-slide-rendering-edit-controller","squarespace-ss-widget","squarespace-util-authenticated","squarespace-util","squarespace-widgets-alert","squarespace-widgets-confirmation-media","widget-position-align"]})},"./src/main/webapp/universal/scripts-v6/gallery-collection-list.js":function(e,t){YUI.add("squarespace-gallery-collection-list",function(E){var e=E.config.win;var t=E.config.win.document;var a=function(){var p={body:E.one("body"),gallery:E.one(".sqs-system-gallery"),slideWrapper:E.one(".sqs-system-gallery").one(".gallery-wrapper"),slidesAndControls:E.one(".sqs-system-gallery").one(".slides-controls"),circles:E.one(".sqs-system-gallery").one(".circles")},h={show:"show",ready:"sqs-system-gallery-ready",interaction:"sqs-system-gallery-interaction",mouseenterleft:"sqs-system-gallery-hover-slides-left",mouseenterright:"sqs-system-gallery-hover-slides-right",init:"sqs-system-gallery-init",circlesNav:"gallery-navigation-circles",crop:"gallery-auto-crop",iframe:"sqs-system-gallery-video-iframe"},g=null,m=null,t=window.innerWidth;var f=[];var a=[];function v(e,t){var a=E.Squarespace.Template.getTweakValue(e);t?a=parseFloat(a):"string"===typeof a&&(a=a.toLowerCase());"true"===a?a=true:"false"===a&&(a=false);return a}function r(){var e=p.gallery.one(".slide.sqs-active-slide");return e&&"video"===e.getAttribute("data-type")&&e.one("iframe")}function b(){return"grid"!==v("gallery-design")}function S(e){var t=0;var a=e&&e.match(/(\d+):(\d+)/);a&&3===a.length&&(t=a[1]/a[2]);return t}function y(){var e=p.gallery.one(".slide.sqs-active-slide"),t=e&&e.getAttribute("data-slide-id")||null,a=p.gallery.one('.slide-meta[data-slide-id="'+t+'"]');if(a)if(p.body.hasClass(h.crop))a.setStyles({top:null,bottom:null,left:null,width:null});else{if(p.body.hasClass(h.circlesNav)){a.setStyle("top",(parseFloat(e._node.clientHeight)-parseFloat(e.one("img")._node.clientHeight))/2);a.setStyle("bottom",null)}else{a.setStyle("top",null);a.setStyle("bottom",(parseFloat(e._node.clientHeight)-parseFloat(e.one("img")._node.clientHeight))/2)}a.setStyles({left:e.one("img").getComputedStyle("left"),width:e.one("img")._node.clientWidth})}}function o(e,t,a){var i,s,n;if(t){i=t.one(".title");s=t.one(".description");if(i&&i._node.innerHTML||s&&s._node.innerHTML)if(a)n=true;else{t.addClass(h.show);y()}}return n}function _(e){var t=p.gallery.one(".slide.sqs-active-slide"),a=t&&t.one("img"),i=t&&t.getAttribute("data-slide-id")||null,s;p.gallery.all(".slide-meta").removeClass(h.show);e&&Modernizr&&!Modernizr.touch&&p.gallery.addClass(h.interaction);if(r()){p.gallery.addClass(h.iframe);p.gallery.removeClass(h.mouseenterleft);p.gallery.removeClass(h.mouseenterright)}else{p.gallery.removeClass(h.iframe);e&&"Gallery:currentIndexChange"===e.type&&(-1===e.direction?p.gallery.addClass(h.mouseenterleft):p.gallery.addClass(h.mouseenterright))}if(i){o(t,p.gallery.one('.slide-meta[data-slide-id="'+i+'"]'));if(a&&p.body.hasClass(h.circlesNav)){var n=function(){s=Math.max(0,(parseFloat(t._node.clientHeight)-parseFloat(a._node.clientHeight))/2);p.circles.setStyle("bottom",s)};a.get("complete")?n():f.push(a.on("load",n))}}}function i(){var e=v("gallery-loop"),t=v("gallery-auto-crop"),a=v("gallery-autoplay"),i=v("gallery-transitions"),s=1e3*v("galleryAutoplaySpeed",true),n=v("gallery-navigation"),r=v("gallery-aspect-ratio"),o=r.split(" ")[0],l=!b(),c=0;o=parseInt(r.split(":")[1],10)/parseInt(r.split(":")[0],10);r=p.gallery._node.clientWidth*o;p.gallery.removeClass(h.init);p.gallery.removeClass(h.ready);p.gallery.removeClass(h.interaction);p.gallery.removeClass(h.mouseenterleft);p.gallery.removeClass(h.mouseenterright);p.gallery.all(".slide-meta").removeClass(h.show);if(g){c=g.get("currentIndex");p.gallery.all(".sqs-disabled").removeClass("sqs-disabled");p.gallery.all(".sqs-active-slide").removeClass("sqs-active-slide");p.gallery.all(".slide, img").setStyles({visibility:null,left:null,top:null,overflow:null,width:null,height:null});g.destroy()}if(m){p.gallery.all(".thumbnail img[data-src]").each(function(e){e.setStyles({height:null,width:null,top:null,left:null})});m.destroy()}p.gallery.one(".slides-controls").setStyle("height",l?null:r);p.slideWrapper.setStyle("minHeight",l?null:r);g=new E.SQS.Gallery.Gallery2({container:".slides",slides:".slide",currentIndex:c,elements:{next:".next-slide, .simple .next",previous:".previous-slide, .simple .previous",controls:".dots, .numbers, .circles",currentIndex:".current-index",totalSlides:".total-slides"},loop:e,autoplay:!l&&a,autoplayOptions:{randomize:false,timeout:s,pauseOnMouseover:[".thumbnail-wrapper"]},lazyLoad:true,loaderOptions:{mode:l?"auto"===v("aspect-ratio")?"none":"fill":t?"fill":"fit"},design:l?"autocolumns":"stacked",designOptions:{transition:i,lightbox:l,clickBehavior:"auto",gutter:v("gridSpacing",true),columnWidth:v("gridSize",true),aspectRatio:S(v("aspect-ratio"))},historyHash:true});p.gallery.all(".arrow").each(function(e){e.setStyle("top",p.slideWrapper._node.clientHeight/2)});if(!l&&"thumbnails"===n){m=new E.SQS.Gallery.Gallery2({container:".thumbnail-wrapper",currentIndex:c,loaderOptions:{mode:"fill",load:true},lazyLoad:true,design:"strip"});g.addChild(m)}var u=g.after("currentIndexChange",_);_();var d=g.after("image-loaded",y);y();p.gallery.addClass(h.ready);f.push(u,d)}function s(e){if("function"===typeof e){window.throttleTimeout&&clearTimeout(window.throttleTimeout);window.throttleTimeout=setTimeout(e,750)}}function n(e,t){var a=e._event.offsetX||e._event.layerX;p.gallery.addClass(h.interaction);if(e._event.target&&("img"===e._event.target.localName||"sqs-video-opaque"===e._event.target.className||e.target.hasClass("slide")))if(t){p.gallery.removeClass(h.mouseenterleft);p.gallery.removeClass(h.mouseenterright)}else if(a<=e._currentTarget.clientWidth/2){p.gallery.removeClass(h.mouseenterright);p.gallery.addClass(h.mouseenterleft)}else{p.gallery.removeClass(h.mouseenterleft);p.gallery.addClass(h.mouseenterright)}}function l(e){var t=e.keyCode;(37===t||39===t&&b())&&p.gallery.addClass(h.interaction)}function e(){var e=new E.Squarespace.ResizeEmitter({timeout:100});e.on("resize:end",function(){if(window.innerWidth!==t){t=window.innerWidth;s(i)}});a.push(e);Modernizr&&!Modernizr.touch&&f.push(E.on("mousemove",function(e){b()&&n(e,false)},p.gallery.one(".slides-controls")),E.on("mouseleave",function(e){if(b()){n(e,true);p.gallery.removeClass(h.iframe)}},p.gallery.one(".slides-controls")),E.on("mouseenter",function(e){b()&&r()&&p.gallery.addClass(h.iframe)},p.gallery.one(".slides-controls")));f.push(E.on("keydown",l))}function c(a,i){f.push(E.Global.on("tweak:change",function(e){if(e.getName()===a&&"function"===typeof i){var t=e.getValue();"true"===t?t=true:"false"===t&&(t=false);i(t)}}))}function u(){c("gallery-loop",i);c("gallery-transitions",i);c("gallery-auto-crop",i);c("gallery-navigation",function(e){"Thumbnails"!==e||p.gallery.one(".thumbnail-wrapper img[src]")||i();y()});c("gallery-autoplay",function(e){g.set("autoplay",e)});c("gallery-aspect-ratio",function(){i()});c("galleryAutoplaySpeed",function(){s(i)});c("galleryInfoBackground",function(){_()});c("gallery-design",i);c("aspect-ratio",i);c("gridSpacing",i);c("gridSize",i);E.Global&&f.push(E.Global.on(["tweak:reset","tweak:close"],function(e){E.later(500,this,i)},this))}function d(){i();e();E.Lang.isValue(Static.SQUARESPACE_CONTEXT.authenticatedAccount)&&u()}function C(){f=f.filter(function(e){e.detach();return false});a=a.filter(function(e){"function"===typeof e.destroy&&e.destroy();return false});if(g){g.get("container")&&g.get("container").hide();"function"===typeof g.destroy&&g.destroy()}if(m){m.get("container")&&m.get("container").hide();"function"===typeof m.destroy&&m.destroy()}}return{init:d,destroy:C}};var i;e.Squarespace.onInitialize(E,function(){var e=t.querySelector(".sqs-gallery-list");if(e){i=new a;i.init()}});e.Squarespace.onDestroy(E,function(){if(i){i.destroy&&"function"===typeof i.destroy&&i.destroy();i=null}})},"1.0",{requires:["base","node","squarespace-dom-emitters-resize","squarespace-gallery-ng","squarespace-image-loader","squarespace-public-api"]})},"./src/main/webapp/universal/scripts-v6/gallery-manager.js":function(e,t){var l=".js-gallery-lightbox-opener";YUI.add("squarespace-gallery-manager",function(r){var e={lightboxify:function(e,t){this._destroyLightbox();if(!e||!t||!t.size()){this.unlightboxify(t);return}var r=!!t.item(0).ancestor(".sqs-system-gallery");var o=[];t.each(function(e,t){o.push(this._createLightboxItem(e));var a=e.getAttribute("data-click-through-url");if(a)return;var i=e.one(l)||e;if(!i)return;var s={index:t,slideHitArea:i,lightboxSet:o,isFromHash:r};var n=this._makeOpenLightbox(s).bind(this);i.on("click",n,this);i.on("keydown",function(e){var t=13===e.keyCode;var a=32===e.keyCode;(t||a)&&n(e)},this)},this);r&&this._openInitialSlide(t,o)},unlightboxify:function(e){this._destroyLightbox();if(!e)return;var t;e.each(function(e){t=e.one(l);if(t){t.detach("click");t.detach("keydown")}})},_destroyLightbox:function(){if(!this.lightbox)return;this.lightbox.destroy();delete this.lightbox},_createLightboxItem:function(e){if("video"===e.getAttribute("data-type")){var t=e.one(".sqs-video-wrapper");var a=t.videoloader.get("overlay");a&&a.detach("click");return{content:t}}var i;var s;var n;e.hasAttribute("data-title")?i=e.getAttribute("data-title"):e.one("[data-title]")?i=e.one("[data-title]").getAttribute("data-title"):e.one(".title")&&(i=e.one(".title").getHTML());e.hasAttribute("data-description")?s=e.getAttribute("data-description"):e.one("[data-description]")?s=e.one("[data-description]").getAttribute("data-description"):e.one(".description")&&(s=e.one(".description").getHTML());e.hasAttribute("data-lightbox-theme")?n=e.getAttribute("data-lightbox-theme"):e.one("[data-lightbox-theme]")?n=e.one("[data-lightbox-theme]").getAttribute("data-lightbox-theme"):e.one(".lightbox-theme")&&(n=e.one(".lightbox-theme").getHTML());return{theme:n,content:e.one("img"),meta:(i?"<h1>"+i+"</h1>":"")+(s||"")}},_getLightboxTheme:function(e){var t=e.ancestor("[data-lightbox-theme]",true);if(!t)return"dark";return"light"===t.getAttribute("data-lightbox-theme")?"light":"dark"},_makeOpenLightbox:function(t){return function(e){e.halt();this._destroyLightbox();this.lightbox=new r.Squarespace.Lightbox2({controls:{previous:true,next:true},set:t.lightboxSet,currentSetIndex:t.index,historyHash:t.isFromHash,theme:this._getLightboxTheme(t.slideHitArea)});this.lightbox.render();t.isFromHash&&this.lightbox._slideshow.set("currentIndex",t.index)}},_getInitialSlideId:function(e){var t=new r.HistoryHash;var a=t.get("itemId");if(a)return a;if(e&&e.size()){var i="";var s=e.item(0).ancestor(".slides");if(s){i=s.getAttribute("data-collection-full-url");return window.location.pathname.replace(i,"")}}var n=window.location.pathname.split("/");return n[n.length-1]},_getSlideIndexByLink:function(e,s){var n=-1;e.some(function e(t,a){if(t.ancestor(".sqs-layout"))return false;var i=t.getAttribute("data-slide-url");if(t.getAttribute("data-slide-id")!==s&&i!==s)return false;n=a;return true},this);return n},_getSlideIndexByRoughUrl:function(e,r){var o=-1;e.some(function e(t,a){if(t.ancestor(".sqs-layout"))return false;var i=t.getAttribute("data-slide-url");var s=i.substr(i.length-r.length)===r;var n=i.indexOf("/"+r)>-1;if(!s||!n)return false;o=a;return true},this);return o},_openInitialSlide:function(e,t){var a=this._getInitialSlideId();if(!a)return;var i=this._getSlideIndexByLink(e,a);if(-1===i){i=this._getSlideIndexByRoughUrl(e,a);if(-1===i)return}this._destroyLightbox();this.lightbox=new r.Squarespace.Lightbox2({controls:{previous:true,next:true},set:t,currentSetIndex:i,historyHash:"yui-throttle"});this.lightbox.render()}};r.mix(r.SQS.Gallery.Manager,e,true);r.Squarespace.GalleryManager=r.SQS.Gallery.Manager},"1.0",{requires:["squarespace-image-loader","squarespace-plugin-lightbox2","squarespace-video-loader","squarespace-widgets-lightbox2","@sqs/yui-gallery/manager"]})},"./src/main/webapp/universal/scripts-v6/gallery-ng.js":function(e,t){YUI.add("squarespace-gallery-ng",function(e){e.namespace("Squarespace");e.Squarespace.Gallery2=e.SQS.Gallery.Gallery2;e.Squarespace.GalleryDesigns2=e.SQS.Gallery.Designs},"1.0",{requires:["@sqs/yui-gallery"]})},"./src/main/webapp/universal/scripts-v6/gallery/index.js":function(e,t,a){var u=a("./common/temp/node_modules/@sqs/error-reporter/dist/index.js");YUI.add("squarespace-gallery",function(l){l.namespace("Squarespace");var c=false;var e=l.Squarespace.Legacy.Class;l.augment(l.Node,e.create({outerWidth:function(e){var t=parseFloat(this.getComputedStyle("marginLeft"));var a=parseFloat(this.getComputedStyle("marginRight"));u.trackCaughtError("squarespace-gallery-deprecation","YNode#outerWidth invoked");return this.get("offsetWidth")+t+a},outerHeight:function(e){var t=parseFloat(this.getComputedStyle("marginTop"));var a=parseFloat(this.getComputedStyle("marginBottom"));u.trackCaughtError("squarespace-gallery-deprecation","YNode#outerHeight invoked");return this.get("offsetHeight")+t+a}}));l.Squarespace.Gallery=e.create({defaultOpts:{previous:false,next:false,itemSelector:false,startIndex:0,loop:false,design:"off",designOptions:{},autoplay:false,autoplayOptions:{timeout:1e3,resumeAfter:1e3,randomize:false},currentIndex:false,totalSlides:false,linked:false,keyboard:{previous:"down:37",next:"down:39"},renderWithCanvas:false,loaderOptions:{},updateContainerHeight:false,focusOnClick:false},getContainer:function(){return this.elems.container},getSlide:function(e){return this.elems.slides.item(e)},getCurrentSlide:function(){return this.elems.slides.item(this.data.currentIndex)},getCurrentSlideId:function(){return this.getCurrentSlide().getAttribute("data-slide-id")||this.data.currentIndex},getSlides:function(){return this.elems.slides},initialize:function(e){u.trackCaughtError("squarespace-gallery-deprecation","Y.Squarespace.Gallery initialized!");l.Lang.isBoolean(e.keyboard)&&e.keyboard&&delete e.keyboard;this.params=l.merge(this.defaultOpts,e);this.elems={};var t=l.one(this.params.slideshowElement);if(l.Lang.isNull(t))throw new Error("No gallery '"+this.params.slideshowElement+"' container found.");var a=this.params.itemSelector?t.all(this.params.itemSelector):t.get("children");this.elems.container=t;this.elems.slides=a;if(this.getContainer().getData("galleryInstance")){this.getContainer().getData("galleryInstance")._debug.warn("Node already bound to gallery instance.");return}this._debug=new l.Squarespace.Debugger({name:"Gallery",uid:true});this.getContainer().setData("galleryInstance",this);this.history=new l.HistoryHash;if(this.params.historyHash||this.history.get("itemId")){this.history=new l.HistoryHash;var i=this.history.get("itemId")||this.history.get(this.params.historyHash);var s;if(i){this.elems.slides.each(function(e,t){e.getAttribute("data-slide-id")===i&&(s=t)});l.Lang.isNumber(s)||(s=parseInt(this.history.get(this.params.historyHash),10));this.history.get("itemId")&&this.history.replaceValue("itemId",null);l.Lang.isNumber(s)&&(this.params.startIndex=s)}}this.data={currentIndex:this.params.startIndex,totalSlides:a.size()};this.events=[];if(this.data.totalSlides<=0)return false;if(!l.Squarespace.GalleryDesigns[this.params.design]){var n=[];for(var r in l.Squarespace.GalleryDesigns)n.push(r);throw new Error("Design '"+this.params.design+"' not found. Currently loaded designs: ["+n.join(", ")+"].")}this.design=new l.Squarespace.GalleryDesigns[this.params.design];this.design.gallery=this;this.design.options=l.merge(this.design.options,this.params.designOptions);this.params.previous&&l.all(this.params.previous).each(function(e){this.events.push(e.on("click",function(e){e.halt();this.previousSlide()},this))},this);this.params.next&&l.all(this.params.next).each(function(e){this.events.push(e.on("click",function(e){e.halt();this.nextSlide()},this))},this);this.params.focusOnClick&&a.each(function(e){e.on("click",function(){this.fire("changeIndex",a.indexOf(e))},this)},this);if(this.params.keyboard){var o=function(){if(this.params.keyboardWhenInFrame)return this.getContainer().inRegion(l.one(this.params.keyboardWhenInFrame).get("region"));return true};this.params.keyboard.previous&&this.events.push(l.on("key",function(){if(!o.call(this))return;this.previousSlide()},window,this.params.keyboard.previous,this));this.params.keyboard.next&&this.events.push(l.on("key",function(){if(!o.call(this))return;this.nextSlide()},window,this.params.keyboard.next,this))}this.params.linked&&l.Array.each(this.params.linked,function(e){this.linkGallery(e)},this);this.setup();this.fire("changeIndex",this.params.startIndex);this.isInitialized=true},linkGallery:function(t){function a(t,a){t&&this._changeIndex(a);l.Array.each(this.elems.linked,function(e){t!==e&&e._changeIndex(a)})}if(!this.elems.linked){this.on("changeIndex",function(e){a.call(this,false,e)},this);this.elems.linked=[]}this.elems.linked.push(t);t.on("changeIndex",function(e){a.call(this,t,e)},this)},setup:function(){this.on("changeIndex",this._changeIndex);this.loadSlides();this.design.setup(this.elems.container,this.elems.slides);if(this.params.autoplay){var t=this;setInterval(function(){if(t.params.autoplayOptions.randomize){var e=Math.ceil(Math.random()*t.data.totalSlides);while(e===t.data.currentIndex)e=Math.ceil(Math.random()*t.data.totalSlides);t.fire("changeIndex",e)}else t.nextSlide()},this.params.autoplayOptions.timeout)}c&&console.log("Y.Squarespace.Gallery.setup",[this.params,this.data,this.elems]);this.params.updateContainerHeight&&this.on("changeIndex",this.updateContainerHeight)},getSlideDimension:function(e,t){var a=this.elems.slides.item(e);var i=a;a.one("img,canvas")&&(i=a.one("img,canvas"));i&&"inline"===a.getStyle("display")&&(a=i);var s="width"===t?"offsetWidth":"offsetHeight";if(i.loader){if(!i.loader.get("loaded"))return i.loader.getDimensionForValue(t,a.get("width"===t?"offsetHeight":"offsetWidth"));return i.loader.get("node").get(s)}return a.get(s)},updateContainerHeight:function(){var t={container:this.elems.container};l.Lang.isObject(this.params.updateContainerHeight)&&(t=l.merge(t,this.params.updateContainerHeight));var a=this.getSlideDimension(this.data.currentIndex,"height");t.maxHeight&&a>t.maxHeight&&(a=t.maxHeight);var e=l.all(t.container);t.anim&&this._updateContainerHeightRanOnce?e.each(function(e){e.anim({},l.merge({to:{height:a},duration:.3,easing:l.Easing.easeOutStrong},t.anim)).run()}):e.setStyles({height:a});this._updateContainerHeightRanOnce=true},previousSlide:function(){var e=this.data.currentIndex-1;if(e<0&&!this.params.loop)return;this.fire("changeIndex",e)},nextSlide:function(){var e=this.data.currentIndex+1;if(e>=this.data.totalSlides&&!this.params.loop)return;this.fire("changeIndex",e)},beforeChange:function(e){if(!this.params.loop){this.params.next&&(e.toIndex>=this.data.totalSlides-1?l.all(this.params.next).addClass("disabled"):l.all(this.params.next).removeClass("disabled"));this.params.previous&&(e.toIndex<=0?l.all(this.params.previous).addClass("disabled"):l.all(this.params.previous).removeClass("disabled"))}this.fire("before-change",e)},afterChange:function(e){if(this.params.currentIndex||this.params.totalSlides){l.all(this.params.currentIndex).each(function(e){e.set("innerHTML",this.data.currentIndex+1)},this);l.all(this.params.totalSlides).each(function(e){e.set("innerHTML",this.data.totalSlides)},this)}this.params.historyHash&&this.history.replaceValue(this.params.historyHash,this.getCurrentSlideId());this.fire("after-change",e)},changeIndex:function(e){this.fire("changeIndex",e)},_changeIndex:function(e){if(l.Lang.isObject(e))return;if(!this.params.loop){e<0&&(e=0);e>=this.data.totalSlides&&(e=this.data.totalSlides-1)}e<0&&(e=this.data.totalSlides+e);if(this.isInitialized&&this.data.currentIndex===e)return;c&&console.log("Y.Squarespace.Gallery.changeIndex",[e]);var t=this.data.currentIndex;var a=e%this.data.totalSlides;var i=this.elems.slides;var s=t===this.data.totalSlides-1&&0===a;var n=0===t&&a===this.data.totalSlides-1;var r;t<a&&!s&&!n||t>a&&s&&!n?r="fwd":(t>a&&!n||t<a&&n)&&(r="rev");var o={fromIndex:t,toIndex:a,direction:r};this.beforeChange(o);i.filter(".active").removeClass("active");i.item(a).addClass("active");this.fire("change",o);this.data.currentIndex=a;this.afterChange(o)},loadSlides:function(e){var t=this.elems.container.all("img[data-src][data-image-dimensions][data-image-focal-point]");t.plug(l.Squarespace.Loader2,this.params.loaderOptions)}});l.augment(l.Squarespace.Gallery,l.EventTarget);l.Squarespace.GalleryDesigns={};l.Squarespace.GalleryDesigns.off=e.create({gallery:false,options:{},beforeChange:function(e){},afterChange:function(e){},change:function(e,t){},setup:function(){},getGallery:function(){return this.gallery},events:[]})},"1.0",{requires:["node","event-key","squarespace-image-loader","squarespace-legacy-class","squarespace-ui-base","history"]})},"./src/main/webapp/universal/scripts-v6/gismo.js":function(e,t){YUI.add("squarespace-gismo",function(a){a.Squarespace.GismoBase=function(){this._gismoEvents={};this._timers={};this._anims=this._anims||[]};a.Squarespace.GismoBase.prototype={destructor:function(){a.Object.each(this._gismoEvents,function(e,t){a.Array.invoke(e,"detach");this._gismoEvents[t]=null},this);a.Object.each(this._timers,function(e,t){a.Array.invoke(e,"cancel");this._timers[t]=null},this);if(this._anims.shift){a.Array.invoke(this._anims,"destroy");this._anims=null}else this._anims.destructor&&this._anims.destructor()},_anim:function(e,t,a){var i=e.anim(t,a||{});i.on("end",function(){this._anims.remove(i)},this);this._anims.push(i);return i},_event:function(e,t){t=t||"generic";this._gismoEvents[t]=this._gismoEvents[t]||[];this._gismoEvents[t].push(e)},_getEvents:function(e){return this._gismoEvents[e||"generic"]},_flushEvents:function(e){var t=this._gismoEvents[e||"generic"];if(t){a.Array.invoke(t,"detach");this._gismoEvents[e]=null}},_timer:function(e,t){t=t||"generic";this._timers[t]=this._timers[t]||[];this._timers[t].push(e)}}},"1.0",{requires:["array-invoke","squarespace-anims"]})},"./src/main/webapp/universal/scripts-v6/gizmo.js":function(e,t,a){var r=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-gizmo",function(o){o.namespace("Squarespace");var t="squarespace-";var a="-bbox";var i=new RegExp("[ ]+","g");var s=new RegExp("[^a-zA-Z0-9\\-]","g");var n=function(e,s,n,r,t){var a=t?o.Array.reject:o.Array.filter;return a(e,function(e){for(var t=0;t<n.length;++t){var a=n[t];var i=r[t];if(e[a]!==i)return false}s&&s(e);return true})};var l=function(t,e,a,i,s){if(this._destroyed)return;if(o.Lang.isArray(e))return o.Array.map(e,function(e){return l.apply(this,[t].concat(o.Array(e)))},this);if(o.Lang.isObject(e)&&o.Lang.isFunction(e[t])){var n=[a,i,s||this];n=n.concat(Array.prototype.slice.call(arguments,5));var r=e[t].apply(e,n);this._eventSubList.push({object:e,event:a,eventSub:r});return r}throw new Error("Gizmo["+this._name+"]: Could not subscribe to event: "+a)};o.Squarespace.Gizmo=Class.create({_name:"Gizmo",_events:{render:{},rendered:{},destroy:{},destroyed:{}},initialize:function(e){o.augment(this,o.EventTarget,true,null,{prefix:this._name});this.params=o.merge(e);this._initState();var t=this;var a=function(e,t){this.publish(t,e)};while(null!==t&&void 0!==t){o.Object.each(t._events,a,this);t=t.superclass}},getClassNames:function(){var e=this;var t=[];for(;;e=e.superclass){if(!e)return t;t.push(e.getClassName())}},_initState:function(){this._el=null;this._parentEl=null;this._eventSubList=[];this._anims=[];this._timers=[];this._destroyed=false;this.destroyed=false;this._children=[];this._guid=o.guid();this._name||(this._name=r("No Name"))},getClassName:function(){return this._name},getId:function(){return this._guid},getCssClassName:function(){var e=this._name;e=e.trim().replace(i,"-").replace(s,"").toLowerCase();return t+e},getElement:function(){return this._el},render:function(e){this.fire("render");e=e||this._parentEl;if(this.params.noBoundingBox)this._el=this._render();else{this._el=o.Node.create("<div></div>");this._el.addClass(this.getCssClassName()+a);this._el.append(this._render())}e&&o.Lang.isFunction(e.append)&&e.append(this._el);this._parentEl=e;this.fire("rendered")},_render:function(){},_subscribe:function(e,t,a,i){var s=["on"].concat(o.Array(arguments));return l.apply(this,s)},_subscribeOnce:function(e,t,a,i){var s=["once"].concat(o.Array(arguments));return l.apply(this,s)},_subscribeBefore:function(e,t,a,i){var s=["before"].concat(o.Array(arguments));return l.apply(this,s)},_subscribeAfter:function(e,t,a,i){var s=["after"].concat(o.Array(arguments));return l.apply(this,s)},_unsubscribe:function(e,t){var a=t?["object","event"]:["object"];this._eventSubList=n(this._eventSubList,function(e){e.eventSub.detach()},a,o.Array(arguments),true)},_detach:function(e){this._eventSubList=n(this._eventSubList,function(e){e.eventSub.detach()},["eventSub"],[e],true)},_clearEvents:function(){var e=this._eventSubList;for(var t=0;t<e.length;++t)e[t].eventSub.detach();this._eventSubList=[]},destroy:function(){if(this._destroyed){false;return}if(!this._eventSubList){false;throw new Error("Gizmo["+this._name+"] was never initialzed.  Missing _super?")}this.fire("destroy");this._destroy();var e=0;this._clearEvents();this._eventSubList=[];var t=[];o.Array.each(this._anims,function(e){t.push(e)},this);o.Array.each(t,function(e){e.get("running")&&e.stop(false);e.destroy()});this._anims=null;var a=this._children;while(a.length>0){var i=a[0];i._removeParent();i.destroy()}this._children=null;var s=this._timers;for(e=0;e<s.length;++e){var n=s[e];n.cancel()}this._timers=null;if(this._el&&o.Lang.isFunction(this._el.remove)){this._el.remove();this._el=null}this._destroyed=true;this.destroyed=true;this.fire("destroyed")},_destroy:function(){},isDestroyed:function(){return this._destroyed},_setParent:function(e){this._parentGizmo=e},_removeParent:function(){if(this._parentGizmo){this._parentGizmo._removeChild(this);this._parentGizmo=null}},_addChild:function(e){if(!this._children)return;e._setParent&&e._setParent(this);this._children.push(e)},_removeChild:function(e){this._children.splice(this._children.indexOf(e),1)},_getChildren:function(){return this._children},_anim:function(e){if(this._destroyed)return;if(!e.node)throw new Error("Gizmo["+this._name+"]: Animation must specify a node!");var t;if(e.node.ancestor("body",true))if(e.node._node){t=new o.Anim(e);t.on("end",function(e){this._removeAnim(t)},this);this._anims.push(t)}else{false;t=new o.Anim}else{false;t=new o.Anim}return t},_removeAnim:function(e){var t=this._anims.indexOf(e);-1!==t&&this._anims.splice(t,1)},_trace:function(e){var t=this.getEvent(e);var a=t.getSubs();var i=[];var s=function(e,t){if(e.context&&e.context.getName)i.push(e.context.getName());else{var a={};a[e.fn.name]=e.fn.toString();i.push(a)}};for(var n=0;n<a.length;++n){var r=a[n];o.Object.each(r,s)}false;this.fire(e)},_later:function(e,t,a,i,s){if(this._destroyed)return;a=a||this;var n=o.later(e,a,t,i,s);this._timers.push(n);return n},_cb:function(e){var t=o.bind(function(){if(!this._destroyed)return e.apply(this,arguments)},this);return t}});o.augment(o.Squarespace.Gizmo,o.EventTarget);o.Squarespace.ZombieGizmo=Class.extend(o.Squarespace.Gizmo,{_name:"ZombieGizmo",_events:{resurrect:{},resurrected:{}},initialize:function(e){this._super(e)},destroy:function(){this._super();this.resurrect()},resurrect:function(){this.fire("resurrect");this._initState();this.fire("resurrected")}})},"1.0",{requires:["array-extras","event-custom","node"]})},"./src/main/webapp/universal/scripts-v6/global-event-bubbler.js":function(e,t){YUI.add("squarespace-global-event-bubbler",function(a){a.namespace("Squarespace");var e=["layout-engine:block-menu-search-query-change","layout-engine:block-menu-search-query-enter","layout-engine:open-block-menu","layout-engine:insert-block","layout-engine:delete-block"];a.Squarespace.GlobalEventBubbler=a.Base.create("global-event-bubbler",a.Base,[],{publishEventsForBubbling:function(){a.Array.forEach(e,function(e){a.Global.publish(e)})},bubbleEventsToGlobal:function(){a.Array.forEach(e,function(t){a.Global.publish(t);a.SQS.LayoutEngine.Events.on(t,function(e){a.Global.fire(t,e)},a)})}},{})},"1.0",{requires:["base","@sqs/layout-engine/events"]})},"./src/main/webapp/universal/scripts-v6/google-domains-consent-service.js":function(e,t,a){var o=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-google-domains-consent-service",function(n){n.namespace("Squarespace");var s="https://oauth.{appDomain}/auth/google-web-hosting/consent-initialize?domain={domain}&websiteId={websiteId}&userId={userId}";var r="https://oauth.{appDomain}/auth/google-web-hosting/domain-consent-initialize?domain={domain}&requestId={requestId}";var a="https://oauth.{appDomain}/auth/google-web-hosting/list-domains-consent-initialize?requestIdentifier={identifier}";var i="https://oauth.{appDomain}/auth/google-web-hosting/signup-consent-initialize?domain={domain}&userId={userId}";n.Squarespace.GoogleDomainsConsentService=new(n.Base.create("domainConsentService",n.Base,[],{initializer:function(){this._openWindows={};this._messageCallbacks={};this._messageEventHandler=window.addEventListener("message",n.bind(this._routeMessage,this))},destructor:function(){window.removeEventListener("message",this._messageEventHandler);this._endMonitor()},getConsent:function(e,i,s){return n.Squarespace.Promises.create(function(t,a){this._messageCallbacks[e]=function(e){e.consentGranted?t(e):a()};this._openConsentWindow(e,i,s)},this)},getConsentForNewSite:function(e,i){return n.Squarespace.Promises.create(function(t,a){this._messageCallbacks[e]=function(e){e.consentGranted?t(e):a()};this._openSignupConsentWindow(e,i)},this)},getConsentForDomain:function(e){return n.Squarespace.Promises.create(function(t,a){this._messageCallbacks[e]=function(e){e.consentGranted?t(e):a(e)};this._openListConsentWindow(e)},this)},getDomainOnlyConsent:function(e,i,s){return n.Squarespace.Promises.create(function(t,a){this._messageCallbacks[e]=function(e){e.consentGranted?t(e):a()};this._openDomainConsentOnlyWindow(e,i,s)},this)},getConsentForList:function(){return n.Squarespace.Promises.create(function(t,a){var e=n.guid();this._messageCallbacks[e]=function(e){e.consentGranted?t(e):a()};this._openListConsentWindow(e)},this)},_routeMessage:function(e){var t=e.data.domain;if(n.Lang.isString(t)){var a=this._messageCallbacks[t];if(n.Lang.isFunction(a)){a.call(this,e.data);delete this._messageCallbacks[t]}}},_registerOpenWindow:function(e,t){n.Object.size(this._openWindows)<=0&&this._beginMonitor();this._openWindows[e]=t},_unregisterOpenWindow:function(e){delete this._openWindows[e];n.Object.size(this._openWindows)<=0&&this._endMonitor()},_endMonitor:function(){this._monitor&&this._monitor.cancel()},_beginMonitor:function(){this._monitor=n.later(300,this,function(){var a=[];n.Object.each(this._openWindows,function(e,t){if(e.closed){this._routeMessage({data:{domain:t,consentGranted:false}});a.push(t)}},this);n.Array.each(a,this._unregisterOpenWindow,this)},null,true)},_openListConsentWindow:function(e){var t=n.Lang.sub(a,{identifier:e,appDomain:Static.SQUARESPACE_CONTEXT.appDomain});this._openConsentPopup(t,e)},_openDomainConsentOnlyWindow:function(e,t,a){var i=n.Lang.sub(r,{requestId:t,domain:e,websiteId:a,appDomain:Static.SQUARESPACE_CONTEXT.appDomain});this._openConsentPopup(i,e)},_openConsentWindow:function(e,t,a){var i=n.Lang.sub(s,{domain:e,appDomain:Static.SQUARESPACE_CONTEXT.appDomain,websiteId:a||"",userId:t});this._openConsentPopup(i,e)},_openSignupConsentWindow:function(e,t){var a=n.Lang.sub(i,{domain:e,userId:t,appDomain:Static.SQUARESPACE_CONTEXT.appDomain});this._openConsentPopup(a,e)},_openConsentPopup:function(e,t){var a=window.open(e,o("Google Domains Consent"),"status=0,width=1020,height=520");this._registerOpenWindow(t,a)}}))},"1.0",{requires:["base","promise","squarespace-promises"]})},"./src/main/webapp/universal/scripts-v6/google-domains-utils.js":function(e,t,a){var h=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var g=a("./src/main/webapp/universal/src/shared/utils/formatting/substituteString.js");var m=a("./src/main/webapp/frontend/packages/enums/DomainTypes.js");var f=a("./src/main/webapp/frontend/packages/enums/DomainProviderId.js");var v=a("./src/main/webapp/universal/src/shared/utils/domains/apis/DomainsAPI.ts");var b=a("./src/main/webapp/universal/src/shared/utils/domains/apis/DomainConnectAPI.ts");var S=a("./src/main/webapp/universal/src/shared/utils/sqsAxios.ts");YUI.add("squarespace-google-domains-utils",function(o){o.namespace("Squarespace.GoogleDomains");var s=function(e){o.Lang.isString(e)||(e="");var t=new o.Squarespace.Lightbox({disableNormalClose:true,clickAnywhereToExit:false,content:'<div class="bigtext"><div class="title">'+h("Failed to add domain")+'</div><div class="description">'+e+'</div><div class="buttons"></div></div>',margin:100,noHeightConstrain:true});t.show()};o.Squarespace.GoogleDomains.initialize=function(){var e=o.Squarespace.GoogleDomains.getGoogleDomainUrlParams();if(o.Lang.isNull(e.userId)||o.Lang.isNull(e.domainName))return;o.Squarespace.SessionStorage.saveSessionData("googleDomain",e,(new Date).addDays(7))};o.Squarespace.GoogleDomains.getGoogleDomainUrlParams=function(){var e=o.QueryString.parse(window.location.search.substr(1));return{userId:e.userId||null,domainName:e.domainName||null}};o.Squarespace.GoogleDomains.getGoogleDomainSessionData=function(){return o.Squarespace.SessionStorage.getSessionData("googleDomain")};o.Squarespace.GoogleDomains.isGoogleDomainFlow=function(){var e=this.getGoogleDomainSessionData();if(o.Lang.isObject(e))return true;e=o.Squarespace.GoogleDomains.getGoogleDomainUrlParams();if(!o.Lang.isNull(e.userId)&&!o.Lang.isNull(e.domainName))return true;return false};o.Squarespace.GoogleDomains.showConfirmMessage=function(e,t,a){var i=o.Squarespace.GoogleDomains.getGoogleDomainUrlParams();var s=i.userId;var n="http://"+window.location.hostname;var r=new o.Squarespace.Lightbox({disableNormalClose:true,clickAnywhereToExit:false,content:g('<div class="bigtext"><div class="title">'+h("Connect Domain: {domainName}")+'</div><div class="description">'+h("Your site <b>{url}</b> will be available at <b>http://www.{domainName}</b>.")+'</div><div class="buttons"><input type="button" class="login-button" name="login" value="'+h("Connect Domain")+'"/></div></div>',{domainName:t,url:n}),noHeightConstrain:true});r.show();r.getContentEl().on("click",function(){r.hide();a(e,s,t)})};o.Squarespace.GoogleDomains.startConsentFlow=function(e,t,a){var i=new o.Squarespace.Spinner({color:"light",size:"large",render:o.one(".spinner-wrapper")});i.spin();o.Squarespace.Analytics.trackInternal("domain_link_google_domain_start");return o.Squarespace.GoogleDomainsConsentService.getConsent(a,t,e).then(function(e){var t=new o.Squarespace.Domains.Models.Domain({name:a,type:m.LINKED,providerId:f.GOOGLE,providerData:{userId:e.userId,accessToken:e.accessToken,subId:e.subId,email:e.email}});t.save({},function(e){i.stop();if(o.Lang.isValue(e)){s(e.responseJSON.message);return}window.location="/config"})},function(e){o.Squarespace.Analytics.trackInternal("domain_link_domain_failure",{host:"google"});i.stop();s(e)})};function t(e){var t="http://"+window.location.hostname;return new o.Squarespace.Lightbox({disableNormalClose:true,clickAnywhereToExit:false,content:g('<div class="bigtext"><div class="title">'+h("Connect Domain: {domainName}")+'</div><div class="description">'+h("Your site <b>{url}</b> will be available at <b>http://www.{domainName}</b>.")+'</div><div class="buttons"><input type="button" class="login-button" name="login" value="'+h("Connect Domain")+'"/></div></div>',{domainName:e,url:t}),noHeightConstrain:true})}function n(){var e=new o.Squarespace.Spinner({color:"light",size:"large",render:o.one(".spinner-wrapper")});e.spin();return e}function i(e){return v.createLinkedDomain({name:e,type:m.LINKED,providerId:f.GOOGLE})}function r(){return window.open("","_blank","status=0,width=780,height=785,left=400,top=400")}function l(a){return new o.Promise(function(e){var t=setInterval(function(){if(a.closed){clearInterval(t);e()}},1e3)})}function c(e){return S.get("/api/domain-connect/"+e.id)}function u(e){e.closed||e.close()}function d(t,a){return new o.Promise(function(e){a.location=t.url;e()})}function p(e,a){var t;return i(e).then(function(e){t=e.data;return b.getStrategy(t.name)}).then(function(e){var t=e.data;return d(t,a)}).then(function(){return l(a)}).then(function(){return c(t)}).then(function(e){if(!e.data.success)throw"Google reported an error."})}o.Squarespace.GoogleDomains.googleInitiatedDomainConnect=function(e){var i=t(e);i.show();i.getContentEl().on("click",function(){i.hide();var t=n();o.Squarespace.Analytics.trackInternal("domain_link_google_domain_start");var a=r();p(e,a).then(function(){window.location="/config"}).catch(function(e){u(a);t.stop();s(e)})})}},"1.0",{requires:["querystring","squarespace-domains-models-domain","squarespace-google-domains-consent-service","squarespace-session-storage","squarespace-spinner","squarespace-ui-base","squarespace-util"]})},"./src/main/webapp/universal/scripts-v6/hb-compare.js":function(e,t){YUI.add("squarespace-hb-compare",function(e){e.Handlebars.registerHelper("if_eq",function(e,t){if(e===t.hash.compare)return t.fn(this);return t.inverse(this)});e.Handlebars.registerHelper("unless_eq",function(e,t){if(e===t.hash.compare)return t.inverse(this);return t.fn(this)});e.Handlebars.registerHelper("if_gt",function(e,t){if(e>t.hash.compare)return t.fn(this);return t.inverse(this)});e.Handlebars.registerHelper("unless_gt",function(e,t){if(e>t.hash.compare)return t.inverse(this);return t.fn(this)});e.Handlebars.registerHelper("if_lt",function(e,t){if(e<t.hash.compare)return t.fn(this);return t.inverse(this)});e.Handlebars.registerHelper("unless_lt",function(e,t){if(e<t.hash.compare)return t.inverse(this);return t.fn(this)});e.Handlebars.registerHelper("if_gteq",function(e,t){if(e>=t.hash.compare)return t.fn(this);return t.inverse(this)});e.Handlebars.registerHelper("unless_gteq",function(e,t){if(e>=t.hash.compare)return t.inverse(this);return t.fn(this)});e.Handlebars.registerHelper("if_lteq",function(e,t){if(e<=t.hash.compare)return t.fn(this);return t.inverse(this)});e.Handlebars.registerHelper("unless_lteq",function(e,t){if(e<=t.hash.compare)return t.inverse(this);return t.fn(this)})},"1.0",{requires:["handlebars-base"]})},"./src/main/webapp/universal/scripts-v6/hb-product-price-string.js":function(e,t){YUI.add("squarespace-hb-product-price-string",function(t){t.Handlebars.registerHelper("price-string",function(e){return new t.Handlebars.SafeString(t.Squarespace.Commerce.priceString(e))})},"1.0",{requires:["handlebars-base","squarespace-commerce-utils"]})},"./src/main/webapp/universal/scripts-v6/hb-product-types.js":function(e,t,a){var i=a("./src/main/webapp/frontend/packages/enums/ProductTypes.js");YUI.add("squarespace-hb-product-types",function(e){e.Handlebars.registerHelper("product-physical",function(e){var t=this.structuredContent;return t.productType===i.PHYSICAL?e.fn(this):e.inverse(this)});e.Handlebars.registerHelper("product-digital",function(e){var t=this.structuredContent;return t.productType===i.DIGITAL?e.fn(this):e.inverse(this)});e.Handlebars.registerHelper("product-service",function(e){var t=this.structuredContent;return t.productType===i.SERVICE?e.fn(this):e.inverse(this)});e.Handlebars.registerHelper("product-variants",function(e){var t=this.structuredContent;var a=t.productType;return a===i.PHYSICAL||a===i.SERVICE?e.fn(this):e.inverse(this)})},"1.0",{requires:["handlebars-base","squarespace-util"]})},"./src/main/webapp/universal/scripts-v6/help.js":function(e,t,a){var s=a("./common/temp/node_modules/@sqs/cookie-cutter/index.js");var n=a("./src/main/webapp/universal/src/apps/App/shared/stores/LegacyCommercePlanUpdateStore.js");var r=a("./src/main/webapp/universal/src/shared/utils/SqsVersion.js");YUI.add("squarespace-help",function(i){i.Squarespace.Help={isTutorialCompleted:function(){if(n.getShowUpdate())return false;var e=Static.SQUARESPACE_CONTEXT.website.websiteType;var t=i.merge(i.Squarespace.Context.getInstance().get("websiteSettings").get("tutorialsCompleted"));var a=t.welcome||t["damask-guide"]||t["commerce-guide"]||t.onboarding;if(s.get("skipOnboarding"))return true;if(s.get("alwaysShowGuide"))return false;if(t){if(r.isV8())return t["squarespace-alpha-welcome-screen"];if(i.Squarespace.Utils.isCoverPageOnly())return t["cover-page-guide"];if(e===i.Squarespace.WebsiteType.COMMERCE)return a;if(e===i.Squarespace.WebsiteType.PARKING_PAGE)return"true"!==s.get("showParkingPageOnboarding");return a}return false}}},"1.0",{requires:["squarespace-util"]})},"./src/main/webapp/universal/scripts-v6/image-loader.js":function(e,t){YUI.add("squarespace-image-loader",function(s){s.namespace("Squarespace");s.Squarespace.Loader=s.Base.create("Loader",s.Base,[],{initializer:function(){this.get("frames")&&this._processFrames();this.get("img")&&this._processImages()},_processFrames:function(){this._getNodeList("frames").each(function(e){e.getAttribute("data-embed")&&e.resizeToParent({scale:"contain",sizeOnly:true})})},_processImages:function(){this._getNodeList("img").each(function(e){var t=false;e.loader&&(t=true);e.plug(s.Squarespace.Loader2,this.get("loaderOptions")||{});t&&e.fire("refresh")},this)},_getNodeList:function(e){var t=this.get(e);if(s.Lang.isString(t))return s.all(t);if(!t.size)return new s.NodeList(t);return t}},{ATTRS:{frames:{},img:{},loaderOptions:{}}});s.Squarespace.Loader2=s.Base.create("Loader2",s.Plugin.Base,[],{initializer:function(){var e=this.get("host");var t=100;var a=0;function i(){!e.inDoc()&&++a<t?s.later(10,this,i):this.load()}i.call(this);this.on("refresh",this.load,this);this.afterHostEvent("refresh",this.load,this)},_isInvalidHost:function(){return null===this.get("host").getDOMNode()||!this.get("host").inDoc()},load:function(){var e=this.get("host");!!e.getAttribute("src")&&e.get("complete")&&e.fire("loaded");this.afterHostEvent("load",function(){if(this._isInvalidHost())return;this.get("host").removeClass("loading").addClass("loaded");this.get("host").fire("loaded")},this);if(this._isInvalidHost())return;s.config.win.ImageLoader.load(e.getDOMNode(),s.merge(this.getAttrs(),{load:this.get("load")}))},getDimensionForValue:function(e,t){var a=this.get("host").getDOMNode();var i=s.config.win.ImageLoader._getDataFromNode(a);return s.config.win.ImageLoader.getDimensionForValue(e,t,i)},getBareElement:function(){var e=this.get("host");var t=s.Node.create("<img />");t.setAttribute("data-src",e.getAttribute("data-src"));t.setAttribute("data-image-dimensions",e.getAttribute("data-image-dimensions"));t.setAttribute("data-image-focal-point",e.getAttribute("data-image-focal-point"));t.setAttribute("alt",e.getAttribute("alt"));return t},destructor:function(){}},{NS:"loader",ATTRS:{stretch:{},load:{value:true},source:{},fixedRatio:{value:false},fitAlignment:{},fit:{value:false,setter:function(e){e&&this.set("mode","fit")}},fill:{value:false,setter:function(e){e&&this.set("mode","fill")}},focalPoint:{setter:function(e){s.config.win.ImageLoader.load(this.get("host").getDOMNode(),{focalPoint:e.x+","+e.y});return e}},mode:{validator:function(e){return-1!==["fit","fill","none",null].indexOf(e)}},refreshOnResize:{value:false},useBgImage:{validator:function(e){return s.Lang.isBoolean(e)}}}});s.Squarespace.ImageLoadManager=new(s.Base.create("ImageLoadManager",s.Base,[],{refreshAll:function(){s.all("img[data-src]").each(function(e){e.fire("refresh")})}}));s.augment(s.Node,Class.create({refresh:function(){this.fire("refresh")}}))},"1.0",{requires:["base","node","plugin"]})},"./src/main/webapp/universal/scripts-v6/image-picker.js":function(e,t,a){var A=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-image-picker",function(h){var g="loading",m="imageURL",f="width",v="height",d=".error",i=".instructions",b=".images",r=".preview",o=".label.width",l=".label.height",e=".ruler",c=e+".width",u=e+".height",S=".dimensions",y=S+" span",s=".size-visualizer",n=".cancel",_=".confirm",p=".prev",C=".next",E=".pagination";h.namespace("Squarespace.Widgets").ImagePickerDragPlugin=h.Base.create("imagePickerDragPlugin",h.Plugin.Base,[],{initializer:function(){this._selector=new h.SQS.DDWrappers.DragSelection({node:this.get("host").get("boundingBox")});this._selector.on(this.get("host").get("id")+"|selection-dragged",this._selectImages,this);!this.get("host").get("multiSelect")&&false},_selectImages:function(a){var e=this.get("host");var t=e.get("boundingBox").all(".images .preview");var i=e.get("selectedImageURLs");var s=e.get("maxSelected");t.each(function(e){if(i.length<s&&e.inRegion(a.region)){var t=e.getData(m);if(-1===i.indexOf(t)){i.push(t);e.addClass("selected")}}});e._set("selectedImageURLs",i)},destructor:function(){this._selector.destroy()}},{NS:"ds"});var w=h.namespace("Squarespace.Widgets").ImagePicker=h.Base.create("imagePicker",h.Squarespace.Widgets.DataWidget,[],{initializer:function(){this._displayedImages={};this.plug(h.Plugin.WidgetAnim)},destructor:function(){h.Squarespace.EscManager.removeTarget(this)},renderUI:function(){w.superclass.renderUI.call(this);var e=this.get("boundingBox"),t=this.get("strings");e.one(i).setContent(t.instructions);e.one(n).setContent(t.cancelButton);e.one(_).setContent(t.confirmButton);e.one(p).setContent("Previous");e.one(C).setContent("Next");var a=e.one(d);a.hide();a.setContent(t.loadFailed);this._updateEscapeManager();this._sizeVisualizerNode=e.one(s);this._hideSizeVisualizer()},bindUI:function(){w.superclass.bindUI.call(this);var e=this.get("id");this.on(e+"|dataStateChange",this._uiSyncDataState,this);this.after(e+"|imageURLsChange",this.syncUI,this);this.after(e+"|visibleChange",this._updateEscapeManager,this);this.after(e+"|pageChange",this.syncUI,this);var t=this.get("boundingBox");t.on(e+"|click",this._selectImage,this);t.plug(h.Squarespace.Plugin.ScrollLock);t.one(b).on(e+"|mouseleave",this._hideSizeVisualizer,this);t.one(n).on(e+"|click",function(e){this.hide();this.fire("cancel")},this);t.one(_).on(e+"|click",function(e){this.hide();this.fire("submit")},this);t.one(C).on(e+"|click",function(e){e.halt();this.set("page",this.get("page")+1)},this);t.one(p).on(e+"|click",function(e){e.halt();this.set("page",this.get("page")-1)},this)},syncUI:function(){w.superclass.syncUI.call(this);var e=this.get("contentBox"),n=e.one(b),i=this.get("imageURLs").slice(0),p=this.get("strings");this.get("sizeInfo")?e.addClass("has-size-info"):e.removeClass("has-size-info");if(this.get("paginate")){var t=this.get("pageSize");var a=this.get("page")*t;var s=a+t;var r=Math.min(s,i.length);var o=e.one(".prev");this.get("page")<=0?o.addClass("hidden"):o.removeClass("hidden");var l=e.one(C);a+t>=i.length?l.addClass("hidden"):l.removeClass("hidden");i=i.slice(a,r)}var c=e.one(_);this.get("multiSelect")?c.show():c.hide();h.Object.each(this._displayedImages,function(e,t){if(-1===i.indexOf(t)){var a=n.one('[data-id="'+this._displayedImages[t]+'"]');if(a){a.ancestor(".preview",true).remove(true);this._displayedImages[t]=null}}},this);h.Array.each(i,function(e){var c=this.get("id");if(this._displayedImages[e])return;this.get("dataState")!==this.getProperty("DATA_STATES").LOADED&&this.setLoadedState();var u=h.Node.create(this.getProperty("IMAGE_TEMPLATE"));var d=u.one("img");u.setData(m,e);n.appendChild(u);this.get("multiSelect")&&-1!==this.get("selectedImageURLs").indexOf(e)&&u.addClass("selected");d.onceAfter(c+"|load",function(e){var t=e.target.get("naturalHeight"),a=e.target.get("naturalHeight");u.one(y).setContent(h.substitute(p.imageDimensions,{height:a,width:t}));u.setData(f,t);u.setData(v,a);var i=u.one(".image-underlay");var s=i.width();var n=i.height();var r=e.target.get("width");var o=e.target.get("height");var l=2;u.one(".image-wrapper").setStyles({width:r+2*l,height:o+2*l,top:Math.floor(n/2-o/2),left:Math.floor(s/2-r/2)});d.setStyles({top:null,left:null,position:"static"});u.on(c+"|mouseenter",this._updateSizeVisualizer,this)},this);d.plug(h.Squarespace.Loader2,{source:e,fit:true});var t=d.loader,a=u.one(S);var i=function(){t.get("loading")?a.addClass(g):a.removeClass(g)};i();t.after(c+"|loadingChange",i,this);var s=d.getAttribute("data-id");if(!s){s=h.guid();d.setAttribute("data-id",s)}this._displayedImages[e]=s},this);i.length>0&&e.one(d).hide();var u=e.one(E);this.get("paginate")?u.show():u.hide()},_uiSyncDataState:function(e){var t=e?e.newVal:this.get("dataState"),a=this.getProperty("DATA_STATES"),i=this.get("contentBox").one(d),s=this.get("imageURLs"),n=this.get("strings");switch(t){case a.LOADED:if(0===s.length){i.setContent(n.noImages);i.show()}break;case a.LOAD_FAILED:i.setContent(n.loadFailed);i.show();break;default:i.hide();break}},_isImageWrapper:function(e){return!!e.getData(m)},_selectImage:function(e){e.preventDefault();e.stopPropagation();var t=e.target.ancestor(this._isImageWrapper,true);var a=this.get("contentBox").one(b);var i=this.get("selectedImageURLs");var s=this.get("multiSelect");if(!t){if(s){this._set("selectedImageURLs",[]);this.get("contentBox").all(".preview.selected").each(function(e){e.removeClass("selected")})}return}var n=t.getData(m);if(s)if(i.length>=this.get("maxSelected"))new h.Squarespace.Widgets.Alert({"strings.title":A("Too Many Images"),"strings.message":A("You have selected the maximum number of images allowed. Please remove an image before selecting another.")});else{t.hasClass("selected")?i=h.Array.filter(i,function(e){return e!==n}):i.push(n);t.toggleClass("selected");this._set("selectedImageURLs",i)}else{t.addClass("selected");a.all(r).removeClass("selected");this._set("selectedImageURL",n)}this.get("hideOnSelect")&&this.hide()},_updateSizeVisualizer:function(e){if(!this._sizeVisualizerNode)return;var t=e.target.ancestor(this._isImageWrapper,true),a=t.getData(f),i=t.getData(v),s=this._sizeVisualizerNode.one(o),n=this._sizeVisualizerNode.one(l);s.setContent(a+"px");n.setContent(i+"px");s.setStyle("left",a-38);n.setStyle("top",i-20);this._sizeVisualizerNode.show();this._sizeVisualizerNode.one(c).setStyle("width",a);this._sizeVisualizerNode.one(u).setStyle("height",i)},_hideSizeVisualizer:function(){if(!this._sizeVisualizerNode)return;this._sizeVisualizerNode.hide()},_updateEscapeManager:function(){this.get("visible")?h.Squarespace.EscManager.addTarget(this):h.Squarespace.EscManager.removeTarget(this)}},{CSS_PREFIX:"sqs-image-picker",HANDLEBARS_TEMPLATE:"image-picker.html",IMAGE_TEMPLATE:'<div class="preview"><div class="image-underlay"><div class="dimensions"><span></span></div><div class="image-wrapper"><img /></div></div></div>',ATTRS:{visible:{value:false},strings:{value:{instructions:A("Select an Image"),cancelButton:A("Cancel"),loadFailed:A("Unable to load images, please check the URL and try again later."),noImages:A("No images available."),imageDimensions:A("{width} x {height}"),confirmButton:A("Confirm")}},imageURLs:{value:[],validator:h.Lang.isArray},selectedImageURL:{value:null,readOnly:true},selectedImageURLs:{value:[],readOnly:true},hideOnSelect:{value:true},multiSelect:{value:false},maxSelected:{value:Number.MAX_VALUE,validator:h.Lang.isNumber},paginate:{value:false},pageSize:{value:25},page:{value:0,validatore:h.Lang.isNumber},sizeInfo:{value:true}}})},"1.0",{requires:["base","plugin","squarespace-async-task-synchronizer","@sqs/yui-dd-wrappers/drag-selection","squarespace-escmanager","squarespace-image","squarespace-image-loader","squarespace-image-picker-template","squarespace-plugin-scroll-lock","squarespace-ui-base","squarespace-widgets-alert","squarespace-widgets-data-widget","widget","widget-anim","widget-parent"]})},"./src/main/webapp/universal/scripts-v6/image-picker/HasDownloadRequest.js":function(e,t){YUI.add("squarespace-image-picker-has-download-request",function(e){e.namespace("Squarespace.ImagePicker.DownloadRequest");e.Squarespace.ImagePicker.HasDownloadRequest=e.Base.create("HasDownloadRequest",e.Plugin.Base,[],{initializer:function(){this.publish("downloadRequest",{emitFacade:true,bubbles:true})},requestDownload:function(a){e.instanceOf(a,e.Squarespace.ImagePicker.DownloadRequest)||(a=new e.Squarespace.ImagePicker.DownloadRequest(a));return e.Squarespace.Promises.create(function(e,t){this.fire("downloadRequest",{request:a});e()},this)}})},"1.0",{requires:["base","plugin","squarespace-image-picker-download-request","squarespace-promises"]})},"./src/main/webapp/universal/scripts-v6/image-picker/models/download-request.js":function(e,t){YUI.add("squarespace-image-picker-download-request",function(e){e.namespace("Squarespace.ImagePicker").DownloadRequest=e.Base.create("DownloadRequest",e.Model,[],{},{ATTRS:{url:{value:null},licensedAssetPreview:{value:null},licensedAssetId:{value:null},isPurchased:{value:false}}})},"1.0",{requires:["base","model"]})},"./src/main/webapp/universal/scripts-v6/image-picker/widgets/selector.js":function(e,t,a){var i=a("./common/temp/node_modules/react/index.js");var s=a("./common/temp/node_modules/react-dom/index.js");var n=a("./common/temp/node_modules/alt-utils/lib/ActionListeners.js");var r=a("./src/main/webapp/universal/src/shared/dispatchers/alt/index.ts");var o=a("./src/main/webapp/universal/src/apps/App/shared/components/ImagePicker/index.js");var l=a("./src/main/webapp/universal/src/apps/App/shared/components/ImagePicker/actions/ImagePickerViewActions.js");var c=a("./src/main/webapp/universal/src/apps/App/shared/components/ImagePicker/actions/ErrorActions.js");YUI.add("squarespace-image-picker-selector",function(t){t.namespace("Squarespace.ImagePicker.Widgets");t.Squarespace.ImagePicker.Widgets.Selector=t.Base.create("ImagePickerSelector",t.Squarespace.Widgets.SSWidget,[t.Squarespace.ImagePicker.HasDownloadRequest],{initializer:function(){this.publish("imagePicked",{emitFacade:true,bubbles:true})},destructor:function(){if(this._actionListener){this._actionListener.removeAllActionListeners();this._actionListener=null}l.closeImagePicker();s.unmountComponentAtNode(this.get("contentBox").getDOMNode())},bindUI:function(){this._actionListener=new n(r);this._actionListener.addActionListener(l.CLOSE_IMAGE_PICKER,function(){this.set("isShow",false)}.bind(this));this.on("isShowChange",this._onShowChange,this)},show:function(){this.set("isShow",true)},_onShowChange:function(e){if(e.newVal){s.render(i.createElement(o,{onUnlicensedPreview:this._fireDownloadRequest.bind(this),onLicensedPreview:function(e){e.licensedAssetId?this._firePurchasedPreviewRequest(e):this.fire("imagePicked",e)}.bind(this),loadOnInit:true,imageDestination:this.get("imageDestination"),disableImageReuse:this.get("disableImageReuse")}),this.get("contentBox").getDOMNode());l.openImagePicker()}else setTimeout(function(){if(this.get("isShow"))return;s.unmountComponentAtNode(this.get("contentBox").getDOMNode())}.bind(this),300)},_fireDownloadRequest:function(e){e.licensedAssetPreview=new t.Squarespace.LicensedAssets.Models.Preview(e.licensedAssetPreview);this.requestDownload(e)},_firePurchasedPreviewRequest:function(e){this.requestDownload(e).then(function(){l.finishLoadingImage();l.closeImagePicker()}).catch(function(){c.showError()})}},{CSS_PREFIX:"sqs-image-picker-selector",ATTRS:{isShow:{value:false},imageDestination:{},disableImageReuse:{value:false}}})},"1.0",{requires:["base","squarespace-image-picker-has-download-request","squarespace-licensed-assets-preview","widget-parent"]})},"./src/main/webapp/universal/scripts-v6/image-zoom.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/utils/rendering.js");YUI.add("squarespace-image-zoom",function(n){n.namespace("Squarespace");var r=n.Squarespace.ImageZoom=n.Base.create("image-zoom",n.Base,[],{initializer:function(){if(!this._shouldInitialize())return;if(!this.get("host")){false;return}this._initializeZoom()},destructor:function(){if(!this._shouldInitialize())return;var e=this.get("zoomedNode");e&&e.remove(true);this.get("host").removeClass(r.CSS_PREFIX).removeClass(r.CSS_PREFIX+"--behavior-"+this.get("behavior"));this.get("dropzone").setStyle("position","").removeClass(r.CSS_PREFIX+"-dropzone");this._zoomTriggerEvent&&this._zoomTriggerEvent.detach();this._mouseMoveEvent&&this._mouseMoveEvent.detach();this._mouseOutEvent&&this._mouseOutEvent.detach();this._resizeEvent&&this._resizeEvent.detach();this._zoomTriggerEvent=null;this._mouseMoveEvent=null;this._mouseOutEvent=null;this._resizeEvent=null},_bindUI:function(){var e=this.get("host");this._zoomTriggerEvent=e.on(this.get("behavior"),this._toggleZoom,this);this._mouseMoveEvent=e.on("mousemove",this._trackMovement,this);this._mouseOutEvent=e.on("mouseout",this._zoomOut,this);this._resizeEvent=n.one(window).on("resize",this._refresh,this)},_shouldInitialize:function(){return!n.UA.mobile&&window.Modernizr.csstransforms},_initializeZoom:function(){var e=this.get("host");var t=e.one("img");var a=this.get("dropzone");e.addClass(r.CSS_PREFIX);e.addClass(r.CSS_PREFIX+"--behavior-"+this.get("behavior"));a.addClass(r.CSS_PREFIX+"-dropzone");"static"===a.getStyle("position")&&a.setStyle("position","relative");if(t.getAttribute("src")){this._appendZoomedNode();this._bindUI()}else t.once("load",function(){this._appendZoomedNode();this._bindUI()},this)},_appendZoomedNode:function(){var e=this.get("host").one("img");var t=e.getAttribute("data-src");if(!t){false;return null}var a=e.getAttribute("data-image-dimensions");a=a||e.get("clientWidth")+"x"+e.get("clientHeight");var i=e.getAttribute("data-image-focal-point");i=i||"0.5,0.5";var s=n.Node.create('<div class="'+r.CSS_PREFIX+'-duplicate"><img src="'+t+"?format="+this._getSquarespaceSizeForWidth()+'" data-image-dimensions="'+a+'" data-image-focal-point="'+i+'"></div>');s.setStyle("transform","scale("+this.get("zoom")+")");s.one("img").plug(n.Squarespace.Loader2,{load:true,mode:"fill"});this.set("zoomedNode",s);this.get("dropzone").append(s)},_refresh:function(){var e=this.get("host").one("img").getAttribute("data-src");var t=this.get("zoomedNode").one("img");t.setAttribute("src",e+"?format="+this._getSquarespaceSizeForWidth());t.fire("refresh")},_toggleZoom:function(e){this.get("_isZoomedIn")?this._zoomOut():this._zoomIn(e);e.stopPropagation()},_zoomIn:function(e){this.get("host").addClass("is-zoomed");this.set("_isZoomedIn",true);this._trackMovement(e)},_zoomOut:function(){this.get("host").removeClass("is-zoomed");this.set("_isZoomedIn",false)},_trackMovement:function(e){if(!this.get("_isZoomedIn"))return;var t=Math.max((e.pageX-this.get("host").getX())/this.get("host").get("clientWidth")*100,0);var a=Math.max((e.pageY-this.get("host").getY())/this.get("host").get("clientHeight")*100,0);this.get("zoomedNode").setStyle("transformOrigin",t+"% "+a+"%")},_getSquarespaceSizeForWidth:function(){var e=this.get("host").one("img").get("clientWidth");return i.getSquarespaceSizeForWidth(e*this.get("zoom"))}},{CSS_PREFIX:"sqs-image-zoom",ATTRS:{host:{value:null,validator:function(e){var t=n.one(e);return n.instanceOf(t,n.Node)&&t.one("img")&&t.all("img").size()<2},writeOnce:true},dropzone:{valueFn:function(){return this.get("host")},validator:function(e){return n.instanceOf(n.one(e),n.Node)},writeOnce:true},behavior:{value:"hover",validator:function(e){if("hover"!==e&&"click"!==e){false;return false}return true},writeOnce:true},zoom:{value:1.5,validator:function(e){("number"!==typeof e||e<=1||e>5)&&false;return true},writeOnce:true},_isZoomedIn:{value:false}}})},"1.0",{requires:["base","event","node","squarespace-image-loader","yui-base"]})},"./src/main/webapp/universal/scripts-v6/image.js":function(e,t){YUI.add("squarespace-image",function(t){var a=t.Squarespace.Image=t.Base.create("image",t.Base,[],{initializer:function(e){this._initImg();this.get("loadOnSrcChange")&&this.load()},bindUI:function(){var e=this.get("id");this.after(e+"|srcChange",function(e){this._initImg();this.get("loadOnSrcChange")&&this.load()},this)},destructor:function(){if(this._img){this._img.onload=null;this._img.onerror=null;this._img=null}t.detach(this.get("id")+"|*")},load:function(){var e=this.get("src");if(!e)throw new Error(this.name+": This image has no URL specified.");this._img.src=this.get("src")},_initImg:function(){this._setAttrs({loadComplete:a.ATTRS.loadComplete.value,loadFailed:a.ATTRS.loadFailed.value});var e=this._img=new Image;e.onload=t.bind(function(e){this._set("loadComplete",true)},this);e.onerror=t.bind(function(e){this._set("loadFailed",true);this._set("loadComplete",true)},this)},_getWidth:function(){return this._getDim("width")},_getHeight:function(){return this._getDim("height")},_getDim:function(e){var t=null;this._img&&this.get("loadComplete")&&!this.get("loadFailed")&&(t=this._img[e]);return t}},{ATTRS:{src:{value:null},width:{value:null,readOnly:true,getter:"_getWidth"},height:{value:null,readOnly:true,getter:"_getHeight"},loadOnSrcChange:{value:false},loadFailed:{value:false,readOnly:true},loadComplete:{value:false,readOnly:true}}})},"1.0",{requires:["base","base-build"]})},"./src/main/webapp/universal/scripts-v6/job-manager.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/utils/AltActionListener.js");var s=a("./src/main/webapp/universal/src/shared/actions/StaticActions.js");var n=a("./src/main/webapp/universal/src/shared/actions/JobActions.js");var r=a("./src/main/webapp/frontend/packages/enums/JobStatuses.js");YUI.add("squarespace-job-manager",function(a){a.namespace("Squarespace");a.Squarespace.JobManager=a.Base.create("JobManager",a.Base,[],{initializer:function(){this.recentJobs={};this.currentJobs={};this.completedJobs={};this.failedJobs={};this.publish("opened");this.publish("started");this.publish("completed");this.publish("failed");a.config.win.Static.SQUARESPACE_CONTEXT?this.processExistingJobs(a.config.win.Static.SQUARESPACE_CONTEXT):i.addActionListener(s.BOOTSTRAP,this.processExistingJobs.bind(this));i.addActionListener(n.LOAD_SUCCESS,this.onJobsLoad.bind(this));i.addActionListener(n.DELETE,this.removeJobById.bind(this))},getSize:function(){return a.Object.keys(this.currentJobs).length},completedJobsCount:function(){return a.Object.keys(this.completedJobs).length},failedJobsCount:function(){return a.Object.keys(this.failedJobs).length},onJobsLoad:function(e){e.forEach(function(e){var t=this.findInQueue(e.id);t&&setTimeout(function(){t.update(e)},0)}.bind(this))},onJobStart:function(e){var t=e.target;this.fire("started",{job:t})},onJobSuccess:function(e){this._processSucessfulJob(e.target)},_processSucessfulJob:function(e){var t=e.get("id");this.completedJobs[t]=e;this.removeFromQueue(t);this.fire("completed",{job:e})},onJobFailure:function(e){var t=e.target,a=t.get("id");this.failedJobs[a]=t;this.removeFromQueue(a);this.fire("failed",{job:t})},onJobOpen:function(e){var t=e.target,a=t.get("id");this.currentJobs[a]=t;this.fire("opened",{job:t})},removeFromQueue:function(e){a.Object.hasKey(this.currentJobs,e)&&delete this.currentJobs[e]},findJob:function(e){var t=[this.findInQueue,this.findCompletedJob,this.findFailedJob];for(var a=0;a<t.length;++a){var i=t[a];var s=i.call(this,e);if(s)return s}return null},findInQueue:function(e){return this.currentJobs[e]},findCompletedJob:function(e){return this.completedJobs[e]},findFailedJob:function(e){return this.failedJobs[e]},resolveIds:function(e){var t=[];for(var a=0;a<e.length;++a){var i=this.findJob(e[a]);i&&t.push(i)}return t},addJob:function(e){this._subscribeToJob(e);this.currentJobs[e.get("id")]=e;n.monitor(e.get("id"))},_subscribeToJob:function(e){e.after("start",this.onJobStart,this);e.after("complete",this.onJobSuccess,this);e.after("failure",this.onJobFailure,this);e.after("open",this.onJobOpen,this)},totalJobs:function(){return[this.completedJobs,this.failedJobs,this.currentJobs].map(function(e){return a.Object.keys(e).length}).reduce(function(e,t){return e+t})},allJobs:function(){return a.Object.values(a.merge(this.completedJobs,this.failedJobs,this.currentJobs,this.recentJobs))},removeJobById:function(e){delete this.completedJobs[e];delete this.failedJobs[e];delete this.currentJobs[e];delete this.recentJobs[e]},processExistingJobs:function(e){e&&e.pendingJobs&&e.pendingJobs.forEach(function(e){var t=this._jobDataToJob(e);this.currentJobs[t.get("id")]=t;this._subscribeToJob(t);t.get("status")===r.SUCCESS&&this._processSucessfulJob(t)},this);e&&e.recentJobs&&e.recentJobs.forEach(function(e){var t=this._jobDataToJob(e);this.recentJobs[t.get("id")]=t},this)},_jobDataToJob:function(e){var t=new a.Squarespace.Job(a.merge(e,{messages:e.messages?e.messages.map(function(e){return new a.Squarespace.JobMessage(e)}):[]}));return t}});if(a.Squarespace.Utils.isInDamaskFrame()){a.config.win.Static.JOB_MANAGER=a.Squarespace.Damask.ContextGlobals.fromTop("Y.config.win.top.Static.JOB_MANAGER");false}else{a.config.win.Static.JOB_MANAGER=new a.Squarespace.JobManager;false}},"1.0",{requires:["base","squarespace-beforeunload","squarespace-damask-context-globals","squarespace-jobs","squarespace-util"]})},"./src/main/webapp/universal/scripts-v6/jobs.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var o=a("./src/main/webapp/frontend/packages/enums/JobStatuses.js");YUI.add("squarespace-jobs",function(n){n.namespace("Squarespace");var t={TRACE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5};var r=n.Squarespace.JobMessage=n.Base.create("jobMessage",n.Base,[],{},{ATTRS:{level:{validator:n.Lang.isNumber},date:{validator:n.Lang.isDate},message:{validator:n.Lang.isString,value:""}}});n.Squarespace.Job=n.Base.create("job",n.Model,[],{initializer:function(e){this.set("data",n.merge({},e.data));this.publish("open",{defaultFn:this.onOpen,context:this});this.publish("start",{defaultFn:this.onStart,context:this});this.publish("complete",{defaultFn:this.onComplete,context:this});this.publish("failure",{defaultFn:this.onFailure,context:this});this.publish("update",{defaultFn:this.onUpdate,context:this})},getData:function(){return{name:this.get("name"),id:this.get("id"),status:this.get("status"),type:this.get("type"),data:this.get("data")}},update:function(e){var t=e.status;var a=this.get("data");var i=this.get("status");e.data&&(a=this.set("data",n.merge({},e.data)).get("data"));e.childJobs&&this.set("childJobs",e.childJobs);a&&a.update&&this.fire("update",this);var s=e.update?e.update.numFailed:0;t!==o.SUCCESS&&this.getItemCount()<=this.getCompletedItemCount()+this.get("failedItems")+s&&(t=o.SUCCESS);this.set("progress",e.progress);e.messages&&this.set("messages",e.messages.map(function(e){return new r(n.merge(e,{date:new Date(e.date)}))}));this.set("addedOn",new Date(e.addedOn));if(t!==i){t&&this.set("status",t);this.set("statusMessage",e.statusMessage);i=this.get("status");if(i!==o.WAITING&&!this.get("started")){this.fire("start",this);this.set("started",true)}switch(i){case o.SUCCESS:this.fire("complete",this);break;case o.FAILURE:this.fire("failure",this);break}}},setCollection:function(e){this.set("collection",e)},getItemCount:function(){return 1},getCompletedItemCount:function(){if(this.get("status")===o.SUCCESS)return 1;return 0},opened:function(){this.fire("open",this)},onOpen:function(){},onComplete:function(){},onStart:function(){},onFailure:function(){}},{ATTRS:{name:{value:""},progress:{value:0,validator:n.Lang.isNumber},lastError:{value:"",readOnly:true,getter:function(){if(!n.Lang.isValue(this.get("messages")))return null;var e=this.get("messages").filter(function(e){return e.get("level")===t.ERROR}).sort(function(e,t){return n.DataType.Date.isGreater(t.get("date"),e.get("date"))});return e.length?e.shift().get("message"):"Error"}},collection:{setter:function(e){var t=this.get("data");e&&(t.collectionId=e.getId())}},status:{value:o.WAITING},statusMessage:{value:"",setter:function(e){return e||""}},messages:{validator:n.Lang.isArray},updateData:{value:null},data:{},failedItems:{value:0},type:{},childJobs:{value:[],validator:n.Lang.isArray},addedOn:{setter:function(e){return n.Lang.isDate(e)?e:new Date(e)}}}});n.Squarespace.ImageProcessingJob=n.Base.create("imageProcessingJob",n.Squarespace.Job,[],{setNumFiles:function(e){var t=this.get("data");t.numFiles=e},setBatchId:function(e){var t=this.get("data");t.batchId=e},getItemCount:function(){return this.get("data").numFiles},getCompletedItemCount:function(){if(!this.processedItems)return 0;return this.processedItems.length},getProcessedItems:function(){return this.processedItems.slice(0)},onUpdate:function(){var e=this.get("data");if(e&&e.update&&e.update.newProcessedItems){this.processedItems||(this.processedItems=[]);Array.prototype.push.apply(this.processedItems,e.update.newProcessedItems)}},incrementFailedItemCount:function(){var e=this.get("failedItems");this.set("failedItems",e+1)}},{ATTRS:{type:{value:n.Squarespace.JobTypes.IMAGE_PROCESSING},started:{value:false}}});n.Squarespace.AudioProcessingJob=n.Base.create("AudioProcessingJob",n.Squarespace.ImageProcessingJob,[],{},{ATTRS:{type:n.Squarespace.JobTypes.AUDIO_PROCESSING}});n.Squarespace.WordpressExportJob=n.Base.create("wordpressExportJob",n.Squarespace.Job,[],{onComplete:function(){n.Squarespace.Navigation.ListUtils.refreshNavigationList();new n.Squarespace.Widgets.Information({"strings.title":i("Export Complete"),"strings.message":i("Your export has finished and your content can be downloaded in the Import / Export panel.")})}},{ATTRS:{type:{value:n.Squarespace.JobTypes.EXPORTING_WORDPRESS}}});n.Squarespace.ImportingJob=n.Base.create("importingJob",n.Squarespace.Job,[],{onComplete:function(){n.Squarespace.Navigation.ListUtils.refreshNavigationList();new n.Squarespace.Widgets.Information({"strings.title":i("Import Complete"),"strings.message":i("Your import has finished and your content can be found in the Content Library.")})}},{ATTRS:{type:{value:n.Squarespace.JobTypes.IMPORTING}}});n.Squarespace.StatsMigrationJob=n.Base.create("statsMigrationJob",n.Squarespace.Job,[],{onComplete:function(){new n.Squarespace.Widgets.Information({"strings.title":i("Migration Complete"),"strings.message":i("Your legacy statistics have been migrated and analysis has begun.")})}},{ATTRS:{type:{value:n.Squarespace.JobTypes.STATS_MIGRATION}}});n.Squarespace.PushJob=n.Base.create("pushJob",n.Squarespace.Job,[],{},{ATTRS:{type:{value:n.Squarespace.JobTypes.PUSH}}});n.Squarespace.CollectionSyncJob=n.Base.create("collectionSyncJob",n.Squarespace.Job,[],{onComplete:function(){new n.Squarespace.Widgets.Information({"strings.title":this.get("strings.successTitle"),"strings.message":this.get("strings.successMessage")});this._setCollectionSyncState(false);var e=n.Squarespace.ACTIVE_MANAGER;e.getActiveCollectionManager&&e.getActiveCollection().getId()===this.get("data.collectionId")&&e.getActiveCollectionManager().refreshPage()},onFailure:function(){new n.Squarespace.Widgets.Information({"strings.title":this.get("strings.failureTitle"),"strings.message":this.get("strings.failureMessage")});this._setCollectionSyncState(false)},_setCollectionSyncState:function(e){var t=this.get("data.collectionId");var a=n.Squarespace.ContentCollectionCache.getById(t);a&&a.set("synchronizing",e)}},{ATTRS:{strings:{value:{successTitle:i("Sync Completed"),successMessage:i("Collection sync completed. Your images may still be processing. This can take several minutes to complete."),failureTitle:i("Sync Failed"),failureMessage:i("Collection sync failed.")}},type:{value:n.Squarespace.JobTypes.COLLECTION_SYNC}}})},"1.0",{requires:["base","datatype-date-math","event","model","squarespace-models-content-collection","squarespace-navigation-list-utils","squarespace-upsell-product-violations","squarespace-util","squarespace-widgets-alert","squarespace-widgets-confirmation","squarespace-widgets-information"]})},"./src/main/webapp/universal/scripts-v6/layout-engine/block-label-premium.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./common/temp/node_modules/react/index.js");var n=a("./common/temp/node_modules/react-dom/index.js");var r=a("./common/temp/node_modules/@sqs/core-components/lib/web/FeatureGateLogo.js").default;YUI.add("layout-engine/block-label-premium",function(e){var t=e.namespace("SQS.LayoutEngine.Block").PremiumLabel=e.Base.create("blockLabelPremium",e.Widget,[e.WidgetChild],{renderUI:function(){t.superclass.renderUI.call(this);n.render(s.createElement("div",null,this.get("label")+" ",s.createElement(r,{premiumFeatureLabel:i("Premium Feature")})),this.get("contentBox").getDOMNode())}},{CSS_PREFIX:"sqs-blocklabel",NS:"blockLabel",ATTRS:{label:{value:null},meta:{value:{}}}})},"1.0",{requires:["base","widget","widget-child"]})},"./src/main/webapp/universal/scripts-v6/layout-engine/block-menu-section.js":function(e,t,a){var i=a("./src/main/webapp/universal/scripts-v6/layout-engine/constants/block-menu-merchandising.js");var s=a("./src/main/webapp/universal/scripts-v6/layout-engine/constants/BlockMenuGroupType.js");var n=i.filter(function(e){return e.groupType!==s.GALLERY});YUI.add("squarespace-layout-insert-block-menu-section",function(e){e.Squarespace.Layout.InsertBlockMenuSection=e.Base.create("layoutInsertBlockMenuSection",e.Squarespace.Layout.InsertBlockMenuWebApp,[],{},{CSS_PREFIX:"sqs-layout-insert-block-menu",ATTRS:{editMode:{readOnly:true,value:e.SQS.LayoutEngine.Layout.EditMode.SECTION},blockItems:{getter:function(){return e.clone(n)}}}})},"1.0",{requires:["base","@sqs/layout-engine/edit-controller-base","squarespace-layout-insert-block-menu-web-app"]})},"./src/main/webapp/universal/scripts-v6/layout-engine/block-menu-web-app.js":function(e,t,a){var s=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var n=a("./src/main/webapp/universal/src/shared/utils/BlockFeatureGatingUtils.js");var r=a("./src/main/webapp/universal/src/shared/utils/BlockBetaFeatureUtils.js");var o=a("./src/main/webapp/frontend/packages/enums/Flag.js");var l=a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts");var c=a("./src/main/webapp/universal/scripts-v6/layout-engine/constants/block-menu-merchandising.js");var u=a("./src/main/webapp/universal/scripts-v6/layout-engine/constants/block-menu-react.js");YUI.add("squarespace-layout-insert-block-menu-web-app",function(a){a.namespace("Squarespace.Layout");var i=a.Squarespace.Layout.InsertBlockMenuWebApp=a.Base.create("layoutInsertBlockMenu",a.SQS.LayoutEngine.Layout.InsertBlockMenuWebBase,[a.Squarespace.Mixins.EventRegistrar],{_onFocusedChange:function(e){e.newVal||this.hide()},_getInsertableBlockItems:function(){var e=[n.featureGateBlockItems,r.filterBlocksByBetaFeature];var t=l.isFeatureEnabled(o.BLOCK_SELECTOR_REDESIGN);var a=t?this.get("blockItemsReact"):this.get("blockItems");return e.reduce(function(e,t){return t(e)},a)},_getBlockLabelInstance:function(e,t){if(e.premium)return a.SQS.LayoutEngine.Block.PremiumLabel;return i.superclass._getBlockLabelInstance.call(this,e)}},{CSS_PREFIX:"sqs-layout-insert-block-menu",ATTRS:{blockItems:{getter:function(){return a.clone(c)}},blockItemsReact:{getter:function(){return a.clone(u)}},editMode:{readOnly:true,value:a.SQS.LayoutEngine.Layout.EditMode.WEB_APP},blockIcon:{valueFn:function(){return a.Squarespace.Block.Icon}},zIndexBase:{getter:function(){return a.Squarespace.DIALOG_ZINDEX_BASE}},searchPlaceHolderText:{value:s("Search Content Blocks")}}})},"1.0",{requires:["base","@sqs/layout-engine/events","@sqs/layout-engine/edit-controller-base","@sqs/layout-engine/layout-insert-block-menu-web-base","layout-engine/block-label-premium","squarespace-layout-renderable-blocks-web-app","squarespace-block-icon"]})},"./src/main/webapp/universal/scripts-v6/layout-engine/constants/BlockMenuGroupType.js":function(e,t){e.exports={BASIC:"BASIC",IMAGE:"IMAGE",GALLERY:"GALLERY",SUMMARY:"SUMMARY",MORE:"MORE",FILTERS_LISTS:"FILTERS_LISTS",COMMERCE:"COMMERCE",CHARTS:"CHARTS",SOCIAL:"SOCIAL",INTEGRATIONS:"INTEGRATIONS"}},"./src/main/webapp/universal/scripts-v6/layout-engine/constants/block-menu-merchandising.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/frontend/packages/enums/BlockType.js");var n=a("./src/main/webapp/universal/src/shared/constants/BlockVariantTypes.js");var r=a("./src/main/webapp/universal/scripts-v6/layout-engine/constants/BlockMenuGroupType.js");e.exports=[{groupType:r.BASIC,label:i("Basic"),items:[s.HTML,s.MARKDOWN,s.QUOTE,s.IMAGE,s.VIDEO,s.SPACER,s.HORIZONTAL_RULE,s.BUTTON,s.AUDIO,s.EMBED]},{groupType:r.IMAGE,label:i("Image Layouts"),items:[n.IMAGE_POSTER,n.IMAGE_CARD,n.IMAGE_OVERLAP,n.IMAGE_COLLAGE,n.IMAGE_STACK]},{groupType:r.GALLERY,label:i("Gallery"),items:[n.GALLERY_SLIDESHOW,n.GALLERY_CAROUSEL,n.GALLERY_GRID,n.GALLERY_STACK]},{groupType:r.SUMMARY,label:i("Summary"),items:[n.SUMMARY_WALL,n.SUMMARY_CAROUSEL,n.SUMMARY_LIST,n.SUMMARY_GRID]},{groupType:r.MORE,label:i("More"),items:[s.FORM,s.NEWSLETTER,s.MAP,s.CODE,s.MENU,s.CALENDAR,s.ACUITY,s.ZOLA,s.OPENTABLE_V2,s.TOURDATES,s.MEMBER_AREA].filter(function(e){return e})},{groupType:r.FILTERS_LISTS,label:i("Filters & Lists"),items:[s.SEARCH,s.COLLECTION_LINK,s.TAGCLOUD,s.ARCHIVE]},{groupType:r.COMMERCE,label:i("Commerce"),items:[s.PRODUCT,s.AMAZON,s.DONATION]},{groupType:r.CHARTS,label:i("Charts"),items:[n.CHART_BAR,n.CHART_LINE,n.CHART_PIE]},{groupType:r.SOCIAL,label:i("Social Blocks"),items:[s.TWITTER,s.FOURSQUARE,s.SOCIAL_ACCOUNT_LINKS_V2,s.RSS,s.FIVEHUNDREDPIX,s.INSTAGRAM,s.FLICKR,s.SOUNDCLOUD]}]},"./src/main/webapp/universal/scripts-v6/layout-engine/constants/block-menu-react.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/frontend/packages/enums/BlockType.js");var n=a("./src/main/webapp/universal/scripts-v6/layout-engine/constants/BlockMenuGroupType.js");e.exports=[{groupType:n.BASIC,label:i("Basic"),items:[s.HTML,s.IMAGE,s.BUTTON,s.GALLERY,s.VIDEO,s.FORM,s.SPACER,s.AUDIO,s.NEWSLETTER,s.HORIZONTAL_RULE,s.QUOTE,s.MAP,s.EMBED,s.MARKDOWN,s.CODE,s.SUMMARY,s.MENU,s.CALENDAR,s.SOCIAL_ACCOUNT_LINKS_V2,s.CHART]},{groupType:n.COMMERCE,label:i("Commerce"),items:[s.PRODUCT,s.DONATION]},{groupType:n.INTEGRATIONS,label:i("Integrations",null,{project:"scripts-v6.layout-engine"}),items:[s.ACUITY,s.INSTAGRAM,s.TWITTER,s.ZOLA,s.AMAZON,s.SOUNDCLOUD,s.FLICKR,s.RSS,s.FIVEHUNDREDPIX,s.OPENTABLE_V2,s.TOURDATES,s.FOURSQUARE]},{groupType:n.FILTERS_LISTS,label:i("Filters & Lists"),items:[s.SEARCH,s.TAGCLOUD,s.COLLECTION_LINK,s.ARCHIVE]}]},"./src/main/webapp/universal/scripts-v6/layout-engine/edit-controller.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/utils/isAppleiPadOS13.js");a("./src/main/webapp/universal/scripts-layout-engine/dd-overrides/tablet-dd-overrides.js");YUI.add("squarespace-layout-engine-edit-controller",function(t){t.namespace("Squarespace.LayoutEngine");var a=t.Squarespace.LayoutEngine.EditController=t.Base.create("editcontroller",t.SQS.LayoutEngine.EditControllerWebApp,[t.Squarespace.GlobalEventBubbler],{initializer:function(){a.superclass.initializer.call(this);this.bubbleEventsToGlobal()}},{ATTRS:{renderableBlockSet:{value:[{ctor:t.Squarespace.Layout.RenderableBlocksWebApp,editMode:t.SQS.LayoutEngine.Layout.EditMode.WEB_APP},{ctor:t.Squarespace.Layout.RenderableBlocksWebApp,editMode:t.SQS.LayoutEngine.Layout.EditMode.SECTION}]},insertMenuSet:{valueFn:function(){return[{ctor:t.Squarespace.Layout.InsertBlockMenuWebApp,editMode:t.SQS.LayoutEngine.Layout.EditMode.WEB_APP,editController:this},{ctor:t.Squarespace.Layout.InsertBlockMenuSection,editMode:t.SQS.LayoutEngine.Layout.EditMode.SECTION,editController:this}]}}}});a.getInstance=function(){var e;return function(){if(!t.Lang.isValue(e)){e=new a;t.on("beforeunload",function(){e.get("destroyed")||e.destroy();e=null})}return e}}();if(i()){t.use("@sqs/layout-engine/tablet-dd-overrides");t.SQS.DDWrappers.DragSelection.ATTRS.enabled={value:false,readOnly:true}}},"1.0",{requires:["base","@sqs/layout-engine/edit-controller-base","@sqs/layout-engine/edit-controller-web-app","squarespace-global-event-bubbler","squarespace-layout-insert-block-menu-section","squarespace-layout-insert-block-menu-web-app","squarespace-layout-renderable-blocks-web-app"]})},"./src/main/webapp/universal/scripts-v6/layout-engine/renderable-blocks-web-app.js":function(e,t,a){var l=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var c=a("./src/main/webapp/frontend/packages/enums/BlockType.js");var u=a("./src/main/webapp/universal/src/shared/constants/BlockVariantTypes.js");var d=a("./src/main/webapp/universal/src/shared/constants/BlockVariantTypeKeys.js");var p=a("./src/main/webapp/universal/src/shared/constants/BlockTypeStrings.js");var h=a("./src/main/webapp/universal/src/shared/constants/GalleryBlockConstants.js");var g=a("./src/main/webapp/frontend/packages/enums/Flag.js");var m=a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts");YUI.add("squarespace-layout-renderable-blocks-web-app",function(s){var e=s.merge(p.BlockTypeKeys,d);var t={};t[e[c.HTML]]={value:{id:"html",ctor:s.Squarespace.Block.Html,label:l("Text"),tags:[l("text"),l("blockquote"),l("copy"),l("file"),l("link"),l("list"),l("word")]}};t[e[c.MARKDOWN]]={value:{id:"markdown",ctor:s.Squarespace.Block.Markdown,label:l("Markdown"),tags:[l("markdown"),l("code"),l("html"),l("word")]}};t[e[c.QUOTE]]={value:{id:"quote",ctor:s.Squarespace.Block.Quote,label:l("Quote"),tags:[l("quote"),l("text"),l("blockquote")]}};t[e[c.IMAGE]]={value:{id:"image",ctor:s.Squarespace.Block.Image,label:l("Image"),tags:[l("image"),l("banner"),l("gif"),l("photo"),l("picture"),l("PNG"),l("thumbnail")]}};t[e[c.GALLERY]]={value:{id:"gallery",ctor:s.Squarespace.Block.Gallery,label:l("Gallery"),tags:[l("gallery"),l("animation"),l("grid"),l("images"),l("photo"),l("picture"),l("slider"),l("slideshow"),l("stacked")]}};t[e[c.VIDEO]]={value:{id:"video",ctor:s.Squarespace.Block.Video,label:l("Video"),tags:[l("video"),l("animoto"),l("embed"),l("movie"),l("vimeo"),l("wistia"),l("youtube")]}};t[e[c.AUDIO]]={value:{id:"audio",ctor:s.Squarespace.Block.Audio,label:l("Audio"),tags:[l("audio"),l("album"),l("music"),l("player"),l("song"),l("track")]}};t[e[c.EMBED]]={value:{id:"embed",ctor:s.Squarespace.Block.Embed,label:l("Embed"),tags:[l("embed"),l("3rd party"),l("code"),l("html"),l("iframe"),l("video")]}};t[e[c.PRODUCT]]={value:{id:"product",ctor:s.Squarespace.Block.Product,label:l("Product"),tags:[l("product"),l("digital"),l("items"),l("options"),l("physical"),l("service"),l("variable"),l("variants"),l("money")]}};t[e[c.AMAZON]]={value:{id:"amazon",ctor:s.Squarespace.Block.Amazon,label:l("Amazon"),tags:[l("amazon"),l("product"),l("sell"),l("money")]}};t[e[c.DONATION]]={value:{id:"donation",ctor:s.Squarespace.Block.Donation,label:l("Donation"),tags:[l("donation"),l("charity"),l("donate"),l("payment"),l("money")]}};t[e[c.MEMBER_AREA]]={value:{id:"member-area",ctor:s.Squarespace.Block.MemberArea,label:l("Member Sign Up"),tags:[l("member"),l("area"),l("product"),l("money")]}};t[e[c.FORM]]={value:{id:"form",ctor:s.Squarespace.Block.Form,label:l("Form"),tags:[l("form"),l("contact"),l("mailing list"),l("survey")]}};t[e[c.NEWSLETTER]]={value:{id:"newsletter",ctor:s.Squarespace.Block.Newsletter,label:l("Newsletter"),tags:[l("newsletter"),l("blog"),l("mailing list"),l("subscribe"),l("subscription")]}};t[e[c.MAP]]={value:{id:"map",ctor:s.Squarespace.Block.Map,label:l("Map"),tags:[l("map"),l("address"),l("geography"),l("location"),l("google maps")]}};t[e[c.CODE]]={value:{id:"code",ctor:s.Squarespace.Block.Code,label:l("Code"),tags:[l("code"),l("css"),l("embed"),l("html"),l("iframe"),l("javascript"),l("script")]}};t[e[c.MENU]]={value:{id:"menu",ctor:s.Squarespace.Block.Menu,label:l("Menu"),tags:[l("menu"),l("chompy"),l("food"),l("restaurant")]}};t[e[c.LINK]]={value:{id:"link",ctor:s.Squarespace.Block.Link,label:l("Link"),tags:[l("link")]}};t[e[c.CALENDAR]]={value:{id:"calendar",ctor:s.Squarespace.Block.Calendar,label:l("Calendar"),tags:[l("calendar"),l("archive"),l("dates"),l("events"),l("shows"),l("schedule")]}};t[e[c.OPENTABLE]]={value:{id:"opentable",ctor:s.Squarespace.Block.OpenTable,label:l("OpenTable"),tags:[l("opentable"),l("dates"),l("food"),l("reservations"),l("restaurant")]}};t[e[c.OPENTABLE_V2]]={value:{id:"opentable",ctor:s.Squarespace.Block.OpenTableV2,label:l("OpenTable"),tags:[l("opentable"),l("dates"),l("food"),l("reservations"),l("restaurant")]}};t[e[c.TOURDATES]]={value:{id:"tourdates",ctor:s.Squarespace.Block.TourDates,label:l("Bandsintown"),tags:[l("bandsintown"),l("artists"),l("concerts"),l("events"),l("music"),l("shows"),l("tours")]}};t[e[c.SPACER]]={value:{id:"spacer",ctor:s.Squarespace.Block.Spacer,label:l("Spacer"),tags:[l("spacer"),l("area"),l("blank"),l("structure"),l("room")]}};t[e[c.HORIZONTAL_RULE]]={value:{id:"horizontal-rule",ctor:s.Squarespace.Block.HorizontalRule,label:l("Line"),tags:[l("line"),l("divider"),l("horizontal rule"),l("hr")]}};t[e[c.SEARCH]]={value:{id:"search",ctor:s.Squarespace.Block.Search,label:l("Search"),tags:[l("search"),l("bing"),l("google search"),l("lookup"),l("look up"),l("find")]}};t[e[c.COLLECTION_LINK]]={value:{id:"collection-link",ctor:s.Squarespace.Block.CollectionLink,label:l("Content Link"),tags:[l("content link"),l("navigation"),l("page")]}};t[e[c.BUTTON]]={value:{id:"button",ctor:s.Squarespace.Block.Button,label:l("Button"),tags:[l("button"),l("link"),l("call to action")]}};t[e[c.SUMMARY]]={value:{id:"summary",ctor:s.Squarespace.Block.Summary,label:l("Summary"),tags:[l("summary"),l("archive"),l("collection"),l("index"),l("list")]}};t[e[c.SUMMARY_V2]]={value:{id:"summary-v2",ctor:s.Squarespace.Block.SummaryV2,label:l("Summary"),tags:[l("summary"),l("archive"),l("collection"),l("index"),l("list")]}};t[e[c.TAGCLOUD]]={value:{id:"tagcloud",ctor:s.Squarespace.Block.Tagcloud,label:l("Tag Cloud"),tags:[l("tag cloud"),l("category"),l("list"),l("taxonomy")]}};t[e[c.POSTS_BY_TAG]]={value:{id:"posts-by-tag",ctor:s.Squarespace.Block.PostsByTag,label:l("Tag List"),tags:[l("tag list"),l("category")]}};t[e[c.POSTS_BY_AUTHOR]]={value:{id:"posts-by-author",ctor:s.Squarespace.Block.PostsByAuthor,label:l("Author List"),tags:[l("author list"),l("people"),l("contributors")]}};t[e[c.POSTS_BY_CATEGORY]]={value:{id:"posts-by-category",ctor:s.Squarespace.Block.PostsByCategory,label:l("Category List"),tags:[l("category list"),l("tag"),l("taxonomy")]}};t[e[c.POSTS_BY_MONTH]]={value:{id:"posts-by-month",ctor:s.Squarespace.Block.PostsByMonth,label:l("Month List"),tags:[l("month list"),l("calendar"),l("time")]}};t[e[c.ARCHIVE]]={value:{id:"archive",ctor:s.Squarespace.Block.Archive,label:l("Archive"),tags:[l("archive"),l("list"),l("index"),l("tag list"),l("category"),l("author list"),l("people"),l("contributors"),l("category list"),l("tag"),l("taxonomy"),l("month list"),l("year list"),l("calendar"),l("time"),l("group by month"),l("group by year"),l("group by author"),l("group by tag"),l("group by category"),l("group"),l("group by")]}};t[e[c.TWITTER]]={value:{id:"twitter",ctor:s.Squarespace.Block.Twitter,label:l("Twitter"),tags:[l("twitter"),l("feed"),l("social")]}};t[e[c.FOURSQUARE]]={value:{id:"foursquare",ctor:s.Squarespace.Block.Foursquare,label:l("Foursquare Swarm"),tags:[l("foursquare"),l("social"),l("location")]}};t[e[c.SOCIAL_ACCOUNT_LINKS]]={value:{id:"social-links",ctor:s.Squarespace.Block.SocialAccountLinks,label:l("Social Links"),tags:[l("social links"),l("facebook"),l("twitter"),l("google"),l("tumblr"),l("dropbox"),l("foursquare"),l("instagram"),l("flickr"),l("youtube"),l("vimeo"),l("linkedin"),l("dribble"),l("pinterest"),l("smugmug"),l("500px"),l("email"),"e-mail",l("github"),l("soundcloud"),l("spotify"),l("itunes store"),l("google play")]}};t[e[c.SOCIAL_ACCOUNT_LINKS_V2]]={value:{id:"social-links",ctor:s.Squarespace.Block.SocialAccountLinksV2,label:l("Social Links"),tags:[l("social links"),l("facebook"),l("twitter"),l("google"),l("tumblr"),l("dropbox"),l("foursquare"),l("instagram"),l("flickr"),l("youtube"),l("vimeo"),l("linkedin"),l("dribble"),l("pinterest"),l("smugmug"),l("500px"),l("email"),"e-mail",l("github"),l("soundcloud"),l("spotify"),l("itunes store"),l("google play")]}};t[e[c.RSS]]={value:{id:"rss",ctor:s.Squarespace.Block.Rss,label:l("RSS"),tags:[l("rss"),l("news feed"),l("subscribe"),l("subscription"),l("rich site summary"),l("really simple syndication")]}};t[e[c.FIVEHUNDREDPIX]]={value:{id:"fivehundredpix",ctor:s.Squarespace.Block.Fivehundredpix,label:l("500px"),tags:[l("500px"),l("image"),l("photo"),l("picture")]}};t[e[c.INSTAGRAM]]={value:{id:"instagram",ctor:s.Squarespace.Block.Instagram,label:l("Instagram"),tags:[l("instagram"),l("image"),l("photo"),l("picture")]}};t[e[c.FLICKR]]={value:{id:"flickr",ctor:s.Squarespace.Block.Flickr,label:l("Flickr"),tags:[l("flickr"),l("image"),l("photo"),l("picture")]}};t[e[c.SOUNDCLOUD]]={value:{id:"soundcloud",ctor:s.Squarespace.Block.SoundCloud,label:l("SoundCloud"),tags:[l("soundcloud"),l("album"),l("audio"),l("media"),l("music player"),l("playlist")]}};t[e[c.CHART]]={value:{id:"chart",ctor:s.Squarespace.Block.Chart,label:l("Chart"),tags:[l("image"),l("chart"),l("graph"),l("data")]}};t[e[u.CHART_BAR]]={value:{id:"chart-bar",ctor:s.Squarespace.Block.Chart,label:l("Bar Chart"),defaultContentModel:{chartType:u.CHART_BAR,dataTable:s.ChartJS.getDefaultChartData(u.CHART_BAR)},tags:[l("image"),l("chart"),l("graph"),l("data"),l("bar")]}};t[e[u.CHART_LINE]]={value:{id:"chart-line",ctor:s.Squarespace.Block.Chart,label:l("Line Chart"),defaultContentModel:{chartType:u.CHART_LINE,dataTable:s.ChartJS.getDefaultChartData(u.CHART_LINE)},tags:[l("image"),l("chart"),l("graph"),l("data"),l("line")]}};t[e[u.CHART_PIE]]={value:{id:"chart-pie",ctor:s.Squarespace.Block.Chart,label:l("Pie Chart"),defaultContentModel:{chartType:u.CHART_PIE,dataTable:s.ChartJS.getDefaultChartData(u.CHART_PIE),legend:"visible"},tags:[l("image"),l("chart"),l("graph"),l("data"),l("pie")]}};t[e[u.GALLERY_SLIDESHOW]]={value:{id:"gallery-slideshow",ctor:s.Squarespace.Block.Gallery,label:l("Slideshow"),defaultContentModel:{design:"slideshow"},tags:[l("gallery"),l("slideshow")]}};t[e[u.GALLERY_CAROUSEL]]={value:{id:"gallery-carousel",ctor:s.Squarespace.Block.Gallery,label:l("Carousel"),defaultContentModel:{design:"slider",aspectRatio:h.DEFAULT_SLIDER_ASPECT_RATIO},tags:[l("gallery"),l("carousel"),l("slider")]}};t[e[u.GALLERY_GRID]]={value:{id:"gallery-grid",ctor:s.Squarespace.Block.Gallery,label:l("Grid"),defaultContentModel:{design:"grid"},tags:[l("gallery"),l("grid")]}};t[e[u.GALLERY_STACK]]={value:{id:"gallery-stack",ctor:s.Squarespace.Block.Gallery,label:l("Stack"),defaultContentModel:{design:"stacked"},tags:[l("gallery"),l("stacked")]}};t[e[u.SUMMARY_WALL]]={value:{id:"summary-wall",ctor:s.Squarespace.Block.SummaryV2,label:l("Wall"),defaultContentModel:{design:"autocolumns"},tags:[l("feature"),l("summary"),l("wall"),l("autocolumns")]}};t[e[u.SUMMARY_CAROUSEL]]={value:{id:"summary-carousel",ctor:s.Squarespace.Block.SummaryV2,label:l("Carousel"),defaultContentModel:{design:"carousel"},tags:[l("feature"),l("summary"),l("carousel")]}};t[e[u.SUMMARY_LIST]]={value:{id:"summary-list",ctor:s.Squarespace.Block.SummaryV2,label:l("List"),defaultContentModel:{design:"list"},tags:[l("feature"),l("summary"),l("list")]}};t[e[u.SUMMARY_GRID]]={value:{id:"summary-grid",ctor:s.Squarespace.Block.SummaryV2,label:l("Grid"),defaultContentModel:{design:"autogrid"},tags:[l("feature"),l("summary"),l("autogrid"),l("grid")]}};t[e[c.ZOLA]]={value:{id:"zola",ctor:s.Squarespace.Block.Zola,label:l("Zola"),tags:[l("zola"),l("wedding registry"),l("wedding"),l("weddings"),l("registry"),l("gettin' hitched!")]}};var a=l("Scheduling",null,{project:"scripts-v6.layout-engine"});var i=l("Appointment Scheduling");var n=m.isFeatureEnabled(g.BLOCK_SELECTOR_REDESIGN)?a:i;t[e[c.ACUITY]]={value:{id:"acuity",ctor:s.Squarespace.Block.Acuity,label:n,tags:["acuity",l("calendar"),l("scheduling"),l("appointment"),l("appointments"),l("booking"),l("class"),l("classes"),l("yoga"),l("salon")]}};t[e[u.IMAGE_INLINE]]={value:{id:"image-inline",ctor:s.Squarespace.Block.Image,label:l("Inline"),defaultContentModel:{designLayout:"inline"},tags:[l("image"),l("inline"),l("banner"),l("gif"),l("photo"),l("picture"),l("PNG"),l("thumbnail")]}};t[e[u.IMAGE_POSTER]]={value:{id:"image-poster",ctor:s.Squarespace.Block.Image,label:l("Poster"),defaultContentModel:{designLayout:"poster"},tags:[l("image"),l("poster"),l("banner"),l("gif"),l("photo"),l("picture"),l("PNG"),l("thumbnail")]}};t[e[u.IMAGE_CARD]]={value:{id:"image-card",ctor:s.Squarespace.Block.Image,label:l("Card"),defaultContentModel:{designLayout:"card"},tags:[l("image"),l("card"),l("banner"),l("gif"),l("photo"),l("picture"),l("PNG"),l("thumbnail")]}};t[e[u.IMAGE_OVERLAP]]={value:{id:"image-overlap",ctor:s.Squarespace.Block.Image,label:l("Overlap"),defaultContentModel:{designLayout:"overlap"},tags:[l("image"),l("overlap"),l("banner"),l("gif"),l("photo"),l("picture"),l("PNG"),l("thumbnail")]}};t[e[u.IMAGE_COLLAGE]]={value:{id:"image-collage",ctor:s.Squarespace.Block.Image,label:l("Collage"),defaultContentModel:{designLayout:"collage"},tags:[l("image"),l("collage"),l("banner"),l("gif"),l("photo"),l("picture"),l("PNG"),l("thumbnail")]}};t[e[u.IMAGE_STACK]]={value:{id:"image-stack",ctor:s.Squarespace.Block.Image,label:l("Stack"),defaultContentModel:{designLayout:"stack"},tags:[l("image"),l("stack"),l("banner"),l("gif"),l("photo"),l("picture"),l("PNG"),l("thumbnail")]}};var r={envInit:function(){s.Squarespace.SSWidget.prototype.initializer.apply(this);this._bindV6UIBlock()},_bindV6UIBlock:function(){s.after(this.removeBlock,this.trackEngagementRemoved,this);this.after("dropped",this.trackEngagementDropped,this)},trackEngagementRemoved:function(){this._trackInternal("remove")},trackEngagementDropped:function(){this._trackInternal("drop")},trackEngagementCreate:function(e){this._trackInternal("create",e)},_trackInternal:function(e,t){if(this.get("editController").isMobileApp())return;if(s.Lang.isString(e)&&e.length>0){var a="sidebar";s.config.win.Static.IN_BACKEND&&(s.one("body").hasClass("collection-type-page")?a="page":s.one("body").hasClass("dialog-open")&&(a="post"));var i=this.get("model")?this.get("model").get("designLayout"):null;t=s.merge({backend:s.config.win.Static.IN_BACKEND,region:a},t);s.Squarespace.Analytics.trackInternal("engagement_block_"+e,s.merge({type:p.BlockTypeKeys[this.get("type")],imageBlockLayout:i},t));s.Global.fire("Block:"+e,s.merge({blockType:p.BlockTypeKeys[this.get("type")]},t))}},removeBlock:function(i){function e(){var e=this.get("boundingBox");!i&&e.ancestor(".sqs-block-remover")&&e.unwrap();this.queueForDestruction();var t=this.get("boundingBox").ancestor(".sqs-layout");var a=this.get("editController");a.cleanGrids(t);a.alignInsertPoints(t)}if(i)e.call(this);else{var t=s.Node.create('<div class="sqs-block-remover">');t.setStyle("overflow","hidden");this.get("boundingBox").wrap(t);var a=new s.Anim({node:t,to:{height:0,opacity:0},duration:.5,easing:s.Easing.easeOutStrong});a.on("end",e,this);this._anims.add(a);a.run()}}};s.mix(s.SQS.LayoutEngine.Block.Base.prototype,s.Squarespace.SSWidget.prototype);s.mix(s.SQS.LayoutEngine.Block.Base.prototype,r,true);var o={_syncEditableButtons:function(){var e=this.get("editingButtons");if(!e&&this._editingButtons)this._editingButtons.destroy();else if(e&&!this._editingButtons){this._editingButtons=new s.Squarespace.Block.Editor.ButtonContainer({render:this.get("host").get("boundingBox"),blockName:this.get("blockName"),blockType:this.get("blockType"),includeEdit:this.get("includeEdit"),includeRemove:!this.get("lockedLayout")});this._registerEvent(this._editingButtons.after("edit",s.bind(function(){this.set("editing",true)},this)),this._editingButtons.after("remove",s.bind(this.removeBlock,this)))}}};s.mix(s.SQS.LayoutEngine.Block.Editor.Base.prototype,o,true);s.namespace("Squarespace.Layout").RenderableBlocksWebApp=s.Base.create("squarespace-layout-renderable-blocks",s.Base,[],{},{ATTRS:t})},"1.0",{requires:["base","@sqs/layout-engine/block-unrenderable","squarespace-block-acuity","squarespace-block-amazon","squarespace-block-archive","squarespace-block-audio","squarespace-block-button","squarespace-block-calendar","squarespace-block-code","squarespace-block-collection-link","squarespace-block-donation","squarespace-block-editor-button-container","squarespace-block-embed","squarespace-block-soundcloud","squarespace-block-fivehundredpix","squarespace-block-flickr","squarespace-block-form","squarespace-block-foursquare","squarespace-block-gallery","squarespace-block-horizontal-rule","squarespace-block-html","squarespace-block-content-html-editor","squarespace-block-image","squarespace-block-image-editor","squarespace-block-instagram","squarespace-block-link","squarespace-block-map","squarespace-block-markdown","squarespace-block-member-area","squarespace-block-menu","squarespace-block-newsletter","squarespace-block-opentable","squarespace-block-opentable-v2","squarespace-block-posts-by","squarespace-block-product","squarespace-block-quote","squarespace-block-rss","squarespace-block-search","squarespace-block-social-account-links","squarespace-block-social-account-links-v2","squarespace-block-social-summary","squarespace-block-spacer","squarespace-block-summary","squarespace-block-summary-v2","squarespace-block-tagcloud","squarespace-block-tourdates","squarespace-block-twitter","squarespace-block-video","squarespace-block-video-editor","squarespace-block-chart","squarespace-block-zola","squarespace-chartjs-helpers","squarespace-ss-widget"]})},"./src/main/webapp/universal/scripts-v6/legacy/class.js":function(e,t){YUI.add("squarespace-legacy-class",function(e){e.namespace("Squarespace.Legacy");e.Squarespace.Legacy.Class={create:function(e){var t;t=e.initialize?function(){this.initialize.apply(this,arguments)}:function(){};t.prototype=e;t.extend=function(e){return Class.extend(this,e)};t.specialize=function(e,t){var a=Class.specialize(this,e);a._parent=t;return a};return t},extend:function(s,e){e.initialize||(e.initialize=s.prototype.initialize);var t=Class.create(e);var a=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;for(var i in s.prototype)t.prototype[i]?"function"===typeof t.prototype[i]&&a.test(t.prototype[i])&&(t.prototype[i]=function(a,i){return function(){var e=this._super;this._super=s.prototype[a];var t=i.apply(this,arguments);this._super=e;return t}}(i,t.prototype[i])):t.prototype[i]=s.prototype[i];t.prototype.superclass=s.prototype;return t},specialize:function(e,t){var a=Class.extend(e,t);return new a}}},"1.0",{requires:[]})},"./src/main/webapp/universal/scripts-v6/licensed-assets/manager.js":function(e,t){YUI.add("squarespace-licensed-assets-manager",function(i){i.namespace("Squarespace.LicensedAssets");var e=i.Base.create("LicensedAssetsManager",i.Base,[],{buy:function(a){return i.Squarespace.Promises.create(function(e,t){i.Data.post({url:"/api/licensed-assets",data:a.toJSON(),success:e,failure:t,json:true},this)},this)},getById:function(a){return i.Squarespace.Promises.create(function(e,t){i.Data.get({url:"/api/licensed-assets/"+a,success:e,failure:t},this)},this)},getDownloadUrl:function(a){return i.Squarespace.Promises.create(function(e,t){i.Data.get({url:"/api/licensed-assets/"+a.id+"/download-url",success:e,failure:t},this)},this)}});i.Squarespace.LicensedAssets.Manager=new e},"1.0",{requires:["base","squarespace-promises"]})},"./src/main/webapp/universal/scripts-v6/licensed-assets/models/preview.js":function(e,t){YUI.add("squarespace-licensed-assets-preview",function(e){e.namespace("Squarespace.LicensedAssets.Models");e.Squarespace.LicensedAssets.Models.Preview=e.Base.create("LicensedAssetPreview",e.Model,[],{},{ATTRS:{assetId:{validator:e.Squarespace.AttrValidators.isNullOrString},source:{validator:e.Squarespace.AttrValidators.isValueIn(e.Squarespace.LicensedAssetSource)},artist:{validator:e.Lang.isString},collectionName:{validator:e.Lang.isString},collectionId:{validator:e.Squarespace.AttrValidators.isNullOrString},title:{validator:e.Squarespace.AttrValidators.isString}}})},"1.0",{requires:["base","model","squarespace-attr-validators"]})},"./src/main/webapp/universal/scripts-v6/licensed-assets/widgets/details.js":function(e,t,a){var i=a("./common/temp/node_modules/react/index.js");var s=a("./common/temp/node_modules/react-dom/index.js");var n=a("./src/main/webapp/universal/src/apps/App/shared/components/LicenseImage/index.js");YUI.add("squarespace-licensed-assets-details",function(e){e.namespace("Squarespace.LicensedAssets.Widgets");var t=e.Squarespace.LicensedAssets.Widgets.Details=e.Base.create("LicensedAssetDetails",e.Widget,[e.Squarespace.ImagePicker.HasDownloadRequest],{destructor:function(){this.get("rendered")&&s.unmountComponentAtNode(this.get("mountNode"));this._changeBinding&&this._changeBinding.detach()},renderUI:function(){t.superclass.renderUI.apply(this,arguments);this._renderLicenseImage()},bindUI:function(){t.superclass.bindUI.apply(this,arguments);this._changeBinding=this.after(["licensedAssetPreviewChange","isOpenChange","previewUrlChange"],this._renderLicenseImage.bind(this))},_renderLicenseImage:function(){var e=this.get("licensedAssetPreview");s.render(i.createElement(n,{assetPreview:e?e.toJSON():null,previewUrl:this.get("previewUrl"),isOpen:this.get("isOpen"),onRequestClose:this._close.bind(this),onPurchaseSuccess:this._onPurchaseSuccess.bind(this)}),this.get("mountNode"))},_close:function(){this.set("isOpen",false)},_onPurchaseSuccess:function(e){this._close();this.requestDownload({url:e.url,licensedAssetId:e.licensedAssetId,isPurchased:true})}},{CONTENT_TEMPLATE:null,ATTRS:{isOpen:{validator:e.Squarespace.AttrValidators.isBoolean,value:false},licensedAssetPreview:{value:null,validator:e.Squarespace.AttrValidators.isNullOrInstanceOf(e.Squarespace.LicensedAssets.Models.Preview)},mountNode:{getter:function(){return this.get("contentBox").getDOMNode()},readOnly:true},previewUrl:{validator:e.Squarespace.AttrValidators.isNullOrString,value:null}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-image-picker-has-download-request","squarespace-licensed-assets-preview","widget"]})},"./src/main/webapp/universal/scripts-v6/licensed-assets/widgets/preview-alert.js":function(e,t,s){var n=s("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var r=s("./src/main/webapp/frontend/packages/enums/WebsiteRole.js");YUI.add("squarespace-licensed-assets-preview-alert",function(e){var t=s("./src/main/webapp/universal/src/apps/App/shared/stores/WebsiteSettingsStore/index.js");var a=s("./src/main/webapp/universal/src/apps/App/shared/stores/WebsiteRoleStore.js");e.namespace("Squarespace.LicensedAssets.Widgets");var i=e.Squarespace.LicensedAssets.Widgets.PreviewAlert=e.Base.create("LicensedAssetPreviewAlert",e.Squarespace.Widgets.SSWidget,[],{bindUI:function(){i.superclass.bindUI.call(this)},showPreviewAlert:function(){var e=t.getState().assetPurchasesByNonAdminsAllowed;e||a.hasRole(r.ADMIN)?this._updateCopy(n("This is an unlicensed preview image. To license it, use the link above. Watermarks will be removed after purchase.")):this._updateCopy(n("This is an unlicensed preview image. To license it, please speak with an admin. Watermarks will be removed after purchase."));this.get("contentBox").addClass("is-yellow");this.show()},showLicensedAssetAlert:function(e){var t=n('This is a licensed image. Click <a href="{url}" target="_blank">here</a> to purchase further licensing options for print, social, and more.',{url:e});this._updateCopy(t);this.get("contentBox").removeClass("is-yellow");this.show()},_updateCopy:function(e){this.get("contentBox").one(".copy").set("innerHTML",e)}},{CSS_PREFIX:"sqs-licensed-asset-preview-alert",TEMPLATE:'<span class="copy"></span>'})},"1.0",{requires:["base","squarespace-ss-widget"]})},"./src/main/webapp/universal/scripts-v6/licensed-assets/widgets/preview-bar.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-licensed-assets-preview-bar",function(e){e.namespace("Squarespace.LicensedAssets.Widgets");e.Squarespace.LicensedAssets.Widgets.PreviewBar=e.Base.create("LicensedAssetPreviewBar",e.Squarespace.Widgets.SSWidget,[],{},{CSS_PREFIX:"sqs-licensed-asset-preview-bar",TEMPLATE:"<span>"+i("This page is using preview images from Getty Images. Please purchase them to remove the watermark.")+"</span>"})},"1.0",{requires:["base","squarespace-ss-widget"]})},"./src/main/webapp/universal/scripts-v6/licensed-assets/workflow.js":function(e,t,a){var n=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var r=a("./src/main/webapp/frontend/packages/enums/LicensedAssetSource.js");YUI.add("squarespace-licensed-assets-workflow",function(i){i.namespace("Squarespace.LicensedAssets");var s={CLEAR_EVENT:"getty_clear",PURCHASE_EVENT:"getty_purchase",IMAGE_PREVIEW_EVENT:"getty_image_preview",LICENSED_ASSET_REMOVE:"licensed_asset_remove"};i.Squarespace.LicensedAssets.Workflow=i.Base.create("LicensedAssetsWorkflow",i.Base,[i.Squarespace.ImagePicker.HasDownloadRequest],{initializer:function(){this._imagePicker=new i.Squarespace.ImagePicker.Widgets.Selector({imageDestination:this.get("imageDestination"),disableImageReuse:this.get("disableImageReuse")});this._previewDetails=new i.Squarespace.LicensedAssets.Widgets.Details;this._bindEvents()},destructor:function(){this._imagePicker.destroy();this._previewDetails.destroy();this._imagePicker=null;this._previewDetails=null},showImagePicker:function(){this._imagePicker.render();this._imagePicker.show()},showPurchaseDetails:function(e,t){this._trackEvent(s.PURCHASE_EVENT,e.assetId);this._previewDetails.get("rendered")||this._previewDetails.render();this._previewDetails.setAttrs({isOpen:true,licensedAssetPreview:new i.Squarespace.LicensedAssets.Models.Preview(e),previewUrl:t})},showLicensingDetails:function(e,t){i.Squarespace.LicensedAssets.Manager.getById(e).then(function(e){new i.Squarespace.Widgets.Alert({"strings.title":n("You Can Use This Image on Your Site"),"strings.message":n('This is a licensed image. Click <a href="{url}" target="_blank">here</a> to purchase further licensing options for print, social, and more.',{url:e.originUrl})})})},trackPreviewRemovalEvent:function(e){this._trackEvent(s.CLEAR_EVENT,e,r.GETTY)},trackLicensedAssetRemovalEvent:function(e,t){this._trackEvent(s.LICENSED_ASSET_REMOVE,e,t)},_bindEvents:function(){this._imagePicker.on("downloadRequest",this._fireDownloadRequest,this);this._imagePicker.on("imagePicked",this._fireImagePicked,this);this._previewDetails.on("downloadRequest",this._fireDownloadRequest,this)},_fireDownloadRequest:function(e){e.target.hide();e.stopPropagation();var t=e.request;var a=t.get("licensedAssetPreview");i.Lang.isValue(a)&&this._trackEvent(s.IMAGE_PREVIEW_EVENT,a.get("assetId"));this.requestDownload(e.request)},_fireImagePicked:function(e){this.fire("imagePicked",e)},_trackEvent:function(e,t,a){i.Squarespace.Analytics.trackInternal(e,{assetId:t,assetSource:a})}},{ATTRS:{imageDestination:{},disableImageReuse:{value:false}}})},"1.0",{requires:["base","squarespace-image-picker-download-request","squarespace-image-picker-selector","squarespace-licensed-assets-details","squarespace-licensed-assets-manager","squarespace-licensed-assets-preview","squarespace-util","squarespace-widgets-alert"]})},"./src/main/webapp/universal/scripts-v6/localities.js":function(e,t,a){var n=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var r=a("./src/main/webapp/universal/src/shared/constants/I18N/Countries.js");var o=a("./common/temp/node_modules/lodash/mapValues.js");YUI.add("squarespace-localities",function(s){var i={"":{title:n("Select a Country"),empty:true}};s.namespace("Squarespace");s.Squarespace.Localities={SPECIAL_KEYS:{DIVIDER:"DIVIDER"},COUNTRY_OPTIONS:s.merge(i,o(r,function(e){return{title:e}})),STATE_OPTIONS:{AL:{title:n("Alabama")},AK:{title:n("Alaska")},AZ:{title:n("Arizona")},AR:{title:n("Arkansas")},CA:{title:n("California")},CO:{title:n("Colorado")},CT:{title:n("Connecticut")},DE:{title:n("Delaware")},FL:{title:n("Florida")},GA:{title:n("Georgia")},HI:{title:n("Hawaii")},ID:{title:n("Idaho")},IL:{title:n("Illinois")},IN:{title:n("Indiana")},IA:{title:n("Iowa")},KS:{title:n("Kansas")},KY:{title:n("Kentucky")},LA:{title:n("Louisiana")},ME:{title:n("Maine")},MD:{title:n("Maryland")},MA:{title:n("Massachusetts")},MI:{title:n("Michigan")},MN:{title:n("Minnesota")},MS:{title:n("Mississippi")},MO:{title:n("Missouri")},MT:{title:n("Montana")},NE:{title:n("Nebraska")},NV:{title:n("Nevada")},NH:{title:n("New Hampshire")},NJ:{title:n("New Jersey")},NM:{title:n("New Mexico")},NY:{title:n("New York")},NC:{title:n("North Carolina")},ND:{title:n("North Dakota")},OH:{title:n("Ohio")},OK:{title:n("Oklahoma")},OR:{title:n("Oregon")},PA:{title:n("Pennsylvania")},RI:{title:n("Rhode Island")},SC:{title:n("South Carolina")},SD:{title:n("South Dakota")},TN:{title:n("Tennessee")},TX:{title:n("Texas")},UT:{title:n("Utah")},VT:{title:n("Vermont")},VA:{title:n("Virginia")},WA:{title:n("Washington")},DC:{title:n("Washington, District of Columbia")},WV:{title:n("West Virginia")},WI:{title:n("Wisconsin")},WY:{title:n("Wyoming")},AA:{title:n("Armed Forces Americas")},AE:{title:n("Armed Forces Europe")},AP:{title:n("Armed Forces Pacific")}}};s.Squarespace.Localities.COUNTRIES_TO_STATES={US:s.Squarespace.Localities.STATE_OPTIONS,CA:{ON:{title:n("Ontario")},QC:{title:n("Quebec")},NS:{title:n("Nova Scotia")},NB:{title:n("New Brunswick")},MB:{title:n("Manitoba")},BC:{title:n("British Columbia")},PE:{title:n("Prince Edward Island")},SK:{title:n("Saskatchewan")},AB:{title:n("Alberta")},NL:{title:n("Newfoundland and Labrador")},NT:{title:n("Northwest Territories")},YT:{title:n("Yukon")},NU:{title:n("Nunavut")}}};s.Squarespace.Localities.countryCodeFromName=function(e){for(var t in s.Squarespace.Localities.COUNTRY_OPTIONS)if(s.Squarespace.Localities.COUNTRY_OPTIONS[t].title===e)return t};var t=function(i){return s.Array.reduce(s.Object.keys(i).sort(),[],function(e,t){var a=i[t];e.push({label:a.title,value:t});return e})};var a=function(e){return e.sort(function(e,t){if(""===e.value)return-1;if(""===t.value)return 1;return e.label<t.label?-1:1})};s.Squarespace.Localities.getAllCountryNames=function(){var t=[];s.Object.each(s.Squarespace.Localities.COUNTRY_OPTIONS,function(e){e.empty||t.push(e.title)});return t};s.Squarespace.Localities.getNewCountryOptions=function(){return a(t(s.Squarespace.Localities.COUNTRY_OPTIONS))};s.Squarespace.Localities.getNewStateOptionsForCountry=function(e){return a(t(s.Squarespace.Localities.COUNTRIES_TO_STATES[e]))};s.Squarespace.Localities.getAmericentricSortedCountryOptions=function(){var e=s.Squarespace.Localities.getNewCountryOptions();var t=s.Array.filter(e,function(e){return!(""===e.value||e.value===s.Squarespace.Localities.SPECIAL_KEYS.DIVIDER)});var a={value:s.Squarespace.Localities.SPECIAL_KEYS.DIVIDER,label:"—",disabled:true};t.unshift({value:"",label:i[""].title},a,{value:"US",label:r.US},a);return t}},"1.0",{requires:[]})},"./src/main/webapp/universal/scripts-v6/logger.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/utils/formatting/substituteString.js");YUI.add("squarespace-logger",function(n){var t=[],a=null;var e=n.Base.create("Logger",n.Base,[],{initializer:function(){n.one(n.config.win).on("beforeunload",this.flush,this);this._syncDebugActiveElement();this.after("debugActiveElementChange",this._syncDebugActiveElement,this)},_syncDebugActiveElement:function(){this._debugActiveElementTimer&&this._debugActiveElementTimer.cancel();this.get("debugActiveElement")&&(this._debugActiveElementTimer=n.later(500,this,function(){this.debug({focusElement:this._getDOMNodeDescriptor(n.config.doc.activeElement)})},null,true))},_getDOMNodeDescriptor:function(e){e=n.one(e);var t=e.get("tagName").toLowerCase();var a=e.getAttribute("id");var i=e.get("className").split(" ");var s="";if(i.length>0){s="."+i.join(".");s.length>20&&(s=s.substr(0,20)+"…")}return t+(a?"#"+a:"")+s},enqueue:function(e){t.push(e);this.wait()},flush:function(e){try{clearTimeout(a)}catch(e){}a=null;t.length>0&&n.Data.post({url:"/api/events/Trace",data:{data:JSON.stringify(t)},failure:function(){}});t=[]},wait:function(){null===a&&(a=setTimeout(n.bind(this.flush,this),this.get("timerLength")))},log:function(e,t){n.Lang.isValue(e)&&this.enqueue({pageUrl:document.location.href,type:e,data:JSON.stringify(n.Lang.isValue(t)?t:{})})},trace:function(t,a){try{var e={};e.lalala()}catch(e){this.log(t,n.merge(a,{stack:e.stack}))}},debug:function(e){var t=n.one("#logger-debug")||n.one(n.config.doc.body).appendChild(n.Node.create('<div id="logger-debug"></div>'));t.setStyles({position:"fixed",right:50,top:50,background:"rgba(150,100,100,0.9)",border:"solid 1px white",color:"white",borderRadius:"3px",padding:20,zIndex:1e7,fontSize:"10px"});t.setContent(i('<xmp style="margin:0">{sub1}</xmp>',{sub1:JSON.stringify(e,null,2)}))}},{ATTRS:{timerLength:{value:3e4},debugActiveElement:{value:false}}});n.namespace("Squarespace");n.Squarespace.Logger||(n.Squarespace.Logger=new e)},"1.0",{requires:["base","event","io-base","node"]})},"./src/main/webapp/universal/scripts-v6/login.js":function(e,t,a){var s=a("./common/temp/node_modules/react/index.js");var n=a("./common/temp/node_modules/react-dom/index.js");var r=a("./common/temp/node_modules/@sqs/cookie-cutter/index.js");var o=a("./src/main/webapp/universal/src/apps/App/components/CommentLogin/index.jsx");var l=a("./src/main/webapp/universal/src/apps/App/components/CommentLogin/actions/CommentLoginActions.js");var c=a("./src/main/webapp/universal/src/apps/CommentsGuestLogin/index.jsx");var u=a("./src/main/webapp/universal/src/shared/constants/FrameMessageType.js");var i=a("./src/main/webapp/universal/src/shared/utils/Singleton.js");var d={init:function(i){return{ready:function(){Static.SQUARESPACE_CONTEXT&&(this.account=Static.SQUARESPACE_CONTEXT.authenticatedAccount)},configure:function(){},isLoggedIn:function(){return!!this.account},getAccount:function(){return this.account},showCommentLogin:function(e,t,a){a?this.showGuestLogin():this.showOAuthLogin()},showGuestLogin:function(){var e=document.createElement("div");document.body.appendChild(e);var t=function(){n.unmountComponentAtNode(e);document.body.removeChild(e);l.closeFrame()};n.render(s.createElement(c,{onSubmit:function(e){this.fireGuestLoginEvent(e);t()}.bind(this),onLoginClick:function(){t();this.showOAuthLogin()}.bind(this),onClose:function(){t();i.config.win.SQUARESPACE_LOGIN.fire("cancel")}}),e)},showOAuthLogin:function(){this.commentAuthenticationFrame=document.createElement("div");var e=Static.SQUARESPACE_CONTEXT.appDomain;var t="https://"+Static.SQUARESPACE_CONTEXT.website.identifier+"."+e;n.render(s.createElement(o,{onMessageReceived:this.handleCommentFrameMessage.bind(this),parentOrigin:window.location.origin,frameOrigin:t}),this.commentAuthenticationFrame);document.body.appendChild(this.commentAuthenticationFrame);l.show()},handleCommentFrameMessage:function(e){var t=function(){l.closeFrame();n.unmountComponentAtNode(this.commentAuthenticationFrame);document.body.removeChild(this.commentAuthenticationFrame);this.commentAuthenticationFrame=null}.bind(this);if(e.type===u.AUTHENTICATED){t();Static.SQUARESPACE_CONTEXT.authenticatedAccount=e.account;i.config.win.SQUARESPACE_LOGIN.account=e.account;i.config.win.SQUARESPACE_LOGIN.fire("login")}else if(e.type===u.CLOSE){t();i.config.win.SQUARESPACE_LOGIN.fire("cancel")}},fireGuestLoginEvent:function(e){var t=new Date;t.setSeconds(t.getSeconds()+30);var a=t.getSeconds();r.set("email",e.email,{path:"/",expires:a});r.set("displayName",e.displayName,{path:"/",expires:a});r.set("websiteUrl",e.authorUrl,{path:"/",expires:a});i.config.win.SQUARESPACE_LOGIN.fire("guestLogin")}}}};YUI.add("squarespace-login",function(e){if(!e.config.win.SQUARESPACE_LOGIN){e.config.win.SQUARESPACE_LOGIN=i.create(d.init(e));e.augment(e.config.win.SQUARESPACE_LOGIN,e.EventTarget);e.config.win.SQUARESPACE_LOGIN_UTILS={loginPromise:new e.Promise(function(e){e(true)})}}},"1.0",{requires:["promise","squarespace-google-domains-utils"]})},"./src/main/webapp/universal/scripts-v6/management.js":function(e,t,a){a("./src/main/webapp/universal/styles-compressed/management.css");YUI.add("squarespace-management",function(e){},"1.0",{requires:["squarespace-frontend-content-mode"]})},"./src/main/webapp/universal/scripts-v6/markdown-editor.js":function(e,t,a){var g=a("./common/temp/node_modules/@sqs/utils/string/isBlank.js");YUI.add("squarespace-markdown-editor",function(h){h.namespace("Squarespace");h.Squarespace.MarkdownEditor=h.Base.create("markdownEditor",h.Squarespace.CodeEditor,[],{initializer:function(){this._editorNode=h.one(this.editor.getWrapperElement());this._initializeLinkFlyout()},destructor:function(){this._linkEdit.close()},execCommand:function(e,t){var a=true;switch(e){case"bold":this._toggleSurroundSelection("**");break;case"link":this._showLinkFlyout(this._findLinkId(),true);a=false;break;case"italic":this._toggleSurroundSelection("*");break;case"heading":this._toggleHeading(t);break;case"insertorderedlist":this._toggleSurroundSelection("1. ","",true);break;case"insertunorderedlist":this._toggleSurroundSelection("* ","",true);break;case"blockquote":this._toggleSurroundSelection("> ","",true);break}a&&this.editor.focus()},_initializeLinkFlyout:function(){this._linkEdit=new h.Squarespace.Flyout.LinkEdit({toolbarOffsetOverride:0,disableNewWindow:true,canEditTextContent:false,anchor:h.one(".field-wysiwyg-control")});this._linkEdit.on("updateLink",function(e){this._cmLink(this._linkEdit.get("linkIndex")||"0",e.linkUrl)},this);this._linkEdit.on("removeLink",function(){this._cmLink(this._linkEdit.get("linkIndex")||"0")},this);this._editorNode.after("mouseup",h.bind(function(e){this._linkEdit.setAttrs({editorSelectionCoords:{x:e.clientX,y:e.clientY}});var t=this._findLinkId();if("0"!==t&&this._lastSeenLinkId!==t){e.halt();this._lastSeenLinkId=t;this._showLinkFlyout(t,false)}else{this._lastSeenLinkId="";this._linkEdit.close()}},this))},_findLinkId:function(){var e=this.editor.getCursor();var t=e.ch;var a=this.editor.getTokenTypeAt(e);if(a&&a.indexOf("link")>-1){while(a&&-1===a.indexOf("url")){t++;a=this.editor.getTokenTypeAt({line:e.line,ch:t})}if(a){var i=this.editor.getTokenAt({line:e.line,ch:t+1});if(/\d+/.test(i.string))return i.string}}return"0"},_showLinkFlyout:function(e,t){var a="";if(e){var i=this.editor.getValue();var s=new RegExp("\\n\\s*\\["+e+"\\]\\s*:\\s*([^'\"(\\n]+)[^\\n]*");var n=i.match(s)||[];n[1]?a=n[1]:e="0"}if("0"!==e){var r=this.editor.getCursor();var o=this.editor.getTokenAt(r);var l=new RegExp("(?:\\[([^\\]]+)\\]\\["+e+"\\])");var c=o.state.thisLine.string;var u=c.match(l);var d=u[1];var p=u.index+1;var h=p+d.length;this.editor.setSelection({line:r.line,ch:p},{line:r.line,ch:h})}var g=this.editor.cursorCoords();this._linkEdit.setAttrs({linkIndex:e,editorSelectionCoords:{x:g.left,y:g.bottom}});t?this._linkEdit.openEditor(a,false):this._linkEdit.openPreview(a,false)},_cmHeading:function(e){var t=h.clone(this.editor.getCursor(true));var a;if(this.editor.somethingSelected()){a=this.editor.getSelection();a=a.split(/[\r\n]{1,2}/)[0]}else{a=this.editor.getLine(t.line);t.ch=0;this.editor.setSelection(t,{line:t.line,ch:1e6})}var i=["_","=","-","`"][e];var s=Array(Math.max(a.length+1,3)).join(i);if(t.ch>0){this.editor.replaceSelection("\n\n"+a+"\n"+s+"\n");this.editor.setSelection({line:t.line+2,ch:0},{line:t.line+2,ch:1e6})}else{this.editor.replaceSelection(a+"\n"+s+"\n");this.editor.setSelection({line:t.line,ch:0},{line:t.line,ch:1e6})}},_cmUnheading:function(){var e=h.clone(this.editor.getCursor(true));var t=e.line;if(/^[=\-]{3,}/.test(this.editor.getLine(t+1))){var a=/^\w*$/.test(this.editor.getLine(t+2));this.editor.setSelection({line:t,ch:1e6},{line:t+1+a,ch:1e6});this.editor.replaceSelection("");this.editor.setSelection({line:t,ch:0},{line:t,ch:1e6});return true}return false},_toggleHeading:function(e){this._cmUnheading()||this._cmHeading(e)},_cmSurround:function(e,t,a){t=h.Lang.isUndefined(t)?e:t;var i=h.clone(this.editor.getCursor(true));var s=h.clone(this.editor.getCursor(false));var n=this.editor.getSelection();if(a){if(i.line!==s.line){for(var r=i.line,o=s.line+1;r<o;r++){this.editor.setSelection({line:r,ch:0});this._cmSurround(e,t,true)}this.editor.setSelection({line:i.line,ch:0},{line:s.line,ch:1e6});return}var l=this.editor.getLine(i.line);var c=h.clone(this.editor.getCursor(true));var u=h.clone(this.editor.getCursor(false));c.ch=Math.max(l.search(/\S/),0);u.ch=l.length;this.editor.setSelection(c,u);n=l.substr(Math.max(0,c.ch))}i.ch+=e.length;s.ch+=e.length;this.editor.replaceSelection(e+n+t);this.editor.setSelection(i,s)},_cmUnsurround:function(e,t,a){t=h.Lang.isUndefined(t)?e:t;var i=h.clone(this.editor.getCursor(true));var s=h.clone(this.editor.getCursor(false));if(a){if(i.line!==s.line){var n=false;var r;for(var o=i.line,l=s.line+1;o<l;o++){this.editor.setSelection({line:o,ch:0},{line:o,ch:0});r=this._cmUnsurround(e,t,true);n=r||n}this.editor.setSelection({line:i.line,ch:0},{line:s.line,ch:1e6});return n}var c=this.editor.getLine(i.line);i.ch=c.search(/\W/);s.ch=c.length}i.ch=Math.max(0,i.ch-e.length);s.ch+=t.length;var u=this.editor.getRange(i,s);var d=u.length-t.length;if(u.slice(0,e.length)==e&&u.slice(d)==t){this.editor.setSelection(i,s);this.editor.replaceSelection(u.slice(e.length,d));return true}return false},_toggleSurroundSelection:function(e,t,a){this._cmUnsurround(e,t,a)||this._cmSurround(e,t,a)},_cmLink:function(e,t){var a=false;var i=h.clone(this.editor.getCursor(true));var s=h.clone(this.editor.getCursor(false));var n,r;if(t)if("0"===e){this._cmSurround("[","][0]");i.ch++;s.ch++;var o=s.line;var l;var c="\n[0]: "+t;do{o++;l=this.editor.getLine(o);if(h.Lang.isUndefined(l)){this.editor.replaceRange("\n"+c,{line:o,ch:0});break}if(g(l)){var u=this.editor.getLine(o+1);u&&u[0]&&"["!==u[0]&&(c+="\n");this.editor.replaceRange(c,{line:o,ch:0});break}}while(l);n=this.editor.getValue();a=true}else{r=new RegExp("(\\n\\s*\\["+e+"\\]\\s*:\\s*)[^'\"(\\n]+([^\\n]*)");n=this.editor.getValue();n=n.replace(r,"$1"+t+"$2")}else{r=new RegExp("(?:\\[([^\\]]+)\\]\\s?\\["+e+"\\])|(?:^\\s*\\["+e+"\\]\\s*:.*$(?:\\n$)?)","gm");n=this.editor.getValue();n=n.replace(r,"$1");i.ch--;s.ch--;a=true}if(a){var d=0;var p={};n.replace(/\]\s*\[(\d{1,3})\]/g,function(e,t){if(!p[t]){d+=1;p[""+t]=d}return e});n=n.replace(/\[(\d{1,3})\]/g,function(e,t){return"["+(p[t]||t)+"]"});"0"===e?this._linkEdit.set("linkIndex",p[e]):this._linkEdit.set("linkIndex","0")}this.editor.setValue(n);this.editor.setSelection(i,s)}},{ATTRS:{mode:{value:"code"},height:{value:-1}}})},"1.0",{requires:["base","squarespace-flyout-link-edit","squarespace-code-editor"]})},"./src/main/webapp/universal/scripts-v6/markdown.js":function(e,t,i){YUI.add("squarespace-markdown",function(e){e.namespace("Squarespace.Lang");e.Squarespace.Lang.markdownFromHTML=function(e){var t=i("./src/main/webapp/universal/scripts-thirdparty/markdown/markdown-from-html.js");if(!e)return"";return t(e)};e.Squarespace.Lang.markdownToHTML=function(e,t){var a=i("./common/temp/node_modules/marked/lib/marked.js");if(!e)return"";a.setOptions({breaks:!!t});return a(e)}},"1.0",{requires:[]})},"./src/main/webapp/universal/scripts-v6/mixin-save-changes.js":function(e,t,a){var s=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-mixin-save-changes",function(i){i.namespace("Squarespace.Mixins").SaveChanges=i.Base.create("saveChanges",i.Base,[],{ensureSavedChanges:function(){if(!this.hasUnsavedChanges())return i.when();return i.Squarespace.Promises.create(function(e,t){var a=new i.Squarespace.Widgets.Confirmation({"strings.title":s("Review Changes"),"strings.message":s("You have made changes. Do you want to save or discard them?"),"strings.confirm":s("Save"),"strings.reject":s("Discard"),style:i.Squarespace.Widgets.Confirmation.TYPE.CONFIRM_OR_REJECT,showOverlay:true});a.once("confirm",function(){this._initSaveChanges().then(e,t)},this);a.once("reject",function(){this._discardChanges().then(e,t)},this);a.once("cancel",function(){t()})},this)},requestDelete:function(){return i.Squarespace.Fluent.Confirm({"strings.title":s("Delete Post"),"strings.message":s("Are you sure you wish to remove this item?"),"strings.confirm":s("Delete Post"),showOverlay:true}).then(i.bind(this._deleteItem,this))},revertChanges:function(){return i.Squarespace.Fluent.Confirm({"strings.title":s("Revert Changes"),"strings.message":s("This will revert the document back to the last saved version. Any changes will be lost. Do you want to proceed?"),"strings.confirm":s("Revert Changes"),showOverlay:true}).then(i.bind(this._revertChanges,this)).then(i.bind(this.markAsClean,this))},_initSaveChanges:function(){return this._saveChanges().then(i.bind(this.markAsClean,this))},_discardChanges:function(){return this._revertChanges().then(i.bind(this.markAsClean,this))},markAsClean:function(){this.set("dirty",false)},markAsDirty:function(){this.set("dirty",true)},hasUnsavedChanges:function(){return this.get("dirty")},isInSavingContext:function(){return this.get("dirty")},_deleteItem:function(){throw new Error('Y.Squarespace.ContentManagerWidgets.HasTray: No "_saveChanges" method implemented.')},_saveChanges:function(){this._throwClassError(s('No "_saveChanges" method implemented.'))},_revertChanges:function(){this._throwClassError(s("No _revertChanges method implemented"))},_throwClassError:function(e){throw new Error(["Class",this.constructor.NAME,"-",e].join(" "))}},{ATTRS:{dirty:{value:false,validator:i.Lang.isBoolean}}})},"1.0",{requires:["base","squarespace-fluent-confirmation","squarespace-promises","squarespace-widgets-confirmation"]})},"./src/main/webapp/universal/scripts-v6/mixins/click-selectable-parent.js":function(e,t){YUI.add("squarespace-mixins-click-selectable-parent",function(e){e.namespace("Squarespace.Mixins");e.Squarespace.Mixins.ClickSelectableParent=e.Base.create("clickSelectableParent",e.Base,[],{initializer:function(){this.publish("selectionChange");if(!this.hasImpl(e.WidgetParent))throw new Error("You must have the WidgetParent extension.");this._registerEvent(e.Do.after(this._bindEvents,this,"bindUI"))},_bindEvents:function(){var e=this.get("defaultChildType").NAME;this.on(e+":plainClicked",function(e){e.stopPropagation();this.setFocusedChild(e.target,{source:"list-click"})});this.on(e+":modifierClicked",function(e){e.stopPropagation();e.target.toggleSelected()})},setFocusedChild:function(t){this.each(function(e){if(e!==t){e.blur();e.set("selected",0)}},this);this.some(function(e){if(e===t){e.focus();e.set("selected",1);return true}},this)},getFocusedWidget:function(){return e.Array.find(this.toJSON(),function(e){return e.get("focused")})},clearSelected:function(){e.Array.invoke(this._items,"blur");e.Array.invoke(this._items,"set","selected",0)}},{ATTRS:{multiple:{value:true,readOnly:true}}})},"1.0",{requires:["array-invoke","base","widget-parent"]})},"./src/main/webapp/universal/scripts-v6/mixins/click-selectable.js":function(e,t){YUI.add("squarespace-mixins-click-selectable",function(e){e.namespace("Squarespace.Mixins");e.Squarespace.Mixins.ClickSelectable=e.Base.create("clickSelectable",e.Base,[],{initializer:function(){this.publish("plainClicked");this.publish("modifierClicked");if(!this.hasImpl(e.WidgetChild))throw new Error("You must have the WidgetChild extension.");e.Do.after(this._bindClickSelectableEvents,this,"bindUI",this)},_bindClickSelectableEvents:function(){this.get("boundingBox").on(["contextmenu","click"],function(e){e.stopPropagation();if(e.shiftKey||e.ctrlKey||e.metaKey){e.preventDefault();this.fire("modifierClicked")}else this.fire("plainClicked")},this);this.after("selectedChange",function(){this.get("boundingBox").toggleClass(this.getClassName("selected"),this.get("selected"));0===this.get("selected")&&this.blur()})},toggleSelected:function(){this.set("selected",0===this.get("selected")?1:0)}})},"1.0",{requires:["base","widget-parent"]})},"./src/main/webapp/universal/scripts-v6/mixins/editable-model.js":function(e,t){YUI.add("squarespace-mixins-editable-model",function(a){a.namespace("Squarespace.Mixins");a.Squarespace.Mixins.EditableModel=a.Base.create("EditableModel",a.Base,[],{_edit:function(){var e=a.merge({model:this.get("model")},this.get("editorConfig"));var t=new(this.get("editorCtor"))(e);this._bindEditor(t);t.show()},_bindEditor:function(e){}},{CSS_PREFIX:"sqs-editable-model",ATTRS:{editorCtor:{value:a.Squarespace.ModelEditorDialog,writeOnce:"initOnly"},editorConfig:{value:{},writeOnce:"initOnly"}}})},"1.0",{requires:["base","squarespace-model-editor"]})},"./src/main/webapp/universal/scripts-v6/mixins/event-list.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-mixins-event-list",function(s){s.namespace("Squarespace.Mixins");s.Squarespace.Mixins.EventList=s.Base.create("EventList",s.Base,[],{initializer:function(){s.Do.before(function(e){var t=s.Object.hasKey(e,"upcoming");var a=s.Object.hasKey(e,"past");if(t&&a)return new s.Do.AlterArgs(i("Parsing calendar-specific response"),[[].concat(e.upcoming).concat(e.past)])},this,"parse",this)},getPastEvents:function(){var i=new Date;return this.filter(function(e){var t=e.get("structuredContent");if(null===t)return false;var a=s.DataType.Date.parse(t.get("endDate"));return s.DataType.Date.isGreater(i,a)})},getUpcomingEvents:function(){var i=new Date;return this.filter(function(e){var t=e.get("structuredContent");if(null===t)return false;var a=s.DataType.Date.parse(t.get("endDate"));return!s.DataType.Date.isGreater(i,a)})}})},"1.0",{requires:["base","datatype-date","event-custom","json"]})},"./src/main/webapp/universal/scripts-v6/mixins/event-registrar.js":function(e,t){YUI.add("squarespace-mixins-event-registrar",function(a){a.namespace("Squarespace.Mixins");a.Squarespace.Mixins.EventRegistrar=a.Base.create("eventRegistrar",a.Base,[],{destructor:function(){a.Array.invoke(this.get("eventListeners"),"detach")},_registerEvent:function(){if(a.Lang.isArray(arguments[0]))this._registerEvent.apply(this,arguments[0]);else for(var e=0,t=arguments.length;e<t;e++)a.Lang.isValue(arguments[e])&&this.get("eventListeners").push(arguments[e])}},{ATTRS:{eventListeners:{value:[]}}})},"1.0",{requires:["array-invoke","base"]})},"./src/main/webapp/universal/scripts-v6/mixins/expandable.js":function(e,t){YUI.add("squarespace-mixins-expandable",function(a){a.namespace("Squarespace.Mixins");a.Squarespace.Mixins.Expandable=a.Base.create("Expandable",a.Base,[],{initializer:function(){this.publish("expandableOpened");this.publish("expandableClosed");this.after("expandableNodeChange",function(e){var t=e.newVal;t.plug(a.Squarespace.Animations.Expandable,{duration:this.get("expandDuration")})},this)},open:function(e){var t=this.get("expandableNode");if(t.hasClass("expandable-hidden")){t.once("opened",function(){this._set("animating",false);this._set("isOpen",true);this.fire("expandableOpened")},this);this._set("animating",true);t.show(e)}},close:function(e){var t=this.get("expandableNode");if(!t.hasClass("expandable-hidden")){t.once("closed",function(){this._set("animating",false);this._set("isOpen",false);this.fire("expandableClosed")},this);this._set("animating",true);t.hide(e)}}},{ATTRS:{expandableNode:{valueFn:function(){return this.get("contentBox")},validator:a.Squarespace.AttrValidators.isInstanceOf(a.Node)},expandDuration:{value:.2,validator:a.Squarespace.AttrValidators.isNumber,readOnly:true},isOpen:{value:false,validator:a.Squarespace.AttrValidators.isBoolean,readOnly:true},animating:{value:false,validator:a.Squarespace.AttrValidators.isBoolean,readOnly:true}}})},"1.0",{requires:["base","node","squarespace-animations","squarespace-attr-validators"]})},"./src/main/webapp/universal/scripts-v6/mixins/google-places-autocomplete.js":function(e,t,a){var o=a("./common/temp/node_modules/lodash/debounce.js");var l=a("./common/temp/node_modules/uuid/v4.js");var c=a("./src/main/webapp/universal/src/shared/utils/analytics/trackInternal.ts");var u=a("./src/main/webapp/universal/src/shared/utils/GooglePlacesAPI.js");var d="en-US";YUI.add("squarespace-mixins-google-places-autocomplete",function(m){m.namespace("Squarespace.Mixins");var f={POSTAL_CODE:"postal_code",COUNTRY:"country",LOCALITY:"locality",ROUTE:"route",STREET_NUMBER:"street_number",STREET_ADDRESS:"street_address",ADMIN_LEVEL_1:"administrative_area_level_1",SUBLOCALITY:"sublocality",POSTAL_TOWN:"postal_town",NEIGHBORHOOD:"neighborhood",PREMISE:"premise"};var i=m.Object.values(f);var s=m.Squarespace.Localities.COUNTRY_OPTIONS;var n=["address"];var t="sqs-google-places-autocomplete-mixin";var e="placeDetails";var r="address_component";m.Squarespace.Mixins.GooglePlacesAutocomplete=m.Base.create("GooglePlacesAutocomplete",m.Base,[],{initializer:function(){this.publish(e);m.Do.after(this._afterRenderUI,this,"renderUI",this);m.Do.after(this._afterBindUI,this,"bindUI",this);this.after("render",this._enableBrowserAutoComplete,this);this.sessionToken=l();this.setAttrs({source:m.bind(this._performAutoComplete,this),enableCache:false,resultTextLocator:"description",resultFilters:this._filterResults,resultFormatter:this._formatResults,minQueryLength:3})},_afterRenderUI:function(){var e=this.get("contentBox");e.addClass(t);e.one(".sqs-scroll-ac-scroll-container").append('<div class="google-required-elements"><div class="google-attributions"></div><div class="powered-by-google"></div></div>')},_afterBindUI:function(){this.before("select",this._getDetailsForPrediction,this);this.on("placeDetails",this._fillWithAddressLine1,this);this._inputNode.on("focus",function(){this._inputNode.setAttribute("autocomplete","off");this._inputIsFocused=true},this);this._inputNode.on("blur",function(){this._inputNode.setAttribute("autocomplete","on");this._inputIsFocused=false},this)},_enableBrowserAutoComplete:function(){this._inputNode.setAttribute("autocomplete","on")},_getDetailsForPrediction:function(e){e.halt();var i=e.result.raw;this._getPlaceDetails(i,function(e){var t=this._extractPlaceComponents(e.data);var a=this._buildLocationPayload(t,i);this.fire("placeDetails",{place:a})})},_extractPlaceComponents:function(e){var t=e.address_components;return m.Array.reduce(t,{},function(e,t){var a=m.Array.find(t.types,function(e){return-1!==m.Array.indexOf(i,e)});a?a===f.ADMIN_LEVEL_1?e[a]=t.short_name:a===f.COUNTRY?e[a]=s[t.short_name].title:e[a]=t.long_name:e[a]="";return e})},_buildLocationPayload:function(e,a){var t=m.Object.getValue(e,"street_number")||"";var i=m.Object.getValue(e,"route")||"";var s=m.Object.getValue(e,"country")||"";var n=m.Object.getValue(e,"locality")||"";var r=m.Object.getValue(e,"sublocality")||"";var o=m.Object.getValue(e,"neighborhood")||"";var l=m.Object.getValue(e,"postal_town")||"";var c=[l,n,r,o];var u=m.Array.find(c,function(t){return m.Array.find(a.terms,function(e){return e.value===t})})||n;var d=this._getPreferredStreetNumber(i,t);var p=m.Object.getValue(e,f.ADMIN_LEVEL_1)||"";var h=m.Object.getValue(e,f.POSTAL_CODE)||"";var g=m.Array.filter([u,p,h],function(e){return!!e}).join(", ").trim();return{address:(d+" "+i).trim(),country:s,city:u,state:p,zip:h,fullLocality:g}},_getPreferredStreetNumber:function(e,t){var a=this.get("query");var i=e.split(" ")[0];var s=a.toLowerCase().indexOf(i.toLowerCase());var n=a.substring(0,s).trim();if(n.length>t.length)return n;return t},_performAutoComplete:o(function(e,t){var a={query:e,types:n,language:d,sessiontoken:this.sessionToken};c("google_maps_map_api_autocomplete_on_edit");u.getPlacePredictions(a,this.get("googleTrackingContext")).then(function(e){this._inputIsFocused&&t(e.data)}.bind(this))},250),_getPlaceDetails:function(e,t){var a={placeid:e.place_id,language:d,sessiontoken:this.sessionToken,fields:r};c("google_maps_map_api_autocomplete_on_site");u.getDetails(a,this.get("googleTrackingContext")).then(m.bind(t,this))},_formatResults:function(e,t){return m.Array.map(t,function(s){var e=s.raw.terms;var n=s.raw.matched_substrings;var t=-1!==m.Array.indexOf(s.raw.types,"street_address");var a=e[0].offset+e[0].value.length;var i=e[1].offset+e[1].value.length;var r=t?i:a;return m.Array.map(s.text.split(""),function(e,t){var a=["google-ac-character"];this._indexWithinMatchedSubstring(t,n)&&a.push("google-ac-matched-character");var i='<span class="'+a.join(" ").trim()+'">'+e+"</span>";if(0===t)return'<div class="google-ac-address">'+i;if(t===r)return i+"</div>";if(t===r+1)return'<div class="google-ac-trailing">'+i;if(t===s.text.length)return i+"</div>";return i},this).join("")},this)},_indexWithinMatchedSubstring:function(t,e){return m.Array.some(e,function(e){return t>=e.offset&&t<e.offset+e.length})},_filterResults:function(e,t){return m.Array.filter(t,function(e){return this._predictionHasRouteComponent(e.raw)&&this._predictionContainsCountryInList(e.raw)},this)},_predictionContainsCountryInList:function(t){var e=this.get("countriesAllowed");if(!m.Lang.isArray(e)||0===e.length)return true;return m.Array.find(e,function(e){return-1!==t.description.indexOf(e)})},_predictionHasRouteComponent:function(e){return-1!==m.Array.indexOf(e.types,f.ROUTE)||-1!==m.Array.indexOf(e.types,f.STREET_ADDRESS)||-1!==m.Array.indexOf(e.types,f.PREMISE)}},{ATTRS:{googleTrackingContext:{},countriesAllowed:{validator:m.Squarespace.AttrValidators.isNullOrArray}}})},"1.0",{requires:["autocomplete-highlighters","base","event-custom","squarespace-attr-validators","squarespace-localities","squarespace-util"]})},"./src/main/webapp/universal/scripts-v6/mixins/loadable.js":function(e,t){YUI.add("squarespace-mixins-loadable",function(a){a.namespace("Squarespace.Mixins");a.Squarespace.Mixins.Loadable=a.Base.create("Loadable",a.Base,[],{initializer:function(){var e=this.get("loadable");var t=this.get("loadOnInitialize");if(a.Lang.isValue(e)){this._bindLoadable();t&&e.load()}else t&&false;this.after("loadableChange",this._bindLoadable,this)},destructor:function(){this._beforeLoadHandler&&this._beforeLoadHandler.detach();this._afterLoadHandler&&this._afterLoadHandler.detach();this._afterBindHandler&&this._afterBindHandler.detach()},_bindLoadable:function(){var e=this.get("loadable");this._beforeLoadHandler=a.Do.before(function(){this._set("loading",true)},e,"load",this);this._afterLoadHandler=e.after(["load","error"],function(){this.get("destroyed")||this._set("loading",false)},this);this._afterBindHandler=a.Do.after(function(){this.after("loadingChange",this.syncUI,this)},this,"bindUI",this)}},{ATTRS:{loadable:{value:null},loading:{value:false,validator:a.Squarespace.AttrValidators.isBoolean,readOnly:true},loadOnInitialize:{value:false,validator:a.Squarespace.AttrValidators.isBoolean,writeOnce:"initOnly"}}})},"1.0",{requires:["base","event-custom","squarespace-attr-validators"]})},"./src/main/webapp/universal/scripts-v6/mixins/paginated-model-list.js":function(e,t){YUI.add("squarespace-mixins-paginated-model-list",function(a){a.namespace("Squarespace.Mixins");a.Squarespace.Mixins.PaginatedModelList=a.Base.create("PaginatedModelList",a.Base,[],{initializer:function(){this.publish("firstPage");this.publish("previousPage");this.publish("nextPage");this.publish("currentPage");a.Do.after(function(){var e=this.get("paginator").paginateURL(a.Do.currentRetVal);return new a.Do.AlterReturn("Adding pagination params.",e)},this,"getURL",this);a.Do.before(function(e){var t=a.JSON.parse(e);this._set("hasPreviousPage",t.hasPreviousPage);this._set("hasNextPage",t.hasNextPage)},this,"parse",this)},firstPage:function(){this.get("paginator").firstPage();this.fire("firstPage")},previousPage:function(){this.get("paginator").previousPage();this.fire("previousPage")},nextPage:function(){this.get("paginator").nextPage();this.fire("nextPage")},currentPage:function(){this.get("paginator").currentPage();this.fire("currentPage")}},{ATTRS:{paginator:{valueFn:function(){return new a.Squarespace.Models.Paginator},validator:a.Squarespace.AttrValidators.isInstanceOf(a.Squarespace.Models.Paginator)},hasPreviousPage:{value:false,validator:a.Squarespace.AttrValidators.isBoolean,readOnly:true},hasNextPage:{value:false,validator:a.Squarespace.AttrValidators.isBoolean,readOnly:true}}})},"1.0",{requires:["base","event-custom","json","squarespace-attr-validators","squarespace-models-paginator"]})},"./src/main/webapp/universal/scripts-v6/mixins/searchable-model-list.js":function(e,t){YUI.add("squarespace-mixins-searchable-model-list",function(r){r.namespace("Squarespace.Mixins");r.Squarespace.Mixins.SearchableModelList=r.Base.create("SearchableModelList",r.Base,[],{initializer:function(){r.Do.after(function(){var e=this._searchifyURL(r.Do.currentRetVal);return new r.Do.AlterReturn("Adding search query param.",e)},this,"getURL",this)},_searchifyURL:function(e){var t=this.get("searchQuery");if(!r.Lang.isValue(t)||""===t)return e;var a=e.split("?");var i=a[1];var s=r.Lang.isValue(i);var n=s?r.QueryString.parse(i):{};n=r.merge(n,{q:t});return a[0]+"?"+r.QueryString.stringify(n)}},{ATTRS:{searchQuery:{value:null,validator:r.Squarespace.AttrValidators.isNullOrString}}})},"1.0",{requires:["base","event-custom","querystring","squarespace-attr-validators"]})},"./src/main/webapp/universal/scripts-v6/mixins/slide-refresher.js":function(e,t,i){YUI.add("squarespace-mixins-slide-refresher",function(e){e.namespace("Squarespace");var a=i("./src/main/webapp/universal/src/apps/App/shared/actions/SlideActions.js");e.Squarespace.Mixins.SlideRefresher=e.Base.create("SlideRefresher",e.Base,[],{_refreshSlideRendering:function(e){var t=this.get("slideSummary").get("slide");a.renderPreview(t.get("id"),t.get("layoutIdentifier"))}},{ATTRS:{slideSummary:{value:null}}})},"1.0",{requires:["base"]})},"./src/main/webapp/universal/scripts-v6/mobile-info-bar.js":function(e,t,a){var o=a("./common/temp/node_modules/@sqs/site-rendering/Maps/MapView.js");var l=a("./src/main/webapp/frontend/packages/enums/MobileInfoBarStyle.js");var c=a("./common/temp/node_modules/@sqs/utils/scroll/getDocScrollNode.js");var u=a("./src/main/webapp/universal/src/shared/utils/analytics/trackInternal.ts");var d=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var p=a("./common/temp/node_modules/lodash/debounce.js");var h=a("./common/temp/node_modules/@sqs/utils/focus/index.js").containFocus;var i=a("./src/main/webapp/universal/src/shared/utils/Keyboard.js");var g=i.isEnterKey;var m=i.isSpaceBar;var f=i.isEscapeKey;YUI.add("squarespace-mobile-info-bar",function(r){var i="location";var s="businessHours";var n=r.namespace("Squarespace.Widgets").MobileInfoBar=r.Base.create("MobileInfoBar",r.Squarespace.Widgets.SSWidget,[],{initializer:function(){this._bb=this.get("boundingBox");this._cb=this.get("contentBox");this._scrollNode=r.one(c(r.config.doc));this._content={};this._activeContent=null;this.after("render",function(){r.Global.fire("website-overlay:rendered",{selector:"."+this.getProperty("CSS_PREFIX")})})},bindUI:function(){n.superclass.bindUI.call(this);var e="."+this.getClassName("trigger[data-overlay]");var t="."+this.getClassName("overlay");var a="."+this.getClassName("overlay","content");var i="."+this.getClassName("overlay","close");this._overlay=this._cb.one(t);this._overlayContent=this._overlay.one(a);this._overlayClose=this._overlay.one(i);this._cb.delegate("click",this._handleClose,e,this);this._cb.delegate("keydown",function(e){(g(e)||m(e))&&this._handleClose(e)},e,this);this._overlayClose.on("keydown",function(e){(g(e)||m(e))&&this._handleClose(e)},this);this._overlayClose.on("click",this._handleClose,this);var s=r.one(r.config.win);this._registerEvent(s.on("scroll",p(this._autoHideOrClose,100,{leading:true,trailing:true}),this));this._overlay.on("touchmove",this._disableScroll,this);void 0!==window.orientation&&r.one(r.config.win).on("orientationchange",this._onOrientationChange,this)},syncUI:function(){n.superclass.syncUI.call(this);this._addStyleClass(this)},_onOrientationChange:function(){this._updateOverlay()},_autoHideOrClose:function(){if(!this._bb.getDOMNode())return;this.activeScreen&&this._toggleOverlay(this._overlayClose);var e=this._scrollNode.get("scrollTop");var t=this.getClassName("hide");var a=this._bb.hasClass(t);var i=e<=0;a&&i?this._bb.removeClass(t):a||i||this._bb.addClass(t)},_addStyleClass:function(e){if(this._isBarDark()){var t=e.get("boundingBox");t.addClass(e.getClassName("dark"))}},_isBarDark:function(){var e=this.get("style");var t=l.DARK;return e===t},_handleClose:function(e){var t=e.currentTarget;this._toggleOverlay(t)},_toggleOverlay:function(e){if(!e)return;var t=e.getAttribute("data-type");this._bb.hasClass(this._getShowOverlayClassName())?this._hideOverlay():this._renderOverlay(t)},_onKeyUp:function(e){if(f(e)){e.stopPropagation();this._hideOverlay()}},_getShowOverlayClassName:function(){return this.getClassName("show","overlay")},_renderOverlay:function(e){this._bb.addClass(this._getShowOverlayClassName());this._activeContent=this._isContentAvailable(e);if(!this._activeContent){this._activeContent=this._createContent(e);this._content[e]=this._activeContent}this._adjustCloseButton(e);this._activeContent.wrapper.setStyle("display","block");this._updateOverlay();this.activeScreen=e;this.revertFocusContainment=h({container:this._overlay.getDOMNode(),root:r.config.doc.body});this._overlay.setAttribute("aria-label",this._activeContent.title);r.one(r.config.win.document.documentElement).on("keyup",this._onKeyUp,this)},_hideOverlay:function(){this._bb.removeClass(this._getShowOverlayClassName());this._activeContent.wrapper.setStyle("display",null);this.activeScreen=null;if(this.revertFocusContainment){this.revertFocusContainment();this.revertFocusContainment=null}r.one(r.config.win.document.documentElement).detach("keyup",this._onKeyUp)},_adjustCloseButton:function(e){var t=this._isBarDark();var a=this.getClassName("overlay","close","dark");e!==i||t?this._overlayClose.removeClass(a):this._overlayClose.addClass(a)},_updateOverlay:function(){var e=this.getClassName("show","overlay");if(this._bb.hasClass(e)){var t=this._overlayContent.get("scrollHeight");var a=this._overlayContent.get("clientHeight");t>a?this._overlayContent.setStyle("overflow","scroll"):this._overlayContent.setStyle("overflow",null)}},_createContent:function(e){var t,a;if(e===i){t=this._renderLocation();a=this.get("strings.labels.location")}else if(e===s){t=this._renderBusinessHours();a=this.get("strings.labels.hours")}return{wrapper:t,title:a}},_renderLocation:function(){var e=this.get("mapTemplate");var t=r.Node.create(e);this._overlayContent.appendChild(t);t=this._renderAddress(t);t=this._renderMap(t);return t},_renderAddress:function(e){var t="."+this.getClassName("address");var a=this._getAddress();e.one(t).setHTML(a);return e},_getAddress:function(){var t=this.get("location");var a="";var i="";var e=["addressTitle","addressLine1","addressLine2","addressCountry"];var s;r.Array.each(e,function(e){s=t[e];if(s){i+='<div data-type="'+e+'">'+s+"</div>";a+=s+" "}});if(a){a=encodeURIComponent(a);a="//maps.google.com?q="+a;var n=this.getClassName("address","link");i+='<a rel="noopener" target="_blank" class="'+n+'" href="'+a+'"></a>'}return i},_renderMap:function(e){var t="."+this.getClassName("map");var a=this.get("location");delete a.markerLat;delete a.markerLng;r.Lang.isUndefined(a.mapZoom)&&(a.mapZoom=12);var i=e.one(t);u("google_maps_map_load_on_site");o.createView({},a,i.getDOMNode()).then(function(e){e.redraw()});return e},_renderBusinessHours:function(){var e=new r.Squarespace.Widgets.BusinessHours;this._addStyleClass(e);e.render(this._overlayContent);return e.get("boundingBox")},_isContentAvailable:function(e){return this._content[e]},_setDefaultContactEmail:function(e){var t=this.get("websiteSettings");var a=this.get("mobileInfoBarSettings");r.Lang.isNull(e)&&a.isContactEmailEnabled&&(e=t.contactEmail);return e},_setDefaultContactPhoneNumber:function(e){var t=this.get("websiteSettings");var a=this.get("mobileInfoBarSettings");r.Lang.isNull(e)&&a.isContactPhoneNumberEnabled&&(e=t.contactPhoneNumber);return e},_setDefaultLocation:function(e){var t=this.get("website");var a=this.get("mobileInfoBarSettings");r.Lang.isNull(e)&&a.isLocationEnabled&&(e=t.location);return e},_setDefaultBusinessHours:function(e){var t=this.get("websiteSettings");var a=this.get("mobileInfoBarSettings");r.Lang.isNull(e)&&a.isBusinessHoursEnabled&&(e=t.businessHours);return e},_disableScroll:function(e){var t=this.getClassName("overlay","content");var a=e.target;var i=a.ancestor("."+t);var s=i||a;var n=false;n=!s||"scroll"!==this._overlayContent.getStyle("overflow");n&&e.preventDefault()}},{CSS_PREFIX:"sqs-mobile-info-bar",HANDLEBARS_TEMPLATE:"mobile-info-bar.html",ATTRS:{mobileInfoBarSettings:{valueFn:function(){return r.Object.getValue(Static,["SQUARESPACE_CONTEXT","websiteSettings","mobileInfoBarSettings"])}},websiteSettings:{valueFn:function(){return r.Object.getValue(Static,["SQUARESPACE_CONTEXT","websiteSettings"])}},website:{valueFn:function(){return r.Object.getValue(Static,["SQUARESPACE_CONTEXT","website"])}},mapTemplate:{value:'<div><div class="sqs-mobile-info-bar-map-wrapper"><div class="sqs-mobile-info-bar-map"></div><div class="sqs-mobile-info-bar-address"></div></div></div>'},contactEmail:{value:null,setter:"_setDefaultContactEmail"},contactPhoneNumber:{value:null,setter:"_setDefaultContactPhoneNumber"},location:{value:null,setter:"_setDefaultLocation"},businessHours:{value:null,setter:"_setDefaultBusinessHours"},style:{value:null},strings:{value:{labels:{email:d("Email"),phone:d("Call"),location:d("Map"),hours:d("Hours"),close:d("Close")}}}}})},"1.0",{requires:["base","node","squarespace-business-hours","squarespace-damask-context-globals","squarespace-mobile-info-bar-template","squarespace-ss-widget"]})},"./src/main/webapp/universal/scripts-v6/modal-lightbox.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./common/temp/node_modules/@sqs/utils/focus/index.js").containFocus;YUI.add("squarespace-modal-lightbox",function(n){var e="sqs-modal-lightbox";n.namespace("Squarespace.Widgets");var t=n.Squarespace.Widgets.ModalLightbox=n.Base.create("modalLightbox",n.Squarespace.Widgets.SSWidget,[],{initializer:function(){var e=this.get("contentBox");e.set("role","dialog");e.set("aria-label",this.get("title"));this.publish("open");this.publish("close");this._resizeEmitter=new n.Squarespace.ResizeEmitter({timeout:100})},destructor:function(){this._resizeEmitter.destroy();n.Squarespace.EscManager.removeTarget(this)},renderUI:function(){t.superclass.renderUI.call(this);this.get("boundingBox").hide();var e=this._innerEl=n.Node.create('<div class="lightbox-inner"></div>');e.append('<div class="lightbox-content"></div>');this.get("contentBox").append('<div class="lightbox-background"></div>').append(e);this._renderContent();this.get("openOnRender")&&this.open()},bindUI:function(){t.superclass.bindUI.call(this);this.after("contentChange",function(){this._renderContent();this.syncUI()},this);this._resizeEmitter.on("resize",this.syncUI,this);this.get("contentBox").delegate("click",function(){this.close()},".lightbox-close",this);this.get("contentBox").delegate("keydown",function(e){if(13===e.keyCode||32===e.keyCode){e.preventDefault();this.close()}},".lightbox-close",this);this._innerEl.plug(n.Squarespace.Plugin.ScrollLock)},syncUI:function(){t.superclass.syncUI.call(this);this._setContentMarginTop()},open:function(){n.one("html").addClass("sqs-modal-lightbox-open");this.get("openClassNode")&&this.get("openClassNode").addClass("sqs-modal-lightbox-open");this.get("boundingBox").show();this._setContentBoxTop();this.syncUI();n.Squarespace.EscManager.addTarget(this);this.fire("open");this.revertFocusContainment=s({container:this.get("boundingBox")._node});this.documentScrollSubscription=n.one("document").on("scroll",this._setContentBoxTop,this)},close:function(){n.one("html").removeClass("sqs-modal-lightbox-open");this.get("openClassNode")&&this.get("openClassNode").removeClass("sqs-modal-lightbox-open");this.get("boundingBox").hide();this.fire("close");n.Squarespace.EscManager.removeTarget(this);this.revertFocusContainment&&this.revertFocusContainment();if(this.documentScrollSubscription){this.documentScrollSubscription.detach();this.documentScrollSubscription=null}},_renderContent:function(){var e=this._innerEl.one(".lightbox-content");var t=this.get("content");e.empty();n.instanceOf(t,n.Widget)?t.render(e):e.setContent(t);var a=i("Close");e.prepend('<div role="button" tabindex="0" class="lightbox-close" aria-label="'+a+'">&times;</div>')},_setContentBoxTop:function(){this.get("contentBox").setStyle("top",n.one(n.config.doc).get("scrollTop"))},_setContentMarginTop:function(){var e=this._innerEl.one(".lightbox-content");var t=n.one(n.config.win).get("winHeight");var a=e.get("offsetHeight");var i=a>t;var s;s=i?50:t/2-a/2;e.setStyles({marginTop:s,marginBottom:s})}},{CSS_PREFIX:e,ATTRS:{content:{value:null},animDuration:{value:.3},openOnRender:{value:false},openClassNode:{value:null},title:{value:""}}})},"1.0",{requires:["base","node","squarespace-dom-emitters-resize","squarespace-escmanager","squarespace-plugin-scroll-lock","squarespace-ss-widget","squarespace-util"]})},"./src/main/webapp/universal/scripts-v6/model-editor.js":function(e,t,a){var i=a("./common/temp/node_modules/@sqs/error-reporter/dist/index.js");var l=a("./src/main/webapp/frontend/packages/enums/CollectionTypes.js");var s=a("./src/main/webapp/frontend/packages/enums/Flag.js");var c=a("./src/main/webapp/frontend/packages/enums/RecordType.js");var n=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var u=a("./src/main/webapp/universal/src/shared/utils/CMSV7Events.js");var d=a("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/ContentBrowserAPI.js").default;var r=a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts");var p=a("./src/main/webapp/universal/src/shared/utils/commerce/analytics/trackProductEditor.ts");var h=a("./src/main/webapp/universal/src/shared/utils/commerce/analytics/mapProductTypeToString.ts");var g=a("./common/temp/node_modules/lodash/difference.js");var m=a("./src/main/webapp/universal/src/shared/utils/commerce/analytics/types.ts");var f=a("./common/temp/node_modules/lodash/isEqual.js");var v=a("./src/main/webapp/frontend/packages/enums/ProductTypes.js");var b=a("./src/main/webapp/universal/src/shared/utils/commerce/analytics/utils.ts");YUI.add("squarespace-model-editor",function(o){o.Squarespace.ModelEditorDialog=o.Base.create("ModelEditorDialog",o.Base,[],{initializer:function(){this.saving=false;this.publish("nonSavingClose",{emitFacade:true});this.publish("savingClose",{emitFacade:true});var a=this.get("dialog");this.on("visibleChange",function(e){if("dialog"===e.source)return;if(e.newVal===e.prevVal)return;var t=this.get("dialogConfig");a.detachAll(this.get("id")+"|*");o.detachAll(this.get("id")+"|*");if(!t)throw new Error("You need a DialogConfig for ModelEditorDialog to work!");e.newVal?this._showDialog():this._hideDialog()},this);this.on("modelChange",function(e){e.prevVal&&e.prevVal.detachAll(this.get("id")+"|*")},this);a.on("send-requested",this._onSendRequested,this);a.on("auto-save-requested",this.autoSave,this);a.on(["close","dismiss"],function(e){this.saving?this.fire("savingClose"):this.fire("nonSavingClose");this.set("visible",false,{source:"dialog"})},this)},destructor:function(){this.get("visible")&&this.set("visible",false)},_onSendRequested:function(e){var t=this.get("dialog");var a=this.validateFields();if(o.Lang.isValue(a))t.showErrors(a);else{this.saving=true;this.save()}},_showDialog:function(){var e=this.get("dialog");var t=this.get("dialogConfig");var a=o.Squarespace.ObjectBuilder.make(o.clone(t,this),this.get("dialogConfigContext"),this.getTemplateContext());var i=this.get("parentDialog");o.Lang.isValue(i)&&(a.parentDialog=i);e.setParams(a);e.setInitialData(this.getDialogData());var s={};var n=this.get("anchorNode");var r=this.get("flyoutPointerDirection");n&&(s.anchor=n);r&&(s.flyoutPointerDirection=this.get("flyoutPointerDirection"));e.show(s)},_hideDialog:function(){this.get("model").detachAll(this.get("id")+"|*");this.get("dialog").params.discardChangesConfirmation=false;this.get("dialog").close()},validateFields:function(){var e=this.get("dialog").getErrors();if(0===e.errors)return null},save:function(e,i,s){e=e||{};var t=this.get("dialog");var a=this.get("model");var n=a.getAttrs();a.setAttrs(this.sanitizeDialogData(t.getData()));if(this.get("onlySetAttrsOnSave")){this._saveResponseHandler(null,n,i,s);return}a.save(e,o.bind(function e(t,a){if(t&&a instanceof XMLHttpRequest)try{t=o.merge(t,JSON.parse(a.response))}catch(e){}this._saveResponseHandler(t,n,i,s)},this))},autoSave:function(e){e=e||{};var t=this.get("model");t.setAttrs(this.sanitizeDialogData(this.get("dialog").getData()));t.autoSave(e)},trackAction:function(e,t){try{var a=t.get("id");var i=t.get("collectionId");if(!a||!i||a===i)return;var s=d.getCollection(i);if(!s)return;if(d.isProducts(s))return;var n=t.get("recordType");var r="blog";s.collectionType===l.COLLECTION_TYPE_GENERIC&&n===c.EVENT&&(r="events");e({itemId:a,collectionType:r,collectionId:i})}catch(e){console.error(e)}},trackSave:function(e,t){this.trackAction(u.saveCollectionItem,e,t);var a=e.get("collectionId");var i=d.getCollection(a);if(d.isProducts(i)){var s=t;var n=e.getAttrs();var r=n.title;var o=h(e.get("productType"));var l=m.ProductEditor.YUI_EDITOR;var c=n.id;s.title!==n.title&&p.trackEditProductTitle(r,o,l,c);s.excerpt&&n.excerpt&&s.excerpt.html!==n.excerpt.html&&p.trackEditProductDescription(r,o,l,c);if(s.tags!==n.tags){g(s.tags,n.tags).forEach(function(e){p.trackRemoveTag(r,o,l,c,e)});g(n.tags,s.tags).forEach(function(e){p.trackAssignTag(r,o,l,c,e)})}if(s.categories!==n.categories){g(s.categories,n.categories).forEach(function(e){p.trackRemoveCategory(r,o,l,c,e)});g(n.categories,s.categories).forEach(function(e){p.trackAssignCategory(r,o,l,c,e)})}s.workflowState!==n.workflowState&&p.trackChangeVisibility(r,o,l,c,b.mapWorkflowStateToString(n.workflowState));s.additionalFieldsFormId!==n.additionalFieldsFormId&&p.trackAssignForm(r,o,l,c);s.relatedProductsStrategy===n.relatedProductsStrategy?"categories"===n.relatedProductsStrategy&&this._getRelatedCategoriesValue(s)!==this._getRelatedCategoriesValue(n)?p.trackChangeRelatedProducts(r,o,l,c,this._getRelatedCategoriesValue(n)):"tags"===n.relatedProductsStrategy&&s.relatedTags[0]!==n.relatedTags[0]&&p.trackChangeRelatedProducts(r,o,l,c,n.relatedTags[0]):s.relatedProductsStrategy!==n.relatedProductsStrategy&&("categories"===n.relatedProductsStrategy?p.trackChangeRelatedProducts(r,o,l,c,this._getRelatedCategoriesValue(n)):"tags"===n.relatedProductsStrategy?p.trackChangeRelatedProducts(r,o,l,c,n.relatedTags[0]):p.trackChangeRelatedProducts(r,o,l,c,"no-value-selected"));f(s.body,n.body)||p.trackChangeAdditionalInfo(r,o,l,c);f(s.subscriptionPlan,n.subscriptionPlan)||p.trackToggleSubscription(r,o,l,c,!!n.subscriptionPlan);e.get("productType")===v.DIGITAL?s.onSale!==n.onSale&&p.trackToggleOnSale(r,o,l,c,n.onSale):f(s.variants,n.variants)||n.variants.forEach(function(t){var e;s.variants&&(e=s.variants.find(function(e){return e.id===t.id}));e?t.onSale!==e.onSale&&p.trackToggleOnSale(r,o,l,c,t.onSale):t.onSale&&p.trackToggleOnSale(r,o,l,c,t.onSale)})}},_getRelatedCategoriesValue:function(e){var t=r.isFeatureEnabled(s.NESTED_CATEGORIES);return t?e.relatedCategoryIds[0]:e.relatedCategories[0]},_saveResponseHandler:function(e,t,a,i){var s=this.get("dialog");var n=this.get("model");if(e){if(e.errors)s.showErrors(e.errors);else{this._createErrorAlert(e);s.allowEditing()}n.setAttrs(t)}else{this.trackSave(n,t);a&&a();i||this.hide()}this.saving=false},_createErrorAlert:function(e){var t=String(e.code).charAt(0);var a;"4"===t||"5"===t?a=e.message||this.get("strings.errorMessage"):o.Lang.isString(e)?a=e:o.Lang.isObject(e)&&(e.error?a=e.error:e.message&&(a=e.message));i.trackCaughtError("damask","ModelEditorDialog._createErrorAlert ["+this.name+"]: "+a);if(a)return new o.Squarespace.Widgets.Alert({"strings.title":this.get("strings.errorTitle"),"strings.message":a})},getTemplateContext:function(){return this.get("model")},getDialogData:function(){return this.get("model").toJSON()},sanitizeDialogData:function(e){return e},show:function(){this.set("visible",true)},hide:function(){this.set("visible",false)}},{ATTRS:{model:{},onlySetAttrsOnSave:{value:false},dialog:{readOnly:true,valueFn:function(){return new o.Squarespace.EditingDialog}},dialogConfig:{},dialogConfigContext:{value:{}},anchorNode:{value:null},flyoutPointerDirection:{value:null},visible:{value:false},parentDialog:{value:null},strings:{value:{errorMessage:n("Please try again."),errorTitle:n("Error")}}}});o.namespace("Squarespace.ModelEditorPlugins");o.Squarespace.ModelEditorPlugins.AutoSave=o.Base.create("ModelEditorPluginAutoSave",o.Plugin.Base,[],{initializer:function(){this.afterHostMethod("_showDialog",function(){this._autoSaveRequest=o.later(5e3,this,this.requestAutoSave)},this);var e=o.bind(function(){if(this._autoSaveRequest){this._autoSaveRequest.cancel();this._autoSaveRequest=null}},this);var t=this.get("host").get("dialog");t&&t.on(["close","dismiss"],function(){e()},this);this.beforeHostMethod("_hideDialog",e,this);this.beforeHostMethod("autoSave",function(){this.get("host").get("model").once("save",function(){e();this._autoSaving=false},this)},this)},requestAutoSave:function(){if(this._autoSaving||!this.get("host").get("dialog").isVisible())return;this._autoSaving=true;this.get("host").autoSave()}},{NS:"autoSavePlugin"});o.Squarespace.ModelEditorPlugins.LoadBeforeShowing=o.Base.create("ModelEditorPluginLoadBeforeShowing",o.Plugin.Base,[],{initializer:function(){this.afterHostMethod("_showDialog",function(){var e=this.get("host");var t=e.get("dialog");var a=e.get("model");t.updateTitle(o.Squarespace.DialogStates.LOADING);t.showSaveOverlay();var i=this.get("id")+"|load";a.onceAfter(i,this.initDialogWithBlockModelData,this);a.load({forceReload:true},o.bind(this._loadErrorCallback,this))},this)},initDialogWithBlockModelData:function(){var e=this.get("host");var t=e.get("dialog");var a=e.getDialogData();t.setInitialData(a);t.setData(a);t.hideSaveOverlay();t.clearEdited()},_loadErrorCallback:function(e,t){if(e){if(t instanceof XMLHttpRequest)try{e=o.merge(e,JSON.parse(t.response))}catch(e){}var a=this.get("host");var i=a._createErrorAlert(e);i&&i.on("confirm",function(){a.get("dialog").close()},this)}}},{NS:"loadBeforeShowing"})},"1.0",{requires:["plugin","squarespace-dialog","squarespace-object-builder","squarespace-ss-widget","squarespace-ui-base","squarespace-widgets-alert"]})},"./src/main/webapp/universal/scripts-v6/model-list-parse.js":function(e,t){YUI.add("squarespace-model-list-parse",function(a){function e(){}e.prototype={parse:function(e){var t=this.constructor.superclass.parse.call(this,e);if(a.Lang.isObject(t)&&a.Lang.isArray(t.results))return t.results;return t}};a.namespace("Squarespace").ModelListParse=e},"1.0",{requires:[]})},"./src/main/webapp/universal/scripts-v6/model-sync-rest.js":function(e,t){YUI.add("squarespace-model-sync-rest",function(o){function e(){this._ioConfigCache={}}e.prototype={sync:function(e,t,a){o.Lang.isValue(t.timeout)||(t.timeout=1e7);o.ModelSync.REST.prototype.sync.apply(this,arguments)},_storeRequest:function(e,t){this._ioConfigCache[e.id]=o.merge(t,{})},_retrieveAndEvict:function(e){var t=this._ioConfigCache[e];this._ioConfigCache[e]=null;return t},_isCrumbFailure:function(e){return e&&e.crumbFail&&e.crumb},_sendSyncIORequest:function(e){var t=o.ModelSync.REST.prototype._sendSyncIORequest.apply(this,arguments);this._storeRequest(t,e);return t},_onSyncIOEnd:function(e,t){this._retrieveAndEvict(e);o.ModelSync.REST.prototype._onSyncIOEnd.apply(this,arguments)},_onSyncIOSuccess:function(e,t,a){var i=this._retrieveAndEvict(e);var s={};var n=t.responseText;o.Lang.isValue(n)&&n.trim()&&(s=o.JSON.parse(n));if(this._isCrumbFailure(s)){var r=s.crumb;o.ModelSync.REST.CSRF_TOKEN=r;o.Env.CSRF_TOKEN=r;i.headers["X-CSRF-Token"]=r;this._sendSyncIORequest(i)}else o.ModelSync.REST.prototype._onSyncIOSuccess.apply(this,arguments)},_onSyncIOFailure:function(e,t,a){var i=a.callback;if(i){var s={};var n=t.responseText;o.Lang.isValue(n)&&n.trim()&&(s=o.JSON.parse(n));i({code:t.status,msg:t.statusText,responseJSON:s},t)}}};o.mix(e,o.ModelSync.REST,false,null,1);o.namespace("Squarespace.ModelSync").REST=e},"1.0",{requires:["model-sync-rest"]})},"./src/main/webapp/universal/scripts-v6/models/attachment-list.js":function(e,t){YUI.add("squarespace-models-attachments-list",function(e){var t=e.namespace("Squarespace.Models").AttachmentsList=e.Base.create("AttachmentsList",e.Squarespace.Models.ModelList,[e.Squarespace.Mixins.PaginatedModelList],{model:e.Squarespace.Models.ContentItem,url:e.Squarespace.API_ROOT+"content-items?recordType={recordType}"},{ATTRS:{paginator:{valueFn:function(){return new e.Squarespace.Models.RangePaginator({models:this,orderBy:"addedOn",orderDirection:e.Squarespace.OrderDirection.DESCENDING})}},recordType:{value:e.Squarespace.RecordType.ATTACHMENT,readOnly:true},pageSize:{validator:e.Lang.isNumber,value:20,setter:function(e){this.get("paginator").set("limit",e)}}}});e.namespace("Squarespace.Models").SearchedAttachmentsList=e.Base.create("SearchedAttachmentsList",t,[],{url:e.Squarespace.API_ROOT+"content-items/search?transient=true&recordType={recordType}&q={searchQuery}"},{ATTRS:{paginator:{valueFn:function(){return new e.Squarespace.Models.OffsetPaginator({models:this,orderBy:"addedOn",orderDirection:e.Squarespace.OrderDirection.DESCENDING})}},searchQuery:{validator:e.Lang.isString,value:""}}})},"1.0",{requires:["squarespace-models-model-list","squarespace-models-range-paginator","squarespace-models-offset-paginator","squarespace-models-content-item","squarespace-model-sync-rest","squarespace-mixins-paginated-model-list","base"]})},"./src/main/webapp/universal/scripts-v6/models/audio.js":function(e,t){YUI.add("squarespace-models-audio",function(e){e.namespace("Squarespace.Models");e.Squarespace.Models.Audio=e.Base.create("Audio",e.Squarespace.Models.StructuredContent,[],{},{ATTRS:{_type:{value:"Audio",validator:function(e){return"Audio"===e},readOnly:true},embed:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},audioAssetUrl:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},artistName:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},lengthInMilliSeconds:{value:null,validator:e.Squarespace.AttrValidators.isNullOrNumber},bitRate:{value:null,validator:e.Squarespace.AttrValidators.isNullOrNumber},sampleRate:{value:null,validator:e.Squarespace.AttrValidators.isNullOrNumber}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},"./src/main/webapp/universal/scripts-v6/models/billing/autorenew-togglable.js":function(e,t){YUI.add("squarespace-models-billing-autorenew-togglable",function(e){e.namespace("Squarespace.Models.Billing");e.Squarespace.Models.Billing.AutorenewTogglable=e.Base.create("autorenewTogglable",e.Base,[],{enableAutorenew:function(){this.set("autorenewEnabled",true)},disableAutorenew:function(){this.set("autorenewEnabled",false)},toggleAutorenew:function(){this.set("autorenewEnabled",!this.get("autorenewEnabled"))}},{ATTRS:{autorenewEnabled:{validator:e.Squarespace.AttrValidators.isBoolean}}})},"1.0",{requires:["base","squarespace-attr-validators"]})},"./src/main/webapp/universal/scripts-v6/models/billing/campaigns-subscription.js":function(e,t){YUI.add("squarespace-models-billing-campaigns-subscription",function(e){e.namespace("Squarespace.Models.Billing");e.Squarespace.Models.Billing.CampaignsSubscription=e.Base.create("campaigns",e.Squarespace.Models.Billing.Subscription,[e.Squarespace.Models.Billing.AutorenewTogglable],{},{ATTRS:{autorenewEnabled:{validator:e.Squarespace.AttrValidators.isBoolean},plan:{validator:e.Squarespace.AttrValidators.isObject}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-billing-subscription","squarespace-models-billing-autorenew-togglable"]})},"./src/main/webapp/universal/scripts-v6/models/billing/domain-subscription.js":function(e,t){YUI.add("squarespace-models-billing-domain-subscription",function(e){e.namespace("Squarespace.Models.Billing");e.Squarespace.Models.Billing.DomainSubscription=e.Base.create("domainSub",e.Squarespace.Models.Billing.Subscription,[],{},{ATTRS:{domainName:{validator:e.Squarespace.AttrValidators.isString},autorenewEnabled:{validator:e.Squarespace.AttrValidators.isBoolean}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-billing-subscription"]})},"./src/main/webapp/universal/scripts-v6/models/billing/google-apps-subscription.js":function(e,t){YUI.add("squarespace-models-billing-google-apps-subscription",function(e){e.namespace("Squarespace.Models.Billing");e.Squarespace.Models.Billing.GoogleAppsSubscription=e.Base.create("googleAppsSub",e.Squarespace.Models.Billing.Subscription,[],{},{ATTRS:{domain:{validator:e.Squarespace.AttrValidators.isString},numAddresses:{validator:e.Squarespace.AttrValidators.isNumber}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-billing-subscription"]})},"./src/main/webapp/universal/scripts-v6/models/billing/information.js":function(e,t,a){var o=a("./src/main/webapp/universal/src/shared/utils/CustomerAPI.js");YUI.add("squarespace-models-billing-information",function(r){r.namespace("Squarespace.Models");r.Squarespace.Models.BillingInformation=r.Base.create("BillingInformation",r.Model,[],{url:"/api/billing/customer",sync:function(e,t,a){r.Lang.isFunction(a)||(a=function(){});var i=function(e){a(null,e.data)};var s=function(e){var t={code:e.status,msg:e.statusText,responseJSON:{errors:e.data}};a.call(null,t,e)};var n=this.toJSON();switch(e){case"create":o.create(n).then(i,s);break;case"update":o.save(n).then(i,s);break;case"read":o.loadCustomer().then(i,s);break;default:throw new Error("Unsupported action: "+e)}}},{ATTRS:{name:{validator:r.Squarespace.AttrValidators.isString},balance:{validator:r.Squarespace.AttrValidators.isNumber},cardNumber:{validator:r.Squarespace.AttrValidators.isString},cvv:{validator:r.Squarespace.AttrValidators.isNullOrString,value:null},zip:{validator:r.Squarespace.AttrValidators.isString},expirationMonth:{validator:r.Squarespace.AttrValidators.isNumber},expirationYear:{validator:r.Squarespace.AttrValidators.isNumber},country:{validator:function(e){if(!r.Lang.isString(e))return false;if(""===e)return false;return r.Lang.isValue(r.Squarespace.Localities.COUNTRY_OPTIONS[e])}}}})},"1.0",{requires:["base","model","squarespace-attr-validators","squarespace-localities"]})},"./src/main/webapp/universal/scripts-v6/models/billing/subscription-factory.js":function(e,t){YUI.add("squarespace-models-billing-subscription-factory",function(i){i.namespace("Squarespace.Models.Billing");var s={googleapps:i.Squarespace.Models.Billing.GoogleAppsSubscription,website:i.Squarespace.Models.Billing.WebsiteSubscription,domain:i.Squarespace.Models.Billing.DomainSubscription,campaigns:i.Squarespace.Models.Billing.CampaignsSubscription};i.Squarespace.Models.Billing.SubscriptionFactory={create:function(e){var t=e.type;var a=s[t];if(!i.Lang.isFunction(a))return null;return new a(e)}}},"1.0",{requires:["squarespace-models-billing-campaigns-subscription","squarespace-models-billing-domain-subscription","squarespace-models-billing-google-apps-subscription","squarespace-models-billing-website-subscription"]})},"./src/main/webapp/universal/scripts-v6/models/billing/subscription-list.js":function(e,t){YUI.add("squarespace-models-billing-subscription-list",function(a){a.namespace("Squarespace.Models.Billing");var i=a.Squarespace.Models.Billing.SubscriptionList=a.Base.create("billingSubscriptionList",a.ModelList,[],{model:a.Squarespace.Models.Billing.Subscription,add:function(e,t){e=a.Lang.isArray(e)?a.Array.map(e,this._reifyModel,this):this._reifyModel(e);return i.superclass.add.call(this,e,t)},filterByType:function(t){return this.filter(function(e){return e.get("type")===t})},isPastDue:function(){return this.some(function(e){return e.get("pastDue")})},_reifyModel:function(e){if(e instanceof a.Model)return e;return a.Squarespace.Models.Billing.SubscriptionFactory.create(e)}})},"1.0",{requires:["base","model-list","squarespace-models-billing-subscription","squarespace-models-billing-subscription-factory"]})},"./src/main/webapp/universal/scripts-v6/models/billing/subscription.js":function(e,t,a){var i=a("./common/temp/node_modules/@sqs/i18n-ui/lib/money/index.js");YUI.add("squarespace-models-billing-subscription",function(s){s.namespace("Squarespace.Models.Billing");var e=function(e,t){if(e instanceof i)return true;try{i.fromJson(e);return true}catch(e){false;return false}};s.Squarespace.Models.Billing.Subscription=s.Base.create("billingSubscription",s.Model,[s.Squarespace.ModelSync.REST],{url:"/api/billing/subscriptions/{id}",root:"/api/billing/subscriptions",initializer:function(e){!s.Lang.isObject(e.nextChargeAmount)||e.nextChargeAmount instanceof i||this.set("nextChargeAmount",i.fromJson(e.nextChargeAmount));!s.Lang.isObject(e.nextChargeTax)||e.nextChargeTax instanceof i||this.set("nextChargeTax",i.fromJson(e.nextChargeTax))},isNew:function(){return!s.Lang.isString(this.get("id"))},previewCancel:function(){return s.Squarespace.Promises.create(function(t,e){var a=this.getURL("read")+"/cancellation-preview";s.Data.get({url:a,success:function(e){s.Lang.isValue(e.refundAmount)?t({refundAmount:i.fromJson(e.refundAmount)}):s.Lang.isValue(e.amount)?t({refundAmount:new i(e.amount,"USD")}):t(null)},failure:e})},this)},previewQuantityChange:function(e){return s.Squarespace.Promises.create(function(t,a){var i=new s.Squarespace.Models.QuantityChangePreview({subscriptionId:this.get("id"),newQuantity:e});i.load(function(e){s.Lang.isValue(e)?a(e):t(i)})},this)},changePeriod:function(e){return s.Squarespace.Promises.create(function(t,a){this.setLegacyPeriod(e);this.save(function(e){s.Lang.isValue(e)?a(e):t(this)})},this)},toJSON:function(){var e=s.Squarespace.Models.Billing.Subscription.superclass.toJSON.call(this);s.Lang.isDate(e.renewalDate)&&(e.renewalDate=e.renewalDate.getTime());e.nextChargeAmount instanceof i&&(e.nextChargeAmount=e.nextChargeAmount.toJson());e.nextChargeTax instanceof i&&(e.nextChargeTax=e.nextChargeTax.toJson());return e},parse:function(e){var t=s.Squarespace.Models.Billing.Subscription.superclass.parse.call(this,e);s.Lang.isNumber(t.renewalDate)&&(t.renewalDate=new Date(t.renewalDate));return t},setLegacyPlan:function(e){this.set("product",s.merge(this.get("product"),{plan:e}))},setLegacyPeriod:function(e){this.set("product",s.merge(this.get("product"),{period:e}))}},{ATTRS:{id:{validator:s.Squarespace.AttrValidators.isString},renewalDate:{validator:s.Squarespace.AttrValidators.isDate},nextChargeAmount:{validator:e,setter:function(e){if(s.Lang.isObject(e)&&!(e instanceof i))return i.fromJson(e);return e}},nextChargeTax:{validator:e,setter:function(e){if(s.Lang.isObject(e)&&!(e instanceof i))return i.fromJson(e);return e}},product:{validator:function(e){return s.Lang.isString(e.plan)&&s.Lang.isString(e.period)}},type:{validator:s.Squarespace.AttrValidators.isString},postSubscribeTemplateInstallIdentifier:{validator:s.Squarespace.AttrValidators.isNullOrString,value:null},coverPageCollectionId:{validator:s.Squarespace.AttrValidators.isNullOrString,value:null},createNewCoverPage:{validator:s.Squarespace.AttrValidators.isNullOrBoolean,value:null}}})},"1.0",{requires:["base","model","squarespace-attr-validators","squarespace-model-sync-rest","squarespace-models-quantity-change-preview","squarespace-promises"]})},"./src/main/webapp/universal/scripts-v6/models/billing/summary.js":function(e,t){YUI.add("squarespace-models-billing-summary",function(a){a.namespace("Squarespace.Models.Billing");a.Squarespace.Models.Billing.Summary=a.Base.create("billingSummary",a.Model,[a.Squarespace.ModelSync.REST],{initializer:function(){this.onceAfter("load",function(){this.set("initialLoadComplete",true)},this)},url:"/api/billing/summary",isNew:function(){return false},parse:function(e){var t=a.Squarespace.Models.Billing.Summary.superclass.parse.call(this,e);t.subscriptions=new a.Squarespace.Models.Billing.SubscriptionList({items:a.Array.map(t.subscriptions,function(e){a.Lang.isNumber(e.renewalDate)&&(e.renewalDate=new Date(e.renewalDate));"resold"===e.type&&(e.type="website");return e})});t.customer=new a.Squarespace.Models.BillingInformation(t.customer);return t},_setCustomer:function(e){if(a.Squarespace.Utils.isIAP()||a.Squarespace.Utils.isIAPGracePeriod())return;var t=this.get("customer");t?t.setAttrs(e.toJSON()):t=e;return t}},{ATTRS:{initialLoadComplete:{value:false,validator:a.Squarespace.AttrValidators.isBoolean},subscriptions:{validator:a.Squarespace.AttrValidators.isNullOrInstanceOf(a.Squarespace.Models.Billing.SubscriptionList)},customer:{valueFn:function(){return new a.Squarespace.Models.BillingInformation},setter:"_setCustomer",validator:a.Squarespace.AttrValidators.isNullOrInstanceOf(a.Squarespace.Models.BillingInformation)},cardLast4:{getter:function(){var e=this.get("customer");if(e){var t=e.get("cardNumber");if(a.Lang.isString(t))return t.substr(-4)}return null}}}})},"1.0",{requires:["base","model","squarespace-attr-validators","squarespace-model-sync-rest","squarespace-models-billing-information","squarespace-models-billing-subscription-list"]})},"./src/main/webapp/universal/scripts-v6/models/billing/website-subscription.js":function(e,t){YUI.add("squarespace-models-billing-website-subscription",function(e){e.namespace("Squarespace.Models.Billing");e.Squarespace.Models.Billing.WebsiteSubscription=e.Base.create("websiteSubscription",e.Squarespace.Models.Billing.Subscription,[e.Squarespace.Models.Billing.AutorenewTogglable],{},{ATTRS:{startDate:{validator:e.Squarespace.AttrValidators.isNumber},endDate:{validator:e.Squarespace.AttrValidators.isNumber},product:{validator:e.Squarespace.AttrValidators.isObject}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-billing-subscription","squarespace-models-billing-autorenew-togglable"]})},"./src/main/webapp/universal/scripts-v6/models/calendar-event.js":function(e,t){YUI.add("squarespace-models-calendar-event",function(e){e.namespace("Squarespace.Models");e.Squarespace.Models.CalendarEvent=e.Base.create("CalendarEvent",e.Squarespace.Models.StructuredContent,[],{},{ATTRS:{_type:{value:"CalendarEvent",validator:function(e){return"CalendarEvent"===e},readOnly:true},startDate:{valueFn:function(){var e=new Date;var t=e.getMinutes();e.setSeconds(0);e.setMilliseconds(0);if(t>=30){e.addHours(1);e.setMinutes(0)}else e.setMinutes(30);return e.getTime()},validator:e.Squarespace.AttrValidators.isNumber},endDate:{valueFn:function(){var e=new Date(this.get("startDate"));e.addHours(1);return e.getTime()},validator:e.Squarespace.AttrValidators.isNumber}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},"./src/main/webapp/universal/scripts-v6/models/check-in.js":function(e,t){YUI.add("squarespace-models-check-in",function(e){e.namespace("Squarespace.Models");e.Squarespace.Models.CheckIn=e.Base.create("CheckIn",e.Squarespace.Models.StructuredContent,[],{},{ATTRS:{_type:{value:"CheckIn",validator:function(e){return"CheckIn"===e},readOnly:true},checkinId:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},venueId:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},timeZone:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},venueName:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},address:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},crossStreet:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},city:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},state:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},country:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},postalCode:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},categoryId:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},categoryPluralName:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},categoryShortName:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},categoryIcon:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},"./src/main/webapp/universal/scripts-v6/models/collection-configuration.js":function(e,t,a){var i=a("./src/main/webapp/frontend/packages/enums/CollectionTypes.js");var s=a("./src/main/webapp/frontend/packages/enums/FolderBehavior.js");YUI.add("squarespace-models-collection-configuration",function(t){t.namespace("Squarespace.Models");t.Squarespace.Models.CollectionConfiguration=t.Base.create("CollectionConfiguration",t.Model,[],{initializer:function(e){t.Lang.isBoolean(e.variation)&&e.variation?this.set("folderBehavior",s.VARIATION):t.Lang.isBoolean(e.index)&&e.index?this.set("folderBehavior",s.INDEX):t.Lang.isBoolean(e.folder)&&e.folder&&this.set("folderBehavior",s.NONE)}},{ATTRS:{collectionType:{value:i.COLLECTION_TYPE_GENERIC},folder:{value:false},folderBehavior:{},supported:{value:true}}})},"1.0",{requires:["base","model"]})},"./src/main/webapp/universal/scripts-v6/models/commerce/inventory/inventory.js":function(e,t){YUI.add("squarespace-models-inventory",function(i){i.namespace("Squarespace.Models");i.Squarespace.Models.Inventory=i.Base.create("Inventory",i.Squarespace.Models.GrowableModelList,[i.Squarespace.Mixins.SearchableModelList],{model:i.Squarespace.Models.ContentItem,url:i.Squarespace.API_ROOT+"commerce/inventory",initializer:function(){this.after("*:save",function(e){var t=e.target;var a=this.indexOf(t);this.remove(t);t.get("workflowState")!==i.Squarespace.WorkflowStates.DELETED&&this.add(t,{index:a})},this)}},{getViolation:function(e){return new i.Squarespace.Promises.create(function(t,a){i.Data.get({url:"/api/commerce/inventory/violation",data:{numBeingAdded:e},success:function(e){if(e.blockUserAction){a(e);return}t(true)},failure:a})})},getProductStock:function(e,t){i.Data.get({url:"/api/commerce/inventory/stock",data:{itemId:e.join(",")},success:function(e){i.Lang.isFunction(t)&&t(e)}})},ATTRS:{paginator:{valueFn:function(){return new i.Squarespace.Models.OffsetPaginator({models:this,orderBy:"title",orderDirection:i.Squarespace.OrderDirection.DESCENDING})}}}})},"1.0",{requires:["base","squarespace-mixins-searchable-model-list","squarespace-models-content-item","squarespace-models-growable-model-list","squarespace-models-offset-paginator","squarespace-util","squarespace-promises"]})},"./src/main/webapp/universal/scripts-v6/models/connected-account.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/apps/App/shared/actions/ConnectedAccountsActions.js");YUI.add("squarespace-models-connected-account",function(e){e.namespace("Squarespace.Models");var t=e.Base.create("ConnectedAccount",e.Model,[e.Squarespace.ModelSync.REST],{url:e.Squarespace.REST_API_ROOT+"social-accounts/{id}",root:e.Squarespace.REST_API_ROOT+"social-accounts",initializer:function(e){this.after("save",function(e){i.refreshConnectedAccounts()})},resetSubscription:function(){e.Data.post({url:"/api/config/ResetSocialAccountSubscription",data:{connectedAccountId:this.get("id")}},this)}},{ATTRS:{unauthorized:{getter:function(){return this.get("accountState")===e.Squarespace.AccountStates.UNAUTHORIZED}},hash:{readOnly:true,getter:function(){return this.get("serviceName").toLowerCase()+"-"+this.get("userId")}},userName:{validator:e.Lang.isString,value:null},accountState:{value:e.Squarespace.AccountStates.ACTIVE},websiteId:{value:null},profileUrl:{validator:e.Lang.isString,value:null},serviceId:{validator:e.Lang.isNumber},serviceName:{validator:e.Lang.isString},pullEnabled:{validator:e.Lang.isBoolean,value:false},pushEnabled:{validator:e.Lang.isBoolean,value:true},autoPushEnabled:{validator:e.Lang.isBoolean,value:false},iconEnabled:{validator:e.Lang.isBoolean},userId:{validator:e.Lang.isString},iconURL:{validator:e.Lang.isString},defaultPushMessage:{validator:e.Lang.isString},screenName:{validator:e.Lang.isString},collectionId:{validator:e.Lang.isString},metaData:{validator:e.Lang.isObject,value:null}}});e.Squarespace.Models.ConnectedAccount=t},"1.0",{requires:["base","model","squarespace-model-sync-rest","squarespace-util","squarespace-enum"]})},"./src/main/webapp/universal/scripts-v6/models/connected-accounts.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/apps/App/shared/stores/ConnectedAccountsStore.js");var s=a("./src/main/webapp/universal/src/apps/App/shared/stores/WebsiteStore/index.js");YUI.add("squarespace-models-connected-accounts",function(e){e.namespace("Squarespace.Models");e.Squarespace.Models.ConnectedAccounts=e.Base.create("ConnectedAccounts",e.ModelList,[e.Squarespace.ModelSync.REST,e.Squarespace.ModelListParse],{model:e.Squarespace.Models.ConnectedAccount},{loadFromStore:function(){return new e.Squarespace.Models.ConnectedAccounts({websiteId:s.getState().id,items:i.getState().connectedAccounts||[]})},ATTRS:{websiteId:{value:null}}})},"1.0",{requires:["base","model","model-list","squarespace-model-list-parse","squarespace-model-sync-rest","squarespace-models-connected-account","squarespace-util"]})},"./src/main/webapp/universal/scripts-v6/models/content-collection.js":function(e,t,a){var i=a("./common/temp/node_modules/alt-utils/lib/ActionListeners.js");var s=a("./src/main/webapp/universal/src/shared/dispatchers/alt/index.ts");var u=a("./src/main/webapp/universal/src/apps/App/shared/stores/TemplateInstallationsStore.js");var n=a("./src/main/webapp/universal/src/apps/App/shared/stores/TemplateStore.js");var r=a("./src/main/webapp/universal/src/apps/App/shared/actions/ContentCollectionActions.js");var o=a("./src/main/webapp/universal/src/apps/App/shared/stores/ContentCollectionStore.js");var l=a("./src/main/webapp/universal/src/apps/App/shared/actions/ContentItemActions.js");var d=a("./src/main/webapp/frontend/packages/enums/CollectionTypes.js");var p=a("./src/main/webapp/universal/src/shared/constants/Constants.js");var h=a("./src/main/webapp/frontend/packages/enums/MediaProcessingState.js");var g=a("./src/main/webapp/frontend/packages/enums/CollectionOrdering.js");var m=a("./src/main/webapp/universal/src/shared/utils/network.js");var f=a("./node_modules/querystring-es3/index.js");var v=a("./common/temp/node_modules/@sqs/error-reporter/dist/index.js");var b=a("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/ContentBrowserAPI.js").default;YUI.add("squarespace-models-content-collection",function(c){c.namespace("Squarespace.Models");var t=c.Squarespace.Models.ContentCollection=c.Base.create("Collection",c.Model,[],{initializer:function(e){this.items=e?new c.Squarespace.Models.ContentItemList({items:e.items||[],parent:this,limit:this.get("itemLimit")}):new c.Squarespace.Models.ContentItemList({parent:this,limit:this.get("itemLimit")});this._itemsEventHandle=this.items.after(["load","add","remove"],this._updateItemCount,this);this._syncFolderChange(this.get("folder"));this.after("folderChange",function(e){this._syncFolderChange(e.newVal)});this.actionListener=new i(s);this.actionListener.addActionListener(l.CONTENT_BROWSER_SETTINGS_SAVED,this._onContentBrowserSettingsSaved.bind(this));this._initialAttrs=this.getAttrs();this.unlistenToModelStore=o.listen(this._handleStoreChange.bind(this))},destructor:function(){if(this.unlistenToModelStore){this.unlistenToModelStore();this.unlistenToModelStore=null}this._itemsEventHandle.detach();this._itemsEventHandle=null;this.items.destroy();this.items=null;this.actionListener.removeAllActionListeners();this.actionListener=null},toDebugString:function(){return c.JSON.stringify(this.getAttrs(["navigationTitle","urlId","id"]))},toJSON:function(){var e=this.constructor.superclass.toJSON.call(this);this.items&&(e.items=this.items.toJSON());return e},parse:function(e){e=t.superclass.parse.apply(this,arguments);e.passwordProtected&&(e.password=p.PASSWORD_MASK);return e},sync:function(e,t,a){switch(e){case"create":this._ensureDemoCloneAndSave(a);break;case"delete":if(t.isUnusedStarterPage)this._deleteUnusedCollectionPermanently(a);else if(false===t.deleteCollection){r.deleteSuccess(this.get("id"));"function"===typeof a&&a()}else this._delete(a);break;case"read":this._read(t,a);break;case"update":this._ensureDemoCloneAndSave(a);break}},load:function(e,t,a){if("function"===typeof e){a=t;t=e;e={}}if(this._readInProgress){this.onceAfter("load",t,a);return}c.Model.prototype.load.call(this,e,t?c.bind(t,a||this):null)},resetToLastRead:function(){return o.fetch(this.get("id")).then(function(e){var t=this.getAttrs();c.Object.keys(t).map(function(e){t[e]=void 0});var a=c.merge(t,this._initialAttrs,this.parse(e.toJS()));this.setAttrs(a);this.set("dirty",false)}.bind(this)).catch(this._errorHandler)},ensureProcessedItems:function(){var a=function(t){this.items.load({fields:["mediaProcessingState"]},function(){var e=this.items.some(function(e){return e.get("mediaProcessingState")!==h.READY});e?c.later(500,this,a,t):t()}.bind(this))}.bind(this);return new c.Promise(function(e){a(e)})},_syncFolderChange:function(e){e&&this.set("dropdown",true)},_ensureDemoCloneAndSave:function(e){if(this._shouldCloneCollection()){var t=this.toJSON();delete t.id;this.cloneToNewCollection({silent:true}).then(c.bind(this._save,this,e,t))}else this._save(e)},_handleStoreChange:function(e){if(!c.Env){if(this.unlistenToModelStore){this.unlistenToModelStore();this.unlistenToModelStore=null}return}var t=e.get(this.getId());if(t){this.setAttrs(this.parse(t.toJS()));this.set("dirty",false)}},serialize:function(e){e=c.merge(e,this.toJSON());e.collectionId=e.id;delete e.dirty;delete e.body;delete e.tags;delete e.categories;delete e.items;if(c.Lang.isValue(e.mainImage)){e.mainImageId=c.instanceOf(e.mainImage,c.Squarespace.Models.ContentItem)?e.mainImage.get("id"):e.mainImage.id;delete e.mainImage}e.metadata&&e.metadata.albumCover&&delete e.metadata.albumCover;if(e.productQuickViewEnabled){e.features.productQuickView.isEnabled=e.productQuickViewEnabled;delete e.productQuickViewEnabled}if(e.relatedItemsEnabled){e.features.relatedItems.isEnabled=e.relatedItemsEnabled;delete e.relatedItemsEnabled}return e},serializeForReporting:function(){var e=this.getTemplateConfiguration();var t=this.serialize();delete t.passwordProtected;delete t.password;delete t.memberAreaIds;t.templateConfig=e.toJSON();return t},_errorHandler:function(e){var t="ContentCollection._errorHandler ["+this.name+"] ";v.trackCaughtError("damask",t+e.message,e.stack);false},_save:function(t,e){e=this.serialize(e);r.update(e).then(function(e){if(e.error){t(e,null);return}this._initialAttrs=e;t(null,e)}).catch(this._errorHandler)},_delete:function(t){r.delete(this.get("id")).then(function(e){t(null,e)},function(e){t(e,null)}).catch(this._errorHandler)},_deleteUnusedCollectionPermanently:function(t){r.deleteUnusedCollectionPermanently(this.get("id")).then(function(e){t(null,e)},function(e){t(e,null)}).catch(this._errorHandler)},_read:function(a,i){this._readInProgress=true;var e="fetch";a.forceReload&&(e="fetchFromServer");var s=(new Error).stack;o[e](this.get("id")).then(function(e){var t=this.parse(e.toJS());if(c.Squarespace.ContentCollectionUtils.usesDisplayIndex(t.ordering))this._fetchItemCount(t.id).then(function(e){this._readInProgress=false;t.itemCount=e;i(null,t)}.bind(this));else{this._readInProgress=false;i(null,t)}}.bind(this),function(e){this._readInProgress=false;i(e,null);var t=a?"Options: "+JSON.stringify(a):"";v.trackCaughtError("damask","ContentCollection._read ["+this.name+"] Error retrieving content from store: \n"+t,s)}.bind(this)).catch(this._errorHandler)},_updateItemCount:function(){c.Squarespace.ContentCollectionUtils.usesDisplayIndex(this.get("ordering"))&&(this.isNew()?this.set("itemCount",0):this._fetchItemCount(this.get("id")).then(function(e){this.set("itemCount",e)}.bind(this)).catch(this._errorHandler))},_fetchItemCount:function(a){return new c.Promise(function(t,e){c.Data.get({url:"/api/content-collections/"+a+"/item-count",success:function(e){t(e)},failure:e},this)})},_onContentBrowserSettingsSaved:function(e){if(this.get("id")===e.collectionId){var t=this.items.getById(e.id);t?t.setAttrs(e,{source:l.CONTENT_BROWSER_SETTINGS_SAVED}):this.items.add(e)}},getTemplateConfiguration:function(){var e;var t=this.get("typeName");var a=this.get("type");e=a===d.TEMPLATE_PAGE?n.getPageConfig(t):n.getCollectionConfig(t);if(e)return new c.Squarespace.Models.CollectionConfiguration(e);return new c.Squarespace.Models.CollectionConfiguration({collectionType:a||d.COLLECTION_TYPE_GENERIC,ordering:this.get("ordering"),folder:this.get("folder"),supported:false})},cloneToNewCollection:function(s){return new c.Promise(c.bind(function(t,a){var i=c.Squarespace.Singletons.TemplateNavigationList.getItemByCollectionId(this.get("id"));var e=this._cloneExampleContent(s);e.then(c.bind(function(e){i.set("collectionId",e);i.save(t);t(e)},this)).catch(function(e){a(e)},this)},this))},cloneToNewCollectionWithItem:function(s,n){return new c.Promise(c.bind(function(t,e){var a=c.Squarespace.Singletons.TemplateNavigationList.getItemByCollectionId(this.get("id"));var i=this._cloneExampleContent(c.merge({itemId:s},n));i.then(c.bind(function(e){a.set("collectionId",e.collection.id);a.save(function(){t(e)})},this))},this))},_cloneExampleContent:function(t){t=t||{};var l=t.itemId;var e=new c.Promise(c.bind(function(n,r){var o=this.get("id");var e;e=b.canHandleCollection(this.serialize())?l?b.cloneDemoCollectionWithItem(this.get("id"),t.itemId):b.cloneCollection(this.get("id")):m.post("/api/commondata/CopyCollection",f.stringify({collectionId:this.get("id"),processPointedCollectionItems:true})).then(function(e){return e.data});e.then(function(e){var t;var a;if(l){t=e.collection;a={collection:e.collection,itemFullUrl:e.itemFullUrl}}else{t=e;a=e.id}this.setAttrs(c.merge({mainImageId:null,mainImage:null,seoSocialSharingImage:null},t));var i=t.id;var s=u.getHomepageCollectionId();s===o?b.setHomepage(i).then(function(e){e.error?r():n(a)}):n(a)}.bind(this)).catch(function(e){r(e)})},this));e.then(c.bind(function(){this.fire("clonedExampleContent",{silent:!!t.silent})},this));return e},_shouldCloneCollection:function(){return this.get("isDemoCollection")&&this.get("type")===d.COLLECTION_TYPE_PAGE},deleteTrashItems:function(t){c.Data.del({url:"/api/recycle-bin/collection/"+this.get("id")+"/items",success:function(e){t(e,null)},failure:function(e){t(null,e)}})},getId:function(){return this.get("id")},_set:function(e,t,a){return this.constructor.superclass._set.call(this,e,t,a)}},{ATTRS:{dirty:{value:false},body:{value:null},navigationTitle:{validator:c.Lang.isString},description:{value:{html:"",source:""}},websiteId:{},id:{value:null},enabled:{value:true,validator:c.Lang.isBoolean},deleted:{value:false,validator:c.Lang.isBoolean},homepage:{validator:c.Lang.isBoolean},starred:{validator:c.Lang.isBoolean},synchronizing:{validator:c.Lang.isBoolean},updatedOn:{},folder:{value:false},isDemoCollection:{getter:function(){return c.Squarespace.ContentCollectionUtils.isDemoCollectionId(this.get("id"))}},itemCount:{validator:c.Lang.isNumber},isEmpty:{getter:function(){return this.items&&0===this.items.size()}},tags:{value:[],validator:c.Lang.isArray},categories:{value:[],validator:c.Lang.isArray},pageSize:{validator:c.Lang.isNumber,valueFn:function(){if(this.getTemplateConfiguration().get("ordering")===g.CHRONOLOGICAL)return 20}},itemLimit:{value:20,validator:c.Squarespace.AttrValidators.isNumber},ordering:{validator:function(e){return c.Object.values(g).includes(e)}},type:{validator:function(e){return c.Object.values(d).includes(e)}},typeName:{validator:c.Lang.isString},video:{validator:c.Lang.isObject},fullUrl:{validator:c.Lang.isString},nextDisplayIndex:{getter:function(){return this.get("itemCount")}},regionName:{value:"default",validator:function(e){if(!c.Lang.isString(e)||0===e.length)return false;return c.Object.keys(n.getState().layouts).includes(e)}},title:{validator:c.Lang.isString},urlId:{validator:c.Squarespace.AttrValidators.isNullOrString},pagePermissionType:{value:null},memberAreaIds:{value:[]}}});c.Squarespace.Models.ContentCollectionList=c.Base.create("Collections",c.ModelList,[],{model:c.Squarespace.Models.ContentCollection,sync:function(e,t,a){"read"===e&&r.readAll().then(function(e){a(null,e)},function(e){a(e,null)}).catch(this._errorHandler)},getCollectionById:function(e,t,a){var i=this.getById(e);if(i)t.call(a,i);else{i=new c.Squarespace.Models.ContentCollection({id:e});i.load({},function(){this.add(i);t.call(a,i)},this)}},getCollectionFromData:function(e,t){if(!e)return null;if(!e.id)throw new Error("getCollectionFromData needs at least an ID in the data to work.");var a=this.getById(e.id);a?t||a.setAttrs(e):a=this.add(new c.Squarespace.Models.ContentCollection(e));return a}});c.Squarespace.Utils.isInDamaskFrame()?c.Squarespace.ContentCollectionCache=c.config.win.top.Y.Squarespace.ContentCollectionCache:c.Squarespace.ContentCollectionCache=new c.Squarespace.Models.ContentCollectionList},"2.0",{requires:["base","model","model-list","promise","squarespace-content-collection-utils","squarespace-models-collection-configuration","squarespace-models-content-item","squarespace-models-content-item-list","squarespace-util","squarespace-util-authenticated"]})},"./src/main/webapp/universal/scripts-v6/models/content-item-list.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/apps/App/shared/utils/contentItemUrlRouter.js");YUI.add("squarespace-models-content-item-list",function(u){u.namespace("Squarespace.Models");var a=u.Squarespace.Models.ContentItemList=u.Base.create("ContentItemList",u.ModelList,[u.Squarespace.Mixins.EventList],{initializer:function(e){this.model=u.Squarespace.Models.ContentItem;e=e||{};var t=e.items;t&&this.reset(t)},sync:function(e,t,a){switch(e){case"read":this._read(t,a);break;case"create":case"delete":case"update":false;break}},load:function(e,t){if(this.get("isChildItemList"))throw new Error("Squarespace.Models.ContentItemList: Child items are loaded with their parent item. Loading them manually is not supported");a.superclass.load.call(this,e,t)},removeItems:function(t,a,e){this.remove(t,{source:"bulk-remove"});var i=u.Array.map(t,function(e){var t=e.get("id");e.destroy();return t},this);var s=function(e){this.get("parent").load();u.Lang.isFunction(a)&&a(null,e);this.fire("bulk-remove",t)}.bind(this);var n=function(e){u.Lang.isFunction(a)&&a(e,null)};e?e(t).then(function(e){s(e)}).catch(function(e){n(e)}):u.Data.post({url:"/api/commondata/RemoveItems",data:{items:i},success:function(e){s(e)},failure:function(e){n(e)}},this)},moveItems:function(t,a,i){if(this.get("isChildItemList"))throw new Error("Squarespace.Models.ContentItemList: Moving child items is not currently supported.");var e=u.Array.map(t,function(e){var t=this.getById(e.get("id"));if(null!==t)return this.remove(this.getById(e.get("id")));return e},this);var s=a.get("id");var n=a.items;n.load(u.bind(function(){n.add(e)},this));var r=u.Array.map(e,function(e){e.set("collectionId",s);e.get("items").each(function(e){e.set("collectionId",s)});return e.get("id")},this);u.Data.post({url:"/api/commondata/MoveItems",data:{toCollectionId:s,items:r},success:function(e){this.get("parent").load();u.Lang.isFunction(i)&&i(null,e);this.fire("move-items",t,a)},failure:function(e){u.Lang.isFunction(i)&&i(e,null)}},this)},reorderItems:function(e,t,a){var i=this.get("parent");var s={};if(this.get("isChildItemList")){s.collectionId=i.get("collectionId");s.parentId=i.get("id")}else s.collectionId=i.get("id");var n=1===e.length;var r;if(n){var o=e[0];r=this.indexOf(this.getById(o.get("id")));this._reorder([o],t);0!==t&&(s.afterId=this.item(t-1).get("id"));s.itemId=o.get("id")}else{this._reorder(e,t);0!==t&&(s.afterId=this.item(t-1).get("id"));var l=u.Array.map(e,function(e){return e.get("id")},this);s.itemIds=u.JSON.stringify(l)}var c=u.bind(function(e){u.Data.post({url:"/api/commondata/ReorderItems",data:e,success:function(e){!n||0!==r&&0!==t||i.load();u.Lang.isUndefined(e.items)||u.Array.each(e.items,function(e,t){var a=this.getById(e.id);a&&a.set("displayIndex",e.displayIndex)},this);this.fire("reordered");u.Lang.isFunction(a)&&a(null,e);this._reorderQueue.size()>0&&c(this._reorderQueue.next())},failure:function(e){u.Lang.isFunction(a)&&a(e,null)}},this)},this);this._reorderQueue||(this._reorderQueue=new u.Queue);this._reorderQueue.add(s);c(this._reorderQueue.next())},_reorder:function e(t,a){var i=t.map(function e(t){return this.getById(t.get("id"))},this).filter(Boolean);this.remove(i,{onReorder:true,source:"reorder"});this.add(i,{onReorder:true,source:"reorder",index:a})},_read:function(e,a){u.Data.get({url:this._getReadUrl(),data:u.merge({limit:this.get("limit")},e),success:function(e){var t={hasNextPage:e.hasNextPage,hasPreviousPage:e.hasPreviousPage,nextPageStart:e.nextPageStart,previousPageStart:e.previousPageStart};this.set("pagination",t);a(null,e.results)},failure:function(e){a(e,null)}},this)},_getReadUrl:function(){var e=this.get("parent");var t=i.getTemplateForCollectionItems(e.get("ordering"),e.get("type"));return u.Lang.sub(t,{collectionId:e.get("id")})}},{ATTRS:{parent:{value:null,validator:function(e){return e instanceof u.Squarespace.Models.ContentCollection||e instanceof u.Squarespace.Models.ContentItem}},isChildItemList:{getter:function(){var e=this.get("parent");return e instanceof u.Squarespace.Models.ContentItem}},pagination:{value:null},limit:{value:20,validator:u.Squarespace.AttrValidators.isNumber}}})},"1.0",{requires:["base","json","model-list","squarespace-content-collection-utils","squarespace-mixins-event-list","squarespace-models-content-collection","squarespace-models-content-item","squarespace-util"]})},"./src/main/webapp/universal/scripts-v6/models/content-item.js":function(e,t,a){var i=a("./src/main/webapp/frontend/packages/enums/CommentStates.js");var s=a("./src/main/webapp/frontend/packages/enums/MediaProcessingState.js");var r=a("./src/main/webapp/frontend/packages/enums/RecordType.js");var o=a("./src/main/webapp/frontend/packages/enums/WorkflowStates.js");var l=a("./src/main/webapp/universal/src/apps/App/shared/actions/ContentItemActions.js");var c=a("./src/main/webapp/universal/src/apps/App/shared/stores/ContentItemStore.js");var u=a("./src/main/webapp/universal/src/apps/App/shared/stores/WebsiteSettingsStore/index.js");var d=a("./src/main/webapp/universal/src/apps/App/shared/utils/contentItemUrlRouter.js");var p=a("./src/main/webapp/universal/src/shared/utils/UrlUtils.js");YUI.add("squarespace-models-content-item",function(n){n.namespace("Squarespace.Models");var a=n.Squarespace.Models.ContentItem=n.Base.create("Item",n.Model,[],{sync:function(e,t,a){switch(e){case"delete":this.getParentCollection().then(this._getUrlDeterminants.bind(this)).then(this._delete.bind(this,a));break;case"read":this.getParentCollection().then(this._getUrlDeterminants.bind(this)).then(this._read.bind(this,t,a));break;case"update":this.getParentCollection().then(this._getUrlDeterminants.bind(this)).then(this._save.bind(this,a));break;case"create":this.getParentCollection().then(this._getUrlDeterminants.bind(this)).then(this._create.bind(this,t,a));break}},_errorHandler:function(e){console.error(e.stack)},_save:function(t,e){var a=this.serialize();a.id||this._create(t);a.collectionId?l.updateForCollection(a,e).then(function(e){t(null,e)},function(e){t(e,null)}).catch(this._errorHandler):l.update(a).then(function(e){t(null,e)},function(e){t(e,null)}).catch(this._errorHandler)},_create:function(e,t,a){var i=this.serialize();i.collectionId?l.createForCollection(i,e,a).then(function(e){t(null,e)},function(e){t(e,null)}).catch(this._errorHandler):l.create(i,e).then(function(e){t(null,e)},function(e){t(e,null)}).catch(this._errorHandler)},_delete:function(t,e){l.delete(this.get("id"),e).then(function(e){t(null,e)},function(e){t(e,null)}).catch(this._errorHandler)},_read:function(e,a,t){if(this.get("isGlobalFakeContentItem")){this._readGlobalFakeContentItem(this.get("id"),e,a);return}this._readInProgress=true;c.fetchFromServer(this.get("id"),false,t).then(function(e){this._readInProgress=false;var t=e.toJS?e.toJS():e;t&&t.recordType&&this.set("recordType",t.recordType);a(null,t)}.bind(this),function(e){this._readInProgress=false;a(e,null)}.bind(this)).catch(this._errorHandler)},_readGlobalFakeContentItem:function(e,t,a){n.Data.get({url:"/api/rest/global-content-items/"+e,success:function(e){a(null,e)},failure:function(e){a(e,null)}},this)},_getUrlDeterminants:function(e){var t={recordType:this.get("recordType")};if(e){t.collectionOrdering=e.get("ordering");t.collectionType=e.get("type");t.collectionId=e.get("id");t.parentId=this.get("parentId")}return t},resetToLastRead:function(t,a){return c.fetchFromServer(this.get("id")).then(function(e){this.setAttrs(e.toJS());t()}.bind(this)).catch(function(e){a();this._errorHandler(e)}.bind(this))},initializer:function(e){this._needsJobListener()&&this._bindJobListener();this._updateNextDisplayIndex();var t=this.get("items");t.after(["add","remove"],function(){this._updateNextDisplayIndex()},this);this.items=t},destructor:function(){if(this._jobListener){this._jobListener.detach();this._jobListener=null}},getParentCollection:function(){return new n.Promise(function(e,t){var a=this.get("collectionId");a?n.Squarespace.ContentCollectionCache.getCollectionById(a,e):e(null)}.bind(this))},toJSON:function(){var e=a.superclass.toJSON.call(this);var t=e.structuredContent;n.Lang.isValue(t)&&(e.structuredContent=t.toJSON());e.items=e.items.toJSON();n.Lang.isObject(e.pushedServices)&&(e.pushedServices=n.Object.keys(e.pushedServices));n.Lang.isObject(e.pendingPushedServices)&&(e.pendingPushedServices=n.Object.keys(e.pendingPushedServices));return e},serialize:function(){var e=this.toJSON();delete e.items;delete e.author;delete e.fullUrl;delete e.assetUrl;delete e.resolved;delete e.postItemInjectCode;delete e.promotedBlock;delete e.promotedBlockType;delete e.nextDisplayIndex;delete e.mediaIsUploading;delete e.hasFileData;delete e.isGlobalFakeContentItem;delete e.childrenGroups;delete e.colorData;delete e.mainImage;delete e.gallery;this._normalizeDates(e);this._attachCommentingToData(e);this._attachWorkflowToData(e);this._updateStructuredContent(e);return e},_updateStructuredContent:function(e){if(!e.structuredContent)return;e.startDate&&(e.structuredContent=n.merge(e.structuredContent,{startDate:e.startDate,endDate:e.endDate}))},_getWorkflowStateForString:function(e){var t={published:o.PUBLISHED,scheduled:o.SCHEDULED,needsreview:o.NEEDS_REVIEW,draft:o.DRAFT};return n.Object.getValue(t,e)},_attachWorkflowToData:function(e){if(n.Lang.isValue(e.workflow)){e.workflowState=this._getWorkflowStateForString(e.workflow.state);e.publishOn=e.workflow.date;delete e.workflow}},_attachCommentingToData:function(e){if(n.Lang.isValue(e.commenting)){var t="allow"===e.commenting.state?"ENABLED":"DISABLED";e.commentState=n.Squarespace.CommentStates[t];e.commentDisableOn=e.commenting.date;delete e.commenting}},_normalizeDates:function(a){var e=["addedOn","publishOn","updatedOn","commentDisableOn","startDate","endDate"];n.Array.each(e,function(e,t){n.Lang.isDate(a[e])&&(a[e]=a[e].getTime())},this)},save:function(e,t){this.isNew()||!(n.Lang.isObject(e)&&e.fields)?a.superclass.save.call(this,e,t):this._saveFields(e.fields,t)},autoSave:function(e,t){if(n.Lang.isFunction(e)){t=e;e={}}else n.Lang.isValue(e)||(e={});e.headers=n.merge(e.headers,{"X-AutoSave":true});this.save(e,t)},clearFileData:function(e){this.setAttrs({systemDataId:null,systemDataOrigin:null,mediaProcessingState:null,systemDataSourceType:null,systemDataVariants:null,filename:null});this.getParentCollection().then(this._getUrlDeterminants.bind(this)).then(function(e){var t=this.get("id");var a=d.getMainImageDeletionUrl(e).replace("{id}",t);n.Data.del({url:a,data:{itemId:t}})}.bind(this))},clearChildGroup:function(e,t){n.Data.post({url:"/api/commondata/ClearChildGroup",data:{childType:e,itemId:this.get("id")},success:function(e){n.Lang.isFunction(t)&&t(null,e)},failure:function(e){n.Lang.isFunction(t)&&t(e,null)}})},getAssetUrlForFormat:function(e){return n.Lang.sub("{assetUrl}?format={format}",{assetUrl:this.get("assetUrl"),format:e})},getId:function(){return this.get("id")},isLicensedAssetPreview:function(){return n.Lang.isValue(this.get("licensedAssetPreview"))},isLicensedAsset:function(){return n.Lang.isValue(this.get("licensedAssetId"))},getMainImageUploadUrl:function(t){this.getParentCollection().then(this._getUrlDeterminants.bind(this)).then(function(e){t(d.getMainImageUploadUrl(e).replace("{id}",this.get("id")))}.bind(this))},_needsJobListener:function(){var e=this.get("mediaProcessingState");return e===s.QUEUED||e===s.PROCESSING},_bindJobListener:function(){if(!Static||!Static.JOB_MANAGER)return;this._jobListener=n.config.win.Static.JOB_MANAGER.on("completed",function(e){var t=e.job;var a=this.get("id");var i=t.get("data.contentItemId");var s=t.get("data.globalContentItemId");if(i===a){this.load({forceReload:true});this._jobListener.detach()}else if(n.Lang.isValue(s)&&s===a){this._readGlobalFakeContentItem(s,{},function(e,t){if(e){false;return}this.set("assetUrl",t.assetUrl);this.setAttrs(t)}.bind(this));this._jobListener.detach()}},this)},_updateNextDisplayIndex:function(){var a=0;this.get("items").each(function(e){var t=e.get("displayIndex");t>=a&&(a=t+1)},this);this._set("nextDisplayIndex",a)},_saveFields:function(e,a){window.Promise.all(e.map(function(e){return l.updateField(this.get("id"),e,this.get(e))}.bind(this))).then(function(e){var t=e[0];n.Lang.isFunction(a)&&a(null,t.item)},function(e){n.Lang.isFunction(a)&&a.call(e,null)}).catch(this._errorHandler)},_getStructuredContentCtor:function(){switch(this.get("recordType")){case r.AUDIO:return n.Squarespace.Models.Audio;case r.EVENT:return n.Squarespace.Models.CalendarEvent;case r.CHECKIN:return n.Squarespace.Models.CheckIn;case r.VIDEO:return n.Squarespace.Models.Embed;case r.KBARTICLE:return n.Squarespace.Models.KBArticle;case r.LINK:return n.Squarespace.Models.Link;case r.QUOTE:return n.Squarespace.Models.Quote;case r.STORE_ITEM:return n.Squarespace.Models.StoreItem;case r.TWEET:return n.Squarespace.Models.Tweet;default:return null}}},{ATTRS:{altText:{value:null,validator:n.Squarespace.AttrValidators.isNullOrString},id:{value:null},collectionId:{value:null},parentId:{value:null},authorId:{valueFn:function(){var e=n.Object.getValue(Static,["SQUARESPACE_CONTEXT","authenticatedAccount"]);if(e)return e.id;return null}},proxyForId:{value:null},recordType:{validator:n.Squarespace.AttrValidators.isValueIn(r),writeOnce:true},childType:{value:null,validator:n.Squarespace.AttrValidators.isNullOrString},addedOn:{valueFn:function(){return(new Date).getTime()},validator:n.Squarespace.AttrValidators.isNumber,writeOnce:"initOnly"},updatedOn:{value:null,validator:n.Squarespace.AttrValidators.isNullOrNumber},publishOn:{valueFn:function(){return(new Date).getTime()},validator:n.Squarespace.AttrValidators.isNumber},unsaved:{value:null,validator:n.Squarespace.AttrValidators.isNullOrBoolean},urlId:{value:null,validator:n.Squarespace.AttrValidators.isNullOrString},title:{value:null,validator:n.Squarespace.AttrValidators.isNullOrString},body:{value:null,setter:function(e){return n.merge(this.get("body"),e)},validator:n.Squarespace.AttrValidators.isNullOrObject},excerpt:{value:{html:"",raw:false},validator:n.Squarespace.AttrValidators.isNullOrObject},displayIndex:{value:0,validator:n.Squarespace.AttrValidators.isNumber},starred:{value:false,validator:n.Squarespace.AttrValidators.isBoolean},passthrough:{value:false,validator:n.Squarespace.AttrValidators.isBoolean},tags:{value:[],validator:n.Squarespace.AttrValidators.isArray},categories:{value:[],validator:n.Squarespace.AttrValidators.isArray},workflowState:{value:o.DRAFT,validator:n.Squarespace.AttrValidators.isValueIn(o)},systemDataId:{value:null,validator:n.Squarespace.AttrValidators.isNullOrString},systemDataVariants:{value:null,validator:n.Squarespace.AttrValidators.isNullOrString},systemDataOrigin:{value:null,validator:n.Squarespace.AttrValidators.isNullOrString},contentType:{value:null,validator:n.Squarespace.AttrValidators.isNullOrString},filename:{value:null,validator:n.Squarespace.AttrValidators.isNullOrString},dataSize:{value:null,validator:n.Squarespace.AttrValidators.isNullOrNumber},sourceUrl:{value:null,validator:n.Squarespace.AttrValidators.isNullOrString},mediaProcessingState:{value:null,validator:n.Squarespace.AttrValidators.isNullOr(n.Squarespace.AttrValidators.isValueIn(s))},mediaFocalPoint:{value:{x:.5,y:.5},setter:function(e){if(n.Lang.isString(e)){e=e.split(",");var t=parseFloat(e[0]);var a=parseFloat(e[1]);return{x:!isNaN(t)&&t<=1?t:.5,y:!isNaN(a)&&a<=1?a:.5}}return e}},colorData:{value:null,validator:n.Squarespace.AttrValidators.isNullOrObject},clickthroughUrl:{value:null,validator:n.Squarespace.AttrValidators.isNullOrString},location:{value:null,validator:n.Squarespace.AttrValidators.isNullOrObject},customContent:{value:null},likeCount:{value:0,validator:n.Squarespace.AttrValidators.isNumber},dislikeCount:{value:0,validator:n.Squarespace.AttrValidators.isNumber},commentCount:{value:0,validator:n.Squarespace.AttrValidators.isNumber},publicCommentCount:{value:0,validator:n.Squarespace.AttrValidators.isNumber},commentState:{valueFn:function(){var e=u.getState();var t=e.commentEnableByDefault;var a=e.commentsEnabled;if(t&&a)return i.ENABLED;return i.DISABLED},validator:n.Squarespace.AttrValidators.isValueIn(i)},commentDisableOn:{valueFn:function(){var e=n.Object.getValue(Static,["SQUARESPACE_CONTEXT","websiteSettings","commentDisableAfterDaysDefault"]);if(e)return n.Date.addDays(new Date,e).getTime();return null},validator:n.Squarespace.AttrValidators.isNullOrNumber},pushedServices:{value:{},validator:n.Squarespace.AttrValidators.isObject},shareStates:{value:[]},structuredContent:{valueFn:function(){var e=this._getStructuredContentCtor();if(n.Lang.isNull(e))return null;return new e},setter:function(e){if(e instanceof n.Squarespace.Models.StructuredContent)return e;var t=this._getStructuredContentCtor();if(n.Lang.isNull(t))return null;return new t(e)}},items:{valueFn:function(){return new n.Squarespace.Models.ContentItemList({parent:this})},setter:function(e){var t=this.get("items");if(n.Lang.isValue(t)){t.reset(e);return t}if(e instanceof n.Squarespace.Models.ContentItemList)return e;return new n.Squarespace.Models.ContentItemList({items:e,parent:this})}},childrenGroups:{value:{},validator:n.Squarespace.AttrValidators.isObject},author:{value:null,validator:n.Squarespace.AttrValidators.isNullOrObject},fullUrl:{value:null,validator:n.Squarespace.AttrValidators.isNullOrString},assetUrl:{value:null,getter:function(e){if(p.isSecure())return p.securifyURL(e);return e},validator:n.Squarespace.AttrValidators.isNulLOrString},resolved:{value:false,validator:n.Squarespace.AttrValidators.isBoolean},postItemInjectCode:{value:null,validator:n.Squarespace.AttrValidators.isNullOrString},promotedBlock:{value:null,validator:n.Squarespace.AttrValidators.isNullOrString},promotedBlockType:{value:null,validator:n.Squarespace.AttrValidators.isNullOrString},nextDisplayIndex:{value:0,validator:n.Squarespace.AttrValidators.isNumber,readOnly:true},mediaIsUploading:{value:false,validator:n.Squarespace.AttrValidators.isBoolean},hasFileData:{value:false,validator:n.Squarespace.AttrValidators.isBoolean},isGlobalFakeContentItem:{value:false,validator:n.Squarespace.AttrValidators.isBoolean},licensedAssetPreview:{value:null,validator:n.Squarespace.AttrValidators.isNullOrObject},licensedAssetId:{value:null,validator:n.Lang.isString},isPusher:{value:true,readOnly:true,validator:n.Squarespace.AttrValidators.isBoolean}}})},"1.0",{requires:["base","json","model","squarespace-attr-validators","squarespace-model-sync-rest","squarespace-models-audio","squarespace-models-calendar-event","squarespace-models-check-in","squarespace-models-content-collection","squarespace-models-content-item-list","squarespace-models-embed","squarespace-models-kb-article","squarespace-models-link","squarespace-models-quote","squarespace-models-store-item","squarespace-models-tweet","squarespace-util"]})},"./src/main/webapp/universal/scripts-v6/models/content-stats.js":function(e,t){YUI.add("squarespace-models-content-stats",function(a){a.namespace("Squarespace.Models");a.Squarespace.Models.ContentStats=a.Base.create("contentStats",a.Model,[a.Squarespace.ModelSync.REST],{root:a.Squarespace.REST_API_ROOT+"content-stats",getTagsAsStringArray:function(){return this._toNameArray(this.get("tagList"))},getCategoriesAsStringArray:function(){return this._toNameArray(this.get("categoryList"))},_toNameArray:function(e){var t=[];a.Lang.isArray(e)&&a.Array.each(e,function(e){a.Lang.isString(e.name)&&t.push(e.name)});return t}},{ATTRS:{id:{value:null,validator:a.Lang.isString},websiteId:{value:null,validator:a.Lang.isString},collectionId:{value:null,validator:a.Lang.isString},tagList:{value:[],validator:a.Lang.isArray},categoryList:{value:[],validator:a.Lang.isArray}}});a.Squarespace.Models.ContentStatsList=a.Base.create("contentStatsList",a.ModelList,[a.Squarespace.ModelSync.REST],{model:a.Squarespace.Models.ContentStats,getByCollectionId:function(t){var a;this.each(function(e){e.get("collectionId")===t&&(a=e)});return a}});a.Squarespace.ContentStatsCache=new a.Squarespace.Models.ContentStatsList},"1.0",{requires:["base","model","model-list","squarespace-util","squarespace-model-sync-rest"]})},"./src/main/webapp/universal/scripts-v6/models/data-table.js":function(e,t){YUI.add("squarespace-models-data-table",function(t){t.namespace("Squarespace.Models");t.Squarespace.Models.DataTable=t.Base.create("data-table",t.Model,[t.Squarespace.ModelSync.REST],{root:t.Squarespace.API_ROOT+"datatable",url:t.Squarespace.API_ROOT+"datatable/{id}",serialize:function(){var e=this.toJSON();return t.JSON.stringify(e)}},{ATTRS:{id:{value:null},data:{value:[],validator:t.Squarespace.AttrValidators.isArray},sampleLabels:{value:[],validator:t.Squarespace.AttrValidators.isArray},seriesLabels:{value:[],validator:t.Squarespace.AttrValidators.isArray}}});t.Squarespace.Models.DataTableList=t.Base.create("dataTableList",t.ModelList,[t.Squarespace.ModelSync.REST],{model:t.Squarespace.Models.DataTable,filterByType:function(t){return this.filter(function(e){return e.get("type")===t})}});t.Squarespace.DataTableCache=new t.Squarespace.Models.DataTableList},"1.0",{requires:["base","json","model","squarespace-attr-validators","squarespace-enum","squarespace-model-sync-rest","squarespace-util"]})},"./src/main/webapp/universal/scripts-v6/models/donate-page.js":function(e,t){YUI.add("squarespace-models-donate-page",function(t){t.namespace("Squarespace.Models");var a=t.Squarespace.Models.DonatePage=t.Base.create("DonatePage",t.Model,[t.Squarespace.ModelSync.REST],{root:"/api/rest/commerce/donate-pages",url:"/api/rest/commerce/donate-pages/{id}",toJSON:function(){var e=a.superclass.toJSON.call(this);t.Lang.isObject(e.customForm)&&(e.customForm={fields:t.Array.map(e.customForm,JSON.stringify)});return e}},{ATTRS:{title:{validator:t.Squarespace.AttrValidators.isString},suggestedContributions:{validator:t.Squarespace.AttrValidators.isArray},customForm:{validator:t.Squarespace.AttrValidators.isObject},buttonLabel:{validator:t.Squarespace.AttrValidators.isString},queuedSubmitEnabled:{validator:t.Squarespace.AttrValidators.isNullOrBoolean},customConfirmationPageUrl:{validator:t.Squarespace.AttrValidators.isString}}})},"1.0",{requires:["base","model","squarespace-attr-validators","squarespace-model-sync-rest"]})},"./src/main/webapp/universal/scripts-v6/models/embed.js":function(e,t){YUI.add("squarespace-models-embed",function(e){e.namespace("Squarespace.Models");e.Squarespace.Models.Embed=e.Base.create("Embed",e.Squarespace.Models.StructuredContent,[],{},{ATTRS:{_type:{value:"Embed",validator:function(e){return"Embed"===e},readOnly:true},embed:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},oembed:{value:null,validator:e.Squarespace.AttrValidators.isNullOrObject},overlay:{value:true,validator:e.Squarespace.AttrValidators.isBoolean}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},"./src/main/webapp/universal/scripts-v6/models/form-base.js":function(e,t,a){var s=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var n=a("./src/main/webapp/frontend/packages/enums/GoogleReCaptchaAlignmentType.js");var r=a("./src/main/webapp/frontend/packages/enums/GoogleReCaptchaThemeType.js");var o=a("./src/main/webapp/universal/src/shared/utils/FormConnections.js");var l=a("./src/main/webapp/frontend/packages/enums/FormBackendConnectionState.js");YUI.add("squarespace-models-form-base",function(i){var a=function(e){if(i.Lang.isArray(e))return e;var a=[];i.Object.each(e,function(e,t){!e||e.connectionState!==l.CONNECTED&&e.connectionState!==l.PENDING||a.push(i.merge({_type:t},e))});return a};i.namespace("Squarespace.Models");i.Squarespace.Models.FormBase=i.Base.create("formBase",i.Model,[i.Squarespace.ModelSync.REST],{root:i.Squarespace.REST_API_ROOT+"forms",url:i.Squarespace.REST_API_ROOT+"forms/{id}",serialize:function(){var e=this.toJSON();e.fields=i.Array.map(e.fields,function(e){return i.JSON.stringify(e)});e.submissionMessage=i.JSON.stringify(e.submissionMessage);e.disclaimerMessage=i.JSON.stringify(e.disclaimerMessage);var t=e.backendConnectionConfigs;delete e.backendConnectionConfigs;delete e.connectedBackends;return{form:e,backendConnectionConfigs:t||[],removedBackends:this.get("removedConnectedBackends")}},getConnBackend:function(t){var e=this.get("connectedBackends");if(!i.Lang.isValue(e))return[];return i.Array.filter(e,function(e){return e.backendType===t})}},{ATTRS:{id:{value:null},type:{value:i.Squarespace.FormType.FORM_BLOCK,validator:i.Squarespace.AttrValidators.isValueIn(i.Squarespace.FormType)},name:{value:s("New Form"),validator:i.Squarespace.AttrValidators.isString},fields:{value:[],setter:function(e){return i.Array.map(e,function(e){if(i.Lang.isString(e))return i.JSON.parse(e);return e},this)},validator:i.Squarespace.AttrValidators.isArray},connectedBackends:{value:null,validator:i.Squarespace.AttrValidators.isNullOrArray},submitButtonText:{value:s("Submit"),validator:i.Squarespace.AttrValidators.isString},submissionMessage:{value:{html:s("Thank you!")},setter:function(e){return i.Lang.isString(e)?i.JSON.parse(e):e}},disclaimerMessage:{valueFn:function(){return this.get("type")===i.Squarespace.FormType.NEWSLETTER_BLOCK||this.get("type")===i.Squarespace.FormType.SLIDE?{html:s("We respect your privacy.")}:{html:""}},setter:function(e){return i.Lang.isString(e)?i.JSON.parse(e):e}},submissionHTML:{value:null,validator:i.Squarespace.AttrValidators.isNullOrString},successRedirect:{value:"",setter:function(e){if(e){if("string"===typeof e)return e;if("object"===typeof e)return e.url}return""},validator:i.Squarespace.AttrValidators.isNullOrString},backendConnectionConfigs:{value:[],setter:function(e){var t=a(e);this.set("removedConnectedBackends",o.calculateRemoved(this.get("connectedBackends"),t));return i.Array.filter(t,function(e){return e.connectionState===l.CONNECTED})}},removedConnectedBackends:{value:[],validator:i.Squarespace.AttrValidators.isArray},captchaEnabled:{value:false,validator:i.Squarespace.AttrValidators.isBoolean},captchaTheme:{value:r.LIGHT,validator:i.Squarespace.AttrValidators.isValueIn(r)},captchaAlignment:{value:n.LEFT,validator:i.Squarespace.AttrValidators.isValueIn(n)}}})},"1.0",{requires:["base","json","model","model-list","squarespace-attr-validators","squarespace-enum","squarespace-model-sync-rest","squarespace-util"]})},"./src/main/webapp/universal/scripts-v6/models/form.js":function(e,t){YUI.add("squarespace-models-form",function(t){t.namespace("Squarespace.Models");var a=t.Squarespace.Models.Form=t.Base.create("form",t.Squarespace.Models.FormBase,[],{serialize:function(){var e=a.superclass.serialize.call(this);return t.JSON.stringify(e)}});t.Squarespace.Models.FormList=t.Base.create("formList",t.ModelList,[t.Squarespace.ModelSync.REST],{model:t.Squarespace.Models.Form,filterByType:function(t){return this.filter(function(e){return e.get("type")===t})}});t.Squarespace.FormCache=new t.Squarespace.Models.FormList},"1.0",{requires:["base","json","model","model-list","squarespace-model-sync-rest","squarespace-models-form-base"]})},"./src/main/webapp/universal/scripts-v6/models/geo-location.js":function(e,t){YUI.add("squarespace-models-geo-location",function(e){var t=40.72;var a=-74;e.namespace("Squarespace.Models");e.Squarespace.Models.GeoLocation=e.Base.create("GeoLocation",e.Model,[],{},{ATTRS:{mapZoom:{value:10,validator:e.Squarespace.AttrValidators.isNumber},mapLat:{value:t,validator:e.Squarespace.AttrValidators.isNumber},mapLng:{value:a,validator:e.Squarespace.AttrValidators.isNumber},markerLat:{value:t,validator:e.Squarespace.AttrValidators.isNumber},markerLng:{value:a,validator:e.Squarespace.AttrValidators.isNumber},addressTitle:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},addressLine1:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},addressLine2:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},addressCountry:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString}}})},"1.0",{requires:["base","model","squarespace-attr-validators"]})},"./src/main/webapp/universal/scripts-v6/models/growable-model-list/growable-model-list.js":function(e,t){YUI.add("squarespace-models-growable-model-list",function(t){t.namespace("Squarespace.Models");var i=t.Squarespace.Models.GrowableModelList=t.Base.create("GrowableModelList",t.Squarespace.Models.ModelList,[],{initializer:function(){t.Do.after(function(){this._ioRequest=t.Do.originalRetVal},this,"_sendSyncIORequest",this)},reset:function(){this._ioRequestInProgress()&&this._ioRequest.abort();this._set("hasNextPage",false);this.get("paginator").firstPage();i.superclass.reset.apply(this,arguments)},_getResponseAttrs:function(e){return t.merge(i.superclass._getResponseAttrs.call(this,e),{hasNextPage:e.hasNextPage})},getURL:function(e,t){var a=i.superclass.getURL.call(this,e,t);return this.get("paginator").paginateURL(a)},refresh:function(e,t){this.reset();this.load(e,t)},loadMore:function(e,t){if(this._ioRequestInProgress())return;this.get("paginator").nextPage();this.load(e,t)},load:function(s,n){if(t.Lang.isFunction(s)){n=s;s={}}s=s||{};this.sync("read",s,t.bind(function(e,t){var a={options:s,response:t};var i;if(e){a.error=e;a.src="load";this.set("lastError",{message:e,timestamp:Date.now(),attempts:this.get("error")?this.get("error").attempts+1:1});this.fire("error",a)}else{this.set("lastError",null);this._loadEvent||(this._loadEvent=this.publish("load",{preventable:false}));i=a.parsed=this._parse(t);this.add(i,s);this.fire("load",a)}n&&n.apply(null,arguments)},this));return this},_ioRequestInProgress:function(){return this._ioRequest&&this._ioRequest.isInProgress()}},{ATTRS:{paginator:{valueFn:function(){return new t.Squarespace.Models.Paginator},validator:t.Squarespace.AttrValidators.isInstanceOf(t.Squarespace.Models.Paginator)},hasNextPage:{value:false,validator:t.Squarespace.AttrValidators.isBoolean,readOnly:true},lastError:{value:null}}})},"1.0",{requires:["squarespace-attr-validators","squarespace-models-model-list","squarespace-models-paginator"]})},"./src/main/webapp/universal/scripts-v6/models/kb-article.js":function(e,t){YUI.add("squarespace-models-kb-article",function(e){e.namespace("Squarespace.Models");e.Squarespace.Models.KBArticle=e.Base.create("KBArticle",e.Squarespace.Models.StructuredContent,[],{},{ATTRS:{_type:{value:"KBArticle",validator:function(e){return"KBArticle"===e},readOnly:true},upVotes:{value:0,validator:e.Squarespace.AttrValidators.isNumber},downVotes:{value:0,validator:e.Squarespace.AttrValidators.isNumber}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},"./src/main/webapp/universal/scripts-v6/models/layout/block-field.js":function(e,t){YUI.add("squarespace-models-layout-block-field",function(e){e.namespace("Squarespace.Models").BlockField=e.Base.create("BlockField",e.Model,[e.Squarespace.ModelSync.REST,e.Squarespace.Models.Layout.ECBBackedModelSanitizerMixin],{url:e.Squarespace.API_ROOT+"block-fields/{widgetName}",root:e.Squarespace.API_ROOT+"block-fields",idAttribute:"widgetName"},{ATTRS:{widgetName:{validator:e.Lang.isString}}})},"1.0",{requires:["base","model","squarespace-model-sync-rest","squarespace-models-layout-ec-backed-model-sanitizer-mixin"]})},"./src/main/webapp/universal/scripts-v6/models/layout/ec-backed-model-sanitizer-mixin.js":function(e,t){YUI.add("squarespace-models-layout-ec-backed-model-sanitizer-mixin",function(a){a.namespace("Squarespace.Models.Layout");a.Squarespace.Models.Layout.ECBBackedModelSanitizerMixin=a.Base.create("ECBBackedModelSanitizerMixin",a.Base,[],{parse:function(e){e=a.Model.prototype.parse.call(this,e);if(!a.Lang.isObject(e))return{};a.Lang.isObject(e.data)||(e.data={layout:{columns:12,rows:[]}});return e},isLayoutEmpty:function(){return this.get("data").get("layout").isEmpty()},isLayoutBlank:function(){return this.get("data").get("layout").isBlank()},_setData:function(e){var t=this.get("data");if(a.instanceOf(t,a.SQS.LayoutEngine.Models.EditableContentBlock)){t.setAttrs(e);return t}if(a.instanceOf(e,a.SQS.LayoutEngine.Models.EditableContentBlock))return e;return new a.SQS.LayoutEngine.Models.EditableContentBlock(e)}},{ATTRS:{data:{value:{},setter:"_setData"}}})},"1.0",{requires:["base","model","@sqs/layout-engine/models-layout"]})},"./src/main/webapp/universal/scripts-v6/models/layout/page-collection-data.js":function(e,t,a){var n=a("./src/main/webapp/universal/src/apps/App/shared/stores/PageCollectionDataStore.js");YUI.add("squarespace-models-layout-page-collection-data",function(e){e.namespace("Squarespace.Models");var t=e.Squarespace.Models.PageCollectionData=e.Base.create("Layout",e.Model,[e.Squarespace.Models.Layout.ECBBackedModelSanitizerMixin],{toJSON:function(){var e=t.superclass.toJSON.call(this);delete e.collection;e.data=this.getDataInJSON();return e},getDataInJSON:function(){return this.get("data").toJSON()},sync:function(e,t,a){var i=this.get("collectionId");var s;switch(e){case"read":s=n.getPageCollectionData(i);break;case"update":s=n.savePageCollectionData(i,this.toJSON());break;case"create":s=n.createPageCollectionData(i,this.toJSON())}s&&"function"===typeof a&&s.then(a.bind(this,null)).catch(a.bind(this))}},{ATTRS:{collectionId:{getter:function(){return this.get("collection").get("id")}},collection:{},websiteId:{getter:function(){return this.get("collection").get("websiteId")}}}})},"1.0",{requires:["base","model","squarespace-models-layout-ec-backed-model-sanitizer-mixin"]})},"./src/main/webapp/universal/scripts-v6/models/link.js":function(e,t){YUI.add("squarespace-models-link",function(e){e.namespace("Squarespace.Models");e.Squarespace.Models.Link=e.Base.create("Link",e.Squarespace.Models.StructuredContent,[],{},{ATTRS:{_type:{value:"Link",validator:function(e){return"Link"===e},readOnly:true},url:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},"./src/main/webapp/universal/scripts-v6/models/member-account.js":function(e,t,a){var o=a("./common/temp/node_modules/lodash/mapValues.js");var l=a("./src/main/webapp/universal/src/apps/App/shared/actions/AuthenticatedAccountActions.js");var c=a("./src/main/webapp/universal/src/apps/App/shared/stores/AuthenticatedAccountStore.js");YUI.add("squarespace-models-member-account",function(i){var e=i.namespace("Squarespace.Models").MemberAccount=i.Base.create("MemberAccount",i.Model,[i.Squarespace.ModelSync.REST],{root:"/api/member-accounts",serialize:function(){return i.JSON.stringify(this._getServerRelevantFields())},_getServerRelevantFields:function(){var e=i.Array.reduce(["id","firstName","lastName","displayName","websiteUrl","bio","email","avatarId","siteTemplateInstallationPreviews","pseudonymAccount","notificationsRead","tutorialsCompleted","guilds","flags"],{},function(e,t){e[t]=this.get(t);return e},this);i.Lang.isObject(e.notificationsRead)&&(e.notificationsRead=i.Object.keys(e.notificationsRead));i.Lang.isObject(e.tutorialsCompleted)&&(e.tutorialsCompleted=i.Object.keys(e.tutorialsCompleted));return e},isMe:function(){return this.get("id")===Static.SQUARESPACE_CONTEXT.authenticatedAccount.id},setPreviewInstallationId:function(e){var t=i.Object.getValue(Static,["SQUARESPACE_CONTEXT","website","id"]);if(i.Lang.isValue(e))this.set("siteTemplateInstallationPreviews."+t,e);else{var a=this.get("siteTemplateInstallationPreviews");delete a[t];this.set("siteTemplateInstallationPreviews",a)}},getPreviewInstallationId:function(){return this.get("siteTemplateInstallationPreviews."+i.Object.getValue(Static,["SQUARESPACE_CONTEXT","website","id"]))}},{ATTRS:{notificationsRead:{value:{}}}});i.namespace("Squarespace.Singletons");if(Static&&Static.SQUARESPACE_CONTEXT&&Static.SQUARESPACE_CONTEXT.authenticatedAccount){var t=i.Squarespace.Singletons.AuthenticatedMemberAccount=new e(Static.SQUARESPACE_CONTEXT.authenticatedAccount);var a=true;var s=true;var n=c.listen(function(e){if(a){s=false;t.setAttrs(e.toJSON())}a=true});var r=t.after("change",function(e){if(s){var t=o(e.changed,function(e){return e.newVal});a=false;l.update(t)}s=true});i.on("beforeunload",function(){r.detach();n()},this)}else i.Squarespace.Singletons.AuthenticatedMemberAccount=new e({})},"1.0",{requires:["base","model","promise","squarespace-attr-validators","squarespace-model-sync-rest","squarespace-promises"]})},"./src/main/webapp/universal/scripts-v6/models/model-list.js":function(e,t){YUI.add("squarespace-models-model-list",function(i){i.namespace("Squarespace.Models");var s=i.Squarespace.Models.ModelList=i.Base.create("ModelList",i.ModelList,[i.Squarespace.ModelSync.REST],{parse:function(e){var t=s.superclass.parse.call(this,e);var a=this._getResponseAttrs(t);i.Object.each(a,function(e,t){this._set(t,e)},this);return t.results},_getResponseAttrs:function(e){return{}}})},"1.0",{requires:["base","model-list","squarespace-model-sync-rest"]})},"./src/main/webapp/universal/scripts-v6/models/navigation.js":function(e,t,a){var o=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var l=a("./src/main/webapp/universal/src/apps/App/shared/stores/TemplateStore.js");var c=a("./src/main/webapp/frontend/packages/enums/CollectionTypes.js");var u=a("./src/main/webapp/universal/src/apps/App/shared/actions/SiteNavigationActions.js");var i=a("./src/main/webapp/universal/src/shared/constants/ConnectedAccountLinkConfigurations.js");var d=a("./common/temp/node_modules/lodash/isString.js");YUI.add("squarespace-models-navigation",function(n){var r=false;var e=n.Base.create("NavigationItem",n.Model,[],{initializer:function(){this._events=[];this.get("collection")&&this._events.push(this.get("collection").after("navigationTitleChange",function(e){this.set("title",e.newVal)},this))},destructor:function(){n.Array.invoke(this._events,"detach")},sync:function(e,t,a){if("delete"===e)this.get("collection")?this.get("collection").destroy(n.merge(t,{remove:true}),a):this.getNavigationItemList().save(t,a);else if("create"===e||"save"===e){this._updateChildren();this.getNavigationItemList().save(t,a)}},destroy:function(t,e){if("function"===typeof t){e=t;t=null}this.onceAfter("destroy",function(){n.Array.each(this.lists.concat(),function(e){e.remove(this,t)},this);t&&(t.remove||t.delete)?this.sync("delete",t,n.bind(function(){this.save();e&&e.apply(null,arguments)},this)):e&&e.apply(null,arguments)},this);return this.constructor.superclass.destroy.call(this)},toJSON:function(e){var t=this.constructor.superclass.toJSON.call(this);e?delete t.collection:t.collection&&(t.collection=t.collection.toJSON());if(t.children){t.items=t.children.toJSON(e);delete t.children}delete t.duplicated;return t},isFolder:function(){if(this.get("collectionId")&&!this.get("children").isEmpty())return true;if(this.get("collection")){var e=this.get("collection").getTemplateConfiguration();if(e&&e.get("folder"))return true;return false}if(this.get("memberAreaId"))return true;return false},isLink:function(){return n.Lang.isValue(this.get("externalLink"))&&!n.Lang.isValue(this.get("collection"))},isMemberArea:function(){var e=this.get("memberAreaId");return d(e)&&e.length>0},_setChildren:function(e){if(!e)return;var t=this.get("collection");this.get("collectionId")&&t&&t.get("type")===c.TEMPLATE_PAGE&&(e=[]);var a;n.Lang.isValue(t)&&(a=t.getTemplateConfiguration().get("acceptTypes"));var i;if(n.Lang.isArray(e))i=new s({acceptTypes:a});else if(n.instanceOf(e,s)){i=e;i.setTemplateNavigation(this.getNavigationItemList().getTemplateNavigation())}i.setNavigationItem(this);if(i&&this._navigationItemList){i.setTemplateNavigation(this._navigationItemList.getTemplateNavigation());i.setNavigationItemList(this._navigationItemList)}if(!i)throw new Error("Can't set navigation that isn't an instanceOf FolderItemList.");if(n.Lang.isArray(e)&&0!==e.length){i.setTemplateNavigation(this.getNavigationItemList().getTemplateNavigation());n.Array.each(e,function(e){var t=e.children;t&&delete e.children;var a=i.add(e);t&&a.set("children",t)})}return i},setNavigationItemList:function(e){if("NavigationItemList"!==e.name)throw new Error("Cant set a navigationitemlist that isnt actually a navigationitemlist");var t=this.get("children");t&&t.setNavigationItemList(e);this._navigationItemList=e},getNavigationItemList:function(){var e=this._navigationItemList;if(!e)throw new Error("No NavigationItemList found. Possible errors with wrapping data.");return e},setFolderItemList:function(e){if(!n.instanceOf(e,s)&&!n.Lang.isNull(e))throw new Error("Cant set a folder ItemList that isn't a folder.");this._folderItemList=e},getFolderItemList:function(){return this._folderItemList},_updateChildren:function(){if(!this.isFolder())return;var e=this.get("children");var t=this.getNavigationItemList();var a=t.getTemplateNavigation();e.setTemplateNavigation(a);e.setNavigationItemList(t)},setIsDisplaced:function(e){this.set("isDisplaced",e)}},{ATTRS:{title:{value:""},collection:{valueFn:function(e){if(this._getAttr("collectionId")){var t={id:this._getAttr("collectionId"),urlId:this._getAttr("urlId"),typeName:this._getAttr("typeName"),enabled:this._getAttr("enabled"),type:this._getAttr("collectionType"),passwordProtected:this._getAttr("passwordProtected"),pagePermissionType:this._getAttr("pagePermissionType")};n.config.win.Static.IN_BACKEND&&(t.navigationTitle=this._getAttr("title"));return n.Squarespace.ContentCollectionCache.getCollectionFromData(t)}}},icon:{valueFn:function(){if(this.get("collectionId"))return n.Squarespace.ContentCollectionUtils.getIconClassNames(this.get("collection"));var e=this.get("externalLink");if(e&&e.externalServiceProviderType)return"external-link-"+i[e.externalServiceProviderType].slug;if(e)return"external-link";if(this.get("memberAreaId"))return"member-area";return""}},children:{value:[],lazyAdd:false,setter:"_setChildren"},supported:{valueFn:function(){if(this.isLink())return true;if(this.isMemberArea())return true;if(!this.get("collection"))return false;var e=this.get("collection").getTemplateConfiguration();return n.Lang.isValue(e)&&e.get("supported")}},duplicated:{value:false},isUnsupportedIndexMaybe:{getter:function(){return!this.get("supported")&&!!this.get("children")&&this.get("children").size()>0}},memberAreaId:{value:null},memberAreaDefaultLandingPageId:{value:null},isDisplaced:{value:false}}});var a=n.Base.create("NavigationItemList",n.ModelList,[],{model:e,initializer:function(){this.each(function(e){this._bootstrapReference(e)},this);this.on(["create","add"],function(e){this._bootstrapReference(e.model)},this)},destructor:function(){this._navigationItem=null},setNavigationItem:function(e){this._navigationItem=e},getNavigationItem:function(){return this._navigationItem},add:function(e,t){return a.superclass.add.apply(this,arguments)},sync:function(e,t,a){console.log(this.name+" | sync called with action "+e+" and options ",t);if("update"===e||"create"===e){if(r){var i=function(e){return n.Array.map(e,function(e){if(e.items&&e.items.length)return i(e.items);return e.title})};console.trace(JSON.stringify(i(this.toJSON(true)),null,2))}var s={fieldName:this.getTemplateNavigation().get("name"),navigation:{items:this.toJSON(true)},templateId:l.getState().id};n.Data.post({json:true,url:"/api/widget/UpdateNavigation",data:s,success:function(e){u.refreshNavData(e);a&&a()},failure:function(e){new n.Squarespace.SystemError(o("Something Went Wrong"),e,"json").show()}})}else"function"===typeof a&&a()},save:function(e,t){this.sync("update",e,n.bind(function(){this.fire("save");n.Lang.isFunction(t)&&t()},this))},_bootstrapReference:function(e){e.setNavigationItemList(this)},setTemplateNavigation:function(e){this._templateNavigation=e},getTemplateNavigation:function(){var e=this._templateNavigation;if(!e)throw new Error("TemplateNavigation not found! Possible errors with wrapping data.");return e},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},getTotalSize:function(){return this.toArray().reduce(function(e,t){return e+t.get("children").size()},this.size())}});var s=n.Base.create("FolderItemList",a,[],{destructor:function(){this._navigationItemList=null},_bootstrapReference:function(e){e.setNavigationItemList(this.getNavigationItemList());e.setFolderItemList(this)},sync:function(e,t,a){this.getNavigationItemList().sync(e,t,a)},setNavigationItemList:function(e){if("NavigationItemList"!==e.name)throw new Error("Cant set a navigationitemlist that isnt actually a navigationitemlist");this._navigationItemList=e},getNavigationItemList:function(){var e=this._navigationItemList;if(!e)throw new Error("No NavigationItemList found. Possible errors with wrapping data.");return e}},{ATTRS:{acceptTypes:{value:[]}}});n.namespace("Squarespace.Models").NavigationItemList=a;n.namespace("Squarespace.Models").NavigationFolderItemList=s},"1.0",{requires:["array-invoke","base","model","squarespace-content-collection-utils","squarespace-models-content-collection","squarespace-system-error"]})},"./src/main/webapp/universal/scripts-v6/models/offset-paginator.js":function(e,t){YUI.add("squarespace-models-offset-paginator",function(t){t.namespace("Squarespace.Models");var a=t.Squarespace.Models.OffsetPaginator=t.Base.create("OffsetPaginator",t.Squarespace.Models.Paginator,[],{firstPage:function(){a.superclass.firstPage.call(this);this.set("offset",0)},previousPage:function(){a.superclass.previousPage.call(this);var e=this.get("offset")-this.get("limit");e<0?this.firstPage():this.set("offset",e)},nextPage:function(){a.superclass.nextPage.call(this);this.set("offset",this.get("offset")+this.get("limit"))},_getPaginationParams:function(){var e=a.superclass._getPaginationParams.call(this);return t.merge(e,this.getAttrs(["offset"]))}},{ATTRS:{offset:{value:0,validator:t.Squarespace.AttrValidators.isNumber}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-paginator"]})},"./src/main/webapp/universal/scripts-v6/models/paginator.js":function(e,t,a){YUI.add("squarespace-models-paginator",function(n){var e=function(){};n.namespace("Squarespace.Models");n.Squarespace.Models.Paginator=n.Base.create("Paginator",n.Base,[],{paginateURL:function(e){var t=e.split("?");var a=t[1];var i=n.Lang.isValue(a);var s=i?n.QueryString.parse(a):{};s=n.merge(s,this._getPaginationParams());return t[0]+"?"+n.QueryString.stringify(s)},firstPage:e,previousPage:e,nextPage:e,currentPage:e,_getPaginationParams:function(){return{limit:this.get("limit"),orderBy:this.get("orderBy"),orderDirection:this.get("orderDirection")}}},{ATTRS:{models:{validator:n.Squarespace.AttrValidators.isInstanceOf(n.Squarespace.Models.ModelList),writeOnce:"initOnly"},limit:{value:20,validator:n.Squarespace.AttrValidators.isNumber},orderBy:{value:"id",validator:n.Squarespace.AttrValidators.isString},orderDirection:{value:n.Squarespace.OrderDirection.ASCENDING,validator:function(e){if(n.Object.hasValue(n.Squarespace.OrderDirection,e))return true;false;return false}}}})},"1.0",{requires:["base","querystring","squarespace-attr-validators","squarespace-enum","squarespace-models-model-list"]})},"./src/main/webapp/universal/scripts-v6/models/plan.js":function(e,t){YUI.add("squarespace-models-plan",function(i){var t=["bsnss","unltd","std"];var e=i.namespace("Squarespace.Models");e.Plan=i.Base.create("plan",i.Model,[],{equals:function(e){if(!i.Lang.isValue(e))return false;return this.get("planLevel.value")===e.get("planLevel.value")&&this.get("planPeriod.value")===e.get("planPeriod.value")}},{ATTRS:{planLevel:{},planPeriod:{},price:{},subtotal:{},tax:{},taxRate:{},total:{},annualSubtotalWithMarketingDiscount:{getter:function(){return.625*this.get("subtotal")}},annualTaxWithMarketingDiscount:{getter:function(){return.625*this.get("tax")}},annualTotalWithMarketingDiscount:{getter:function(){return.625*this.get("total")}}}});e.PlanList=i.Base.create("planList",i.ModelList,[i.Squarespace.ModelSync.REST],{model:e.Plan,initializer:function(e){this._productIndex=[];e.items&&i.Array.each(e.items,function(e){e instanceof i.Model&&this._addToIndex(e)},this);this.after("add",this._afterAdd,this);this.after("remove",this._afterRemove,this);this.after("reset",this._afterReset,this)},getProduct:function(e,t){var a=this._productIndex[this._getProductKey(e,t)];return i.Lang.isValue(a)?a:null},getProductsForPlanLevel:function(e){return this.filter(this._filterByPlan(e))},getProductsForPlanPeriod:function(e){return this.filter(this._filterByPeriod(e))},getProductForPlanInterval:function(e,t){var a=this.filter(this._filterByPlan(e));return i.Array.find(a,function(e){return e.get("planPeriod.intervalDays")===t})},getByName:function(t){return i.Array.find(this._items,function(e){return e.get("name")===t})},comparator:function(e){return t.indexOf(e.get("name"))},_filterByPeriod:function(t){return function(e){return e.get("planPeriod.value")===t}},_filterByPlan:function(t){return function(e){return e.get("planLevel.value")===t}},_hashPlan:function(e){return this._getProductKey(e.get("planLevel.value"),e.get("planPeriod.value"))},_getProductKey:function(e,t){return[e,t].join("-")},_afterReset:function(e){this._resetIndex();i.Array.each(e.models,this._addToIndex,this)},_afterRemove:function(e){this._removeFromIndex(e.model)},_afterAdd:function(e){this._addToIndex(e.model)},_resetIndex:function(){this._productIndex={}},_addToIndex:function(e){this._productIndex[this._hashPlan(e)]=e},_removeFromIndex:function(e){delete this._productIndex[this._hashPlan(e)]}})},"1.0",{requires:["base","model","model-list","squarespace-model-sync-rest"]})},"./src/main/webapp/universal/scripts-v6/models/quantity-change-preview.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/utils/YuiElimination.ts").isYuiClassEnabled;YUI.add("squarespace-models-quantity-change-preview",function(e){i("QuantityChangePreview")&&(e.Squarespace.Models.QuantityChangePreview=e.Base.create("QuantityChangePreview",e.Model,[e.Squarespace.ModelSync.REST],{url:"/api/billing/quantity-change-preview?subId={subscriptionId}&qty={newQuantity}"},{ATTRS:{subscriptionId:{validator:e.Squarespace.AttrValidators.isString,writeOnce:"initOnly"},newQuantity:{validator:e.Squarespace.AttrValidators.isNumber,writeOnce:"initOnly"},amount:{validator:e.Squarespace.AttrValidators.isNumber}}}))},"1.0",{requires:["base","squarespace-attr-validators","squarespace-model-sync-rest"]})},"./src/main/webapp/universal/scripts-v6/models/quote.js":function(e,t){YUI.add("squarespace-models-quote",function(e){e.namespace("Squarespace.Models");e.Squarespace.Models.Quote=e.Base.create("Quote",e.Squarespace.Models.StructuredContent,[],{},{ATTRS:{_type:{value:"Quote",validator:function(e){return"Quote"===e},readOnly:true},quote:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},"./src/main/webapp/universal/scripts-v6/models/range-paginator.js":function(e,t,a){YUI.add("squarespace-models-range-paginator",function(s){s.namespace("Squarespace.Models");var a=s.Squarespace.Models.RangePaginator=s.Base.create("RangePaginator",s.Squarespace.Models.Paginator,[],{initializer:function(){s.Do.before(function(e){var t=s.JSON.parse(e);var a=t.previousPageStart;var i=t.nextPageStart;this._set("previousPageStart",a||null);this._set("nextPageStart",i||null)},this.get("models"),"parse",this)},firstPage:function(){a.superclass.firstPage.call(this);this._set("previousPageStart",null);this._set("nextPageStart",null);this._set("start",null);this.set("pageAction",s.Squarespace.PageAction.NEXT)},previousPage:function(){a.superclass.previousPage.call(this);this._set("start",this.get("previousPageStart"));this.set("pageAction",s.Squarespace.PageAction.PREVIOUS)},nextPage:function(){a.superclass.nextPage.call(this);this._set("start",this.get("nextPageStart"));this.set("pageAction",s.Squarespace.PageAction.NEXT)},currentPage:function(){a.superclass.currentPage.call(this);this._set("pageAction",s.Squarespace.PageAction.NEXT)},_getPaginationParams:function(){var e=a.superclass._getPaginationParams.call(this);e.pageAction=this.get("pageAction");var t=this.get("start");s.Lang.isValue(t)&&(e.start=t);return e}},{ATTRS:{pageAction:{value:s.Squarespace.PageAction.NEXT,validator:function(e){if(s.Object.hasValue(s.Squarespace.PageAction,e))return true;false;return false}},start:{value:null,validator:s.Squarespace.AttrValidators.isNullOrString,readOnly:true},previousPageStart:{value:null,validator:s.Squarespace.AttrValidators.isNullOrString,setter:function(e){return e},readOnly:true},nextPageStart:{value:null,validator:s.Squarespace.AttrValidators.isNullOrString,setter:function(e){return e},readOnly:true}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-enum","squarespace-models-paginator"]})},"./src/main/webapp/universal/scripts-v6/models/shopping-cart-facade.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/utils/currency/MoneyUtils.js");YUI.add("squarespace-models-shopping-cart-facade",function(t){t.namespace("Squarespace.Singletons");var e=t.Base.create("ShoppingCartFacade",t.Base,[],{},{ATTRS:{id:{validator:t.Lang.isString},websiteId:{validator:t.Lang.isString},orderId:{validator:t.Lang.isString},created:{getter:function(e){if(!t.Lang.isValue(e))return null;return new Date(e)},setter:function(e){if(t.Lang.isDate(e))return e.getTime();return e},validator:t.Lang.isNumber},isPurchased:{value:false,validator:t.Lang.isBoolean},entries:{value:[],validator:t.Lang.isArray},shippingOptions:{value:[],validator:t.Lang.isArray},selectedShippingOption:{validator:t.Lang.isObject},shippingLocation:{validator:t.Lang.isObject},applicableTaxRules:{value:[],validator:t.Lang.isArray},coupons:{value:[],validator:t.Lang.isArray},validCoupons:{value:[],validator:t.Lang.isArray},invalidCoupons:{value:[],validator:t.Lang.isArray},subtotalCents:{validator:t.Lang.isNumber,value:0},subtotalAmount:{value:i.fromCents(0,"USD")},taxCents:{validator:t.Lang.isNumber,value:0},shippingCostCents:{validator:t.Lang.isNumber,value:0},discountCents:{validator:t.Lang.isNumber,value:0},grandTotalCents:{validator:t.Lang.isNumber,value:0},totalQuantity:{validator:t.Lang.isNumber,value:0},hasDigital:{validator:t.Lang.isBoolean,value:false},purelyDigital:{validator:t.Lang.isBoolean,value:false},requiresShipping:{validator:t.Lang.isBoolean,value:false}}});t.Squarespace.Singletons.ShoppingCart=new e},"1.0",{requires:["base"]})},"./src/main/webapp/universal/scripts-v6/models/shopping-cart.js":function(e,t,a){var l=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var i=a("./src/main/webapp/universal/src/shared/utils/currency/MoneyUtils.js");var s=a("./src/main/webapp/universal/src/shared/utils/commerce/StoreCurrencyManager.js");YUI.add("squarespace-models-shopping-cart",function(o){o.namespace("Squarespace.Models");o.namespace("Squarespace.Singletons");var a=o.Squarespace.Models.ShoppingCart=o.Base.create("shoppingCart",o.Model,[],{initializer:function(){this.publish("item-added",{emitFacade:true});this.publish("loaded",{emitFacade:true});this.publish("recalculate-start",{emitFacade:true});this.publish("recalculate-end",{emitFacade:true});this._readInProgress=false;this._isRecalculating=false;this.on("recalculate-start",function(){this._isRecalculating=true},this);this.on("recalculate-end",function(){this._isRecalculating=false},this)},toJSON:function(){var e=a.superclass.toJSON.call(this);var t=e.created;o.Lang.isNull(t)||(e.created=t.getTime());return e},sync:function(e,t,a){switch(e){case"create":break;case"delete":break;case"read":this._read(t,a);break;case"update":break}},load:function(e,t,a){if("function"===typeof e){t=e;e={}}if(this._readinProgress){this.after("load",t,a);return}o.Model.prototype.load.call(this,e,t?o.bind(t,a||this):null)},isRecalculating:function(){return this._isRecalculating},hasEntry:function(a,i){return o.Array.reduce(this.get("entries"),false,function(e,t){if(o.Lang.isValue(i))return e||t.itemId===a&&i.sku===t.chosenVariant.sku;return e||t.itemId===a})},addEntry:function(e,t,a,i,s,n,r){o.Data.post({url:"/api/commerce/shopping-cart/entries"+(s?"?isExpress=true":""),headers:{"Content-Type":"application/json"},data:o.JSON.stringify({itemId:e,sku:o.Lang.isValue(t)?t.sku:null,quantity:a,additionalFields:o.JSON.stringify(i)}),success:function(e){o.Squarespace.CommerceAnalytics.itemAdded(e);this.setAttrs(e.shoppingCart);this.fire("item-added");o.Lang.isFunction(n)&&n.call(r||this,null,e.newlyAdded)},failure:function(e){e.crumbFail&&(o.Squarespace.Utils.areCookiesEnabled()?e.message=l("Your session has expired. Please reload the page and try again."):e.message=l("Please enable cookies in your browser, reload the page, and try again."));429===e.status&&(e.message=l("Please try again in a few seconds."));o.Lang.isFunction(n)&&n.call(r||this,e.message,null)}},this)},updateFormSubmission:function(e,t,a,i){var s=e.chosenVariant;this.fire("recalculate-start");o.Data.put({headers:{"Content-Type":"application/json"},url:o.Lang.sub("/api/commerce/shopping-cart/entries/{entryId}/additionalFields",{entryId:e.id}),data:o.JSON.stringify({itemId:e.itemId,sku:o.Lang.isValue(s)?s.sku:null,additionalFields:o.JSON.stringify(t)}),success:function(e){this.fire("recalculate-end");this.setAttrs(e.shoppingCart);o.Lang.isFunction(a)&&a.call(i||this,null,e.updatedEntry)},failure:function(e){this.fire("recalculate-end");o.Lang.isFunction(a)&&a.call(i||this,e.message,null)}},this)},totalForItem:function(a,i){var s=o.Lang.isValue(i);return o.Array.reduce(this.get("entries"),0,function(e,t){if(t.itemId===a&&(!s||s&&t.chosenVariant.sku===i.sku))return e+t.quantity;return e})},_read:function(e,t){this._readInProgress=true;this.fire("loading");o.Data.get({url:"/api/commerce/shopping-cart",data:{mock:e.mock?"true":"false",timecode:Date.now()},success:function(e){this.fire("loaded");this._readInProgress=false;t(null,e)},failure:function(e){this.fire("loaded");this._readInProgress=false;t(e.message,null)}},this)}},{ATTRS:{id:{validator:o.Lang.isString},websiteId:{validator:o.Lang.isString},orderId:{validator:o.Lang.isString},created:{getter:function(e){if(!o.Lang.isValue(e))return null;return new Date(e)},setter:function(e){if(o.Lang.isDate(e))return e.getTime();return e},validator:o.Lang.isNumber},isPurchased:{value:false,validator:o.Lang.isBoolean},entries:{value:[],validator:o.Lang.isArray},shippingOptions:{value:[],validator:o.Lang.isArray},selectedShippingOption:{validator:o.Lang.isObject},shippingLocation:{validator:o.Lang.isObject},applicableTaxRules:{value:[],validator:o.Lang.isArray},coupons:{value:[],validator:o.Lang.isArray},validCoupons:{value:[],validator:o.Lang.isArray},invalidCoupons:{value:[],validator:o.Lang.isArray},subtotalCents:{validator:o.Lang.isNumber,value:0},subtotalAmount:{getter:function(){var e=s.getStoreCurrency();return i.fromCents(this.get("subtotalCents"),e)}},taxCents:{validator:o.Lang.isNumber,value:0},shippingCostCents:{validator:o.Lang.isNumber,value:0},discountCents:{validator:o.Lang.isNumber,value:0},grandTotalCents:{validator:o.Lang.isNumber,value:0},totalQuantity:{validator:o.Lang.isNumber,value:0},hasDigital:{validator:o.Lang.isBoolean,value:false},purelyDigital:{validator:o.Lang.isBoolean,value:false},requiresShipping:{validator:o.Lang.isBoolean,value:false}}});o.Squarespace.Singletons.ShoppingCart=new a},"1.0",{requires:["base","model","squarespace-commerce-analytics","squarespace-commerce-utils","squarespace-util"]})},"./src/main/webapp/universal/scripts-v6/models/slice-area-list.js":function(e,t){YUI.add("squarespace-models-slice-area-list",function(e){e.namespace("Squarespace.Models");e.Squarespace.Models.SliceAreaList=e.Base.create("SliceAreaList",e.ModelList,[],{model:e.Squarespace.Models.SliceArea,filterBySliceTypes:function(t){return this.filter({asList:true},function(e){return-1!==t.indexOf(e.get("sliceType"))})}})},"1.0",{requires:["base","model-list","squarespace-models-slice-area"]})},"./src/main/webapp/universal/scripts-v6/models/slice-area.js":function(e,t){YUI.add("squarespace-models-slice-area",function(t){t.namespace("Squarespace.Models");var a=t.Squarespace.Models.SliceArea=t.Base.create("SliceArea",t.Model,[],{toJSON:function(){var e=a.superclass.toJSON.call(this);e.demoSlice=e.demoSlice.toJSON();return e}},{ATTRS:{sliceType:{value:t.Squarespace.SliceType.HEADING,validator:t.Squarespace.AttrValidators.isValueIn(t.Squarespace.SliceType),writeOnce:"initOnly"},params:{value:{},validator:t.Squarespace.AttrValidators.isObject,writeOnce:"initOnly"},demoSlice:{value:null,setter:function(e){if(!(e instanceof t.Squarespace.Models.Slice))return new t.Squarespace.Models.Slice(e);return e},writeOnce:"initOnly"}}})},"1.0",{requires:["base","model","squarespace-attr-validators","squarespace-enum","squarespace-models-slice"]})},"./src/main/webapp/universal/scripts-v6/models/slice-content/action.js":function(e,t){YUI.add("squarespace-models-slice-content-action",function(e){e.namespace("Squarespace.Models.SliceContent");e.Squarespace.Models.SliceContent.Action=e.Base.create("Action",e.Squarespace.Models.SliceContent.Compound,[],{},{SLICE_TYPE:e.Squarespace.SliceType.ACTION,ATTRS:{_type:{value:"Action"},acceptedTypes:{value:[e.Squarespace.SliceType.BUTTONS,e.Squarespace.SliceType.NAVIGATION]}}})},"1.0",{requires:["base","squarespace-enum","squarespace-models-slice-content-compound"]})},"./src/main/webapp/universal/scripts-v6/models/slice-content/album.js":function(e,t,a){var s=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var n=a("./src/main/webapp/frontend/packages/enums/CollectionTypes.js");YUI.add("squarespace-models-slice-content-album",function(i){i.namespace("Squarespace.Models.SliceContent");var t=i.Squarespace.Models.SliceContent.Album=i.Base.create("Album",i.Squarespace.Models.SliceContent.Base,[i.Squarespace.Models.SliceContent.HasContentCollection],{toJSON:function(){var e=t.superclass.toJSON.call(this);delete e.contentCollection;delete e.eventListeners;return e},updateReferences:function(e){var t=this.get("contentCollectionId");if(i.Lang.isValue(t)){var a=e[t];i.Lang.isValue(a)&&this.get("contentCollection").setAttrs(a)}}},{SLICE_TYPE:i.Squarespace.SliceType.ALBUM,ATTRS:{_type:{value:"Album"},contentCollection:{valueFn:function(){var e=i.Squarespace.Utils.getGuid();return new i.Squarespace.Models.ContentCollection({id:this.get("contentCollectionId"),type:n.SLIDE_ALBUM,ordering:i.Squarespace.CollectionOrdering.MUSIC_ALBUM,metadata:{typeName:"music-album"},title:s("Slide Album {id}",{id:e}),navigationTitle:e,enabled:true,itemLimit:60,itemCount:0})}}}})},"1.0",{requires:["base","squarespace-enum","squarespace-models-content-collection","squarespace-models-slice-content-base","squarespace-models-slice-content-has-content-collection","squarespace-util"]})},"./src/main/webapp/universal/scripts-v6/models/slice-content/base.js":function(e,t){YUI.add("squarespace-models-slice-content-base",function(t){t.namespace("Squarespace.Models.SliceContent");t.Squarespace.Models.SliceContent.Base=t.Base.create("Base",t.Model,[],{saveReferences:function(e){t.Lang.isFunction(e)&&e()},updateReferences:function(e){},resetClientAttrs:function(){}},{ATTRS:{_type:{value:null,validator:t.Squarespace.AttrValidators.isNullOrString,writeOnce:"initOnly",readOnly:true},slideId:{value:null},refreshRenderingAfterSave:{value:false,validator:t.Squarespace.AttrValidators.isBoolean}}})},"1.0",{requires:["base","model","squarespace-attr-validators"]})},"./src/main/webapp/universal/scripts-v6/models/slice-content/body.js":function(e,t){YUI.add("squarespace-models-slice-content-body",function(e){e.namespace("Squarespace.Models.SliceContent");e.Squarespace.Models.SliceContent.Body=e.Base.create("Body",e.Squarespace.Models.SliceContent.Base,[],{},{SLICE_TYPE:e.Squarespace.SliceType.BODY,ATTRS:{_type:{value:"Body"},body:{value:null,validator:e.Squarespace.AttrValidators.isNullOrObject}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-enum","squarespace-models-slice-content-base"]})},"./src/main/webapp/universal/scripts-v6/models/slice-content/buttons.js":function(e,t){YUI.add("squarespace-models-slice-content-buttons",function(e){e.namespace("Squarespace.Models.SliceContent");e.Squarespace.Models.SliceContent.Buttons=e.Base.create("Buttons",e.Squarespace.Models.SliceContent.Base,[e.Squarespace.Models.SliceContent.HasLinks],{},{SLICE_TYPE:e.Squarespace.SliceType.BUTTONS,ATTRS:{_type:{value:"Buttons"},limit:{value:2}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-enum","squarespace-models-slice-content-base","squarespace-models-slice-content-has-links"]})},"./src/main/webapp/universal/scripts-v6/models/slice-content/compound.js":function(e,t){YUI.add("squarespace-models-slice-content-compound",function(s){s.namespace("Squarespace.Models.SliceContent");var t=s.Squarespace.Models.SliceContent.Compound=s.Base.create("Compound",s.Squarespace.Models.SliceContent.Base,[],{initializer:function(){this._currentContentMap={};var i=s.Squarespace.Models.SliceContent.Factory;this.after("currentTypeChange",function(e){this._currentContentMap[e.prevVal]=this.get("currentContent");var t=e.newVal;var a=this._currentContentMap[t];s.Lang.isValue(a)?this.set("currentContent",a):this.set("currentContent",i.create(t))},this)},toJSON:function(){var e=t.superclass.toJSON.call(this);e.currentContent=e.currentContent.toJSON();return e},saveReferences:function(e){this.get("currentContent").saveReferences(e)},updateReferences:function(e){this.get("currentContent").updateReferences(e)}},{ATTRS:{acceptedTypes:{value:[],validator:s.Squarespace.AttrValidators.isArray,writeOnce:"initOnly"},currentType:{valueFn:function(){return this.get("acceptedTypes")[0]},validator:function(e){return-1!==this.get("acceptedTypes").indexOf(e)}},currentContent:{valueFn:function(){var e=this.get("currentType");return s.Squarespace.Models.SliceContent.Factory.create(e)},setter:function(e){if(!(e instanceof s.Squarespace.Models.SliceContent.Base)){var t=this.get("currentContent");if(s.Lang.isValue(t)){t.setAttrs(e);return t}var a=this.get("currentType");return s.Squarespace.Models.SliceContent.Factory.create(a,e)}return e}}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-enum","squarespace-models-content-item","squarespace-models-slice-content-base","squarespace-models-slice-content-factory"]})},"./src/main/webapp/universal/scripts-v6/models/slice-content/custom-form.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-models-slice-content-custom-form",function(s){s.namespace("Squarespace.Models.SliceContent");function e(a,i){return function(){var e=this.get(a);if(s.Lang.isValue(e)){var t=new s.Squarespace.Models.Form({formId:e});return t}return new i}}var t=s.Squarespace.Models.SliceContent.CustomForm=s.Base.create("CustomForm",s.Squarespace.Models.SliceContent.Base,[s.Squarespace.Models.SliceContent.HasForm],{initializer:function(){this.get("newsletterForm").after("idChange",function(e){this.set("newsletterFormId",e.newVal)},this)},toJSON:function(){var e=t.superclass.toJSON.call(this);delete e.form;delete e.newsletterForm;return e},updateReferences:function(e){this._updateFormReferences(this.get("formId"),this.get("form"),e);this._updateFormReferences(this.get("newsletterFormId"),this.get("newsletterForm"),e)},_updateFormReferences:function(e,t,a){if(s.Lang.isValue(e)){var i=a[e];s.Lang.isValue(i)&&t.setAttrs(i)}}},{SLICE_TYPE:s.Squarespace.SliceType.CUSTOM_FORM,ATTRS:{_type:{value:"CustomForm"},buttonLabel:{value:i("Open Form")},isNewsletterFormSelected:{value:false},newsletterFormId:{value:null},newsletterForm:{valueFn:e("newsletterFormId",s.Squarespace.Models.SliceDemoNewsletterForm)},form:{valueFn:e("formId",s.Squarespace.Models.SliceDemoCustomForm)}}})},"1.0",{requires:["base","squarespace-enum","squarespace-models-slice-content-base","squarespace-models-slice-content-has-form","squarespace-models-slice-demo-custom-form","squarespace-models-slice-demo-newsletter-form"]})},"./src/main/webapp/universal/scripts-v6/models/slice-content/factory.js":function(e,t){YUI.add("squarespace-models-slice-content-factory",function(e){var t=e.Squarespace.FactoryUtils.createEnumToClassFactory(e.Squarespace.SliceType,e.Squarespace.Models.SliceContent,"SLICE_TYPE");e.namespace("Squarespace.Models.SliceContent");e.Squarespace.Models.SliceContent.Factory=t},"1.0",{requires:["squarespace-enum","squarespace-factory-utils","squarespace-models-slice-content-action","squarespace-models-slice-content-album","squarespace-models-slice-content-body","squarespace-models-slice-content-buttons","squarespace-models-slice-content-custom-form","squarespace-models-slice-content-gallery","squarespace-models-slice-content-heading","squarespace-models-slice-content-image","squarespace-models-slice-content-lock","squarespace-models-slice-content-logo","squarespace-models-slice-content-map","squarespace-models-slice-content-navigation","squarespace-models-slice-content-newsletter","squarespace-models-slice-content-popup-overlay-action","squarespace-models-slice-content-password","squarespace-models-slice-content-social-icons","squarespace-models-slice-content-sub-heading","squarespace-models-slice-content-twitter","squarespace-models-slice-content-video"]})},"./src/main/webapp/universal/scripts-v6/models/slice-content/gallery.js":function(e,t,a){var s=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-models-slice-content-gallery",function(i){i.namespace("Squarespace.Models.SliceContent");var t=i.Squarespace.Models.SliceContent.Gallery=i.Base.create("Gallery",i.Squarespace.Models.SliceContent.Base,[i.Squarespace.Models.SliceContent.HasContentCollection],{initializer:function(){this.after("sourceChange",function(e){this.set("contentCollection",this.get("defaultCollections")[e.newVal])}.bind(this))},toJSON:function(){var e=t.superclass.toJSON.call(this);delete e.contentCollection;delete e.defaultCollections;delete e.eventListeners;return e},updateReferences:function(e){var t=this.get("contentCollectionId");if(i.Lang.isValue(t)){var a=e[t];i.Lang.isValue(a)&&this.get("contentCollection").setAttrs(a)}},resetClientAttrs:function(){this.get("source")!==i.Squarespace.BackgroundSource.UPLOAD&&(this.get("defaultCollections")[i.Squarespace.BackgroundSource.UPLOAD]=this._getNewUploadCollection())},_getNewUploadCollection:function(){var e=s("Transient Gallery {transientGalleryId}",{transientGalleryId:i.Squarespace.Utils.getGuid()});return new i.Squarespace.Models.ContentCollection({typeName:"transient-gallery",type:i.Squarespace.CollectionTypes.GALLERY_BLOCK,ordering:i.Squarespace.CollectionOrdering.USER,title:e,navigationTitle:e,enabled:true,urlId:i.Squarespace.Utils.getGuid(),itemCount:0})},_getNewVideoCollection:function(){return this._getNewUploadCollection()}},{SLICE_TYPE:i.Squarespace.SliceType.GALLERY,ATTRS:{_type:{value:"Gallery"},source:{value:i.Squarespace.BackgroundSource.UPLOAD,validator:i.Squarespace.AttrValidators.isValueIn(i.Squarespace.BackgroundSource)},disableImages:{value:false},contentCollection:{valueFn:function(){var e=this.get("source");return this.get("defaultCollections")[e]}},defaultCollections:{valueFn:function(){var e={};e[i.Squarespace.BackgroundSource.UPLOAD]=this._getNewUploadCollection();e[i.Squarespace.BackgroundSource.VIDEO]=this._getNewVideoCollection();e[i.Squarespace.BackgroundSource.NONE]=this._getNewUploadCollection();return e}}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-enum","squarespace-models-content-collection","squarespace-models-slice-content-base","squarespace-models-slice-content-has-content-collection","squarespace-util"]})},"./src/main/webapp/universal/scripts-v6/models/slice-content/has-connected-account.js":function(e,t){YUI.add("squarespace-models-slice-content-has-connected-account",function(t){t.namespace("Squarespace.Models.SliceContent");t.Squarespace.Models.SliceContent.HasConnectedAccount=t.Base.create("HasConnectedAccount",t.Base,[],{initializer:function(){this.after("connectedAccountIdChange",function(){this.set("connectedAccount",this._getConnectedAccount())},this)},destructor:function(){this._afterToJSON.detach()},_getConnectedAccount:function(){var e=this.get("connectedAccountId");if(t.Lang.isValue(e))return t.Squarespace.Models.ConnectedAccounts.loadFromStore().getById(e);return null}},{ATTRS:{serviceId:{value:null,validator:t.Squarespace.AttrValidators.isNullOrValueIn(t.Squarespace.ExternalServiceProviders)},connectedAccountId:{value:null},connectedAccount:{valueFn:"_getConnectedAccount",validator:t.Squarespace.AttrValidators.isNullOrInstanceOf(t.Squarespace.Models.ConnectedAccount)}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-enum","squarespace-models-connected-account","squarespace-models-connected-accounts"]})},"./src/main/webapp/universal/scripts-v6/models/slice-content/has-content-collection.js":function(e,t){YUI.add("squarespace-models-slice-content-has-content-collection",function(a){a.namespace("Squarespace.Models.SliceContent");a.Squarespace.Models.SliceContent.HasContentCollection=a.Base.create("HasContentCollection",a.Base,[a.Squarespace.Mixins.EventRegistrar],{initializer:function(){var e=this.get("contentCollection");e&&e.get("type")!==a.Squarespace.CollectionTypes.INSTAGRAM&&this._registerEvent(e.after("idChange",function(e){this.set("contentCollectionId",e.newVal)},this));this.after("contentCollectionChange",function(e){var t=e.newVal;t.get("type")!==a.Squarespace.CollectionTypes.INSTAGRAM&&this._registerEvent(t.after("idChange",function(e){this.set("contentCollectionId",e.newVal)}.bind(this)))}.bind(this))}},{ATTRS:{contentCollectionId:{value:null},contentCollection:{valueFn:function(){return new a.Squarespace.Models.ContentCollection({id:this.get("contentCollectionId")})},validator:a.Squarespace.AttrValidators.isInstanceOf(a.Squarespace.Models.ContentCollection)}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-mixins-event-registrar","squarespace-models-content-collection"]})},"./src/main/webapp/universal/scripts-v6/models/slice-content/has-content-item.js":function(e,t){YUI.add("squarespace-models-slice-content-has-content-item",function(a){a.namespace("Squarespace.Models.SliceContent");a.Squarespace.Models.SliceContent.HasContentItem=a.Base.create("HasContentItem",a.Base,[],{initializer:function(){this._bindContentItemIdChange();var e=this.get("id");this.after(e+"|contentItemChange",function(e){this.set("contentItemId",e.newVal.get("id"));this._bindContentItemIdChange()},this);this._afterToJSON=a.after(function(){var e=a.Do.currentRetVal;var t=e.contentItem;a.Lang.isValue(t)&&(e.contentItem=t.toJSON());return new a.Do.AlterReturn("ContentItem toJSON",e)},this,"toJSON",this)},destructor:function(){this._afterToJSON.detach()},_bindContentItemIdChange:function(){var e=this.get("id");this.get("contentItem").after(e+"|idChange",function(e){this.set("contentItemId",e.newVal)},this)}},{ATTRS:{contentItemId:{value:null},contentItem:{valueFn:function(){var e=this.get("newContentItemConfig");return new a.Squarespace.Models.ContentItem(a.merge(e,{id:this.get("contentItemId")}))},getter:function(e){return e},setter:function(e){if(e instanceof a.Squarespace.Models.ContentItem)return e;if(a.Lang.isObject(e))return new a.Squarespace.Models.ContentItem(e);if(a.Lang.isNull(e)){var t=this.get("newContentItemConfig");return new a.Squarespace.Models.ContentItem(a.merge(t,{id:null}))}}},newContentItemConfig:{value:{},validator:a.Squarespace.AttrValidators.isObject}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-content-item"]})},"./src/main/webapp/universal/scripts-v6/models/slice-content/has-form.js":function(e,t){YUI.add("squarespace-models-slice-content-has-form",function(e){e.namespace("Squarespace.Models.SliceContent");e.Squarespace.Models.SliceContent.HasForm=e.Base.create("HasForm",e.Base,[],{initializer:function(){this.get("form").after("idChange",function(e){this.set("formId",e.newVal)},this)}},{ATTRS:{formId:{value:null},buttonLabel:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},form:{valueFn:function(){return new e.Squarespace.Models.Form({formId:this.get("formId")})},validator:e.Squarespace.AttrValidators.isInstanceOf(e.Squarespace.Models.Form),writeOnce:"initOnly"}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-form"]})},"./src/main/webapp/universal/scripts-v6/models/slice-content/has-links.js":function(e,t){YUI.add("squarespace-models-slice-content-has-links",function(a){a.namespace("Squarespace.Models.SliceContent");a.Squarespace.Models.SliceContent.HasLinks=a.Base.create("HasLinks",a.Base,[],{initializer:function(){this.get("links").after("*:change",function(){this.fire("change")},this);a.Do.after(function(){var e=a.Do.currentRetVal;e.links=e.links.toJSON();return e},this,"toJSON",this)}},{ATTRS:{links:{valueFn:function(){var e=new a.ModelList({model:a.Squarespace.Models.SliceContent.Link});for(var t=0;t<this.get("limit");t++)e.add({});return e},setter:function(e){if(e instanceof a.ModelList)return e;return new a.ModelList({model:a.Squarespace.Models.SliceContent.Link,items:e})},validator:function(e){var t=this.get("limit");if(e instanceof a.ModelList)return e.size()<=t;if(a.Lang.isArray(e))return e.length<=t;return false},writeOnce:"initOnly"},limit:{value:5,validator:a.Squarespace.AttrValidators.isNumber,writeOnce:"initOnly"}}})},"1.0",{requires:["base","event-custom","model-list","squarespace-attr-validators","squarespace-models-slice-content-link"]})},"./src/main/webapp/universal/scripts-v6/models/slice-content/has-text.js":function(e,t){YUI.add("squarespace-models-slice-content-has-text",function(e){e.namespace("Squarespace.Models.SliceContent");e.Squarespace.Models.SliceContent.HasText=e.Base.create("HasText",e.Base,[],{},{ATTRS:{text:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString}}})},"1.0",{requires:["base","squarespace-attr-validators"]})},"./src/main/webapp/universal/scripts-v6/models/slice-content/heading.js":function(e,t){YUI.add("squarespace-models-slice-content-heading",function(e){e.namespace("Squarespace.Models.SliceContent");e.Squarespace.Models.SliceContent.Heading=e.Base.create("Heading",e.Squarespace.Models.SliceContent.Base,[e.Squarespace.Models.SliceContent.HasText],{},{SLICE_TYPE:e.Squarespace.SliceType.HEADING,ATTRS:{_type:{value:"Heading"}}})},"1.0",{requires:["base","squarespace-enum","squarespace-models-slice-content-base","squarespace-models-slice-content-has-text"]})},"./src/main/webapp/universal/scripts-v6/models/slice-content/image.js":function(e,t){YUI.add("squarespace-models-slice-content-image",function(i){i.namespace("Squarespace.Models.SliceContent");i.Squarespace.Models.SliceContent.Image=i.Base.create("Image",i.Squarespace.Models.SliceContent.Base,[i.Squarespace.Models.SliceContent.HasContentItem],{saveReferences:function(a){this.get("contentItem").save(i.bind(function(e,t){i.Lang.isFunction(a)&&a.call(this,e,t)},this))},updateReferences:function(e){var t=this.get("contentItemId");if(i.Lang.isValue(t)){var a=e[t];i.Lang.isValue(a)&&this.get("contentItem").setAttrs(a)}}},{SLICE_TYPE:i.Squarespace.SliceType.IMAGE,ATTRS:{_type:{value:"Image"},newContentItemConfig:{value:{recordType:i.Squarespace.RecordType.IMAGE}}}})},"1.0",{requires:["base","squarespace-enum","squarespace-models-slice-content-base","squarespace-models-slice-content-has-content-item"]})},"./src/main/webapp/universal/scripts-v6/models/slice-content/link.js":function(e,t){YUI.add("squarespace-models-slice-content-link",function(e){e.namespace("Squarespace.Models.SliceContent");e.Squarespace.Models.SliceContent.Link=e.Base.create("Link",e.Model,[],{},{ATTRS:{text:{value:"",validator:e.Squarespace.AttrValidators.isString},clickthroughUrl:{value:{},validator:e.Squarespace.AttrValidators.isObject}}})},"1.0",{requires:["base","model","squarespace-attr-validators"]})},"./src/main/webapp/universal/scripts-v6/models/slice-content/lock.js":function(e,t){YUI.add("squarespace-models-slice-content-lock",function(e){e.namespace("Squarespace.Models.SliceContent");e.Squarespace.Models.SliceContent.Lock=e.Base.create("Lock",e.Squarespace.Models.SliceContent.Base,[],{},{SLICE_TYPE:e.Squarespace.SliceType.LOCK,ATTRS:{_type:{value:"Lock"},display:{value:true,validator:e.Squarespace.AttrValidators.isBoolean}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-slice-content-base"]})},"./src/main/webapp/universal/scripts-v6/models/slice-content/logo.js":function(e,t){YUI.add("squarespace-models-slice-content-logo",function(e){e.namespace("Squarespace.Models.SliceContent");e.Squarespace.Models.SliceContent.Logo=e.Base.create("Logo",e.Squarespace.Models.SliceContent.Compound,[],{resetClientAttrs:function(){this.get("currentType")!==e.Squarespace.SliceType.IMAGE&&delete this._currentContentMap[e.Squarespace.SliceType.IMAGE]}},{SLICE_TYPE:e.Squarespace.SliceType.LOGO,ATTRS:{_type:{value:"Logo"},acceptedTypes:{value:[e.Squarespace.SliceType.IMAGE,e.Squarespace.SliceType.HEADING]}}})},"1.0",{requires:["base","squarespace-enum","squarespace-models-slice-content-compound"]})},"./src/main/webapp/universal/scripts-v6/models/slice-content/map.js":function(e,t){YUI.add("squarespace-models-slice-content-map",function(t){t.namespace("Squarespace.Models.SliceContent");var a=t.Squarespace.Models.SliceContent.Map=t.Base.create("Map",t.Squarespace.Models.SliceContent.Base,[],{toJSON:function(){var e=a.superclass.toJSON.call(this);e.location=e.location.toJSON();return e}},{SLICE_TYPE:t.Squarespace.SliceType.MAP,ATTRS:{_type:{value:"Map"},location:{valueFn:function(){return new t.Squarespace.Models.GeoLocation},setter:function(e){if(!(e instanceof t.Squarespace.Models.GeoLocation))return new t.Squarespace.Models.GeoLocation(e);return e}}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-enum","squarespace-models-geo-location","squarespace-models-slice-content-base"]})},"./src/main/webapp/universal/scripts-v6/models/slice-content/navigation.js":function(e,t){YUI.add("squarespace-models-slice-content-navigation",function(e){e.namespace("Squarespace.Models.SliceContent");e.Squarespace.Models.SliceContent.Navigation=e.Base.create("Navigation",e.Squarespace.Models.SliceContent.Base,[e.Squarespace.Models.SliceContent.HasLinks],{},{SLICE_TYPE:e.Squarespace.SliceType.NAVIGATION,ATTRS:{_type:{value:"Navigation"}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-enum","squarespace-models-slice-content-base","squarespace-models-slice-content-has-links"]})},"./src/main/webapp/universal/scripts-v6/models/slice-content/newsletter.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-models-slice-content-newsletter",function(s){s.namespace("Squarespace.Models.SliceContent");var t=s.Squarespace.Models.SliceContent.Newsletter=s.Base.create("Newsletter",s.Squarespace.Models.SliceContent.Base,[s.Squarespace.Models.SliceContent.HasForm],{toJSON:function(){var e=t.superclass.toJSON.call(this);delete e.form;return e},saveReferences:function(a){var e=this.get("mailchimpConnect");var t=this.get("googleDocsConnect");if(e||t){var i=this.get("form");i.set("backendConnectionConfigs",{googleDocsConnect:t,mailchimpConnect:e});i.save(function(e,t){s.Lang.isFunction(a)&&a.call(this,e,t)}.bind(this))}else a.call(this)},updateReferences:function(e){var t=this.get("formId");if(s.Lang.isValue(t)){var a=e[t];if(s.Lang.isValue(a)){var i=this.get("form");i.setAttrs(a)}}}},{SLICE_TYPE:s.Squarespace.SliceType.NEWSLETTER,ATTRS:{_type:{value:"Newsletter"},form:{valueFn:function(){var e=this.get("formId");if(s.Lang.isValue(e))return new s.Squarespace.Models.Form({formId:e});var t=new s.Squarespace.Models.SliceDemoNewsletterForm;var a=t.get("fields");s.Array.each(a,function(e){s.Squarespace.FormEditingUtils.resolveFieldId(e,a)},this);return t}},mailchimpConnect:{},googleDocsConnect:{},submitButtonText:{value:i("Sign Up")},disclaimerMessage:{value:{html:i("We respect your privacy.")}},submissionHTML:{},submissionMessage:{value:{html:i("Thank you!")}},successRedirect:{}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-enum","squarespace-form-editing-utils","squarespace-models-slice-content-base","squarespace-models-slice-content-has-form","squarespace-models-slice-demo-newsletter-form"]})},"./src/main/webapp/universal/scripts-v6/models/slice-content/password.js":function(e,t){YUI.add("squarespace-models-slice-content-password",function(e){e.namespace("Squarespace.Models.SliceContent");e.Squarespace.Models.SliceContent.Password=e.Base.create("Password",e.Squarespace.Models.SliceContent.Base,[],{},{SLICE_TYPE:e.Squarespace.SliceType.PASSWORD,ATTRS:{_type:{value:"Password"}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-slice-content-base"]})},"./src/main/webapp/universal/scripts-v6/models/slice-content/popup-overlay-action.js":function(e,t){YUI.add("squarespace-models-slice-content-popup-overlay-action",function(e){e.namespace("Squarespace.Models.SliceContent");e.Squarespace.Models.SliceContent.PopupOverlayAction=e.Base.create("PopupOverlayAction",e.Squarespace.Models.SliceContent.Compound,[],{},{SLICE_TYPE:e.Squarespace.SliceType.POPUP_OVERLAY_ACTION,ATTRS:{_type:{value:"PopupOverlayAction"},acceptedTypes:{value:[e.Squarespace.SliceType.NEWSLETTER,e.Squarespace.SliceType.BUTTONS]}}})},"1.0",{requires:["base","squarespace-enum","squarespace-models-slice-content-compound"]})},"./src/main/webapp/universal/scripts-v6/models/slice-content/social-icons.js":function(e,t){YUI.add("squarespace-models-slice-content-social-icons",function(e){e.namespace("Squarespace.Models.SliceContent");e.Squarespace.Models.SliceContent.SocialIcons=e.Base.create("SocialIcons",e.Squarespace.Models.SliceContent.Base,[],{},{SLICE_TYPE:e.Squarespace.SliceType.SOCIAL_ICONS,ATTRS:{_type:{value:"SocialIcons"},display:{value:true,validator:e.Squarespace.AttrValidators.isBoolean}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-slice-content-base"]})},"./src/main/webapp/universal/scripts-v6/models/slice-content/sub-heading.js":function(e,t){YUI.add("squarespace-models-slice-content-sub-heading",function(e){e.namespace("Squarespace.Models.SliceContent");e.Squarespace.Models.SliceContent.SubHeading=e.Base.create("SubHeading",e.Squarespace.Models.SliceContent.Base,[e.Squarespace.Models.SliceContent.HasText],{},{SLICE_TYPE:e.Squarespace.SliceType.SUB_HEADING,ATTRS:{_type:{value:"SubHeading"}}})},"1.0",{requires:["base","squarespace-enum","squarespace-models-slice-content-base","squarespace-models-slice-content-has-text"]})},"./src/main/webapp/universal/scripts-v6/models/slice-content/twitter.js":function(e,t){YUI.add("squarespace-models-slice-content-twitter",function(i){i.namespace("Squarespace.Models.SliceContent");var t=i.Squarespace.Models.SliceContent.Twitter=i.Base.create("Twitter",i.Squarespace.Models.SliceContent.Base,[i.Squarespace.Models.SliceContent.HasConnectedAccount],{initializer:function(){var e=this.get("id");this.get("socialData").after(e+"|change",function(e){var t=e.changed.socialSearch;i.Lang.isValue(t)&&this.set("socialSearchId",t.newVal.id)},this);this.after("useSearchChange",function(e){this.set("refreshRenderingAfterSave",e.newVal)}.bind(this))},toJSON:function(){var e=t.superclass.toJSON.call(this);delete e.socialData;delete e.connectedAccount;return e},saveReferences:function(a){if(this.get("useSearch")){var e=this.get("socialData");e.set("preview",false);e.save(function(e,t){i.Lang.isFunction(a)&&a.call(this,e,t)}.bind(this))}else a.call(this)},updateReferences:function(e){var t=this.get("socialSearchId");if(i.Lang.isValue(t)){var a=e[t];i.Lang.isValue(a)&&this.get("socialData").set("socialSearch",a)}},previewSocialSearch:function(a){var e=this.get("socialData");e.set("preview",true);e.save(function(e,t){i.Lang.isFunction(a)&&a.call(this,e,t)}.bind(this))}},{SLICE_TYPE:i.Squarespace.SliceType.TWITTER,ATTRS:{_type:{value:"Twitter"},serviceId:{value:i.Squarespace.ExternalServiceProviders.TWITTER},socialSearchId:{value:null},useSearch:{value:false,validator:i.Squarespace.AttrValidators.isBoolean},numTweets:{value:10,validator:i.Squarespace.AttrValidators.isNumber},showAvatar:{value:true,validator:i.Squarespace.AttrValidators.isBoolean},showDisplayName:{value:true,validator:i.Squarespace.AttrValidators.isBoolean},socialData:{valueFn:function(){return new i.Squarespace.Models.SocialData({socialSearch:{referenceId:this.get("slideId"),referenceType:i.Squarespace.SocialSearchReferenceType.SLIDE,serviceProvider:i.Squarespace.ExternalServiceProviders.TWITTER}})},setter:function(e){e.get("socialSearch.referenceId")||e.set("socialSearch.referenceId",this.get("slideId"));return e},validator:i.Squarespace.AttrValidators.isInstanceOf(i.Squarespace.Models.SocialData)},refreshRenderingAfterSave:{valueFn:function(){return this.get("useSearch")}}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-enum","squarespace-models-slice-content-base","squarespace-models-slice-content-has-connected-account","squarespace-models-social-data"]})},"./src/main/webapp/universal/scripts-v6/models/slice-content/video.js":function(e,t){YUI.add("squarespace-models-slice-content-video",function(i){i.namespace("Squarespace.Models.SliceContent");i.Squarespace.Models.SliceContent.Video=i.Base.create("Video",i.Squarespace.Models.SliceContent.Base,[i.Squarespace.Models.SliceContent.HasContentItem],{saveReferences:function(a){this.get("contentItem").save(i.bind(function(e,t){i.Lang.isFunction(a)&&a.call(this,e,t)},this))},updateReferences:function(e){var t=this.get("contentItemId");if(i.Lang.isValue(t)){var a=e[t];i.Lang.isValue(a)&&this.get("contentItem").setAttrs(a)}}},{SLICE_TYPE:i.Squarespace.SliceType.VIDEO,ATTRS:{_type:{value:"Video"},newContentItemConfig:{value:{recordType:i.Squarespace.RecordType.VIDEO}}}})},"1.0",{requires:["base","squarespace-enum","squarespace-models-content-item","squarespace-models-slice-content-base","squarespace-models-slice-content-has-content-item"]})},"./src/main/webapp/universal/scripts-v6/models/slice-demo-custom-form.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/frontend/packages/enums/GoogleReCaptchaAlignmentType.js");var n=a("./src/main/webapp/frontend/packages/enums/GoogleReCaptchaThemeType.js");YUI.add("squarespace-models-slice-demo-custom-form",function(e){e.namespace("Squarespace.Models");e.Squarespace.Models.SliceDemoCustomForm=e.Base.create("SliceDemoCustomForm",e.Squarespace.Models.Form,[],{},{ATTRS:{type:{value:e.Squarespace.FormType.SLIDE},name:{value:i("Demo Form")},fields:{value:[{type:"name",id:null,locked:false,title:i("Name"),description:"",required:true,name:true},{type:"email",id:null,locked:false,title:i("Email Address"),description:"",placeholder:"",required:true,email:true},{type:"text",id:null,locked:false,title:i("Subject"),description:"",placeholder:"",required:true,text:true},{type:"textarea",id:null,locked:false,title:i("Message"),description:"",placeholder:"",required:true,textarea:true}]},submitButtonText:{value:i("Submit")},disclaimerMessage:{value:{html:i("We respect your privacy.")}},submissionMessage:{value:{html:i("Thank you!")}},captchaEnabled:{value:false},captchaTheme:{value:n.LIGHT},captchaAlignment:{value:s.LEFT}}})},"1.0",{requires:["base","squarespace-enum","squarespace-models-form"]})},"./src/main/webapp/universal/scripts-v6/models/slice-demo-newsletter-form.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-models-slice-demo-newsletter-form",function(t){t.namespace("Squarespace.Models");t.Squarespace.Models.SliceDemoNewsletterForm=t.Base.create("SliceDemoNewsletterForm",t.Squarespace.Models.Form,[],{},{ATTRS:{type:{value:t.Squarespace.FormType.SLIDE},name:{value:i("Newsletter Form")},fields:{value:[{type:"email",id:"overlayNewsletterEmail",locked:true,title:i("Email Address"),description:"",placeholder:i("Email Address"),required:true,email:true}]},disclaimerMessage:{value:{html:i("We respect your privacy.")},setter:function(e){if(t.Lang.isString(e))return t.JSON.parse(e);return e}}}})},"1.0",{requires:["base","squarespace-enum","squarespace-models-form"]})},"./src/main/webapp/universal/scripts-v6/models/slice-list.js":function(e,t){YUI.add("squarespace-models-slice-list",function(n){n.namespace("Squarespace.Models");n.Squarespace.Models.SliceList=n.Base.create("SliceList",n.Squarespace.Models.ModelList,[],{model:n.Squarespace.Models.Slice,getByType:function(t){var a;var e=this.some(function(e){if(e.get("type")===t){a=e;return true}});!e&&false;return a},filterByTypes:function(t){return this.filter({asList:true},function(e){return-1!==t.indexOf(e.get("type"))})},updateForLayout:function(e,t){this._removeAndDestroyDemoSlices();this._addDemoSlices(e.get("sliceAreas"),t.get("id"))},_removeAndDestroyDemoSlices:function(){var e=this.filter({asList:true},function(e){return e.get("isDemo")});this.remove(e);e.each(function(e){e.destroy()})},_addDemoSlices:function(e,s){e.each(function(t){if(t.get("sliceType")===n.Squarespace.SliceType.TEMP_LOCK_INJECT)return;var e=this.some(function(e){return e.get("type")===t.get("sliceType")});if(!e){var a=t.get("demoSlice");var i=new n.Squarespace.Models.Slice(n.merge(a.toJSON(),{slideId:s,isDemo:true}));this.add(i)}}.bind(this))}},{})},"1.0",{requires:["base","squarespace-models-model-list","squarespace-models-slice","squarespace-util"]})},"./src/main/webapp/universal/scripts-v6/models/slice.js":function(e,t,a){YUI.add("squarespace-models-slice",function(s){s.namespace("Squarespace.Models");var n=s.Squarespace.Models.Slice=s.Base.create("Slice",s.Model,[s.Squarespace.ModelSync.REST],{root:s.Squarespace.API_ROOT+"slides/{slideId}/slices",url:s.Squarespace.API_ROOT+"slides/{slideId}/slices/{id}",initializer:function(){s.Do.after(function(){var e=s.Do.currentRetVal;e=e.replace("{slideId}",this.get("slideId"));return new s.Do.AlterReturn("Templating slideId.",e)},this,"getURL",this)},updateContentReferences:function(e){this.get("content").updateReferences(e)},save:function(a,i){if(s.Lang.isFunction(a)){i=a;a={}}this.get("content").saveReferences(s.bind(function(e,t){s.Lang.isValue(e)?s.Lang.isValue(i)&&i.call(this,e,t):n.superclass.save.call(this,a,function(e,t){this._resetClientAttrs();s.Lang.isFunction(i)&&i(e,t)}.bind(this))},this))},serialize:function(){var e=this.toJSON();delete e.content.acceptedTypes;return s.JSON.stringify(e)},parse:function(e){var t=n.superclass.parse.call(this,e);this.get("content").setAttrs(t.content);delete t.content;return t},toJSON:function(){var e=n.superclass.toJSON.call(this);e.content=e.content.toJSON();return e},renderPreview:function(e,i){return new s.Promise(s.bind(function(t,a){try{s.Data.post({json:true,url:s.Squarespace.API_ROOT+"slides/slice-preview",data:{slice:this.toJSON(),slideLayoutIdentifier:e,slideType:i},success:function(e){t(e)},failure:function(e){a(e)}},this)}catch(e){false}},this))},_resetClientAttrs:function(){this.get("content").resetClientAttrs()}},{ATTRS:{id:{value:null},slideId:{value:null},type:{value:null,validator:s.Squarespace.AttrValidators.isNullOrValueIn(s.Squarespace.SliceType)},content:{valueFn:function(){var e=this.get("type");return s.Squarespace.Models.SliceContent.Factory.create(e)},setter:function(e){var t=this.get("slideId");if(!(e instanceof s.Squarespace.Models.SliceContent.Base)){var a=this.get("type");e=s.merge({},e,{slideId:t});return s.Squarespace.Models.SliceContent.Factory.create(a,e)}e.set("slideId",t);return e},writeOnce:"initOnly"},isDemo:{value:false,validator:s.Squarespace.AttrValidators.isBoolean},isCompoundType:{getter:function(){var e=this.get("content");return e instanceof s.Squarespace.Models.SliceContent.Compound}},absoluteType:{getter:function(){if(this.get("isCompoundType"))return this.get("content").get("currentType");return this.get("type")}},absoluteContent:{getter:function(){var e=this.get("content");if(this.get("isCompoundType"))return e.get("currentContent");return e}}}})},"1.0",{requires:["base","event-custom","json","model","promise","squarespace-attr-validators","squarespace-enum","squarespace-model-sync-rest","squarespace-models-slice-content-base","squarespace-models-slice-content-factory","squarespace-models-slice-content-compound","squarespace-util"]})},"./src/main/webapp/universal/scripts-v6/models/slide-layout-list.js":function(e,t){YUI.add("squarespace-models-slide-layout-list",function(n){n.namespace("Squarespace.Models");var a=n.Squarespace.Models.SlideLayoutList=n.Base.create("SlideLayoutList",n.Squarespace.Models.ModelList,[],{model:n.Squarespace.Models.SlideLayout,url:n.Squarespace.API_ROOT+"slide-layouts",getURL:function(){var e=n.Squarespace.ModelSync.REST.prototype.getURL.apply(this,arguments);var t=e.split("?");var a=t[1];var i=n.Lang.isValue(a);var s=i?n.QueryString.parse(a):{};this.get("slide")?s.slideTypes=this.get("slide").get("type"):this.get("slideTypes")&&(s.slideTypes=this.get("slideTypes"));return t[0]+"?"+n.QueryString.stringify(s)},parse:function(e){var t=a.superclass.parse.call(this,e);t.forEach(function(e){e.sliceAreas=n.Object.values(e.sliceAreas)});return t},getByIdentifier:function(t){var a;var e=this.some(function(e){if(e.get("identifier")===t){a=e;return true}});!e&&false;return a},comparator:function(e){var t=e.get("status");var a=this.get("slide")?this.get("slide").get("layoutIdentifier"):"";var i=e.get("identifier");var s=e.get("category")+i;if(t===n.Squarespace.SlideLayoutStatus.ALPHA)return"z"+s;if(t===n.Squarespace.SlideLayoutStatus.BETA)return"y"+s;if(i===a)return"0";return s}},{ATTRS:{slide:{value:null,validator:n.Squarespace.AttrValidators.isNullOrInstanceOf(n.Squarespace.Models.Slide)},slideTypes:{}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-enum","squarespace-models-model-list","squarespace-models-slide","squarespace-models-slide-layout","squarespace-util"]})},"./src/main/webapp/universal/scripts-v6/models/slide-layout.js":function(e,t){YUI.add("squarespace-models-slide-layout",function(a){a.namespace("Squarespace.Models");var t=a.Squarespace.Models.SlideLayout=a.Base.create("SlideLayout",a.Model,[a.Squarespace.ModelSync.REST],{root:a.Squarespace.API_ROOT+"slide-layouts",hasSliceType:function(t){a.Lang.isArray(t)||(t=[t]);return this.get("sliceAreas").some(function(e){return-1!==t.indexOf(e.get("sliceType"))})},toJSON:function(){var e=t.superclass.toJSON.call(this);e.sliceAreas=e.sliceAreas.toJSON();return e}},{ATTRS:{identifier:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString,writeOnce:"initOnly"},sliceAreas:{valueFn:function(){return new a.Squarespace.Models.SliceAreaList},setter:function(e){if(!(e instanceof a.Squarespace.Models.SliceAreaList))return new a.Squarespace.Models.SliceAreaList({items:e});return e},writeOnce:"initOnly"},name:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString,writeOnce:"initOnly"},category:{value:null,validator:a.Squarespace.AttrValidators.isNullOrValueIn(a.Squarespace.SlideLayoutCategory),writeOnce:"initOnly"},status:{value:null,validator:a.Squarespace.AttrValidators.isNullOrValueIn(a.Squarespace.SlideLayoutStatus),writeOnce:"initOnly"},typekitFonts:{value:[],validator:a.Squarespace.AttrValidators.isArray},webFonts:{value:[],validator:a.Squarespace.AttrValidators.isArray}}})},"1.0",{requires:["base","model","squarespace-attr-validators","squarespace-enum","squarespace-model-sync-rest","squarespace-models-slice-area-list","squarespace-util"]})},"./src/main/webapp/universal/scripts-v6/models/slide-summary.js":function(e,t){YUI.add("squarespace-models-slide-summary",function(t){t.namespace("Squarespace.Models");var o=t.Squarespace.Models.SlideSummary=t.Base.create("SlideSummary",t.Model,[t.Squarespace.ModelSync.REST],{initializer:function(e){t.Lang.isValue(e.url)||console.error("Squarespace.Models.ResolvedSlideTweaks: Must pass contextual URL on initialize.")},parse:function(e){var t=o.superclass.parse.call(this,e);var a=t.slide;var i=t.slices;var s=t.sliceContentReferences;var n=this.get("slide");var r=this.get("slices");n.setAttrs(a);r.reset(i);r.invoke("updateContentReferences",s);delete t.slide;delete t.slices;delete t.sliceContentReferences;return t}},{ATTRS:{slide:{valueFn:function(){return new t.Squarespace.Models.Slide({type:this.get("slideType"),collectionId:this.get("collectionId")})},validator:t.Squarespace.AttrValidators.isInstanceOf(t.Squarespace.Models.Slide),writeOnce:"initOnly"},slices:{valueFn:function(){return new t.Squarespace.Models.SliceList},validator:t.Squarespace.AttrValidators.isInstanceOf(t.Squarespace.Models.SliceList),writeOnce:"initOnly"},slideType:{value:null,validator:t.Squarespace.AttrValidators.isNullOrValueIn(t.Squarespace.SlideType),writeOnce:"initOnly"},collectionId:{value:null}}})},"1.0",{requires:["base","model","squarespace-attr-validators","squarespace-enum","squarespace-model-sync-rest","squarespace-models-slice-list","squarespace-models-slide","squarespace-util"]})},"./src/main/webapp/universal/scripts-v6/models/slide.js":function(e,t){YUI.add("squarespace-models-slide",function(s){s.namespace("Squarespace.Models");s.Squarespace.Models.Slide=s.Base.create("Slide",s.Model,[s.Squarespace.ModelSync.REST],{root:s.Squarespace.API_ROOT+"slides",url:s.Squarespace.API_ROOT+"slides/{id}",renderPreview:function(e,i){return new s.Promise(s.bind(function(t,a){try{s.Data.post({headers:{"Content-Type":"application/json"},url:s.Squarespace.API_ROOT+"slides/preview",data:s.JSON.stringify({slide:this.toJSON(),slices:e.toJSON(),useDefaultTweaks:i}),success:function(e){t(e)},failure:function(e){a(e)}},this)}catch(e){console.error(e)}},this))}},{ATTRS:{id:{value:null},type:{value:null,validator:s.Squarespace.AttrValidators.isNullOrValueIn(s.Squarespace.SlideType),writeOnce:"initOnly"},collectionId:{value:null},createdOn:{value:null},updatedOn:{value:null},layoutIdentifier:{value:null,validator:s.Squarespace.AttrValidators.isNullOrString}}})},"1.0",{requires:["base","model","promise","squarespace-attr-validators","squarespace-enum","squarespace-model-sync-rest","squarespace-util"]})},"./src/main/webapp/universal/scripts-v6/models/social-data.js":function(e,t){YUI.add("squarespace-models-social-data",function(e){var t=e.Base.create("social-data",e.Model,[e.Squarespace.ModelSync.REST],{url:"/api/social-search/activity",isNew:function(){return this.get("preview")&&!e.Lang.isValue(this.get("previewCollectionId"))||!this.get("preview")&&!e.Lang.isValue(this.get("socialCollectionId"))}},{ATTRS:{socialSearch:{},socialCollectionId:{},previewCollectionId:{},searchFlag:{},preview:{}}});e.namespace("Squarespace.Models").SocialData=t},"1.0",{requires:["base","model","squarespace-attr-validators","squarespace-model-sync-rest"]})},"./src/main/webapp/universal/scripts-v6/models/store-item.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/frontend/packages/enums/ProductTypes.js");YUI.add("squarespace-models-store-item",function(e){e.namespace("Squarespace.Models");e.Squarespace.Models.StoreItem=e.Base.create("StoreItem",e.Squarespace.Models.StructuredContent,[],{},{ATTRS:{_type:{value:"StoreItem",validator:function(e){return"StoreItem"===e},readOnly:true},productType:{value:s.PHYSICAL,validator:e.Squarespace.AttrValidators.isValueIn(s)},priceCents:{value:0,validator:e.Squarespace.AttrValidators.isNumber},salePriceCents:{value:0,validator:e.Squarespace.AttrValidators.isNumber},onSale:{value:false,validator:e.Squarespace.AttrValidators.isBoolean},variants:{value:[],validator:e.Squarespace.AttrValidators.isArray},originalVariants:{value:[],validator:e.Squarespace.AttrValidators.isArray},variantOptionOrdering:{value:[],validator:e.Squarespace.AttrValidators.isArray},additionalFieldsFormId:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},customAddButtonText:{value:i("Add to Cart"),validator:e.Squarespace.AttrValidators.isString},useCustomAddButtonText:{value:false,validator:e.Squarespace.AttrValidators.isBoolean},additionalFieldsForm:{value:null},isSubscribable:{value:false,validator:e.Squarespace.AttrValidators.isBoolean},relatedCategories:{value:[],validator:e.Squarespace.AttrValidators.isArray},relatedCategoryIds:{value:[],validator:e.Squarespace.AttrValidators.isArray}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},"./src/main/webapp/universal/scripts-v6/models/structured-content.js":function(e,t){YUI.add("squarespace-models-structured-content",function(e){e.namespace("Squarespace.Models");e.Squarespace.Models.StructuredContent=e.Base.create("StructuredContent",e.Model,[],{},{ATTRS:{_type:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString,writeOnce:"initOnly"}}})},"1.0",{requires:["base","model","squarespace-attr-validators"]})},"./src/main/webapp/universal/scripts-v6/models/template-installation.js":function(e,t,a){var n=a("./src/main/webapp/universal/src/apps/App/shared/stores/TemplateInstallationsStore.js");YUI.add("squarespace-models-template-installation",function(i){var s=i.namespace("Squarespace.Models").TemplateInstallation=i.Base.create("TemplateInstallation",i.Model,[i.Squarespace.ModelSync.REST],{url:"/api/template-installations/{id}",root:"/api/template-installations",getThumbnailAssetUrl:function(e){var t=this.get("templateWebsiteTaxonomy.thumbnailAssetUrl");i.Lang.isValue(t)?t+="?format="+e:t="/universal/images-v6/configuration/no-image.png";return t},serialize:function(){var e=this.toJSON();delete e.templateWebsite;return i.JSON.stringify(e)}},{ATTRS:{templateId:{validator:i.Lang.isString},displayName:{valueFn:function(){var e=this.get("templateWebsiteTaxonomy.displayName");i.Lang.isValue(e)||(e=this.get("templateWebsite.siteTitle"));return e}},isPreviewTemplate:{getter:function(){var e=n.getState().previewInstallationId;return e===this.get("id")}},isLiveTemplate:{getter:function(){var e=n.getState().liveInstallationId;return e===this.get("id")}}},createWithTemplateWebsiteIdentifier:function(e){return new i.Promise(function(t,a){i.Data.post({url:"/api/template-installations/addTemplate",data:{templateWebsiteIdentifier:e},success:function(e){t(new s(e))},failure:function(e){a(e)}})})}});var e=i.Base.create("TemplateInstallationList",i.ModelList,[i.ModelSync.REST],{model:s,url:"/api/template-installations",initializer:function(){},sort:function(){var e=this.toArray();var t=e.find(function(e){return e.get("isPreviewTemplate")});if(t){e.splice(e.indexOf(t),1);e.unshift(t)}var a=e.find(function(e){return e.get("isLiveTemplate")});if(a){e.splice(e.indexOf(a),1);e.unshift(a)}this._defResetFn({models:e,src:"sort"});return this},getPreviewInstallation:function(){var e=n.getState().previewInstallationId;return this.getById(e)}},{ATTRS:{}});var t=[];if(Static.SQUARESPACE_CONTEXT){t.push(new s(Static.SQUARESPACE_CONTEXT.templateInstallation));Static.SQUARESPACE_CONTEXT.previewTemplateInstallation&&t.push(new s(Static.SQUARESPACE_CONTEXT.previewTemplateInstallation))}i.namespace("Squarespace.Singletons");i.Squarespace.Singletons.TemplateInstallationListCache=new e({items:t})},"1.0",{requires:["base","model","model-list","promise","squarespace-model-sync-rest"]})},"./src/main/webapp/universal/scripts-v6/models/template-navigation-list.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/universal/src/apps/App/shared/stores/SiteNavigationStore.js");var n=a("./src/main/webapp/universal/src/apps/App/shared/stores/TemplateStore.js");var o=a("./common/temp/node_modules/lodash/cloneDeep.js");var l=a("./src/main/webapp/universal/src/apps/App/shared/utils/MemberAreasFeatureUtils.ts");var c=a("./src/main/webapp/universal/src/apps/App/shared/stores/FeaturesStore.js");var u=a("./src/main/webapp/universal/src/shared/constants/SubscriptionTypes.js");var d=a("./src/main/webapp/universal/src/shared/constants/Constants.js");var p=a("./src/main/webapp/universal/src/shared/constants/HelpLinks.js");YUI.add("squarespace-models-template-navigation-list",function(r){var e=r.Base.create("TemplateNavigation",r.Model,[],{toJSON:function(){var e=this.constructor.superclass.toJSON.call(this);return e},_setItemList:function(e){r.Lang.isObject(e)&&(e=this.constructor.ATTRS.itemList.valueFn.call(this));var i=new r.Squarespace.Models.NavigationItemList;i.setTemplateNavigation(this);r.Array.forEach(e,function(e){var t=r.clone(e.children,true);delete e.children;var a=i.add(e);a.set("children",t||[])},this);return i},setTemplateNavigationList:function(e){this._templateNavigationList=e},getTemplateNavigationList:function(){return this._templateNavigationList}},{ATTRS:{index:{validator:r.Lang.isBoolean},name:{},title:{},itemList:{lazyAdd:false,value:[],valueFn:function(){var e=this.get("name");var t=s.getState()[e];var a=t&&t.links?o(t.links):[];return a},setter:"_setItemList"},acceptTypes:{valueFn:function(){var t=["subscription","gallery-block","template-page"];var e=n.getState().collectionConfigs;return r.Array.filter(r.Object.keys(e),function(e){return-1===t.indexOf(e)}).concat(["link"])}},emptyMessage:{valueFn:function(){return i("This navigation is empty")}}}});var t=r.Base.create("TemplateNavigationList",r.ModelList,[],{model:e,initializer:function(){this._bootstrapNewList();n.listen(function(){if(n.getState().installationId!==this.get("installationId")){this.reset(n.getState().navigations);this.set("installationId",n.getState().installationId);this.set("templateId",n.getState().id)}}.bind(this));this.after("reset",this._bootstrapNewList);this.after("add",function(e){this._bootstrapReference(e.model)},this)},isValidNavigationName:function(e){return r.Lang.isValue(this.getNavigation(e))},getNavigation:function(t){var e=this.toArray();return r.Array.find(e,function(e){return e.get("name")===t})},destructor:function(){if(this._memberAreaNavigation){this._memberAreaNavigation.destroy();this._memberAreaNavigation=null}this._hiddenNavigation.destroy();this._hiddenNavigation=null},_bootstrapReference:function(e){e.setTemplateNavigationList(this)},_bootstrapNewList:function(){this._createMemberAreaNavigation();this._createHiddenNavigation();this.each(function(e){this._bootstrapReference(e)},this)},_createMemberAreaNavigation:function(){if(!l.showInPagesPanel())return;this._memberAreaNavigation&&this._memberAreaNavigation.destroy();var e={index:false,name:d.memberAreaNavigationName,title:i("Member Areas"),className:"member-areas",emptyMessage:i("There are no member areas."),description:i('Create content for members only. <a href="{kbLinkAction}" target="_blank">Learn more</a>',{kbLinkAction:p.MEMBER_AREAS_INTRODUCTION}),acceptTypes:[d.MEMBER_AREA_NAVIGATION_TYPE]};var t=r.Squarespace.Context.getInstance().get("website");var a=t.get("siteStatus.value");a===r.Squarespace.StatusConstants.INTERNAL||c.isAddOnEnabled(u.MEMBER_AREAS)||(e.icon="ma-feature-gate");this._memberAreaNavigation=this.add(e)},_createHiddenNavigation:function(){this._hiddenNavigation&&this._hiddenNavigation.destroy();this._hiddenNavigation=this.add({index:false,name:d.hiddenNavigationName,title:i("Not Linked"),emptyMessage:i("There are no unlinked pages."),description:i('These pages are public unless they’re disabled or password-protected, but they don’t appear in the navigation. Search engines can also discover them. <a href="{kbNotLinkAction}" target="_blank">Learn more</a>',{kbNotLinkAction:p.PAGE_NOT_LINKED})})},getHiddenNavigation:function(){return this._hiddenNavigation},getMemberAreaNavigation:function(){return this._memberAreaNavigation},_getNavigationItemForCollectionIdFromList:function(e,t){var a=e.toArray();for(var i=0;i<a.length;i++){if(a[i].get("collectionId")===t)return a[i];var s=a[i].get("children");if(s&&!s.isEmpty()){var n=this._getNavigationItemForCollectionIdFromList(s,t);if(r.Lang.isValue(n))return n}}},getItemByCollectionId:function(e){var t=this.toArray();for(var a=0;a<t.length;a++){var i=this._getNavigationItemForCollectionIdFromList(t[a].get("itemList"),e);if(r.Lang.isValue(i))return i}},getNavigationItemCount:function(){return this.get("itemList").reduce(function(e,t){return e+t.getTotalSize()},0)},getHiddenNavigationItemList:function(){return this.getHiddenNavigation().get("itemList")}},{ATTRS:{templateId:{},installationId:{},acceptTypes:{value:[]}}});if(r.Squarespace.Utils.isInDamaskFrame())r.Squarespace.Singletons.TemplateNavigationList=r.Object.getValue(r.config.win.top,"Y.Squarespace.Singletons.TemplateNavigationList".split("."));else{var a=r.Object.getValue(Static,["SQUARESPACE_CONTEXT","template","navigations"]);a&&(r.Squarespace.Singletons.TemplateNavigationList=new t({items:a,templateId:r.Object.getValue(Static,["SQUARESPACE_CONTEXT","template","id"]),installationId:r.Object.getValue(Static,["SQUARESPACE_CONTEXT","installationId","id"])}))}},"1.0",{requires:["base","model","squarespace-damask-context-globals","squarespace-models-navigation","squarespace-util"]})},"./src/main/webapp/universal/scripts-v6/models/tweet.js":function(e,t){YUI.add("squarespace-models-tweet",function(e){e.namespace("Squarespace.Models");e.Squarespace.Models.Tweet=e.Base.create("Tweet",e.Squarespace.Models.StructuredContent,[],{},{ATTRS:{_type:{value:"Tweet",validator:function(e){return"Tweet"===e},readOnly:true},tweetId:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},timeZone:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},accountId:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},displayName:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},accountName:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},tweet:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},profileImageUrl:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},profileImageUrlHttps:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},userLocation:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},"./src/main/webapp/universal/scripts-v6/models/website-settings.js":function(e,t){YUI.add("squarespace-models-website-settings",function(s){var a=s.namespace("Squarespace.Models").WebsiteSettings=s.Base.create("WebsiteSettings",s.Model,[s.Squarespace.ModelSync.REST],{url:"/api/settings",root:"/api/settings",serialize:function(){var e=this.toJSON();e&&s.Lang.isObject(e.tutorialsCompleted)?e.tutorialsCompleted=s.Object.keys(e.tutorialsCompleted):e.tutorialsCompleted=[];"system-default"===e.notFoundPageId&&(e.notFoundPageId=null);return s.JSON.stringify(e)},parse:function(e){var t=a.superclass.parse.apply(this,arguments);t=s.merge({contactPhoneNumber:""},t);return t}},{setNewOwner:function(e,t,a,i){s.Data.put({url:s.Squarespace.API_ROOT+"settings/owner",data:{ownerId:e,password:t},success:function(){s.Squarespace.Context.getInstance().get("websiteSettings").set("ownerId",e);a()},failure:i},this)},ATTRS:{websiteId:{},ownerId:{},tutorialsCompleted:{},lastAgreedTermsOfService:{},type:{},content:{},goals:{},subject:{},country:{},state:{},markdownMode:{},simpleLikingEnabled:{},defaultPostFormat:{},commentLikesAllowed:{},commentAnonAllowed:{},commentThreaded:{},commentApprovalRequired:{},commentAvatarsOn:{},commentSortType:{},commentFlagThreshold:{},commentEnableByDefault:{},commentDisableAfterDaysDefault:{},disqusShortname:{},notFoundPageId:{},homepageTitleFormat:{},collectionTitleFormat:{},itemTitleFormat:{},commentsEnabled:{},amazonAssociateTag:{},contactPhoneNumber:{},contactEmail:{},hours:{},allowSquarespacePromotion:{},storeSettings:{},useEscapeKeyToLogin:{},configurationMenuItems:{},socialAccountDisplayOrder:{validator:s.Lang.isNullOrArray},announcementBarSettings:{value:{}},mobileInfoBarSettings:{value:{}},pinterestOverlayOptions:{value:{}},popupOverlaySettings:{value:{}}}})},"1.0",{requires:["base","model","squarespace-context","squarespace-model-sync-rest"]})},"./src/main/webapp/universal/scripts-v6/models/website.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/constants/Constants.js");YUI.add("squarespace-models-website",function(a){var t=a.namespace("Squarespace.Models");t.Website=a.Base.create("website",a.Model,[a.Squarespace.ModelSync.REST],{url:a.Squarespace.REST_API_ROOT+"websites/mine",_parsePlanResponse:function(e){var t=e.results;return a.Array.map(t,function(e){var t=e.plan;var a=e.period;return{disabled:e.disabled,planLevel:{genus:e.plan.genus,displayName:t.displayName,allowedPeriods:t.allowedPeriods,value:t.plan,featureLevel:t.featureLevel},planPeriod:{displayName:a.displayName,intervalDays:a.intervalDays,value:a.period},price:e.price,subtotal:e.subtotal,tax:e.tax,taxRate:e.taxRate,total:e.total}})},serialize:function(){var e=this.toJSON();delete e.shareButtonOptions;delete e.logoImage;delete e.mobileLogoImage;delete e.socialLogoImage;delete e.faviconItem;return a.JSON.stringify(e)},parse:function(){var e=t.Website.superclass.parse.apply(this,arguments);if(a.Lang.isObject(e)){e.hasPassword?e.password=i.PASSWORD_MASK:e.password="";if(!e.logoImageId){e.logoImageId=null;e.logoImage=null}if(!e.mobileLogoImageId){e.mobileLogoImageId=null;e.mobileLogoImage=null}if(!e.socialLogoImageId){e.socialLogoImageId=null;e.socialLogoImage=null}if(!e.faviconItemId){e.faviconItemId=null;e.faviconItem=null}}return e},_imageSetterFactory:function(t){return a.bind(function(e){a.Lang.isObject(e)?e instanceof a.Squarespace.Models.ContentItem?this.set(t,e.get("id"),{silent:true}):this.set(t,e.id,{silent:true}):this.set(t,null,{silent:true})},this)}},{ATTRS:{logoImage:{setter:function(e){return this._imageSetterFactory("logoImageId")(e)}},mobileLogoImage:{setter:function(e){return this._imageSetterFactory("mobileLogoImageId")(e)}},socialLogoImage:{setter:function(e){return this._imageSetterFactory("socialLogoImageId")(e)}},faviconItem:{setter:function(e){return this._imageSetterFactory("faviconItemId")(e)}}}})},"1.0",{requires:["base","model","squarespace-model-sync-rest","squarespace-models-plan","squarespace-util-authenticated"]})},"./src/main/webapp/universal/scripts-v6/multi-loader.js":function(e,t,a){YUI.add("squarespace-multi-loader",function(a){a.namespace("Squarespace");a.Squarespace.MultiLoader=a.Base.create("MultiLoader",a.Base,[],{initializer:function(){this.publish("load")},load:function(){var t=new a.Parallel;a.Array.each(this.get("loadables"),function(e){e.load(t.add())});t.done(a.bind(function(){this.fire("load")},this))}},{ATTRS:{loadables:{value:[],validator:function(e){var t=!a.Array.some(e,function(e){return!a.Lang.isFunction(e.load)});if(t)return true;false;return false},writeOnce:"initOnly"}}})},"1.0",{requires:["base","parallel"]})},"./src/main/webapp/universal/scripts-v6/navigation/list-utils.js":function(e,t,a){var i=a("./src/main/webapp/frontend/packages/enums/CollectionTypes.js");var n=a("./src/main/webapp/frontend/packages/enums/IndexType.js");YUI.add("squarespace-navigation-list-utils",function(s){s.namespace("Squarespace.Navigation");s.Squarespace.Navigation.ListUtils={refreshNavigationList:function(){s.Data.get({url:"/api/commondata/GetSiteLayout",success:function(e){var i={};s.Squarespace.Singletons.TemplateNavigationList.each(function(e){i[e.name]=e});e.layout.forEach(function(e){var t=i[e.identifier];if(t){var a={};t.itemList.forEach(function(e){var t=e.collectionId;t?a[t]=e:a[e.externalLink.url]=e});e.links.forEach(function(e){s.Lang.isValue(e.collectionId)&&s.Object.hasKey(a,e.collectionId)||s.Object.getValue(e,["externalLink","url"])&&s.Object.hasKey(a,e.externalLink.url)||t.itemList.push(e)})}else s.Squarespace.Logger.log("Missing Navigation",{message:'Could not locate "'+e.identifier+'" in Y.Squarespace.NavigationUIUtils',action:"refreshNavigationList",fileName:"content-manager/navigation-ui-utils.js"})})}})},getParentCollection:function(e){var t=s.Squarespace.Singletons.TemplateNavigationList.getItemByCollectionId(e.get("id"));if(!t){false;return false}var a=t.getFolderItemList();if(!a)return false;var i=a.getNavigationItem();if(!i||!i.get("collectionId"))return false;return i.get("collection")},getCollectionIndexInIndex:function(e){var t=s.Squarespace.Singletons.TemplateNavigationList.getItemByCollectionId(e.get("id"));if(!t)return-1;var a=t.getFolderItemList();if(!a)return-1;var i=a.getNavigationItem();if(!i||!i.get("collectionId"))return-1;return i.get("children")._items.indexOf(t)},indexCollectionRequiresReload:function(e){!this.isCollectionAnIndex(e)&&this.isCollectionInIndex(e)&&(e=s.Squarespace.Navigation.ListUtils.getParentCollection(e));var t=e.getTemplateConfiguration();var a=t.get("indexType");return a===n.FULL_URL||!s.Lang.isValue(a)},isCollectionInIndex:function(e){var t=s.Squarespace.Navigation.ListUtils.getParentCollection(e);if(!t)return false;return s.Squarespace.Navigation.ListUtils.isCollectionAnIndex(t)},isCollectionAnIndex:function(e){if(!e)return false;var t=e.getTemplateConfiguration();if(t.get("index"))return true;var a=t.get("indexType");var i=s.Object.values(n);return-1!==i.indexOf(a)},isCollectionAStackedIndex:function(e){if(!e)return false;var t=e.getTemplateConfiguration();return t.get("indexType")===n.STACKED},isCollectionAPortfolio:function(e){if(!e)return false;var t=e.getTemplateConfiguration();return t.get("collectionType")===i.PORTFOLIO||t.get("indexType")===n.GRID},isCollectionInPortfolio:function(e){if(!e)return false;var t=s.Squarespace.Navigation.ListUtils.getParentCollection(e);if(!t)return false;return s.Squarespace.Navigation.ListUtils.isCollectionAPortfolio(t)},isCollectionInStackedIndex:function(e){if(!e)return false;var t=s.Squarespace.Navigation.ListUtils.getParentCollection(e);if(!t)return false;return s.Squarespace.Navigation.ListUtils.isCollectionAStackedIndex(t)},getIndexCollectionForCollection:function(e){if(this.isCollectionAnIndex(e))return e;if(this.isCollectionInIndex(e)){var t=s.Squarespace.Navigation.ListUtils.getParentCollection(e);return t}return null}}},"1.0",{requires:["squarespace-data","squarespace-logger","squarespace-models-template-navigation-list"]})},"./src/main/webapp/universal/scripts-v6/node-flyout.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/utils/mediaQueries.js");var s=a("./common/temp/node_modules/@sqs/styles/variables/baseDamask.js");YUI.add("squarespace-node-flyout",function(l){l.namespace("Squarespace.Animations").Flyout=l.Base.create("flyoutPlugin",l.Plugin.Base,[],{initializer:function(e){this._mask=l.Node.create('<div class="flyout-animation-wrapper sqs-flyout-mask"></div>');this._mask.setStyles({position:"fixed",overflow:this.get("overflow")});this._mask.setStyle("z-index","300001");this._mask.setStyle("zIndex","300001");this._isShowing=false;this._isHiding=false},destructor:function(){this._anim&&this._anim.stop().destroy();this._mask.remove(true);l.detachAll(this.get("id")+"|*")},_onScroll:function(e){var t=this.get("host");(e.target.contains(t)||e.currentTarget.contains(t))&&this._updateMaskPosition()},_onResize:function(){this._updateMaskPosition()},show:function(){this.get("visible")||this._isShowing||this._animateFlyout(true)},hide:function(){this.get("visible")&&!this._isHiding&&this._animateFlyout(false)},_measureNode:function(e){return l.Squarespace.NodeUtils.measureNode(e)},_animateFlyout:function(e){var t=this._mask,a=this.get("node"),i=this._measureNode(a),s=this._getInitialFlyoutOffset();this._updateMaskPosition();if(this._anim){this._anim.stop(true);this._anim=null}if(e){t.setStyles({height:i.height,width:i.width+1});a.setStyles({position:"absolute",top:s.yOffset,left:s.xOffset});t.appendChild(a);var n=this.get("renderTarget")||l.one("body");n.appendChild(t)}this._anim=new l.Anim({duration:this.get("duration"),easing:this.get("easing"),node:a,to:{top:e?0:s.yOffset,left:e?0:s.xOffset}});if(this.get("animateOpacity")){this._anim.set("from.opacity",e?0:1);this._anim.set("to.opacity",e?1:0)}this._anim.on(this._yuid+"|end",function(){this._anim=null;if(e){this._isShowing=false;this._mousewheelEvent=l.on(this.get("id")+"|mousewheel",this._onScroll,this);this._resizeEvent=l.one(window).on(this.get("id")+"|resize",this._onResize,this)}else{this._isHiding=false;a.remove();t.remove();if(this._mousewheelEvent){this._mousewheelEvent.detach();this._mousewheelEvent=null}if(this._resizeEvent){this._resizeEvent.detach();this._resizeEvent=null}}this.set("visible",e);this.fire(e?"shown":"hidden",{flyout:a});this.get("host").fire((true,"shown"),{flyout:a})},this);e?this._isShowing=true:this._isHiding=true;a.inDoc()&&this._anim.run()},_updateMaskPosition:function(){if(!this._mask)return;var e=this._mask,t=this._getIntendedMaskPosition();i.isSubDesktop()&&window.innerHeight<t.y?e.setStyles({left:t,top:null,bottom:s.GRID_PX/2+"px"}):e.setStyles({left:t.x,top:t.y});return t},_getInitialFlyoutOffset:function(){var e=l.Squarespace.Animations.Flyout,t=this.get("alignment"),a=this._measureNode(this.get("node"));var i,s;switch(t){case e.LT:case e.LC:case e.LR:i=a.width;break;case e.TL:case e.TC:case e.TR:case e.BL:case e.BC:i=0;break;case e.RT:case e.RC:case e.RB:i=-1*a.width;break;default:throw new Error("Flyout: This should never happened, check your alignment settings")}switch(t){case e.LT:case e.LC:case e.LB:case e.RT:case e.RC:case e.RB:s=0;break;case e.BL:case e.BC:case e.BR:s=-1*a.height;break;case e.TL:case e.TC:case e.TR:s=a.height;break;default:throw new Error("Flyout: This should never happened, check your alignment settings")}return{xOffset:i,yOffset:s}},_getIntendedMaskPosition:function(){var e=l.Squarespace.Animations.Flyout,t=this.get("alignment"),a=this.get("host").get("region"),i=this._measureNode(this.get("node"));var s,n;var r=l.DOM.docScrollY(),o=l.DOM.docScrollX();a.top-=r;a.bottom-=r;a.left-=o;a.right-=o;switch(t){case e.RT:case e.RC:case e.RB:s=a.right;break;case e.LT:case e.LC:case e.LB:s=a.left-i.width;break;case e.TL:case e.BL:s=a.left;break;case e.TC:case e.BC:s=a.left+a.width/2-i.width/2;break;case e.TR:case e.BR:s=a.right-i.width;break;default:throw new Error("Flyout: This should never happened, check your alignment settings")}switch(t){case e.TL:case e.TC:case e.TR:n=a.top-i.height;break;case e.LT:case e.RT:n=a.top;break;case e.LC:case e.RC:n=a.top+a.height/2-i.height/2;break;case e.LB:case e.RB:n=a.bottom-i.height;break;case e.BL:case e.BC:case e.BR:n=a.bottom;break;default:throw new Error("Flyout: This should never happened, check your alignment settings")}return{x:s,y:n}}},{NS:"flyoutPlugin",TL:"tl",TC:"tc",TR:"tr",RT:"rt",RC:"rc",RB:"rb",BC:"bc",BL:"bl",BR:"br",LT:"lt",LC:"lc",Lb:"lb",ATTRS:{duration:{value:.3,validator:l.Lang.isNumber},easing:{value:l.Easing.easeOutStrong},alignment:{value:"rt",validator:function(e){var t=l.Squarespace.Animations.Flyout;switch(e){case t.TL:case t.TC:case t.TR:case t.LT:case t.RT:case t.LC:case t.RC:case t.LB:case t.RB:case t.BL:case t.BC:case t.BR:return true;default:false;return false}}},node:{value:null},animateOpacity:{value:true},renderTarget:{valueFn:function(){var e=this.get("host");if(e instanceof l.Node&&e.ancestor("body"))return e.ancestor("body");return l.one("body")}},overflow:{value:"hidden"},visible:{value:false}}})},"1.0",{requires:["base","node","plugin","squarespace-node-utils"]})},"./src/main/webapp/universal/scripts-v6/node-utils.js":function(e,t){YUI.add("squarespace-node-utils",function(n){n.namespace("Squarespace.NodeUtils");n.Squarespace.NodeUtils={measureNode:function(e){var t=e.inDoc();if(!t){e.setStyle("visibility","hidden");n.one("body").appendChild(e)}var a=e.cloneNode(true);a.setStyles({visibility:"hidden",display:"block",position:"absolute"});e.insert(a,"after");var i=a.get("offsetHeight");var s=a.get("offsetWidth");a.remove(true);if(!t){e.remove();e.setStyle("visibility",null)}return{height:i,width:s}},getClosestScrollingAncestor:function(e){return e.ancestor(n.Squarespace.NodeUtils.isScrollable,true,"body")},isScrollable:function(e){var t=getComputedStyle(e.getDOMNode()).overflowY;return"auto"===t||"scroll"===t}}},"1.0",{requires:[]})},"./src/main/webapp/universal/scripts-v6/object-builder.js":function(e,t,a){var l=a("./common/temp/node_modules/lodash/get.js");var m=a("./src/main/webapp/universal/src/shared/utils/error-reporter/global-sentry.ts");YUI.add("squarespace-object-builder",function(f){var a=f.namespace("Squarespace.StringTemplate");a.filters={lower:function(e){return(e||"").toLowerCase()},capitalize:function(e){if(e.length<=1)return e;return e.charAt(0).toUpperCase()+e.slice(1)},withIndefiniteArticle:function(e){false;var t=["a","e","i","o","u"];if(0===e.length)return e;if(-1!==t.indexOf(e.charAt(0).toLowerCase()))return"an "+e;return"a "+e}};function e(e,h,g){g=f.merge(a.filters,g);var t=/\{(\s*)([^\s|]+)((?:\|[^}]+)?)(\s*)\}/g;return e.replace(t,function e(t,a,i,s,n){var r=h[i];var o=false;"undefined"===typeof r&&(o=true);if(s)try{var l=s.split("|").filter(function(e){return e});for(var c=0,u=l.length;c<u;c++){var d=l[c].split(/[:,\s]+/g);var p=d.shift();if(p)if(g[p])r=g[p](r,d,h);else{if(!("'"===p[0]&&"'"===p[p.length-1]||'"'===p[9]&&'"'===p[p.length-1]))throw new Error("Unknown filter: `"+p+'` in "'+t+'"');r=r||p.slice(1,-1)}}}catch(e){m.captureException(e);return t}if(o&&!r&&false)try{throw new Error("Template var `"+i+"` not found in context. String: "+t)}catch(e){console.error(e);m.captureException(e)}return a+(r||"")+n})}a.template=e;function v(){var e=Array.prototype.slice.call(arguments);var t=e.shift();var a=e[e.length-1];var i="prependArrays"===a;"prependArrays"===a||"appendArrays"===a?e.pop():a=null;for(var s=0,n=e.length;s<n;s++)if(e[s])for(var r in e[s])a&&e[s][r]&&f.Lang.isArray(e[s][r])?t[r]=(i?e[s][r]:t[r]||[]).concat((i?t[r]:e[s][r])||[]):t[r]=e[s][r];return t}function r(e,t){if(e instanceof f.Base)return;for(var a in e){if(!Object.prototype.hasOwnProperty.call(e,a))continue;if(e[a]instanceof f.Base)continue;if(e[a]instanceof f.Node)continue;if(f.Lang.isFunction(e[a]))continue;var i=e[a];for(var s=0;s<t.length;s++){if("undefined"===typeof t[s].test||t[s].test(e[a],a,e)){t[s].each&&t[s].each(e[a],a,e);t[s].map&&(e[a]=t[s].map(e[a],a,e))}if("undefined"===typeof e[a])break}null===e[a]||"object"!==typeof e[a]||i.$dontRecurse||r(e[a],t);if(e[a]instanceof Array)for(var n=0;n<t.length;n++)("undefined"===typeof t[n].postTest||t[n].postTest(e[a]))&&t[n].post&&(e[a]=t[n].post(e[a],a,e))}return e}function s(e,t,m){var a={include:{test:function(e){return e&&e.$include},map:function(e){var t;var a=e.$include;f.Lang.isArray(a)||f.Lang.isObject(a[0])||(a=[a]);for(var i=0,s=a.length;i<s;i++){var n=a[i];var r;if("string"===typeof n){var o=n.split(".");r=m;for(var l=0,c=o.length;l<c;l++){if(!r[o[l]])throw new Error("Bad path `"+n+"`: `"+o[l]+"` not found.");r=f.clone(r[o[l]])}}else{if("object"===typeof n)for(var u in n)if("string"===typeof u&&-1!==u.indexOf(".")){var d=u.split(".");var p=r;while(0!==d.length){var h=d.shift();if(0===d.length){p[h]=n[u];break}var g=[h].concat(d).join(".");if(p.hasOwnProperty(g)){d=[g];continue}p.hasOwnProperty(h)||(p[h]={});p=p[h]}delete n[u]}r=n}t=v(t||(f.Lang.isArray(r)?[]:{}),r,"prependArrays")}e.$update&&(t.$update=e.$update);e.$concat&&(t.$concat=e.$concat);e.$when&&(t.$when=e.$when);return t}},update:{test:function(e){return e&&e.$update},each:function(e){var t=[];var a=e.$update;delete e.$update;function i(a,i){return function(e,t){return t===a&&e===i}}function s(i){return function(e,t,a){f.mix(a,i,true)}}for(var n in a)"."===n[0]?t.push({test:i("name",n.slice(1)),each:s(a[n])}):t.push({test:i("type",n),each:s(a[n])});return r(e,t)}},when:{test:function(e){return e&&e.$when},map:function(e){if(f.Lang.isFunction(e.$when)&&e.$when(m)){if(e.$value)return e.$value;delete e.$when;return e}return}},value:{test:function(e){return e&&e.$value},map:function(e){return m[e.$value]}},valueFn:{test:function(e){return e&&e.$valueFn},map:function(e){var t=e.$valueFn(m);e.$concat&&(t.$concat=e.$concat);return t}},template:{test:function(e,t,a){if("string"!==typeof e)return false;if(a.$escape)return false;if(!f.Squarespace.StringTemplate)return false;var i="wysiwyg"===a.engine;if(i)return false;if("source"===a.engine||"source"===l(a,"wysiwyg.engine")){var s="markdown"===a.mode||"markdown"===l(a,"wysiwyg.mode");var n="htmlmixed"===a.mode||"htmlmixed"===l(a,"wysiwyg.mode");if(s||n)return false}return true},map:function e(t){var a=f.Squarespace.StringTemplate.template(t,m);return a}},concat:{postTest:function(e){var t=false;if(e&&e instanceof Array)for(var a=0;a<e.length;a++)e[a]&&e[a]instanceof Array&&e[a].$concat&&(t=t||e[a].$concat);return t},post:function(e,t,a){var i=[];for(var s=0;s<e.length;s++)e[s]&&e[s]instanceof Array&&e[s].$concat?i=i.concat(e[s]):i.push(e[s]);return i}},trim:{postTest:function(e){return f.Lang.isArray(e)},post:function(e,t,a){var i=e.filter(function(e){return!f.Lang.isUndefined(e)});e.$concat&&(i.$concat=e.$concat);return i}}};return r(f.merge(t),e.map(function(e){return a[e]}))}function n(e,t,a){var i=s(["include","update"],e,t);i=s(["when","value","valueFn","template","concat","trim"],i,a);return i}var o=f.namespace("Squarespace.ObjectBuilder");o.operations=["include","update","when","value","template","concat","trim"];o.walkObject=r;o.build=s;o.make=n;o.makeArray=function(e,t,a){var i=[];i.push({obj:e});t&&i.push(t);a&&i.push(a);return n.apply(o,i).obj}},"1.0",{requires:["oop"]})},"./src/main/webapp/universal/scripts-v6/oembed-resolvers.js":function(e,t,a){var i=a("./common/temp/node_modules/lodash/camelCase.js");var s=a("./src/main/webapp/universal/src/shared/utils/coreCmsFlags.ts");YUI.add("squarespace-oembed-resolvers",function(r){r.namespace("Squarespace");r.Squarespace.EmbedResolver=r.Base.create("embedResolver",r.Base,[],{canProcess:function(e,t){var a=new RegExp(this.get("pattern"),"g");return e.match(a)&&(!r.Lang.isValue(t)||t===this.get("type"))},getProvider:function(){return this.get("serviceName").toLowerCase()},process:function(e,a,i){r.jsonp(this.get("serviceUrl")+"&url="+encodeURIComponent(e),{on:{success:r.bind(function(e,t){e=this._sanitizeResolvedData(e,t);a.onSuccess.apply(i,arguments)},this),failure:a.onFailure,timeout:a.onTimeout},args:[e],timeout:5e3,context:i})},_sanitizeResolvedData:function(e,t){var a=this.getProvider();if("instagram"===a){"Instagram"===e.title&&(e.title=null);e["instagram-url"]=e.thumbnail_url}else if(!e.html)return null;this._camelCaseDataKeys(e);return r.merge(e,{url:t,html:this._getCleanedHTML(e,t),resolveObject:this.get("objectName"),resolvedBy:a,resolved:true})},_camelCaseDataKeys:function(a){var e=["author_name","author_url","provider_name","provider_url","thumbnail_url"];r.Array.each(e,function(e){var t=a[e];if(t){a[i(e)]=t;delete a[e]}})},_getCleanedHTML:function(e,t){var a=this.getProvider();if("instagram"===a)return r.Squarespace.UITemplates.render("instagram-oembed.html",r.merge({url:t},e));if("youtube"===a){var i=/^.*(?:youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/;var s=(t.match(i)||["",""])[1];var n=t.split("?")[1]||"";n=n&&"?"+this._resolveYouTubeParams(n);s&&(e.html=r.Squarespace.UITemplates.render("youtube-oembed.html",{data:e,src:"//www.youtube.com/embed/"+s+n}))}return this._augmentEmbed(e.html.trim())},_augmentEmbed:function(e){var t=r.Node.create("<div>"+e+"</div>");var a="";t.all("iframe").each(this._augmentIframeEmbed,this);t.all("object").each(this._augmentObjectEmbed,this);a=t.get("innerHTML");t.destroy();return a},_augmentIframeEmbed:function(e){var t=e.getAttribute("src");var a=t.match(/^[^\?&#]+/)[0];var i=(t.match(/#[^\?&]+$/)||[""])[0];var s=(t.match(/\?[^#]+/)||[""])[0];var n=s.split(/[\?|&]/);n=r.Array.filter(n,function(e){return e&&e.search(/^wmode=/)<0});n.push("wmode=opaque");switch(this.getProvider()){case"youtube":n.push("enablejsapi=1")}t=a+"?"+n.join("&")+i;e.setAttribute("src",t)},_augmentObjectEmbed:function(e){e.all("embed").each(function(e){e.setAttribute("wmode","opaque")});e.all("param").each(function(e){"wmode"===e.getAttribute("name")&&e.remove(true)});e.prepend(r.Node.create('<param name="wmode" value="opaque"/>'))},_resolveYouTubeParams:function(e){var t=/(^|\&)(?:v=)(?:[^#\&]*)(\&|$)/;var a=/(^|\&)(?:t=)([^#\&]*)/g;e=e.replace(t,function(e,t,a){return t&&a?"&":""});e=e.replace(a,function(e,t,i){var a=t||"";var s=0;var n=i.match(/\d+\D/g);r.Array.each(n,function(e){var t=i.slice(-1);var a=parseInt(e,10);switch(t){case"h":s+=3600*a;break;case"m":s+=60*a;break;case"s":s+=a;break;default:console.warn("[embedResolver] parameter `t` contains unknown character")}});if(!r.Lang.isNumber(s)||0===s)return e;a+="start="+s;return a});return e}},{ATTRS:{type:{},serviceName:{value:""},pattern:{value:""},serviceUrl:{value:""},objectName:{value:""}}});var e=r.Base.create("youtubeEmbedResolver",r.Squarespace.EmbedResolver,[],{process:function(t,a){r.Data.get({url:"/api/oembed/youtube?url="+encodeURIComponent(t),success:function(e){a.onSuccess(this._sanitizeResolvedData(e,t),t)},failure:a.onFailure},this)}});var t="https://api.embed.ly/1/oembed?key=61d05c9d54e8455ea7a9677c366be814&format=json&callback={callback}";r.Squarespace.oEmbedResolvers={twitter:new r.Squarespace.EmbedResolver({serviceName:"Twitter",pattern:"^https?://twitter.com[^ ]*$",serviceUrl:"https://api.twitter.com/1/statuses/oembed.json?callback={callback}",objectName:"Tweet"}),vimeo:new r.Squarespace.EmbedResolver({serviceName:"Vimeo",pattern:"^https?://(?:www\\.)?vimeo.com/",serviceUrl:"https://vimeo.com/api/oembed.json?callback={callback}",objectName:"Video",type:"video"}),wistia:new r.Squarespace.EmbedResolver({serviceName:"Wistia",pattern:"https?://(.+)?(wistia.com|wi.st)/(medias|embed)/.*",serviceUrl:"https://fast.wistia.com/oembed?callback={callback}",objectName:"Video",type:"video"}),animoto:new r.Squarespace.EmbedResolver({serviceName:"Animoto",pattern:"^https?://(?:www\\.)?animoto.com/play/",serviceUrl:"https://animoto.com/oembeds/create?format=json&ssl=true&callback={callback}",objectName:"Video",type:"video"}),flickr:new r.Squarespace.EmbedResolver({serviceName:"Flickr",pattern:"^https?://[a-zA-Z\\.]*flickr.com/[^ ]*$",serviceUrl:"https://www.flickr.com/services/oembed?format=json&jsoncallback={callback}",objectName:"Picture"}),instagram:new r.Squarespace.EmbedResolver({serviceName:"Instagram",pattern:"^https?://[a-zA-Z\\.]*instagram.com/p[^ ]*$",serviceUrl:t,objectName:"Picture"}),wikipedia:new r.Squarespace.EmbedResolver({serviceName:"Wikipedia",pattern:"^https?://en.wikipedia.org/wiki/[^ ]*$",serviceUrl:t,objectName:"Article"}),slideshare:new r.Squarespace.EmbedResolver({serviceName:"SlideShare",pattern:"^https?://www.slideshare.net[^ ]*$",serviceUrl:"https://www.slideshare.net/api/oembed/2?format=json&callback={callback}",objectName:"Presentation"}),soundcloud:new r.Squarespace.EmbedResolver({serviceName:"SoundCloud",pattern:"^https?://soundcloud.com[^ ]*$",serviceUrl:"https://soundcloud.com/oembed?format=js&callback={callback}",objectName:"Audio"}),sketchfab:new r.Squarespace.EmbedResolver({serviceName:"Sketchfab",pattern:"^https?://sketchfab.com[^ ]*$",serviceUrl:t,objectName:"3D Model"})};s.isCoreCmsVariant(s.YOUTUBE_OEMBED)?r.Squarespace.oEmbedResolvers.youtube=new e({serviceName:"Youtube",pattern:"^https?://[a-zA-Z\\.]*((?:youtube.com/watch)|(?:.be/))[^ ]*$",objectName:"Video",type:"video"}):r.Squarespace.oEmbedResolvers.youtube=new r.Squarespace.EmbedResolver({serviceName:"Youtube",pattern:"^https?://[a-zA-Z\\.]*((?:youtube.com/watch)|(?:.be/))[^ ]*$",objectName:"Video",serviceUrl:t,type:"video"});r.Squarespace.oEmbedResolversGeneric=new r.Squarespace.EmbedResolver({serviceName:"Embedly",serviceUrl:t,objectName:"Embedly"})},"1.0",{requires:["base","jsonp","squarespace-flickr-oembed-template","squarespace-instagram-oembed-template","squarespace-ui-templates","squarespace-youtube-oembed-template"]})},"./src/main/webapp/universal/scripts-v6/pill-shopping-cart.js":function(e,t,a){var r=a("./src/main/webapp/universal/src/shared/i18n/index.ts").pluralize;var o=a("./src/main/webapp/universal/src/shared/i18n/commerce/MoneyFormatterProvider.ts");YUI.add("squarespace-pill-shopping-cart",function(s){s.namespace("Squarespace.Widgets");var t=s.Squarespace.Widgets.PillShoppingCart=s.Base.create("pillShoppingCart",s.Squarespace.Widgets.SSWidget,[],{renderUI:function(){t.superclass.renderUI.call(this);this.get("boundingBox").plug(s.Squarespace.Animations.Scalable,{duration:.25});this._hide(true);var e=this.get("contentBox");e.setAttribute("data-test","continue-to-cart");e.addClass(this.get("useLightCart")?"light":"dark")},bindUI:function(){t.superclass.bindUI.call(this);this.get("model").on("change",this.syncUI,this);this.get("contentBox").on("click",function(){s.config.win.Y.Squarespace.Utils.isInDamaskFrame()?s.Squarespace.Singletons.Location.setFrameUrl("/cart"):s.config.win.location="/cart"})},syncUI:function(){t.superclass.syncUI.call(this);var i=this.get("model");var s=i.get("totalQuantity");var n=this.get("contentBox");var e=function(){var e=r({one:"item",other:"items"},s);n.one(".total-quantity").setContent(s>100?"100+":s);n.one(".suffix").setContent(e);var t=i.get("subtotalAmount");var a={trimZeroFractions:true};n.one(".subtotal .price").setContent(o.formatter.format(t,a))};if(s>0){e();this._show()}else{this._hide();e()}},_show:function(){var e=this.get("boundingBox");if(e.hasClass("sqs-scalable-hidden"))e.show();else{var t=s.Easing.easeOutStrong;var a=new s.Anim({node:e,to:{opacity:.7},duration:.2,easing:t});var i=new s.Anim({node:e,to:{opacity:1},duration:.5,easing:t});a.on("end",function(){i.run()});a.run()}},_hide:function(e){var t=this.get("boundingBox");t.hasClass("sqs-scalable-hidden")||t.hide(e)}},{CSS_PREFIX:"sqs-pill-shopping-cart",HANDLEBARS_TEMPLATE:"pill-shopping-cart.html",ATTRS:{model:{value:null,validator:function(e){return s.instanceOf(e,s.Squarespace.Models.ShoppingCart)}},useLightCart:{value:false}}})},"1.0",{requires:["base","node","squarespace-animations","squarespace-models-shopping-cart","squarespace-pill-shopping-cart-template","squarespace-ss-widget"]})},"./src/main/webapp/universal/scripts-v6/pinterest.js":function(e,t,a){var o=a("./src/main/webapp/universal/src/shared/constants/PinterestSelectors.js");YUI.add("squarespace-pinterest",function(r){var e=r.namespace("Squarespace.Pinterest");e.bind=function(e){if(r.Lang.isObject(e)){var t={};t.hover=true;var a={round:{small:"16",large:"32"},rect:{small:"20",large:"28"}};var i=e.shape;r.Lang.isValue(i)||(i="rect");var s=e.size;r.Lang.isValue(s)||(s="small");t.shape=i;t.height=a[i][s];"enabled_for_blogs"===e.mode?t.ancestorSelectorTest=o.BLOGS.join(","):"enabled_for_blogs_and_pages"===e.mode&&(t.ancestorSelectorTest=o.BLOGS_AND_PAGES.join(","));var n=["#productList",".ProductList",".productlist"];n.forEach(function(e){t.ancestorSelectorTest.includes(e)&&r.all([e+" a[href][data-item-id]",e+" a.hentry[href]"].join(",")).each(function(e){var t=e.getAttribute("href");r.Lang.isString(t)&&"/"===t[0]&&r.Lang.isString(window.location.origin)&&(t=window.location.origin+t);e.all("img").each(function(e){e.setAttribute("data-pin-url",t)})})});r.config.win.PINTEREST.f.init(t)}};r.config.win.Squarespace.onInitialize(r,function(){e.bind(r.Object.getValue(r.config.win.Static,"SQUARESPACE_CONTEXT.websiteSettings.pinterestOverlayOptions".split(".")))})},"1.0",{requires:["thirdparty-pinterest"]})},"./src/main/webapp/universal/scripts-v6/plugin-actionoverlay.js":function(e,t,a){YUI.add("squarespace-plugin-actionoverlay",function(s){s.namespace("Squarespace");s.Squarespace.ActionOverlayButtons={EDIT_IMAGE:"edit-image",IMAGE_INFO:"image-info",REMOVE_IMAGE:"remove-image"};s.namespace("Squarespace.Plugin").ActionOverlay=s.Base.create("ActionOverlay",s.Plugin.Base,[],{initializer:function(){this._buttonEls={};this.render();this.after("positionChange",function(){this.el&&this.el.set("className",this.constructor.CSS_NAMESPACE+" "+this.get("position"))});(this.get("anchor")||this.get("host")).on("mouseenter",this._alignEl,this)},getButtonEl:function(e){return this._buttonEls[e]},setLoadingState:function(e,t){var a=this.getButtonEl(e);if(!a){false;return}a.empty(true);if(t){this.el.addClass("loading");a.addClass("loading");new s.Squarespace.Spinner({render:a})}else{this.el.removeClass("loading");a.removeClass("loading")}},render:function(){this.el&&this.el.remove();var e=s.Node.create('<div class="'+this.constructor.CSS_NAMESPACE+" "+this.get("position")+'"></div>');for(var t=0;t<this.get("buttons").length;t++){var a=this.get("buttons")[t];var i=s.Node.create('<div class="button '+a+'"></div>');i.setAttribute("data-button-name",a);e.append(i);this._buttonEls[a]=i}this.clickEvt=e.on("click",function(e){e.halt();var t=e.target.ancestor(".button",true);if(t&&!t.hasClass("loading")){var a=t.getAttribute("data-button-name");this.fire("button-"+a,{buttonNode:t,buttonName:a})}},this);this.el=e;this._alignEl();this.get("host").addClass(this.constructor.CSS_NAMESPACE+"-container");this.get("host").append(e)},_alignEl:function(){if(this.get("anchor")&&"relative"!==this.get("anchor").getComputedStyle("position")){var e=this.get("anchor").get("region");this.el.setStyles({top:e.top,right:e.right-e.width})}},destructor:function(){this.get("host").removeClass(this.constructor.CSS_NAMESPACE+"-container");this.clickEvt.detach();this.el.remove()},getProperty:function(e){return this.constructor[e]}},{NS:"actionOverlay",CSS_NAMESPACE:"sqs-action-overlay",ATTRS:{buttons:{value:[]},position:{value:"top"},anchor:{value:null}}})},"1.0",{requires:["base","node","plugin","squarespace-spinner"]})},"./src/main/webapp/universal/scripts-v6/plugin-focalpoint.js":function(e,t,a){var s=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-plugin-focalpoint",function(i){i.namespace("Squarespace.Plugin").FocalPoint=i.Base.create("ImageFocalPoint",i.Plugin.Base,[i.Squarespace.GismoBase],{initializer:function(){this._renderUI();this._bindUI();this._syncUI()},_renderUI:function(){this._focalPointEl=this.get("relativeYUI").Node.create('<div class="image-focal-point"></div>');this.get("parentNode").appendChild(this._focalPointEl);"static"===this.get("parentNode").getComputedStyle("position")&&false},_bindUI:function(){var t=false;var e=this.get("relativeYUI");this._event(this.get("host").on(["mouseenter","mousemove"],function(e){this._anim(this._focalPointEl,{opacity:1}).run();this._syncUI()},this));this._event(this.get("host").on("mouseleave",function(e){if(t||e.relatedTarget===this._focalPointEl)return;this._anim(this._focalPointEl,{opacity:0}).run()},this));this.dd=new e.DD.Drag({node:this._focalPointEl});this.dd.plug(e.Plugin.DDConstrained,{constrain2region:this._getConstrainRegion(true)});this.dd.on("drag:start",function(){this.dd.plug(e.Plugin.DDConstrained,{constrain2region:this._getConstrainRegion(true)});t=true;this._startPolling()},this);this.dd.on("drag:end",function(){t=false;this._stopPolling();this._syncUI();this.fire("focalPointChanged",{focalPoint:this.get("focalPoint")})},this);this.tooltip=new e.Squarespace.ToolTip({target:this._focalPointEl,dialogTooltip:true,title:s("Image Focal Point"),body:s("An image focal point allows Squarespace to make better cropping decisions when the image is placed within a thumbnail. Drag the circle to change the focal point in the image so it displays to your preference.")})},_startPolling:function(){this._hostRegion=this.get("host").get("region");this._hostActualWidth=this.get("host").get("clientWidth");this._hostActualHeight=this.get("host").get("clientHeight");this._timer=i.later(50,this,this._evaluatedFocalPoint,this,{},true)},_stopPolling:function(){this._evaluatedFocalPoint();this._timer.cancel()},_evaluatedFocalPoint:function(){var e=this._focalPointEl.get("region");var t=e[0]-this._hostRegion[0];var a=e[1]-this._hostRegion[1];t+=e.width/2;a+=e.height/2;t-=(this._hostRegion.width-this._hostActualWidth)/2;a-=(this._hostRegion.height-this._hostActualHeight)/2;this.set("focalPoint",{x:Math.max(0,t/this._hostActualWidth),y:Math.max(0,a/this._hostActualHeight)},{source:"plugin-focalPoint"})},_syncUI:function(){var e=this.get("host").get("clientWidth");var t=this.get("host").get("clientHeight");var a=e*this.get("focalPoint.x");var i=t*this.get("focalPoint.y");var s=this.get("host").get("region");a+=s[0];i+=s[1];a+=(s.width-e)/2;i+=(s.height-t)/2;a-=this._focalPointEl.get("offsetWidth")/2;i-=this._focalPointEl.get("offsetHeight")/2;this._focalPointEl.setXY([a,i])},_getConstrainRegion:function(){var e=this.get("host").get("region");var t=this._focalPointEl.get("offsetWidth");var a=this._focalPointEl.get("offsetHeight");var i=this.get("host").get("offsetWidth")-this.get("host").get("clientWidth");var s=this.get("host").get("offsetHeight")-this.get("host").get("clientHeight");e.top-=t/2-s/2;e.left-=t/2-i/2;e.right+=t/2-i/2;e.bottom+=a/2-s/2;e.width-=i;e.height-=s;return e},destructor:function(){this._focalPointEl.remove();this.dd.destroy();this.tooltip.destroy()}},{NS:"focalPoint",ATTRS:{focalPoint:{value:{x:.5,y:.5},setter:function(e){i.Lang.isUndefined(e)&&console.log("UNDEFINED");if(i.Lang.isString(e)){e=e.split(",");var t=parseFloat(e[0]);var a=parseFloat(e[1]);return{x:!isNaN(t)&&t<=1?t:.5,y:!isNaN(a)&&a<=1?a:.5}}return e}},parentNode:{valueFn:function(){return this.get("host").get("parentNode")}},relativeYUI:{valueFn:function(){if(i.config.win!==window.top&&i.config.doc.body!==this.get("parentNode").ancestor("body").getDOMNode())return window.top.Y;return i}}}})},"1.0",{requires:["base","dd","event-base","plugin","squarespace-gismo","squarespace-ui-base"]})},"./src/main/webapp/universal/scripts-v6/plugin-inline-input-editor.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/utils/isIeOrEdge.ts");YUI.add("squarespace-plugin-inline-input-editor",function(t){t.Event.defineOutside("click");t.namespace("Squarespace.Plugin");t.Squarespace.Plugin.InlineInputEditor=t.Base.create("InlineInputEditor",t.Plugin.Base,[],{initializer:function(){var e=this.get("input");this.get("host").get("boundingBox").addClass("inline-editing");this.get("render").append(e);this._bindInputEvents();e.focus();this.get("autoSelect")&&e.select()},destructor:function(){this.get("host").get("boundingBox").removeClass("inline-editing");t.Array.invoke(this._events,"detach");this.get("input").remove(true)},finishEditing:function e(){var t=this.get("host");var a=this.constructor.NS;if(!t.hasPlugin(a))return;this._commitChanges();var i=this.get("onBlur");"function"===typeof i&&i()},_bindInputEvents:function(){var a=this.get("input");this._events=[a.on(["click","contextmenu"],function(e){e.halt()}),a.on("clickoutside",function e(t){t.halt(true);a.blur();i()&&this.finishEditing()},this),a.on("blur",this.finishEditing,this),a.on("keyup",function e(t){var a=t.target;this.set("data",a.get("value").trim());if(27===t.keyCode){t.halt();this._clearChanges()}else if(13===t.keyCode){a.blur();i()&&this.finishEditing()}else this.get("onKeyUp")(t)},this)]},_commitChanges:function(){var e={newVal:this.get("data"),prevVal:this.get("initialData")};this.get("onCommit").call(this.get("host"),e);this._unplugFromHost()},_clearChanges:function(){this.set("data",this.get("initialData"));this.get("onClear").call(this.get("host"));this._unplugFromHost()},_unplugFromHost:function(){this.get("host").unplug(this.constructor)}},{NS:"inlineInputEditor",ATTRS:{autoSelect:{value:true},data:{validator:t.Lang.isString},initialData:{validator:t.Lang.isString,valueFn:function(){return this.get("data")},writeOnce:"initOnly"},input:{readOnly:true,valueFn:function(){var e=t.Node.create('<input type="text" />');e.addClass(this.get("inputClassName"));e.set("value",this.get("data"));e.set("placeholder",this.get("strings.placeholder"));return e}},inputClassName:{value:"sqs-inline-input-editor",validator:t.Lang.isString},onClear:{value:function(){},validator:t.Lang.isFunction},onCommit:{validator:t.Lang.isFunction},render:{valueFn:function(){this.get("host").get("contentBox")}},onBlur:{value:function(){}},onKeyUp:{value:function(){}},strings:{value:{placeholder:""}}}})},"1.0",{requires:["array-invoke","base","node","plugin"]})},"./src/main/webapp/universal/scripts-v6/plugin-lightbox2.js":function(e,t){YUI.add("squarespace-plugin-lightbox2",function(a){a.namespace("Squarespace.Plugin");a.Squarespace.Lightbox2Plug=a.Squarespace.Plugin.Lightbox2=a.Base.create("Lightbox2Plug",a.Plugin.Base,[a.Squarespace.GismoBase],{initializer:function(){this._event(this.get("host").on("click",function(e){e.preventDefault();var t=this;a.use("squarespace-ui-base",function(){var e=new a.Squarespace.Lightbox2(a.merge({content:a.Node.create(t.get("host").getAttribute("data-lightbox"))},t.get("lightboxOptions")));e.render()})},this))},destructor:function(){var e=this.get("lightboxOptions.content");e instanceof a.Node&&e.destroy(true)}},{NS:"lightbox2plugin",ATTRS:{lightboxOptions:{}}})},"1.0",{requires:["base","node","plugin","squarespace-gismo","squarespace-widgets-lightbox2"]})},"./src/main/webapp/universal/scripts-v6/plugin-loading-overlay.js":function(e,t){YUI.add("squarespace-plugin-loading-overlay",function(a){a.namespace("Squarespace.Plugins").LoadingOverlay=a.Base.create("LoadingOverlay",a.Plugin.Base,[],{initializer:function(){this._overlayNode=a.Node.create('<div class="sqs-loading-overlay-node"><div class="title"></div></div>');this._overlayNode.on("mousedown",function(e){e.halt()});this.spinner=new a.Squarespace.Spinner(a.merge(this.get("spinnerConfig"),{render:this._overlayNode}));this.on("spinnerConfigChange",function(e){this.spinner.setAttrs(e.newVal)},this);this.after("visibleChange",this.syncOverlaySize,this);this.syncOverlaySize();this.get("host").addClass("sqs-loading-overlay-active")},destructor:function(){this.spinner.destroy();this._overlayNode.remove(true);this.get("host").removeClass("sqs-loading-overlay-active")},syncOverlaySize:function(){this.get("visible")?this._showOverlay():this._hideOverlay()},_showOverlay:function(){var e=this.get("title");this._overlayNode.one(".title").setContent(e);this._overlayNode.toggleClass("has-title",""!==e);var t=this.get("host");this._overlayNode.setStyles({position:"absolute",width:t.get("offsetWidth"),height:t.get("offsetHeight"),top:t.get("offsetTop"),left:t.get("offsetLeft")});t.append(this._overlayNode);new a.Anim({node:this._overlayNode,duration:.25,from:{opacity:this._overlayNode.getStyle("opacity")},to:{opacity:1}}).run()},_hideOverlay:function(){this._overlayNode&&this._overlayNode.anim({opacity:0},{from:{opacity:1},end:function(){this._overlayNode&&null!==this._overlayNode.getDOMNode()&&this._overlayNode.inDoc()&&this._overlayNode.remove()}},this).run()}},{NS:"loadingOverlay",ATTRS:{visible:{value:true},title:{value:"",validator:a.Lang.isString},description:{value:""},spinnerConfig:{value:{size:"large",color:"dark"}}}})},"1.0",{requires:["node","plugin","squarespace-spinner"]})},"./src/main/webapp/universal/scripts-v6/plugin-money-formatter-trim-cents.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/utils/currency/MoneyUtils.js");var s=a("./src/main/webapp/universal/src/shared/i18n/commerce/MoneyFormatterProvider.ts");var n=a("./src/main/webapp/universal/src/shared/utils/commerce/StoreCurrencyManager.js");YUI.add("squarespace-plugin-money-formatter-trim-cents",function(e){e.namespace("Squarespace.Plugin");e.Squarespace.Plugin.MoneyFormatterTrimCents=e.Base.create("moneyFormatterTrimCents",e.Squarespace.Plugin.MoneyFormatter,[],{},{NS:"moneyFormatterTrimCentsPlugin",ATTRS:{suppressDecimal:{value:true},displayFormatter:{value:function(e){var t=n.getStoreCurrency();return s.formatter.format(i.fromCents(e,t),{trimZeroFractions:true})}}}})},"1.0",{requires:["plugin","squarespace-commerce-utils","squarespace-plugin-numeric-formatter","squarespace-util"]})},"./src/main/webapp/universal/scripts-v6/plugin-money-formatter.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/utils/currency/MoneyUtils.js");var s=a("./src/main/webapp/universal/src/shared/i18n/commerce/MoneyFormatterProvider.ts");var n=a("./src/main/webapp/universal/src/shared/utils/commerce/StoreCurrencyManager.js");var r=a("./src/main/webapp/universal/src/shared/utils/currency/CurrencyTemplates.js");YUI.add("squarespace-plugin-money-formatter",function(e){e.namespace("Squarespace.Plugin");e.Squarespace.Plugin.MoneyFormatter=e.Base.create("moneyFormatter",e.Squarespace.Plugin.NumericFormatter,[],{_transformToData:function(e){return Number(this.convertToCents(e))},convertToCents:function(e){var t=String(e).replace(/[^\d\.,]/g,"");if(""===t)return 0;var a=this._getCurrencyTemplate();var i=t.split(a.decimalSeparator);var s=i[0];i.length>1&&(s+="."+i[1].substr(0,2));return Math.round(100*parseFloat(s,10))},_getCurrencyTemplate:function(){var e=n.getStoreCurrency();return r.Templates.native[e]}},{NS:"moneyFormatterPlugin",ATTRS:{displayFormatter:{value:function(e){var t=n.getStoreCurrency();return s.formatter.format(i.fromCents(e,t))}}}})},"1.0",{requires:["plugin","squarespace-commerce-utils","squarespace-plugin-numeric-formatter","squarespace-util"]})},"./src/main/webapp/universal/scripts-v6/plugin-node-destroy-notifier.js":function(e,t){YUI.add("squarespace-plugin-node-destroy-notifier",function(e){e.Squarespace.NodeDestroyNotifier=e.SQS.Gallery.NodeDestroyNotifier},"1.0",{requires:["@sqs/yui-gallery/node-destroy-notifier"]})},"./src/main/webapp/universal/scripts-v6/plugin-node-expander.js":function(e,t){YUI.add("squarespace-plugin-node-expander",function(a){a.namespace("Squarespace.Plugins").NodeExpander=a.Base.create("NodeExpander",a.Plugin.Base,[],{initializer:function(){var e=this.get("node");e.addClass("sqs-node-expander");this._button=e.appendChild('<div class="sqs-node-expander-wrapper"><div class="sqs-node-expander-button"></div></div>');this._placeholderNode=a.Node.create("<div></div>");this._resizeEmitter=new a.Squarespace.ResizeEmitter;this.publishEvents();this.bindEvents();this._escManagerTarget={close:this.toggleExpanded.bind(this)}},publishEvents:function(){this.publish("expand-start",{emitFacade:true,defaultFn:this._expand});this.publish("expand-end",{emitFacade:true});this.publish("contract-start",{emitFacade:true,defaultFn:this._contract});this.publish("contract-end",{emitFacade:true});this.publish("expand-resized",{emitFacade:true,defaultFn:this._syncExpandedSizing})},bindEvents:function(){a.Squarespace.Utils.onPointerAction(this._button,this.toggleExpanded,this);this.after("expandedChange",function(e){this._button.toggleClass("sqs-node-expander-active",!!e.newVal);e.newVal?this.fire("expand-start"):this.fire("contract-start")},this);this._resizeEmitter.on("resize",function(e){if(!this.get("expanded"))return;if(this._expandSizingRequest){this._expandSizingRequest.cancel();this._expandSizingRequest=null}this._expandSizingRequest=a.later(500,this,function(){this.fire("expand-resized")})},this)},_syncExpandedSizing:function(){var e=this._placeholderNode.get("region");this.get("node").setStyles({top:-1*e.top,left:-1*e.left,width:a.config.win.innerWidth,height:a.config.win.innerHeight})},_expand:function(){var e=this.get("node");e.insert(this._placeholderNode.setStyles({width:e.get("offsetWidth"),height:e.get("offsetHeight")}),"after");var t=e.get("region");e.addClass("sqs-node-expander-active");e.addClass("sqs-node-expander-expanding");e.setStyles({position:"absolute",top:0,left:0,width:t.width,height:t.height,zIndex:101});e.anim({top:-1*t.top,left:-1*t.left,width:a.config.win.innerWidth,height:a.config.win.innerHeight},{duration:.5,end:function(){this.fire("expand-end");e.removeClass("sqs-node-expander-expanding")}},this).run();a.Squarespace.EscManager.addTarget(this._escManagerTarget)},_contract:function(){var e=this.get("node");var t=this._placeholderNode.get("region");e.addClass("sqs-node-expander-contracting");e.anim({top:0,left:0,width:t.width,height:t.height,zIndex:101},{end:function(){this._placeholderNode.remove();e.removeClass("sqs-node-expander-contracting");e.removeClass("sqs-node-expander-active");e.setStyles({position:null,top:null,left:null,right:null,bottom:null});this.fire("contract-end")}},this).run();a.Squarespace.EscManager.removeTarget(this._escManagerTarget)},hideButton:function(){this._button&&this._button.addClass("sqs-node-expander-wrapper-hidden")},showButton:function(){this._button&&this._button.removeClass("sqs-node-expander-wrapper-hidden")},toggleExpanded:function(){this.set("expanded",!this.get("expanded"))},destructor:function(){this._button.detachAll();this._button.remove(true);this._button=null;this.get("node").removeClass("sqs-node-expander")}},{NS:"NodeExpander",ATTRS:{expanded:{value:false},node:{valueFn:function(){return this.get("host")}}}})},"1.0",{requires:["base","node","plugin","squarespace-dom-emitters-resize","squarespace-escmanager","squarespace-util"]})},"./src/main/webapp/universal/scripts-v6/plugin-numeric-formatter.js":function(e,t){YUI.add("squarespace-plugin-numeric-formatter",function(i){i.namespace("Squarespace.Plugin");var a=229;var e=function(){var t=[];var e=[9,13,8,46,37,39,48,49,50,51,52,53,54,55,56,57,96,97,98,99,100,101,102,103,104,105,a];e.forEach(function(e){t[e]=true});return t};var t=e();i.Squarespace.Plugin.NumericFormatter=i.Base.create("numericFormatter",i.Plugin.Base,[],{initializer:function(){i.Lang.isNumber(Number(this.get("host").get("value")))?this.set("data",Number(this.get("host").get("value"))):this.set("data",0);this.set("displayString",this._format(this.get("data")));this._bindUI();this._syncUI()},_format:function(e){return this.get("displayFormatter")(e)},_syncUI:function(){var e=this.get("data");var t=this.get("displayString");if(this.get("hasFocus"))this.get("host").set("value",e>0?t:"");else{var a="";i.Lang.isNull(this.get("prefixUnit"))||(a+=this.get("prefixUnit"));a+=this._format(e);i.Lang.isNull(this.get("postfixUnit"))||(a+=" "+this.get("postfixUnit"));this.get("host").set("value",a)}},_bindUI:function(){var e=this.get("host");this.on("displayStringChange",this._syncUI,this);e.on("valuechange",this._onValueChange,this);e.on("keydown",this._onKeyDown,this);e.on("focus",this._onFocus,this);e.on("blur",this._onBlur,this)},_onFocus:function(){this.set("hasFocus",true);this._syncUI();setTimeout(i.bind(function(){this.get("hasFocus")&&this.get("host").select()},this),0)},_onBlur:function(){this.set("hasFocus",false);this.set("displayString",this._format(this.get("data")))},_onKeyDown:function(e){if(!e.shiftKey&&t[e.keyCode])return;if(!this.get("suppressDecimal")&&(110===e.keyCode||190===e.keyCode)&&-1===this.get("host").get("value").indexOf("."))return;if(isFinite(Number(String.fromCharCode(e.keyCode))))return;e.stopPropagation();e.preventDefault()},_onValueChange:function(){var e=this.get("host").get("value");var t=this._transformToData(e);this.set("data",t)},_displayFormatter:function(e){return e},_transformToData:function(e){var t;i.Lang.isUndefined(this.get("prefixUnit"))||(t=String(e).replace(new RegExp(this.get("prefixUnit"))));i.Lang.isUndefined(this.get("postfixUnit"))||(t=String(e).replace(new RegExp(this.get("postfixUnit"))));return Number(t)}},{NS:"numericFormatterPlugin",ATTRS:{hasFocus:{value:false},data:{value:null},displayString:{value:null},prefixUnit:{value:null},postfixUnit:{value:null},displayFormatter:{value:function(e){return e},suppressDecimal:{value:false}}}})},"1.0",{requires:["plugin","squarespace-util"]})},"./src/main/webapp/universal/scripts-v6/plugin-progress-bar.js":function(e,t){YUI.add("squarespace-plugin-progress-bar",function(a){a.namespace("Squarespace.Plugin");var e=a.Squarespace.Plugin.ProgressBar=a.Base.create("ProgressBar",a.Squarespace.Plugin.ProgressBase,[],{_renderContent:function(){e.superclass._renderContent.call(this);this._syncProgressBar()},_bindAttributeChanges:function(){e.superclass._bindAttributeChanges.call(this);this.after("progressChange",this._syncProgressBar,this)},_syncProgressBar:function(){var e=this._meterEl.one(".bar-inner");var t=this.get("progress");t=Math.max(0,Math.min(100,0+t));e.setStyle("width",t+5+"%")}},{NS:"progress-bar",PROGRESS_METER_TEMPLATE:'<div class="bar"><div class="bar-inner"></div></div>',ATTRS:{progress:{value:0,validator:function(e,t){return a.Lang.isNumber(e)&&e>=0&&e<=100}}}})},"1.0",{requires:["base","squarespace-plugin-progress-base"]})},"./src/main/webapp/universal/scripts-v6/plugin-progress-base.js":function(e,t,a){var s=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-plugin-progress-base",function(i){i.namespace("Squarespace.Plugin");i.Squarespace.Plugin.ProgressBase=i.Base.create("ProgressBase",i.Plugin.Base,[],{initializer:function(){this._renderContent();this._bindAttributeChanges();this._setClasses();this._bindContent()},destructor:function(){var e=this._contentEl;if(e&&e.getDOMNode()){e.setStyle("opacity",0);i.later(this.get("unplugDelay"),this,function(){e&&e.remove&&e.remove()})}this._contentEl=null;this._meterEl=null;this._cancelEl=null;this.get("host").removeClass("progress-show-meter");this.get("host").removeClass("progress-show-cancel")},_renderContent:function(){var e=this._contentEl=i.Node.create('<div class="progress-container"><div class="progress"><div class="cancel-process">'+s("Cancel")+"</div></div></div>");var t=e.one(".progress");this._meterEl=i.Node.create(this.constructor.PROGRESS_METER_TEMPLATE);t.prepend(this._meterEl);this._cancelEl=e.one(".cancel-process");var a=this.get("host");this.get("append")?a.append(e):a.prepend(e)},_bindAttributeChanges:function(){this.after(["showChange","showCancelChange"],this._setClasses,this)},_setClasses:function(){var e=this.get("host");var t=this.get("show");var a=this.get("showCancel");e.toggleClass("progress-show-meter",t);this._meterEl.toggleClass("visible",t);e.toggleClass("progress-show-cancel",a);this._cancelEl.toggleClass("visible",a)},_bindContent:function(){this._cancelEl.on("click",function(e){e.halt();this.fire("cancel")},this)}},{NS:"progress",PROGRESS_METER_TEMPLATE:"",ATTRS:{show:{value:false,validator:i.Squarespace.AttrValidators.isBoolean},showCancel:{value:false,validator:i.Squarespace.AttrValidators.isBoolean},unplugDelay:{value:300,validator:i.Squarespace.AttrValidators.isNumber},append:{value:false,validator:i.Squarespace.AttrValidators.isBoolean,writeOnce:"initOnly"}}})},"1.0",{requires:["base","node","plugin","squarespace-attr-validators"]})},"./src/main/webapp/universal/scripts-v6/plugin-progress-spinner.js":function(e,t){YUI.add("squarespace-plugin-progress-spinner",function(e){e.namespace("Squarespace.Plugin");var t=e.Squarespace.Plugin.ProgressSpinner=e.Base.create("ProgressSpinner",e.Squarespace.Plugin.ProgressBase,[],{_renderContent:function(){t.superclass._renderContent.call(this);new e.Squarespace.Spinner({render:this._meterEl,size:this.get("spinnerSize"),color:this.get("spinnerColor")}).get("boundingBox")}},{NS:"progress-spinner",PROGRESS_METER_TEMPLATE:'<div class="spinner"></div>',ATTRS:{spinnerSize:{value:30},spinnerColor:{value:"dark"}}})},"1.0",{requires:["base","squarespace-plugin-progress-base","squarespace-spinner"]})},"./src/main/webapp/universal/scripts-v6/plugin-pulsewarn.js":function(e,t){YUI.add("squarespace-plugin-pulsewarn",function(l){l.namespace("Squarespace.Plugin");l.Squarespace.Plugin.PulseWarn=l.Base.create("pulseWarn",l.Plugin.Base,[],{initializer:function(e){this.config=e;this.set("color",e.color);this.set("useClass",e.useClass);this.set("targetClass",e.targetClass);this.set("iterations",e.iterations);this.get("host").addClass("pulse-warnable");l.Lang.isUndefined(e.interval)||this.set("interval",e.interval);this._timer=null},destructor:function(){if(this._timer){this._timer.cancel();this._timer=null}},warn:function(){var e=this.get("host");var t=this.get("iterations");var a=e.getStyle("backgroundColor");var i=this.get("color");if(!l.Lang.isNull(this._timer)){this._timer.cancel();this._timer=null}if(this.get("useClass")){var s=this.get("targetClass");var n=this.get("interval");this.fire("start");e.addClass(s);this._timer=l.later(n,this,function(){if(0===t){e.removeClass(s);this.fire("stop");this._timer.cancel();this._timer=null;return}e.hasClass(s)?e.removeClass(s):e.addClass(s);t--},{},true)}else{var r=new l.Anim({node:e,to:{backgroundColor:i,opacity:.8},easing:this.get("easingUp"),duration:this.get("duration")});var o=new l.Anim({node:e,to:{backgroundColor:a,opacity:1},easing:this.get("easingDown"),duration:this.get("duration")});r.on("end",function(){t>0&&o.run();t--});o.on("end",function(){t>0?r.run():this.fire("stop")},this);this.fire("start");r.run()}}},{NS:"pulseWarn",ATTRS:{useClass:{value:false},iterations:{value:3},color:{value:"#c1b12e"},interval:{value:2e3},duration:{value:.7},easingUp:{value:l.Easing.easeInSine},easingDown:{value:l.Easing.easeOutSine}}})},"1.0",{requires:["anim","base","plugin"]})},"./src/main/webapp/universal/scripts-v6/plugin-scroll-lock.js":function(e,t){YUI.add("squarespace-plugin-scroll-lock",function(o){o.namespace("Squarespace.Plugin").ScrollLock=o.Base.create("ScrollLock",o.Plugin.Base,[],{initializer:function(e){var n=this.get("host");var r=n.getDOMNode();this.listener=function(e){e.stopPropagation();if(!o.Lang.isNumber(r.scrollTop)){e.preventDefault();return false}var t=parseInt(n.getComputedStyle("height"),10);var a=r.scrollTop;var i=r.scrollHeight-t;var s=e.wheelDelta||-e.detail;if(a<=0&&s>0||a>=i&&s<0){e.preventDefault();return false}};if(r.addEventListener){r.addEventListener("mousewheel",this.listener);r.addEventListener("DOMMouseScroll",this.listener);r.addEventListener("MozMousePixelScroll",this.listener)}else r.attachEvent&&r.attachEvent("onmousewheel",this.listener)},destructor:function(){var e=this.get("host").getDOMNode();if(e.removeEventListener){e.removeEventListener("mousewheel",this.listener);e.removeEventListener("DOMMouseScroll",this.listener);e.removeEventListener("MozMousePixelScroll",this.listener)}else e.detachEvent&&e.detachEvent("onmousewheel",this.listener)}},{NS:"ScrollLock",ATTRS:{}})},"1.0",{requires:["base","node","plugin"]})},"./src/main/webapp/universal/scripts-v6/plugin-sizeanimator.js":function(e,t){YUI.add("squarespace-plugin-sizeanimator",function(s){var n=false;s.namespace("Squarespace.Plugins").SizeAnimator=s.Base.create("SizeAnimator",s.Plugin.Base,[],{hold:function(){var e=this.get("host");this._width=e.get("offsetWidth");this._height=e.get("offsetHeight")},release:function(){var t=this.get("host");var a=s.Node.create("<div></div>");var e=t.get("offsetWidth");var i=t.get("offsetHeight");if(e===this._width&&this._height===i){n&&console.log("[sizeanimator release] no change.");return}t.get("children").each(function(e){a.append(e)});a.setStyles({width:e,height:i});n&&console.log("[sizeanimator release]",e,this._width);t.appendChild(a);t.addClass("sqs-sizeanimator-animating");t.anim({width:e,height:i},{from:{width:this._width,height:this._height},end:function(){t.removeClass("sqs-sizeanimator-animating");t.setStyles({width:null,height:null});if(a._node){a.get("children").each(function(e){t.append(e)});a.remove()}}}).run()}},{NS:"sizeAnimator",ATTRS:{}})},"1.0",{requires:["base","plugin"]})},"./src/main/webapp/universal/scripts-v6/popup-overlay.js":function(e,t,a){var n=a("./common/temp/node_modules/lodash/throttle.js");var r=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var o=a("./src/main/webapp/frontend/packages/enums/PopupOverlayStyle.js");var l=a("./src/main/webapp/frontend/packages/enums/OverlayAction.js");var u=a("./src/main/webapp/frontend/packages/enums/OverlayTrigger.js");var d=a("./common/temp/node_modules/@sqs/utils/focus/index.js");var p=a("./src/main/webapp/universal/src/shared/utils/WebsiteOverlaysUtils.js");var h=a("./src/main/webapp/universal/src/shared/utils/LocalStorageUtils.js");var g=a("./src/main/webapp/universal/src/shared/constants/PopupOverlayLocalStorage.js");var m=a("./src/main/webapp/universal/src/shared/utils/census/CensusUtils.ts");var i=a("./src/main/webapp/universal/src/shared/utils/error-reporter/global-sentry.ts");var f=i.captureException;var v=600;YUI.add("squarespace-popup-overlay",function(c){var a=c.config.win.matchMedia("(max-width: "+v+"px)");var s=window.SQUARESPACE_LOGIN&&window.SQUARESPACE_LOGIN.isLoggedIn();c.namespace("Squarespace.Widgets");var i=c.Squarespace.Widgets.PopupOverlay=c.Base.create("PopupOverlay",c.Squarespace.Widgets.SSWidget,[],{initializer:function(){this.popupSettings=c.config.win.Static.SQUARESPACE_CONTEXT.websiteSettings.popupOverlaySettings||{};this.isHidden=true;this.isSetup=false;this._cb=this.get("contentBox");this.documentHeight=this.getDocumentHeight();this.viewportHeight=c.config.win.innerHeight;this.publish("closed",{emitFacade:true});c.Global.publish("popupOverlay:showing");this.loadPopupJSON();this.showEvent=c.Global.on("popupOverlay:requestShow",this.show,this);this.hideEvent=c.Global.on("popupOverlay:hide",this.hide,this);this.formSubmitEvent=c.Global.on("form:submitSuccess",this._markSubmitted,this);this._onMediaQueryChange=this._onMediaQueryChange.bind(this)},destructor:function(){this.showEvent.detach();this.showEvent=null;this.hideEvent.detach();this.hideEvent=null;this.formSubmitEvent.detach();this.formSubmitEvent=null;this.popupContainerNode.remove()},getDocumentHeight:function(){var e=c.config.win.document;var t=e.body;var a=e.documentElement;return Math.max(t.scrollHeight,t.offsetHeight,a.clientHeight,a.scrollHeight,a.offsetHeight)},render:function(){this.popupContainerNode=c.Node.create("<div></div>");c.one("body").append(this.popupContainerNode);i.superclass.render.call(this,this.popupContainerNode)},loadPopupJSON:function(){var e=c.config.win.location;var t=e.pathname+e.hash;var a="currentUrl="+encodeURIComponent(t);c.Squarespace.Utils.isInDamaskFrame()&&(a+="&forceVisibility=true");var i=new XMLHttpRequest;i.open("GET","/api/popup-overlay/render?"+a);i.onload=function(){var t=null;try{if(200!==i.status)throw new Error("Could not fetch popup overlay JSON");t=JSON.parse(i.response)}catch(e){f(e);t=null}if(!t||!t.shouldDisplayOnPage){c.Squarespace.Singletons.PopupOverlay.destroy();c.Squarespace.Singletons.PopupOverlay=null;return}var e=h.getLocalStorageData(g.KEY)||{};e[g.VERSION]=this.popupSettings.version;h.saveToLocalStorage(g.KEY,e);s?this._loggedInResponse(t.renderedHtml):this._loggedOutResponse(t.renderedHtml)}.bind(this);i.send()},setupPopupOverlay:function(e){if(this.isSetup||!e)return;this._cb.set("innerHTML",e);var t=this._cb.one(".sqs-slide-container .sqs-slide");var a=t.one(".sqs-popup-overlay-close");a.setAttribute("aria-label",r("Close"));if(!s){a.once("click",this._closePopup.bind(this));a.on("keydown",function(e){var t=13===e.keyCode;var a=32===e.keyCode;(t||a)&&this._closePopup(e)}.bind(this));t.one(".layer-back").once("click",this._closePopup,this);c.Squarespace.EscManager.disable();c.one(c.config.win.document.documentElement).on("keyup",this._onKeyUp,this)}var i=t.getAttribute("data-slide-layout-id");this.popupSettings.layout=i;c.Squarespace.SlideRendering.Layouts.Factory.create(i,{boundingBox:t,render:true});this.isSetup=true},scrollHandler:function(e,t,a,i){var s=c.config.win.document;var n=s.defaultView&&s.defaultView.scrollY||s.documentElement&&s.documentElement.scrollTop;var r=this.documentHeight-this.viewportHeight;var o;o=r>0?n/r:1;if(o>=this.popupSettings.scrollPercentage/100){var l=c.one(c.config.win);l.detach("scroll",a);l.detach("resize",i);clearTimeout(this.popupTimer);this.setupPopupOverlay(t);this.triggeredBy=u.SCROLL;this.show()}},resizeHandler:function(){this.viewportHeight=c.config.win.innerHeight},_loggedOutResponse:function(e){var t=n(this.scrollHandler,100);var a=n(this.resizeHandler,100);var i=c.one(c.config.win);this.popupSettings.showOnTimer&&(this.popupTimer=setTimeout(function(){this.setupPopupOverlay(e);i.detach("scroll",t);i.detach("resize",a);this.triggeredBy=u.TIME;this.show()}.bind(this),this.popupSettings.timerDelay));if(this.popupSettings.showOnScroll){if(this.documentHeight===this.viewportHeight&&!this.popupSettings.showOnTimer){this.setupPopupOverlay(e);this.triggeredBy=u.SCROLL;this.show();return}i.on("scroll",t,this,e,t,a);i.on("resize",a,this)}},_loggedInResponse:function(e){this.setupResponse=e;if(!this.isHidden){this.setupPopupOverlay(e);this.show()}},_onKeyUp:function(e){var t=27===e.keyCode;if(t){e.stopPropagation();this._closePopup(e)}},_closePopup:function(e){e&&e.preventDefault();if(!s){var t=e.currentTarget.hasClass("sqs-popup-overlay-close")?r("CLOSE"):r("DISMISS");this._trackEvent(l[t])}this.hide();this._recordClose();c.Squarespace.EscManager.enable();c.one(c.config.win.document.documentElement).detach("keyup",this._onKeyUp);this._resizeEvent&&this._resizeEvent.detach();this.fire("closed")},_recordClose:function(){var e=h.getLocalStorageData(g.KEY);if(e){e[g.CLOSED_DATE]=Date.now();h.saveToLocalStorage(g.KEY,e)}},_markSubmitted:function(){var e=h.getLocalStorageData(g.KEY);if(e){e[g.SUBMITTED]=true;h.saveToLocalStorage(g.KEY,e)}},_trackEvent:function(e){var t=[];var a=null;var i=c.one('div.sqs-slide[data-slide-type="popup-overlay"]');if(i.one(".sqs-slice-buttons"))i.all(".sqs-slice-buttons li a").each(function(e){t.push({buttonText:e.get("innerText"),clickthroughUrl:e.getAttribute("href")})});else if(i.one(".sqs-slice-newsletter")){t.push({buttonText:i.one(".newsletter-form button").get("value"),clickthroughUrl:null});a=i.one(".newsletter-form").getAttribute("data-form-id")}else t=null;m.trackOverlayEvent({pagePath:c.config.win.location.pathname,version:this.popupSettings.version.toString(),action:e,trigger:this.triggeredBy,layoutId:this.popupSettings.layout,buttons:t,formId:a})},hide:function(){this.isHidden=true;var e=this.get("boundingBox");e.removeClass("visible");e.setStyle("display","none");if(this.revertFocusContainment){this.revertFocusContainment();this.revertFocusContainment=null}this.previouslyFocusedElement?this.previouslyFocusedElement.focus():c.one("body").focus();a.removeListener(this._onMediaQueryChange)},show:function(){this.isHidden=false;if(!this.isSetup&&this.setupResponse){this.setupPopupOverlay(this.setupResponse);if(!this.isSetup)return}var e=this.get("boundingBox");e.addClass("visible");e.setStyle("display","block");s||this._trackEvent(l.DISPLAY);c.Global.fire("popupOverlay:showing");!s&&c.Squarespace.Singletons.WebsiteOverlaysManager&&c.Squarespace.Singletons.WebsiteOverlaysManager.syncPreviewBar();this.previouslyFocusedElement=c.one(c.config.doc.activeElement);var t=e.one(d.focusableSelector);t&&t.focus();this._onShowOrMediaQueryChange(!a.matches);a.addListener(this._onMediaQueryChange)},_onMediaQueryChange:function(e){this._onShowOrMediaQueryChange(!e.matches)},_onShowOrMediaQueryChange:function(e){var t=this.get("boundingBox");t.setAttribute("aria-labelledby","sqs-slash-page-header");if(e){t.setAttribute("role","dialog");this.revertFocusContainment=d.containFocus({container:this.get("boundingBox").getDOMNode(),root:c.one("body").getDOMNode(),setFocusOnContain:false,restoreFocusOnRevert:false})}else{t.setAttribute("role","region");if(this.revertFocusContainment){this.revertFocusContainment();this.revertFocusContainment=null}}}},{CSS_PREFIX:"sqs-popup-overlay",ATTRS:{style:{}}});c.config.win.Squarespace.onInitialize(c,function(){var e=c.config.win.Static.SQUARESPACE_CONTEXT.websiteSettings.popupOverlaySettings;var t=o.NONE;e&&e.style&&(t=e.style);if(!c.Squarespace.Singletons.PopupOverlay){c.Squarespace.Singletons.PopupOverlay=new i({style:t});var a=p.shouldShowPopupOverlay({context:{pageType:c.config.win.Static.SQUARESPACE_CONTEXT.pageType,collection:c.config.win.Static.SQUARESPACE_CONTEXT.collection},settings:e,isMobile:c.UA.mobile,urlSearch:window.location.search});(s||a)&&c.Squarespace.Singletons.PopupOverlay.render()}});c.config.win.Squarespace.onDestroy(c,function(){c.Squarespace.Singletons.PopupOverlay&&c.Squarespace.Singletons.PopupOverlay.destroy()})},"1.0",{requires:["base","json","node","squarespace-escmanager","squarespace-util","squarespace-slide-rendering-layouts-factory","squarespace-ss-widget"]})},"./src/main/webapp/universal/scripts-v6/product-quick-view.js":function(e,t){YUI.add("squarespace-product-quick-view",function(l){var c=".sqs-product-quick-view-button[data-id]";var a=[];var n=[];l.config.win.Squarespace.onInitialize(l,function(){if(l.UA.mobile)return;var r=null;var s={};var o=function(e,t){var a=e.getData("id");var i=e.getData("group")||"ungrouped";if(!s[i]){s[i]=[];l.all(c).each(function(e){(i===e.getData("group")||"ungrouped"===i&&!e.getData("group"))&&s[i].push(e.getData("id"))})}if(r)if(r.get("currentId")===a&&r.get("currentGroup")===i)r.open();else{r.set("currentId",a);r.set("currentGroup",i)}else{r=new l.Squarespace.Widgets.Products.QuickView({currentId:a,currentGroup:i,products:s,render:true});n.push(r)}t&&t.halt(true)};var e=l.one("body").delegate("click",function(e){o(e.currentTarget,e)},c);l.one("body").delegate("keydown",function(e){13!==e.keyCode&&32!==e.keyCode||o(e.currentTarget,e)},c);var t=l.Global.on("tweak:change",function(e){var t=e.getName();var a=t.indexOf("tweak-product-quick-view-lightbox-")>-1;var i=t.indexOf("tweak-product-item-gallery-")>-1;var s=l.one(".collection-type-products.view-item");if(a||i&&!s)if(r)r.get("isLightboxOpen")||r.open();else{var n=l.one(c);o(n,null)}else r&&r.get("lightbox").close()});a.push(e,t)});l.config.win.Squarespace.onDestroy(l,function(){a.forEach(function(e){e.detach()});n.forEach(function(e){e.destroy();e.get("lightbox").destroy(true)});a.length=0;n.length=0})},"1.0",{requires:["squarespace-widgets-products-quick-view"]})},"./src/main/webapp/universal/scripts-v6/promises.js":function(e,t){YUI.add("squarespace-promises",function(l){function a(){}var e=l.namespace("Squarespace.Promises");e.all=function(){var e=new l.Array(arguments);return new l.Promise(function(a,i){var s=[];var n=e.length;var r=0;var o=function(t){return function(e){r++;s[t]=e;r>=n&&a(s)}};if(0===n)return a([]);l.Array.each(e,function(e,t){l.when(e).then(o(t),i)})})};e.resolve=function(e,t){return e.then(t)};e.reject=function(e,t){return e.then(a,t)};e.rejectWith=function(a){return l.Squarespace.Promises.create(function(e,t){t(a)})};e.finish=function(e,t){return e.then(t,t)};e.chainFns=function(a,i){return function(){i=i||this;var e=a.length>0?a.shift().apply(i,arguments):l.when();var t=function(e,t){return l.Squarespace.Promises.resolve(l.when(e),l.bind(t,i))};return l.Array.reduce(a,e,t)}};e.create=function(e,t){return new l.Promise(l.bind(e,t))}},"1.0",{requires:["promise"]})},"./src/main/webapp/universal/scripts-v6/public-api.js":function(e,t,a){var i=a("./common/temp/node_modules/@sqs/imageloader/dist/index.js");var c=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/universal/src/shared/utils/Singleton.js");YUI.add("squarespace-public-api",function(l){l.namespace("Squarespace");l.config.win.ImageLoader=new i({allowConcurrentLoads:true,collectImageInfo:true});l.config.win.ImageLoader.bootstrap=l.config.win.ImageLoader.loadAll;l.Squarespace.Template=s.create({getTweakValue:function(e){if(e)return l.config.win.Static.SQUARESPACE_CONTEXT.tweakJSON[e]||l.config.win.Static.SQUARESPACE_CONTEXT.tweakJSON[e.replace("@","").replace(".","")]}});l.augment(l.Node,l.Squarespace.Legacy.Class.create({width:function(){return this.get("offsetWidth")},height:function(){return this.get("offsetHeight")}}));var a=[];l.config.win.JSTween={tween:function(e,t){console.error(c("You are using the Squarespace provided global JSTween which is no longer supported. Please either remove your usage of JSTween or include JSTween yourself."));a.push({node:e,config:t})},play:function(){a.forEach(function(e){console.error(c("You are using the Squarespace provided global JSTween which is no longer supported. Please either remove your usage of JSTween or include JSTween yourself."));var t=e.node;var a=e.config;var i={};var s={};var n=[];var r=[];for(var o in a){i[o]=a[o].start;s[o]=a[o].stop;a[o].onStart&&n.push(a[o].onStart);a[o].onStop&&r.push(a[o].onStop)}l.one(t).anim(s,{from:i,duration:a[Object.keys(a)[0]].duration,start:function(){n.forEach(function(e){e()})},end:function(){r.forEach(function(e){e()})}}).run()});a=[]}}},"1.0",{requires:["history","node","node-event-simulate","node-load","squarespace-dom-emitters-resize","squarespace-gallery-manager","squarespace-gallery-ng","squarespace-legacy-class","thirdparty-modernizr","yui-throttle"]})},"./src/main/webapp/universal/scripts-v6/scrolling-auto-complete-list.js":function(e,t){YUI.add("squarespace-scrolling-auto-complete-list",function(a){a.namespace("Squarespace.Widgets");var i="keyboardContinue";var s="listMouseUp";var n="listMouseDown";var r=a.Squarespace.Widgets.ScrollingAutoCompleteList=a.Base.create("ScrollingAutoCompleteList",a.AutoCompleteList,[],{initializer:function(){this.publish(i);this.publish(s);this.publish(n)},renderUI:function(){r.superclass.renderUI.call(this);var e=this._scrollNode=a.Node.create('<div class="'+this.getClassName()+'-scroll-container"></div>');this.get("listNode").wrap(e);e.hide();var t=this.get("className");t&&this.get("contentBox").addClass(t)},bindUI:function(){r.superclass.bindUI.call(this);var t=this._scrollNode;var e=this.get("inputNode");this.after("activeItemChange",function(e){e.newVal&&this._scrollToActiveItem()},this);this.on("results",function(e){e.results.length>0?t.show():t.hide()},this);this.on(["select","clear"],function(){t.hide()});this.get("boundingBox").on(["focusoutside","clickoutside"],function(e){t.hide()});e.on("keydown",function(e){switch(e.keyCode){case 13:this.selectItem();this.fire(i);break;case 9:if(this.get("activeItem")){this.selectItem();this.fire(i)}break;case 27:this.hide();break;case 38:this._activatePrevItem();break;case 40:this._activateNextItem();break}},this);this._listNode.delegate("mouseup",function(e){this.fire(s);e.preventDefault()},this._SELECTOR_ITEM,this);this._listNode.delegate("mousedown",function(e){this.fire(n)},this._SELECTOR_ITEM,this)},_activateNextItem:function(){r.superclass._activateNextItem.call(this);a.Lang.isNull(this.get("activeItem"))&&this.set("activeItem",this._getFirstItemNode())},_activatePrevItem:function(){r.superclass._activatePrevItem.call(this);a.Lang.isNull(this.get("activeItem"))&&this.set("activeItem",this._getLastItemNode())},_scrollToActiveItem:function(){this.get("activeItem").scrollIntoView();var e=this._scrollNode;var t=e.get("scrollTop");var a=e.one("li:first-child").get("offsetHeight");e.set("scrollTop",a*Math.round(t/a))}},{CSS_PREFIX:"sqs-scroll-ac",ATTRS:{className:{validator:a.Squarespace.AttrValidators.isNullOrString}}})},"1.0",{requires:["autocomplete","base","event-outside","lang/autocomplete-list","squarespace-attr-validators"]})},"./src/main/webapp/universal/scripts-v6/search-page.js":function(e,t,a){var l=a("./src/main/webapp/universal/src/shared/utils/commerce/trackEvent.ts");var c=a("./common/temp/node_modules/lodash/isNil.js");YUI.add("squarespace-search-page",function(o){var n=function(e){var t=o.Node.create("<div>");t.set("innerHTML",e);return t.get("text")};o.namespace("Squarespace.Widgets");var r="/search";var i=o.Squarespace.Widgets.SearchPage=o.Base.create("searchPage",o.Squarespace.Widgets.SearchContainer,[],{initializer:function(e){this._isFirstSync=true;this.get("censusEnabled")&&this._trackSearchHit(this.get("searchQuery"),this.get("collectionFilter"),o.config.doc.referrer)},destructor:function(){if(this._resizeEmitter){this._resizeEmitter.destroy();this._resizeEmitter=null}o.Lang.isValue(this._searchTypingTimeout)&&this._searchTypingTimeout.cancel()},renderUI:function(){i.superclass.renderUI.apply(this,arguments);var e=this.get("inputWrapper");var t=new o.Squarespace.Widgets.SearchInputBox({queryString:this.get("searchQuery"),srcNode:e,boundingBox:e,inputType:"text"});this.set("searchInputBox",t);t.render().focus();this._resizeEmitter=new o.Squarespace.ResizeEmitter({timeout:100});this._initRender()},_initRender:function(){var e=n(this.get("searchQuery"));this.get("inputWrapper").one("input").set("value",e);var t=!o.Lang.isValue(this.get("resultItemEls"));t&&""!==e&&this.get("noticeEl").setContent(this.get("strings.emptyNotice")).toggleClass("hide");this.get("resultsWrapperEl").toggleClass("empty",t);var a=this.get("collectionFilter");""!==a&&this.set("searchFilter",[{name:"collectionId",value:a}]);this._toggleMore(true);this.get("outputEl").removeClass("hide")},bindUI:function(){i.superclass.bindUI.apply(this,arguments);var e=this.get("resultEl");var t=".search-result";e.delegate("click",this._onResultClick,t,this);e.delegate("keydown",function(e){var t=13===e.keyCode;t&&this._onResultClick(e)}.bind(this),t,this);this.after("searchQueryChange",this._updateHistory,this);this.get("inputWrapper").one("input").on("keyup",this._onKeyUp,this);var a=this.get("moreEl");a.on("click",this._nextPage,this);a.on("keydown",function(e){var t=13===e.keyCode;var a=32===e.keyCode;(t||a)&&this._nextPage(e)},this);this._resizeEmitter.on("resize",this._onResize,this)},syncUI:function(){0===this.get("page")&&this.get("outputEl").addClass("hide");if(this._isFirstSync){this._isFirstSync=false;this._loadImages();this.get("outputEl").removeClass("hide")}else{i.superclass.syncUI.apply(this,arguments);this._toggleLoader();setTimeout(this._syncOutput.bind(this),150)}},_syncOutput:function(){var e=this.get("resultsWrapperEl");var t=this.get("page");var a=this.get("perPage");var i=o.Node.create(this._getResultsTemplate());if(o.Lang.isValue(i)){i.all(".sqs-search-ui-item").removeClass("sqs-search-ui-item").addClass("sqs-search-page-item");if(0===t)e.setContent(i);else{var s=i.get("children");var n=s.size();var r=n%a===0?a:n%a;s=s.splice(-r);e.append(s)}this.set("resultItemEls",e.get("children"))}this._loadImages();this._toggleNotice(i);this._toggleMore();this.get("loading")||this.get("outputEl").removeClass("hide")},_loadImages:function(){this.get("contentBox").all("img[data-src]").each(function(e){ImageLoader.load(e,{load:true})})},_toggleNotice:function(e){var t=this.get("noticeEl");var a=this.get("resultsWrapperEl");var i=""!==this.get("searchQuery");var s=!o.Lang.isValue(e)&&!this.get("loading");var n=!s;t.toggleClass("hide",n||!i);a.toggleClass("empty",!o.Lang.isValue(e));if(s){a.empty();t.setContent(this.get("strings.emptyNotice"))}},_toggleLoader:function(){""===this.get("searchQuery")&&this.set("loading",false);var e=o.Lang.isValue(this.get("loading"))&&this.get("loading");var t=this.get("spinnerEls");if(e&&!o.Lang.isValue(this._inputSpinner)&&!o.Lang.isValue(this._moreSpinner)){this._inputSpinner=new o.Squarespace.Spinner({color:"dark",size:"large",render:t.item(0)});this._moreSpinner=new o.Squarespace.Spinner({size:"large",render:t.item(1)})}this.get("inputWrapper").toggleClass("loading",e);this.get("moreEl").toggleClass("loading",e);t.toggleView(e)},_toggleMore:function(e){var t=this.get("moreEl");if(!o.Lang.isValue(this.get("resultItemEls"))||""===this.get("searchQuery")){t.addClass("hide");return}var a=e?this.get("resultEl").getData("count"):this.get("totalCount");t.toggleClass("hide",a-this.get("resultItemEls").size()<=0)},_getResultsTemplate:function(){return o.Squarespace.UITemplates.render(i.TEMPLATE_RESULTS_NAME,this._getSearchDataModel())},_onKeyUp:function(e){o.Lang.isValue(this._searchTypingTimeout)&&this._searchTypingTimeout.cancel();(e.keyCode<37||e.keyCode>40)&&(this._searchTypingTimeout=o.later(this.get("displayDelay"),this,function(){this.get("searchInputBox").onSubmit()}))},_onResultClick:function(e){e.halt();var t=e.target.ancestor(".search-result",true);var a=t.getData("url");var i=o.Lang.isValue(a)?a:this._getSearchItemUrl(t);this._trackSearchHelper(t);this._redirect(i+"?"+o.QueryString.stringify({rq:this.get("searchQuery")}))},_trackSearchHelper:function(e){var t=e.getAttribute("itemid");var a=this.get("resultItems");if(c(a))return;var i;var s;var n;for(var r=0;r<a.length;r++)if(a[r].id===t){i=a[r].title.replace(/<(.|\n)*?>/g,"");s=a[r].categories;n=a[r].tags;break}l.trackSearch({content_name:i,content_category:s,content_tag:n,search_string:this.get("searchQuery")})},_updateHistory:function(){var e=n(this.get("searchQuery"));if(!o.Lang.isValue(e)||""===e)return;var t=o.config.win.history;var a=e+" - "+o.config.doc.title;var i={};i.q=e;var s=this.get("collectionFilter");""!==s&&(i.f_collectionId=s);t.pushState(i,a,r+"?"+o.QueryString.stringify(i))},_onResize:function(){this._loadImages()},_setSearchQuery:function(e){o.Lang.isValue(e)&&""!==e&&(e=o.Squarespace.Escaping.escapeForHtml(e+""));return o.Lang.isValue(e)?e:""}},{CSS_PREFIX:"sqs-search-page",TEMPLATE_RESULTS_NAME:"search-result.html",HTML_PARSER:{inputWrapper:".sqs-search-page-input",spinnerEls:[".spinner-wrapper"],outputEl:".sqs-search-page-output",noticeEl:".sqs-search-page-notice",resultEl:".sqs-search-page-result",resultsWrapperEl:".sqs-search-page-list .search-results",resultItemEls:[".sqs-search-page-list .search-results .search-result"],moreEl:".sqs-search-page-more"},ATTRS:{searchQuery:{valueFn:function(){var e=o.QueryString.parse(o.config.doc.location.search.substring(1)).q;return this._setSearchQuery(e)},setter:"_setSearchQuery",validator:o.Squarespace.AttrValidators.isString},collectionFilter:{valueFn:function(){var e=o.QueryString.parse(o.config.doc.location.search.substring(1)).f_collectionId;o.Lang.isValue(e)&&""!==e&&(e=o.Squarespace.Escaping.escapeForHtml(e+""));return o.Lang.isValue(e)?e:""},validator:o.Squarespace.AttrValidators.isNullOrString},inputWrapper:{value:null,validator:o.Squarespace.AttrValidators.isNullOrNode,writeOnce:"initOnly"},outputEl:{value:null,validator:o.Squarespace.AttrValidators.isNullOrNode,writeOnce:"initOnly"},noticeEl:{value:null,validator:o.Squarespace.AttrValidators.isNullOrNode,writeOnce:"initOnly"},spinnerEls:{value:null,validator:o.Squarespace.AttrValidators.isNullOrNodeList,writeOnce:"initOnly"},resultEl:{value:null,validator:o.Squarespace.AttrValidators.isNullOrNode,writeOnce:"initOnly"},resultsWrapperEl:{value:null,validator:o.Squarespace.AttrValidators.isNullOrNode},resultItemEls:{value:null,validator:o.Squarespace.AttrValidators.isNullOrNodeList},moreEl:{value:null,validator:o.Squarespace.AttrValidators.isNullOrNode,writeOnce:"initOnly"},displayDelay:{value:500,validator:o.Squarespace.AttrValidators.isNumber},perPage:{value:20,validator:o.Squarespace.AttrValidators.isNumber,writeOnce:"initOnly"}}});o.config.win.Squarespace.onInitialize(o,function(){o.all(".sqs-search-page").each(function(e){new i({srcNode:e}).render()})})},"1.0",{requires:["autocomplete-plugin","base","datasource","event","querystring","squarespace-animations","squarespace-dom-emitters-resize","squarespace-escaping-utils","squarespace-search","squarespace-search-result-template","squarespace-spinner","squarespace-ss-widget","squarespace-ui-templates","squarespace-util"]})},"./src/main/webapp/universal/scripts-v6/search-preview.js":function(e,t,a){var l=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var c=a("./src/main/webapp/universal/src/shared/utils/commerce/trackEvent.ts");var p=a("./src/main/webapp/frontend/packages/enums/CensusEventType.js");var h=a("./common/temp/node_modules/lodash/isNil.js");var g=a("./src/main/webapp/universal/src/shared/utils/census/CensusUtils.ts");YUI.add("squarespace-search-preview",function(u){u.namespace("Squarespace");var t=38;var a=40;var i=13;var s=27;var n="/search";var r=200;var o=function(e){var t=u.QueryString.stringify(e);document.location.href=""!==t?n+"?"+t:n};var d=u.Base.create("searchPreviewDropdown",u.Squarespace.Widgets.SSWidget,[u.WidgetPosition],{renderUI:function(){d.superclass.renderUI.apply(this,arguments);var e=this.get("contentBox");var t=this.get("searchInput").get("offsetWidth");e.addClass("sqs-search-preview-ui");e.setStyle("width",t);e.setContent(d.TEMPLATE);this._startScrollCheckTimer();this._close();this._showImages=t>=r;this._showImages||e.addClass("no-image");this._resizeEmitter=new u.Squarespace.ResizeEmitter({timeout:100});this.get("contentBox").one(".sqs-search-ui-list").plug(u.Plugin.ScrollInfo)},bindUI:function(){d.superclass.bindUI.apply(this,arguments);this.after("searchInputChange",this._bindInputEvents,this);this._bindInputEvents()},_bindInputEvents:function(){var e=this.get("searchInput");var t=this.get("contentBox");if(u.Lang.isValue(e)){e.after("typing",this._onTyping,this);e.after("click",this._onSearchClick,this);e.after("searchQueryChange",this._onSearchQueryChange,this);e.after("searchQueryChange",this._trackOnQueryChange,this);e.after("focus",this._show,this);e.after("blur",this._onBlur,this)}this.after(this.get("id")+"|resultItemsChange",this._onSearchResultChange,this);this.after(this.get("id")+"|loadingChange",this.syncUI,this);t.on(this.get("id")+"|hover",this._onHover,this._onMouseLeave,this);t.delegate(this.get("id")+"|click",this._onResultClick,".sqs-search-ui-list .search-result",this);t.delegate(this.get("id")+"|hover",this._onResultHover,".sqs-search-ui-list .search-result",this);this._resizeEmitter.after("resize",this._ajustDropdownPosition,this)},syncUI:function(){d.superclass.syncUI.apply(this,arguments);var e=this.get("searchInput");var t=this.get("contentBox");var a=this.get("page");var i=e.getY()+e.get("offsetHeight");this.move(e.getX(),i);var s=u.Node.create(u.Squarespace.UITemplates.render(d.TEMPLATE_RESULTS_NAME,this._getSearchDataModel()));this._showImages&&this._loadImages(s);this._toggleNotice(s);this._toggleLoader();if(!u.Lang.isValue(s))return;var n=t.one(".sqs-search-ui-result .search-results");var r=s.all(".search-result");if(0===a)n.setContent(s);else if(u.Lang.isValue(r)){var o=n.get("children").size();var l=s.get("children");l=l.splice(o);n.append(l)}var c=t.one(".sqs-search-ui-list");u.Lang.isValue(c)&&c.plug(u.Squarespace.Plugin.ScrollLock)},destructor:function(){u.Lang.isValue(this.scrollTimer)&&this.scrollTimer.cancel();this._resizeEmitter&&this._resizeEmitter.destroy();this._spinner&&this._spinner.remove(true)},_getSearchDataModel:function(e){var t=this.get("resultItems");var a={loading:this.get("loading"),items:t,itemsCount:this.get("totalCount")};return a},_loadImages:function(e){u.Lang.isValue(e)&&e.all("img[data-src]").each(function(e){ImageLoader.load(e)})},_toggleNotice:function(e){var t=this.get("contentBox").one(".search-result-notice");var a=!u.Lang.isValue(e);t.toggleClass("hide",!a);if(a){var i=this.get("contentBox").one(".sqs-search-ui-result .search-results");i.empty();this._itemSelected=null;t.setContent(this.get("strings.notice"))}},_toggleLoader:function(){var e=this.get("searchInput");var t=e.previous(".spinner-wrapper");var a=u.Lang.isValue(this.get("loading"))&&this.get("loading");a&&!t.hasChildNodes()&&(this._spinner=new u.Squarespace.Spinner({color:this.get("theme"),size:"default",render:t}));e.toggleClass("loading",a);t.toggleView(a)},isOpened:function(){return this._opened},hasItemSelected:function(){var e=this.get("contentBox");return u.Lang.isValue(e.one(".sqs-search-ui-list .search-result.selected"))},_close:function(){var e=this.get("contentBox");u.Lang.isValue(this.scrollTimer)&&this.scrollTimer.cancel();u.Lang.isValue(this._itemSelected)&&this._itemSelected.removeClass("selected");this._itemSelected=null;e.hide();this._opened=false},_show:function(){if(!u.Lang.isValue(this.get("resultItems"))||""===this.get("searchInput").get("value"))return;this.get("contentBox").show();this._startScrollCheckTimer();this._opened=true},_search:function(){var e=this.get("searchInput");var t=e.get("value");var a=this.get("page");if(u.Lang.isValue(t)&&0===t.length||!u.Lang.isValue(t))return;var i={q:t,p:a,size:this.get("perPage")};var s=this.get("collectionFilter");u.Lang.isValue(s)&&""!==s&&(i.f_collectionId=s);u.Data.get({url:"/api/search/GeneralSearch",data:i,success:this._searchResultCallback,error:this._searchResultCallbackError},this)},_searchResultCallback:function(e){this.set("loading",false);this.set("facets",e.facets);this.set("totalCount",e.totalCount);var t=this.get("resultItems");var a=this.get("page");if(u.Lang.isValue(e.serviceError))false;else if(a>0&&u.Lang.isValue(t)){t=t.concat(e.items);this.set("resultItems",t)}else this.set("resultItems",e.items)},_searchResultCallbackError:function(){this.set("loading",false)},_onSearchResultChange:function(e){this.syncUI();this._show()},_onSearchQueryChange:function(e){if(""===this.get("searchInput").get("value")){this.set("loading",false);this.isOpened()&&this._close()}this._clearResult();this._search()},_trackOnQueryChange:function(){var e=this.get("searchInput").get("value");if(""===e)return;var t=[];var a=this.get("collectionFilter");u.Lang.isValue(a)&&t.push(a);g.track(p.SITE_SEARCH,{query:e,filters:{collectionIds:t},referrer:u.config.doc.location.href})},_onSearchClick:function(e){u.later(1,this,function e(){if(""===this.get("searchInput").get("value")&&this.isOpened()){this.set("loading",false);this._close()}})},_clearResult:function(){this.set("resultItems",null);this.set("page",0)},_onTyping:function(e){e.keyCode!==a&&e.keyCode!==t&&e.keyCode!==i&&this.set("loading",true);e.keyCode===i&&this._onEnter();if(this.isOpened())switch(e.keyCode){case a:this._moveSelectedItem(1);break;case t:this._moveSelectedItem(-1);break}},_moveSelectedItem:function(e){var t=this.get("contentBox").all(".search-result");if(!u.Lang.isValue(t))return;var a=e<0?t.size()-1:0;if(u.Lang.isValue(this._itemSelected)){this._itemSelected.removeClass("selected");var i=t.indexOf(this._itemSelected);var s=t.item(i+e);u.Lang.isValue(s)?this._itemSelected=s.addClass("selected"):this._itemSelected=t.item(a).addClass("selected")}else this._itemSelected=t.item(a).addClass("selected");this._scrollTo(this._itemSelected,e)},_scrollTo:function(e,t){var a=this.get("contentBox").one(".sqs-search-ui-list");var i=a.one(".search-results").get("children");var s=i.indexOf(e);switch(s){case 0:a.set("scrollTop",0);break;case i.size()-1:a.set("scrollTop",a.scrollInfo.getScrollInfo().scrollHeight);break;default:a.set("scrollTop",e.getY()-a.getY()+a.get("scrollTop"));break}},_onResultHover:function(e){u.Lang.isValue(this._itemSelected)&&this._itemSelected.removeClass("selected");this._itemSelected=e.target.ancestor(".search-result",true)},_onHover:function(e){this._isHovered=true},_onMouseLeave:function(){this._itemSelected=null;this._isHovered=false},_onEnter:function(){this._redirect(this._itemSelected)},_onBlur:function(e){e.halt();if(!this._isHovered){this.get("searchInput").blur();this._close()}},_getSearchResultObject:function(t){var e=this.get("resultItems");return u.Array.find(e,function(e){return e.id===t})},_onResultClick:function(e){e.halt();var t=e.target;var a="search-result";var i=t.hasClass(a);var s=i?t:t.ancestor("."+a);this._trackSearchHelper(s);this._redirect(s)},_trackSearchHelper:function(e){var t=e.getAttribute("itemid");var a=this.get("resultItems");if(h(a))return;var i;var s;var n;for(var r=0;r<a.length;r++)if(a[r].id===t){i=a[r].title.replace(/<(.|\n)*?>/g,"");s=a[r].categories;n=a[r].tags;break}c.trackSearch({content_name:i,content_category:s,content_tag:n,search_string:this.get("searchInput").get("value")})},_redirect:function(e){if(!u.Lang.isValue(this._itemSelected)){o(this._getQueryStringObject());return}var t=e.getAttribute("itemid");if(!u.Lang.isValue(t))return;var a=this._getSearchResultObject(t);this._close();document.location.href=a.itemUrl+"?"+u.QueryString.stringify({rq:this.get("searchInput").get("value")})},_getQueryStringObject:function(){var e={};""!==this.get("searchInput").get("value")&&(e.q=this.get("searchInput").get("value"));var t=this.get("collectionFilter");u.Lang.isValue(t)&&(e.f_collectionId=t);return e},_nextPage:function(){var e=this.get("page")+1;this.set("page",e);this._search()},_infiniteScroll:function(){var e=this.get("contentBox").one(".sqs-search-ui-list");if(!u.Lang.isValue(e))return;var t=e.get("scrollHeight");var a=e.get("scrollTop");var i=e.get("offsetHeight");var s=t-i-a;var n=this.get("resultItems");var r=this.get("totalCount");if(!u.Lang.isValue(n))return;s<100&&r>n.length&&this._nextPage()},_startScrollCheckTimer:function(e){u.Lang.isValue(this.scrollTimer)&&this.scrollTimer.cancel();e=e||250;this.scrollTimer=u.later(e,this,this._infiniteScroll,{},true)},_ajustDropdownPosition:function(){var e=this.get("searchInput");if(!u.Lang.isValue(e.getDOMNode()))return;var t=e.getY()+e.get("offsetHeight");this.get("contentBox").setStyle("width",e.get("offsetWidth"));this.move(e.getX(),t)}},{TEMPLATE_RESULTS_NAME:"search-result.html",TEMPLATE:'<div class="sqs-search-preview-ui"><div class="sqs-search-ui-result"><div class="search-result-notice hide"></div><div class="sqs-search-ui-list"><div class="search-results"></div></div></div></div>',ATTRS:{strings:{value:{notice:l("No results found.")}},searchInput:{validator:u.Squarespace.AttrValidators.isNode},resultItems:{validator:u.Squarespace.AttrValidators.isNullOrArray},totalCount:{value:0,validator:u.Squarespace.AttrValidators.isNumber},page:{value:0,validator:u.Squarespace.AttrValidators.isNumber},collectionFilter:{validator:u.Squarespace.AttrValidators.isNullOrString},displayDelay:{value:500,validator:u.Squarespace.AttrValidators.isNumber},perPage:{value:10,validator:u.Squarespace.AttrValidators.isNumber},loading:{value:false,validator:u.Squarespace.AttrValidators.isBoolean},theme:{value:"dark",validator:u.Squarespace.AttrValidators.isString}}});var e=u.namespace("Squarespace.Widgets").SearchPreview=u.Base.create("SearchPreview",u.Squarespace.SSWidget,[],{initializer:function(e){var t=this.get("render");this._searchInput=t.one(".search-input");this.set("collection",t.getData("collection"));this.set("previewEnabled","true"===t.getData("preview"));var a=t.get("className").match(/color-(.*)/);u.Lang.isValue(a)&&this.set("theme",a[1])},destructor:function(){u.Lang.isValue(this._searchTypingTimeout)&&this._searchTypingTimeout.cancel()},renderUI:function(){e.superclass.renderUI.call(this);this._alterSearchInputStyle();this.get("previewEnabled")&&this._initPreview()},bindUI:function(){this._searchInput.on("keyup",this._onKeyUp,this);this._searchInput.on("keydown",function(e){e.keyCode===s&&e.preventDefault()})},_onKeyUp:function(e){if(u.Lang.isValue(this.previewWidget)){u.Lang.isValue(this._searchTypingTimeout)&&this._searchTypingTimeout.cancel();if(e.keyCode===s&&this.previewWidget.isOpened()){this.previewWidget._close();e.stopPropagation();return}var t={keyCode:e.keyCode};this._searchInput.fire("typing",t);this._searchInput.get("value")!==this._prevVal&&(this._searchTypingTimeout=u.later(this.previewWidget.get("displayDelay"),this,function e(){this._searchInput.fire("searchQueryChange");this._prevVal=this._searchInput.get("value")}))}else e.keyCode===i&&o(this._getQueryStringObject())},_getQueryStringObject:function(){var e={};var t=this._searchInput.get("value");u.Lang.isValue(this._searchInput)&&""!==t&&(e.q=t);return this._appendCollectionFilter(e,"f_collectionId")},_initPreview:function(){var e={searchInput:this._searchInput,theme:this.get("theme")};this.previewWidget=new d(this._appendCollectionFilter(e,"collectionFilter"));this.previewWidget.render()},_appendCollectionFilter:function(e,t){var a=this.get("collection");u.Lang.isValue(a)&&""!==a&&(e[t]=a);return e},_alterSearchInputStyle:function(){u.UA.safari&&!u.UA.ios?this._searchInput.setStyle("paddingRight","0"):u.UA.safari&&u.UA.ios?this._searchInput.setAttribute("type","text"):u.UA.chrome&&u.UA.ios||this._searchInput.addClass("hover-effect")}},{CSS_PREFIX:"sqs-search-preview",renderAllSearchPreviewNodes:function(){u.all(".sqs-search-ui-text-input").each(function(e){!u.Widget.getByNode(e.one("."+u.Squarespace.Widgets.SearchPreview.CSS_PREFIX))&&u.Lang.isValue(e.one(".search-input"))&&new u.Squarespace.Widgets.SearchPreview({render:e})})}});u.config.win.Squarespace.onInitialize(u,function(){u.Squarespace.Widgets.SearchPreview.renderAllSearchPreviewNodes()})},"1.0",{requires:["base","datasource","event","node-scroll-info","squarespace-animations","squarespace-dom-emitters-resize","squarespace-plugin-scroll-lock","squarespace-search-result-template","squarespace-spinner","squarespace-ss-widget","squarespace-ui-templates","widget","widget-position"]})},"./src/main/webapp/universal/scripts-v6/search.js":function(e,t,a){var s=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var n=a("./src/main/webapp/frontend/packages/enums/CensusEventType.js");var o=a("./src/main/webapp/universal/src/shared/utils/census/CensusUtils.ts");YUI.add("squarespace-search",function(r){r.namespace("Squarespace");var t=38;var a=40;var i=13;r.Squarespace.Widgets.SearchContainer=r.Base.create("searchContainer",r.Squarespace.SSWidget,[],{bindUI:function(){var e=this.get("searchInputBox");e.after("queryStringChange",this._onSearchInputBoxChange,this);this.after("searchQueryChange",this._onSearchQueryChange,this);this.get("censusEnabled")&&this.after("searchQueryChange",this._trackOnQueryChange,this,this.get("collectionFilter"));this.after("resultItemsChange",this._onSearchResultChange,this);this.after("loadingChange",this.syncUI,this);this.get("contentBox").on("keyup",this._onKeyup,this)},_onSearchQueryChange:function(){this._clearResult();this.set("loading",true);this._search()},_onSearchFilterChange:function(){this._clearResult();this.set("loading",true);this._search()},_onSearchResultChange:function(){this.syncUI()},_clearResult:function(){this.set("resultItems",null);this.set("page",0)},_onSearchInputBoxChange:function(e){this.set("searchQuery",e.newVal)},_onKeyup:function(e){e.keyCode!==t||this.get("searchInputBox").isAutocompleteEnabled()?e.keyCode!==a||this.get("searchInputBox").isAutocompleteEnabled()?e.keyCode===i&&this._onEnter():this._moveSelectedResultItem(1):this._moveSelectedResultItem(-1)},_moveSelectedResultItem:function(e){var t=this.get("contentBox").one(".active");if(r.Lang.isValue(t)){t.removeClass("active");var a=this.get("contentBox").all(".sqs-search-ui-item");var i=a.indexOf(t);var s=a.item(i+e);if(r.Lang.isValue(s)){s.addClass("active");s.scrollIntoView()}}else if(e>0){var n=this.get("contentBox").one(".sqs-search-ui-item");if(r.Lang.isValue(n)){n.addClass("active");n.scrollIntoView()}}},_onEnter:function(){var e=this.get("contentBox").one(".active");r.Lang.isValue(e)||this.get("searchInputBox").isAutocompleteEnabled()||this._redirect(this._getSearchItemUrl(e))},_getSearchItemUrl:function(e){if(!r.Lang.isValue(e))return;var t=e.getAttribute("itemid");if(!r.Lang.isValue(t))return;var a=this._getSearchResultObject(t);return a.itemUrl},_redirect:function(e){r.Lang.isValue(e)&&(document.location.href=e)},_search:function(){var e=this.get("searchQuery");var t=this.get("searchFilter");var a=this.get("page");if(0===e.length)return;var i={q:e,p:a};r.Lang.isValue(t)&&r.Array.each(t,function(e){i["f_"+e.name]=e.value});r.Data.get({url:"/api/search/GeneralSearch",data:i,success:this._searchResultCallback,error:this._searchResultCallbackError},this)},_searchResultCallback:function(e){this.set("loading",false);this.set("facets",e.facets);this.set("totalCount",e.totalCount);var t=this.get("resultItems");var a=this.get("page");if(e.serviceError)false;else if(a>0&&t){t=t.concat(e.items);this.set("resultItems",t)}else this.set("resultItems",e.items)},_searchResultCallbackError:function(){this.set("loading",false);this._errorNotice=this.get("strings.errorNotice")},_getSearchDataModel:function(){var e=this.get("resultItems");var t={loading:this.get("loading"),error:this._errorNotice,items:e};r.Lang.isValue(e)?0===e.length&&(t.notice=this.get("strings.emptyNotice")):t.notice=this.get("strings.instruction");return t},_getSearchResultObject:function(t){return r.Array.find(this.get("resultItems"),function(e){return e.id===t})},_nextPage:function(){var e=this.get("page")+1;this.set("page",e);this._search()},_trackOnQueryChange:function(e,t){this._trackSearchHit(e.newVal,t,r.config.doc.location.href)},_trackSearchHit:function(e,t,a){if(!r.Lang.isValue(e)||""===e)return;var i=[];r.Lang.isValue(t)&&""!==t&&i.push(t);o.track(n.SITE_SEARCH,{query:e,filters:{collectionIds:i},referrer:a})}},{CSS_PREFIX:"sqs-search-container",ATTRS:{strings:{value:{errorNotice:s("Something wrong happened. Please reload."),emptyNotice:s("Your search did not match any documents."),instruction:s("Begin typing your search above and press return to search.")}},searchInputBox:{value:null},searchFilter:{value:[],validator:r.Squarespace.AttrValidators.isArray},page:{value:0,validator:r.Squarespace.AttrValidators.isNumber},searchQuery:{value:"",validator:r.Squarespace.AttrValidators.isString},resultItems:{validator:r.Squarespace.AttrValidators.isNullOrArray},totalCount:{value:0,validator:r.Squarespace.AttrValidators.isNumber},facets:{value:[],validator:r.Squarespace.AttrValidators.isArray},loading:{value:false,validator:r.Squarespace.AttrValidators.isBoolean},censusEnabled:{value:true,validator:r.Squarespace.AttrValidators.isBoolean}}});r.Squarespace.Widgets.SearchInputBox=r.Base.create("searchInputBox",r.Widget,[],{renderUI:function(){var e=this._createSearchNode();this.get("contentBox").append(e)},bindUI:function(){this._enableAutoComplete();var e=this.get("boundingBox").one("form");e.on("submit",this.onSubmit,this);e.on("keydown",this._onKeyDown,this);r.Squarespace.Utils.onPointerAction(this.get("boundingBox").one("input"),this.focus,this);this.after("queryStringChange",this._resetAutoComplete,this)},_onKeyDown:function(e){27!==e.keyCode&&e.stopPropagation()},_autocompleteSelected:function(e){r.later(1,this,function(e){this.set("queryString",e.result.text)},e)},onSubmit:function(e){r.Lang.isValue(e)&&e.preventDefault();var t=this.get("contentBox").one("input").get("value");this.set("queryString",t)},_enableAutoComplete:function(){var e=location.protocol+"//"+location.host+"/api/search/SearchSuggest";var t=new r.DataSource.IO({source:e});var a=this.get("contentBox").one("input");if(this.get("withSearchSuggest")&&!a.ac){a.plug(r.Plugin.AutoComplete,{source:t,requestTemplate:"?q={query}",resultTextLocator:"suggestion",resultListLocator:function(e){return r.JSON.parse(e[0].responseText)}});var i=this.get("boundingBox").one("input").ac;i.on("select",this._autocompleteSelected,this)}},isAutocompleteEnabled:function(){var e=this.get("contentBox").all(".yui3-aclist-item");return e.size()>0},_resetAutoComplete:function(){var e=this.get("boundingBox").one("input");e.set("value",this.get("queryString"));e.ac&&e.unplug("ac");this._enableAutoComplete()},focus:function(){var e=this.get("contentBox").one("input");e.focus();e.set("value",this.get("queryString"));""!==this.get("queryString")&&e.select()},blur:function(){var e=this.get("contentBox").one("input");e.blur()},_createSearchNode:function(){var e=r.Node.create("<input/>");e.setAttrs({placeholder:s("Type to search…"),type:this.get("inputType"),spellcheck:false});e.setAttribute("value",this.get("queryString"));var t=r.Node.create("<form/>");t.append(e);return t}},{CSS_PREFIX:"sqs-search-input",ATTRS:{queryString:{value:"",validator:r.Squarespace.AttrValidators.isString},inputType:{value:"search",validator:r.Squarespace.AttrValidators.isString},withSearchSuggest:{value:false,validator:r.Squarespace.AttrValidators.isBoolean}}})},"1.0",{requires:["autocomplete-plugin","base","datasource","event","squarespace-animations","squarespace-ss-widget","squarespace-util"]})},"./src/main/webapp/universal/scripts-v6/session-storage.js":function(e,t,a){var o=a("./common/temp/node_modules/@sqs/cookie-cutter/index.js");YUI.add("squarespace-session-storage",function(n){n.namespace("Squarespace");var r=function(){return n.Lang.isValue(window.localStorage)};n.Squarespace.SessionStorage={saveSessionData:function(e,t,a){var i={value:t};n.Lang.isDate(a)?i.expires=a.getTime():a=null;var s=btoa(n.JSON.stringify(i));r()?window.localStorage.setItem(e,s):null===a?o.set(e,s,{path:"/"}):o.set(e,s,{path:"/",expires:a})},getSessionData:function(e){var t;t=r()?window.localStorage.getItem(e):o.get(e);if(!n.Lang.isValue(t))return null;var a=n.JSON.parse(atob(t));if(n.Lang.isNumber(a.expires)&&a.expires<(new Date).getTime()){r()&&window.localStorage.removeItem(e);return null}return a.value},removeSessionData:function(e){r()?window.localStorage.removeItem(e):o.set(e,"",{expires:new Date(0)})}}},"1.0",{requires:["base"]})},"./src/main/webapp/universal/scripts-v6/settings/site/billing-panels/access-rules.js":function(e,t,a){var i=a("./common/temp/node_modules/lodash/invert.js");YUI.add("squarespace-settings-site-billing-panels-access-rules",function(t){t.namespace("Squarespace.Settings.Site.BillingPanels");t.Squarespace.Settings.Site.BillingPanels.AccessRules=t.Base.create("billingAccessRules",t.Base,[],{trialAccess:function(){return this._hasBillingStatus(t.Squarespace.BillingStatus.TRIAL)&&!this._hasSiteStatus(t.Squarespace.StatusConstants.EXPIRED)&&this.get("systemAvailable")},subscribedAccess:function(){return this._hasBillingStatus(t.Squarespace.BillingStatus.SUBSCRIBED)&&(this._hasSiteStatus(t.Squarespace.StatusConstants.PAID)||this._hasSiteStatus(t.Squarespace.StatusConstants.ACTIVE_PARKING_PAGE))&&this.get("systemAvailable")},internalAccess:function(){return this._hasBillingStatus(t.Squarespace.BillingStatus.FREE)&&this._hasSiteStatus(t.Squarespace.StatusConstants.INTERNAL)&&this.get("systemAvailable")},compedAccess:function(){return this._hasBillingStatus(t.Squarespace.BillingStatus.FREE)&&this.get("systemAvailable")},linkedAccess:function(){return this._hasBillingStatus(t.Squarespace.BillingStatus.LINKED)&&this.get("systemAvailable")},pastDueAccess:function(){return this._hasSiteStatus(t.Squarespace.StatusConstants.PASTDUE)&&!this._hasBillingStatus(t.Squarespace.BillingStatus.LINKED)&&this.get("systemAvailable")},expiredAccess:function(){return this._hasSiteStatus(t.Squarespace.StatusConstants.EXPIRED)&&!this._hasBillingStatus(t.Squarespace.BillingStatus.LINKED)&&this.get("systemAvailable")},deleteSiteAccess:function(){return this.get("systemAvailable")&&(this._hasSiteStatus(t.Squarespace.StatusConstants.EXPIRED)||this._hasSiteStatus(t.Squarespace.StatusConstants.TRIAL))},isAdminOr:function(e){return t.bind(function(){return this.get("hasAdminAccess")||e.call(this)},this)},isAdminAndNot:function(e){return t.bind(function(){return this.get("hasAdminAccess")&&!e.call(this)},this)},_hasBillingStatus:function(e){return t.Squarespace.Context.getInstance().get("billingStatus")===e},_hasSiteStatus:function(e){return t.Squarespace.Context.getInstance().get("website").get("siteStatus").value===e}},{ATTRS:{hasAdminAccess:{valueFn:function(){return t.Squarespace.UtilAuthenticated.isSquarespaceAdmin()},readOnly:true},systemAvailable:{value:true,readOnly:true},reverseBillingStatus:{valueFn:function(){return i(t.Squarespace.BillingStatus)},readOnly:true}}})},"1.0",{requires:["base","squarespace-context","squarespace-enum","squarespace-util","squarespace-util-authenticated"]})},"./src/main/webapp/universal/scripts-v6/settings/site/billing-panels/base.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-settings-site-billing-panels-base",function(a){a.namespace("Squarespace.Settings.Site.BillingPanels");var t=a.Squarespace.Settings.Site.BillingPanels.Base=a.Base.create("billingBase",a.Squarespace.SSWidget,[a.Squarespace.Damask.Panel.MixinPanelParent,a.Squarespace.Damask.Panel.MixinPanel],{renderUI:function(){t.superclass.renderUI.apply(this,arguments);this.get("preventRenderTemplate")||this._renderPanel()},bindUI:function(){t.superclass.bindUI.apply(this);this._isTrial()&&this._registerEvent(this.get("website").after("siteStatusChange",this.syncUI,this))},syncUI:function(){t.superclass.syncUI.apply(this);var e=this.get("contentBox").one(".subtitle");e&&this._isTrial()&&e.setContent(this._getTrialSubstring())},destructor:function(){if(a.Lang.isObject(this._headerTray)){this._headerTray.destroy();this._headerTray=null}},_renderPanel:function(){var e=this.get("contentBox");var t=e.one(".sqs-panel-notification");this.get("showAdminMessage")&&t.setContent('<div class="sqs-panel-admin-notice">'+this.get("strings.adminAccess")+"</div>");this._headerTray=new a.Squarespace.Widgets.HeaderTray({strings:this._getHeaderTrayStrings()}).render(e.one(".panel-header"))},_getHeaderTrayStrings:function(){return this.get("strings")},_isTrial:function(){var e=this.get("website");return e&&e.get("siteStatus")===a.Squarespace.StatusConstants.TRIAL}},{TEMPLATE:'<div class="panel-header"></div><div class="sqs-panel-notification"></div><div class="spinner"></div><div class="settings-panel-fields hidden"></div>',ATTRS:{accessRules:{valueFn:function(){return new a.Squarespace.Settings.Site.BillingPanels.AccessRules},readOnly:true},"strings.adminAccess":{value:i("You have access to this panel because you are an admin. It would not be revealed to a customer in your billing state. Do not attempt to make any billing changes on this panel."),validator:a.Squarespace.AttrValidators.isString},showAdminMessage:{value:false,validator:a.Squarespace.AttrValidators.isBoolean}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-damask-panel-mixin-panel","squarespace-damask-panel-mixin-panel-parent","squarespace-damask-panel-panel-pusher","squarespace-settings-site-billing-panels-access-rules","squarespace-ss-widget","squarespace-tray"]})},"./src/main/webapp/universal/scripts-v6/settings/site/billing-panels/delete-site.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/universal/src/shared/utils/BillingSubscriptionsAPI.js");YUI.add("squarespace-settings-site-billing-panels-delete-site",function(t){t.namespace("Squarespace.Settings.Site.BillingPanels");var e=t.Squarespace.Settings.Site.BillingPanels.DeleteSite=t.Base.create("billingDeleteSite",t.Squarespace.Settings.Site.BillingPanels.Base,[],{renderUI:function(){e.superclass.renderUI.apply(this,arguments);this.get("contentBox").one(".subtitle").hide();s.loadAllSubscriptions().then(this._renderDeletePanel.bind(this),this._renderError.bind(this))},destructor:function(){if(t.Lang.isValue(this._deleteSiteButton)){this._deleteSiteButton.destroy();this._deleteSiteButton=null}},_renderError:function(){var e=this.get("contentBox").one(".subtitle");e.empty().setContent(this.get("strings.subscriptionLoadErrorSubtitle"));e.show()},_renderDeletePanel:function(e){var t=this.get("contentBox").one(".subtitle");var a=this.get("contentBox").one(".settings-panel-fields");var i=e.data.results;if(0===i.length||this._isWebsiteTheOnlySubscription(i)){this._createRemoveAccountButton().render(a);a.show()}else t.empty().setContent(this.get("strings.activeSubscriptionsSubtitle"));t.show()},_isWebsiteTheOnlySubscription:function(e){return e.length===e.filter(function(e){return"website"===e.type})},_createRemoveAccountButton:function(){this._deleteSiteButton=new t.Squarespace.DialogFields.Button({className:"sqs-remove-account","strings.text":i("Delete Site"),onClick:t.bind(this._deleteSite,this)});return this._deleteSiteButton},_deleteSite:function(){var e=this._deleteSiteButton;new t.Squarespace.Widgets.Confirmation({position:t.Squarespace.Widgets.Confirmation.ANCHOR.ELEMENT,anchor:e.getNode(),showOverlay:true,"strings.confirm":i("Delete Site"),"strings.title":i("Delete Site"),"strings.message":i("Your site will be taken down immediately and will no longer be accessible.")}).on("confirm",function(){t.Data.post({url:"/api/billing/RemoveAccount",data:{autorenew:false},success:function(){window.location="/"}},this)},this)}},{CSS_PREFIX:"sqs-billing-delete-site",ATTRS:{showAdminMessage:{value:false,readOnly:true},"strings.activeSubscriptionsSubtitle":{value:i("You cannot delete your website because you have one or more active subscriptions."),readOnly:true},"strings.subscriptionLoadErrorSubtitle":{value:i("There was a problem retrieving your subscriptions."),readOnly:true},"strings.title":{value:i("Delete Website")},"strings.subtitle":{value:i("When you delete your site, your site and its content are marked for deletion. Please note that deleted sites may take more than 30 days to be permanently deleted from our systems.")},website:{valueFn:function(){return t.Squarespace.Context.getInstance().get("website")},readOnly:true}}})},"1.0",{requires:["base","squarespace-context","squarespace-settings-site-billing-panels-base"]})},"./src/main/webapp/universal/scripts-v6/settings/site/billing-panels/mixin-switch-products.js":function(e,t,a){var c=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var i=a("./src/main/webapp/universal/src/apps/App/shared/components/BigSpinner/index.jsx");var s=a("./src/main/webapp/universal/src/shared/utils/billing/ProductLineUtils.js");var u=a("./src/main/webapp/universal/src/apps/App/shared/actions/billing/AvailablePlansActions.js");var n=a("./common/temp/node_modules/react/index.js");var r=a("./common/temp/node_modules/react-dom/index.js");var d=a("./src/main/webapp/universal/src/apps/App/screens/Checkout/shared/stores/PlanSelectionStore.js");var p=a("./src/main/webapp/universal/src/apps/App/shared/stores/billing/AvailablePlansStore.js");var o=a("./src/main/webapp/universal/src/shared/utils/network.js");var h=a("./src/main/webapp/universal/src/shared/utils/analytics/trackInternal.ts");var g=a("./src/main/webapp/frontend/packages/enums/BillingError.js");var m=a("./src/main/webapp/frontend/packages/enums/WebsiteType.js");var f=a("./src/main/webapp/universal/src/apps/App/screens/Settings/screens/Billing/screens/SwitchProductsCheckoutSummary/index.jsx");var v=a("./src/main/webapp/universal/src/shared/stores/billing/CustomerStore.js");var b=a("./src/main/webapp/universal/src/shared/actions/billing/CustomerActions.js");var l=a("./src/main/webapp/universal/src/shared/utils/SerializationUtils.js").deserializer;var S=a("./src/main/webapp/universal/src/shared/utils/billing/deserializeInvoice.js");var y=l(S,"data.invoice");YUI.add("squarespace-settings-site-billing-panels-mixin-switch-products",function(l){l.namespace("Squarespace.Settings.Site.BillingPanels");l.Squarespace.Settings.Site.BillingPanels.MixinSwitchProducts=l.Base.create("MixinSwitchProducts",l.Base,[],{_isNotAPaidWebsite:function(){var e=l.Squarespace.Context.getInstance().get("website");var t=e.get("siteStatus.value");return this._isParkingPage()||t===l.Squarespace.StatusConstants.INTERNAL||t===l.Squarespace.StatusConstants.TRIAL||t===l.Squarespace.StatusConstants.COMPED},_isParkingPage:function(){var e=l.Squarespace.Context.getInstance().get("website");var t=e.get("websiteType");return t===m.PARKING_PAGE},_showBigSpinner:function(){this._bigSpinnerRenderTarget||(this._bigSpinnerRenderTarget=this.get("contentBox").appendChild('<div class="transaction-overlay"></div>').getDOMNode());var e=this._isParkingPage()?c("Please wait while we set up your 14 day free trial…"):c("Please wait while we process your product change…");r.render(n.createElement(i,{visible:true,subtext:e}),this._bigSpinnerRenderTarget)},_hideBigSpinner:function(){if(!this._bigSpinnerRenderTarget)return;r.unmountComponentAtNode(this._bigSpinnerRenderTarget);this._bigSpinnerRenderTarget=null},_hasValidViolations:function(e){if(!e||0===e.length)return false;e=e.filter(function(e){return e.userActionRequired});return e.length>0},_destroyOrderSummary:function(){if(!this._orderSummaryRenderNode)return;r.unmountComponentAtNode(this._orderSummaryRenderNode);this._orderSummaryRenderNode=null},_showViolations:function(e){var t;t=1===e.length?'<div class="plan-violations-alert-message">'+e[0].message+"</div>":'<ul class="plan-violations-alert-message">'+e.map(function(e){return"<li>"+e.message+"</li>"}).join("")+"</ul>";new l.Squarespace.Widgets.Alert({"strings.title":c("Plan Change Violations"),"strings.message":t})},_getCurrentProductLine:function(){var e=l.Squarespace.Context.getInstance().get("website").get("websiteType");if(!l.Lang.isNumber(e)){false;e=m.CLASSIC}return s.getProductLineForWebsiteType(e)},_doProductSwitch:function(e,t){l.Data.post({url:"/api/billing/product-types/website/product-lines/"+e+"/transitions",data:t,success:function(){h("engagement_product_switch_complete",{fromProductLine:this._getCurrentProductLine(),toProductLine:e,planId:t.planId,coverPageIdentifier:t.coverPageSlideIdentifier,usedExistingPage:!!t.existingCoverPageId,templateWebsiteIdentifier:t.templateIdentifier}).then(function(){l.config.win.location.href="/config"})},failure:function(e){this._hideBigSpinner();if(e.billingErrorCode===g.CARD_DECLINED){this._destroyOrderSummary();var t=new l.Squarespace.Widgets.Confirmation({"strings.title":c("Card Declined"),"strings.message":c("Please update your billing information and try again"),"strings.confirm":c("Update Card")});t.on("confirm",function(){l.Squarespace.Singletons.Location.go("/settings/billing/billing/payment-info")});return}var a=new l.Squarespace.SystemError(c("Product Switching Error"),e,"json");a.show()},json:true},this)},_previewChangeForNotPaidAndDoProductSwitch:function(t,a){this._showBigSpinner();o.post("/api/billing/product-types/website/product-lines/"+t+"/transitions/preview",a).then(function(e){if(this._hasValidViolations(e.data.violations)){this._destroyOrderSummary();this._hideBigSpinner();this._showViolations(e.data.violations);return}this._doProductSwitch(t,a)}.bind(this))},_renderOrderSummary:function(e){this._orderSummaryRenderNode||(this._orderSummaryRenderNode=this.get("contentBox").appendChild("<div></div>").getDOMNode());r.render(n.createElement(f,l.merge({fromProductLine:this._getCurrentProductLine(),onCancel:this._destroyOrderSummary.bind(this),onConfirmProductChange:function(){this._showBigSpinner();this._doProductSwitch(e.toProductLine,e.websiteProductLineChangeParams)}.bind(this)},e)),this._orderSummaryRenderNode)},_confirmBillingChangesWithUser:function(s){return new l.Squarespace.Promises.create(function(){o.post("/api/billing/product-types/website/product-lines/"+s.toProductLine+"/transitions/preview",s.websiteProductLineChangeParams).then(y).then(function(e){var t=e.data;var a=t.violations;var i=t.invoice;this._hideBigSpinner();if(this._hasValidViolations(a)){this._destroyOrderSummary();this._showViolations(a);return}this._renderOrderSummary(l.merge(s,{loading:false,invoice:i}))}.bind(this))},this)},_startProductSwitchAuthorizationFlow:function(s,n){if(this._isNotAPaidWebsite()){this._previewChangeForNotPaidAndDoProductSwitch(s,n);return}this._renderOrderSummary({loading:true});var r=d.getState().featureLevel;var o=new l.Squarespace.Models.Billing.Summary;var e=l.Squarespace.Promises.create(function(e){if(this._isNotAPaidWebsite()||v.getState().loaded){e();return}b.load().then(e)}.bind(this));var t=l.Squarespace.Promises.create(function(e){o.load(e)});var a=l.Squarespace.Promises.create(function(e,t){p.getState().productLine===s?e(p.getState()):u.getAvailablePlans(s).then(e,t)});l.Squarespace.Promises.all(t,a,e).then(function(){var e=o.get("subscriptions").toArray().find(function(e){return"website"===e.get("type")});if(!e){this._hideBigSpinner();new l.Squarespace.SystemError(c("Missing Billing Account"),{},"json");return}var t=l.Array.find(p.getState().products,function(e){return e.featureLevel===r});var a={};l.config.win.__FULL_WEBSITE_TEMPLATE_IDENTIFIER__&&(a.templateIdentifier=l.config.win.__FULL_WEBSITE_TEMPLATE_IDENTIFIER__);var i=l.merge(a,n,{subscriptionId:e.get("id"),featureLevel:r});this._confirmBillingChangesWithUser({toProductLine:s,websiteProductLineChangeParams:i,currentProductName:e.get("plan.planDisplayName"),selectedProductName:t.name,currency:p.getState().currency}).then(function(){this._doProductSwitch(s,i)}.bind(this))}.bind(this))}})},"1.0",{requires:["base","squarespace-context","squarespace-damask-panel-async-data-panel","squarespace-models-billing-summary","squarespace-promises","squarespace-singletons-location","squarespace-system-error","squarespace-widgets-alert","squarespace-widgets-billing-checkout-cover-page-picker"]})},"./src/main/webapp/universal/scripts-v6/settings/site/billing-panels/switch-products.js":function(e,t,a){var r=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var i=a("./common/temp/node_modules/react/index.js");var s=a("./common/temp/node_modules/react-dom/index.js");var o=a("./src/main/webapp/universal/src/shared/utils/network.js");var l=a("./common/temp/node_modules/alt-utils/lib/ActionListeners.js");var c=a("./src/main/webapp/universal/src/shared/dispatchers/alt/index.ts");var u=a("./src/main/webapp/universal/src/apps/App/shared/actions/ParkingPageActions.ts");var d=a("./src/main/webapp/universal/src/apps/ParkingPage/screens/Upgrade/components/ReactivateSite/index.js");var p=a("./src/main/webapp/universal/src/shared/actions/billing/CustomerActions.js");var h=a("./src/main/webapp/universal/src/apps/App/screens/Checkout/shared/actions/PlanSelectionActions.js");var g=a("./src/main/webapp/universal/src/shared/utils/analytics/trackInternal.ts");var m=a("./src/main/webapp/frontend/packages/enums/FeatureLevels.js").WEBSITE_COVER_PAGE;var f=a("./src/main/webapp/frontend/packages/enums/WebsiteType.js");var v=a("./src/main/webapp/universal/src/shared/utils/billing/ProductLineUtils.js");var b=a("./src/main/webapp/frontend/packages/enums/ProductLines.js");var S=a("./src/main/webapp/universal/src/shared/utils/getRootPath.js");var y=a("./src/main/webapp/universal/src/shared/constants/HelpLinks.js");YUI.add("squarespace-settings-site-billing-panels-switch-products",function(n){var e=new l(c);e.addActionListener(u.OPEN_TEMPLATE_PICKER_FROM_PARKING_PAGE,function(){window.setTimeout(function(){var a=new t({forParkingPage:true});a._getReactivationEligibility().then(function(){if(a.get("isEligibleForReactivation"))return a._renderReactivate();return a.ensureTemplateIsPicked(b.CLASSIC)}).then(function(){return p.load()}).then(function(e,t){return a.skipOverBillingIfNotACustomer(b.CLASSIC)}).catch(function(e){})},0)});n.namespace("Squarespace.Settings.Site.BillingPanels");var t=n.Squarespace.Settings.Site.BillingPanels.SwitchProducts=n.Base.create("billingWebsite",n.Squarespace.Settings.Site.BillingPanels.Base,[n.Squarespace.Settings.Site.BillingPanels.MixinSwitchProducts],{initializer:function(){this._isParkingPage()&&this._getReactivationEligibility()},syncUI:function(){if(this.get("forParkingPage"))return;t.superclass.syncUI.apply(this,arguments);if(!this.get("isLoaded")){this._renderLoadingSpinner();return}this._destroySpinner();var a=this.get("contentBox");var e=this._getSwitchProductsPusherConfigs();e.forEach(function(e){var t=n.Node.create('<div class="sqs-panel-pusher" data-test="'+e.name+'"><div class="sqs-panel-pusher-content"><div class="panel-pusher"><div class="title"></div><div class="description"></div></div></div></div>');t.one(".title").setContent(e.title);t.one(".description").setContent(e.description);t.on("click",e.onClick);a.append(t)});this._registerPushers();this._isParkingPage()&&this.get("isEligibleForReactivation")&&this._renderReactivate()},bindUI:function(){if(this.get("forParkingPage"))return;this.after("isEligibleForReactivationChange",this.syncUI);this.after("isLoadedChange",this.syncUI)},destructor:function(){this.mountNode&&s.unmountComponentAtNode(this.mountNode.getDOMNode())},_renderLoadingSpinner:function(){if(this._spinnerContainer)return;this._spinnerContainer=this.get("contentBox").appendChild('<div class="switch-products-spinner"></div>');this._loadingSpinner=new n.Squarespace.Spinner({render:this._spinnerContainer,size:"extra-large",color:"dark"})},_destroySpinner:function(){this._loadingSpinner&&this._loadingSpinner.destroy();this._spinnerContainer&&this._spinnerContainer.empty()},_renderReactivate:function(){this.mountNode=n.Node.create("<div>");this.get("contentBox").append(this.mountNode);s.render(i.createElement(d),this.mountNode.getDOMNode())},_getReactivationEligibility:function(){this.set("isLoaded",false);return o.get("/api/rest/websites/reactivation/eligibility").then(function(e){this.set("isEligibleForReactivation",e.data.isEligible);this.set("isLoaded",true)}.bind(this),function(){this.set("isLoaded",true)}.bind(this))},_getCurrentProductLine:function(){var e=n.Squarespace.Context.getInstance().get("website").get("websiteType");if(!n.Lang.isNumber(e)){false;e=f.CLASSIC}return v.getProductLineForWebsiteType(e)},_getSwitchProductsPusherConfigs:function(){var t=this._getCurrentProductLine();return[b.CLASSIC,b.COMMERCE].filter(function(e){return e!==t}).map(function(e){if(e===b.CLASSIC)return this._getClassicProductLinePusherConfig();if(e===b.COMMERCE)return this._getCommerceProductLinePusherConfig();return null}.bind(this))},_getClassicProductLinePusherConfig:function(){var s=this._getCurrentProductLine();return{name:"change-to-website",title:r("Website"),description:r("All-in-one, beautiful website platform"),onClick:function(){var i={fromProductLine:s,toProductLine:b.CLASSIC};g("engagement_product_switch_attempt",i);return n.Squarespace.Promises.create(function(e,t){var a;if(s===b.COVER_PAGE){a=new n.Squarespace.Widgets.Confirmation({"strings.title":r("Are you sure?"),"strings.message":r('You\'re about to switch to a Website plan. You won\'t be able to return to the Cover Page plan on this site.<br /><a target="_blank" href="{switchProductsUrl}">Learn if this is the right switch for you.</a>',{switchProductsUrl:y.SWITCH_PRODUCTS}),width:400});a.on("cancel",function(){g("engagement_product_switch_attempt_reject",i)});a.on("confirm",function(){g("engagement_product_switch_attempt_confirm",i)})}else s===b.COMMERCE&&(a=new n.Squarespace.Widgets.Confirmation({"strings.title":r("Are you sure?"),"strings.message":r('You are about to switch to our Website plan. Some Commerce features will be disabled, and you\'ll be charged an additional transaction fee for orders.<br /><a target="_blank" href="{switchProductsUrl}">Learn more about how your site will change.</a>',{switchProductsUrl:y.SWITCH_PRODUCTS})}));a?a.on("confirm",e):e()}).then(function(){return this.ensureTemplateIsPicked(b.CLASSIC)}.bind(this)).then(function(){return p.load()}).then(function(e,t){return this.skipOverBillingIfNotACustomer(b.CLASSIC)}.bind(this)).then(function(e,t){this.get("router").push(S.forSwitchProducts()+"change-to-website")}.bind(this))}.bind(this)}},_getCommerceProductLinePusherConfig:function(){var s=this._getCurrentProductLine();return{name:"change-to-commerce",title:r("Commerce"),description:r("Powerful platform for merchants"),onClick:function(){var i={fromProductLine:s,toProductLine:b.COMMERCE};g("engagement_product_switch_attempt",i);return n.Squarespace.Promises.create(function(e,t){var a;if(s===b.COVER_PAGE){a=new n.Squarespace.Widgets.Confirmation({"strings.title":r("Are you sure?"),"strings.message":r('You\'re about to switch to a Commerce plan. You won\'t be able to return to the Cover Page plan on this site.<br /><a target="_blank" href="{switchProductsUrl}">Learn if this is the right switch for you.</a>',{switchProductsUrl:y.SWITCH_PRODUCTS}),width:400});a.on("cancel",function(){g("engagement_product_switch_attempt_reject",i)});a.on("confirm",function(){g("engagement_product_switch_attempt_confirm",i)})}else s===b.CLASSIC&&(a=new n.Squarespace.Widgets.Confirmation({"strings.title":r("Are you sure?"),"strings.message":r('You are about to switch to our Commerce plan, which is designed for businesses who have a primary goal of selling.<br /><a target="_blank" href="{switchProductsUrl}">Learn if this is the right switch for you.</a>',{switchProductsUrl:y.SWITCH_PRODUCTS})}));a?a.on("confirm",e):e()}).then(function(){return this.ensureTemplateIsPicked(b.COMMERCE)}.bind(this)).then(function(){return p.load()}).then(function(e,t){return this.skipOverBillingIfNotACustomer(b.COMMERCE)}.bind(this)).then(function(e,t){this.get("router").push(S.forSwitchProducts()+"change-to-commerce")}.bind(this))}.bind(this)}},_getCoverPageProductLinePusherConfig:function(){var i=this._getCurrentProductLine();return{name:"change-to-cover-page",title:r("Cover Page"),description:r("Focused, single page website"),onClick:function(){g("engagement_product_switch_attempt",{fromProductLine:i,toProductLine:b.COVER_PAGE});var e=n.Squarespace.Promises.create(function(e,t){var a;i===b.CLASSIC?a=new n.Squarespace.Widgets.Confirmation({width:500,"strings.title":r("Are you sure?"),"strings.message":r('Your website will be converted to a single Cover Page and the rest of your pages and content will be hidden.<br /><br />We\'ll preserve a copy of the rest of your former website\'s contents while your Cover Page is active, so that if you later decide to return to a Website plan, your old content will appear on your new site.<br /><br />To continue, select a Cover Page to set as your homepage.<br /><br /><a target="_blank" href="{switchProductsUrl}">Learn more</a>',{switchProductsUrl:y.SWITCH_PRODUCTS})}):i===b.COMMERCE&&(a=new n.Squarespace.Widgets.Confirmation({width:500,"strings.title":r("Are you sure?"),"strings.message":r('Your website will be converted to a single Cover Page and the rest of your pages and content will be hidden. Your orders, inventory and other store sections will also be hidden.<br /><br />We\'ll preserve a copy of the rest of your former website\'s contents while your Cover Page is active, so that if you later decide to return to a Commerce plan, your old content will appear on your new site.<br /><br />To continue, select a Cover Page to set as your homepage.<br /><br /><a target="_blank" href="{switchProductsUrl}">Learn more</a>',{switchProductsUrl:y.SWITCH_PRODUCTS})}));a?a.on("confirm",e):e()});this._isNotAPaidWebsite()||(e=e.then(function(){return p.load()}).then(function(){h.selectFeatureLevel(m)},this));return e.then(function(e,t){this.get("router").push(S.forSwitchProducts()+"change-to-cover-page")}.bind(this))}.bind(this)}},skipOverBillingIfNotACustomer:function(a){return n.Squarespace.Promises.create(function(e,t){if(this._isNotAPaidWebsite()){this._startProductSwitchAuthorizationFlow(a,{templateIdentifier:n.config.win.__FULL_WEBSITE_TEMPLATE_IDENTIFIER__});t()}else e()},this)},ensureTemplateIsPicked:function(a){var i=this._getCurrentProductLine();return n.Squarespace.Promises.create(function(e,t){[b.COVER_PAGE,b.PARKING_PAGE].indexOf(i)>=0?this._getTemplatePickerActivation(a).then(e,t):e()},this)},_isNotAPaidWebsite:function(){var e=n.Squarespace.Context.getInstance().get("website");var t=e.get("siteStatus.value");return this._isParkingPage()||t===n.Squarespace.StatusConstants.INTERNAL||t===n.Squarespace.StatusConstants.TRIAL||t===n.Squarespace.StatusConstants.COMPED},_isParkingPage:function(){var e=n.Squarespace.Context.getInstance().get("website");var t=e.get("websiteType");return t===f.PARKING_PAGE},_getTemplatePickerActivation:function(i){return n.Squarespace.Promises.create(function(t,e){var a=new n.Squarespace.TemplatePicker({render:true,"strings.callToAction":r("Select"),"strings.title":r("Choose a template to get started"),className:"no-description",websiteType:v.getWebsiteTypeForProductLine(i)});a.once("install-template",function(e){a.destroy();n.config.win.__FULL_WEBSITE_TEMPLATE_IDENTIFIER__=e.identifier;t()},this)})},_getRenderedPushersArray:function(){return[]}},{ATTRS:{strings:{valueFn:function(){var e=r("Switch Products");var t=r('Squarespace offers a range of customized products which can simplify your Squarespace experience depending on your goals. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:y.SWITCH_PRODUCTS});if(n.Squarespace.Utils.isCoverPageOnly()){e=r("Upgrade Product");t=r("Squarespace Cover Pages are just the beginning. Upgrade to a full website or Squarespace Commerce to experience the full power of our platform.")}else if(this._isParkingPage()){e=r("Build a Site");t=r('Squarespace offers a range of website building options depending on your goals. Start with a simple landing page, a full website, or an online store. Choose one of the products below to start your 14 day free trial. <br /><a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:y.SWITCH_PRODUCTS})}return{title:e,subtitle:t}}},router:{},isEligibleForReactivation:{value:false},isLoaded:{value:true},forParkingPage:{value:false}}})},"1.0",{requires:["base","squarespace-settings-site-billing-panels-base","squarespace-system-error","squarespace-widgets-billing-checkout-cover-page-picker","squarespace-settings-site-billing-panels-mixin-switch-products","squarespace-spinner","squarespace-template-picker","squarespace-widgets-billing-checkout-commerce-picker","squarespace-widgets-billing-checkout-website-picker","squarespace-promises"]})},"./src/main/webapp/universal/scripts-v6/share-buttons.js":function(e,t,a){var n=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var r=a("./src/main/webapp/universal/src/shared/i18n/index.ts").pluralize;var o=a("./src/main/webapp/universal/src/shared/utils/SimpleLikingAPI.js");YUI.add("squarespace-share-buttons",function(l){"use strict";var t=l.config.win;var c=l.config.win.document;var u={CALLBACK_NAMESPACE:"SquarespaceShareButtonCounts"+Date.now(),SERVICE_NAMES:["facebook","linkedin","pinterest"],COUNT_KEYS:{facebook:["share","share_count"],linkedin:["count"],pinterest:["count"]},URL_KEYS:{facebook:"id",linkedin:"url",pinterest:"url"},API_BASE_URLS:{facebook:"https://graph.facebook.com/?id=",linkedin:"https://www.linkedin.com/countserv/count/share?url=",pinterest:"https://widgets.pinterest.com/v1/urls/count.json?source=6&url="}};function a(e,t){try{var a=e[u.URL_KEYS[t]];var i=c.createElement("a");i.href=a;var s=i.pathname.replace(/^\/|\/$/g,"");var n='.Share[data-item-path="'+s+'"] .Share-buttons-item[data-service="'+t+'"]';var r=l.Object.getValue(e,u.COUNT_KEYS[t])||0;var o=c.querySelectorAll(n);Array.prototype.forEach.call(o,function(e){e.querySelector(".Share-buttons-item-count").innerHTML=r})}catch(e){false}}t[u.CALLBACK_NAMESPACE]={facebook:function(e){a(e,"facebook")},linkedin:function(e){a(e,"linkedin")},pinterest:function(e){a(e,"pinterest")}};function i(e){this.container=e.container;this.like=e.like;this.ID=e.id;this.PATH=e.path;this.SHARE_LINK=t.Static.SQUARESPACE_CONTEXT.website.baseUrl+"/"+this.PATH;this.shareButtonClickHandler=this.shareButtonClickHandler.bind(this)}i.prototype={init:function(){u.SERVICE_NAMES.forEach(function(e){var t=this.container.querySelector('.Share-buttons-item[data-service="'+e+'"]');if(!t)return;this.getCount(e)},this);if(this.like){this.initializeLikes();this.isInLocalStorage(this.like)&&this.like.classList.add("is-active")}this.container.addEventListener("click",this.shareButtonClickHandler)},destroy:function(){this.container.removeEventListener("click",this.shareButtonClickHandler)},getCount:function(e){var t=c.createElement("script");t.src=[u.API_BASE_URLS[e],this.SHARE_LINK,"&callback=",u.CALLBACK_NAMESPACE,".",e].join("");c.body.appendChild(t);c.body.removeChild(t)},shareButtonClickHandler:function(e){e.preventDefault();var t=l.one(e.target).ancestor(".Share-buttons-item",true);if(!t||!t.getDOMNode())return;t=t.getDOMNode();if(!t.getAttribute("data-service"))return;this.like&&t===this.like?this.onLike():this.onShare(t)},initializeLikes:function(){o.getLikeCount(this.ID).then(function(e){this.syncLikes(e)}.bind(this)).catch(function(){this.syncLikes()}.bind(this))},syncLikes:function(e){var t=this.like.querySelector(".Share-buttons-item-label");e=e||parseInt(this.like.getAttribute("data-like-count"),10);t.innerHTML=r({one:"{%n} Like",other:"{%n} Likes"},e);this.like.setAttribute("data-like-count",e)},onLike:function(){if(this.like.classList.contains("is-active"))return;o.like(this.ID).then(function(e){if(true===e.commited){this.incrementLike();this.addToLocalStorage(this.like)}e.error&&(l.Squarespace.Utils.areCookiesEnabled()||l.config.win.alert(n("You need to enable cookies to be able to like something.")))}.bind(this)).catch(function(e){false})},incrementLike:function(){var e=parseInt(this.like.getAttribute("data-like-count"),10);e+=1;this.like.classList.add("is-active");this.syncLikes(e)},onShare:function(e){window.open(e.getAttribute("href"),n("Share"),"width=420,height=230,dialog");var t=e.querySelector(".Share-buttons-item-count");t&&(t.innerHTML=parseInt(t.innerHTML,10)+1)},onSharePopupClose:function(e,t){var a=0;var i;var s=function(){if(e.closed||a>150){clearInterval(i);this.getCount(t)}a++};i=setInterval(s.bind(this),200)},getLocalStorageKey:function(e){var t=e.getAttribute("data-service");if(e===this.like)return"squarespace-likes";if(t)return"squarespace-shares-"+t;return null},isInLocalStorage:function(e){try{if(!localStorage||!JSON)return false}catch(e){return false}var t=this.getLocalStorageKey(e);var a=JSON.parse(localStorage.getItem(t));if(a)return true===a[this.ID]},addToLocalStorage:function(e){if(!l.config.win.localStorage||!l.config.win.JSON)return false;var t=this.getLocalStorageKey(e);var a=JSON.parse(localStorage.getItem(t))||{};a[this.ID]=true;localStorage.setItem(t,JSON.stringify(a))},readCookie:function(e){var t=e+"=";var a=c.cookie.split(";");for(var i=0;i<a.length;i++){var s=a[i];while(" "===s.charAt(0))s=s.substring(1,s.length);if(0===s.indexOf(t))return s.substring(t.length,s.length)}return null}};var s=[];t.Squarespace.onInitialize(l,function(){l.all(".Share").each(function(e){e=e.getDOMNode();var t=new i({container:e,id:e.getAttribute("data-item-identifier"),path:e.getAttribute("data-item-path"),like:e.querySelector(".Share-buttons-item--like")});t.init();s.push(t)})});t.Squarespace.onDestroy(l,function(){s.forEach(function(e){e.destroy()});s.length=0})},"1.0",{requires:[]})},"./src/main/webapp/universal/scripts-v6/simple-liking.js":function(e,t,a){var o=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var l=a("./src/main/webapp/universal/src/shared/utils/SimpleLikingAPI.js");YUI.add("squarespace-simple-liking",function(r){var t=r.config.win.Static;r.Squarespace.SimpleLike={TEXT_LIKE_VERB_NONE:o("No Likes"),TEXT_LIKE_VERB_SINGULAR:o("Like"),TEXT_LIKE_VERB_PLURAL:o("Likes"),TEXT_LIKE_ACTIVATED:o("You like this"),TEXT_LIKE_SUGGEST:o("Click to like"),attached:false,attach:function(){if(this.attached)return;this.attached=true;var n;try{if(localStorage){n=r.JSON.parse(localStorage.getItem("squarespace-likes"));n=n||{};localStorage.setItem("squarespace-likes",r.JSON.stringify(n))}}catch(e){n={}}this.eventHandlers=[];var e=r.delegate("click",function e(t){var a=t.currentTarget;var i=a.getAttribute("data-item-id");if(!i)return;for(var s=0;s<5;++s)r.Squarespace.SimpleLike.burst(a);if(a.hasClass("clicked")||a.hasClass("float"))return;l.like(i).then(function(e){if(true===e.commited){if(a&&a.getDOMNode()){var t=parseInt(a.getAttribute("data-like-count"),10);a.setAttribute("data-like-count",t+1);r.Squarespace.SimpleLike.renderLikeCount(a);a.addClass("clicked")}try{if(localStorage){n[i]=true;localStorage.setItem("squarespace-likes",r.JSON.stringify(n))}}catch(e){console.warn("Unable to save like to local storage: ",e)}}e.error&&(r.Squarespace.Utils.areCookiesEnabled()||r.config.win.alert(o("You need to enable cookies to be able to like something.")))}).catch(function(e){false})},"body",".sqs-simple-like");this.eventHandlers.push(e);r.all(".sqs-simple-like").each(function(a){var e=a.getAttribute("data-item-id");if(!e)return;t.SQUARESPACE_CONTEXT.websiteSettings.simpleLikingEnabled||a.remove();n[e]&&a.addClass("clicked");l.getLikeCount(e).then(function e(t){a.setAttribute("data-like-count",t);r.Squarespace.SimpleLike.renderLikeCount(a)}).catch(function e(){r.Squarespace.SimpleLike.renderLikeCount(a)})})},detach:function(){this.attached=false;this.eventHandlers.forEach(function(e){e.detach()})},renderLikeCount:function e(t){var a=t&&t.getDOMNode?t.getDOMNode():t;if(!a||!a.ownerDocument||!a.ownerDocument.defaultView)return;var i=t.getAttribute("data-item-id");var s=t.getAttribute("data-like-count");var n=t.one(".like-count");if(!i||!n)return;n.setContent(this.formatLikeText(s))},formatLikeText:function(e){if(0===e)return r.Squarespace.SimpleLike.TEXT_LIKE_VERB_NONE;if(1===e)return"1 "+r.Squarespace.SimpleLike.TEXT_LIKE_VERB_SINGULAR;return e+" "+r.Squarespace.SimpleLike.TEXT_LIKE_VERB_PLURAL},burst:function(e){var t=e.cloneNode(true);t.one(".like-count")&&t.one(".like-count").remove();var a=e.one(".like-icon");a&&"none"!==a.getStyle("display")||(a=e);t.setStyles({position:"absolute",left:a.getX()+"px",top:a.getY()+"px"});r.one(r.config.doc.body).append(t);var i=new r.Anim({node:t,duration:2,easing:r.Easing.easeOut});i.set("to",{curve:r.Squarespace.SimpleLike.randomCurve(t)});i.on("end",function(){this.get("node").remove()});i.run();t.removeClass("clicked");t.addClass("float")},randomCurve:function(e){var t=[];var a=3;var i=30;var s=Math.floor(2*Math.random())?1:-1;var n=Math.floor(2*Math.random())?1:-1;var r=e.getX();var o=e.getY();var l=0;for(;l<a;++l){r+=Math.floor(Math.random()*i)*s;o+=Math.floor(Math.random()*i)*n;t.push([r,o])}return t}};r.config.win.Squarespace.onInitialize(r,function(){t.SQUARESPACE_CONTEXT.websiteSettings.simpleLikingEnabled&&r.Squarespace.SimpleLike.attach()});r.config.win.Squarespace.onDestroy(r,function(){true===r.Squarespace.SimpleLike.attached&&r.Squarespace.SimpleLike.detach()})},"1.0",{requires:["anim","json","node","squarespace-util"]})},"./src/main/webapp/universal/scripts-v6/slice-type-groups.js":function(e,t){YUI.add("squarespace-slice-type-groups",function(e){e.namespace("Squarespace");e.Squarespace.SliceTypeGroups={BRANDING_TEXT:[e.Squarespace.SliceType.HEADING,e.Squarespace.SliceType.SUB_HEADING,e.Squarespace.SliceType.BODY,e.Squarespace.SliceType.LOGO,e.Squarespace.SliceType.LOCK],ACTION:[e.Squarespace.SliceType.BUTTONS,e.Squarespace.SliceType.NAVIGATION,e.Squarespace.SliceType.CUSTOM_FORM,e.Squarespace.SliceType.NEWSLETTER,e.Squarespace.SliceType.ACTION,e.Squarespace.SliceType.POPUP_OVERLAY_ACTION],MEDIA:[e.Squarespace.SliceType.IMAGE,e.Squarespace.SliceType.GALLERY],VIDEO:[e.Squarespace.SliceType.VIDEO],AUDIO:[e.Squarespace.SliceType.ALBUM],LOCATION:[e.Squarespace.SliceType.MAP],TWITTER:[e.Squarespace.SliceType.TWITTER],SOCIAL_ICONS:[e.Squarespace.SliceType.SOCIAL_ICONS]}},"1.0",{requires:["squarespace-enum"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/color-processor.js":function(e,t){YUI.add("squarespace-slide-rendering-color-processor",function(c){c.namespace("Squarespace.SlideRendering");var n="222222";c.Squarespace.SlideRendering.ColorProcessor={processNode:function(e){var t=e.getAttribute("data-average-color");var a;a=t?c.JSON.parse(t):{topLeftAverage:n,topRightAverage:n,bottomLeftAverage:n,bottomRightAverage:n,centerAverage:n,suggestedBgColor:n};delete a.suggestedBgColor;var i=this._processColors(a);var s=this._calculateStyles(i.averageColor,i.distribution);e.setData("processedColorStyles",s);return s},_processColors:function(e){var t=0;var a=0;var i=0;var s=new c.Squarespace.SlideRendering.Slices.RGB({color:{r:0,g:0,b:0}});var n;var r;c.Object.each(e,function(e){r=new c.Squarespace.SlideRendering.Slices.RGB({color:e});n=r.getBrightness();t++;a+=n;i+=Math.pow(n,2);s.add(r)});var o=(i-Math.pow(a,2)/t)/t;var l=Math.sqrt(o)/127.5;s.divide(t);return{distribution:l,averageColor:s}},_calculateStyles:function(e,t){var a=153;var i=e.getBrightness();var s=t>.4?.5:.3;var n=i>=a?30:20;e.darken(n);return{opacity:s,color:e}}}},"1.0",{requires:["json","squarespace-slide-rendering-slices-rgb"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/edit-controller.js":function(e,t,a){var i=a("./src/main/webapp/frontend/packages/enums/SlideType.js");var s=a("./src/main/webapp/universal/src/shared/constants/SlideTypeNames.js");var o=a("./src/main/webapp/universal/src/shared/constants/SlideTypeByName.js");var n=a("./src/main/webapp/universal/src/shared/utils/getSlideWrapperSelector.js");YUI.add("squarespace-slide-rendering-edit-controller",function(r){r.namespace("Squarespace.SlideRendering");r.Squarespace.SlideRendering.EditController=r.Base.create("EditController",r.Base,[],{initializer:function(e){e.shouldShowPopup?this.onShowOverlay():this._initEditController();this.showPopupOverlayEvent=r.Global.on("popupOverlay:showing",this.onShowOverlay,this);this.hidePopupOverlayEvent=r.Global.on("popupOverlay:hide",this.onHideOverlay,this)},destructor:function(){this._currentSlideWidget&&this._currentSlideWidget.unplug(r.Squarespace.SlideRendering.Editor);this.showPopupOverlayEvent.detach();this.showPopupOverlayEvent=null;this.hidePopupOverlayEvent.detach();this.hidePopupOverlayEvent=null},_initEditController:function(e){var t=e||r.one(".sqs-slide");if(!t)return;this._currentSlideWidget&&this._currentSlideWidget.unplug(r.Squarespace.SlideRendering.Editor);this._currentSlideWidget=r.Widget.getByNode(t);if(!this._currentSlideWidget)return;this._currentSlideWidget.plug(r.Squarespace.SlideRendering.Editor);this._loadLayoutsAndInitFonts(this._bindGlobalSlideUpdate.bind(this))},onShowOverlay:function(){var e='.sqs-slide[data-slide-type="'+s[i.POPUP_OVERLAY]+'"]';var t=r.one(e);this._initEditController(t)},onHideOverlay:function(){var e='.sqs-slide[data-slide-type="'+s[i.COVER_PAGE]+'"]';var t=r.one(e);this._initEditController(t)},_bindGlobalSlideUpdate:function(){r.Global.detach("slideUpdate");r.Global.after("slideUpdate",function(a){var i=n.getWrapperSelector(a.slideType);var s=r.one(i);if(!s)return;this._loadDefaultFontsForLayout(a.layoutId,function(){var e=s.one(".sqs-slide");var t=r.Widget.getByNode(e);s.replace(a.renderedSlide);t&&t.destroy();r.later(100,this,function e(){t=this._createAndRenderNewSlideWidget(i);t.plug(r.Squarespace.SlideRendering.Editor);r.Global.fire("slideUpdateRendered")})}.bind(this))}.bind(this))},_createAndRenderNewSlideWidget:function(e){var t=r.one(e+" .sqs-slide");var a=t.getAttribute("data-slide-layout-id");return r.Squarespace.SlideRendering.Layouts.Factory.create(a,{boundingBox:t,render:true})},_loadLayoutsAndInitFonts:function(e){var t=r.all(".sqs-slide");var a=[];t.each(function(e){a.push(o[e.getAttribute("data-slide-type")])});this._layouts=new r.Squarespace.Models.SlideLayoutList({slideTypes:a});var i=new r.Parallel;var s=i.add();var n=i.add();r.Squarespace.TypekitUtils.initStaticContextFonts(function(){r.Squarespace.TypekitUtils.appendPreviewScript(s)});this._layouts.load(function(){n.call(this)}.bind(this));i.done(function(){t.each(function(e){var t=e.getAttribute("data-slide-layout-id");this._loadDefaultFontsForLayout(t)}.bind(this));e&&e()}.bind(this))},_loadDefaultFontsForLayout:function(e,t){var a=this._layouts.getByIdentifier(e);if(!a){false;return}var i=new r.Parallel;a.get("typekitFonts").forEach(function(e){var t=e.cssName;r.config.win.SquarespaceFonts.loadTypekit(t,i.add())});t&&i.done(t);var s=[];a.get("webFonts").forEach(function(e){s.push(e)});s.length>0&&r.config.win.SquarespaceFonts.load({googleFamilies:s})}})},"1.0",{requires:["base","parallel","widget","squarespace-enum","squarespace-models-slide","squarespace-models-slide-layout-list","squarespace-slide-rendering-editor","squarespace-slide-rendering-layouts-factory","squarespace-typekit-utils"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/editor.js":function(e,t,a){var s=a("./common/temp/node_modules/lodash/debounce.js");var n=a("./src/main/webapp/universal/src/shared/constants/SliceTypeNames.js");var c=a("./src/main/webapp/universal/src/shared/constants/SliceTypeByName.js");var r=a("./src/main/webapp/universal/src/shared/utils/SvgCompatibility.js");YUI.add("squarespace-slide-rendering-editor",function(l){var e=["branding-font","heading-font","body-font","navigation-font","button-font","track-font","vertical-positioning","horizontal-positioning","alignment"];var i=["enable-gallery-border","gallery-border-size","gallery-size"];l.namespace("Squarespace.SlideRendering");l.Squarespace.SlideRendering.Editor=l.Base.create("Editor",l.Plugin.Base,[],{initializer:function(){this._bindGlobalEvents()},destructor:function(){this._sliceUpdateHandler&&this._sliceUpdateHandler.detach();this._videoPropUpdateHandler&&this._videoPropUpdateHandler.detach();this._tweakChangeHandler&&this._tweakChangeHandler.detach();this._slicePreviewTimers&&l.Object.each(this._slicePreviewTimers,function(e){e.cancel()})},_bindGlobalEvents:function(){l.Global.detach("sliceUpdate");this._sliceUpdateHandler=l.Global.after("sliceUpdate",function e(t){false;var a=new l.Squarespace.Models.Slice(t.slice);!t.forceServerRefresh&&this._sliceCanClientRefresh(a)?this._clientRefreshSlice(a):this._serverRefreshSlice(a,t.slideType)},this);this._videoPropUpdateHandler=l.Global.after("videoPropUpdate",function(e){if(this.scheduledVideoUpdate){clearTimeout(this.scheduledVideoUpdate);this.scheduledVideoUpdate=null}this._attemptBackgroundVideoUpdate(e.slice,e.changeData)},this);this._tweakChangeHandler=l.Global.on("tweak:change",s(function(e){var t=e.getName();this._isTweakResponsive(t)&&this.get("host")._syncResponsiveComponents();this._isTweakImageRefresh(t)&&this.get("host").get("contentBox").one('[data-slice-type="gallery"] .sqs-active-slide img').refresh()},100),this)},_attemptBackgroundVideoUpdate:function(t,a){try{this._updateBackgroundVideo(t,a);this.scheduledVideoUpdate=null}catch(e){this.scheduledVideoUpdate=setTimeout(function(){this._attemptBackgroundVideoUpdate(t,a)}.bind(this),0)}},_sliceCanClientRefresh:function(e){var t=this._getSliceNode(e.get("type"),e.get("isCompoundType"));var a="true"===t.getAttribute("data-content-empty");var i=t.getAttribute("data-slice-type");var s=e.get("absoluteType")!==c[i];if(a||s)return false;var n=this.get("host")._sliceWidgetMap[e.get("type")];return n&&n.get("canClientRefresh")},_clientRefreshSlice:function(e){var t=this.get("host")._sliceWidgetMap[e.get("type")];t.refreshFromSliceContent(e.get("absoluteContent"));this.get("host")._syncResponsiveComponents()},_serverRefreshSlice:function(e,t){l.Lang.isValue(this._slicePreviewTimers)||(this._slicePreviewTimers={});var a=e.get("type");this._slicePreviewTimers[a]&&this._slicePreviewTimers[a].cancel();var i=this.get("host");var s=i.get("slideLayoutIdentifier");this._slicePreviewTimers[a]=l.later(250,this,function(){e.renderPreview(s,t).then(l.bind(function(e){this._replaceSlice(e.renderedSlice);i._destroyResponsiveComponents();i._initResponsiveComponents();i._syncResponsiveComponents();r.parse()},this))})},_updateBackgroundVideo:function(e,t){var a=this.get("host")._sliceWidgetMap[e.type];var i=a.videoBg;i[t.key]=t.val;this._updateItemAttribute(a.get("items"),t);if("url"===t.key){i.destroy();a._initGallery()}else i.syncPlayer()},_updateItemAttribute:function(e,t){var a="data-config-"+t.key.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();e.each(function(e){e.setAttribute(a,t.val||"")})},_replaceSlice:function(e){var t=l.Node.create(e);var a=c[t.getAttribute("data-slice-type")];var i=c[t.getAttribute("data-compound-type")];var s;var n;if(i){s=this._getSliceNode(i,true);n=i}else{s=this._getSliceNode(a,false);n=a}var r=l.Node.create('<div class="wrap-node"></div>');s.wrap(r);s.remove(true);var o=this.get("host");o._sliceWidgetMap[n]&&o._sliceWidgetMap[n].destroy();r.setHTML(t);t.unwrap();"true"===t.getAttribute("data-content-empty")?delete o._sliceWidgetMap[n]:o._widgetizeSliceNode(t)},_getSliceNode:function(e,t){var a=n[e];var i;i=t?'[data-compound-type="'+a+'"]':'[data-slice-type="'+a+'"]:not([data-compound-type])';var s=this.get("host").get("contentBox").one(i);!s&&false;return s},_isTweakResponsive:function(t){var a=false;e.forEach(function(e){0===t.indexOf(e)&&(a=true)});return a},_isTweakImageRefresh:function(t){var a=false;i.forEach(function(e){0===t.indexOf(e)&&(a=true)});return a}},{NS:"editor"})},"1.0",{requires:["base","node","plugin","squarespace-models-slice"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/grid-gallery-densities.js":function(e,t){YUI.add("squarespace-slide-rendering-grid-gallery-densities",function(e){e.namespace("Squarespace.SlideRendering");e.Squarespace.SlideRendering.GridGalleryDensities={desktop:{orientation:{horizontal:{ratio:{original:[3,4,5,6,7],r21:[3,4,5,6,7],r169:[3,4,5,6,7],r32:[3,4,5,6,7],r43:[3,4,5,6,7],r54:[3,4,5,6,7]}},vertical:{ratio:{original:[5,6,7,8,9],r21:[2,3,4,5,6],r169:[2,3,4,5,6],r32:[2,3,4,5,6],r43:[2,3,4,5,6],r54:[2,3,4,5,6]}},square:{ratio:{r11:[3,4,5,6,7]}}}},"maxWidth-800":{orientation:{horizontal:{ratio:{original:[5,6,7,8,9],r21:[3,4,5,6,7],r169:[3,4,5,6,7],r32:[3,4,5,6,7],r43:[3,4,5,6,7],r54:[3,4,5,6,7]}},vertical:{ratio:{original:[3,4,5,6,7],r21:[2,3,4,5,6],r169:[2,3,4,5,6],r32:[2,3,4,5,6],r43:[2,3,4,5,6],r54:[2,3,4,5,6]}},square:{ratio:{r11:[3,4,5,6,7]}}}},"maxWidth-600":{orientation:{horizontal:{ratio:{original:[6,7,8,9,10],r21:[7,7,11,14,14],r169:[7,7,10,13,13],r32:[6,6,8,11,11],r43:[5,5,7,10,10],r54:[5,5,7,9,9]}},vertical:{ratio:{original:[3,3,4,5,5],r21:[3,3,4,5,5],r169:[3,3,4,5,5],r32:[4,4,5,6,6],r43:[5,5,6,7,7],r54:[5,5,7,9,9]}},square:{ratio:{r11:[6,6,7,9,9]}}}},"maxHeight-600":{orientation:{horizontal:{ratio:{original:[3,3,4,5,5],r21:[3,3,4,5,5],r169:[3,3,4,5,5],r32:[3,3,4,5,5],r43:[3,3,4,5,5],r54:[3,3,4,5,5]}},vertical:{ratio:{original:[4,4,5,6,6],r21:[2,2,3,4,4],r169:[2,2,3,4,4],r32:[2,2,3,4,4],r43:[2,2,3,4,4],r54:[2,2,3,4,4]}},square:{ratio:{r11:[3,3,4,5,5]}}}}}},"1.0",{requires:[]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/grid-gallery.js":function(e,t,a){var n=a("./src/main/webapp/universal/src/shared/utils/error-reporter/global-sentry.ts");var i=a("./common/temp/node_modules/lodash/throttle.js");YUI.add("squarespace-slide-rendering-grid-gallery",function(o){o.namespace("Squarespace.SlideRendering");var s=100;var t="sqs-gallery-grid";var d=o.Squarespace.SlideRendering.GridGalleryDensities;var p=false;o.Squarespace.SlideRendering.GridGallery=o.Base.create("GridGallery",o.Base,[o.Squarespace.Mixins.EventRegistrar],{initializer:function(){this._initGallery();this._bindUI();this._timeouts=[];this._duplicationIterations=0;this._throttledSyncUI=i(this.syncUI.bind(this),100,{leading:false,trailing:true})},destructor:function(){this._throttledSyncUI.cancel();o.Array.each(this._timeouts,function(e){e.cancel()},this);this._removeClonedItems();var e=this.get("container");if(e&&e.inDoc()){e.removeClass(t);this._reset()}},syncUI:function e(){this._reset();this._renderGrid()},_bindUI:function(){var e=void 0===window.orientation?"resize":"orientationchange";this._registerEvent(o.one(o.config.win).on(e,this._throttledSyncUI,this))},_initGallery:function(){this.get("container").addClass(t);var e=this.get("items");var a=new o.Parallel;e.each(function(e){var t=e.one("img");""===t.getAttribute("src")&&t.once("load",a.add())});a.done(function(){this._throttledSyncUI()}.bind(this))},_reset:function(){var e=this.get("container");this.densityValues=this._parseDensityJSON();this.imageOrdering=this._getTweakImageOrdering();this.dimension=this._getAxisDimension();this.axisGroups=[];this.imageRatios=[];e.setStyles({marginTop:null,marginLeft:null,width:null,height:null});this._setAxisDirection();this.currentAxisGroup={dimension:this.dimension,items:[],imageRatios:[]}},_renderGrid:function e(){var t=this.get("items");t.each(function(e,t){this._resetItemStyles(e);var a=this.imageOrdering;if("repeat"===a||"random"===a&&""!==e.getAttribute("data-clone")){var i=e.one("img");var s=this._getCalculatedImageDimensions(i);this.currentAxisGroup.imageRatios.push(s);var n=e._node;var r=this._fitsInAxis(this.currentAxisGroup);if(r)this.currentAxisGroup.items.push(n);else{this._growAxis(this.currentAxisGroup);this.axisGroups.push(this.currentAxisGroup);this.currentAxisGroup={dimension:this.dimension,items:[n],imageRatios:[this._getCalculatedImageDimensions(i)]}}}},this);var a=this._duplicationIterations>=s;if(a)n.captureException(new Error("Could not duplicate enough rows to fill a grid gallery to fit container."));else{var i=this._isScreenFilled();if(!i){this._duplicateOriginalItems();this._throttledSyncUI();return}}this._positionItems();this._positionContainer();this._loadImages(t)},_loadImages:function(e){e.each(function e(t){var a=t.one("img");var i=this._getTweakLoadingAnimation();o.one(a).once("load",function e(t){var a=1;i&&(a=Math.floor(2e3*Math.random()));this._timeouts.push(o.later(a,t.currentTarget,function(){this.get("parentNode").addClass("loaded")}))},this);this._timeouts.push(o.later(10,this,function e(){window.ImageLoader.load(a,{load:true,mode:"fill"})}))},this)},previewImageLoading:function(e){var t=e;var a=100;var i=this.get("items");var s=this.get("container");s.addClass("no-transition");i.each(function(e){e.removeClass("loaded");"true"===t&&(a=Math.floor(2e3*Math.random())+100);this._timeouts.push(o.later(a,e,function(){this.addClass("loaded")}))});this._timeouts.push(o.later(100,this,function(){s.removeClass("no-transition")}))},_fitsInAxis:function(e){var t=this.get("container");var a=this._getRenderedAxisDimension(e);var i=e.imageRatios[e.items.length];var s=e.dimension;var n=a+this._getProportionalDimension(i,s);var r;r="row"===this.get("axisDirection")?t.get("clientWidth"):t.get("clientHeight");return n<=r},_getRenderedAxisDimension:function(e){var t=0;var a=e.dimension;var i=e.items.length;for(var s=0;s<i;s++)t+=this._getProportionalDimension(e.imageRatios[s],a);return t},_getProportionalDimension:function(e,t){var a;"column"===this.get("axisDirection")?a=e.height*t/e.width:"row"===this.get("axisDirection")&&(a=e.width*t/e.height);return a},_getCalculatedImageDimensions:function(e){var t=e.getAttribute("data-image-dimensions").split("x");var a=parseInt(t[0],10);var i=parseInt(t[1],10);var s=a;var n=i;var r=this._getTweakImageRatio();"original"!==r&&(a>i?n=a*r.ratioHeight/r.ratioWidth:s=i*r.ratioWidth/r.ratioHeight);return{width:s,height:n}},_growAxis:function(e){var t=this.get("container");var a=this._getRenderedAxisDimension(e);var i=this.get("axisDirection");var s;s="row"===i?t.get("clientWidth"):t.get("clientHeight");var n=Math.floor(s*e.dimension/a);var r;var o=e.items.length;for(var l=0;l<o;l++){r=e.items[l];if("row"===i){r.style.height=n+"px";r.style.width=Math.floor(this._getProportionalDimension(e.imageRatios[l],n))+"px"}else{r.style.width=n+"px";r.style.height=Math.floor(this._getProportionalDimension(e.imageRatios[l],n))+"px"}}e.dimension=n},_positionItems:function(){this.axisGroups.forEach(function(e,t,a){var i;var s;var n=e.items.length;var r=this.get("axisDirection");var o="height";var l="top";var c="left";if("row"===r){o="width";l="left";c="top"}for(var u=0;u<n;u++){i=e.items[u];s=e.items[u-1];i.style[l]=s?parseInt(s.style[o],10)+parseInt(s.style[l],10)+"px":"0";var d=0;for(var p=0;p<t;p++)d+=a[p].dimension;i.style[c]=d+"px";i.style.visibility="visible"}}.bind(this))},_positionContainer:function(){var e=this.get("container");var t=this.axisGroups.overage/2;var a="column"===this.get("axisDirection");var i=this._getTweakImageRatio();var s="original"===i;a&&s?e.setStyles({marginLeft:0-t+"px",width:"calc(100% + "+t+"px)"}):e.setStyles({marginTop:0-t+"px",height:"calc(100% + "+t+"px)"})},_duplicateOriginalItems:function(){var r=[];var e=this.get("items");e.each(function(e,t){if(e.hasAttribute("data-clone"))return;var a=e.get("outerHTML");var i=' data-clone="true" ';var s=a.indexOf('class="sqs-slice-gallery-item');var n=[a.slice(0,s-1),i,a.slice(s)].join("");r.push(n)},this);"random"===this.imageOrdering&&this._randomSortArray(r);var t=this.get("container");t.append(r.join(""));var a=t.all(".sqs-slice-gallery-item");this.set("items",a);this._duplicationIterations++},_removeClonedItems:function(){var e=this.get("items");e.each(function(e,t){e.hasAttribute("data-clone")&&e.remove()},this)},_resetItemStyles:function(e){e.setStyles({top:null,left:null,width:null,height:null,visibility:"hidden"})},_isScreenFilled:function(){var e=this.get("container");var i=0;var s;s="row"===this.get("axisDirection")?e.get("clientHeight"):e.get("clientWidth");this.axisGroups.lastVisibleAxisGroupIndex=null;this.axisGroups.overage=null;this.axisGroups.forEach(function(e,t,a){i+=e.dimension;if(i>s){if(!this.axisGroups.lastVisibleAxisGroupIndex){this.axisGroups.lastVisibleAxisGroupIndex=t;this.axisGroups.overage=i-s}}else this.axisGroups.overage=i-s}.bind(this));if(0===i&&0===s)return true;return i>s},_setAxisDirection:function(){if(this.get("container").inDoc()){var e=o.one(this.get("slideContainerSelector")).get("className");var t=e.match(/(grid-gallery-direction-)\w+/g)[0];-1!==t.indexOf("horizontal")||"original"!==this._getTweakImageRatio()?this.set("axisDirection","row"):this.set("axisDirection","column")}},_getGridDensity:function(){var i=this.densityValues;var s=i[0];var n=o.one(this.get("slideContainerSelector"));var e=["grid-gallery-density-very-low","grid-gallery-density-low","grid-gallery-density-medium","grid-gallery-density-high","grid-gallery-density-very-high"];e.forEach(function(e,t,a){n.hasClass(e)&&(s=i[t])});return s},_parseDensityJSON:function(){if(true===p&&this.get("testDensityValue")){var e=this.get("testDensityValue");return[e,e,e,e,e]}var t=d;var a=this.get("container");var i=this.get("axisDirection");var s=this._getTweakImageRatio(true);var n=this._getTweakImageOrientation();var r=a.get("clientWidth");var o=a.get("clientHeight");var l;var c;var u;l=r<=600&&o<=600?r<o?"maxWidth-600":"maxHeight-600":r<=600?"maxWidth-600":o<=600?"maxHeight-600":r<=800?"maxWidth-800":"desktop";c="original"===s?"original":"r"+s.ratioWidth.toString()+s.ratioHeight.toString();"r11"===c?u="square":"column"===i?u="vertical":"row"===i&&(u="portrait"===n?"vertical":"horizontal");return t[l].orientation[u].ratio[c]},_getAxisDimension:function(){var e=this.get("container");if("row"===this.get("axisDirection"))return Math.ceil(e.get("clientHeight")/this._getGridDensity());return Math.ceil(e.get("clientWidth")/this._getGridDensity())},_getTweakImageRatio:function(e){var t=o.one(this.get("slideContainerSelector")).get("className");var a=t.match(/(grid-gallery-ratio-)\w+/g)[0];var i=a.substring(a.lastIndexOf("-")+1);var s;var n;switch(i){case"11":s=1;n=1;break;case"54":s=5;n=4;break;case"43":s=4;n=3;break;case"32":s=3;n=2;break;case"169":s=16;n=9;break;case"21":s=2;n=1;break;default:return"original"}if(!e&&"portrait"===this._getTweakImageOrientation()&&s!==n){var r=s;s=n;n=r}return{ratioWidth:s,ratioHeight:n}},_getTweakImageOrientation:function(){var e=o.one(this.get("slideContainerSelector")).get("className");var t=e.match(/(grid-gallery-image-orientation-)\w+/g)[0];t=t.substring(t.lastIndexOf("-")+1);return t},_getTweakLoadingAnimation:function(){var e=false;o.one(this.get("slideContainerSelector")).hasClass("gallery-loading-animation")&&(e=true);return e},_getTweakImageOrdering:function(){var e="repeat";o.one(this.get("slideContainerSelector")).hasClass("gallery-randomize-order")&&(e="random");this.set("imageOrdering",e);return this.get("imageOrdering")},_randomSortArray:function(e){function t(){var e=Math.random();var t;e<=.36?t=-1:e<=.64?t=0:e<=1&&(t=1);return t}e.sort(t);e.sort(t)}},{CSS_PREFIX:"sqs-grid-gallery",ATTRS:{container:{value:null,validator:o.Squarespace.AttrValidators.isNullOrNode},slideContainerSelector:{value:".sqs-slide-container",validator:o.Squarespace.AttrValidators.isNullOrString},items:{value:null,validator:o.Squarespace.AttrValidators.isNullOrNodeList},axisDirection:{value:"row",validator:function(e,t){if(o.Squarespace.AttrValidators.isString(e,t)){if("row"===e||"column"===e)return true;false;return false}return false}},imageOrdering:{value:"repeat",validator:function(e,t){if(o.Squarespace.AttrValidators.isString(e,t)){if("repeat"===e||"random"===e)return true;false;return false}return false}},testDensityValue:{value:null,validator:o.Squarespace.AttrValidators.isNullOrNumber}}})},"1.0",{requires:["base","parallel","squarespace-attr-validators","squarespace-slide-rendering-grid-gallery-densities","squarespace-mixins-event-registrar"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/layouts/audio-full-center-01.js":function(e,t,a){var c=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").BoundaryRatios;var u=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").FontSize;var d=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverflowDetector;var p=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverlapDetector;YUI.add("squarespace-slide-rendering-layouts-audio-full-center-01",function(l){l.namespace("Squarespace.SlideRendering.Layouts");l.Squarespace.SlideRendering.Layouts.AudioFullCenter01=l.Base.create("AudioFullCenter01",l.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();var t=e.querySelector(".group-copy");var a=e.querySelector('[data-compound-type="logo"] > *');var i=e.querySelector(".responsive-wrapper");var s=e.querySelector(".layer-front .sqs-slide-layer-content");var n=e.querySelector('[data-slice-type="album"]');var r=Array.prototype.slice.call(e.querySelectorAll(".track"));r.forEach(function(e,t,a){e.insertBefore(e.querySelector(".track-title"),e.querySelector(".track-progress-bar"))});this._registerResponsiveComponent(new u({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthRatio:.49,minFontSize:13,onReset:function(e,t){t.classList.remove("text-align-center")},onMinFontSize:function(e,t){t.classList.add("text-align-center")}}));this._registerResponsiveComponent(new u({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),heightBoundaryNode:e.querySelector(".sqs-slide-layer"),widthBoundaryNode:t,widthRatio:.9,heightRatio:.16,scale:.99,minFontSize:18}));var o=new u({rootNode:i,fontSizeNodes:[e.querySelector('[data-compound-type="action"] ul'),e.querySelector('[data-slice-type="custom-form"]')],widthBoundaryNode:t,minFontSize:10,widthRatio:.9,enabled:true,onReset:function(e){e=new l.Node(e);e.removeClass("stacked");if(s.clientWidth>900){e.addClass("top-right");e.one('[data-slice-type]:not([data-content-empty="true"])')&&e.ancestor(".sqs-slide").one('[data-compound-type="logo"]').addClass("text-align-left")}else{e.removeClass("top-right");e.one('[data-slice-type]:not([data-content-empty="true"])')&&e.ancestor(".sqs-slide").one('[data-compound-type="logo"]').removeClass("text-align-left")}},onMinFontSize:function(e){e=new l.Node(e);e.addClass("stacked");e.removeClass("top-right");e.ancestor(".sqs-slide").one('[data-compound-type="logo"]').removeClass("text-align-left")}});this._registerResponsiveComponent(o);this._registerResponsiveComponent(new p({rootNode:a,targetNode:i,padding:60,onReset:function(e,t){if(s.clientWidth>900){t.classList.add("top-right");t.querySelector('[data-slice-type]:not([data-content-empty="true"])')&&e.parentNode.classList.add("text-align-left")}else{t.classList.remove("top-right");t.querySelector('[data-slice-type]:not([data-content-empty="true"])')&&e.parentNode.classList.remove("text-align-left")}},onRespond:function(e,t){t.classList.remove("top-right");e.parentNode.classList.remove("text-align-left")}}));this._registerResponsiveComponent(new p({rootNode:t,targetNode:n,padding:100,onReset:function(e,t){e.classList.add("align-center-js");e.classList.remove("stacked");s.classList.remove("scroll");t.parentNode.classList.add("bottom");l.later(10,e,function(){this.style.marginTop=-Math.floor(this.clientHeight/2)+"px";this.style.marginLeft=-Math.floor(this.clientWidth/2)+"px"})},onRespond:function(e,t){e.classList.remove("align-center-js");e.classList.add("stacked");s.classList.add("scroll");t.parentNode.classList.remove("bottom")}}));this._registerResponsiveComponent(new c({rootNode:i,widthBoundaryNode:t,widthRatio:.8,onReset:function(e){e.classList.remove("stacked");e.classList.add("top-right")},onRespond:function(e){e.classList.add("stacked");e.classList.remove("top-right")}}));this._registerResponsiveComponent(new p({rootNode:t,targetNode:i,padding:60,onReset:function(e,t){e.classList.add("align-center-js");e.classList.remove("stacked");t.classList.add("top-right");s.classList.remove("scroll");l.later(10,e,function(){this.style.marginTop=-Math.floor(this.clientHeight/2)+"px";this.style.marginLeft=-Math.floor(this.clientWidth/2)+"px"})},onRespond:function(e,t){e.classList.remove("align-center-js");e.classList.add("stacked");t.classList.remove("top-right");s.classList.add("scroll")}}));this._registerResponsiveComponent(new d({rootNode:t,widthRatio:.9,onReset:function(e){e.classList.add("align-center-js");e.classList.remove("stacked");s.classList.remove("scroll");n.parentNode.classList.add("bottom");e.style.marginTop=-Math.floor(e.clientHeight/2)+"px";e.style.marginLeft=-Math.floor(e.clientWidth/2)+"px"},onRespond:function(e){e.classList.remove("align-center-js");e.classList.add("stacked");s.classList.add("scroll");n.parentNode.classList.remove("bottom")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/layouts/audio-full-left-01.js":function(e,t,a){var n=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").BoundaryRatios;var r=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").FontSize;var o=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverflowDetector;YUI.add("squarespace-slide-rendering-layouts-audio-full-left-01",function(s){s.namespace("Squarespace.SlideRendering.Layouts");s.Squarespace.SlideRendering.Layouts.AudioFullLeft01=s.Base.create("AudioFullLeft01",s.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();var t=e.querySelector(".sqs-slice-group.group-links");this._registerResponsiveComponent(new r({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthRatio:.98,minFontSize:26}));this._registerResponsiveComponent(new r({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),widthRatio:.98,minFontSize:15}));var a=new r({rootNode:e.querySelector(".responsive-wrapper.actions"),widthBoundaryNode:t,fontSizeNodes:[e.querySelector('[data-compound-type="action"] ul'),e.querySelector('[data-slice-type="custom-form"]')],minFontSize:10,widthRatio:.9,enabled:false,onReset:function(e){e.classList.remove("stacked")},onMinFontSize:function(e){e.classList.add("stacked")}});this._registerResponsiveComponent(a);var i=new n({rootNode:e.querySelector(".responsive-wrapper.social"),widthRatio:.9,enabled:false,onReset:function(e){e.classList.remove("stacked")},onRespond:function(e){e.classList.add("stacked")}});this._registerResponsiveComponent(i);this._registerResponsiveComponent(new n({rootNode:t,widthRatio:.9,onReset:function(e){e.classList.add("inline");a.disable();i.disable()},onRespond:function(e){e.classList.remove("inline");a.enable();i.enable()}}));this._registerResponsiveComponent(new o({rootNode:e.querySelector(".sqs-slide-layer-content > .sqs-slice-group"),onReset:function(e){e=new s.Node(e);e.removeClass("stacked");e.ancestor(".sqs-slide-layer").removeClass("scroll")},onRespond:function(e){e=new s.Node(e);e.addClass("stacked");e.ancestor(".sqs-slide-layer").addClass("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/layouts/audio-full-right-01.js":function(e,t,a){var l=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").BoundaryRatios;var c=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").FontSize;var u=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverflowDetector;var d=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverlapDetector;YUI.add("squarespace-slide-rendering-layouts-audio-full-right-01",function(n){var t=function(e){return new n.Node(e).ancestor(".sqs-slide-layer").getDOMNode()};var r=function(e){t(e).classList.add("scroll")};var o=function(e){t(e).classList.remove("scroll")};n.namespace("Squarespace.SlideRendering.Layouts");n.Squarespace.SlideRendering.Layouts.AudioFullRight01=n.Base.create("AudioFullRight01",n.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var a=this.get("contentBox").getDOMNode();var e=a.querySelector(".group-copy");var t=e.querySelector(".responsive-wrapper");var i=Array.prototype.slice.call(a.querySelectorAll(".track"));i.forEach(function(e,t,a){e.insertBefore(e.querySelector(".track-title"),e.querySelector(".track-progress-bar"))});this._registerResponsiveComponent(new c({rootNode:a.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthRatio:.98,minFontSize:12}));this._registerResponsiveComponent(new c({rootNode:a.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),widthRatio:.98,minFontSize:15}));this._registerResponsiveComponent(new c({rootNode:t,widthBoundaryNode:e,fontSizeNodes:[a.querySelector('[data-compound-type="action"] ul'),a.querySelector('[data-slice-type="custom-form"]')],minFontSize:10,widthRatio:.9,onReset:function(e){e.classList.remove("stacked")},onMinFontSize:function(e){e.classList.add("stacked")}}));this._registerResponsiveComponent(new l({rootNode:a.querySelector('[data-slice-type="social-icons"]:not([data-content-empty="true"])'),widthRatio:.9,onReset:function(e){e.classList.remove("stacked");e.querySelector(".break")&&e.querySelector(".break").remove()},onRespond:function(e){e.classList.add("stacked");var t=e.childNodes;if(!e.querySelector(".break")){var a=new n.Node(t.item(Math.floor(t.length/2)));a.insert('<br class="break">',"before")}}}));this._registerResponsiveComponent(new d({rootNode:a.querySelector(".group-logo"),targetNode:e,padding:20,onReset:function(e,t){o(t);e.classList.add("top-full-width");t.classList.add("align-center-vert")},onRespond:function(e,t){r(t);e.classList.remove("top-full-width");t.classList.remove("align-center-vert")}}));this._registerResponsiveComponent(new d({rootNode:a.querySelector('[data-slice-type="social-icons"]:not([data-content-empty="true"])'),targetNode:e,padding:50,onReset:function(e,t){e.parentNode.classList.add("bottom-full-width");t.classList.add("align-center-vert")},onRespond:function(e,t){e.parentNode.classList.remove("bottom-full-width");t.classList.remove("align-center-vert")}}));this._registerResponsiveComponent(new d({rootNode:a.querySelector('[data-slice-type="social-icons"]:not([data-content-empty="true"])'),targetNode:t,padding:50,onReset:function(e,t){e.parentNode.classList.add("bottom-full-width");t.parentNode.classList.add("align-center-vert");o(e);a.querySelector(".group-logo").classList.add("top-full-width")},onRespond:function(e,t){e.parentNode.classList.remove("bottom-full-width");t.parentNode.classList.remove("align-center-vert");r(e);a.querySelector(".group-logo").classList.remove("top-full-width")}}));this._registerResponsiveComponent(new u({rootNode:e,onReset:function(e){o(e);a.querySelector(".group-logo").classList.add("top-full-width")},onRespond:function(e){r(e);a.querySelector(".group-logo").classList.remove("top-full-width")}}));var s=new u({rootNode:a.querySelector('[data-slice-type="social-icons"]:not([data-content-empty="true"])'),onReset:function(e){o(e);a.querySelector(".group-logo").classList.add("top-full-width")},onRespond:function(e){r(e);a.querySelector(".group-logo").classList.remove("top-full-width")}});this._registerResponsiveComponent(s)}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/layouts/audio-left-right-01.js":function(e,t,a){var r=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").BoundaryRatios;var o=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").FontSize;var l=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverflowDetector;var c=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverlapDetector;YUI.add("squarespace-slide-rendering-layouts-audio-left-right-01",function(n){n.namespace("Squarespace.SlideRendering.Layouts");n.Squarespace.SlideRendering.Layouts.AudioLeftRight01=n.Base.create("AudioLeftRight01",n.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();var a=e.querySelector(".group-copy");var t=e.querySelector(".responsive-wrapper");var i=Array.prototype.slice.call(e.querySelectorAll(".track"));i.forEach(function(e,t,a){e.insertBefore(e.querySelector(".track-title"),e.querySelector(".track-progress-bar"))});var s=!!n.one("html.flexbox");this._registerResponsiveComponent(new o({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthBoundaryNode:a,widthRatio:.99,scale:.99,minFontSize:20}));this._registerResponsiveComponent(new o({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),widthBoundaryNode:a,widthRatio:.99,scale:.99,minFontSize:16}));this._registerResponsiveComponent(new o({rootNode:t,fontSizeNodes:[e.querySelector('[data-compound-type="action"] ul'),e.querySelector('[data-slice-type="custom-form"]')],minFontSize:10,widthRatio:.9,onReset:function(e){e.classList.remove("stacked")},onMinFontSize:function(e){e.classList.add("stacked")}}));this._registerResponsiveComponent(new r({rootNode:e.querySelector('[data-slice-type="social-icons"]:not([data-content-empty="true"])'),widthBoundaryNode:a,widthRatio:.7,onReset:function(e){e.classList.remove("wrapped");e.querySelector(".break")&&e.querySelector(".break").remove()},onRespond:function(e){e.classList.add("wrapped");var t=e.childNodes;if(!e.querySelector(".break")){var a=new n.Node(t.item(Math.floor(t.length/2)));a.insert('<br class="break">',"before")}}}));this._registerResponsiveComponent(new r({rootNode:t,widthRatio:.9,onReset:function(e){e.classList.remove("stacked")},onRespond:function(e){e.classList.add("stacked")}}));this._registerResponsiveComponent(new c({rootNode:a,targetNode:e.querySelector('[data-compound-type="logo"] > *'),padding:40,onReset:function(e,t){document.querySelector("html.flexbox")||a.classList.add("align-center-vert")},onRespond:function(e,t){s||a.classList.remove("align-center-vert")}}));this._registerResponsiveComponent(new c({rootNode:a,targetNode:e.querySelector(".content-gallery"),padding:parseInt(a.ownerDocument.defaultView.getComputedStyle(a.parentNode).paddingTop,10),onReset:function(e){if(!s){e.classList.add("align-center");e.classList.remove("align-center-horiz")}},onRespond:function(e){if("left"!==a.ownerDocument.defaultView.getComputedStyle(a.parentNode).float&&!s){e.classList.remove("align-center");e.classList.add("align-center-horiz")}}}));this._registerResponsiveComponent(new l({rootNode:a,padding:Math.max(25,2*parseInt(getComputedStyle(e)["border-top-width"],10)),onReset:function(e){e.parentNode.classList.remove("scroll");if(!s){a.classList.add("align-center");a.classList.remove("align-center-horiz")}},onRespond:function(e){e.parentNode.classList.add("scroll");if(!s){a.classList.remove("align-center");a.classList.add("align-center-horiz")}}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/layouts/base.js":function(e,t,a){var i=a("./common/temp/node_modules/lodash/debounce.js");var s=a("./src/main/webapp/frontend/packages/enums/SlideType.js");var u=a("./common/temp/node_modules/@sqs/site-rendering/FontLoadChecker/index.js");var n=a("./src/main/webapp/universal/src/shared/utils/error-reporter/global-sentry.ts");var r=a("./src/main/webapp/universal/src/shared/constants/SliceTypeByName.js");var o=a("./src/main/webapp/universal/src/shared/constants/SlideTypeNames.js");var d=a("./src/main/webapp/universal/src/shared/utils/SvgCompatibility.js");YUI.add("squarespace-slide-rendering-layouts-base",function(l){l.namespace("Squarespace.SlideRendering.Layouts");var c=l.Squarespace.SlideRendering.Layouts.Base=l.Base.create("LayoutBase",l.Widget,[],{initializer:function(){this._sliceWidgetMap={};this._responsiveComponents=[];this._debouncedSyncResponsiveComponents=i(this._syncResponsiveComponents,200);this._windowResizeHandler=l.one(l.config.win).on("resize",this._debouncedSyncResponsiveComponents,this);this._watchTweaks();l.Global.once("slideReady",function(){var e=this.get("contentBox");e.getAttribute("data-slide-type")===o[s.POPUP_OVERLAY]&&setTimeout(function(){e.addClass("sqs-slide-animation-ready")},500)},this)},destructor:function(){this._debouncedSyncResponsiveComponents.cancel();this._windowResizeHandler.detach();l.Object.each(this._sliceWidgetMap,function e(t){t.destroy(true)});this.get("contentBox").removeClass("sqs-slide-ready");this._destroyResponsiveComponents()},renderUI:function(){var t="undefined"!==typeof squarespaceStartApp;var a;t||(a=new u(['[data-compound-type="logo"][data-slice-type="heading"] h1','[data-slice-type="heading"]:not([data-compound-type]) h1','[data-slice-type="body"]'],l.config.win.document.body));this._checkSupportVH();l.UA.safari>0&&!l.UA.mobile&&l.one("html").addClass("browser-safari");c.superclass.renderUI.call(this);var e=this.get("contentBox");e.all("[data-slice-type]").each(function(e){if("true"===e.getAttribute("data-content-empty"))return;this._widgetizeSliceNode(e)},this);this._initResponsiveComponents();d.parse();var i=e.all('[data-slice-type="image"] img[data-image-dimensions*="x"]');var s=new l.Parallel;var n=function(){this._debouncedSyncResponsiveComponents();this.get("contentBox").addClass("sqs-slide-ready");l.Global.fire("slideReady")}.bind(this);var r=function(){if(t)n();else{var e=a.check();l.Squarespace.Promises.all(e).then(function(){n()})}};var o=setTimeout(r,2e3);i.each(function(e){e.once("load",s.add())},this);s.done(function(){clearTimeout(o);r()})},_widgetizeSliceNode:function(e){var t=e.getAttribute("data-slice-type");var a=e.getAttribute("data-compound-type");var i=r[t];var s=l.Squarespace.SlideRendering.Slices.Factory.create(i,{sliceId:e.getAttribute("data-slice-id")||null,slideType:this.get("slideType"),boundingBox:e,render:true});var n=a?r[a]:r[t];this._sliceWidgetMap[n]=s},_syncSliceWidgets:function(){l.Object.each(this._sliceWidgetMap,function(e){e.syncUI()})},_destroyResponsiveComponents:function(){this._responsiveComponents=[]},_initResponsiveComponents:function(){},_watchTweaks:function(){var e=this.get("slideType");if(window.Static.SQUARESPACE_CONTEXT.authenticatedAccount&&"popup-overlay"===e){var t=this.get("contentBox").getDOMNode();this.tweakPreview=function(){t.querySelector(".sqs-slide-layer-content").style.transition="none";t.classList.remove("sqs-slide-animation-ready");setTimeout(function(){this.querySelector(".sqs-slide-layer-content").style.transition="";this.classList.add("sqs-slide-animation-ready")}.bind(t),500)};var i=["button-layout-style","newsletter-layout-style"];l.Global.after("tweak:change",function(e){var t=e.config.category;var a=e.getName();"Overlay Animation"===t?this.tweakPreview():"Overlay Design"===t&&this._debouncedSyncResponsiveComponents();i.indexOf(a)>=0&&this._debouncedSyncResponsiveComponents()},this)}},_syncResponsiveComponents:function(){this._responsiveComponents.forEach(function e(t){try{t.reset();t.respond()}catch(e){n.captureException(e)}});l.Global.fire("slideComponentSync")},_registerResponsiveComponent:function(e){this._responsiveComponents.push(e)},_checkSupportVH:function(){7===parseInt(l.UA.ios,10)?l.one("html").addClass("no-vh"):l.one("html").addClass("vh")},CONTENT_TEMPLATE:null},{CSS_PREFIX:"sqs-slide",ATTRS:{slideId:{valueFn:function(){return this.get("contentBox").getAttribute("data-slide-id")}},slideType:{valueFn:function(){return this.get("contentBox").getAttribute("data-slide-type")}},slideLayoutIdentifier:{valueFn:function(){return this.get("contentBox").getAttribute("data-slide-layout-id")}}}})},"1.0",{requires:["base","squarespace-attr-validators","parallel","squarespace-promises","squarespace-slide-rendering-slices-factory","widget"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/layouts/factory.js":function(e,t){YUI.add("squarespace-slide-rendering-layouts-factory",function(i){i.namespace("Squarespace.SlideRendering.Layouts");var s={"audio-full-center-01":i.Squarespace.SlideRendering.Layouts.AudioFullCenter01,"audio-full-left-01":i.Squarespace.SlideRendering.Layouts.AudioFullLeft01,"audio-full-right-01":i.Squarespace.SlideRendering.Layouts.AudioFullRight01,"audio-left-right-01":i.Squarespace.SlideRendering.Layouts.AudioLeftRight01,"landing-full-center-01":i.Squarespace.SlideRendering.Layouts.LandingFullCenter01,"landing-full-center-02":i.Squarespace.SlideRendering.Layouts.LandingFullCenter02,"landing-full-centercard-01":i.Squarespace.SlideRendering.Layouts.LandingFullCenterCard01,"landing-full-left-01":i.Squarespace.SlideRendering.Layouts.LandingFullLeft01,"landing-full-left-02":i.Squarespace.SlideRendering.Layouts.LandingFullLeft02,"landing-full-right-01":i.Squarespace.SlideRendering.Layouts.LandingFullRight01,"landing-full-topleft-01":i.Squarespace.SlideRendering.Layouts.LandingFullTopLeft01,"landing-left-right-01":i.Squarespace.SlideRendering.Layouts.LandingLeftRight01,"landing-right-left-01":i.Squarespace.SlideRendering.Layouts.LandingRightLeft01,"location-full-corners-01":i.Squarespace.SlideRendering.Layouts.LocationFullCorners01,"location-right-left-01":i.Squarespace.SlideRendering.Layouts.LocationRightLeft01,"lock-full-center-01":i.Squarespace.SlideRendering.Layouts.LockFullCenter01,"lock-full-center-02":i.Squarespace.SlideRendering.Layouts.LockFullCenter02,"lock-full-center-03":i.Squarespace.SlideRendering.Layouts.LockFullCenter03,"lock-full-center-04":i.Squarespace.SlideRendering.Layouts.LockFullCenter04,"lock-full-center-05":i.Squarespace.SlideRendering.Layouts.LockFullCenter05,"lock-full-bottomleft-01":i.Squarespace.SlideRendering.Layouts.LockFullBottomleft01,"overlay-center-card-01":i.Squarespace.SlideRendering.Layouts.OverlayCenterCard01,"overlay-center-card-02":i.Squarespace.SlideRendering.Layouts.OverlayCenterCard02,"overlay-center-card-03":i.Squarespace.SlideRendering.Layouts.OverlayCenterCard03,"overlay-center-card-04":i.Squarespace.SlideRendering.Layouts.OverlayCenterCard04,"overlay-center-card-05":i.Squarespace.SlideRendering.Layouts.OverlayCenterCard05,"overlay-corner-card-01":i.Squarespace.SlideRendering.Layouts.OverlayCornerCard01,"overlay-full-bottom-01":i.Squarespace.SlideRendering.Layouts.OverlayFullBottom01,"overlay-full-center-01":i.Squarespace.SlideRendering.Layouts.OverlayFullCenter01,"overlay-full-center-02":i.Squarespace.SlideRendering.Layouts.OverlayFullCenter02,"profile-center-center-01":i.Squarespace.SlideRendering.Layouts.ProfileCenterCenter01,"profile-center-center-02":i.Squarespace.SlideRendering.Layouts.ProfileCenterCenter02,"profile-full-bottom-01":i.Squarespace.SlideRendering.Layouts.ProfileFullBottom01,"profile-full-center-01":i.Squarespace.SlideRendering.Layouts.ProfileFullCenter01,"profile-full-left-01":i.Squarespace.SlideRendering.Layouts.ProfileFullLeft01,"profile-full-middleband-01":i.Squarespace.SlideRendering.Layouts.ProfileFullMiddleband01,"profile-full-right-01":i.Squarespace.SlideRendering.Layouts.ProfileFullRight01,"profile-full-top-01":i.Squarespace.SlideRendering.Layouts.ProfileFullTop01,"profile-left-left-01":i.Squarespace.SlideRendering.Layouts.ProfileLeftLeft01,"profile-left-right-01":i.Squarespace.SlideRendering.Layouts.ProfileLeftRight01,"twitter-full-center-01":i.Squarespace.SlideRendering.Layouts.TwitterFullCenter01,"twitter-full-left-01":i.Squarespace.SlideRendering.Layouts.TwitterFullLeft01,"video-full-bottom-01":i.Squarespace.SlideRendering.Layouts.VideoFullBottom01,"video-full-center-01":i.Squarespace.SlideRendering.Layouts.VideoFullCenter01,"video-full-corners-01":i.Squarespace.SlideRendering.Layouts.VideoFullCorners01};i.Squarespace.SlideRendering.Layouts.Factory={create:function(e,t){var a=s[e]||i.Squarespace.SlideRendering.Layouts.Base;return new a(t)}}},"1.0",{requires:["squarespace-enum","squarespace-slide-rendering-layouts-audio-full-center-01","squarespace-slide-rendering-layouts-audio-full-left-01","squarespace-slide-rendering-layouts-audio-full-right-01","squarespace-slide-rendering-layouts-audio-left-right-01","squarespace-slide-rendering-layouts-base","squarespace-slide-rendering-layouts-landing-full-center-01","squarespace-slide-rendering-layouts-landing-full-center-02","squarespace-slide-rendering-layouts-landing-full-centercard-01","squarespace-slide-rendering-layouts-landing-full-left-01","squarespace-slide-rendering-layouts-landing-full-left-02","squarespace-slide-rendering-layouts-landing-full-right-01","squarespace-slide-rendering-layouts-landing-full-topleft-01","squarespace-slide-rendering-layouts-landing-left-right-01","squarespace-slide-rendering-layouts-landing-right-left-01","squarespace-slide-rendering-layouts-location-full-corners-01","squarespace-slide-rendering-layouts-location-right-left-01","squarespace-slide-rendering-layouts-lock-full-bottomleft-01","squarespace-slide-rendering-layouts-lock-full-center-01","squarespace-slide-rendering-layouts-lock-full-center-02","squarespace-slide-rendering-layouts-lock-full-center-03","squarespace-slide-rendering-layouts-lock-full-center-04","squarespace-slide-rendering-layouts-lock-full-center-05","squarespace-slide-rendering-layouts-overlay-center-card-01","squarespace-slide-rendering-layouts-overlay-center-card-02","squarespace-slide-rendering-layouts-overlay-center-card-03","squarespace-slide-rendering-layouts-overlay-center-card-04","squarespace-slide-rendering-layouts-overlay-center-card-05","squarespace-slide-rendering-layouts-overlay-corner-card-01","squarespace-slide-rendering-layouts-overlay-full-bottom-01","squarespace-slide-rendering-layouts-overlay-full-center-01","squarespace-slide-rendering-layouts-overlay-full-center-02","squarespace-slide-rendering-layouts-profile-center-center-01","squarespace-slide-rendering-layouts-profile-center-center-02","squarespace-slide-rendering-layouts-profile-full-bottom-01","squarespace-slide-rendering-layouts-profile-full-center-01","squarespace-slide-rendering-layouts-profile-full-left-01","squarespace-slide-rendering-layouts-profile-full-middleband-01","squarespace-slide-rendering-layouts-profile-full-right-01","squarespace-slide-rendering-layouts-profile-full-top-01","squarespace-slide-rendering-layouts-profile-left-left-01","squarespace-slide-rendering-layouts-profile-left-right-01","squarespace-slide-rendering-layouts-twitter-full-center-01","squarespace-slide-rendering-layouts-twitter-full-left-01","squarespace-slide-rendering-layouts-video-full-bottom-01","squarespace-slide-rendering-layouts-video-full-center-01","squarespace-slide-rendering-layouts-video-full-corners-01"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/layouts/landing-full-center-01.js":function(e,t,a){var s=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").FontSize;var n=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").BoundaryRatios;var r=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverlapDetector;YUI.add("squarespace-slide-rendering-layouts-landing-full-center-01",function(i){var e=function(e){if(i.instanceOf(e,i.Node))return e.getDOMNode();return null};i.namespace("Squarespace.SlideRendering.Layouts");i.Squarespace.SlideRendering.Layouts.LandingFullCenter01=i.Base.create("LandingFullCenter01",i.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var a=this.get("contentBox");this._registerResponsiveComponent(new s({rootNode:e(a.one('[data-compound-type="logo"][data-slice-type="heading"] h1')),widthRatio:.5,minFontSize:13}));var t;this._registerResponsiveComponent(new s({rootNode:e(a.one('[data-slice-type="heading"]:not([data-compound-type]) h1')),widthRatio:.99,scale:.99,minFontSize:54,onReset:function(e){t.disable()},onRespond:function(e){},onMinFontSize:function(e){t.enable()}}));t=new s({rootNode:e(a.one('[data-slice-type="heading"]:not([data-compound-type]) h1')),widthRatio:1,heightRatio:.2,scale:.99,minFontSize:18,enabled:false,heightBoundaryNode:e(a.one(".sqs-slide-layer")),onReset:function(e){},onRespond:function(e){},onMinFontSize:function(e){}});this._registerResponsiveComponent(t);this._registerResponsiveComponent(new s({rootNode:e(a.one(".responsive-wrapper.actions")),fontSizeNodes:[e(a.one('[data-compound-type="action"] ul')),e(a.one('[data-slice-type="custom-form"]'))],minFontSize:10,widthRatio:.8,onReset:function(e){e=new i.Node(e);e.removeClass("stacked")},onMinFontSize:function(e){e=new i.Node(e);e.addClass("stacked")}}));this._registerResponsiveComponent(new n({rootNode:e(a.one(".responsive-wrapper.social")),widthRatio:.9,onReset:function(e){e=new i.Node(e);e.removeClass("stacked")},onRespond:function(e){e=new i.Node(e);e.addClass("stacked")}}));this._registerResponsiveComponent(new r({rootNode:e(a.one(".group-copy")),targetNode:e(a.one(".group-social")),padding:20,onReset:function(e,t){e=new i.Node(e);t=new i.Node(t);e.addClass("align-center-vert");e.addClass("full-width");e.removeClass("stacked");a.one(".sqs-slide-layer.layer-front").removeClass("scroll");t.addClass("bottom-full-width")},onRespond:function(e,t){e=new i.Node(e);t=new i.Node(t);e.removeClass("align-center-vert");e.addClass("full-width");e.addClass("stacked");a.one(".sqs-slide-layer.layer-front").addClass("scroll");t.removeClass("bottom-full-width")}}));this._registerResponsiveComponent(new r({rootNode:e(a.one(".group-copy")),targetNode:e(a.one('[data-compound-type="logo"]:not([data-content-empty="true"])')),padding:20,onReset:function(e,t){e=new i.Node(e);t=new i.Node(t);e.addClass("align-center-vert");e.addClass("full-width");e.removeClass("stacked");a.one(".sqs-slide-layer.layer-front").removeClass("scroll");t.addClass("align-center-horiz");a.one(".group-social").addClass("bottom-full-width")},onRespond:function(e,t){e=new i.Node(e);t=new i.Node(t);e.removeClass("align-center-vert");e.removeClass("full-width");e.addClass("stacked");a.one(".sqs-slide-layer.layer-front").addClass("scroll");t.removeClass("align-center-horiz");a.one(".group-social").removeClass("bottom-full-width")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/layouts/landing-full-center-02.js":function(e,t,a){var c=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").BoundaryRatios;var u=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").FontSize;var d=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverflowDetector;var p=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverlapDetector;YUI.add("squarespace-slide-rendering-layouts-landing-full-center-02",function(o){var l=function(e){return new o.Node(e).get("region")};o.namespace("Squarespace.SlideRendering.Layouts");o.Squarespace.SlideRendering.Layouts.LandingFullCenter02=o.Base.create("LandingFullCenter02",o.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();var t=e.querySelector(".layer-front .sqs-slide-layer-content");var a=e.querySelector(".group-copy");var i=a.querySelector('[data-slice-type="body"]');var s=e.querySelector(".responsive-wrapper");var n=e.querySelector('[data-compound-type="logo"]');var r=e.querySelector(".group-links");this._registerResponsiveComponent(new u({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthRatio:.99,minFontSize:13}));this._registerResponsiveComponent(new u({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),widthRatio:1,heightRatio:.25,scale:.99,minFontSize:18,heightBoundaryNode:t}));this._registerResponsiveComponent(new c({rootNode:e.querySelector('[data-slice-type="social-icons"]:not([data-content-empty="true"])'),widthBoundaryNode:t,widthRatio:.8,onReset:function(e){s.classList.remove("stacked");e.querySelector(".break")&&e.querySelector(".break").remove()},onRespond:function(e){s.classList.add("stacked");var t=e.childNodes;if(!e.querySelector(".break")){var a=new o.Node(t.item(Math.floor(t.length/2)));a.insert('<br class="break">',"before")}}}));this._registerResponsiveComponent(new c({rootNode:r,widthBoundaryNode:t,widthRatio:.8,onReset:function(e){s.classList.remove("stacked")},onRespond:function(e){s.classList.add("stacked")}}));this._registerResponsiveComponent(new c({rootNode:e.querySelector('[data-slice-type="navigation"]'),widthBoundaryNode:t,widthRatio:.8,onReset:function(e){s.classList.remove("stacked")},onRespond:function(e){s.classList.add("stacked")}}));this._registerResponsiveComponent(new c({rootNode:r,widthBoundaryNode:t,widthRatio:.8,onReset:function(e){s.classList.remove("stacked");r.classList.add("top-right");n.classList.remove("aligned");r.classList.remove("bottom-full-width")},onRespond:function(e){s.classList.add("stacked");r.classList.remove("top-right");n.classList.add("aligned");r.classList.add("bottom-full-width")}}));this._registerResponsiveComponent(new p({rootNode:e.querySelector('[data-compound-type="logo"] > *'),targetNode:r,padding:60,onReset:function(e,t){t.classList.add("top-right");t.querySelector('.sqs-slice:not([data-content-empty="true"])')?n.classList.remove("aligned"):n.classList.add("aligned");t.classList.remove("bottom-full-width");var a=e.parentNode;a.style.marginTop=null;a.style.marginBottom=null;t.style.marginTop=null;t.style.marginBottom=null;var i=Math.floor((l(a).height-l(t).height)/2);var s=i>0?t:a;s.style.marginTop=Math.abs(i)+"px";s.style.marginBottom=Math.abs(i)+"px"},onRespond:function(e,t){t.classList.remove("top-right");n.classList.add("aligned");t.classList.add("bottom-full-width");var a=e.parentNode;a.style.marginTop=null;a.style.marginBottom=null;t.style.marginTop=null;t.style.marginBottom=null}}));this._registerResponsiveComponent(new p({rootNode:a,targetNode:r,padding:60,onReset:function(e,t){e.classList.remove("stacked");e.classList.add("align-center-vert");e.classList.add("restrict-width-1000");t.classList.add("top-right");n.classList.remove("aligned");t.classList.remove("bottom-full-width");t.parentNode.classList.remove("scroll")},onRespond:function(e,t){e.classList.add("stacked");e.classList.remove("align-center-vert");e.classList.remove("restrict-width-1000");t.classList.remove("top-right");n.classList.add("aligned");t.classList.add("bottom-full-width");t.parentNode.classList.add("scroll")}}));this._registerResponsiveComponent(new d({rootNode:a,onReset:function(e){e.classList.add("align-center-vert");e.parentNode.classList.remove("scroll")},onRespond:function(e){e.classList.remove("align-center-vert");e.parentNode.classList.add("scroll")}}));this._registerResponsiveComponent(new d({rootNode:i,onReset:function(e){a.classList.add("align-center-vert");a.parentNode.classList.remove("scroll")},onRespond:function(e){a.classList.remove("align-center-vert");a.parentNode.classList.add("scroll")}}));this._registerResponsiveComponent(new d({rootNode:r,padding:10,onReset:function(e){a.classList.add("align-center-vert");e.parentNode.classList.remove("scroll")},onRespond:function(e){a.classList.remove("align-center-vert");e.parentNode.classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/layouts/landing-full-centercard-01.js":function(e,t,a){var s=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").FontSize;var n=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").BoundaryRatios;var r=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverlapDetector;YUI.add("squarespace-slide-rendering-layouts-landing-full-centercard-01",function(i){i.namespace("Squarespace.SlideRendering.Layouts");i.Squarespace.SlideRendering.Layouts.LandingFullCenterCard01=i.Base.create("LandingFullCenterCard01",i.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();var a=e.querySelector(".layer-front .sqs-slide-layer-content");this._registerResponsiveComponent(new s({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthRatio:.99,minFontSize:13,onReset:function(e,t){},onMinFontSize:function(e,t){}}));this._registerResponsiveComponent(new s({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),widthRatio:.99,scale:.99,minFontSize:18}));this._registerResponsiveComponent(new s({rootNode:e.querySelector(".responsive-wrapper.actions"),fontSizeNodes:[e.querySelector('[data-compound-type="action"] ul'),e.querySelector('[data-slice-type="custom-form"]')],minFontSize:10,widthRatio:.6,onReset:function(e){e.classList.remove("stacked")},onMinFontSize:function(e){e.classList.add("stacked")}}));this._registerResponsiveComponent(new n({rootNode:e.querySelector('[data-slice-type="social-icons"]:not([data-content-empty="true"])'),widthBoundaryNode:e.querySelector(".group-social"),widthRatio:.95,onReset:function(e){e.classList.remove("wrapped");e.parentNode.classList.remove("stacked");e.querySelector(".break")&&e.querySelector(".break").remove()},onRespond:function(e){e.classList.add("wrapped");e.parentNode.classList.add("stacked");var t=e.childNodes;if(!e.querySelector(".break")){var a=new i.Node(t.item(Math.floor(t.length/2)));a.insert('<br class="break">',"before")}}}));this._registerResponsiveComponent(new n({rootNode:e.querySelector(".responsive-wrapper.social"),widthRatio:.9,onReset:function(e){e.classList.remove("stacked")},onRespond:function(e){e.classList.add("stacked")}}));this._registerResponsiveComponent(new r({rootNode:e.querySelector(".group-copy"),targetNode:e.querySelector(".group-social"),padding:20,onReset:function(e,t){e.classList.add("align-center-vert");e.classList.remove("stacked");a.parentNode.classList.remove("scroll");t.classList.add("bottom-full-width")},onRespond:function(e,t){e.classList.remove("align-center-vert");e.classList.add("stacked");a.parentNode.classList.add("scroll");t.classList.remove("bottom-full-width")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/layouts/landing-full-left-01.js":function(e,t){YUI.add("squarespace-slide-rendering-layouts-landing-full-left-01",function(e){e.namespace("Squarespace.SlideRendering.Layouts");e.Squarespace.SlideRendering.Layouts.LandingFullLeft01=e.Base.create("LandingFullLeft01",e.Squarespace.SlideRendering.Layouts.LandingFullCenter01,[],{})},"1.0",{requires:["base","squarespace-slide-rendering-layouts-landing-full-center-01"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/layouts/landing-full-left-02.js":function(e,t,a){var n=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").BoundaryRatios;var r=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").FontSize;var o=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverlapDetector;YUI.add("squarespace-slide-rendering-layouts-landing-full-left-02",function(s){s.namespace("Squarespace.SlideRendering.Layouts");s.Squarespace.SlideRendering.Layouts.LandingFullLeft02=s.Base.create("LandingFullLeft02",s.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();var a=e.querySelector(".layer-front .sqs-slide-layer-content");var t=e.querySelector(".group-copy");var i=e.querySelector(".responsive-wrapper");this._registerResponsiveComponent(new r({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthRatio:1,scale:.99,minFontSize:18}));this._registerResponsiveComponent(new r({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),widthRatio:1,heightRatio:.15,scale:.99,minFontSize:14,heightBoundaryNode:e.querySelector(".group-copy")}));this._registerResponsiveComponent(new r({rootNode:i,fontSizeNodes:[e.querySelector('[data-compound-type="action"] ul'),e.querySelector('[data-slice-type="custom-form"]')],widthBoundaryNode:a,minFontSize:12}));this._registerResponsiveComponent(new n({rootNode:e.querySelector('[data-slice-type="social-icons"]:not([data-content-empty="true"])'),widthBoundaryNode:a,widthRatio:.8,onReset:function(e){e.classList.remove("wrapped");e.querySelector(".break")&&e.querySelector(".break").remove()},onRespond:function(e){e.classList.add("wrapped");var t=e.childNodes;if(!e.querySelector(".break")){var a=new s.Node(t.item(Math.floor(t.length/2)));a.insert('<br class="break">',"before")}}}));this._registerResponsiveComponent(new n({rootNode:i,widthRatio:.99,onReset:function(e){e.classList.remove("stacked")},onRespond:function(e){e.classList.add("stacked")}}));this._registerResponsiveComponent(new o({rootNode:t,targetNode:i,padding:40,onReset:function(e,t){e.classList.add("align-center-vert");e.classList.remove("stacked");a.parentNode.classList.remove("scroll");t.parentNode.classList.add("bottom-full-width")},onRespond:function(e,t){e.classList.remove("align-center-vert");e.classList.add("stacked");a.parentNode.classList.add("scroll");t.parentNode.classList.remove("bottom-full-width")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/layouts/landing-full-right-01.js":function(e,t){YUI.add("squarespace-slide-rendering-layouts-landing-full-right-01",function(e){e.namespace("Squarespace.SlideRendering.Layouts");e.Squarespace.SlideRendering.Layouts.LandingFullRight01=e.Base.create("LandingFullRight01",e.Squarespace.SlideRendering.Layouts.LandingFullCenter01,[],{})},"1.0",{requires:["base","squarespace-slide-rendering-layouts-landing-full-center-01"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/layouts/landing-full-topleft-01.js":function(e,t,a){var c=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").BoundaryRatios;var u=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").FontSize;var d=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverflowDetector;var p=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverlapDetector;YUI.add("squarespace-slide-rendering-layouts-landing-full-topleft-01",function(l){l.namespace("Squarespace.SlideRendering.Layouts");l.Squarespace.SlideRendering.Layouts.LandingFullTopLeft01=l.Base.create("LandingFullTopLeft01",l.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();var a=e.querySelector(".layer-front");var t=e.querySelector(".layer-front .sqs-slide-layer-content");var i=e.querySelector(".group-copy");var s=e.querySelector(".group-logo");var n=s.querySelector('[data-compound-type="logo"] > *');var r=e.querySelector('[data-slice-type="custom-form"]');this._registerResponsiveComponent(new u({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthRatio:.5,minFontSize:15}));this._registerResponsiveComponent(new u({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),widthRatio:.99,scale:.99,minFontSize:18}));this._registerResponsiveComponent(new u({rootNode:e.querySelector('[data-compound-type="action"] ul'),widthBoundaryNode:i,minFontSize:11,widthRatio:.8,onReset:function(e){e.classList.remove("stacked");r&&(r.style.fontSize=null)},onRespond:function(e){r&&(r.style.fontSize=e.ownerDocument.defaultView.getComputedStyle(e).fontSize)},onMinFontSize:function(e){e.classList.add("stacked");r&&r.classList.add("stacked")}}));this._registerResponsiveComponent(new c({rootNode:e.querySelector(".sqs-slice-group.link-group-inline"),widthBoundaryNode:t,widthRatio:.99,onReset:function(e,t){e.classList.remove("stacked")},onRespond:function(e,t){e.classList.add("stacked")}}));var o=new c({rootNode:e.querySelector('[data-slice-type="social-icons"]:not([data-content-empty="true"])'),widthBoundaryNode:t,widthRatio:.99,onReset:function(e,t){e.classList.remove("stacked");e.querySelector(".break")&&e.querySelector(".break").remove()},onRespond:function(e,t){e.classList.add("stacked");var a=e.childNodes;if(!e.querySelector(".break")){var i=new l.Node(a.item(Math.floor(a.length/2)));i.insert('<br class="break">',"before")}}});this._registerResponsiveComponent(o);this._registerResponsiveComponent(new p({rootNode:n,targetNode:i,onReset:function(e,t){e=new l.Node(e);t=new l.Node(t);a.classList.remove("scroll");s.classList.add("bottom-full-width");s.classList.remove("stacked")},onRespond:function(e,t){e=new l.Node(e);t=new l.Node(t);a.classList.add("scroll");s.classList.remove("bottom-full-width");s.classList.add("stacked")}}));this._registerResponsiveComponent(new d({rootNode:i,padding:20,onReset:function(e){a.classList.remove("scroll");s.classList.add("bottom-full-width");s.classList.remove("stacked")},onRespond:function(e){a.classList.add("scroll");s.classList.remove("bottom-full-width");s.classList.add("stacked")}}));this._registerResponsiveComponent(new d({rootNode:n,padding:0,onReset:function(e){a.classList.remove("scroll");s.classList.add("bottom-full-width");s.classList.remove("stacked")},onRespond:function(e){a.classList.add("scroll");s.classList.remove("bottom-full-width");s.classList.add("stacked")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/layouts/landing-left-right-01.js":function(e,t,a){var s=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").BoundaryRatios;var n=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").FontSize;var r=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverlapDetector;YUI.add("squarespace-slide-rendering-layouts-landing-left-right-01",function(e){e.namespace("Squarespace.SlideRendering.Layouts");e.Squarespace.SlideRendering.Layouts.LandingLeftRight01=e.Base.create("LandingLeftRight01",e.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();var a=e.querySelector(".group-copy");var t=e.querySelector(".responsive-wrapper.actions");var i=e.querySelector(".responsive-wrapper.social");this._registerResponsiveComponent(new n({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthBoundaryNode:a,widthRatio:1,scale:.99,minFontSize:16}));this._registerResponsiveComponent(new n({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),widthBoundaryNode:a,widthRatio:1,heightRatio:.2,scale:.99,minFontSize:20,heightBoundaryNode:e.querySelector(".sqs-slide-layer")}));this._registerResponsiveComponent(new n({rootNode:t,fontSizeNodes:[e.querySelector('[data-compound-type="action"] ul'),e.querySelector('[data-slice-type="custom-form"]')],minFontSize:10,widthRatio:.9,onReset:function(e){e.classList.remove("stacked")},onMinFontSize:function(e){e.classList.add("stacked")}}));this._registerResponsiveComponent(new s({rootNode:i,widthRatio:.9,onReset:function(e){e.classList.remove("stacked")},onRespond:function(e){e.classList.add("stacked")}}));this._registerResponsiveComponent(new r({rootNode:a,targetNode:e.querySelector('[data-compound-type="logo"] > *'),padding:60,onReset:function(e,t){a.classList.add("align-center-vert")},onRespond:function(e,t){a.classList.remove("align-center-vert")}}));this._registerResponsiveComponent(new r({rootNode:e.querySelector('[data-compound-type="logo"]'),targetNode:i,padding:40,onReset:function(e,t){e.parentNode.classList.remove("scroll");t.parentNode.classList.add("bottom-full-width");e.classList.remove("stacked")},onRespond:function(e,t){e.classList.add("stacked");e.parentNode.classList.add("scroll");t.parentNode.classList.remove("bottom-full-width")}}));this._registerResponsiveComponent(new r({rootNode:a,targetNode:i,padding:50,onReset:function(e,t){e.parentNode.classList.remove("scroll");t.parentNode.classList.add("bottom-full-width");e.classList.remove("stacked")},onRespond:function(e,t){e.classList.add("stacked");e.parentNode.classList.add("scroll");t.parentNode.classList.remove("bottom-full-width")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/layouts/landing-right-left-01.js":function(e,t){YUI.add("squarespace-slide-rendering-layouts-landing-right-left-01",function(e){e.namespace("Squarespace.SlideRendering.Layouts");e.Squarespace.SlideRendering.Layouts.LandingRightLeft01=e.Base.create("LandingRightLeft01",e.Squarespace.SlideRendering.Layouts.LandingLeftRight01,[],{})},"1.0",{requires:["base","squarespace-slide-rendering-layouts-landing-left-right-01"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/layouts/location-full-corners-01.js":function(e,t,a){var s=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").BoundaryRatios;var n=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").FontSize;var r=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverflowDetector;var o=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverlapDetector;YUI.add("squarespace-slide-rendering-layouts-location-full-corners-01",function(e){e.namespace("Squarespace.SlideRendering.Layouts");e.Squarespace.SlideRendering.Layouts.LocationFullCorners01=e.Base.create("LocationFullCorners01",e.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var t=this.get("contentBox").getDOMNode();var e=t.querySelector(".responsive-wrapper.actions");this._registerResponsiveComponent(new n({rootNode:t.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),minFontSize:10,widthRatio:.99,onReset:function(e){e.classList.remove("stacked")},onMinFontSize:function(e){e.classList.add("stacked")}}));this._registerResponsiveComponent(new n({rootNode:t.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),widthRatio:1,minFontSize:20,scale:.99}));var a=new n({rootNode:e,fontSizeNodes:[t.querySelector('[data-compound-type="action"] ul'),t.querySelector('[data-slice-type="custom-form"]')],minFontSize:10,widthRatio:.8,enabled:false,onReset:function(e){e.classList.remove("stacked")},onMinFontSize:function(e){e.classList.add("stacked")}});this._registerResponsiveComponent(a);var i=new s({rootNode:t.querySelector(".responsive-wrapper.social"),widthRatio:.9,enabled:false,onReset:function(e){e.classList.remove("stacked");e.classList.remove("text-align-left")},onRespond:function(e){e.classList.add("stacked");e.classList.add("text-align-left")}});this._registerResponsiveComponent(i);this._registerResponsiveComponent(new o({rootNode:t.querySelector(".group-copy"),targetNode:t.querySelector(".sqs-slice-group.group-links"),padding:60,onReset:function(e,t){e.classList.remove("stacked");t.classList.add("top-right");t.classList.remove("restrict-width-500");a.disable();i.disable()},onRespond:function(e,t){e.classList.add("stacked");t.classList.remove("top-right");t.classList.add("restrict-width-500");a.enable();i.enable()}}));this._registerResponsiveComponent(new r({rootNode:t.querySelector(".sqs-slide-layer.layer-front .sqs-slide-layer-content"),widthRatio:.95,padding:0,onReset:function(e){t.querySelector(".sqs-slide-layer.layer-front").classList.remove("scroll")},onRespond:function(e){t.querySelector(".sqs-slide-layer.layer-front").classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/layouts/location-right-left-01.js":function(e,t,a){var i=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").FontSize;var s=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverflowDetector;var n=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverlapDetector;YUI.add("squarespace-slide-rendering-layouts-location-right-left-01",function(e){e.namespace("Squarespace.SlideRendering.Layouts");e.Squarespace.SlideRendering.Layouts.LocationRightLeft01=e.Base.create("LocationRightLeft01",e.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();var a=e.querySelector(".group-copy");this._registerResponsiveComponent(new i({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthBoundaryNode:a,widthRatio:1,heightRatio:.25,scale:.99,minFontSize:30,heightBoundaryNode:e.querySelector(".sqs-slide-layer")}));this._registerResponsiveComponent(new i({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),widthBoundaryNode:a,widthRatio:.9,scale:.99,minFontSize:20}));this._registerResponsiveComponent(new i({rootNode:e.querySelector(".responsive-wrapper"),fontSizeNodes:[e.querySelector('[data-compound-type="action"] ul'),e.querySelector('[data-slice-type="custom-form"]')],minFontSize:10,widthRatio:.9,onReset:function(e){e.classList.remove("stacked")},onMinFontSize:function(e){e.classList.add("stacked")}}));this._registerResponsiveComponent(new n({rootNode:a,targetNode:e.querySelector(".sqs-slice-group.group-links"),padding:40,onReset:function(e,t){e.parentNode.classList.remove("scroll");t.classList.add("bottom-full-width");a.classList.add("align-center-vert")},onRespond:function(e,t){e.parentNode.classList.add("scroll");t.classList.remove("bottom-full-width");a.classList.remove("align-center-vert")}}));this._registerResponsiveComponent(new s({rootNode:e.querySelector(".sqs-slide-layer-content.content-copy"),widthRatio:1,onReset:function(e){e.parentNode.parentNode.classList.remove("scroll")},onRespond:function(e){e.parentNode.parentNode.classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/layouts/lock-full-bottomleft-01.js":function(e,t,a){var i=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverflowDetector;var s=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverlapDetector;YUI.add("squarespace-slide-rendering-layouts-lock-full-bottomleft-01",function(e){e.namespace("Squarespace.SlideRendering.Layouts");e.Squarespace.SlideRendering.Layouts.LockFullBottomleft01=e.Base.create("LockFullBottomleft01",e.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();var t=e.querySelector(".sqs-slice-group.group-content");var a=e.querySelector(".layer-front .sqs-slide-layer-content");this._registerResponsiveComponent(new s({rootNode:e.querySelector('[data-slice-type="lock"]'),targetNode:e.querySelector(".sqs-slice-group.group-copy-password"),onReset:function(){t.classList.remove("stack")},onRespond:function(){t.classList.add("stack")},padding:200}));this._registerResponsiveComponent(new i({rootNode:t,onReset:function(e){e.classList.add("bottom-full-width");a.classList.remove("scroll")},onRespond:function(e){e.classList.remove("bottom-full-width");a.classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/layouts/lock-full-center-01.js":function(e,t,a){var i=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").FontSize;var s=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverflowDetector;YUI.add("squarespace-slide-rendering-layouts-lock-full-center-01",function(e){e.namespace("Squarespace.SlideRendering.Layouts");e.Squarespace.SlideRendering.Layouts.LockFullCenter01=e.Base.create("LockFullCenter01",e.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();var t=e.querySelector(".layer-front .sqs-slide-layer-content");this._registerResponsiveComponent(new i({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthRatio:.99,scale:.99,minFontSize:14,heightBoundaryNode:e.querySelector(".sqs-slide-layer"),heightRatio:.16}));this._registerResponsiveComponent(new i({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),heightRatio:.16,heightBoundaryNode:e.querySelector(".sqs-slide-layer"),widthRatio:.99,scale:.99,minFontSize:18}));this._registerResponsiveComponent(new s({rootNode:e.querySelector(".sqs-slice-group.group-content"),onReset:function(e){e.classList.add("align-center");e.classList.add("align-center-absolute");t.classList.remove("scroll")},onRespond:function(e){e.classList.remove("align-center");e.classList.remove("align-center-absolute");t.classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/layouts/lock-full-center-02.js":function(e,t){YUI.add("squarespace-slide-rendering-layouts-lock-full-center-02",function(e){e.namespace("Squarespace.SlideRendering.Layouts");e.Squarespace.SlideRendering.Layouts.LockFullCenter02=e.Base.create("LockFullCenter02",e.Squarespace.SlideRendering.Layouts.LockFullCenter01,[],{})},"1.0",{requires:["base","squarespace-slide-rendering-layouts-lock-full-center-01"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/layouts/lock-full-center-03.js":function(e,t,a){var i=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").FontSize;var s=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverlapDetector;YUI.add("squarespace-slide-rendering-layouts-lock-full-center-03",function(e){e.namespace("Squarespace.SlideRendering.Layouts");e.Squarespace.SlideRendering.Layouts.LockFullCenter03=e.Base.create("LockFullCenter03",e.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();this._registerResponsiveComponent(new i({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthRatio:.98,minFontSize:14}));this._registerResponsiveComponent(new i({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),widthRatio:.98,minFontSize:18}));this._registerResponsiveComponent(new s({rootNode:e.querySelector(".sqs-slice-group.group-copy"),targetNode:e.querySelector(".sqs-slice-group.group-password"),padding:50,onReset:function(e,t){t.classList.add("align-center");t.classList.remove("stacked");t.style.top="50%";t.style.left="50%"},onRespond:function(e,t){t.classList.remove("align-center");t.classList.add("stacked");var a=e.getBoundingClientRect();t.style.top=a.bottom+"px";t.style.left=a.left+"px"}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/layouts/lock-full-center-04.js":function(e,t,a){var i=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").FontSize;var s=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverlapDetector;YUI.add("squarespace-slide-rendering-layouts-lock-full-center-04",function(e){e.namespace("Squarespace.SlideRendering.Layouts");e.Squarespace.SlideRendering.Layouts.LockFullCenter04=e.Base.create("LockFullCenter04",e.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();var t=e.querySelector(".layer-front .sqs-slide-layer-content");this._registerResponsiveComponent(new i({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),heightRatio:.16,heightBoundaryNode:e.querySelector(".sqs-slide-layer"),widthRaito:.99,scale:.99,minFontSize:18}));this._registerResponsiveComponent(new s({rootNode:e.querySelector(".sqs-slice-group.group-content"),targetNode:e.querySelector(".sqs-slice-group.group-top"),onReset:function(e){e.classList.add("align-center");e.classList.add("align-center-absolute");t.classList.remove("scroll")},onRespond:function(e){e.classList.remove("align-center");e.classList.remove("align-center-absolute");t.classList.add("scroll")}}));this._registerResponsiveComponent(new s({rootNode:e.querySelector('[data-slice-type="lock"]:not([data-content-empty])'),targetNode:e.querySelector('[data-compound-type="logo"]'),onReset:function(e,t){t.parentNode.classList.remove("stacked")},onRespond:function(e,t){t.parentNode.classList.add("stacked")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/layouts/lock-full-center-05.js":function(e,t,a){var s=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").FontSize;var n=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverflowDetector;var r=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverlapDetector;YUI.add("squarespace-slide-rendering-layouts-lock-full-center-05",function(e){e.namespace("Squarespace.SlideRendering.Layouts");e.Squarespace.SlideRendering.Layouts.LockFullCenter05=e.Base.create("LockFullCenter05",e.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();var t=e.querySelector(".sqs-slice-group.group-content");var a=e.querySelector(".layer-front .sqs-slide-layer-content");var i=e.querySelector(".sqs-slide-layer");this._registerResponsiveComponent(new s({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthRatio:.99,scale:.99,minFontSize:14,heightBoundaryNode:i,heightRatio:.16}));this._registerResponsiveComponent(new s({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),heightRatio:.16,heightBoundaryNode:i,widthRatio:.99,scale:.99,minFontSize:18}));this._registerResponsiveComponent(new n({rootNode:t,onReset:function(e){e.classList.add("align-center");e.classList.add("align-center-absolute");a.classList.remove("scroll")},onRespond:function(e){e.classList.remove("align-center");e.classList.remove("align-center-absolute");a.classList.add("scroll")}}));this._registerResponsiveComponent(new r({rootNode:t,targetNode:e.querySelector(".sqs-slice-group.group-password"),padding:0,onReset:function(e,t){e.classList.add("align-center");e.classList.add("align-center-absolute");e.classList.remove("stacked");a.classList.remove("scroll");t.classList.add("bottom");t.classList.add("align-center-horiz")},onRespond:function(e,t){e.classList.remove("align-center");e.classList.remove("align-center-absolute");e.classList.add("stacked");a.classList.add("scroll");t.classList.remove("bottom");t.classList.remove("align-center-horiz")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/layouts/overlay-center-card-01.js":function(e,t,a){var i=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").BoundaryRatios;var s=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").FontSize;var n=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverflowDetector;YUI.add("squarespace-slide-rendering-layouts-overlay-center-card-01",function(e){e.namespace("Squarespace.SlideRendering.Layouts");e.Squarespace.SlideRendering.Layouts.OverlayCenterCard01=e.Base.create("OverlayCenterCard01",e.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();var t=e.querySelector(".layer-front .sqs-slide-layer-content");var a=e.querySelector(".actions");this._registerResponsiveComponent(new s({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),heightBoundaryNode:e.querySelector(".layer-front"),widthRatio:1,heightRatio:.15,scale:.99,minFontSize:18}));this._registerResponsiveComponent(new i({rootNode:a.querySelector('.sqs-slice[data-slice-type="newsletter"] button[type="submit"]'),widthBoundaryNode:a,widthRatio:.67,onReset:function(e){a.classList.remove("stacked")},onRespond:function(e){a.classList.add("stacked")}}));this._registerResponsiveComponent(new n({rootNode:e.querySelector(".sqs-slice-group.group-copy"),onReset:function(e){t.classList.remove("scroll")},onRespond:function(e){t.classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/layouts/overlay-center-card-02.js":function(e,t,a){var i=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").BoundaryRatios;var s=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").FontSize;var n=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverflowDetector;YUI.add("squarespace-slide-rendering-layouts-overlay-center-card-02",function(e){e.namespace("Squarespace.SlideRendering.Layouts");e.Squarespace.SlideRendering.Layouts.OverlayCenterCard02=e.Base.create("OverlayCenterCard02",e.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();var t=e.querySelector(".layer-front .sqs-slide-layer-content");var a=e.querySelector(".actions");this._registerResponsiveComponent(new s({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),heightBoundaryNode:e.querySelector(".layer-front"),widthRatio:1,heightRatio:.15,scale:.99,minFontSize:18}));this._registerResponsiveComponent(new i({rootNode:a.querySelector('.sqs-slice[data-slice-type="newsletter"] button[type="submit"]'),widthBoundaryNode:a,widthRatio:.67,onReset:function(e){a.classList.remove("stacked")},onRespond:function(e){a.classList.add("stacked")}}));this._registerResponsiveComponent(new n({rootNode:e.querySelector(".sqs-slice-group.group-content"),onReset:function(e){e.classList.add("align-center");e.classList.add("align-center-absolute");t.classList.remove("scroll")},onRespond:function(e){e.classList.remove("align-center");e.classList.remove("align-center-absolute");t.classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/layouts/overlay-center-card-03.js":function(e,t,a){var i=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").BoundaryRatios;var s=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").FontSize;var n=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverflowDetector;YUI.add("squarespace-slide-rendering-layouts-overlay-center-card-03",function(e){e.namespace("Squarespace.SlideRendering.Layouts");e.Squarespace.SlideRendering.Layouts.OverlayCenterCard03=e.Base.create("OverlayCenterCard03",e.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();var t=e.querySelector(".layer-front .sqs-slide-layer-content");var a=e.querySelector(".actions");this._registerResponsiveComponent(new s({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),heightBoundaryNode:e.querySelector(".layer-front"),widthRatio:1,heightRatio:.15,scale:.99,minFontSize:18}));this._registerResponsiveComponent(new i({rootNode:a.querySelector('.sqs-slice[data-slice-type="newsletter"] button[type="submit"]'),widthBoundaryNode:a,widthRatio:.67,onReset:function(e){a.classList.remove("stacked")},onRespond:function(e){a.classList.add("stacked")}}));this._registerResponsiveComponent(new n({rootNode:e.querySelector(".sqs-slice-group.group-content"),onReset:function(e){e.classList.add("align-center");e.classList.add("align-center-absolute");t.classList.remove("scroll")},onRespond:function(e){e.classList.remove("align-center");e.classList.remove("align-center-absolute");t.classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/layouts/overlay-center-card-04.js":function(e,t,a){var i=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").BoundaryRatios;var s=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").FontSize;var n=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverflowDetector;YUI.add("squarespace-slide-rendering-layouts-overlay-center-card-04",function(e){e.namespace("Squarespace.SlideRendering.Layouts");e.Squarespace.SlideRendering.Layouts.OverlayCenterCard04=e.Base.create("OverlayCenterCard04",e.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();var t=e.querySelector(".layer-front .sqs-slide-layer-content");var a=e.querySelector(".actions");this._registerResponsiveComponent(new s({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),heightBoundaryNode:e.querySelector(".layer-front"),widthRatio:1,heightRatio:.15,scale:.99,minFontSize:18}));this._registerResponsiveComponent(new i({rootNode:a.querySelector('.sqs-slice[data-slice-type="newsletter"] button[type="submit"]'),widthBoundaryNode:a,widthRatio:.67,onReset:function(e){a.classList.remove("stacked")},onRespond:function(e){a.classList.add("stacked")}}));this._registerResponsiveComponent(new n({rootNode:e.querySelector(".sqs-slice-group.group-content"),onReset:function(e){e.classList.add("align-center");e.classList.add("align-center-absolute");t.classList.remove("scroll")},onRespond:function(e){e.classList.remove("align-center");e.classList.remove("align-center-absolute");t.classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/layouts/overlay-center-card-05.js":function(e,t,a){var i=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").BoundaryRatios;var s=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").FontSize;var n=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverflowDetector;YUI.add("squarespace-slide-rendering-layouts-overlay-center-card-05",function(e){e.namespace("Squarespace.SlideRendering.Layouts");e.Squarespace.SlideRendering.Layouts.OverlayCenterCard05=e.Base.create("OverlayCenterCard05",e.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();var t=e.querySelector(".layer-front .sqs-slide-layer-content");var a=e.querySelector(".actions");this._registerResponsiveComponent(new s({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),heightBoundaryNode:e.querySelector(".layer-front"),widthRatio:1,heightRatio:.16,scale:.99,minFontSize:18}));this._registerResponsiveComponent(new i({rootNode:a.querySelector('.sqs-slice[data-slice-type="newsletter"] button[type="submit"]'),widthBoundaryNode:a,widthRatio:.67,onReset:function(e){a.classList.remove("stacked")},onRespond:function(e){a.classList.add("stacked")}}));this._registerResponsiveComponent(new n({rootNode:e.querySelector(".sqs-slice-group.group-content"),onReset:function(e){e.classList.add("align-center");e.classList.add("align-center-absolute");t.classList.remove("scroll")},onRespond:function(e){e.classList.remove("align-center");e.classList.remove("align-center-absolute");t.classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/layouts/overlay-corner-card-01.js":function(e,t,a){var i=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").BoundaryRatios;var s=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").FontSize;var n=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverflowDetector;YUI.add("squarespace-slide-rendering-layouts-overlay-corner-card-01",function(e){e.namespace("Squarespace.SlideRendering.Layouts");e.Squarespace.SlideRendering.Layouts.OverlayCornerCard01=e.Base.create("OverlayCornerCard01",e.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();var t=e.querySelector(".layer-front .sqs-slide-layer-content");var a=e.querySelector(".actions");this._registerResponsiveComponent(new s({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),heightBoundaryNode:e.querySelector(".layer-front"),widthRatio:1,heightRatio:.15,scale:.99,minFontSize:18}));this._registerResponsiveComponent(new i({rootNode:a.querySelector('.sqs-slice[data-slice-type="newsletter"] button[type="submit"]'),widthBoundaryNode:a,widthRatio:.67,onReset:function(e){a.classList.remove("stacked")},onRespond:function(e){a.classList.add("stacked")}}));this._registerResponsiveComponent(new n({rootNode:e.querySelector(".sqs-slice-group.group-content"),onReset:function(e){e.classList.add("align-center");e.classList.add("align-center-absolute");t.classList.remove("scroll")},onRespond:function(e){e.classList.remove("align-center");e.classList.remove("align-center-absolute");t.classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/layouts/overlay-full-bottom-01.js":function(e,t,a){var i=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").BoundaryRatios;var s=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").FontSize;var n=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverflowDetector;YUI.add("squarespace-slide-rendering-layouts-overlay-full-bottom-01",function(e){e.namespace("Squarespace.SlideRendering.Layouts");e.Squarespace.SlideRendering.Layouts.OverlayFullBottom01=e.Base.create("OverlayFullBottom01",e.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var t=this.get("contentBox").getDOMNode();var a=t.querySelector(".actions");this._registerResponsiveComponent(new s({rootNode:t.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),heightBoundaryNode:t.querySelector(".layer-front"),widthRatio:1,heightRatio:.15,scale:.99,minFontSize:18}));this._registerResponsiveComponent(new i({rootNode:a.querySelector('.sqs-slice[data-slice-type="newsletter"] button[type="submit"]'),widthBoundaryNode:a,widthRatio:.67,onReset:function(e){a.classList.remove("stacked")},onRespond:function(e){a.classList.add("stacked")}}));this._registerResponsiveComponent(new n({rootNode:t.querySelector(".sqs-slide-layer.layer-front .sqs-slide-layer-content .group-content"),padding:0,onReset:function(e){t.querySelector(".sqs-slide-layer.layer-front").classList.remove("scroll")},onRespond:function(e){t.querySelector(".sqs-slide-layer.layer-front").classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/layouts/overlay-full-center-01.js":function(e,t,a){var i=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").BoundaryRatios;var s=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").FontSize;var n=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverflowDetector;YUI.add("squarespace-slide-rendering-layouts-overlay-full-center-01",function(e){e.namespace("Squarespace.SlideRendering.Layouts");e.Squarespace.SlideRendering.Layouts.OverlayFullCenter01=e.Base.create("OverlayFullCenter01",e.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();var t=e.querySelector(".layer-front .sqs-slide-layer-content");var a=e.querySelector(".actions");this._registerResponsiveComponent(new s({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),heightBoundaryNode:e.querySelector(".layer-front"),widthRatio:1,heightRatio:.15,scale:.99,minFontSize:18}));this._registerResponsiveComponent(new i({rootNode:a.querySelector('.sqs-slice[data-slice-type="newsletter"] button[type="submit"]'),widthBoundaryNode:a,widthRatio:.67,onReset:function(e){a.classList.remove("stacked")},onRespond:function(e){a.classList.add("stacked")}}));this._registerResponsiveComponent(new n({rootNode:e.querySelector(".sqs-slice-group.group-content"),onReset:function(e){e.classList.add("align-center");e.classList.add("align-center-absolute");t.classList.remove("scroll")},onRespond:function(e){e.classList.remove("align-center");e.classList.remove("align-center-absolute");t.classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/layouts/overlay-full-center-02.js":function(e,t,a){var i=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").BoundaryRatios;var s=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").FontSize;var n=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverflowDetector;YUI.add("squarespace-slide-rendering-layouts-overlay-full-center-02",function(e){e.namespace("Squarespace.SlideRendering.Layouts");e.Squarespace.SlideRendering.Layouts.OverlayFullCenter02=e.Base.create("OverlayFullCenter02",e.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();var t=e.querySelector(".layer-front .sqs-slide-layer-content");var a=e.querySelector(".actions");this._registerResponsiveComponent(new s({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),heightBoundaryNode:e.querySelector(".layer-front"),widthRatio:1,heightRatio:.15,scale:.99,minFontSize:18}));this._registerResponsiveComponent(new i({rootNode:a.querySelector('.sqs-slice[data-slice-type="newsletter"] button[type="submit"]'),widthBoundaryNode:a,widthRatio:.67,onReset:function(e){a.classList.remove("stacked")},onRespond:function(e){a.classList.add("stacked")}}));this._registerResponsiveComponent(new n({rootNode:e.querySelector(".sqs-slice-group.group-content"),onReset:function(e){e.classList.add("align-center");e.classList.add("align-center-absolute");t.classList.remove("scroll")},onRespond:function(e){e.classList.remove("align-center");e.classList.remove("align-center-absolute");t.classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/layouts/profile-center-center-01.js":function(e,t,a){var n=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").FontSize;var r=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").BoundaryRatios;var o=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverflowDetector;YUI.add("squarespace-slide-rendering-layouts-profile-center-center-01",function(t){var s=function(e){if(t.instanceOf(e,t.Node))return e.getDOMNode();return null};t.namespace("Squarespace.SlideRendering.Layouts");t.Squarespace.SlideRendering.Layouts.ProfileCenterCenter01=t.Base.create("ProfileCenterCenter01",t.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var t=this.get("contentBox");var e=t.one(".sqs-slice-group.group-links");this._registerResponsiveComponent(new n({rootNode:s(t.one('[data-compound-type="logo"][data-slice-type="heading"] h1')),minFontSize:26,widthRatio:.9}));this._registerResponsiveComponent(new n({rootNode:s(t.one('[data-slice-type="heading"]:not([data-compound-type]) h1')),minFontSize:18,widthRatio:.9,widthBoundaryNode:s(t.one(".group-copy"))}));var a=new n({rootNode:s(t.one(".responsive-wrapper")),fontSizeNodes:[s(t.one('[data-compound-type="action"] ul')),s(t.one('[data-slice-type="custom-form"]:not([data-content-empty])'))],widthBoundaryNode:e,widthRatio:.9,minFontSize:10,enabled:true,onReset:function(e){e.classList.remove("stacked")},onMinFontSize:function(e){e.classList.add("stacked")}});this._registerResponsiveComponent(a);var i=new r({rootNode:s(t.one('[data-slice-type="social-icons"]')),widthRatio:.9,enabled:false,onReset:function(e){e.classList.remove("stacked")},onRespond:function(e){e.classList.add("stacked")}});this._registerResponsiveComponent(i);this._registerResponsiveComponent(new r({rootNode:s(t.one(".responsive-wrapper")),widthRatio:.9,onReset:function(e){e.classList.remove("stacked");e.querySelector(".group-actions").style.whiteSpace="nowrap";i.disable()},onRespond:function(e){e.classList.add("stacked");e.querySelector(".group-actions").style.whiteSpace="normal";i.enable()}}));this._registerResponsiveComponent(new o({rootNode:s(t.one(".sqs-slice-group.group-content")),onReset:function(e){e.classList.add("align-center-vert");t.one(".sqs-slide-layer").removeClass("scroll")},onRespond:function(e){e.classList.remove("align-center-vert");t.one(".sqs-slide-layer").addClass("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/layouts/profile-center-center-02.js":function(e,t){YUI.add("squarespace-slide-rendering-layouts-profile-center-center-02",function(e){e.namespace("Squarespace.SlideRendering.Layouts");e.Squarespace.SlideRendering.Layouts.ProfileCenterCenter02=e.Base.create("ProfileCenterCenter02",e.Squarespace.SlideRendering.Layouts.ProfileCenterCenter01,[],{})},"1.0",{requires:["base","squarespace-slide-rendering-layouts-profile-center-center-01"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/layouts/profile-full-bottom-01.js":function(e,t,a){var l=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").BoundaryRatios;var c=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").FontSize;var u=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverflowDetector;var d=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverlapDetector;YUI.add("squarespace-slide-rendering-layouts-profile-full-bottom-01",function(o){o.namespace("Squarespace.SlideRendering.Layouts");o.Squarespace.SlideRendering.Layouts.ProfileFullBottom01=o.Base.create("ProfileFullBottom01",o.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var t=this.get("contentBox").getDOMNode();var e=t.querySelector(".group-copy");var a=t.querySelector(".group-content");var i=t.querySelector(".group-links");var s=t.querySelector(".responsive-wrapper.social");this._registerResponsiveComponent(new c({rootNode:t.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthBoundaryNode:a,minFontSize:20,widthRatio:.99,onReset:function(e){e.style.whiteSpace="nowrap"},onMinFontSize:function(e){e.style.whiteSpace="normal"}}));this._registerResponsiveComponent(new c({rootNode:t.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),minFontSize:15,widthBoundaryNode:a,widthRatio:.99,onReset:function(e){e.style.whiteSpace="nowrap"},onMinFontSize:function(e){e.style.whiteSpace="normal"}}));var n=new c({rootNode:s,fontSizeNodes:[t.querySelector('[data-compound-type="action"] ul'),t.querySelector('[data-slice-type="custom-form"]')],widthBoundaryNode:t.querySelector(".group-links"),minFontSize:12,widthRatio:.99,enabled:false,onReset:function(e){e.classList.remove("stacked");e.classList.remove("text-align-left")},onMinFontSize:function(e){e.classList.add("stacked");e.classList.add("text-align-left")}});this._registerResponsiveComponent(n);this._registerResponsiveComponent(new d({rootNode:t.querySelector('[data-slice-type="body"]'),targetNode:i,padding:120,onReset:function(){e.classList.remove("stacked")},onRespond:function(){e.classList.add("stacked")}}));this._registerResponsiveComponent(new d({rootNode:e,targetNode:i,padding:120,onReset:function(e,t){var a=e.parentNode;a.classList.remove("stacked");a.classList.remove("left-right-floats-off");s.classList.remove("wrapped");n.disable()},onRespond:function(e,t){var a=e.parentNode;a.classList.add("stacked");a.classList.add("left-right-floats-off");s.classList.remove("wrapped");n.enable()}}));this._registerResponsiveComponent(new l({rootNode:s,widthBoundaryNode:a,widthRatio:.99,onReset:function(e){e.classList.remove("stacked");r.disable()},onRespond:function(e){e.classList.add("stacked");r.enable()}}));var r=new l({rootNode:t.querySelector('[data-slice-type="social-icons"]:not([data-content-empty="true"])'),widthBoundaryNode:a,widthRatio:.7,enabled:false,onReset:function(e){e.classList.remove("wrapped");e.querySelector(".break")&&e.querySelector(".break").remove()},onRespond:function(e){e=new o.Node(e);e.addClass("wrapped");var t=e.get("childNodes");e.one(".break")||t.item(Math.floor(t.size()/2)).insert('<br class="break">',"before")}});this._registerResponsiveComponent(r);this._registerResponsiveComponent(new u({rootNode:t.querySelector(".sqs-slide-layer.layer-front .sqs-slide-layer-content .group-content"),onReset:function(e){t.querySelector(".sqs-slide-layer.layer-front").classList.remove("scroll")},onRespond:function(e){t.querySelector(".sqs-slide-layer.layer-front").classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/layouts/profile-full-center-01.js":function(e,t,a){var s=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").BoundaryRatios;var n=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").FontSize;var r=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverflowDetector;var o=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverlapDetector;YUI.add("squarespace-slide-rendering-layouts-profile-full-center-01",function(e){e.namespace("Squarespace.SlideRendering.Layouts");e.Squarespace.SlideRendering.Layouts.ProfileFullCenter01=e.Base.create("ProfileFullCenter01",e.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var a=this.get("contentBox").getDOMNode();var t=a.querySelector(".layer-front .sqs-slide-layer-content");this._registerResponsiveComponent(new n({rootNode:a.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthRatio:.5,minFontSize:13}));this._registerResponsiveComponent(new n({rootNode:a.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),widthRatio:.99,scale:.99,minFontSize:54,onReset:function(e){i.disable()},onRespond:function(e){},onMinFontSize:function(e){i.enable()}}));var i=new n({rootNode:a.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),widthRatio:1,heightRatio:.2,scale:.99,minFontSize:18,enabled:false,heightBoundaryNode:a.querySelector(".sqs-slide-layer"),onReset:function(e){},onRespond:function(e){},onMinFontSize:function(e){}});this._registerResponsiveComponent(i);this._registerResponsiveComponent(new n({rootNode:a.querySelector(".responsive-wrapper.actions"),fontSizeNodes:[a.querySelector('[data-compound-type="action"] ul'),a.querySelector('[data-slice-type="custom-form"]')],minFontSize:10,widthRatio:.8,onReset:function(e){e.classList.remove("stacked")},onMinFontSize:function(e){e.classList.add("stacked")}}));this._registerResponsiveComponent(new s({rootNode:a.querySelector(".responsive-wrapper.social"),widthRatio:.9,onReset:function(e){e.classList.remove("stacked")},onRespond:function(e){e.classList.add("stacked")}}));this._registerResponsiveComponent(new o({rootNode:a.querySelector(".group-copy"),targetNode:a.querySelector(".group-social"),padding:20,onReset:function(e,t){e.classList.add("align-center-vert");e.classList.add("full-width");e.classList.remove("stacked");a.querySelector(".sqs-slide-layer.layer-front").classList.remove("scroll");t.classList.add("bottom-full-width")},onRespond:function(e,t){e.classList.remove("align-center-vert");e.classList.add("full-width");e.classList.add("stacked");a.querySelector(".sqs-slide-layer.layer-front").classList.add("scroll");t.classList.remove("bottom-full-width")}}));this._registerResponsiveComponent(new r({rootNode:a.querySelector(".group-copy"),onReset:function(e){e.classList.add("align-center-vert");t.parentNode.classList.remove("scroll")},onRespond:function(e){e.classList.remove("align-center-vert");t.parentNode.classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/layouts/profile-full-left-01.js":function(e,t,a){var n=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").BoundaryRatios;var r=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").FontSize;var o=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverflowDetector;YUI.add("squarespace-slide-rendering-layouts-profile-full-left-01",function(s){s.namespace("Squarespace.SlideRendering.Layouts");s.Squarespace.SlideRendering.Layouts.ProfileFullLeft01=s.Base.create("ProfileFullLeft01",s.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();var t=e.querySelector(".layer-front .sqs-slide-layer-content");var a=e.querySelector(".group-copy");var i=e.querySelector(".group-links");this._registerResponsiveComponent(new r({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthRatio:.99,minFontSize:26}));this._registerResponsiveComponent(new r({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),widthRatio:.99,scale:.99,minFontSize:18}));this._registerResponsiveComponent(new r({rootNode:e.querySelector('[data-compound-type="action"] ul'),widthBoundaryNode:a,minFontSize:10,widthRatio:.99,onReset:function(e){e.classList.remove("stacked")},onMinFontSize:function(e){e.classList.add("stacked")}}));this._registerResponsiveComponent(new n({rootNode:e.querySelector('[data-slice-type="social-icons"]:not([data-content-empty="true"])'),widthBoundaryNode:a,widthRatio:.66,onReset:function(e,t){e.classList.remove("wrap");e.parentNode.classList.remove("stacked");e.querySelector(".break")&&e.querySelector(".break").remove()},onRespond:function(e,t){e.classList.add("wrap");e.parentNode.classList.add("stacked");var a=e.childNodes;if(!e.querySelector(".break")){var i=new s.Node(a.item(Math.floor(a.length/2)));i.insert('<br class="break">',"before")}}}));this._registerResponsiveComponent(new n({rootNode:i,widthBoundaryNode:a,widthRatio:.9,onReset:function(e,t){e.classList.remove("stacked")},onRespond:function(e,t){e.classList.add("stacked")}}));this._registerResponsiveComponent(new o({rootNode:a,onReset:function(e){e.classList.add("align-center-vert");t.parentNode.classList.remove("scroll")},onRespond:function(e){e.classList.remove("align-center-vert");t.parentNode.classList.add("scroll")}}));this._registerResponsiveComponent(new o({rootNode:i,onReset:function(e){a.classList.add("align-center-vert");t.parentNode.classList.remove("scroll")},onRespond:function(e){a.classList.remove("align-center-vert");t.parentNode.classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/layouts/profile-full-middleband-01.js":function(e,t,a){var c=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").BoundaryRatios;var u=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").FontSize;var d=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverflowDetector;var p=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverlapDetector;YUI.add("squarespace-slide-rendering-layouts-profile-full-middleband-01",function(l){l.namespace("Squarespace.SlideRendering.Layouts");l.Squarespace.SlideRendering.Layouts.ProfileFullMiddleband01=l.Base.create("ProfileFullMiddleband01",l.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();var i=e.querySelector(".group-copy");var t=e.querySelector(".group-content");var a=e.querySelector(".group-links");var s=e.querySelector(".sqs-slide-layer.layer-front");var n=e.querySelector(".responsive-wrapper.social");this._registerResponsiveComponent(new u({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthBoundaryNode:t,minFontSize:20,widthRatio:.9,onReset:function(e){e.style.whiteSpace="nowrap"},onMinFontSize:function(e){e.style.whiteSpace="normal"}}));this._registerResponsiveComponent(new u({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),minFontSize:15,widthBoundaryNode:t,widthRatio:.9,onReset:function(e){e.style.whiteSpace="nowrap"},onMinFontSize:function(e){e.style.whiteSpace="normal"}}));var r=new u({rootNode:n,fontSizeNodes:[e.querySelector('[data-compound-type="action"] ul'),e.querySelector('[data-slice-type="custom-form"]')],widthBoundaryNode:e.querySelector(".group-content > .sqs-slice-group:not(.group-branding)"),minFontSize:10,widthRatio:.9,enabled:false,onReset:function(e){e.classList.remove("stacked");e.classList.remove("text-align-left")},onMinFontSize:function(e){e.classList.add("stacked");e.classList.add("text-align-left")}});this._registerResponsiveComponent(r);this._registerResponsiveComponent(new c({rootNode:i,widthBoundaryNode:t,widthRatio:.99,onReset:function(e){e.classList.remove("stacked")},onRespond:function(e){e.classList.add("stacked")}}));this._registerResponsiveComponent(new p({rootNode:e.querySelector('[data-slice-type="body"]'),targetNode:a,padding:60,onReset:function(){i.classList.remove("stacked")},onRespond:function(){i.classList.add("stacked")}}));this._registerResponsiveComponent(new p({rootNode:i,targetNode:a,padding:60,onReset:function(e,t){i.classList.remove("stacked");var a=e.parentNode;a.classList.remove("stacked");a.classList.remove("left-right-floats-off");n.classList.remove("wrapped");r.disable()},onRespond:function(e,t){i.classList.add("stacked");var a=e.parentNode;a.classList.add("stacked");a.classList.add("left-right-floats-off");n.classList.remove("wrapped");r.enable()}}));var o=new c({rootNode:e.querySelector('[data-slice-type="social-icons"]:not([data-content-empty="true"])'),widthBoundaryNode:t,widthRatio:.7,enabled:false,onReset:function(e){e.classList.remove("wrapped");e.querySelector(".break")&&e.querySelector(".break").remove()},onRespond:function(e){e.classList.add("wrapped");var t=e.childNodes;if(!e.querySelector(".break")){var a=new l.Node(t.item(Math.floor(t.length/2)));a.insert('<br class="break">',"before")}}});this._registerResponsiveComponent(o);this._registerResponsiveComponent(new c({rootNode:n,widthBoundaryNode:t,widthRatio:.99,onReset:function(e){e.classList.remove("stacked");o.disable()},onRespond:function(e){e.classList.add("stacked");o.enable()}}));this._registerResponsiveComponent(new d({rootNode:s.querySelector(".sqs-slide-layer-content"),padding:0,onReset:function(e){s.classList.remove("scroll")},onRespond:function(e){s.classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/layouts/profile-full-right-01.js":function(e,t){YUI.add("squarespace-slide-rendering-layouts-profile-full-right-01",function(e){e.namespace("Squarespace.SlideRendering.Layouts");e.Squarespace.SlideRendering.Layouts.ProfileFullRight01=e.Base.create("ProfileFullRight01",e.Squarespace.SlideRendering.Layouts.ProfileFullLeft01,[],{})},"1.0",{requires:["base","squarespace-slide-rendering-layouts-profile-full-left-01"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/layouts/profile-full-top-01.js":function(e,t){YUI.add("squarespace-slide-rendering-layouts-profile-full-top-01",function(e){e.namespace("Squarespace.SlideRendering.Layouts");e.Squarespace.SlideRendering.Layouts.ProfileFullTop01=e.Base.create("ProfileFullTop01",e.Squarespace.SlideRendering.Layouts.ProfileFullBottom01,[],{})},"1.0",{requires:["base","squarespace-slide-rendering-layouts-profile-full-bottom-01"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/layouts/profile-left-left-01.js":function(e,t,a){var i=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").FontSize;var s=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverflowDetector;var n=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverlapDetector;YUI.add("squarespace-slide-rendering-layouts-profile-left-left-01",function(t){t.namespace("Squarespace.SlideRendering.Layouts");t.Squarespace.SlideRendering.Layouts.ProfileLeftLeft01=t.Base.create("ProfileLeftLeft01",t.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();this._registerResponsiveComponent(new i({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthRatio:1,scale:.99,minFontSize:30,widthBoundaryNode:e.querySelector(".sqs-slice-heading-content"),heightBoundaryNode:e.querySelector(".sqs-slide-layer"),heightRatio:.3,onRespond:function(){t.later(0,this,function(){this._syncSliceWidgets()})}.bind(this)}));this._registerResponsiveComponent(new i({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),widthRatio:1,scale:.99,minFontSize:20,widthBoundaryNode:e.querySelector(".sqs-slice-heading-content"),heightBoundaryNode:e.querySelector(".sqs-slide-layer"),onRespond:function(){t.later(0,this,function(){this._syncSliceWidgets()})}.bind(this)}));this._registerResponsiveComponent(new i({rootNode:e.querySelector(".responsive-wrapper"),fontSizeNodes:[e.querySelector('[data-compound-type="action"] ul'),e.querySelector('[data-slice-type="custom-form"]')],minFontSize:12,widthRatio:.9,scale:.9,onReset:function(e){e.classList.remove("stacked")},onMinFontSize:function(e){e.classList.add("stacked")},onRespond:function(){t.later(0,this,function(){this._syncSliceWidgets()})}.bind(this)}));this._registerResponsiveComponent(new n({rootNode:e.querySelector(".group-copy"),targetNode:e.querySelector(".sqs-slice-group.group-links"),padding:0,onReset:function(e,t){t.classList.add("bottom-full-width")},onRespond:function(e,t){t.classList.remove("bottom-full-width")}}));this._registerResponsiveComponent(new s({rootNode:e.querySelector(".sqs-slice-group.group-links"),onReset:function(e){e=new t.Node(e);e.ancestor(".sqs-slide-layer-content").removeClass("scroll")},onRespond:function(e){e=new t.Node(e);e.ancestor(".sqs-slide-layer-content").addClass("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/layouts/profile-left-right-01.js":function(e,t,a){var n=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").BoundaryRatios;var r=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").FontSize;var o=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverflowDetector;var l=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverlapDetector;YUI.add("squarespace-slide-rendering-layouts-profile-left-right-01",function(s){s.namespace("Squarespace.SlideRendering.Layouts");s.Squarespace.SlideRendering.Layouts.ProfileLeftRight01=s.Base.create("ProfileLeftRight01",s.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();var a=e.querySelector(".group-copy");var t=e.querySelector(".responsive-wrapper");var i=!!s.one("html.flexbox");this._registerResponsiveComponent(new r({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),minFontSize:26,widthRatio:.99}));this._registerResponsiveComponent(new r({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),widthBoundaryNode:a,widthRatio:1,scale:.99,minFontSize:16}));this._registerResponsiveComponent(new r({rootNode:t,fontSizeNodes:[e.querySelector('[data-compound-type="action"] ul'),e.querySelector('[data-slice-type="custom-form"]')],minFontSize:10,widthRatio:.9,onReset:function(){t.classList.remove("stacked")},onMinFontSize:function(){t.classList.add("stacked")}}));this._registerResponsiveComponent(new n({rootNode:e.querySelector('[data-slice-type="social-icons"]:not([data-content-empty="true"])'),widthBoundaryNode:a,widthRatio:.7,onReset:function(e){e.classList.remove("wrapped");e.querySelector(".break")&&e.querySelector(".break").remove()},onRespond:function(e){e.classList.add("wrapped");var t=e.childNodes;if(!e.querySelector(".break")){var a=new s.Node(t.item(Math.floor(t.length/2)));a.insert('<br class="break">',"before")}}}));this._registerResponsiveComponent(new n({rootNode:t,widthRatio:.9,onReset:function(e,t){e.classList.remove("stacked")},onRespond:function(e){e.classList.add("stacked")}}));this._registerResponsiveComponent(new l({rootNode:a,targetNode:e.querySelector('[data-compound-type="logo"] > *'),padding:40,onReset:function(e,t){i||a.classList.add("align-center-vert")},onRespond:function(e,t){s.one("html.flexbox")||a.classList.remove("align-center-vert")}}));this._registerResponsiveComponent(new l({rootNode:a,targetNode:e.querySelector(".content-gallery"),padding:parseInt(a.ownerDocument.defaultView.getComputedStyle(a.parentNode).paddingTop,10),onReset:function(e){if(!i){e.classList.add("align-center");e.classList.remove("align-center-horiz")}},onRespond:function(e){if("left"!==a.ownerDocument.defaultView.getComputedStyle(a.parentNode).float&&!i){e.classList.remove("align-center");e.classList.add("align-center-horiz")}}}));this._registerResponsiveComponent(new o({rootNode:a,padding:Math.max(25,2*parseInt(getComputedStyle(e)["border-top-width"],10)),onReset:function(e){e.parentNode.classList.remove("scroll");if(!i){a.classList.add("align-center");a.classList.remove("align-center-horiz")}},onRespond:function(e){e.parentNode.classList.add("scroll");if(!i){a.classList.remove("align-center");a.classList.add("align-center-horiz")}}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/layouts/twitter-full-center-01.js":function(e,t,a){var l=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").FontSize;var c=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverflowDetector;var u=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverlapDetector;YUI.add("squarespace-slide-rendering-layouts-twitter-full-center-01",function(e){e.namespace("Squarespace.SlideRendering.Layouts");e.Squarespace.SlideRendering.Layouts.TwitterFullCenter01=e.Base.create("TwitterFullCenter01",e.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();var a=e.querySelector(".group-twitter");var t=e.querySelector(".responsive-wrapper");var i=e.querySelector(".group-logo");var s=e.querySelector(".layer-front .sqs-slide-layer-content");var n=e.querySelector('[data-compound-type="logo"]');var r=function(){if(t.classList.contains("stacked")||!i.classList.contains("top-left")){i.style.minHeight=null;t.style.minHeight=null}else{i.style.minHeight=t.clientHeight+"px";t.style.minHeight=i.clientHeight+"px"}};this._registerResponsiveComponent(new l({rootNode:n.querySelector("h1"),widthRatio:.4,minFontSize:13,onReset:function(){r()},onRespond:function(){r()},onMinFontSize:function(){r()}}));this._registerResponsiveComponent(new l({rootNode:t,fontSizeNodes:[e.querySelector('[data-compound-type="action"] ul'),e.querySelector('[data-slice-type="custom-form"]')],widthBoundaryNode:a,minFontSize:10,widthRatio:.8,onReset:function(e){e.classList.remove("stacked")},onMinFontSize:function(e){e.classList.add("stacked")}}));var o=e.querySelectorAll('[data-slice-type="twitter"] .sqs-tweet .tweet-body');Array.prototype.forEach.call(o,function(e){this._registerResponsiveComponent(new l({rootNode:e,widthRatio:1,heightRatio:.5,scale:.97,minFontSize:18,heightBoundaryNode:a,onReset:function(e){},onMinFontSize:function(e){}}))},this);this._registerResponsiveComponent(new u({rootNode:e.querySelector('[data-compound-type="logo"] > *'),targetNode:t,onReset:function(e,t){t.classList.add("top-right");i.classList.add("top-left");t.classList.remove("stacked");n.classList.remove("stacked");r()},onRespond:function(e,t){t.classList.remove("top-right");i.classList.remove("top-left");t.classList.add("stacked");n.classList.add("stacked");r()}}));this._registerResponsiveComponent(new u({rootNode:t,targetNode:a,padding:20,onReset:function(e,t){e.classList.add("top-right");i.classList.add("top-left");e.classList.remove("stacked");n.classList.remove("stacked");a.classList.remove("stacked");s.classList.remove("scroll");r()},onRespond:function(e,t){e.classList.remove("top-right");i.classList.remove("top-left");e.classList.add("stacked");n.classList.add("stacked");a.classList.add("stacked");s.classList.add("scroll");r()}}));this._registerResponsiveComponent(new c({rootNode:a,onReset:function(){a.classList.remove("stacked");s.classList.remove("scroll")},onRespond:function(){a.classList.add("stacked");s.classList.add("scroll")}}));this._registerResponsiveComponent(new c({rootNode:t,onReset:function(){a.classList.remove("stacked");s.classList.remove("scroll")},onRespond:function(){a.classList.add("stacked");s.classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/layouts/twitter-full-left-01.js":function(e,t,a){var c=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").BoundaryRatios;var u=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").FontSize;var d=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverflowDetector;var p=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverlapDetector;YUI.add("squarespace-slide-rendering-layouts-twitter-full-left-01",function(l){l.namespace("Squarespace.SlideRendering.Layouts");l.Squarespace.SlideRendering.Layouts.TwitterFullLeft01=l.Base.create("TwitterFullLeft01",l.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();var a=e.querySelector(".group-twitter");var i=e.querySelector(".group-logo-social-actions");var t=e.querySelector(".responsive-wrapper");var s=e.querySelector(".layer-front .sqs-slide-layer-content");var n=e.querySelector('[data-compound-type="logo"]');var r=function(){n.style.minHeight=t.clientHeight+"px";t.style.minHeight=n.clientHeight+"px"};this._registerResponsiveComponent(new u({rootNode:n.querySelector("h1"),widthBoundaryNode:s,widthRatio:.8,minFontSize:13,onReset:function(e,t){r()},onRespond:function(e,t){r()},onMinFontSize:function(e,t){r()}}));this._registerResponsiveComponent(new u({rootNode:t,fontSizeNodes:[e.querySelector('[data-compound-type="action"] ul'),e.querySelector('[data-slice-type="custom-form"]')],minFontSize:12,widthRatio:.99,onReset:function(e){i.classList.add("right-left");e.classList.remove("stacked")},onRespond:function(e){},onMinFontSize:function(e){i.classList.remove("right-left");e.classList.add("stacked")}}));var o=e.querySelectorAll('[data-slice-type="twitter"] .tweet-body');Array.prototype.forEach.call(o,l.bind(function(e){this._registerResponsiveComponent(new u({rootNode:e,widthRatio:1,heightRatio:.55,scale:.97,minFontSize:18,heightBoundaryNode:a}))},this));this._registerResponsiveComponent(new p({rootNode:e.querySelector('[data-compound-type="logo"] > *'),targetNode:t.querySelector(".sqs-slice:last-child"),padding:40,onReset:function(e,t){i.classList.add("right-left")},onRespond:function(e,t){i.classList.remove("right-left")}}));this._registerResponsiveComponent(new p({rootNode:e.querySelector('[data-compound-type="logo"] > *'),targetNode:t.querySelector(".sqs-slice:first-child"),padding:40,onReset:function(e,t){i.classList.add("right-left")},onRespond:function(e,t){i.classList.remove("right-left")}}));this._registerResponsiveComponent(new c({rootNode:t,widthRatio:.95,onReset:function(e){e.classList.remove("stacked");r()},onRespond:function(e){e.classList.add("stacked")}}));this._registerResponsiveComponent(new p({rootNode:e.querySelector(".group-logo-social-actions"),targetNode:a,padding:40,onReset:function(e,t){e.classList.add("bottom-full-width");a.classList.remove("stacked");s.classList.remove("scroll");r()},onRespond:function(e,t){e.classList.remove("bottom-full-width");a.classList.add("stacked");s.classList.add("scroll")}}));this._registerResponsiveComponent(new d({rootNode:a,padding:20,onReset:function(){a.classList.remove("stacked");s.classList.remove("scroll")},onRespond:function(){a.classList.add("stacked");s.classList.add("scroll")}}));this._registerResponsiveComponent(new d({rootNode:t,padding:20,onReset:function(){a.classList.remove("stacked");s.classList.remove("scroll")},onRespond:function(){a.classList.add("stacked");s.classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/layouts/video-full-bottom-01.js":function(e,t,a){var c=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").BoundaryRatios;var u=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").FontSize;var d=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverflowDetector;var p=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverlapDetector;YUI.add("squarespace-slide-rendering-layouts-video-full-bottom-01",function(l){l.namespace("Squarespace.SlideRendering.Layouts");l.Squarespace.SlideRendering.Layouts.VideoFullBottom01=l.Base.create("VideoFullBottom01",l.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var a=this.get("contentBox").getDOMNode();var e=a.querySelector(".group-copy");var t=a.querySelector(".group-content");var i=a.querySelector(".group-links");var s=60;this._registerResponsiveComponent(new u({rootNode:a.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthBoundaryNode:t,minFontSize:20,widthRatio:.99,onReset:function(e){e.style.whiteSpace="nowrap"},onMinFontSize:function(e){e.style.whiteSpace="normal"}}));this._registerResponsiveComponent(new u({rootNode:a.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),minFontSize:15,widthBoundaryNode:t,widthRatio:.99,onReset:function(e){e.style.whiteSpace="nowrap"},onMinFontSize:function(e){e.style.whiteSpace="normal"}}));var n=new u({rootNode:a.querySelector(".responsive-wrapper"),fontSizeNodes:[a.querySelector('[data-compound-type="action"] ul'),a.querySelector('[data-slice-type="custom-form"]')],widthBoundaryNode:a.querySelector(".group-content"),minFontSize:10,widthRatio:.45,enabled:true,onReset:function(e){e.classList.remove("stacked");e.classList.remove("text-align-left")},onMinFontSize:function(e){e.classList.add("stacked");e.classList.add("text-align-left")}});this._registerResponsiveComponent(n);this._registerResponsiveComponent(new p({rootNode:a.querySelector('[data-slice-type="body"]'),targetNode:i,padding:60,onReset:function(){e.classList.remove("stacked")},onRespond:function(){e.classList.add("stacked")}}));this._registerResponsiveComponent(new p({rootNode:e,targetNode:i,padding:60,onReset:function(e,t){var a=e.parentNode;a.classList.remove("stacked");a.classList.remove("left-right-floats-off");t.querySelector(".responsive-wrapper").classList.remove("wrapped");n.disable()},onRespond:function(e,t){var a=e.parentNode;a.classList.add("stacked");a.classList.add("left-right-floats-off");t.querySelector(".responsive-wrapper").classList.remove("wrapped");n.enable()}}));this._registerResponsiveComponent(new c({rootNode:a.querySelector(".group-links .responsive-wrapper"),widthBoundaryNode:t,widthRatio:.99,onReset:function(e){e.classList.remove("stacked");r.disable()},onRespond:function(e){e.classList.add("stacked");r.enable()}}));var r=new c({rootNode:a.querySelector('[data-slice-type="social-icons"]:not([data-content-empty="true"])'),widthBoundaryNode:t,widthRatio:.7,enabled:false,onReset:function(e){e.classList.remove("wrapped");e.querySelector(".break")&&e.querySelector(".break").remove()},onRespond:function(e){e.classList.add("wrapped");var t=e.childNodes;if(!e.querySelector(".break")){var a=new l.Node(t.item(Math.floor(t.length/2)));a.insert('<br class="break">',"before")}}});this._registerResponsiveComponent(r);this._registerResponsiveComponent(new p({rootNode:t,targetNode:a.querySelector(".group-video"),padding:120,onReset:function(e,t){o.disable();t.classList.add("text-align-center");t.classList.add("align-center");t.classList.remove("bottom-full-width");e.classList.add("full-width")},onRespond:function(e,t){t.classList.remove("text-align-center");t.classList.remove("align-center");if(a.querySelector(".vertical-positioning-top")){e.classList.remove("full-width");t.classList.add("bottom-full-width")}o.enable()}}));var o=new p({rootNode:t,targetNode:a.querySelector(".group-video"),padding:60,enabled:false,onReset:function(e,t){e.parentNode.classList.remove("scroll");e.style.top=null;e.style.bottom=null;t.style.top=null;t.style.bottom=null},onRespond:function(e,t){setTimeout(function(){this.classList.add("scroll")}.bind(e.parentNode),50);if(a.querySelector(".vertical-positioning-top")){t.style.top=e.getBoundingClientRect().bottom+s+"px";t.style.bottom="auto"}else{e.style.top=t.getBoundingClientRect().bottom+s+"px";e.style.bottom="auto"}}});this._registerResponsiveComponent(o);this._registerResponsiveComponent(new d({rootNode:t,onReset:function(e){e.parentNode.classList.remove("scroll")},onRespond:function(e){setTimeout(function(){this.classList.add("scroll")}.bind(e.parentNode),50)}}));this._registerResponsiveComponent(new d({rootNode:a.querySelector(".group-video"),onReset:function(e){e.parentNode.classList.remove("scroll")},onRespond:function(e){setTimeout(function(){this.classList.add("scroll")}.bind(e.parentNode),50)}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/layouts/video-full-center-01.js":function(e,t,a){var r=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").FontSize;var o=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverflowDetector;var l=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverlapDetector;YUI.add("squarespace-slide-rendering-layouts-video-full-center-01",function(e){e.namespace("Squarespace.SlideRendering.Layouts");e.Squarespace.SlideRendering.Layouts.VideoFullCenter01=e.Base.create("VideoFullCenter01",e.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();var t=e.querySelector(".group-copy");var a=e.querySelector('[data-compound-type="logo"] > *');var i=e.querySelector(".responsive-wrapper");this._registerResponsiveComponent(new r({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthRatio:.49,minFontSize:13}));this._registerResponsiveComponent(new r({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),widthRatio:.99,heightRatio:.1,scale:.99,minFontSize:18,heightBoundaryNode:e.querySelector(".sqs-slide-layer")}));var s=new r({rootNode:i,fontSizeNodes:[e.querySelector('[data-compound-type="action"] ul'),e.querySelector('[data-slice-type="custom-form"]')],minFontSize:10,widthRatio:.8,enabled:false,onReset:function(e){e.classList.remove("stacked")},onMinFontSize:function(e){e.classList.add("stacked")}});this._registerResponsiveComponent(s);var n=new l({rootNode:t,targetNode:i,enabled:false,padding:10,onRespond:function(e,t){e.classList.add("stacked");e.classList.remove("align-center-vert");e.parentNode.classList.add("scroll");t.parentNode.classList.remove("bottom-full-width")}});this._registerResponsiveComponent(n);this._registerResponsiveComponent(new l({rootNode:a,targetNode:i,padding:60,onReset:function(e,t){var a=t.parentNode;a.classList.add("top-right");a.classList.remove("bottom-full-width");s.disable();n.disable();t.querySelector('[data-slice-type]:not([data-content-empty="true"])')&&e.parentNode.classList.add("text-align-left")},onRespond:function(e,t){var a=t.parentNode;a.classList.remove("top-right");a.classList.add("bottom-full-width");s.enable();n.enable();e.parentNode.classList.remove("text-align-left")}}));this._registerResponsiveComponent(new o({rootNode:t,widthRatio:.9,onReset:function(e){e.classList.remove("stacked");e.classList.add("align-center-vert");e.classList.add("full-width");e.parentNode.classList.remove("scroll")},onRespond:function(e){e.classList.add("stacked");e.classList.remove("align-center-vert");e.classList.remove("full-width");e.parentNode.classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/layouts/video-full-corners-01.js":function(e,t,a){var l=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").BoundaryRatios;var c=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").FontSize;var u=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverflowDetector;var d=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").OverlapDetector;YUI.add("squarespace-slide-rendering-layouts-video-full-corners-01",function(o){o.namespace("Squarespace.SlideRendering.Layouts");o.Squarespace.SlideRendering.Layouts.VideoFullCorners01=o.Base.create("VideoFullCorners01",o.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var t=this.get("contentBox").getDOMNode();var i=t.querySelector(".group-copy");var e=t.querySelector(".group-content");var a=t.querySelector(".group-links");var s=t.querySelector(".responsive-wrapper.social");this._registerResponsiveComponent(new c({rootNode:t.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthBoundaryNode:e,minFontSize:20,widthRatio:.99,onReset:function(e){e.style.whiteSpace="nowrap"},onMinFontSize:function(e){e.style.whiteSpace="normal"}}));this._registerResponsiveComponent(new c({rootNode:t.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),minFontSize:15,widthBoundaryNode:e,widthRatio:.99,onReset:function(e){e.style.whiteSpace="nowrap"},onMinFontSize:function(e){e.style.whiteSpace="normal"}}));var n=new c({rootNode:s,fontSizeNodes:[t.querySelector('[data-compound-type="action"] ul'),t.querySelector('[data-slice-type="custom-form"]')],widthBoundaryNode:t.querySelector(".group-content > .sqs-slice-group:not(.group-branding)"),minFontSize:10,widthRatio:.9,enabled:false,onReset:function(e){e.classList.remove("stacked");e.classList.remove("text-align-left")},onMinFontSize:function(e){e.classList.add("stacked");e.classList.add("text-align-left")}});this._registerResponsiveComponent(n);this._registerResponsiveComponent(new l({rootNode:i,widthBoundaryNode:e,widthRatio:.99,onReset:function(e){e.classList.remove("stacked")},onRespond:function(e){e.classList.add("stacked")}}));this._registerResponsiveComponent(new d({rootNode:i,targetNode:a,padding:60,onReset:function(e,t){i.classList.remove("stacked");var a=e.parentNode;a.classList.remove("stacked");a.classList.remove("left-right-floats-off");s.classList.remove("wrapped");n.disable()},onRespond:function(e,t){i.classList.add("stacked");var a=e.parentNode;a.classList.add("stacked");a.classList.add("left-right-floats-off");s.classList.remove("wrapped");n.enable()}}));var r=new l({rootNode:t.querySelector('[data-slice-type="social-icons"]:not([data-content-empty="true"])'),widthBoundaryNode:e,widthRatio:.7,enabled:false,onReset:function(e){e.classList.remove("wrapped");e.querySelector(".break")&&e.querySelector(".break").remove()},onRespond:function(e){e.classList.add("wrapped");var t=e.childNodes;if(!e.querySelector(".break")){var a=new o.Node(t.item(Math.floor(t.length/2)));a.insert('<br class="break">',"before")}}});this._registerResponsiveComponent(r);this._registerResponsiveComponent(new l({rootNode:s,widthBoundaryNode:e,widthRatio:.99,onReset:function(e){e.classList.remove("stacked");r.disable()},onRespond:function(e){e.classList.add("stacked");r.enable()}}));this._registerResponsiveComponent(new d({rootNode:t.querySelector(".group-video"),targetNode:t.querySelector(".layer-front .sqs-slide-layer-content"),padding:0,onReset:function(e,t){e.classList.add("absolute");t.parentNode.classList.remove("scroll")},onRespond:function(e,t){e.classList.remove("absolute");t.parentNode.classList.add("scroll")}}));this._registerResponsiveComponent(new u({rootNode:t.querySelector(".sqs-slide-layer.layer-front .sqs-slide-layer-content"),widthRatio:.95,padding:-1,onReset:function(e){t.querySelector(".sqs-slide-layer.layer-front").classList.remove("scroll")},onRespond:function(e){t.querySelector(".sqs-slide-layer.layer-front").classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/slices/album.js":function(e,t,a){var i=a("./common/temp/node_modules/@sqs/site-rendering/AlbumPlayer/index.js").CoverPageViewBinder;YUI.add("squarespace-slide-rendering-slices-album",function(e){e.namespace("Squarespace.SlideRendering.Slices");var a=e.Squarespace.SlideRendering.Slices.Album=e.Base.create("Album",e.Squarespace.SlideRendering.Slices.Base,[],{initializer:function(){var e=this.get("contentBox");var t=e.one(".sqs-slice-album-playlist");t.hasClass("demo-album")?this.get("contentBox").all("a").on("click",function(e){e.halt()},this):this._playlist=new i},renderUI:function(){a.superclass.renderUI.call(this);var e=this.get("contentBox");var t=e.one(".sqs-slice-album-playlist");this._playlist&&this._playlist.connectToNode(t.getDOMNode())}},{SLICE_TYPE:e.Squarespace.SliceType.ALBUM,CSS_PREFIX:"sqs-slice-album"})},"1.0",{requires:["base","squarespace-slide-rendering-slices-base","squarespace-enum"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/slices/base.js":function(e,t,a){var i=a("./src/main/webapp/frontend/packages/enums/SlideType.js");var s=a("./src/main/webapp/universal/src/shared/constants/SlideTypeNames.js");var n=a("./src/main/webapp/universal/src/shared/constants/SlideTypeByName.js");var r=a("./src/main/webapp/universal/src/shared/utils/getSlideWrapperSelector.js");YUI.add("squarespace-slide-rendering-slices-base",function(e){e.namespace("Squarespace.SlideRendering.Slices");e.Squarespace.SlideRendering.Slices.Base=e.Base.create("Base",e.Widget,[],{CONTENT_TEMPLATE:null},{CSS_PREFIX:"sqs-slice",ATTRS:{sliceId:{value:null},slideType:{value:s[i.COVER_PAGE]},slideSelector:{getter:function(){var e=n[this.get("slideType")];return r.getWrapperSelector(e)}},canClientRefresh:{value:false}}})},"1.0",{requires:["base","widget"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/slices/body.js":function(e,t){YUI.add("squarespace-slide-rendering-slices-body",function(i){i.namespace("Squarespace.SlideRendering.Slices");i.Squarespace.SlideRendering.Slices.Body=i.Base.create("Body",i.Squarespace.SlideRendering.Slices.Base,[i.Squarespace.SlideRendering.Slices.ClientRefresh],{refreshFromSliceContent:function(e){var t=e.get("body.html");t&&"string"!==typeof t&&t.length&&(t=t.toString());var a=!i.Lang.isValue(t)||""===t;this.get("contentBox").setHTML(t);this._updateContentEmptyAttribute(a)}},{SLICE_TYPE:i.Squarespace.SliceType.BODY,CSS_PREFIX:"sqs-slice-body"})},"1.0",{requires:["base","squarespace-enum","squarespace-slide-rendering-slices-base","squarespace-slide-rendering-slices-client-refresh"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/slices/buttons.js":function(e,t,a){var o=a("./src/main/webapp/frontend/packages/enums/ButtonContext.js");var l=a("./src/main/webapp/universal/src/shared/utils/census/CensusUtils.ts");YUI.add("squarespace-slide-rendering-slices-buttons",function(r){r.namespace("Squarespace.SlideRendering.Slices");r.Squarespace.SlideRendering.Slices.Buttons=r.Base.create("Buttons",r.Squarespace.SlideRendering.Slices.Base,[r.Squarespace.SlideRendering.Slices.ClientRefresh],{renderUI:function(){this._trackButtonRender()},bindUI:function(){var e=this.get("contentBox");e.all("a").each(function(e){e.on("click",this._trackButtonClick,this)},this)},refreshFromSliceContent:function(e){var i="";var s=true;e.get("links").each(function(e){var t=e.get("text");if(r.Lang.isValue(t)&&""!==t){s=false;var a=e.get("clickthroughUrl");i+=r.Lang.sub('<li><a href="{href}"{target}>{text}</a></li>',{href:a.url,targetNode:a.newWindow?' targetNode="_blank"':"",text:r.Squarespace.Escaping.escapeForHtml(t)})}});this.get("contentBox").one("ul").setHTML(i);this._updateContentEmptyAttribute(s)},_getTrackingData:function(e){var t=e.getAttribute("href");var a=e.ancestor(".sqs-slide");var i=a.getAttribute("data-slide-layout-id");var s=a.getAttribute("data-slide-type");var n="popup-overlay"===s?o.POPUP_OVERLAY:o.BUTTON_BLOCK;return{pagePath:r.config.win.location.pathname,id:i,buttonText:e.get("innerHTML"),clickthroughUrl:t,alignment:null,size:null,newWindow:e.hasAttribute("target"),context:n}},_trackButtonRender:function(){var e=this.get("contentBox");e.all("a").each(function(e){var t=this._getTrackingData(e);if(t.context===o.POPUP_OVERLAY)return;l.trackButtonView(t)},this)},_trackButtonClick:function(e){var t=e.currentTarget;if(t.hasAttribute("data-tracked")){t.removeAttribute("data-tracked");return}var a=t.hasAttribute("target");var i=e.target.getAttribute("href");var s=i&&"mailto"===i.split(":")[0].toLowerCase();var n=(!a||e.metaKey||e.ctrlKey||e.shiftKey)&&!s;if(n){e.preventDefault();e.stopImmediatePropagation()}var r=function(){if(n){t.setAttribute("data-tracked",true);t.simulate("click")}};var o=this._getTrackingData(e.target);l.trackButtonClick(o).then(function(){r()}).catch(function(e){r()})}},{SLICE_TYPE:r.Squarespace.SliceType.BUTTONS,CSS_PREFIX:"sqs-slice-buttons"})},"1.0",{requires:["base","squarespace-enum","squarespace-escaping-utils","squarespace-slide-rendering-slices-base","squarespace-slide-rendering-slices-client-refresh"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/slices/client-refresh.js":function(e,t,a){YUI.add("squarespace-slide-rendering-slices-client-refresh",function(e){e.namespace("Squarespace.SlideRendering.Slices");e.Squarespace.SlideRendering.Slices.ClientRefresh=e.Base.create("Heading",e.Base,[],{refreshFromSliceContent:function(e){false},_updateContentEmptyAttribute:function(e){var t=this.get("contentBox");e?t.setAttribute("data-content-empty",true):t.removeAttribute("data-content-empty")}},{ATTRS:{canClientRefresh:{value:true}}})},"1.0",{requires:["base"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/slices/custom-form.js":function(e,t,a){var u=a("./src/main/webapp/universal/src/shared/utils/GoogleReCaptchaAPI.js");YUI.add("squarespace-slide-rendering-slices-custom-form",function(c){c.namespace("Squarespace.SlideRendering.Slices");var t=c.Squarespace.SlideRendering.Slices.CustomForm=c.Base.create("CustomForm",c.Squarespace.SlideRendering.Slices.Base,[c.Squarespace.SlideRendering.Slices.ClientRefresh],{initializer:function(){this._lightbox=new c.Squarespace.Widgets.ModalLightbox({render:c.one(this.get("slideSelector")),openClassNode:c.one(this.get("slideSelector")+" .sqs-slide-container")});this._formTemplatePromise=this._getFormTemplateSchema()},destructor:function(){this._lightbox.close();this._formWidget&&this._formWidget.destroy();this._lightbox.destroy();this._formTemplatePromise=null},renderUI:function(){t.superclass.renderUI.call(this);this._lightbox.render()},bindUI:function(){t.superclass.bindUI.call(this);var e=this.get("contentBox");e.delegate("click",this._openForm,".open-form-button",this)},_openForm:function(){var e=this.get("contentBox");var t=e.one(".open-form-button-container");var a=t.getData("form");var o=c.Lang.isValue(a)&&""!==a;var l;l=o?c.JSON.parse(a.replace(/scr"\+"ipt/g,"script")):t.hasClass("slice-newsletter-form")?(new c.Squarespace.Models.SliceDemoNewsletterForm).toJSON():(new c.Squarespace.Models.SliceDemoCustomForm).toJSON();this._formTemplatePromise.then(c.bind(function(e){this._formWidget&&this._formWidget.destroy(true);var t=this._formWidget=new c.Squarespace.Widgets.AsyncForm({form:l,formTemplate:e,formSubmitButtonText:l.submitButtonText,formName:l.name,showTitle:true,preventDefaultSubmit:!o,preventAllSubmits:!o});var a=this._lightbox;a.set("content",t);var i=u.getCaptchaContainer(c.config.win,t.get("contentBox").getDOMNode());i&&u.render(c.config.win,i);if(c.UA.ios>0){var s=c.one('meta[name="viewport"]');s.setAttribute("content",s.getAttribute("content")+", maximum-scale=1");a.once("close",function(){var e=this.getAttribute("content");var t=e.substring(0,e.indexOf(", maximum-scale=1"));this.setAttribute("content",t);setTimeout(function(){window.dispatchEvent(new Event("resize"))},100)},s)}var n=c.one(this.get("slideSelector")+' [data-slice-type="gallery"] .scrim');var r=n?n.getComputedStyle("backgroundColor"):null;a.get("boundingBox").one(".lightbox-background").setStyle("backgroundColor",r);a.open()},this))},_getFormTemplateSchema:function(){return c.Squarespace.Promises.create(function(t){c.Data.get({url:"/api/template/GetTemplateSchema",data:{type:c.Squarespace.BlockType.FORM},success:function(e){t(e)}})})},refreshFromSliceContent:function(e){var t=this.get("contentBox");var a=t.one(".open-form-button-container");a.addClass(e.get("isNewsletterFormSelected")?"slice-newsletter-form":"slice-custom-form");a.removeClass(e.get("isNewsletterFormSelected")?"slice-custom-form":"slice-newsletter-form");var i=e.get("buttonLabel");var s=!c.Lang.isValue(i)||""===i;s?a.setHTML(""):a.setHTML('<span><a class="open-form-button">'+i+"</a></span>");this._updateContentEmptyAttribute(s)}},{SLICE_TYPE:c.Squarespace.SliceType.CUSTOM_FORM,CSS_PREFIX:"sqs-slice-custom-form"})},"1.0",{requires:["base","json","squarespace-async-form","squarespace-enum","squarespace-modal-lightbox","squarespace-models-slice-demo-custom-form","squarespace-models-slice-demo-newsletter-form","squarespace-promises","squarespace-util","squarespace-slide-rendering-slices-base","squarespace-slide-rendering-slices-client-refresh"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/slices/factory.js":function(e,t){YUI.add("squarespace-slide-rendering-slices-factory",function(e){var t=e.Squarespace.FactoryUtils.createEnumToClassFactory(e.Squarespace.SliceType,e.Squarespace.SlideRendering.Slices,"SLICE_TYPE","Base");e.namespace("Squarespace.SlideRendering.Slices");e.Squarespace.SlideRendering.Slices.Factory=t},"1.0",{requires:["squarespace-enum","squarespace-factory-utils","squarespace-slide-rendering-slices-album","squarespace-slide-rendering-slices-body","squarespace-slide-rendering-slices-buttons","squarespace-slide-rendering-slices-custom-form","squarespace-slide-rendering-slices-gallery","squarespace-slide-rendering-slices-heading","squarespace-slide-rendering-slices-image","squarespace-slide-rendering-slices-lock","squarespace-slide-rendering-slices-map","squarespace-slide-rendering-slices-newsletter","squarespace-slide-rendering-slices-navigation","squarespace-slide-rendering-slices-password","squarespace-slide-rendering-slices-social-icons","squarespace-slide-rendering-slices-sub-heading","squarespace-slide-rendering-slices-twitter","squarespace-slide-rendering-slices-video"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/slices/gallery.js":function(e,t,a){var r=a("./common/temp/node_modules/@squarespace/video-background-rendering/dist/index-polyfilled.js").VideoBackground;YUI.add("squarespace-slide-rendering-slices-gallery",function(s){s.namespace("Squarespace.SlideRendering.Slices");var n=false;var t=s.Squarespace.SlideRendering.Slices.Gallery=s.Base.create("Gallery",s.Squarespace.SlideRendering.Slices.Base,[s.Squarespace.SlideRendering.Slices.HasScrim],{initializer:function(){this._events=[];this._initGallery()},destructor:function(){this._events.forEach(function(e){e.detach()});this._events=null;this._gallery&&this._gallery.destroy()},bindUI:function(){t.superclass.bindUI.call(this);this._events.push(s.Global.after("tweak:change",this._onTweakChange,this));this._events.push(s.Global.after("slideUpdateRendered",function(){var e=this.get("items");var a=new s.Parallel;e.each(function(e){var t=e.one("img");if(t&&window.ImageLoader){window.ImageLoader.load(t,true);t.once("load",a.add())}},this);a.done(function(){this.syncUI()}.bind(this))},this));this._gallery&&this._gallery.after("currentIndexChange",this._syncScrim,this);var e=this.get("slideSelector")+' .sqs-slice[data-slice-type="video"]';this._isVideoBg()&&s.one(e)&&this._events.push(s.one(this.get("slideSelector")+" .sqs-slice-play-button").on("click",function(e){try{this.videoBg.player.pauseVideo()}catch(e){n&&console.warn(e)}},this),s.Global.on("lightbox-hidden",function(){try{this.videoBg.player.playVideo()}catch(e){n&&console.warn(e)}},this));this._events.push(s.Global.after("tweak:reset",function(){this.get("items").each(function(e){e.setStyles({"background-color":null,height:null,width:null,"overflow-y":null,"overflow-x":null})});this._gallery.destroy();this._initGallery()},this))},syncUI:function(){t.superclass.syncUI.call(this);if(this._isGrid()||this._isVideoBg()){this.get("boundingBox").one(".scrim")||this.get("boundingBox").append('<div class="scrim"></div>');this._gallery&&this._gallery.syncUI()}else{this._gallery.refresh();this._syncScrim()}},_initGallery:function(){this._removeInvalidImages();var e=this.get("items");var t=this.get("boundingBox");if(this._isVideoBg()){var a=e.item(0).getDOMNode();var i=this._getVideoPropertiesFromElement(a);i.container=a;this.videoBg=new r(i,s.config.win)}else if(this._isGrid()){this.get("contentBox").ancestor(".sqs-slide").hasClass("sqs-slide-ready")?this._createGrid(t,e):s.Global.on("slideReady",this._createGrid(t,e));true===n&&(window.grid=this._gallery)}else this._gallery=new s.SQS.Gallery.Gallery2({container:t,slides:e,autoplay:true,autoplayOptions:{timeout:5e3},loaderOptions:{mode:"fill"},refreshOnResize:true,loop:true,design:"stacked",designOptions:{autoHeight:false,speed:1,transition:"fade"}})},_removeInvalidImages:function(){var e=this.get("items");e&&e.each(function(e){!e.one("img")||e.hasClass("gallery-video-background")||e.hasClass("demo-image")||e.one("img").getAttribute("data-image-dimensions")||e.remove()});this.set("items",this.get("boundingBox").all(".sqs-slice-gallery-item"))},_syncScrim:function(){var e=this._gallery.get("currentIndex");var t=this._gallery.get("slides").item(e);t&&this.updateScrim(t)},_createGrid:function(e,t){var a=this.get("slideSelector")+" .sqs-slide-container";this._gallery=new s.Squarespace.SlideRendering.GridGallery({container:e,items:t,slideContainerSelector:a})},_isGrid:function(){var e=false;s.one(this.get("slideSelector")+" .gallery-style-grid")&&(e=true);return e},_isVideoBg:function(){var e=false;s.one(this.get("slideSelector")+' [data-slice-type="gallery"] .gallery-video-background')&&(e=true);return e},_getVideoPropertiesFromElement:function(e){var t={};e.getAttribute("data-config-url")&&(t.url=e.getAttribute("data-config-url"));e.getAttribute("data-config-playback-speed")&&(t.playbackSpeed=e.getAttribute("data-config-playback-speed"));e.getAttribute("data-config-filter")&&(t.filter=e.getAttribute("data-config-filter"));e.getAttribute("data-config-filter-strength")&&(t.filterStrength=e.getAttribute("data-config-filter-strength"));e.getAttribute("data-config-custom-fallback-image")&&(t.useCustomFallbackImage=true);return t},_onTweakChange:function(e){var t=e.getName();var a=e.getValue();if("gallery-style"===t){this.get("items").each(function(){this.getDOMNode().style.cssText="";var e=this.one("img");e.setAttribute("src","");e.setAttribute("data-image-resolution","");e.setStyle("display","initial")});this._gallery.destroy();this._initGallery()}else if(this._isGrid())switch(t){case"gallery-style":this.get("items").each(function(){this._node.style.cssText=""});this._gallery.destroy();this._initGallery();break;case"grid-gallery-density":this._gallery._removeClonedItems();this._gallery.destroy();this._initGallery();break;case"grid-gallery-ratio":if("Original"!==a){this._gallery.set("axisDirection","row");this._gallery._removeClonedItems();this._gallery.destroy();this._initGallery()}else this._gallery._setAxisDirection();break;case"grid-gallery-image-orientation":this._gallery.set("axisDirection","row");this._gallery._removeClonedItems();this._gallery.destroy();this._initGallery();break;case"grid-gallery-direction":"Horizontal"===a?this._gallery.set("axisDirection","row"):this._gallery.set("axisDirection","column");break;case"gallery-randomize-order":"true"===a?this._gallery.set("imageOrdering","random"):this._gallery.set("imageOrdering","repeat");this._gallery._removeClonedItems();this._gallery.destroy();this._initGallery();break;case"gallery-loading-animation":this._gallery.previewImageLoading(a);break}this._isVideoBg()&&this.videoBg&&this.videoBg.scaleVideo();this.syncUI()}},{SLICE_TYPE:s.Squarespace.SliceType.GALLERY,CSS_PREFIX:"sqs-slice-gallery",ATTRS:{items:{value:null,validator:s.Squarespace.AttrValidators.isNullOrNodeList}},HTML_PARSER:{items:[".sqs-slice-gallery-item"]}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-enum","squarespace-gallery-ng","squarespace-slide-rendering-grid-gallery","squarespace-slide-rendering-slices-has-scrim","squarespace-slide-rendering-slices-base"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/slices/has-scrim.js":function(e,t){YUI.add("squarespace-slide-rendering-slices-has-scrim",function(a){a.namespace("Squarespace.SlideRendering.Slices");a.Squarespace.SlideRendering.Slices.HasScrim=a.Base.create("HasScrim",a.Base,[],{initializer:function(){a.Do.after(this._renderScrim,this,"renderUI",this)},updateScrim:function(e){if(!e)return;var t=e.getData("processedColorStyles");a.Lang.isUndefined(t)&&(t=a.Squarespace.SlideRendering.ColorProcessor.processNode(e));this._styleScrim(t.color,t.opacity)},_renderScrim:function(){var e=this.get("contentBox");this._scrim=e.one(".scrim");if(!this._scrim){this._scrim=a.Node.create('<div class="scrim"></div>');e.appendChild(this._scrim)}},_styleScrim:function(e,t){this._scrim.setStyle("backgroundColor",e.toString());this._scrim.setStyle("opacity",t);this._scrim.ancestor(".sqs-slice").setStyle("backgroundColor",e.toString())}},{ATTRS:{midPoint:{value:.6,writeOnce:"initOnly"}}})},"1.0",{requires:["base","squarespace-slide-rendering-color-processor","squarespace-slide-rendering-slices-rgb"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/slices/heading.js":function(e,t){YUI.add("squarespace-slide-rendering-slices-heading",function(s){s.namespace("Squarespace.SlideRendering.Slices");s.Squarespace.SlideRendering.Slices.Heading=s.Base.create("Heading",s.Squarespace.SlideRendering.Slices.Base,[s.Squarespace.SlideRendering.Slices.ClientRefresh],{refreshFromSliceContent:function(e){var t=e.get("text");var a=!s.Lang.isValue(t)||""===t;var i=s.Squarespace.Escaping.escapeForHtml(t);this.get("contentBox").one("h1").setHTML(i);this._updateContentEmptyAttribute(a)}},{SLICE_TYPE:s.Squarespace.SliceType.HEADING,CSS_PREFIX:"sqs-slice-heading"})},"1.0",{requires:["base","squarespace-enum","squarespace-escaping-utils","squarespace-slide-rendering-slices-base","squarespace-slide-rendering-slices-client-refresh"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/slices/image.js":function(e,t){YUI.add("squarespace-slide-rendering-slices-image",function(t){t.namespace("Squarespace.SlideRendering.Slices");var a=t.Squarespace.SlideRendering.Slices.Image=t.Base.create("Base",t.Squarespace.SlideRendering.Slices.Base,[],{syncUI:function(){a.superclass.syncUI.call(this);var e=this.get("contentBox").one("img");e&&e.plug(t.Squarespace.Loader2,{load:true,mode:"fit"})}},{SLICE_TYPE:t.Squarespace.SliceType.IMAGE,CSS_PREFIX:"sqs-slice-image",ATTRS:{}})},"1.0",{requires:["base","squarespace-enum","squarespace-image-loader","squarespace-slide-rendering-slices-base"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/slices/lock.js":function(e,t){YUI.add("squarespace-slide-rendering-slices-lock",function(e){e.namespace("Squarespace.SlideRendering.Slices");e.Squarespace.SlideRendering.Slices.Lock=e.Base.create("Lock",e.Squarespace.SlideRendering.Slices.Base,[],{},{SLICE_TYPE:e.Squarespace.SliceType.LOCK,CSS_PREFIX:"sqs-slice-lock"})},"1.0",{requires:["base","squarespace-enum","squarespace-slide-rendering-slices-base"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/slices/map.js":function(e,t,a){var n=a("./common/temp/node_modules/@sqs/site-rendering/Maps/MapView.js");var i=a("./common/temp/node_modules/@sqs/site-rendering/Maps/constants/styles.js");var r=a("./src/main/webapp/universal/src/shared/utils/analytics/trackInternal.ts");YUI.add("squarespace-slide-rendering-slices-map",function(s){s.namespace("Squarespace.SlideRendering.Slices");var e=s.Squarespace.SlideRendering.Slices.Map=s.Base.create("Map",s.Squarespace.SlideRendering.Slices.Base,[s.Squarespace.SlideRendering.Slices.ClientRefresh],{initializer:function(){this._events=[]},destructor:function(){this._events.forEach(function(e){e.detach()});this._events=null},renderUI:function(){e.superclass.renderUI.call(this);this._createMap()},bindUI:function(){e.superclass.bindUI.call(this);this._events.push(s.Global.on("tweak:change",this._onTweakChange,this));this._events.push(s.Global.on("tweak:reset",this._syncMapStyle,this));this._events.push(s.one(s.config.win).on("resize",this._centerMarker,this))},_onTweakChange:function(e){"map-style"===e.getName()&&this._syncMapStyle()},_syncMapStyle:function(){var e=this.get("map");e.updateUIOptions({style:this._getMapStyle()});this._centerMarker()},_createMap:function(){var e=this.get("mapContainer");var t=e.getAttribute("data-location");var a=s.JSON.parse(t);this._renderLocation(a)},_getMapStyle:function(){var e=this.get("slideSelector")+" .sqs-slide-container";var t=s.one(e).get("className");var a;a=-1!==t.indexOf("minimal-dark")?i.MinimalDark:-1!==t.indexOf("minimal-blue")?i.MinimalBlue:i.MinimalLight;return a},_renderLocation:function(e){var t=this.get("mapContainer");var a={mapZoom:e.mapZoom,mapLat:e.mapLat,mapLng:e.mapLng,markerLat:e.markerLat,markerLng:e.markerLng};var i={draggable:false,scrollwheel:false,showLabels:false,showControls:false,style:this._getMapStyle()};r("google_maps_map_load_on_site");n.createView(i,a,t.getDOMNode()).then(s.bind(function(e){this.set("map",e);e.centerMarker()},this),function(){false})},_centerMarker:function(){this.get("map").centerMarker()},_rebuildContent:function(){this.get("mapContainer").remove(true);var e=s.Node.create('<div class="sqs-slice-content-map"></div>');this.get("contentBox").appendChild(e);this.set("mapContainer",e)},refreshFromSliceContent:function(e){var t=e.get("location").toJSON();this._rebuildContent();this._renderLocation(t)}},{SLICE_TYPE:s.Squarespace.SliceType.MAP,CSS_PREFIX:"sqs-slice-map",ATTRS:{map:{value:null,validator:s.Squarespace.AttrValidators.isNullOrInstanceOf(n)},mapContainer:{value:null,validator:s.Squarespace.AttrValidators.isNullOrNode}},HTML_PARSER:{mapContainer:".sqs-slice-content-map"}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-enum","squarespace-slide-rendering-slices-base","squarespace-slide-rendering-slices-client-refresh"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/slices/navigation.js":function(e,t){YUI.add("squarespace-slide-rendering-slices-navigation",function(n){n.namespace("Squarespace.SlideRendering.Slices");n.Squarespace.SlideRendering.Slices.Navigation=n.Base.create("Navigation",n.Squarespace.SlideRendering.Slices.Base,[n.Squarespace.SlideRendering.Slices.ClientRefresh],{refreshFromSliceContent:function(e){var i="";var s=true;e.get("links").each(function(e){var t=e.get("text");if(n.Lang.isValue(t)&&""!==t){s=false;var a=e.get("clickthroughUrl");i+=n.Lang.sub('<li><a href="{href}"{target}>{text}</a></li>',{href:a.url,targetNode:a.newWindow?' targetNode="_blank"':"",text:n.Squarespace.Escaping.escapeForHtml(t)})}});this.get("contentBox").one("ul").setHTML(i);this._updateContentEmptyAttribute(s)}},{SLICE_TYPE:n.Squarespace.SliceType.NAVIGATION,CSS_PREFIX:"sqs-slice-navigation"})},"1.0",{requires:["base","squarespace-enum","squarespace-escaping-utils","squarespace-slide-rendering-slices-base","squarespace-slide-rendering-slices-client-refresh"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/slices/newsletter.js":function(e,t,a){var d=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var r=a("./src/main/webapp/universal/src/shared/utils/EmailUtils.js").isValidEmail;var i=a("./src/main/webapp/frontend/packages/enums/Flag.js");var s=a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts");var o=a("./src/main/webapp/universal/src/shared/utils/GoogleReCaptchaAPI.js");var l=a("./src/main/webapp/frontend/packages/enums/GoogleReCaptchaAlignmentType.js");var c=a("./src/main/webapp/frontend/packages/enums/GoogleReCaptchaThemeType.js");YUI.add("squarespace-slide-rendering-slices-newsletter",function(n){n.namespace("Squarespace.SlideRendering.Slices");var t=n.Squarespace.SlideRendering.Slices.Newsletter=n.Base.create("Newsletter",n.Squarespace.SlideRendering.Slices.Base,[n.Squarespace.SlideRendering.Slices.ClientRefresh],{initializer:function(){t.superclass.initializer.call(this);this._bindGlobalEvents()},renderUI:function(){t.superclass.renderUI.call(this);this.renderCaptcha()},bindUI:function(){t.superclass.bindUI.call(this);var e=this.get("contentBox");var a=e.one("form.newsletter-form");var i=n.Squarespace.FormSubmit(a.getDOMNode());var s=this._getEmailField(a);s.on("focus",function(){i.clearErrors()},this);a.on("submit",function(){i.clearErrors();function e(e){var t=i.createErrorNode(e);a.prepend(t);t.setAttribute("tabindex",-1);t.focus()}if(!r(s.get("value"))){e(d("Please enter a valid email address."));return false}var t=a.getAttribute("data-form-id");if(!t){e(d("Please connect your newsletter to a storage option."));return false}i.submit({collectionId:null,disableValidation:true,formId:t,isOverlayForm:true,objectName:null,submitButtonText:this._getSubmitButtonText(a)});return false},this)},_getEmailField:function(e){return e.one('.field-element[type="text"]')},_getEmailPlaceholderText:function(e){return this._getEmailField(e).getDOMNode().getAttribute("placeholder")},_getSubmitButton:function(e){return e.one("button")},_getSubmitButtonText:function(e){return this._getSubmitButton(e).get("value")},_bindGlobalEvents:function(){n.Global.detach("refreshCaptchaFromState");this._handleCaptchRefresh=n.Global.after("refreshCaptchaFromState",function(e){var t=e.captchaConfig;var a=this.get("contentBox");var i=a.one("div.captcha-container-wrapper");if(i){var s=i.one(".captcha-container");if(s){o.destroy(s.getDOMNode());s.remove()}if(t.captchaEnabled){i.append(this._createCaptchaContainer(t));this.renderCaptcha()}}},this)},_createCaptchaContainer:function(e,t){var a=n.Node.create('<div class="captcha-container"/>');a.toggleClass("align-center",e.captchaAlignment===l.CENTER);a.toggleClass("align-right",e.captchaAlignment===l.RIGHT);a.setAttribute("data-theme",e.captchaTheme===c.LIGHT?"light":"dark");return a},renderCaptcha:function(){if(!s.isFeatureEnabled(i.NEWSLETTER_BLOCK_CAPTCHA))return;var e=this.get("contentBox");if(!e)return;var t=e.one(".captcha-container");var a=t&&t.getDOMNode();if(!a)return;o.render(n.config.win,a)},destructor:function(){this._handleCaptchRefresh&&this._handleCaptchRefresh.detach()},refreshFromSliceContent:function(e){var t=this.get("contentBox");var a=t.one("form.newsletter-form");var i=e.get("emailPlaceholder")||d("Email Address");this._getEmailField(a).getDOMNode().setAttribute("placeholder",i);var s=e.get("submitButtonText")||"";this._getSubmitButton(a).set("innerHTML",s);var n=t.one(".form-submission-text");var r=e.get("submissionMessage")||{html:""};n.set("innerHTML",r.html);var o=t.one(".form-submission-html");var l=e.get("submissionHTML");o.set("innerHTML",l);var c=t.one(".form-disclaimer-text");var u=e.get("disclaimerMessage");c.set("innerHTML",u.html)}},{SLICE_TYPE:n.Squarespace.SliceType.NEWSLETTER,CSS_PREFIX:"sqs-slice-newsletter"})},"1.0",{requires:["base","squarespace-enum","squarespace-form-submit","squarespace-slide-rendering-slices-base","squarespace-slide-rendering-slices-client-refresh"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/slices/password.js":function(e,t,a){var n=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-slide-rendering-slices-password",function(s){s.namespace("Squarespace.SlideRendering.Slices");var i=s.Squarespace.SlideRendering.Slices.Password=s.Base.create("Password",s.Squarespace.SlideRendering.Slices.Base,[],{renderUI:function(){s.UA.ios&&s.UA.safari||this.get("contentBox").one('input[type="password"]').focus()},bindUI:function(){i.superclass.bindUI.call(this);var e=this.get("contentBox");var t=e.one('input[type="password"]');var a=e.one(".password-form");t.after("valuechange",function(){this._hideErrorMessage()},this);a.on("submit",function(e){e.preventDefault();this._hideErrorMessage();this._authenticate()},this)},_authenticate:function(){if(s.Squarespace.Utils.isInDamaskFrame()){this._showErrorMessage(n("Log out to test."));return}var e=this.get("contentBox").one('input[type="password"]');var t=s.one("body").get("id");var a=s.Squarespace.API_ROOT+"auth/visitor";var i={password:e.get("value")};if(-1!==t.indexOf("collection-")){a+="/collection";i.collectionId=t.split("collection-")[1]}else a+="/site";s.Data.post({headers:{"Content-Type":"application/json"},url:a,data:s.JSON.stringify(i),success:function(){window.location.reload(true)},failure:function(){this._showErrorMessage(n("Please try again."));this.get("contentBox").one('input[type="password"]').focus()}},this)},_showErrorMessage:function(e){var t=this.get("contentBox");t.one(".error-message").setHTML(e);t.addClass("show-error")},_hideErrorMessage:function(){this.get("contentBox").removeClass("show-error")}},{SLICE_TYPE:s.Squarespace.SliceType.PASSWORD,CSS_PREFIX:"sqs-slice-password"})},"1.0",{requires:["base","squarespace-enum","squarespace-slide-rendering-slices-base","squarespace-util"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/slices/rgb.js":function(e,t,a){var i=a("./common/temp/node_modules/@sqs/utils/color/parseColor.js");YUI.add("squarespace-slide-rendering-slices-rgb",function(a){a.namespace("Squarespace.SlideRendering.Slices");a.Squarespace.SlideRendering.Slices.RGB=a.Base.create("RGB",a.Base,[],{getBrightness:function(){var e=this.get("color");return.2126*e.r+.7152*e.g+.0722*e.b},add:function(e){var t=this.get("color");var a=e.get("color");t.r+=a.r;t.g+=a.g;t.b+=a.b},darken:function(e){this.divide((100+e)/100)},divide:function(e){var t=this.get("color");t.r/=e;t.g/=e;t.b/=e;this._validate()},toString:function(){var e=this.get("color");return"rgb("+e.r+","+e.g+","+e.b+")"},_validate:function(){var t=this.get("color");a.Object.keys(t).forEach(function(e){t[e]=Math.round(Math.min(Math.max(0,t[e]),255))})},_fromHex:function(e){var t=i(e,"rgb");return{r:t.red,g:t.green,b:t.blue}}},{ATTRS:{color:{value:{r:0,g:0,b:0},setter:function(e){if(a.Lang.isString(e)){"#"!==e[0]&&(e="#"+e);e=this._fromHex(e)}return e}}}})},"1.0",{requires:["base"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/slices/social-icons.js":function(e,t){YUI.add("squarespace-slide-rendering-slices-social-icons",function(e){e.namespace("Squarespace.SlideRendering.Slices");e.Squarespace.SlideRendering.Slices.SocialIcons=e.Base.create("SocialIcons",e.Squarespace.SlideRendering.Slices.Base,[],{},{SLICE_TYPE:e.Squarespace.SliceType.SOCIAL_ICONS,CSS_PREFIX:"sqs-slice-social-icons"})},"1.0",{requires:["base","squarespace-enum","squarespace-slide-rendering-slices-base"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/slices/sub-heading.js":function(e,t){YUI.add("squarespace-slide-rendering-slices-sub-heading",function(e){e.namespace("Squarespace.SlideRendering.Slices");e.Squarespace.SlideRendering.Slices.SubHeading=e.Base.create("SubHeading",e.Squarespace.SlideRendering.Slices.Base,[e.Squarespace.SlideRendering.Slices.ClientRefresh],{refreshFromSliceContent:function(e){this.get("contentBox").one("h2").setHTML(e.get("text"))}},{SLICE_TYPE:e.Squarespace.SliceType.SUB_HEADING,CSS_PREFIX:"sqs-slice-sub-heading"})},"1.0",{requires:["base","squarespace-enum","squarespace-slide-rendering-slices-base","squarespace-slide-rendering-slices-client-refresh"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/slices/twitter.js":function(e,t,a){var s=a("./common/temp/node_modules/@sqs/site-rendering/TweetGallery/index.js");YUI.add("squarespace-slide-rendering-slices-twitter",function(i){i.namespace("Squarespace.SlideRendering.Slices");i.Squarespace.SlideRendering.Slices.Twitter=i.Base.create("Twitter",i.Squarespace.SlideRendering.Slices.Base,[],{initializer:function(){var e=this.get("boundingBox");var t=e.all(".sqs-tweet");if(t.size()>0){t.each(function(e){e.all(".tweet-body a").each(function(e){e.setAttribute("target","_blank")})});var a=e.one(".sqs-tweets-container").getDOMNode();this._tweetGallery=new s(a,"sqs-tweet",i.config.win)}},destructor:function(){this._tweetGallery&&this._tweetGallery.destroy()}},{SLICE_TYPE:i.Squarespace.SliceType.TWITTER,CSS_PREFIX:"sqs-slice-twitter",ATTRS:{}})},"1.0",{requires:["base","squarespace-enum","squarespace-slide-rendering-slices-base","squarespace-util"]})},"./src/main/webapp/universal/scripts-v6/slide-rendering/slices/video.js":function(e,t){YUI.add("squarespace-slide-rendering-slices-video",function(u){u.namespace("Squarespace.SlideRendering.Slices");var e=u.Squarespace.SlideRendering.Slices.Video=u.Base.create("Video",u.Squarespace.SlideRendering.Slices.Base,[u.Squarespace.SlideRendering.Slices.ClientRefresh],{destructor:function(){if(this._lightbox){this._lightbox.destroy();delete this._lightbox}},bindUI:function(){e.superclass.bindUI.call(this);this.get("contentBox").one(".sqs-slice-play-button").on("click",function(){this._openVideo();this._lightbox._overlay.once("hide",function(e){u.Global.fire("lightbox-hidden")},this)},this)},refreshFromSliceContent:function(e){var t=e.get("contentItem");var a=t.get("structuredContent");var i=a.get("oembed");var s=this.get("contentBox").one(".sqs-video-wrapper");u.Lang.isValue(s)&&s.remove(true);if(u.Lang.isValue(i)&&u.Lang.isValue(i.html)&&""!==i.html){var n=i.html;var r=i.providerName||"";var o=this.get("contentBox");var l=o.one(".sqs-slice-play-button");var c=u.Squarespace.Escaping.escapeForHtmlTag(n);o.insertBefore('<div class="sqs-video-wrapper" data-load="false" data-html="'+c+'" data-providerName="'+r+'" ></div>',l)}},_openVideo:function(){var e=this.get("contentBox").one(".sqs-video-wrapper");if(!u.Lang.isValue(e))return;if(this._lightbox){this._lightbox.destroy();delete this._lightbox}this._lightbox=new u.Squarespace.Lightbox2({controls:{previous:false,next:false},set:[{content:e}],currentSetIndex:0,videoLoaderOptions:{forceAutoplay:true}});this._lightbox.render()}},{SLICE_TYPE:u.Squarespace.SliceType.VIDEO,CSS_PREFIX:"sqs-slice-video"})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-escaping-utils","squarespace-modal-lightbox","squarespace-slide-rendering-slices-base","squarespace-slide-rendering-slices-client-refresh","squarespace-video-loader"]})},"./src/main/webapp/universal/scripts-v6/slides.js":function(e,t,a){a("./common/temp/node_modules/focus-visible/dist/focus-visible.js");YUI.add("squarespace-slides",function(a){a.config.win.Squarespace.onInitialize(a,function(){var e=a.one(".sqs-slide-container .sqs-slide");var t=e.getAttribute("data-slide-layout-id");a.Squarespace.SlideRendering.Layouts.Factory.create(t,{boundingBox:e,render:true})})},"1.0",{requires:["squarespace-slide-rendering-layouts-factory"]})},"./src/main/webapp/universal/scripts-v6/social-authenticator.js":function(e,t,a){var s=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var r=a("./src/main/webapp/universal/src/shared/utils/ExternalAuthentication.js");var o=a("./src/main/webapp/frontend/packages/enums/ExternalServiceProvidersOnlyOneAllowed.js");var i=a("./src/main/webapp/universal/src/shared/constants/HelpLinks.js");var l=a("./src/main/webapp/frontend/packages/enums/ExternalServiceProviders.js");var c=a("./src/main/webapp/universal/src/apps/App/shared/actions/ConnectedAccountsActions.js");var n="https://www.chownow.com/lp/squarespace?utm_source=squarespace&utm_medium=squarespace_UI&utm_campaign=squarespace_referral";var u={};u[l.APPLEPODCAST]={name:s("Apple Podcasts"),description:""};u[l.BANDSINTOWN]={name:s("Bandsintown"),description:""};u[l.BEHANCE]={name:s("Behance"),description:""};u[l.CODEPEN]={name:s("CodePen"),description:""};u[l.MEDIUM]={name:s("Medium"),description:""};u[l.MEETUP]={name:s("Meetup"),description:""};u[l.RDIO]={name:s("Rdio"),description:""};u[l.TWITCH]={name:s("Twitch"),description:""};u[l.VEVO]={name:s("Vevo"),description:""};u[l.VINE]={name:s("Vine"),description:""};u[l.VSCO]={name:s("VSCO"),description:""};u[l.YELP]={name:s("Yelp"),description:""};u[l.HOUZZ]={name:s("Houzz"),description:""};u[l.REDDIT]={name:s("Reddit"),description:""};u[l.STUMBLEUPON]={name:s("StumbleUpon"),description:""};u[l.IMDB]={name:s("IMDb"),description:""};u[l.GOODREADS]={name:s("Goodreads"),description:""};u[l.STITCHER]={name:s("Stitcher"),description:""};u[l.THEDOTS]={name:s("The Dots"),description:""};u[l.TRIPADVISOR]={name:s("TripAdvisor"),description:""};u[l.TIDAL]={name:s("TIDAL"),description:""};u[l.DRIBBBLE]={name:s("Connect to Dribbble"),accountName:s("Dribbble Username"),description:s("Enter your Dribbble account username to connect it to your Squarespace site. <strong>Please be sure this information is correct.</strong>")};u[l.SNAPCHAT]={name:s("Connect to Snapchat"),accountName:s("Snapchat Username"),description:s("Enter your Snapchat account username to connect it to your Squarespace site. <strong>Please be sure this information is correct.</strong>")};u[l.PINTEREST]={name:s("Connect to Pinterest"),accountName:s("Pinterest Username"),description:s("Enter your Pinterest account username to connect it to your Squarespace site. <strong>Please be sure this information is correct.</strong>")};u[l.SMUGMUG]={name:s("Connect to SmugMug"),accountName:s("SmugMug Nickname"),description:s("Enter your SmugMug account nickname to connect it to your Squarespace site. <strong>Please be sure this information is correct.</strong>")};u[l.CHOWNOW]={name:s("Connect to ChowNow"),accountName:s("ChowNow Company ID"),description:s('Enter your ChowNow Company ID to connect it to Squarespace and accept orders online. If you don’t have a ChowNow account yet, <a href="{chowNowSignupLink}" target="_blank">sign up here</a>. <a href="{chowNowHelpLink}" target="_blank">Learn more</a>',{chowNowSignupLink:n,chowNowHelpLink:i.CHOWNOW})};u[l.EMAIL]={name:s("Add Email"),accountName:s("Email Address"),description:s("Enter your Email Address to add it to your Squarespace site. <strong>Please be sure this information is correct.</strong>")};u[l.ITUNES]={name:s("iTunes Store"),description:s('Enter a URL to create an icon that links to the iTunes Store, App Store, iBooks Store, or Mac App Store. Find iTunes URLs with <a href="https://linkmaker.itunes.apple.com" target="_blank">Apple\'s Link Maker tool</a>.')};u[l.GOOGLEPLAY]={name:s("Google Play"),description:s('Copy and paste a URL from <a href="http://play.google.com" target="_blank">play.google.com</a> to create an icon that links to Google Play music, apps, books, magazines, movies, or TV shows. ')};YUI.add("squarespace-social-authenticator",function(n){var t=function(e){return{loadingText:s("Loading…"),style:"flyout",width:600,overlay:.5,flyoutPointerDirection:"centered",closeOthers:false,tabs:[{title:e.name,icon:"/universal/images-v6/icons/icon-plus-16-light.png",fields:[{ctor:n.Squarespace.DialogFields.Description,config:{text:e.description,padding:[10,10]}},{ctor:n.Squarespace.DialogFields.Text,config:{"strings.title":e.accountName,name:"username",submitOnEnter:true,required:true}}]}],buttons:[{type:"cancel",title:s("Cancel")},{type:"saveAndClose",title:e.name}]}};var a=function(e){var t=[];e.description&&e.description.length>0&&t.push({ctor:n.Squarespace.DialogFields.Description,config:{text:e.description,padding:[10,10]}});t.push({ctor:n.Squarespace.DialogFields.Text,config:{name:"profileUrl","strings.title":s("{serviceName} URL",{serviceName:e.name}),"strings.placeholder":s("http://"),submitOnEnter:true,required:true}});t.push({ctor:n.Squarespace.DialogFields.Text,config:{"strings.title":s("Label"),data:e.name,name:"username",required:true}});return{loadingText:s("Loading…"),style:"flyout",width:600,overlay:.5,flyoutPointerDirection:"centered",closeOthers:false,title:s("Create {serviceName} Link",{serviceName:e.name}),icon:"/universal/images-v6/icons/icon-plus-16-light.png",fields:t,buttons:[{type:"cancel",title:s("Cancel")},{type:"saveAndClose",title:s("Add")}]}};var i=t(u[l.SMUGMUG]);n.Squarespace.SocialAuthenticator=n.Base.create("socialAuthenticator",n.Base,[],{initializer:function(){this.publish("account-added");this.publish("oauth-completed")},destructor:function(){if(this._connectedAccountEditor){this._connectedAccountEditor.destroy();this._connectedAccountEditor=null}},addAccount:function(){var t=new n.Squarespace.EditingDialog(this.accountPickerDialogConfig());t.show();var e=t.getField("caption-position");e.set("optionClickCb",function(e){t.cancel();this.addNewAccountDialog(e)}.bind(this))},addNewAccountDialog:function(e){switch(e){case"smugmug":var t=new n.Squarespace.EditingDialog(i);t.once("send-requested",function(){this._startOAuth(e,null,{nickname:t.getData().username});t.cancel()},this);t.show();break;case"twitter":case"instagram":this._startOAuth(e,null,{startSubscription:true});break;case"dribbble":case"email":case"itunes":case"googleplay":case"bandsintown":case"behance":case"codepen":case"medium":case"meetup":case"rdio":case"twitch":case"vevo":case"vine":case"vsco":case"yelp":case"houzz":case"reddit":case"stumbleupon":case"chownow":case"snapchat":case"imdb":case"goodreads":case"stitcher":case"tidal":case"applepodcast":case"thedots":case"tripadvisor":this._createNonOAuthAccount(e);break;default:this._startOAuth(e)}},_getDialogConfigForService:function(e){switch(e){case l.DRIBBBLE:case l.SNAPCHAT:case l.PINTEREST:case l.EMAIL:case l.CHOWNOW:return t(u[e]);case l.APPLEPODCAST:case l.BANDSINTOWN:case l.BEHANCE:case l.CODEPEN:case l.GOODREADS:case l.GOOGLEPLAY:case l.HOUZZ:case l.IMDB:case l.ITUNES:case l.MEDIUM:case l.MEETUP:case l.RDIO:case l.REDDIT:case l.STITCHER:case l.STUMBLEUPON:case l.THEDOTS:case l.TIDAL:case l.TRIPADVISOR:case l.TWITCH:case l.VEVO:case l.VINE:case l.VSCO:case l.YELP:return a(u[e])}return null},_createNonOAuthAccount:function(t){var e=l[t.toUpperCase()];if(this._isOnlyOneOfTypeAllowed(e)){var a=this._getExistingAccount(e);if(a){this._showEditorForExistingAccount(a);return}}var i=new n.Squarespace.EditingDialog(this._getDialogConfigForService(e));var s=function(){c.createNonOAuthAccount(e,t,i.getData()).then(function(e){i.close();this._refreshConnectedAccounts(e.account);n.Squarespace.Analytics.trackInternal("engagement_connected_account_add",{serviceName:t})}.bind(this))};i.once("send-requested",s,this);i.show()},_isOnlyOneOfTypeAllowed:function(e){for(var t in o)if(o[t]===e)return true;return false},_getExistingAccount:function(t){var e=n.Squarespace.Models.ConnectedAccounts.loadFromStore().toArray();return n.Array.find(e,function(e){return e.get("serviceId")===t})},_showEditorForExistingAccount:function(e){this._connectedAccountEditor=new n.Squarespace.Widgets.ConnectedAccount({model:e});this._connectedAccountEditor.showEditor()},_startOAuth:function(t,e,a){a=a||{};e&&(a.existingAccountId=e);r.authenticate({serviceProvider:t,urlParams:{authenticationType:"website"},customParameters:a}).then(function(e){var t=e.socialConfig;if(!t)return;this.fire("oauth-completed");this._refreshConnectedAccounts(t)}.bind(this)).catch(function(e){return r.logException(e,t)})},reauthenticate:function(t,e){r.authenticate({serviceProvider:t,urlParams:{authenticationType:"website"},customParameters:e?{existingAccountId:e}:null}).then(function(){this.fire("oauth-completed")}.bind(this)).catch(function(e){return r.logException(e,t)})},_refreshConnectedAccounts:function(a){c.refreshConnectedAccounts().then(function(){if(!a)return;var e=n.Squarespace.Models.ConnectedAccounts.loadFromStore().toArray();var t=n.Array.find(e,function(e){return e.get("id")===a.externalAuthenticationId||e.get("id")===a.id});this.fire("account-added",{account:t})}.bind(this))},accountPickerDialogConfig:function(){var e=n.Array.map(this.get("accounts"),function(e){return{value:e,title:n.Squarespace.ConnectedAccountConfigs[e].displayName,icon:n.Squarespace.ConnectedAccountConfigs[e].icon}},this);return{loadingText:s("Loading…"),style:"flyout",width:700,overlay:.5,closeOthers:false,flyoutPointerDirection:"centered",verticalHeight:"fit",primaryTabs:[{title:s("Add Account"),icon:"/universal/images-v6/icons/icon-plus-16-light.png",fields:[{ctor:n.Squarespace.DialogFields.MultiOption,config:{name:"caption-position",hideDisabled:true,defaultValue:"normal",className:"round square button icon32",iconDropPx:32,columns:6,options:e}}]}]}}},{ATTRS:{accountTypes:{value:[]},accounts:{value:["facebook","twitter","tumblr","dropbox2017","foursquare","instagram","flickr","youtube","vimeo","linkedin","dribbble","pinterest","smugmug","fivehundredpix","email","github","soundcloud","spotify","itunes","googleplay","bandsintown","behance","codepen","medium","meetup","rdio","twitch","vevo","vine","vsco","yelp","houzz","reddit","stumbleupon","chownow","snapchat","imdb","goodreads","stitcher","tidal"],validator:function(e){if(!n.Lang.isArray(e))return false;var t=n.Array.find(e,function(e){return!n.Object.hasKey(n.Squarespace.ConnectedAccountConfigs,e)});return null===t}}}})},"1.0",{requires:["array-extras","base","squarespace-connected-account-configs","squarespace-dialog","squarespace-dialog-description","squarespace-dialog-multi-option","squarespace-dialog-text","squarespace-models-connected-accounts"]})},"./src/main/webapp/universal/scripts-v6/social-button.js":function(e,t,a){var s=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var u=a("./src/main/webapp/universal/src/shared/i18n/resolvedLocales.ts");var n=a("./src/main/webapp/frontend/packages/enums/SocialServices.js");var r=a("./common/temp/node_modules/lodash/invert.js");YUI.add("squarespace-social-button",function(b){b.namespace("Squarespace");var o=n;var l=400;var e=function(e){return e};var c=b.Squarespace.SocialButton=b.Base.create("socialButton",b.Widget,[],{initializer:function(e){this._servicesRendered={};e.services.forEach(function(e){this._servicesRendered[e]=false},this);this._open=false;this._anims={};this._serviceRenderers={};this._serviceRenderers[o.REDDIT]=this._renderReddit;this._serviceRenderers[o.FACEBOOK]=this._renderFacebook;this._serviceRenderers[o.TWITTER]=this._renderTwitter;this._serviceRenderers[o.LINKEDIN]=this._renderLinkedIn;this._serviceRenderers[o.STUMBLE]=this._renderStumble;this._serviceRenderers[o.PINTEREST]=this._renderPinterest;this._serviceRenderers[o.TUMBLR]=this._renderTumblr;this.publish("serviceRendered",{defaultFn:this._defaultServiceRendered,context:this});this.publish("buttonClicked",{defaultFn:this._defaultButtonClicked,preventable:true,context:this});this.publish("close",{defaultFn:this.close,preventable:true,context:this});this.publish("servicesRendered");this._serviceContainer=b.Node.create('<div class="ss-social-button-container"></div>')},_defaultServiceRendered:function(e){var t=e.details[0];this._servicesRendered[t]=true;if(this._allServicesRendered()){this.set("loaded",true);this.fire("servicesRendered",this)}},open:function(){this._open=true;this._openList()},close:function(){this._open=false;this._closeList()},_onClick:function(e){this.fire("buttonClicked",e)},_defaultButtonClicked:function(e){if(this.get("loaded"))this.isOpen()?this.close():this.open();else if(!this.get("loading")){this.once("servicesRendered",function(){this.set("loading",false)},this);this.set("loading",true);this._renderServices();this.open()}},isOpen:function(){return this._open},destructor:function(){this._stopAnimations()},_stopAnimations:function(){b.Object.values(this._anims).forEach(function(e){e.stop();e=null})},_closeList:function(){var e=this.get("contentBox");if(e._node&&e.inDoc()){var t=e.one(".ss-social-list-wrapper"),a;if(t&&t._node&&t.inDoc()){a=new b.Anim({node:t,duration:.3,easing:b.Easing.easeOutStrong,to:{height:0,opacity:0}});this._anims.close=a;a.on("end",function(){t.setStyle("overflow",null);this.fire("listClose")},this);a.run()}}},_openList:function(){var e=this.get("contentBox");if(e._node&&e.inDoc()){var t=e.one(".ss-social-button-wrapper"),a=e.one(".ss-social-list-wrapper"),i=e.one(".ss-social-button-list"),s=t.get("offsetWidth"),n=t.get("offsetHeight"),r=a.get("offsetWidth"),o=Math.abs(s-r),l,c;a.setStyles({left:(s<=r?-1:1)*o/2,top:n});var u=b.DOM.viewportRegion();var d=i.get("region");var p=d.height+d.top;var h=p-(u.height+u.top);var g=u.left-d.left;var m=g>0;var f=20;var v=20;h>0&&a.setStyle("top",parseInt(a.getComputedStyle("top"),10)-h-f);m&&a.setStyle("left",parseInt(a.getComputedStyle("left"),10)+g+v);if(a&&a._node&&a.inDoc()){c=new b.Anim({node:a,duration:.3,easing:b.Easing.easeOutStrong,to:{height:i.get("offsetHeight"),opacity:1}});this._anims.open=c;c.on("end",function(){a.setStyle("overflow","visible");var t=b.config.win.document;b.UA.touchEnabled&&b.one(t.documentElement).setStyle("cursor","pointer");l=b.one(t).on("click",function(e){if(!e.target.ancestor(".ss-social-list-wrapper",true)){this.fire("close");l.detach();l=null;b.one(t.documentElement).setStyle("cursor","")}},this);this.fire("listOpen")},this);c.run()}}},_allServicesRendered:function(){return b.Object.values(this._servicesRendered).every(e)},bindUI:function(){var e=this.get("contentBox"),t=e.one(".ss-social-button-wrapper");this.after("loadingChange",this._onLoadingChange,this);t.on("click",this._onClick,this)},_onLoadingChange:function(){this.get("boundingBox").ancestor(".squarespace-social-buttons").toggleClass("loading",this.get("loading"))},renderUI:function(){var e=this.get("contentBox");e.append('<div class="ss-social-button-wrapper"><div class="ss-social-button"><span class="ss-social-button-icon"></span>'+s("Share")+"</div></div>");e.append('<div class="ss-social-list-wrapper"><div class="ss-social-button-list"></div></div>')},_renderServices:function(){var t=this.get("contentBox").one(".ss-social-button-list");this.get("services").forEach(function(e){e in this._serviceRenderers&&this._serviceRenderers[e].call(this,t)},this)},_defaultTimeoutCb:function(e,t){var a=r(n),i=s("(Social Button) Loading render script for service: {name} too longer than {sub1} seconds. Skipping.",{sub1:c.SCRIPT_TIMEOUT/1e3});return function(){false;this.fire("serviceRendered",e);t&&t.hide()}},_defaultFailureCb:function(e,t){var a=r(n),i=s("(Social Button) Service {name} render script failed to load.");return function(){false;this.fire("serviceRendered",e);t&&t.hide()}},_renderReddit:function(e){var t=this._serviceContainer.cloneNode(true),a=this.get("url");t.addClass("reddit");t.append(b.Node.create(c.REDDIT_LINK));t.on("click",function(e){window.open("http://reddit.com/submit?url="+encodeURIComponent(a),s("Submit to Reddit"));e.stopImmediatePropagation()});e.append(t);this.fire("serviceRendered",o.REDDIT)},_renderTumblr:function(e){var t=this._serviceContainer.cloneNode(true);var a={url:this.get("url"),name:this.get("title")};var i=b.QueryString.stringify(a);t.addClass("tumblr");t.append(b.substitute(c.TUMBLR_TAG_TEMPLATE,{query:i}));e.append(t);b.Get.script(c.TUMBLR_URL,{onSuccess:function(){b.later(l,this,function e(){this.fire("serviceRendered",o.TUMBLR)})},onFailure:this._defaultFailureCb(o.TUMBLR,t),onTimeout:this._defaultTimeoutCb(o.TUMBLR,t),timeout:c.SCRIPT_TIMEOUT,context:this,win:b.config.win})},_renderFacebook:function(e){var t=this._serviceContainer.cloneNode(true);var a=this.get("url");t.addClass("facebook");t.append(b.Node.create(b.substitute(c.FACEBOOK_TAG_TEMPLATE,{url:a})));e.append(t);var i=b.config.win;var s=i.Static.SQUARESPACE_CONTEXT.facebookAppId;var n=i.Static.SQUARESPACE_CONTEXT.facebookApiVersion;var r=b.substitute(c.FACEBOOK_URL,{locale:u.formatLocaleForFacebook(u.getResolvedWebsiteLocale())});b.Get.script(r,{onSuccess:function(){i.FB&&b.later(l,this,function e(){i.FB.init({appId:s,xfbml:false,version:n});i.FB.XFBML&&i.FB.XFBML.parse&&i.FB.XFBML.parse();this.fire("serviceRendered",o.FACEBOOK)})},onFailure:this._defaultFailureCb(o.FACEBOOK,t),onTimeout:this._defaultTimeoutCb(o.FACEBOOK,t),timeout:c.SCRIPT_TIMEOUT,context:this})},_renderTwitter:function(e){var t=this._serviceContainer.cloneNode(true),a=this.get("title"),i=this.get("url");t.append(b.Node.create('<a href="https://twitter.com/share" data-text="'+b.Escape.html(a||"")+'" data-url="'+b.Escape.html(i)+'"class="twitter-share-button">'+s("tweet")+"</a>"));t.addClass("twitter");e.append(t);b.Get.script(c.TWITTER_URL,{onSuccess:function(){b.later(l,this,function e(){this.fire("serviceRendered",o.TWITTER)})},onFailure:this._defaultFailureCb(o.TWITTER,t),onTimeout:this._defaultTimeoutCb(o.TWITTER,t),timeout:c.SCRIPT_TIMEOUT,context:this})},_renderLinkedIn:function(e){var t=this._serviceContainer.cloneNode(true),a=this.get("url");t.addClass("linkedin");t.append(b.Node.create(b.substitute(c.LINKEDIN_URL_TEMPLATE,{url:a})));e.append(t);window.IN=void 0;b.Get.script(c.LINKEDIN_URL,{onSuccess:function(){b.later(l,this,function e(){this.fire("serviceRendered",o.LINKEDIN)})},onFailure:this._defaultFailureCb(o.LINKEDIN,t),onTimeout:this._defaultTimeoutCb(o.LINKEDIN,t),timeout:c.SCRIPT_TIMEOUT,context:this})},_renderStumble:function(e){var t=this._serviceContainer.cloneNode(true),a=this.get("url"),i=this.get("id");t.addClass("stumble");t.append(b.Node.create(b.substitute(c.STUMBLE_TAG_TEMPLATE,{url:a,id:i})));e.append(t);b.Get.script(c.STUMBLE_URL,{onSuccess:function(){b.later(l,this,function e(){if(window.STMBLPN){window.STMBLPN.wasProcessLoaded&&(window.STMBLPN.wasProcessLoaded=false);window.STMBLPN.processWidgets()}this.fire("serviceRendered",n.STUMBLE)})},onFailure:this._defaultFailureCb(o.STUMBLE,t),onTimeout:this._defaultTimeoutCb(o.STUMBLE,t),timeout:c.SCRIPT_TIMEOUT,context:this})},_renderPinterest:function(e){var t=this._serviceContainer.cloneNode(true),a=this.get("assetUrl"),i=this.get("url"),s=Static.SQUARESPACE_CONTEXT.website.authenticUrl+e.ancestor(".squarespace-social-buttons").getAttribute("data-full-url");if(this.get("systemDataId")){t.addClass("pinterest");t.append(b.Node.create(b.substitute(c.PINTEREST_TAG_TEMPLATE,{url:encodeURIComponent(a||i),pageUrl:encodeURIComponent(s)})));e.append(t);b.Get.script(c.PINTEREST_URL,{onSuccess:function(){b.later(l,this,function e(){this.fire("serviceRendered",n.PINTEREST)},this)},onFailure:this._defaultFailureCb(o.PINTEREST,t),onTimeout:this._defaultTimeoutCb(o.PINTEREST,t),timeout:c.SCRIPT_TIMEOUT,context:this})}else this.fire("serviceRendered",o.PINTEREST)}},{TWITTER_URL:"//platform.twitter.com/widgets.js",TUMBLR_URL:"//platform.tumblr.com/v1/share.js",FACEBOOK_URL:"//connect.facebook.net/{locale}/sdk.js",LINKEDIN_URL:"//platform.linkedin.com/in.js",STUMBLE_URL:"http://platform.stumbleupon.com/1/widgets.js",PINTEREST_URL:"//assets.pinterest.com/js/pinit.js",LINKEDIN_URL_TEMPLATE:'<script type="IN/Share" data-url="{url}" data-counter="right"><\/script>',FACEBOOK_TAG_TEMPLATE:'<div id="fb-root"></div><fb:like href="{url}" send="false" layout="button_count" show_faces="true"></fb:like>',PINTEREST_TAG_TEMPLATE:'<a href="//pinterest.com/pin/create/button?url={pageUrl}&media={url}" class="pin-it-button" count-layout="horizontal"><img border="0" src="//assets.pinterest.com/images/PinExt.png" title="'+s("Pin It")+'" /></a>',TUMBLR_TAG_TEMPLATE:'<a href="https://tumblr.com/share/link?{query}" title="'+s("Share on Tumblr")+'" style="display:inline-block; text-indent:-9999px; overflow:hidden; width:81px; height:20px; background:url(\'https://platform.tumblr.com/v1/share_1T.png\') top left no-repeat transparent;">'+s("Share on Tumblr")+"</a>",SCRIPT_TIMEOUT:5e3,STUMBLE_TAG_TEMPLATE:'<su:badge layout="1" location="{url}"></su:badge>',REDDIT_LINK:'<a href="#"><img src="https://old.reddit.com/static/spreddit7.gif" alt="'+s("submit to reddit")+'" border="0" /></a>',ATTRS:{url:{value:window.location.href},title:{value:document.title||window.location.href},services:{},recordType:{},assetUrl:{value:""},systemDataId:{value:""},loaded:{value:false},loading:{value:false}}})},"1.0",{requires:["anim","base","escape","node","querystring-stringify","squarespace-util","substitute","widget"]})},"./src/main/webapp/universal/scripts-v6/social-buttons.js":function(e,t,a){var i=a("./src/main/webapp/frontend/packages/enums/SocialServices.js");var s=a("./src/main/webapp/frontend/packages/enums/RecordType.js");YUI.add("squarespace-social-buttons",function(l){l.namespace("Squarespace");var c=l.config.win.Static;var t=l.Squarespace.SocialButton;var u=l.Squarespace.SocialButtons=l.Base.create("socialButtons",l.Base,[],{initializer:function(e){var t=this.get("services");this._buttonConfigs={};this._buttons=[];this._eventHandles=[];if(t.length>0){this._scanForButtons();this._initializeButtons();this._bindEvents();this._renderButtons()}else this._markButtonsAsEmpty()},_markButtonsAsEmpty:function(){l.all(u.SOCIAL_BUTTON_CONTAINER).addClass("empty")},_scanForButtons:function(){var e=l.all(u.SOCIAL_BUTTON_CONTAINER),o=this.get("services");e.each(function(e){var t=e.getAttribute(u.TITLE),a=c.SQUARESPACE_CONTEXT.website.baseUrl+e.getAttribute(u.FULL_URL),i=parseInt(e.getAttribute(u.RECORD_TYPE),10),s=e.getAttribute(u.ASSET_URL),n=e.getAttribute(u.SYSTEM_DATA_ID),r=l.guid(u.ID_PREFIX);this._buttonConfigs[r]={id:r,title:t,url:a,recordType:i,assetUrl:s,systemDataId:n,services:o,node:e}},this)},_initializeButtons:function(){this._buttons=l.Array.map(l.Object.values(this._buttonConfigs),function(e){return new t(e)})},_bindEvents:function(){this._eventHandles.push(this.after("cleanup",this._defaultDestroy,this))},_renderButtons:function(){this._buttons.filter(this._excludeOnlyPinterest,this).forEach(function(e){var t=e.get("id");e.render(this._buttonConfigs[t].node)},this)},destructor:function(){this.fire("cleanup")},_unbindEvents:function(){this._eventHandles.forEach(function(e){e.detach();e=null})},_defaultDestroy:function(){this._destroyButtons();this._unbindEvents();this.fire("destroyed")},_destroyButtons:function(){this._buttons.forEach(function(e){e.destroy()},this)},_excludeOnlyPinterest:function(e){var t=e.get("recordType");if(t!==s.IMAGE&&this._onlyServiceIsPinterest(e))return false;return true},_onlyServiceIsPinterest:function(e){var t=e.get("services");return 1===t.length&&t[0]===i.PINTEREST}},{FULL_URL:"data-full-url",ASSET_URL:"data-asset-url",SYSTEM_DATA_ID:"data-system-data-id",RECORD_TYPE:"data-record-type",ID_PREFIX:"social-",TITLE:"data-title",SOCIAL_BUTTON_CONTAINER:".squarespace-social-buttons",ATTRS:{services:{valueFn:function(){return l.Array.map(l.Object.keys(c.SQUARESPACE_CONTEXT.website.shareButtonOptions||{}),function(e){return parseInt(e,10)})}}}});var e=[];l.config.win.Squarespace.onInitialize(l,function(){l.all(".squarespace-social-buttons").isEmpty()||e.push(new l.Squarespace.SocialButtons)});l.config.win.Squarespace.onDestroy(l,function(){e.forEach(function(e){e.destroy()});e.length=0})},"1.0",{requires:["array-extras","base","node","squarespace-social-button"]})},"./src/main/webapp/universal/scripts-v6/spinner.js":function(e,t){YUI.add("squarespace-spinner",function(t){t.namespace("Squarespace").Spinner=t.Base.create("Spinner",t.Widget,[],{renderUI:function(){this.get("boundingBox").addClass(this.get("color"));var e=this.get("size");t.Lang.isNumber(e)||this.get("boundingBox").addClass(e)},spin:function(){this.get("boundingBox").show()},stop:function(){this.get("boundingBox").hide()},addClass:function(e){this.get("boundingBox").addClass(e)}},{CSS_PREFIX:"sqs-spin",NS:"spinner",ATTRS:{size:{value:"default",setter:function(e){if(t.Lang.isNumber(e)){this.set("width",e);this.set("height",e)}return e}},color:{value:"light"}}})},"1.0",{requires:["base","widget"]})},"./src/main/webapp/universal/scripts-v6/ss-badge.js":function(e,t,a){var n=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var r=a("./src/main/webapp/frontend/packages/enums/SSBadgeDevices.js");var l=a("./src/main/webapp/frontend/packages/enums/SSBadgePosition.js");var c=a("./src/main/webapp/frontend/packages/enums/SSBadgeType.js");var u=a("./common/temp/node_modules/lodash/debounce.js");YUI.add("squarespace-ss-badge",function(o){var t={};t[c.BLACK]="black";t[c.WHITE]="white";var a={};a[l.TOP_LEFT]="top-left";a[l.TOP_CENTER]="top-center";a[l.TOP_RIGHT]="top-right";a[l.BOTTOM_LEFT]="bottom-left";a[l.BOTTOM_CENTER]="bottom-center";a[l.BOTTOM_RIGHT]="bottom-right";var i={};i[r.ALL]="all-devices";i[r.DESKTOP_ONLY]="desktop-only";var e=50;o.namespace("Squarespace.Widgets");var s=o.Squarespace.Widgets.SSBadge=o.Base.create("SSBadge",o.Squarespace.Widgets.SSWidget,[],{initializer:function(){this._coverNode=o.Node.create('<div class="sqs-ss-badge-cover"></div>');this.after("render",function(){o.Global.fire("website-overlay:rendered",{selector:"."+this.getProperty("CSS_PREFIX")})});this.resize=u(this.handleResize.bind(this),e);o.config.win.addEventListener("resize",this.resize)},destructor:function(){this._coverNode.remove(true);o.config.win.removeEventListener("resize",this.resize)},handleResize:function(){this.isMobile()?this.get("boundingBox").addClass("is-mobile"):this.get("boundingBox").removeClass("is-mobile")},isMobile:function(){if(!o.config||!o.config.win)return o.UA.mobile;var e=o.config.win.innerWidth;var t=e<=768;return o.UA.mobile||t},renderUI:function(){s.superclass.renderUI.call(this);this.isMobile()&&this.get("boundingBox").addClass("is-mobile");this.get("contentBox").append('<a href="'+this.get("goTo")+'" target="_blank"><div class="badge-closed"><div class="badge-symbol"></div></div><div class="badge-open"><div class="badge-open-inner"><h2>'+n("Powered by Squarespace")+"</h2></div></div></a>");o.one("body").append(this._coverNode)},syncUI:function(){s.superclass.syncUI.call(this);var e=this.get("boundingBox");e.setAttribute("data-type",t[this.get("type")]);e.setAttribute("data-position",a[this.get("position")]);e.setAttribute("data-devices",i[this.get("devices")]);if(this.get("autoHide")){e.addClass("badge-auto-hide");this._checkAutoHide()}else{e.removeClass("badge-auto-hide");e.addClass("badge-visible")}},bindUI:function(){var e=this.get("contentBox");this.after(["typeChange","positionChange","autoHideChange","devicesChange"],this.syncUI,this);e.on("mouseenter",function(){e.addClass("badge-is-open")});e.on("mouseleave",function(){e.removeClass("badge-is-open")});this._registerEvent(o.one(o.config.win).on("scroll",this._checkAutoHide,this))},_checkAutoHide:function(){if(!this.get("autoHide"))return;var e=this.get("boundingBox");var t=o.one("body");var a=o.one("html");var i=a.get("scrollTop")||t.get("scrollTop");var s=a.get("scrollHeight")||t.get("scrollHeight");var n=o.config.win.innerHeight;var r=i>s-n-50;this._isPositionTop()&&i<50||r?e.addClass("badge-visible"):e.removeClass("badge-visible")},_isPositionTop:function(){var e=[l.TOP_LEFT,l.TOP_CENTER,l.TOP_RIGHT];return-1!==e.indexOf(this.get("position"))}},{CSS_PREFIX:"sqs-ss-badge",ATTRS:{type:{value:c.BLACK,validator:function(e){if(!o.Object.hasValue(c,e)){false;return false}return true}},position:{value:l.BOTTOM_LEFT,validator:function(e){if(!o.Object.hasValue(l,e)){false;return false}return true}},autoHide:{value:true,validator:o.Squarespace.AttrValidators.isBoolean},devices:{value:r.ALL,validator:function(e){if(!o.Object.hasValue(l,e)){false;return false}return true}},goTo:{valueFn:function(){var e=o.QueryString.stringify({channel:"word_of_mouth",subchannel:"customer",source:"badge",campaign:o.Object.getValue(Static,["SQUARESPACE_CONTEXT","website","id"])});return"https://www.squarespace.com?"+e},validator:o.Squarespace.AttrValidators.isString,readOnly:true}}})},"1.0",{requires:["base","node","squarespace-attr-validators","squarespace-ss-widget"]})},"./src/main/webapp/universal/scripts-v6/ss-widget.js":function(e,t){YUI.add("squarespace-ss-widget",function(l){l.namespace("Squarespace.Widgets");var c=l.Squarespace.Widgets.SSWidget=l.Squarespace.SSWidget=l.Base.create("ssWidget",l.Widget,[],{delegatedEvents:{},initializer:function(e){this.LOG=new l.Squarespace.Debugger({name:this.name,output:false});this._anims=new l.Squarespace.Anims;this.on("classNameChange",function(e){var t=this.get("boundingBox");t&&t.removeClass(e.prevVal).addClass(e.newVal)},this);this._events=[];this._timers=[]},destroy:function(e){if(!l.Lang.isBoolean(e)&&!this.get("destroyed")){var t=this.get("boundingBox");var a=this.get("contentBox");t&&t._node&&a&&a._node?e=true:this.LOG.error("This widget's elements was improperly cleaned up!")}c.superclass.destroy.call(this,e)},destructor:function(){this._anims.destroy();l.detach(this.get("id")+"|*");this.detach(this.get("id")+"|*");while(0!==this._events.length)this._events.shift().detach();while(0!==this._timers.length)this._timers.shift().cancel();this._anims=null;this._timers=[];this._events=[];this.LOG=null},_registerEvent:function(){if(l.Lang.isArray(arguments[0]))this._registerEvent.apply(this,arguments[0]);else for(var e=0,t=arguments.length;e<t;e++)l.Lang.isValue(arguments[e])&&this._events.push(arguments[e])},_registerPointerEvent:function(e,t,a,i){var s=l.Squarespace.Utils._attachPointerAction(e,t,a,i);this._registerEvent(s)},_registerAnim:function(e){this._anims.add(e)},_registerCallback:function(e,t){return l.bind(function(){if(this.get("destroyed"))return;e.apply(t||this,arguments)},this)},_registerTimer:function(e){this._timers.push(e);return e},renderUI:function(){var e=this.get("className");this.get("boundingBox").addClass(e);this.get("preventRenderTemplate")||this.get("contentBox").prepend(this.renderTemplate())},bindUI:function(){var i=this.get("id");this.after(i+"|stringsChange",function(e){e.noSyncUI||this.syncUI()},this);var s=this.get("boundingBox");l.Object.each(this.delegatedEvents,function(e,a){l.Object.each(e,function(e,t){s.delegate(i+"|"+t,this[e],a,this)},this)},this)},syncUI:function(){},_getTemplateInfo:function(){var e=c.TEMPLATE_TYPES;var t=false;var a=this.constructor;var i;var s;var n;var r;var o=function(){n=a.HANDLEBARS_TEMPLATE;s=a.TEMPLATE;t=l.Lang.isValue(n);r=t?e.HANDLEBARS:e.HTML};o();while(l.Lang.isUndefined(n)&&l.Lang.isUndefined(s)){a=a.superclass.constructor;o()}i=t?l.Squarespace.UITemplates.getCompiledTemplate(n):function(){return l.Node.create(s)};return{type:r,template:i}},renderTemplate:function(){var e=c.TEMPLATE_TYPES;var t=this._getTemplateInfo();if(t.type===e.HANDLEBARS){var a=this._getHBTemplateContext();return t.template(a)}return t.template()},getProperty:function(e){var t=this.constructor,a=this.constructor[e];while(l.Lang.isUndefined(a)){if(!t.superclass)break;t=t.superclass.constructor;if(l.Lang.isUndefined(t))break;a=t[e]}return a},_getHBTemplateContext:function(){return this.getAttrs()}},{CSS_PREFIX:"sqs-widget",HANDLEBARS_TEMPLATE:null,TEMPLATE:"",TEMPLATE_TYPES:{HANDLEBARS:"handlebars",HTML:"html"},ATTRS:{className:{value:null},preventRenderTemplate:{value:false,validator:l.Squarespace.AttrValidators.isBoolean}}})},"1.0",{requires:["base","node","squarespace-anims","squarespace-attr-validators","squarespace-debugger","squarespace-template-helpers","squarespace-ui-templates","squarespace-util","widget"]})},"./src/main/webapp/universal/scripts-v6/stringset-utils-mixin.js":function(e,t){YUI.add("squarespace-stringset-utils-mixin",function(n){n.namespace("Squarespace.Mixins").StringSetUtils=n.Base.create("stringSetUtils",n.Base,[],{memberInSet:function(e,t,a){if(a){e=n.Array.map(e,function(e){return e.toLowerCase()});t=t.toLowerCase()}return-1!==n.Array.indexOf(e,t)},cleanMember:function(e){var t=new RegExp("[,<>]","g");return n.Lang.trim(e.replace(t,""))},filterMember:function(e,t,a){return n.Array.filter(e,function(e){if(a)return e.toLowerCase()!==t.toLowerCase();return e!==t})},diffStringSets:function(e,t,a){var i=e,s=t;if(i.length<s.length){s=e;i=t}return n.Array.filter(i,function(e){return!this.memberInSet(s,e,a)},this)}},{})},"1.0",{requires:["base","squarespace-util"]})},"./src/main/webapp/universal/scripts-v6/system-collections/products/products-2.0-item.js":function(e,t,a){var s=a("./src/main/webapp/universal/src/shared/components/ProductPageGallery.ts");var n=a("./src/main/webapp/universal/src/shared/utils/mediaQueries.js");YUI.add("squarespace-products-collection-item-v2",function(i){i.namespace("Squarespace.SystemCollections.Products").ItemV2=i.Base.create("systemCollectionsProductsItemV2",i.Base,[],{initializer:function(){this._syncSelectedVariantOptions();this._bindUI();this._syncUI();this.get("isLightboxEnabled")&&this._lightboxifyImages()},destructor:function(){this._resizeEvent&&this._resizeEvent.detach();this._tweakChangeEvent&&this._tweakChangeEvent.detach();this._tweakResetEvent&&this._tweakResetEvent.detach();this._tweakCloseEvent&&this._tweakCloseEvent.detach();var e=this.get("host").one(".product-variants");e&&e.getDOMNode().removeEventListener("variant:change",this._variantChangeEvent);i.Array.each(this._selectChangeEvents,function(e){e.detach()});this._resizeEvent=null;this._tweakChangeEvent=null;this._tweakResetEvent=null;this._tweakCloseEvent=null;this._selectChangeEvents=null;this._variantChangeEvent=null;this._zoomInstances&&this._zoomInstances.length>0&&this._destroyImageZoomInstances();this.get("slideshow")&&this.get("slideshow").destroy(true);this.get("lightbox")&&this._destroyLightbox()},_bindUI:function(){this._resizeEvent=i.on("windowresize",function(){this._syncUI()},i.config.win,this);this._tweakChangeEvent=i.Global.on("tweak:change",this._tweakChangeHandler,this);this._tweakResetEvent=i.Global.on("tweak:reset",this._syncUI,this);window.SQUARESPACE_LOGIN&&window.SQUARESPACE_LOGIN.isLoggedIn()&&i.on("beforeunload",function(){this.destroy(true)},this)},_syncUI:function(){this.get("isProductGallerySlideshow")||this.get("isProductQuickView")?this.get("slideshow")?this._refreshSlideshowGallery():this._renderSlideshowGallery():this.get("isProductGalleryStacked")&&(this.get("isRenderedStackedGallery")?this._refreshStackedGallery():this._renderStackedGallery());this._loadRelatedItemImages();this._attachVariantImageListeners()},_attachVariantImageListeners:function(){var e=this.get("host").one(".product-variants");if(!e)return;if(this._variantChangeEvent){e.getDOMNode().removeEventListener("variant:change",this._variantChangeEvent);this._variantChangeEvent=null}if(this.get("isProductGallerySlideshow")||this.get("isProductQuickView")){this._variantChangeEvent=this._handleSlideshowGalleryVariantChange.bind(this);e.getDOMNode().addEventListener("variant:change",this._variantChangeEvent)}else if(this.get("isProductGalleryStacked")&&!n.isMobile()){this._variantChangeEvent=this._handleStackedGalleryVariantChange.bind(this);e.getDOMNode().addEventListener("variant:change",this._variantChangeEvent)}},_handleStackedGalleryVariantChange:function(e){var t=e.detail.selectedVariant;var a=t.mainImageId;if(!a)return;var i=this.get("slideContainer").getDOMNode();var s=i.querySelector(".focus-image");if(s){s.classList.remove("focus-image");var n=s.getAttribute("data-slide-index");i.insertBefore(s,i.children[n])}var r=i.querySelector('[data-image-id="'+a+'"]');if(r){r.classList.add("focus-image");i.insertBefore(r,i.firstChild)}},_handleSlideshowGalleryVariantChange:function(e){var t=this.get("slideContainer").getDOMNode();var a=this.get("slideshow");var i=e.detail.selectedVariant;if(!i.mainImageId)return;var s=i.mainImageId;var n=t.querySelector('[data-image-id="'+s+'"]');if(!n)return;var r=n.getAttribute("data-slide-index");r&&a.setNewIndex(r-1)},_tweakChangeHandler:function(e){switch(e.getName()){case"tweak-product-item-spacing":case"tweak-product-item-gallery-design":case"tweak-product-item-gallery-width":case"tweak-product-item-gallery-aspect-ratio":case"tweak-product-item-gallery-thumbnail-width":this._syncUI();case"tweak-product-item-image-zoom-enabled":case"tweak-product-item-image-zoom-behavior":case"tweak-product-item-image-zoom-factor":this.get("isImageZoomEnabled")?this._instantiateZoom():this._destroyImageZoomInstances();case"tweak-product-item-lightbox-enabled":this.get("isLightboxEnabled")?this._lightboxifyImages():this.get("lightbox")&&this._destroyLightbox();break;case"tweak-related-products-items-per-row":case"tweak-related-products-item-spacing":case"tweak-related-products-image-aspect-ratio":this._loadRelatedItemImages();break}},_syncSelectedVariantOptions:function(){this._selectChangeEvents=[];this.get("host").all(".variant-option").each(function(e){var i=e.one(".variant-select-wrapper");var s=e.one("select");var n=s.one("option").get("text");i.setAttribute("data-text",n);this._selectChangeEvents.push(e.delegate("change",function(e){var t=s.get("value");var a=""===t?n:t;i.setAttribute("data-text",a)},"select"))},this)},_renderSlideshowGallery:function(){if(this.get("isRenderedStackedGallery")){this._cleanupStackedGallery();this.set("isRenderedStackedGallery",false)}this.get("isImageZoomEnabled")&&this._instantiateZoom();this._instantiateSlideshow()},_instantiateSlideshow:function(){if(this.get("images").size()<1)return;var e=this.get("slideContainer").getDOMNode();var t=this.get("thumbnailContainer")&&this.get("thumbnailContainer").getDOMNode();t&&this.set("slideshow",new s(e,t));this.get("images").each(function(e){e.plug(i.Squarespace.Loader2,{load:true,mode:"fill"})});this.get("images").each(function(e){e.fire("refresh")});this._loadSlideshowThumbnails()},_loadSlideshowThumbnails:function(){this.get("images").size()>1&&this.get("thumbnails").each(function(e){e.plug(i.Squarespace.Loader2,{load:true,mode:"fill"})})},_loadRelatedItemImages:function(){this._onImageLoadEvents=[];this.get("relatedItemImages").each(function(e){if(e.hasClass("loaded"))e.fire("refresh");else{e.plug(i.Squarespace.Loader2,{load:true,mode:"fill"});this._onImageLoadEvents.push(e.on("load",function(){e.hasClass("ProductItem-relatedProducts-image--primary")&&e.ancestor(".ProductItem-relatedProducts-item").addClass("image-is-loaded")}))}},this)},_refreshSlideshowGallery:function(){this.get("thumbnails").each(function(e){e.fire("refresh")});this.get("images").each(function(e){e.fire("refresh")})},_destroySlideshowAndResetImageStyles:function(){this.get("slideshow").destroy(true);this.get("images").each(function(e){e.setStyles({position:"",top:"",left:"",right:"",bottom:"",zIndex:"",width:"",height:"",overflow:""})})},_renderStackedGallery:function(){if(this.get("slideshow")){this._destroySlideshowAndResetImageStyles();this.set("slideshow",null)}this.get("isImageZoomEnabled")&&this._instantiateZoom();this.get("images").each(function(e){e.plug(i.Squarespace.Loader2,{load:true,mode:null})});this.set("isRenderedStackedGallery",true)},_refreshStackedGallery:function(){this.get("images").each(function(e){e.fire("refresh")})},_cleanupStackedGallery:function(){var e=this.get("host").getDOMNode();var t=e.querySelector(".cloned-focus-image");t&&t.remove();var a=e.querySelector(".original-focus-image");a&&a.classList.remove(".original-focus-image")},_lightboxifyImages:function(){if(this.get("images").size()<1||this.get("isProductQuickView"))return;var t=[];this.get("images").each(function(e){t.push({content:e})});var a=this.get("images").size()>1;this._imageClickEvent=this.get("slideContainer").delegate("click",function(e){this.set("lightbox",new i.Squarespace.Lightbox2({controls:{previous:a,next:a},set:t,currentSetIndex:parseInt(e.currentTarget.getAttribute("data-slide-index"),10)-1}));this.get("lightbox").render()},".ProductItem-gallery-slides-item",this)},_destroyLightbox:function(){this.get("lightbox").destroy(true);this.set("lightbox",null);this._imageClickEvent.detach();this._imageClickEvent=null},_instantiateZoom:function(){this._destroyImageZoomInstances();this._zoomInstances=[];this.get("images").each(function(e){this._zoomInstances.push(new i.Squarespace.ImageZoom({host:e.get("parentNode"),behavior:this.get("isImageZoomBehaviorClick")?"click":"hover",zoom:this.get("imageZoomFactor")}))},this)},_destroyImageZoomInstances:function(){if(!this._zoomInstances||this._zoomInstances.length<1)return;i.Array.each(this._zoomInstances,function(e){e.destroy(true)});this._zoomInstances=null}},{ATTRS:{host:{value:null,validator:function(e){var t=i.one(e);return i.instanceOf(t,i.Node)},writeOnce:true},slideContainer:{valueFn:function(){return this.get("host").one(".ProductItem-gallery-slides")}},thumbnailContainer:{valueFn:function(){return this.get("host").one(".ProductItem-gallery-thumbnails")}},images:{valueFn:function(){return this.get("host").all(".ProductItem-gallery-slides-item-image")}},thumbnails:{valueFn:function(){return this.get("host").all(".ProductItem-gallery-thumbnails-item-image")}},relatedItemImages:{valueFn:function(){return this.get("host").all(".ProductItem-relatedProducts-image")}},isProductQuickView:{valueFn:function(){return this.get("host").ancestor(".sqs-product-quick-view-lightbox")}},isImageZoomEnabled:{getter:function(){return i.one(".tweak-product-item-image-zoom-enabled")}},isImageZoomBehaviorClick:{getter:function(){return i.one(".tweak-product-item-image-zoom-behavior-click")}},imageZoomFactor:{getter:function(){return parseFloat(i.Squarespace.Template.getTweakValue("tweak-product-item-image-zoom-factor"))}},isLightboxEnabled:{getter:function(){return i.one(".tweak-product-item-lightbox-enabled")&&!this.get("isImageZoomBehaviorClick")}},isProductGallerySlideshow:{getter:function(){return i.one(".tweak-product-item-gallery-design-slideshow")}},isProductGalleryStacked:{getter:function(){return i.one(".tweak-product-item-gallery-design-stacked")}}}});var t=[];i.config.win.Squarespace.onInitialize(i,function(){i.all(".ProductItem.products-collection-v2").each(function(e){if(e.get("parentNode").hasClass("sqs-product-quick-view-content"))return false;e.one(".ProductItem-details .sqs-add-to-cart-button").removeClass("sqs-editable-button");t.push(new i.Squarespace.SystemCollections.Products.ItemV2({host:e}))})});i.config.win.Squarespace.onDestroy(i,function(){t.forEach(function(e){e.destroy()});t.length=0})},"1.0",{requires:["base","node","squarespace-beforeunload","squarespace-gallery-ng","squarespace-image-loader","squarespace-image-zoom","squarespace-public-api","squarespace-widgets-lightbox2"]})},"./src/main/webapp/universal/scripts-v6/system-collections/products/products-2.0-list.js":function(e,t,a){var s=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-products-collection-list-v2",function(a){a.namespace("Squarespace.SystemCollections.Products").ListV2=a.Base.create("systemCollectionsProductsListV2",a.Base,[],{initializer:function(){this._loadImages();this._bindUI();this._syncUI()},destructor:function(){this._resizeEvent&&this._resizeEvent.detach();this._tweakChangeEvent&&this._tweakChangeEvent.detach();this._tweakResetEvent&&this._tweakResetEvent.detach();a.Array.each(this._onImageLoadEvents,function(e){e.detach()});this._resizeEvent=null;this._tweakChangeEvent=null;this._tweakResetEvent=null;this._onImageLoadEvents=null},_loadImages:function(){this._onImageLoadEvents=[];this.get("images").each(function(e){e.plug(a.Squarespace.Loader2,{load:true,mode:"fill"});this._onImageLoadEvents.push(e.on("load",function(){e.hasClass("ProductList-image--primary")&&e.ancestor(".ProductList-item").addClass("image-is-loaded")}))},this)},_bindUI:function(){this._resizeEvent=a.on("resize",function(){this._syncUI()},a.config.win,this);this._tweakChangeEvent=a.Global.on("tweak:change",this._tweakChangeHandler,this);this._tweakResetEvent=a.Global.on("tweak:reset",this._syncUI,this);window.SQUARESPACE_LOGIN&&window.SQUARESPACE_LOGIN.isLoggedIn()&&a.on("beforeunload",function(){this.destroy(true)},this)},_syncUI:function(){this._adjustSubPixelValues();this.get("images").each(function(e){e.fire("refresh")})},_adjustSubPixelValues:function(){var e=this.get("host").all(".ProductList-item");if(e){e.setStyle("width","");e.setStyle("width",Math.floor(parseInt(e.getStyle("width")[0],10))+"px")}},_tweakChangeHandler:function(e){var t=e.getName();var a=e.getValue();if("tweak-product-list-image-aspect-ratio"===t||"tweak-product-list-item-spacing"===t||"tweak-product-list-filter-display"===t||"tweak-product-list-filter-width"===t)this._syncUI();else if("tweak-product-list-items-per-row"===t){this._previewTweakChangeItemsPerRow();this._syncUI()}else if("tweak-product-list-item-hover-behavior"===t&&a===s("Show Alternate Image")){this._loadImages();this._previewTweakChangeItemHoverBehavior()}},_previewTweakChangeItemsPerRow:function(){var e=parseInt(a.Squarespace.Template.getTweakValue("tweak-product-list-items-per-row"),10);this.get("host").all(".ProductList-item").setStyle("clear","none");this.get("host").all(".ProductList-item:nth-child("+e+"n+1)").setStyle("clear","left");this.get("host").one(".ProductList-grid").setAttribute("data-items-per-row",e)},_previewTweakChangeItemHoverBehavior:function(){var e=this.get("host").one(".ProductList-image--alt");var t=function(){e.setStyle("opacity",1);a.later(1e3,this,function(){e.setStyle("opacity","")})};e.hasClass("loaded")?t():e.once("load",function(){t()})}},{ATTRS:{host:{value:null,validator:function(e){var t=a.one(e);return a.instanceOf(t,a.Node)},writeOnce:true},images:{getter:function(){var e=a.one(".tweak-product-list-item-hover-behavior-show-alternate-image")&&a.one(".tweak-product-list-meta-position-under");if(e&&!a.UA.mobile)return this.get("host").all(".ProductList-image[data-src]");return this.get("host").all(".ProductList-image--primary[data-src]")}}}});var i=[];a.config.win.Squarespace.onInitialize(a,function(){a.all(".ProductList.products-collection-v2").each(function(e){var t=a.config.win.Static.SQUARESPACE_CONTEXT.tweakJSON["tweak-product-list-items-per-row"];e.one(".ProductList-grid").getDOMNode().dataset.itemsPerRow=t;i.push(new a.Squarespace.SystemCollections.Products.ListV2({host:e}))})});a.config.win.Squarespace.onDestroy(a,function(){i.forEach(function(e){e.destroy()});i.length=0})},"1.0",{requires:["base","node","squarespace-beforeunload","squarespace-image-loader","squarespace-image-zoom","squarespace-public-api"]})},"./src/main/webapp/universal/scripts-v6/system-error.js":function(e,t,a){var o=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var l=a("./src/main/webapp/universal/src/shared/utils/formatting/substituteString.js");YUI.add("squarespace-system-error",function(r){r.namespace("Squarespace");r.Squarespace.SystemError=Class.create({initialize:function(e,t,a){this.url=r.Squarespace.Escaping.escapeForHtml(e);this.data=t;this.format=a;r.config.win.__clearError=this.clear},clear:function(){r.one(".sqs-system-error").remove();r.one(".dialog-screen-overlay.sqs-system-error-overlay").remove()},show:function(){var e;var t="";if(this.data.cleaned)e='<div style="font-weight: normal; font-size: 22px; margin-top: -2px;">'+o("Something Went Wrong!")+'</div><div style="font-weight: normal; font-size: 13px; padding-top: 5px;">'+o("Our system has encountered an error.  This exception has been automatically logged and reported.  We will return shortly.")+"</div>";else if(this.data.network){t=o("Unable to connect to Squarespace.  Please try again.");r.Lang.isString(this.data.error)&&this.data.error.length>0&&(t=this.data.error);e='<div style="font-weight: normal; font-size: 17px;">'+t+"</div>";if(this.url)try{r.Squarespace.Analytics.trackInternal("system_network_error",{urlRequested:this.url})}catch(e){false}}else{t=r.Squarespace.Escaping.escapeForHtml(this.data.error||this.data.message||"");e=l('<div style="font-weight: normal; font-size: 17px;">{sub1} &nbsp;<span style="color: #888;">({sub2})</span></div><br/><pre>{sub3}</pre>',{sub1:this.url,sub2:this.format.toUpperCase(),sub3:t.replace(new RegExp("\n","g"),"<br/>")});false}if(r.one(".sqs-system-error"))return;var a='<input type="button" value="Clear" onclick="Y.config.win.__clearError();"/>';var i="position: absolute; -webkit-user-select: text; left: 25px; top: 25px; right: 25px; font-size: 12px; color: #fff; padding: 26px 20px 20px 80px; border-radius: 5px; overflow: auto; height: 90%; z-index: 10000001;";var s=e+'<br/><br/><input type="button" value="'+o("Reload Page")+'" onclick="Y.config.doc.location.reload();"/> &nbsp; ';s+=a+"<br/><br/><br/>";this.data.errorKey&&(s+='<span style="color: #777; font-size: 10px;">'+this.data.errorKey+"</span>");this.errorEl=r.Node.create('<div class="sqs-system-error" style="'+i+'">'+s+"</div>");r.one(r.config.doc.body).append(this.errorEl);this.overlayEl=r.Node.create('<div class="dialog-screen-overlay sqs-system-error-overlay"></div>');this.overlayEl.setStyles({zIndex:1e7});r.one(r.config.doc.body).append(this.overlayEl);var n=new r.Anim({node:this.overlayEl,to:{opacity:1},duration:.35,easing:r.Easing.easeOutStrong});n.run()}})},"1.0",{requires:["squarespace-escaping-utils","squarespace-util"]})},"./src/main/webapp/universal/scripts-v6/tab-view.js":function(e,t,a){YUI.add("squarespace-tab-view",function(h){var g="tab-wrapper",m="active",f="tabId",n="-self",r="-children";var o=h.namespace("Squarespace.Widgets").TabView=h.Base.create("tabView",h.Squarespace.Widgets.SSWidget,[],{initializer:function(e){this._saveChildWidgetDeclarations();this._childWidgets={};this._tabContentWrapperNodes=[];this._activeChildWidget=null;this._activeChildId=null;this.publish("tab-switch-requested",{defaultFn:this._switchTabsDefFn,preventable:true,context:this,emitFacade:true})},destructor:function(){this._childWidgetDeclarations=null;this._childWidgetOrder=null;this._childWidgetIndexes=null;this._activeChildWidget=null;this._activeChildId=null;this._parent=null;this._tabContentWrapperNodes=null;h.Object.each(this._childWidgets,function(e){e&&e.destroy({remove:true})},this);this._childWidgets=null},renderUI:function(){o.superclass.renderUI.call(this);var e=this.getProperty("CSS_PREFIX"),t=this.get("contentBox"),a="."+e+n;var i=t.one(a);if(!i)throw new Error(this.name+": No element found matching tabBox selector ("+a+").");this._set("tabBox",i);var s=this.get("tabContentBox");s.inDoc()||t.appendChild(s);s.addClass(e+r);this._selectInitialTab()},bindUI:function(){o.superclass.bindUI.call(this);var e=this.get("id");this.get("tabBox").on(e+"|click",function(e){e.preventDefault();e.stopPropagation();var t=e.target.ancestor(function(e){return!!e.getData(f)},true);t&&this.switchTabs(t.getData(f))},this);var t=this.get("parent")||this._parent;t&&t.on(e+"|tab-switch-requested",function(e){this.fire("tab-switch-requested",{tabId:null,originalTabSwitchEvent:e.originalTabSwitchEvent||e})},this)},_saveChildWidgetDeclarations:function(){this._childWidgetDeclarations={};this._childWidgetIndexes={};this._childWidgetOrder=[];this._recurseThroughDeclarations();h.Array.each(this._childWidgetOrder,function(e,t){this._childWidgetIndexes[e]=t},this)},_recurseThroughDeclarations:function(){var e=arguments[0];h.Lang.isUndefined(e)&&(e=this.get("widgets"));h.Array.each(e,function(e){if(h.Lang.isNull(e));else if(e.widgets)this._saveChildWidgetDeclarations(e.widgets);else{if(!e.ctor)throw new Error(this.name+": No ctor or widgets array found in declaration");this._childWidgetDeclarations[e.id]=e;this._childWidgetOrder.push(e.id)}},this)},_selectInitialTab:function(){var e=this.get("initialTabId");if(!e){var t=null;this.get("tabBox").all("*").some(function(e){if(e.getData(f)){t=e;return true}return false},this);if(!t){false;return}e=t.getData(f)}this.switchTabs(e)},refreshCurrentTab:function(){this._switchTabs(this._activeChildId)},switchTabs:function(e){if(!h.Lang.isNull(e)&&!this._childWidgetDeclarations[e])throw new Error(this.name+": Tab id '"+e+"' does not exist");if(e===this._activeChild)return;this.fire("tab-switch-requested",{tabId:e})},getActiveChildId:function(){return this._activeChildId},getChildWidgets:function(){return this._childWidgets},_switchTabsDefFn:function(e){this._switchTabs(e.tabId)},_switchTabs:function(e){var t=this.get("tabBox"),a=this._activeChildId,i=this._childWidgetIndexes[a],s=this._childWidgets[a],n=e,r=this._childWidgetIndexes[n],o=this._childWidgets[n];if(h.Lang.isNull(n))return;var l="."+m;t.all(l).removeClass(m);var c;var u;s&&(c=this._tabContentWrapperNodes[i]);if(o)u=this._tabContentWrapperNodes[r];else{u=h.Node.create("<div/>");u.addClass(g);u.setAttribute("data-"+f,e);this.get("tabContentBox").insert(u,r+1);var d=this._childWidgetDeclarations[n];o=new d.ctor(h.merge(d.config||{},{parent:this,container:u}));o.render(u);this._childWidgets[n]=o;this._tabContentWrapperNodes[r]=u}var p=h.bind(function(){if(this.get("destroyOnSwitch")){c.remove(true);s.destroy({remove:true});this._childWidgets[a]=null;this._tabContentWrapperNodes[i]=null}else c.hide()},this);if(c&&u){p();u.show()}else u.show();t.all("*").some(function(e){if(e.getData(f)===n){e.addClass(m);return true}return false},this);this._activeChildId=n;this._activeChildWidget=o},toJSON:function(){var e=this.getAttrs();return{widgets:this._convertForTemplateContext(e.widgets),id:e.id,className:e.className,strings:e.strings}},_convertForTemplateContext:function(e){var t=[];h.Array.each(e,function(e){if(h.Lang.isNull(e));else if(e.widgets)t.push({label:e.label||"",widgets:this._convertForTemplateContext(e.widgets)});else{if(!e.ctor)throw new Error(this.name+": No ctor or widgets array found in declaration");t.push({label:e.label||"",id:e.id})}},this);return t},_validateWidgets:function(e){if(!h.Lang.isArray(e)){console.warn(this.name+": An array of tab item declarations is required.");return false}return h.Array.some(e,function(e){if(!h.Lang.isUndefined(e.ctor))return!this._validateWidgetDeclaration(e);if(!h.Lang.isUndefined(e.widgets))return!this._validateWidgetGroupDeclaration(e);false;return true},this)},_validateWidgetDeclaration:function(e){if(!h.Lang.isString(e.id)){false;return false}if(!e.ctor||!h.Lang.isFunction(e.ctor)){false;return false}},_validateWidgetGroupDeclaration:function(e){var t=e.widgets;if(!t){false;return false}return h.Array.some(t,function(e){return!this._validateWidgetDeclaration},this)}},{CSS_PREFIX:"sqs-tab-view",HANDLEBARS_TEMPLATE:"tab-view.html",ATTRS:{strings:{value:{title:"",description:""}},tabBox:{value:null,readOnly:true},tabContentBox:{valueFn:function(){return h.Node.create("<div/>")},writeOnce:"initOnly"},initialTabId:{value:null},destroyOnSwitch:{value:false,validator:h.Lang.isBoolean},widgets:{value:[],validator:"_validateWidgets",initOnly:true},switchAnimation:{value:null}}})},"1.0",{requires:["base","squarespace-ss-widget","squarespace-tab-view-tab-group-template","squarespace-tab-view-tab-template","squarespace-tab-view-template"]})},"./src/main/webapp/universal/scripts-v6/template-helpers.js":function(e,t,a){var v=a("./src/main/webapp/universal/src/shared/utils/formatting/substituteString.js");var b=a("./src/main/webapp/universal/src/shared/utils/dateFormat.js");var S=a("./src/main/webapp/frontend/packages/enums/CollectionTypes.js");var y=a("./src/main/webapp/frontend/packages/enums/RecordType.js");var _=a("./src/main/webapp/frontend/packages/enums/FolderBehavior.js");var C=a("./src/main/webapp/universal/src/shared/constants/GalleryOptions.js");var E=a("./common/temp/node_modules/@sqs/utils/string/isBlankWithoutTags.js");var w=a("./src/main/webapp/universal/src/shared/i18n/index.ts").formatDateTime;var A=a("./src/main/webapp/universal/src/shared/utils/humanizeDate.js");var T=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var I=a("./src/main/webapp/universal/src/shared/i18n/index.ts").pluralize;var q=a("./src/main/webapp/universal/src/shared/utils/TemplateHelpers.js");YUI.add("squarespace-template-helpers",function(c){var u={get:function(e,t){if("function"===typeof e.get)return e.get(t);return e[t]}};var d={html:c.Squarespace.Escaping.escapeForHtml,htmltag:c.Squarespace.Escaping.escapeForHtmlTag,htmlattr:c.Squarespace.Escaping.escapeForHtmlTag,str:function(t){if(null===t||"undefined"===typeof t)return"";try{return t.toString()}catch(e){return"[JSONT: Can't format variable as string (typeof: "+typeof t+").]"}},raw:function(e){return e},capitalize:function(e){return e.toUpperCase()},safe:function(e){if(!e)return"";return e.replace(/<.*?>/g,"")},json:function(e){return c.JSON.stringify(e).replace(/<\/script>/g,'</scr"+"ipt>')},"json-pretty":function(e){return c.JSON.stringify(e,null,2).replace(/<\/script>/g,'</scr"+"ipt>')},smartypants:function(e){e=e.replace(/(^|[-\u2014\s(\["])'/g,"$1‘");e=e.replace(/'/g,"’");e=e.replace(/(^|[-\u2014/\[(\u2018\s])"/g,"$1“");e=e.replace(/"/g,"”");e=e.replace(/--/g,"—");return e},slugify:function(e){return e?e.replace(/[^\-a-zA-Z0-9\s]+/gi,"").replace(/\s/g,"-").toLowerCase():""},"url-encode":function(e){return encodeURIComponent(e)},"activate-twitter-links":function(e){var t=/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi;var a=/(^| )@([a-zA-Z0-9_]+)/gi;var i=/(^| )#([a-zA-Z0-9_]+)/gi;return e.replace(t,'<a target="new" href="$1">$1</a>').replace(a,'$1<a target="new" href="http://www.twitter.com/$2/">@$2</a>').replace(i,function(e){return'<a target="new" href="http://www.twitter.com/search/'+encodeURIComponent(e)+'">'+e+"</a>"})},count:function e(t){var a=t.length;if(!c.Lang.isValue(a)&&"object"===typeof t){a=0;for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&a++}return a||0},"audio-player":function(e){return'<script>Y.use(\'squarespace-audio-player-frontend\');<\/script><div class="squarespace-audio-player" data-audio-asset-url="'+e.structuredContent.audioAssetUrl+'" data-item-id="'+e.id+'" id="audio-player-'+e.id+'"></div>'},"social-button":function(e,t){var a=t._LookUpStack("website");var i=e.systemDataId||e.mainImageId||"";var s=e.assetUrl||(e.mainImage?e.mainImage.assetUrl:"")||"";if(a&&a.shareButtonOptions&&0!==Object.keys(a.shareButtonOptions).length)return'<script>Y.use(\'squarespace-social-buttons\');<\/script><div class="squarespace-social-buttons button-style" data-system-data-id="'+i+'" data-asset-url="'+s+'" data-record-type="'+e.recordType+'" data-full-url="'+e.fullUrl+'" data-title="'+c.Squarespace.Escaping.escapeForHtmlTag(e.title)+'"></div>'},"social-button-inline":function(e,t){var a=t._LookUpStack("website");var i=e.systemDataId||e.mainImageId||"";var s=e.assetUrl||(e.mainImage?e.mainImage.assetUrl:"")||"";if(a&&a.shareButtonOptions&&0!==Object.keys(a.shareButtonOptions).length)return'<script>Y.use(\'squarespace-social-buttons\');<\/script><span class="squarespace-social-buttons inline-style" data-system-data-id="'+i+'" data-asset-url="'+s+'" data-record-type="'+e.recordType+'" data-full-url="'+e.fullUrl+'" data-title="'+c.Squarespace.Escaping.escapeForHtmlTag(e.title)+'"></span>'},"twitter-follow-button":function(e){var t=e.userName||e.profileUrl.split("/").pop();return v("<script>Y.use('squarespace-follow-buttons', function(Y) { Y.on('domready', function() { Y.Squarespace.FollowButtonUtils.renderAll(); }); });<\/script><div class=\"squarespace-follow-button\" data-username=\"{userName}\"></div>",{userName:t})},comments:function(e,t){var a=t._LookUpStack("websiteSettings");if(a&&a.disqusShortname)return'<div class="squarespace-comments" id="disqus_thread"></div>';return'<div class="squarespace-comments" id="comments-'+e.id+'"></div>'},"comment-link":function(e,t){var a=t._LookUpStack("websiteSettings");if(a&&a.disqusShortname)return'<a href="'+e.fullUrl+'" class="sqs-comment-link sqs-disqus-comment-link" data-id="'+e.id+'"></a>';return'<a href="'+e.fullUrl+"#comments-"+e.id+'" class="sqs-comment-link" data-id="'+e.id+'">'+e.publicCommentCount===0?T("No"):I({one:"{%n} Comment",other:"{%n} Comments"},e.publicCommentCount)+"</a>"},"like-button":function(e,t){var a=t._LookUpStack("websiteSettings");if(a&&a.simpleLikingEnabled)return'<span class="sqs-simple-like" data-item-id="'+e.id+'" data-like-count="'+e.likeCount+'"><span class="like-icon"></span><span class="like-count"></span></span>'},"comment-count":function(e){var t=e.publicCommentCount;return 0===t?T("No Comment"):I({one:"{%n} Comment",other:"{%n} Comments"},t)},"image-meta":function(e){if(!e)return;var t="0.5,0.5";e.mediaFocalPoint&&(t=e.mediaFocalPoint.x+","+e.mediaFocalPoint.y);var a=q.getImageAlt(e);a=a&&c.Squarespace.Escaping.escapeForHtmlTag(a);return'data-image="'+e.assetUrl+'" data-src="'+e.assetUrl+'" data-image-dimensions="'+(e.originalSize||"")+'" data-image-focal-point="'+t+'" alt="'+a+'" '},height:function(e){var t=e.split("x");if(2!==t.length)return"Invalid source parameter.  Pass in 'originalSize'.";var a=parseInt(t[1],10);return a},width:function(e){var t=e.split("x");if(2!==t.length)return"Invalid source parameter.  Pass in 'originalSize'.";var a=parseInt(t[0],10);return a},"percentage-format":function(e){var t=e.toFixed(3);var a=t.length;if("0"===t.charAt(a-1))return t.substring(0,a-1);return t},"google-calendar-url":function(e){var t="http://www.google.com/calendar/event?action=TEMPLATE";var a="YYYYMMDD[T]HHMMSS[Z]";var i=new Date(e.startDate);i.setHours(i.getHours()+i.getTimezoneOffset()/60);var s=w(i,a);var n=new Date(e.endDate);n.setHours(n.getHours()+n.getTimezoneOffset()/60);var r=w(n,a);var o;e.location&&(o=e.location.addressLine1+", "+e.location.addressLine2+", "+e.location.addressCountry);t+="&text="+encodeURI(e.title);t+="&dates="+s+"/"+r;o&&(t+="&location="+o);return t},AbsUrl:function(e,t){return u.get("base-url")+"/"+e},"item-classes":function(e,t){t.hash&&(t=this);var a=["hentry"];var i=u.get(t,"promotedBlockType");if(i){a.push("promoted");a.push(d.slugify("promoted-block-"+i))}var s=u.get(t,"categories");if(s)for(var n=0;n<s.length;n++)a.push(d.slugify("category-"+s[n]));var r=u.get(t,"tags");if(r)for(var o=0;o<r.length;o++)a.push(d.slugify("tag-"+r[o]));var l=u.get(t,"author");!l||!l.displayName||a.push(d.slugify("author-"+l.displayName));a.push("post-type-"+u.get(t,"recordTypeLabel"));a.push("article-index-"+u.get(t,"@index"));u.get(t,"starred")&&a.push("featured");e.recordType===y.STORE_ITEM&&c.Squarespace.Commerce.onSale(e)&&a.push("on-sale");return a.join(" ")},round:function(e,t,a){return Math.round(parseFloat(e))},iter:function(e){return u.get(e,"@index")},"product-status":function(e){if(c.Squarespace.Commerce.soldOut(e))return'<div class="product-mark sold-out">sold out</div>';if(c.Squarespace.Commerce.onSale(e))return'<div class="product-mark sale">sale</div>'},"money-string":function(e){return c.Squarespace.Commerce.moneyString(e)},"product-price":function(e){return'<div class="product-price">'+c.Squarespace.Commerce.priceString(e)+"</div>"},"from-price":function(e){return c.Squarespace.Commerce.fromPrice(e)},"normal-price":function(e){return c.Squarespace.Commerce.normalPrice(e)},"sale-price":function(e){return c.Squarespace.Commerce.salePrice(e)},"variant-descriptor":function(e){return c.Squarespace.Commerce.variantFormat(e)},"color-weight":function(e){if(e&&e.length>0&&e.length<=7){e=e.replace("#","");return parseInt(e,16)>8388607.5?"light":"dark"}return""},"summary-form-field":function(e){return c.Squarespace.Commerce.summaryFormFieldString(e)},timesince:function(e){if(!c.Lang.isNumber(e))return"Invalid date.";var t=A(e).capitalize();return'<span class="timesince" data-date="'+e+'">'+t+"</span>"},pluralize:function(e,t){var a;var i;switch(t.length){case 0:a="";i="s";break;case 1:a="";i=t[0];break;case 2:a=t[0];i=t[1];break;default:throw new Error("pluralize got too many args")}return 1===e?a:i}};var e=[{name:"collectionTypeNameEquals?",func:function(e,t,a){return t.get("typeName")===a[0]}}];var t={"has-multiple?":function(e){return e.length>1},"main-image?":function(e){return!!e.mainImageId||!!e.systemDataId},"child-images?":function(e){if(!!e.items&&e.items.length>0){var t=e.items[0];if(!!t.mainImageId||!!t.systemDataId)return true}return false},"location?":function(e){return e.location&&e.location.mapLat&&e.location.mapLng},"excerpt?":function(e){var t=e.excerpt&&(e.excerpt.html||e.excerpt)||"";return!E(t)},"comments?":function(e,t){var a=t._LookUpStack("websiteSettings");var i=1===e.commentState;!i&&e.publicCommentCount>0&&(i=true);a&&!a.commentsEnabled&&(i=false);return i},"collection?":function(e){return e.collection},"collection-page?":function(e){return e.collection&&e.collection.type===S.COLLECTION_TYPE_PAGE},"passthrough?":function(e){return e.passthrough&&e.sourceUrl&&""!==e.sourceUrl},"event?":function(e){return e.recordType===y.EVENT},"same-day?":function(e,t){try{var a=new window.TimezoneJS.Date(e.startDate,t.get("website.timeZone"));var i=new window.TimezoneJS.Date(e.endDate,t.get("website.timeZone"));return a.getYear()===i.getYear()&&a.getMonth()===i.getMonth()&&a.getDate()===i.getDate()}catch(e){return false}},"external-link?":function(e){return!!e.externalLink},"folder?":function(e){return e.collection&&e.collection.folder},"index?":function(e){var t=c.Object.getValue(e,["collection","folder","folderBehavior"]);return t===_.INDEX},"variation?":function(e){var t=c.Object.getValue(e,["collection","folder","folderBehavior"]);return t===_.VARIATION},"singular?":function(e){return 1===e},"plural?":function(e){return 1!==e},"disqus?":function(e,t){var a=t._LookUpStack("websiteSettings");return a&&a.disqusShortname},"serviceNameEmail?":function(e,t){return"email"===e.serviceName},"debug?":function(e,t){try{return t.get("debug")}catch(e){if("UndefinedVariable"===e.name)return false;throw e}},"calendar-view?":function(e,t){var a=t._LookUpStack("calendarView");return true===a},"has-variants?":function(e){return c.Squarespace.Commerce.hasVariants(e)},"varied-prices?":function(e){return c.Squarespace.Commerce.variedPrices(e)},"on-sale?":function(e){return c.Squarespace.Commerce.onSale(e)},"sold-out?":function(e){return c.Squarespace.Commerce.soldOut(e)}};var a=[{name:"output",func:function(e,t,a){return a.join(" ")}},q.prefixFormatters.video(c),{name:"image-color",func:function(e,t,a){var i="";if(e.colorData)if(a.length>0){var s=e.colorData[a[0]+"Average"];i=s?2===a.length?a[1]+": #"+s:"#"+s:v("{sub1} not found: valid position-- topLeft, topRight, bottomLeft, bottomRight, center",{sub1:a[0]})}else i=q.colorDataToDataAttrs(e.colorData);return i}},{name:"child-image-meta",func:function(e,t,a){var i=e.items[a&&a[0]?a[0]:0];var s="0.5,0.5";i.mediaFocalPoint&&(s=i.mediaFocalPoint.x+","+i.mediaFocalPoint.y);var n=q.getImageAlt(i);n=n&&c.Squarespace.Escaping.escapeForHtmlTag(n);return'data-image="'+i.assetUrl+'" data-src="'+i.assetUrl+'" data-image-dimensions="'+(i.originalSize||"")+'" data-image-focal-point="'+s+'" alt="'+n+'" '}}];function i(t,a){if(a)return function(e){return e.recordType===t||e.promotedBlockType===a};return function(e){return e.recordType===t}}var s={text:y.TEXT,image:y.IMAGE,quote:y.QUOTE,gallery:y.GALLERY,link:y.LINK,chat:y.CHAT,audio:y.AUDIO,video:y.VIDEO,review:y.REVIEW,store_item:y.STORE_ITEM,event:y.EVENT,thread:y.THREAD,tweet:y.TWEET,rss:y.RSS,geo:y.CHECKIN,delicious:y.DELICIOUS,kbarticle:y.KBARTICLE};Object.keys(s).forEach(function(e){t[e+"?"]=i(s[e])});t["external-video?"]=i(y.VIDEO,"video");t["video?"]=i(y.VIDEO,"video");t["image?"]=i(y.IMAGE,"image");t["quote?"]=i(y.QUOTE,"quote");t["link?"]=i(y.LINK,"link");t["quote?"]=i(y.QUOTE,"quote");t["gallery?"]=i(y.GALLERY,"gallery");function n(t){return function(e){return e.promotedBlockType===t}}var r=["map","embed","image","code","quote","twitter","link","video","foursquare","instagram","form"];for(var o=0;o<r.length;o++){var l=r[o];t["promoted"+l.capitalize()+"?"]=n(l)}t["redirect?"]=function(e){return e.folderBehavior===_.REDIRECT};t["clickable?"]=function(e,t,a){var i=t._LookUpStack("folderBehavior");if("undefined"===typeof i)return true;return i===_.INDEX||i===_.REDIRECT};function p(i,s){return function(e,t,a){return t._LookUpStack("options")[i]===s}}for(var h in C){var g=C[h];switch(g.type){case"select":for(var m in g.options)t["gallery-"+h+"-"+m+"?"]=p(h,m);break;case"boolean":t["gallery-"+h+"?"]=p(h,true);break;case"slider":case"multiOption":break;default:false;break}}t["gallery-meta?"]=function(e,t,a){return t._LookUpStack("options").controls||t._LookUpStack("options").indicators};var f={debug:function(){return function(e){var t="DEBUG:\n========================\n";t+=JSON.stringify(this||e,null,2);t+="END DEBUG:\n========================\n";return t}}};c.namespace("Squarespace");c.Squarespace.HANDLEBARS_HELPERS=f;c.Squarespace.TEMPLATE_PREDICATES=t;c.Squarespace.TEMPLATE_PARAMETRIC_PREDICATES=e;c.Squarespace.TEMPLATE_FORMATTERS=d;c.Squarespace.TEMPLATE_PREFIX_FORMATTERS=a;c.Squarespace.TEMPLATE_FORMATTERS.date=function(e,t,a){if(!c.Lang.isNumber(t))return"Invalid date.";return b(new Date(t),a)};Object.keys(c.Squarespace.TEMPLATE_FORMATTERS).forEach(function(t){c.Handlebars.registerHelper(t,function(e){return c.Squarespace.TEMPLATE_FORMATTERS[t].apply(this,[this].concat(Array.prototype.slice.call(arguments)))})});Object.keys(c.Squarespace.TEMPLATE_PREDICATES).forEach(function(t){c.Handlebars.registerHelper("if-"+t.replace("?",""),function(e){return c.Handlebars.helpers.if.call(this,function(){return c.Squarespace.TEMPLATE_PREDICATES[t](this)},e)})});Object.keys(c.Squarespace.HANDLEBARS_HELPERS).forEach(function(e){c.Handlebars.registerHelper(e,c.Squarespace.HANDLEBARS_HELPERS[e])})},"1.0",{requires:["handlebars-base","json","squarespace-commerce-utils","squarespace-escaping-utils","substitute"]})},"./src/main/webapp/universal/scripts-v6/template-picker.js":function(e,t,a){var s=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var n=a("./src/main/webapp/universal/src/shared/utils/TemplateSwitcher/index.ts");YUI.add("squarespace-template-picker",function(a){var i=a.Squarespace.TemplatePicker=a.Base.create("TemplatePicker",a.Squarespace.Widgets.SSWidget,[],{initializer:function(){this._hasTransitionedIn=false;this._hasTransitionedOut=false;this._escManagerTarget={close:this.destroy.bind(this)};a.Squarespace.EscManager.removeTarget(this._escManagerTarget)},renderUI:function(){i.superclass.renderUI.apply(this,arguments);var e=a.Node.create('<header class="preview-header"></header>').appendTo(this.get("contentBox"));this._closeButtonEl=e.appendChild('<a class="close-button" href="#"></a>');e.appendChild('<div class="instructions-wrapper"></div>').append('<div class="title">'+this.get("strings.title")+"</div>").append('<div class="description">'+this.get("strings.description")+"</div>");var t=a.Node.create('<div class="preview-viewport"></div>').appendTo(this.get("contentBox"));this._viewportInnerEl=a.Node.create('<div class="inner"></div>').appendTo(t);this._framePlaceholderEl=a.Node.create('<div class="display-placeholder"></div>').appendTo(this._viewportInnerEl);this._loaderEl=a.Node.create('<div class="loading-indicator"><span class="message"></span></div>').appendTo(t);this.get("boundingBox").plug(a.Squarespace.Plugin.ScrollLock);a.one("body").addClass("preview-open");a.later(1,this,function(){this.get("boundingBox").addClass("open")});this.enterLoadingStateWithMessage(s("Loading templates…"));this._framePlaceholderEl.setStyle("display","block");this._showTimer=a.later(i.TRANSITION_IN_DURATION,this,function(){this._hasTransitionedIn=true;this._load();this._iframeSourceTimer&&this._iframeSourceTimer.cancel()})},bindUI:function(){i.superclass.bindUI.apply(this,arguments);this._closeButtonEl.on("click",function(e){e.halt();this.destroy()},this)},getInstalledTemplateWebsiteIds:function(){var e=this.get("installedTemplates");var t={};if(!e||!e.length)return t;for(var a=0;a<e.length;a++)t[e[a].websiteId]=true;return t},_load:function(){var e=a.Squarespace.Context.getInstance().get("website");var t=e.get("websiteType");this._templateSwitcher=new n({container:this._viewportInnerEl.getDOMNode(),installedTemplateWebsiteIds:this.getInstalledTemplateWebsiteIds(),installTemplate:a.bind(function(e){this.fire("install-template",{identifier:e.cloneIdentifier})},this),onLoad:a.bind(this._onLoad,this),websiteType:t})},_onLoad:function(){this.get("boundingBox").addClass("loaded");this._framePlaceholderEl.setStyle("display","none")},_showSpinner:function(){this._hideSpinner();this._spinner=new a.Squarespace.Spinner({color:"light",size:"xx-large",render:this._loaderEl})},_hideSpinner:function(){if(this._spinner){this._spinner.destroy();this._spinner=null}},destroy:function(){a.one("body").removeClass("preview-open");if(!this._hasTransitionedOut){this._hasTransitionedOut=true;this.get("boundingBox").removeClass("open").addClass("fast");a.later(i.TRANSITION_OUT_DURATION,this,function(){i.superclass.destroy.call(this)});this._templateSwitcher&&(this._templateSwitcher=null)}},destructor:function(){this._hideSpinner();if(this._showTimer){this._showTimer.cancel();this._showTimer=null}this._closeButtonEl.remove(true);a.Squarespace.EscManager.removeTarget(this._escManagerTarget)},enterLoadingStateWithMessage:function(e){this.get("boundingBox").removeClass("loaded");this._loaderEl.one("span.message").setContent(e);this._showSpinner()}},{CSS_PREFIX:"sqs-template-picker",TRANSITION_IN_DURATION:500,TRANSITION_OUT_DURATION:300,ATTRS:{strings:{value:{callToAction:s("Install Template"),title:s("Pick a New Template to Install"),description:s("Select a template to install. Installing a template will not affect your live website.")}},websiteType:{valueFn:function(){return a.Squarespace.Context.getInstance().get("website").get("websiteType")}},installedTemplates:{value:[]}}})},"1.0",{requires:["base","node","squarespace-common","squarespace-context","squarespace-escmanager","squarespace-plugin-scroll-lock","squarespace-spinner","squarespace-ss-widget","squarespace-ui-base"]})},"./src/main/webapp/universal/scripts-v6/terms-of-service-overlay.js":function(e,t,a){var s=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var n=a("./src/main/webapp/universal/src/shared/utils/YuiElimination.ts").isYuiClassEnabled;YUI.add("squarespace-terms-of-service-overlay",function(i){if(n("termsOfServiceOverlay"))var t=i.namespace("Squarespace.Widgets").TermsOfService=i.Base.create("termsOfServiceOverlay",i.Squarespace.Widgets.SSWidget,[i.Overlay],{renderUI:function(){t.superclass.renderUI.call(this);this._animateIn()},bindUI:function(){t.superclass.bindUI.call(this);var e=this.get("contentBox");i.Squarespace.EscManager&&this.after("visibleChange",this._toggleEscapeManager,this);i.delegate("click",this._acceptNewToS,e,".button.accept",this);i.delegate("click",this._rejectNewToS,e,".button.cancel, .close-button",this);this.after("frameContentChange",this._updateFrameContent,this)},_toggleEscapeManager:function(){this.get("visible")?i.Squarespace.EscManager.addTarget(this):i.Squarespace.EscManager.removeTarget(this)},_animateIn:function(){this.get("boundingBox").setStyles({opacity:1,transform:"scale(1)"})},_animateOut:function(){var e=new i.Anim({node:this.get("boundingBox"),duration:.3,easing:i.Easing.easeOutStrong,to:{opacity:0,transform:"scale(0.94)"},from:{opacity:1,transform:"scale(1)"}});this._anims.add(e);e.after("end",function(){this.set("visible",false);this.destroy()},this);e.run()},_acceptNewToS:function(e){e.halt();this._setUserToS()},_setUserToS:function(){var e=this.get("websiteSettings");var t=e.get("lastAgreedTermsOfService");var a=this.get("mostRecentToSVersion");e.set("lastAgreedTermsOfService",this.get("mostRecentToSVersion"));e.save(i.bind(function(){i.Squarespace.Analytics.trackInternal("engagement_terms_of_service_updated",{oldTOSVersion:t,agreedTOSVersion:a});this._animateOut()},this))},_rejectNewToS:function(e){e.preventDefault();var t=this.get("websiteSettings").get("mostRecentToSVersion");new i.Squarespace.Widgets.Confirmation({"strings.title":s("Reject Terms of Servce"),"strings.message":s("Are you sure you wish to reject the Terms of Service? You will not be able to edit your website."),"strings.confirm":s("Reject Terms of Service")}).on("confirm",function(){i.Squarespace.Analytics.trackInternal("engagement_terms_of_service_rejected",{rejectedVersion:t});window.location="http://www.squarespace.com"},this)}},{HANDLEBARS_TEMPLATE:"terms-of-service-overlay.html",CSS_PREFIX:"sqs-terms-of-service-overlay",ATTRS:{websiteSettings:{setter:function(e){if(!i.instanceOf(e,i.Squarespace.Models.WebsiteSettings))return new i.Squarespace.Models.WebsiteSettings(e);return e}},mostRecentToSVersion:{},endPoint:{value:"/api/config/acceptTos"},tosURL:{value:"https://www.squarespace.com/terms-of-service"},strings:{value:{title:s("Updated Terms of Service"),accept:s("I accept, continue to my account."),cancel:s("Cancel")}},iframeHeight:{value:400},align:{value:{node:null,points:[i.WidgetPositionAlign.TL,i.WidgetPositionAlign.TL]}},zIndex:{value:300001}}})},"1.0",{requires:["base","overlay","squarespace-escmanager","squarespace-models-website-settings","squarespace-ss-widget","squarespace-terms-of-service-overlay-template","squarespace-util","squarespace-widgets-confirmation"]})},"./src/main/webapp/universal/scripts-v6/text-editor-base.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/utils/RteUtils.js");YUI.add("squarespace-text-editor-base",function(s){var n="insertHTML";s.namespace("Squarespace");s.Squarespace.TextEditorBase=s.Base.create("TextEditorBase",s.Squarespace.SSWidget,[],{renderUI:function(){this._initMenuTimeout&&window.clearTimeout(this._initMenuTimeout);this._initMenuTimeout=window.setTimeout(function e(){this.get("destroyed")||this.initializeMenu()}.bind(this),200)},_onStateChange:function(){console.log("Implement based on device")},initializeEditor:function(){console.log("Implement based on device")},destroyEditor:function(){if(this.editor){var e=this.get("boundingBox").get("parentElement");e&&e.appendChild(this.getData());this.editor.destroy();this.editor=null}this._finishUpdates&&this._finishUpdates()},_renderBox:function(e){this.initializeEditor();var t=this.get("replaceNode");var a=this.get("boundingBox");if(t){t=s.one(t);a.addClass(t.get("className"));var i=t.get("parentElement");i.replaceChild(a,t);return}e?e.appendChild(a):a.inDoc(a.get("ownerDocument"))||s.Node.one(s.config.doc.body).insert(a,0)},bindUI:function(){this.after("editableChange",function(e){this.editor&&this.editor.setEditable(e.newVal)})},destructor:function e(){window.clearTimeout(this._initMenuTimeout);var t=this.get("replaceNode");if(t){t=s.one(t);if(!t.inDoc(t.get("ownerDocument"))){t.setHTML(this.getData(true));this.get("boundingBox").get("parentElement").replaceChild(t,this.get("boundingBox"))}}this.destroyMenu();this.destroyEditor()},createSchema:function(){return i.createSchema({schemaType:this.get("type"),isInline:this.get("isInline"),isLinkable:this.get("hasHyperlink")})},createState:function(){return i.createState({initialData:this.get("initialData"),schema:this.createSchema(),placeholder:this.get("placeholder")})},initializeMenu:function(){console.log("Implement based on device")},destroyMenu:function(){console.log("Implement based on device")},execCommand:function(e,t,a){var i=this.get("commands")[e];if(this.get("savedSelectionPos")){this.editor.setSelection(this.get("savedSelectionPos"));this.set("savedSelectionPos",null)}"function"===typeof i?i(t):e===n?this.editor.insertHTML(t.html):this.editor.execCommand(e,t,a)},_saveCurrentSelection:function(e){void 0===e&&(e=this.editor.getSelectionPos());this.set("savedSelectionPos",e)},fireUpdate:function(){this._html=this.editor.getHTML();this.fire("contentUpdated",{content:this._html})},getData:function(e){(e||void 0===this._html)&&(this._html=this.editor.getHTML());return this._html},setData:function(e){e!==this._html&&this.editor.setContent(e)},focus:function(e){var t;if(e&&"number"===typeof e.top){var a=this.editor.view.posAtCoords(e);a&&(t={from:a.pos,to:a.pos})}this.editor.focus(!!t,{range:t})},blur:function(){this.editor.blur()},isEmpty:function(){return this.editor.getContentSize()<=2&&""===this.editor.getText()},CONTENT_TEMPLATE:null},{CSS_PREFIX:"sqs-rte",ATTRS:{boundingBox:{value:"div",setter:function(e){return s.Node.create("<"+e+"></"+e+">")}},replaceNode:{},initialData:{},type:{},placeholder:{},editable:{},commands:{value:{}},isInline:{value:false},hasHyperlink:{value:true},keymap:{},savedSelectionPos:{value:null}}})},"1.0",{requires:["base","squarespace-ss-widget"]})},"./src/main/webapp/universal/scripts-v6/text-editor-damask-toolbar.js":function(e,t,a){var S=a("./common/temp/node_modules/lodash/clamp.js");var y=a("./common/temp/node_modules/lodash/throttle.js");var _=a("./common/temp/node_modules/@sqs/rte-core/dist/index.js");var C=a("./common/temp/node_modules/@sqs/utils/events/scroll.js");var E=a("./common/temp/node_modules/@sqs/utils/scroll/getScrollParent.js");var w=a("./src/main/webapp/universal/src/shared/constants/LayoutEngineClassnames.js");var A=a("./src/main/webapp/universal/src/shared/constants/TextEditor.js");var T=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var I=a("./common/temp/node_modules/@sqs/styles/variables/baseDamask.js").GRID_PX;var q={isDivider:true};YUI.add("squarespace-text-editor-toolbar",function(i){i.namespace("Squarespace");var u=_.COMMAND;var e=_.keybindings;var r=_.keybindingsToDisplay;var o='<span class="{cssPrefix}-divider"></span>';var l='<label title="{title}" for="{name}" class="{cssPrefix}-select"><span class="{cssPrefix}-select-facade {placeholderClass}">{facadeContent}</span><select name="{name}">{options}</select></label>';var c='<option value="{command}" {selected} {disabled}>{title}{hotKey}</option>';var d='<button type="button" title="{title}{hotKey}" {value} {disabled} class="{cssPrefix}-button {cssPrefix}-button-{icon} {activeClass}">{children}</button>';var t=i.Lang.sub('<html style="height:100%;margin:0;"><body contenteditable=true style="min-height:100%;margin:0;padding:{grid}px;box-sizing:border-box;"><script>document.addEventListener("DOMContentLoaded", function() {document.body.addEventListener("paste", function(e) {e.preventDefault();var text = e.clipboardData.getData("text/plain");document.execCommand("insertText", false, text);});});<\/script></body></html>',{grid:I});var a={};a[e.link]=u.LINK;var p=["editorNode","items","visible","itemStates","selectionType","showLinkPreview","linkId"];function h(e){return i.Lang.sub(e,i.merge.apply(null,Array.prototype.slice.call(arguments,1)))}function g(e,a){return i.Array.find(e,function(e){var t=a[e.command];return t&&true===t.active})}function s(e){e=e||[];var t=e.filter(function(e){return e.items});return t.reduce(function(e,t){e[t.name]=t;return e},{})}function n(e){e=e||{};e=i.merge({hasAlignment:true},e);var t=[A.Items.UNDO,A.Items.REDO,A.Items.BOLD,A.Items.ITALIC];e.hasLink&&t.push(A.Items.LINK);if("classic"===e.type){t.push(q);e.hasAlignment&&t.push(A.Items.ALIGN_LEFT,A.Items.ALIGN_CENTER,A.Items.ALIGN_RIGHT);t.push(A.Items.STYLES,A.Items.QUOTE,A.Items.ORDERED_LIST,A.Items.UNORDERED_LIST,A.Items.OUTDENT,A.Items.INDENT)}t.push(q,A.Items.PASTE_PLAIN,A.Items.CLEAR_FORMAT);return t}var m=i.Squarespace.TextEditorToolbar=i.Base.create("TextEditorToolbar",i.Squarespace.SSWidget,[],{initializer:function(){this.updatePositionOnScroll=this._updatePositionOnScroll.bind(this);this.closeOnScroll=this._closeOnScroll.bind(this);this.updatePositionOnResize=y(this._updatePositionOnResize.bind(this),40,{leading:true,trailing:true})},renderUI:function(){this.get("boundingBox").addClass(w.NONINTERACTIVE_CLASSNAME);this.renderItems();this.renderLinkPicker()},bindUI:function(){var e=this.get("contentBox");document.onpointerdown?e.on("pointerdown",this.handleMouseDown,this):e.on("mousedown",this.handleMouseDown,this);e.on("change",this.handleSelectChange,this)},syncUI:function(){if(this.get("visible")){this.cleanAfterPositioning();this.setupPositioning();this.get("contentBox").get("children").each(this.updateMenuItem.bind(this,this.get("itemStates")))}},syncAfterChange:function(e,t,a){if(!e.visible&&!t.visible)return;var i=this.get("boundingBox");if(!t.visible){this.cleanAfterPositioning();i.addClass(this.getClassName("hidden"));return}if(a||e.items!==t.items){this.setAttrs({selects:s(t.items),forceReRender:false});this.renderItems()}else e.itemStates!==t.itemStates&&this.get("contentBox").get("children").each(this.updateMenuItem.bind(this,t.itemStates));if(e.visible){if(e.editorNode!==t.editorNode||e.items!==t.items){this.cleanAfterPositioning();this.setupPositioning()}}else{i.removeClass(this.getClassName("hidden"));this.setupPositioning()}e.showLinkPreview===t.showLinkPreview&&e.linkId===t.linkId||this.toggleLinkPreview(t.showLinkPreview)},destructor:function(){if(this.linkFlyout){this.linkFlyout.destroy();this.linkFlyout=null}this.cleanAfterPositioning()},destroyMenu:function(){this.destroy(true)},renderItems:function(){var s=this.get("itemStates");var n={cssPrefix:this.constructor.CSS_PREFIX};var e=this.get("items")||[];var t=e.map(function(e){if(e.isDivider)return h(o,n);if(e.items){var t=g(e.items,s);return h(l,n,e,{placeholderClass:t?"":this.getClassName("select-placeholder"),facadeContent:t?t.title:e.placeholder||e.items[0].title,options:e.items.map(function(e){var t=s[e.command];var a=r[e.command];return h(c,e,{selected:t&&t.active?"selected":"",disabled:t&&false===t.enabled?"disabled":"",hotKey:a?" ("+a+")":""})}).join("")})}var a=s[e.command];var i=r[e.command];return h(d,n,e,{activeClass:a&&a.active?this.getClassName("button-active"):"",value:e.command?'value="'+e.command+'"':"",disabled:false===e.enabled?"disabled":"",children:e.children||e.title,hotKey:i?" ("+i+")":""})}.bind(this)).join("");this.get("contentBox").setHTML(t)},resolveLinkAttrs:function(e){return Array.isArray(e)&&e[0]?e[0]:e},updateState:function(e){var t=e.itemStates;var a=t[u.LINK];var i=e.viewFocused;var s=false;var n=this.get("linkId");if(a&&true===a.active){var r=this.resolveLinkAttrs(a.attrs);s=!!r.href;n=r.href?r.href:null}var o=e.editorId||this.get("editorId");var l=this.get("forceReRender")||this.get("editorId")!==o;var c=this.getAttrs(p);i&&this.linkFlyout.get("isEditorOpen")&&this.linkFlyout.close();this.setAttrs({editorId:o,editorNode:e.editorNode||this.get("editorNode"),items:e.items,visible:i||!!this.linkFlyout&&this.linkFlyout.get("isEditorOpen"),itemStates:t,selectionType:e.selectionType,showLinkPreview:i&&s,cursorAtLink:s,editorSelectionCoords:e.editorSelectionCoords,linkId:n,forceReRender:l});this.syncAfterChange(c,this.getAttrs(p),l)},handleCommand:function(e){if(!e)return false;switch(e){case u.LINK:this.toggleLinkEditor();return true;case A.Items.PASTE_PLAIN.command:this.openPasteModal();return true}return this.get("execCommand").call(this,e)},renderLinkPicker:function(){var e=this.get("itemStates")[u.LINK];if(!e||!this.get("hasLink"))return;this.linkFlyout=new window.top.Y.Squarespace.Flyout.LinkEdit({getSelection:function(){return i.config.win.getSelection()}});this.linkFlyout.after(["updateLink","removeLink"],function(){this.get("execCommand").call(this,u.LINK,{href:this.linkFlyout.get("linkUrl")||null,target:this.linkFlyout.get("newWindow")?"_blank":null,textContent:this.linkFlyout.get("textContent")},{skipFocus:true})}.bind(this));this.linkFlyout.on("close",function(){this.get("preserveCurrentSelection").call(this,null)}.bind(this))},updateMenuItem:function(e,t){var a=t.getAttribute("for");var i=t.get("value");var s=this.get("selects");var n=a&&s[a];n?this.updateSelect(t,g(n.items,e),n.placeholder||n.items[0].title):i&&e[i]&&this.updateButton(t,e[i].enabled,e[i].active)},updateSelect:function(e,t,a){var i=e.one(this.getSelector("select-facade"));i.setContent(t?t.title:a);i.toggleClass(this.getClassName("select-placeholder"),!t);var s=e.one("select");s.set("value",t?t.value:"")},updateButton:function(e,t,a){if(false===t){e.removeClass(this.getClassName("button-active"));e.set("disabled",true)}else{e.toggleClass(this.getClassName("button-active"),!!a);e.removeAttribute("disabled")}},handleMouseDown:function(e){e.stopPropagation();if(this.linkFlyout.get("isEditorOpen")){this.linkFlyout.setAttrs({isEditorOpen:false});this.toggleLinkEditor()}e.target.ancestor(this.getSelector("select"),true,this.getSelector("content"))?this.get("preventEditorBlur").call(this):e.preventDefault();"BUTTON"===e.target.get("nodeName")&&this.handleButtonClick(e)},handleButtonClick:function(e){this.handleCommand(e.target.get("value"))},handleSelectChange:function(e){var t=e.target;t&&"SELECT"===t.get("nodeName")&&this.handleCommand(t.get("value"))},getTextContent:function(){var e=this.get("getEditor").call(this);var t=e.view.state;var a=_.getClosestMarkInfo(t.schema.marks[u.LINK],t);var i=a.mark;var s=a.from;var n=a.to;var r=t.selection;var o=r.from;var l=r.to;i&&o>s&&(o=s);i&&l<n&&(l=n);var c=t.doc.cut(o,l).textContent;return c},toggleLinkEditor:function(){if(!this.linkFlyout)return;var e=this.get("itemStates");if(this.linkFlyout.get("isEditorOpen"))this.linkFlyout.close();else if("range"===this.get("selectionType")||e.link.active){var t=this.get("itemStates")[u.LINK];var a=t.attrs?t.attrs[0]||t.attrs:{};this.linkFlyout.setAttrs({anchor:this.get("linkButton"),editorSelectionCoords:this.get("editorSelectionCoords"),textContent:this.getTextContent(),cursorAtLink:this.get("cursorAtLink"),forceUpdate:a.href&&!t.active});this.get("preserveCurrentSelection").call(this);this.linkFlyout.openEditor(a.href,"_blank"===a.target,null,null)}},toggleLinkPreview:function(e){if(!this.linkFlyout)return;var t=this.get("itemStates")[u.LINK];if(e){var a=t.attrs?t.attrs[0]||t.attrs:{};this.linkFlyout.setAttrs({editorSelectionCoords:this.get("editorSelectionCoords"),cursorAtLink:this.get("cursorAtLink"),textContent:this.getTextContent()});this.linkFlyout.openPreview(a.href,"_blank"===a.target,this.get("linkId"))}else this.linkFlyout.get("isPreviewOpen")&&this.linkFlyout.close()},openPasteModal:function(){var e=i.Squarespace.Widgets.ConfirmationMedia;var n=new e({style:e.TYPE.CONFIRM_OR_CANCEL,mediaType:e.TYPE_MEDIA.IFRAME,mediaSrc:{srcDoc:t},className:this.getClassName("paste-modal")+" "+w.DISABLE_DRAG_SELECTION_CLASSNAME,"strings.confirm":T("OK"),"strings.cancel":T("Cancel"),"strings.title":T("Paste as Plain Text"),"strings.message":T("Paste into the box and hit OK. Squarespace will strip out special formatting and insert this content to your document as plain text.")});n.once("show",function(){var e=n.get("boundingBox").one("iframe").getDOMNode();e.contentDocument.body.focus();e.contentDocument.body.contentEditable=true});n.once("confirm",function(){var e=n.get("boundingBox").one("iframe").getDOMNode();var t=e.contentDocument.body;var a=m.PLAIN_TEXT_SCHEMA;if(!a){var i=A.Schemas[A.SchemaTypes.PLAIN_TEXT];a=_.EditorSchema.create(i);m.PLAIN_TEXT_SCHEMA=a}var s=_.cleanHTML(a,t);this.get("execCommand").call(this,"insertHTML",{html:s})},this)},setupPositioning:function(){var e=this.get("editorNode");var t=E(e,false,true)||i.config.doc.body;this.set("scrollNode",t);this.calculatePosition();this.updatePosition();C.addScrollListener(t,this.updatePositionOnScroll);C.addScrollListener(t,this.closeOnScroll);window.addEventListener("resize",this.updatePositionOnResize)},cleanAfterPositioning:function(){var e=this.get("scrollNode");if(e){C.removeScrollListener(e,this.updatePositionOnScroll);C.removeScrollListener(e,this.closeOnScroll)}this.updatePositionOnResize.cancel();window.removeEventListener("resize",this.updatePositionOnResize)},calculatePosition:function(){var e=this.get("boundingBox");var t=this.get("editorNode");var a=this.get("scrollNode");var i=a.ownerDocument.defaultView;var s={top:0,bottom:i.innerHeight,left:0,right:i.innerWidth};var n=t.getBoundingClientRect();var r=["HTML","BODY"].indexOf(a.nodeName)>-1?s:a.getBoundingClientRect();var o=e.get("region");var l=o.height;var c=o.width;this._pos={minTop:Math.max(s.top,r.top)+5,maxTop:Math.min(s.bottom,r.bottom)-5-l,top:n.top-I-l,left:n.left,minLeft:Math.max(s.left,r.left)+I,maxLeft:Math.min(s.right,r.right)-c-I}},updatePosition:function(){var e=this.get("boundingBox");var t=e.getDOMNode();if(this.get("destroyed")||!t||!t.ownerDocument.defaultView)return;e.setStyle("left",S(this._pos.left,this._pos.minLeft,this._pos.maxLeft));e.setStyle("top",S(this._pos.top,this._pos.minTop,this._pos.maxTop))},_updatePositionOnScroll:function(e,t){this._pos.top+=t;this.updatePosition()},_closeOnScroll:function(e,t){var a=this.get("editorNode");if(!a)return;var i=a.getBoundingClientRect();if(i.top>=0&&i.top<=window.innerHeight||i.bottom>=0&&i.bottom<=window.innerHeight||i.top<0&&i.bottom>=window.innerHeight)return;this.set("visible",false)},_updatePositionOnResize:function(){this.calculatePosition();this.updatePosition()},getClassName:function(e){return m.CSS_PREFIX+"-"+e},getSelector:function(e){return"."+this.getClassName(e)}},{CSS_PREFIX:"sqs-rte-toolbar",KEY_COMMAND_MAP:a,PLAIN_TEXT_SCHEMA:null,getItems:n,ATTRS:{cssPrefix:{valueFn:function(){return m.CSS_PREFIX}},render:{valueFn:function(){return i.config.doc.body}},height:{value:33},visible:{value:false},editorNode:{},scrollNode:{},type:{value:"classic"},selectionType:{},selects:{valueFn:function(){return s(this.get("items"))}},linkButton:{getter:function(){return this.get("contentBox").one(this.getSelector("button-"+A.Items.LINK.icon))}},linkId:{},items:{valueFn:function(){return n(this.getAttrs(["type","hasLink"]))||[]}},itemStates:{value:{}},hasLink:{value:true},showLinkPreview:{valueFn:function(){var e=this.get("itemStates");var t=e[u.LINK]&&e[u.LINK].attrs||{};var a=t[0]?t[0].href:t.href;return!!a}},getEditor:{},preventEditorBlur:{},execCommand:{},preserveCurrentSelection:{}}});var f;var v={};var b=i.Squarespace.Singletons.TextEditorToolbar=function(e){var t=e.editorId;v[t]=e;if(!f){f=new m(i.merge(e,{getEditor:function(){if(!v[this.get("editorId")])return{};return v[this.get("editorId")].editor},preventEditorBlur:function(){if(!v[this.get("editorId")])return false;return v[this.get("editorId")].preventEditorBlur()},execCommand:function(e,t,a){if(!v[this.get("editorId")])return false;return v[this.get("editorId")].execCommand(e,t,a)},preserveCurrentSelection:function(e){if(!v[this.get("editorId")])return false;return v[this.get("editorId")].preserveCurrentSelection(e)}}));f.destroyMenu=function(e){delete v[e];if(0===i.Object.size(v)){f.destroy(true);f=null}}}return f};b.KEY_COMMAND_MAP=a;b.getItems=n},"1.0",{requires:["base","squarespace-ss-widget","squarespace-widgets-confirmation-media"]})},"./src/main/webapp/universal/scripts-v6/text-editor-damask.js":function(e,t,a){var i=a("./common/temp/node_modules/lodash/debounce.js");var n=a("./common/temp/node_modules/@sqs/rte-core/dist/index.js");var r=a("./src/main/webapp/universal/src/apps/App/shared/actions/PageSectionsActions.js");var o=a("./src/main/webapp/universal/src/apps/App/shared/stores/PageSectionsStore.js");YUI.add("squarespace-text-editor-damask",function(s){var a=n.default;s.namespace("Squarespace");s.Squarespace.TextEditorDamask=s.Base.create("TextEditor",s.Squarespace.TextEditorBase,[],{initializer:function(){this.publish("mouseDown");this.publish("contentUpdated");this._debouncedFireUpdate=i(this.fireUpdate.bind(this),500,{leading:true,trailing:true});this._finishUpdates=this._debouncedFireUpdate.cancel},initializeMenu:function(){var e=this.get("MenuConstructor");if(e){var t=this.editor.getMenuState();this.menu=new e({editor:this.editor,editorId:this.get("id"),type:this.get("type"),items:this.get("menuItems"),itemStates:t.itemStates,editorFocused:t.viewFocused,selectionType:t.selectionType,execCommand:this.execCommand.bind(this),preventEditorBlur:this.editor.preventEditorBlur,editorNode:this.get("contentBox").getDOMNode(),preserveCurrentSelection:this._saveCurrentSelection.bind(this)})}},updateMenu:function(e,t){if(this.menu){var a=this.editor.getMenuState(e);var i=t.coordsAtPos(e.selection.from,e.selection.to);this.menu.updateState(s.merge(a,{items:this.get("menuItems"),editorNode:this.get("contentBox").getDOMNode(),editorId:this.get("id"),editorSelectionCoords:{x:i.left,y:i.bottom}}))}},destroyMenu:function(){if(this.menu){this.menu.destroyMenu(this.get("id"));this.menu=null}},_fireMenuEvent:function(e){if(this.menu&&this.menu.handleCommand)return this.menu.handleCommand(e);return false},getMenuKeymap:function(){var a=this.get("MenuConstructor");var e={};a&&a.KEY_COMMAND_MAP&&(e=Object.keys(a.KEY_COMMAND_MAP).reduce(function(e,t){e[t]=this._fireMenuEvent.bind(this,a.KEY_COMMAND_MAP[t]);return e}.bind(this),{}));return e},_handlePaste:function(){return true},initializeEditor:function(){var e=this.getMenuKeymap();var t=this.get("contentBox").getDOMNode();this.editor=new a({mountNode:t,editable:this.get("editable"),state:this.createState(),onStateChange:this._onStateChange.bind(this),handleDOMEvents:{mousedown:this._handleMouseDown.bind(this),click:this._stopEventPropagation.bind(this),dblclick:this._stopEventPropagation.bind(this),pointerdown:this._stopEventPropagation.bind(this),contextmenu:this._stopEventPropagation.bind(this),paste:this._handlePaste},keymap:s.merge({},e,this.get("keymap"))})},_handleMouseDown:function(e,t){this._stopEventPropagation(e,t);this.fire("mouseDown",t);o.getState().isSettingsOpen&&r.setIsSettingsOpen({openSettingsId:null,openSectionNode:null,isSettingsOpen:false,openSectionToolbarRect:null})},_stopEventPropagation:function(e,t){t.stopPropagation()},_onStateChange:function(e,t){this.editor.updateState(e);this.updateMenu(e,this.editor.view);t.docChanged&&this._debouncedFireUpdate()}},{ATTRS:{menuItems:{value:[]},MenuConstructor:{}}})},"1.0",{requires:["base","squarespace-ss-widget","squarespace-text-editor-base"]})},"./src/main/webapp/universal/scripts-v6/text-editor-rosetta.js":function(e,t,a){var r=a("./common/temp/node_modules/react/index.js");var o=a("./common/temp/node_modules/react-dom/index.js");var l=a("./common/temp/node_modules/lodash/debounce.js");var c=a("./common/temp/node_modules/@sqs/rte-core/dist/index.js");var u=a("./src/main/webapp/universal/src/apps/App/shared/actions/PageSectionsActions.js");var d=a("./src/main/webapp/universal/src/apps/App/shared/stores/PageSectionsStore.js");var p=a("./common/temp/node_modules/@sqs/core-components/fields/RichTextEditor.js").RichTextToolbar;var h=a("./common/temp/node_modules/lodash/throttle.js");var g=a("./common/temp/node_modules/@sqs/rosetta-tokens/build/lib/index.js");var m=a("./common/temp/node_modules/@sqs/rosetta-utilities/build/lib/index.js");YUI.add("squarespace-text-editor-rosetta",function(i){var s=c.default;i.namespace("Squarespace");var n=null;i.Squarespace.TextEditorRosetta=i.Base.create("TextEditorRosetta",i.Squarespace.TextEditorBase,[],{initializer:function(){this.publish("mouseDown");this.publish("contentUpdated");this._debouncedFireUpdate=l(this.fireUpdate.bind(this),500,{leading:true,trailing:true});this._finishUpdates=this._debouncedFireUpdate.cancel;this._bindVisualViewportListener();this.execCommand=function(){i.Squarespace.TextEditor.superclass.execCommand.apply(this,arguments);return true}.bind(this);this.onOpenItemConfigEditor=function(){this.set("savedSelectionPos",this.editor.getSelectionPos());this.set("isItemConfigEditorOpen",true);this._renderToolbar()}.bind(this);this.onCloseItemConfigEditor=function(){this.set("savedSelectionPos",null);this.set("isItemConfigEditorOpen",false);this._renderToolbar()}.bind(this)},_resetScroll:h(function(){window.scrollTo(0,1)},150),_bindVisualViewportListener:function(){window.visualViewport&&i.UA.ios&&this.get("isMobile")&&window.visualViewport.addEventListener("scroll",this._resetScroll.bind(this))},_unbindVisualViewportListener:function(){window.visualViewport&&window.visualViewport.removeEventListener("scroll",this._resetScroll)},initializeEditor:function(){var e=this.get("contentBox").getDOMNode();var t={bottom:60};var a;try{a=document.querySelector("iframe#sqs-site-frame").contentDocument.body.querySelector('[class*="sqs-cookie-banner-v2"]')}catch(e){console.error("Unable to find the cookie banner",e)}a&&a.classList.contains("BOTTOM")&&(t.bottom=a.getBoundingClientRect().height);this.editor=new s({mountNode:e,editable:this.get("editable"),state:this.createState(),scrollMargin:t,scrollThreshold:t,onStateChange:this._onStateChange.bind(this),handleDOMEvents:{mousedown:this._handleMouseDown.bind(this),click:this._stopEventPropagation.bind(this),dblclick:this._stopEventPropagation.bind(this),pointerdown:this._stopEventPropagation.bind(this),contextmenu:this._stopEventPropagation.bind(this)},keymap:i.merge({},this.get("keymap"))})},initializeMenu:function(){this._renderToolbar()},destroyMenu:function(){this._unbindVisualViewportListener();if(n){n.ownerDocument.body.removeChild(n);n=null}},_renderToolbar:function(e){if(!n){var t=this.get("boundingBox").getDOMNode().ownerDocument;n=t.createElement("div");n.classList.add("toolbar-mount-node");n.classList.add("sqs-prevent-block-focus-change");t.body.appendChild(n)}var a=this.editor.getMenuState(e);var i=r.createElement(p,{fixedMobileToolbar:true,menuProps:{anchorNode:this.editor.view.dom,editor:this.editor,isVisible:a.viewFocused||this.get("isItemConfigEditorOpen"),menuState:a,execCommand:this.execCommand,onOpenItemConfigEditor:this.onOpenItemConfigEditor,onCloseItemConfigEditor:this.onCloseItemConfigEditor,preventEditorBlur:this.editor.preventEditorBlur},mountAt:n,toolbarOptions:this.get("menuItems").map(function(e){if("object"===typeof e&&e.isDivider)return"divider";return e}),zIndex:99999});o.render(i,n)},_handleMouseDown:function(e,t){this._stopEventPropagation(e,t);this.fire("mouseDown",t);d.getState().isSettingsOpen&&u.setIsSettingsOpen({openSettingsId:null,openSectionNode:null,isSettingsOpen:false,openSectionToolbarRect:null})},_stopEventPropagation:function(e,t){t.stopPropagation()},_onStateChange:function(e,t){this.editor.updateState(e);this._renderToolbar(e);t.docChanged&&this._debouncedFireUpdate()}},{ATTRS:{isItemConfigEditorOpen:{value:false},menuItems:{value:[]},contentNode:{},isMobile:{valueFn:function(){var e=m.getBreakpoint(g.breakpoints)||{};return"mobile"===e.platform}}}})},"1.0",{requires:["base","squarespace-ss-widget","squarespace-text-editor-base"]})},"./src/main/webapp/universal/scripts-v6/text-editor.js":function(e,t,a){var i=a("./src/main/webapp/frontend/packages/universal-flags/lib/index.js");var s=a("./common/temp/node_modules/@sqs/rosetta-tokens/build/lib/index.js").breakpoints;var n=a("./common/temp/node_modules/@sqs/rosetta-utilities/build/lib/index.js").getBreakpoint;YUI.add("squarespace-text-editor",function(e){e.namespace("Squarespace");e.Squarespace.TextEditor=i.isRosettaRichTextToolbarLayoutEngineEnabled(n(s))?e.Squarespace.TextEditorRosetta:e.Squarespace.TextEditorDamask},"1.0",{requires:["base","squarespace-ss-widget","squarespace-text-editor-base","squarespace-text-editor-rosetta","squarespace-text-editor-damask"]})},"./src/main/webapp/universal/scripts-v6/toggle.js":function(e,t){YUI.add("squarespace-toggle",function(i){i.namespace("Squarespace.Widgets");i.Squarespace.Widgets.ToggleButton=i.Base.create("toggleButton",i.Widget,[i.WidgetChild],{renderUI:function(){var e=this.getAttrs(["active"]);var t=e.active?"active":"inactive";this.get("contentBox").append('<div class="switch-box-container animate '+t+'"><div class="switch-box"><div class="toggle-box"><div class="togglebg"></div></div></div><div class="switch-shadow">&nbsp;</div><div class="handle-wrapper"><div class="handle">&nbsp</div></div></div>')},destructor:function(){i.detachAll(this.get("id")+"|*")},bindUI:function(){this.get("contentBox").delegate("click",this._onClick,".handle-wrapper",this);this.after(["activeChange","enabledChange"],this.syncUI,this)},_onClick:function(e){e.halt();this.get("enabled")&&this.set("active",!this.get("active"))},syncUI:function(){var e=this.get("contentBox");var t=this.get("boundingBox");var a=e.one(".switch-box-container");var i=e.all(".togglebg, .handle");var s=!!this.get("active");var n=!!this.get("enabled");i.setStyles({marginLeft:null,left:null});a.toggleClass("inactive",!s);a.toggleClass("active",s);t.toggleClass("enable",n);t.toggleClass("disabled",!n)}},{CSS_PREFIX:"sqs-toggle-button",ATTRS:{active:{value:false},enabled:{value:true}}});function e(){e.superclass.constructor.apply(this,arguments)}e.NAME="toggleDragPlugin";e.NS="drag";i.extend(e,i.Plugin.Base,{initializer:function(){this._host=this.get("host");this.afterHostMethod("bindUI",this._afterBindUI)},destructor:function(){i.detachAll(this.get("id")+"|*");this._handleDrag&&this._handleDrag.destroy()},_afterBindUI:function(){var e=this._host.get("contentBox"),t=this.get("id");this._handleDrag=new i.DD.Drag({node:e.one(".handle")});this._handleDrag.plug(i.Plugin.DDProxy);this._handleDrag.on(t+"|drag:start",this._onDragStart,this);this._handleDrag.on(t+"|drag:drag",this._onDragDrag,this);this._handleDrag.on(t+"|drag:end",this._onDragEnd,this)},_onDragStart:function(e){var t=e.target,a=this._host.get("contentBox").one(".handle-wrapper").get("region");t.hasPlugin("con")||t.plug(i.Plugin.DDConstrained,{constrain:a})},_onDragDrag:function(e){var t=e.target;var a=this._host.get("contentBox");var i=this.get("maxValue");var s=a.one(".handle-wrapper").getX();var n=Math.abs(s-t.lastXY[0]);n=Math.max(0,n);n=Math.min(i,n);a.one(".togglebg").setStyle("marginLeft",n);a.one(".handle").setStyle("left",e.target.get("dragNode").getX()-a.one(".handle-wrapper").getX())},_onDragEnd:function(e){var t=e.target;var a=t.get("node");var i=t.con.get("constrain");var s=Math.abs(i.left-i.right);var n=Math.abs(t.nodeXY[0]-t.lastXY[0])/(s-a.get("offsetWidth"));var r=this._host.get("active");n>.5&&this._host.set("active",!r);this._host.get("active")===r&&this._host.syncUI()}},{ATTRS:{resistance:{value:10},maxValue:{value:70}}});i.Squarespace.ToggleDrag=e},"1.0",{requires:["base","dd-constrain","dd-drag","dd-proxy","widget","widget-child"]})},"./src/main/webapp/universal/scripts-v6/touch-event-listener.js":function(e,t){YUI.add("squarespace-touch-event-listener",function(e){e.Squarespace.TouchEventListener=e.SQS.Gallery.TouchEventListener},"1.0",{requires:["@sqs/yui-gallery/touch-event-listener"]})},"./src/main/webapp/universal/scripts-v6/tourdates.js":function(e,t){YUI.add("squarespace-tourdates",function(s){s.namespace("Squarespace.Tourdates");var n=[];s.Squarespace.Tourdates.initializeNode=function(t){var e=!!s.Array.find(n,function(e){return e.get("boundingBox").ancestor(".sqs-block")===t});if(e)return;var a=JSON.parse(t.getAttribute("data-block-json"));var i=new s.Squarespace.Widgets.BandsInTownTourDatesList({artistId:a.artistId,timeframe:a.timeframe,startDate:a.startDate,endDate:a.endDate}).render(t);n.push(i)};s.config.win.Squarespace.onInitialize(s,function e(){s.all(".sqs-block-tourdates[data-block-json]").each(s.Squarespace.Tourdates.initializeNode)});s.config.win.Squarespace.onDestroy(s,function e(){n.forEach(function(e){e.destroy&&e.destroy()});s.all(".sqs-block-tourdates[data-block-json]").each(function(e){e.empty()});n.length=0})},"1.0",{requires:["squarespace-widgets-tourdates-bandsintown"]})},"./src/main/webapp/universal/scripts-v6/tray.js":function(e,t,a){var n=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var o=a("./src/main/webapp/universal/src/shared/i18n/index.ts").pluralize;var l=a("./src/main/webapp/universal/src/shared/utils/UrlUtils.js");var c=a("./src/main/webapp/universal/src/apps/App/shared/actions/FrameActions.js");YUI.add("squarespace-tray",function(r){r.namespace("Squarespace.Widgets");var t=r.Squarespace.Widgets.Tray=r.Base.create("tray",r.Squarespace.Widgets.SSWidget,[],{initializer:function(){this._buttonWidgets=[]},destructor:function(){this._emptyButtons()},bindUI:function(){t.superclass.bindUI.call(this);var e=this.get("id");this.after(e+"|stringsChange",this._afterStringsChange);this.after(e+"|buttonsChange",this._afterButtonsChange)},syncUI:function(){t.superclass.syncUI.call(this);this._uiUpdateText();this._uiSetButtons(this.get("buttons"))},_afterButtonsChange:function(e){this._uiSetButtons(e.newVal,e.animate)},_afterStringsChange:function(e){this._uiUpdateText()},_uiUpdateText:function(){var e=this.get("contentBox");e.one(".title").empty().setContent(r.Escape.html(this.get("strings.title")));e.one(".title").setAttribute("title",r.Escape.html(this.get("strings.title")));e.one(".subtitle").empty().setContent(this.get("strings.subtitle"))},_emptyButtons:function(){r.Array.invoke(this._buttonWidgets,"destroy");this._buttonWidgets=[]},_registerButtonWidget:function(e){this._buttonWidgets.push(e)},_uiSetButtons:function(e,t){var n=this.get("contentBox").one(this.getProperty("CONTROLS_CONTAINER"));if(!n)throw new Error("No CONTROLS_CONTAINER in the template to put buttons in.");if(t){n.plug(r.Squarespace.Plugins.SizeAnimator);n.sizeAnimator.hold()}this._emptyButtons();n.empty();r.Array.each(e,function(a,e,t){var i=this._createButtonWidget(a);this._registerButtonWidget(i);var s=n;i.on(this.get("id")+"|click",function(e){if(!a.allowMouseEvents){e.halt();e.stopImmediatePropagation()}this.fire("button-click",{button:i,buttonConfig:a,originalClickEvent:e});if(a.action){e.button=i;e.buttonConfig=a;var t=a.action;r.Lang.isString(t)&&(t=this[t]);t.call(a.context||this,e)}},this);i.get("boundingBox").addClass("label-"+l.createUrlSafeString(a.label));a.container&&(s=this.get("contentBox").one(a.container));i.render(s)},this);t&&n.sizeAnimator.release()},_createButtonWidget:function(e){return new(this.get("buttonCtor"))({"strings.text":e.label,className:e.className})}},{CSS_PREFIX:"sqs-tray",CONTROLS_CONTAINER:".buttons",TEMPLATE:'<div class="header"><div class="title"></div><div class="spinner-wrapper"></div><div class="subtitle"></div></div><div class="body"><div class="buttons"></div></div>',ATTRS:{strings:{value:{title:"",subtitle:""}},buttonCtor:{value:r.Squarespace.Widgets.Button},buttons:{value:[],validator:function(e,t){for(var a=1;a<e.length;a++){var i=e[a];if(!i.label){false;return false}}return true}}}});var e=r.Squarespace.Widgets.HeaderTray=r.Base.create("headerTray",r.Squarespace.Widgets.Tray,[r.WidgetParent,r.WidgetChild],{renderUI:function(){e.superclass.renderUI.call(this);this.get("loading")?this._startSpinner():this._stopSpinner()},bindUI:function(){e.superclass.bindUI.call(this);this.after(this.get("id")+"|loadingChange",function(e){e.newVal?!!this.get("rendered")&&this._startSpinner():this._stopSpinner()},this)},_startSpinner:function(){this._uiUpdateText();var e=this.get("contentBox").one(".spinner-wrapper");this._spinnerTimer&&this._spinnerTimer.cancel();this._spinner=new r.Squarespace.Spinner({render:e,color:"dark"})},_stopSpinner:function(){if(this._spinnerTimer){this._spinnerTimer.cancel();this._spinnerTimer=null}if(this._spinner){this._spinner.destroy();this._spinner=null}},_createButtonWidget:function(e){var t={"strings.text":e.label,href:e.href,name:e.name,className:e.className,active:e.active,testAttribute:e.testAttribute};return new r.Squarespace.Widgets.Button(t)}},{CSS_PREFIX:"sqs-header-tray",TEMPLATE:'<div class="header"><div class="title"></div><div class="spinner-wrapper"></div><div class="subtitle"></div></div><div class="body"><div class="buttons"></div></div>',ATTRS:{loading:{value:false,validator:r.Lang.isBoolean}}});var a=r.Squarespace.Widgets.LibraryManagerHeaderTray=r.Base.create("libraryManagerHeaderTray",r.Squarespace.Widgets.HeaderTray,[],{_uiSetButtons:function(){a.superclass._uiSetButtons.apply(this,arguments)},bindUI:function(){a.superclass.bindUI.call(this);this.get("inlineTitleEditingEnabled")&&this.get("contentBox").one(".header .title").on("click",this._navigateFrameToPageRoot,this);this.get("searchFieldEnabled")&&this._attachQuickSearchKeyBindings()},_navigateFrameToPageRoot:function(){c.setUrl(this.get("collection").get("fullUrl"))},_attachQuickSearchKeyBindings:function(){this._registerEvent(r.one(r.config.win).on("keyup",function(e){if(e.target.test("textarea,input,[contenteditable]"))return;var t=70;if([t].indexOf(e.keyCode)>-1){e.stopImmediatePropagation();this.revealQuickSearch()}},this))},revealQuickSearch:function(e){if(this._quickSearch){this._quickSearch.destroy();this._quickSearch=null}var t=this.get("contentBox").one(".search.sqs-button");if(!t){false;return}this._quickSearch=this._createQuickSearch();this._quickSearch.render(t);t.addClass("active");r.later(10,this,function(){this._quickSearch.get("boundingBox").addClass("show")});this._quickSearch.on("attemptedClose",function(){this._quickSearch.destroy();this._quickSearch=null;t.removeClass("active")},this)},_createQuickSearch:function(){var e=new r.Squarespace.ContentManagerWidgets.ProductQuickSearch({collectionId:this.get("collection").get("id"),itemIdRequestHandler:this.get("itemIdRequestHandler")});e.addTarget(this);return e}},{CSS_PREFIX:"sqs-library-manager-header-tray",TEMPLATE:'<div class="header"><div class="title"></div><div class="filters"></div><div class="pagination"></div><div class="subtitle"></div></div><div class="body"><div class="buttons"></div></div>',ATTRS:{collection:{validator:r.Squarespace.AttrValidators.isInstanceOf("Y.Squarespace.Models.ContentCollection")},inlineTitleEditingEnabled:{value:true},searchFieldEnabled:{value:false},itemIdRequestHandler:{value:function(){}}}});var i=r.Squarespace.Widgets.TabbedHeaderTray=r.Base.create("tabbedHeaderTray",r.Squarespace.Widgets.HeaderTray,[],{initializer:function(){this.publish("tab-switch-requested",{emitFacade:true,defaultFn:this._updateActiveButtonClass,context:this,preventable:true});this.after(this.get("id")+"|button-click",function(e){null!==e.button.ancestor(this.getProperty("CONTROLS_CONTAINER"))&&this.fire("tab-switch-requested",{button:e.button})},this)},_createButtonWidget:function(e){var t={"strings.text":e.label,href:e.href,name:e.name,className:e.className,active:e.active};return new r.Squarespace.Widgets.TabButton(t)},_uiSetButtons:function(){i.superclass._uiSetButtons.apply(this,arguments);var t=this.get("defaultTab");var e=this.get("boundingBox").one(this.getProperty("CONTROLS_CONTAINER")).get("children");if(0===e.size())return;t?e.each(function(e){e.hasClass("name-"+t)&&e.addClass("active")},this):e.item(0).addClass("active")},_updateActiveButtonClass:function(i){this.get("boundingBox").one(this.getProperty("CONTROLS_CONTAINER")).get("children").each(function(e,t,a){e.toggleClass("active",i.button.get("boundingBox")===e)},this)}},{CSS_PREFIX:"sqs-tabbed-header-tray",CONTROLS_CONTAINER:".tabs",TEMPLATE:'<div class="header"><div class="title"></div><div class="spinner-wrapper"></div><div class="subtitle"></div></div><div class="body"><div class="tabs"></div><div class="buttons"></div></div>',ATTRS:{defaultTab:{}}});var s=r.Squarespace.Widgets.ActionTray=r.Base.create("actionTray",r.Squarespace.Widgets.Tray,[],{renderUI:function(){r.Squarespace.Widgets.ActionTray.superclass.renderUI.call(this)},bindUI:function(){var e=this.get("id");this.get("contentBox").on(e+"|click",function(e){e.halt()});this.after(e+"|visibleChange",this._afterVisibleChange);this.after([e+"|buttonsChange",e+"|countChange",e+"|showThresholdChange",e+"|stringsChange"],this._afterUIAttributeChange)},syncUI:function(){this._uiSetCount(this.get("count"));this._uiSetButtons(this.get("buttons"));this._uiSetTitle(this.get("strings.title"));this._uiSetSubtitle(this.get("strings.subtitle"))},_afterVisibleChange:function(e){if(!e.newVal)return;var t=this.get("boundingBox");var a=this.get("scrollNode");var i=0;a&&(i=a.get("offsetWidth")-a.get("clientWidth"));t.setStyle("right",null);i&&t.setStyle("right",parseInt(t.getStyle("right"),10)+i+"px")},_afterUIAttributeChange:function(e){switch(e.attrName){case"showThreshold":case"count":this._uiSetCount();return;case"buttons":this._uiSetButtons(this.get("buttons"));return;case"strings":"strings.subtitle"===e.subAttrName?this._uiSetSubtitle(this.get("strings.subtitle")):"strings.title"===e.subAttrName?this._uiSetTitle(this.get("strings.title")):this._uiSetCount();return;default:false}},_uiSetCount:function(){var e=this.get("count");this.get("contentBox").one(".description .top").setContent(o({one:"{%n} Item selected",other:"{%n} Items selected"},e));var t=this.get("showThreshold");e>=t?this.show():this.hide()},_uiSetSubtitle:function(e){this.get("contentBox").one(".bottom").setContent(e)},_uiSetTitle:function(e){this.get("contentBox").one(".top").setContent(e)},_setEnabled:function(e){e||this.hide();return e},show:function(){if(!this.get("enabled"))return;s.superclass.show.call(this)},enable:function(){this.set("enabled",true)},disable:function(){this.set("enabled",false)}},{CSS_PREFIX:"sqs-action-tray",TEMPLATE:'<div class="action-tray"><div class="description"><div class="top"></div><div class="bottom"></div></div><div class="buttons"></div></div>',ATTRS:{strings:{value:{title:"",subtitle:n("This action will be applied to all selected items above.")}},visible:{value:false},enabled:{value:true,setter:"_setEnabled",lazyAdd:false},buttons:{value:[],validator:function(e,t){for(var a=1;a<e.length;a++){var i=e[a];if(!i.action){false;return false}if(!i.label){false;return false}}return true}},count:{value:0},showThreshold:{value:1},scrollNode:{valueFn:function(){return this.get("boundingBox").siblings(r.Squarespace.NodeUtils.isScrollable).item(0)}}}});r.Squarespace.Widgets.ProductGridActionTray=r.Base.create("ProductGridAcionTray",r.Squarespace.Widgets.ActionTray,[],{},{CSS_PREFIX:"sqs-product-grid-action-tray",TEMPLATE:'<div class="product-grid-action-tray"><div class="description"><div class="top"></div><div class="bottom"></div></div><div class="buttons"></div></div>',ATTRS:{buttonCtor:{value:r.Squarespace.Widgets.VanillaButton}}})},"1.0",{requires:["array-invoke","base","squarespace-attr-validators","squarespace-content-manager-widgets-product-quick-search","squarespace-dialog-button","squarespace-dialog-tab","squarespace-node-utils","squarespace-plugin-sizeanimator","squarespace-spinner","squarespace-ss-widget","squarespace-util"]})},"./src/main/webapp/universal/scripts-v6/tumblr-connected-account-editor.js":function(e,t){YUI.add("squarespace-tumblr-connected-account-editor",function(a){a.namespace("Squarespace").TumblrAccountEditor=a.Base.create("tumblrAccountEditor",a.Squarespace.ModelEditorDialog,[],{sanitizeDialogData:function(t){t.metaData.primaryBlog=t.primaryBlog;a.Array.each(t.metaData.blogs,function(e){e.primary=t.primaryBlog===e.name});return t},getDialogData:function(){var e=a.Squarespace.TumblrAccountEditor.superclass.getDialogData.call(this);e.primaryBlog=e.metaData.primaryBlog;return e}})},"1.0",{requires:["base","squarespace-model-editor"]})},"./src/main/webapp/universal/scripts-v6/typekit-utils.js":function(e,t,a){var s=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var i=a("./src/main/webapp/universal/src/shared/utils/UrlUtils.js");var c=a("./src/main/webapp/universal/src/shared/utils/loadScript.js");YUI.add("squarespace-typekit-utils",function(l){l.namespace("Squarespace");l.Squarespace.TypekitUtils={appendPreviewScript:function(t,e){var a=this._getFrameStatic(e);if(!l.Lang.isValue(a))return;var i=e?l.Squarespace.Damask.ContextGlobals.get("Y"):l;var s=a.SQUARESPACE_CONTEXT.website.typekitId;if(s){var n="//use.typekit.net/"+s+".js";c(n,{doc:i.config.doc}).then(function e(){try{window.Typekit.load()}catch(e){}})}else{var r=i.one("body");if(r.one("#typekit-preview-script")){l.Lang.isFunction(t)&&t();return}var o="https://use.typekit.net/previewkits/pk-v1.js?t";c(o,{doc:i.config.doc,id:"typekit-preview-script"}).then(function e(){l.Lang.isFunction(t)&&t()})}},initStaticContextFonts:function(e,t){var a=this._getFrameStatic(t);if(!l.Lang.isValue(a))return;a.SQUARESPACE_CONTEXT.typekitFonts={};a.SQUARESPACE_CONTEXT.typekitkitFonts={};a.SQUARESPACE_CONTEXT.website.typekitId?this._initCustomFonts(e,t):this._initDefaultFonts(e,t)},_initDefaultFonts:function(t,e){var a=this._getFrameStatic(e);if(!l.Lang.isValue(a))return;l.Data.get({url:"/api/fonts/typekit",success:function(e){l.Array.each(e,function(e){var t=i.createUrlSafeString(e.normalName);e.familyName=t;a.SQUARESPACE_CONTEXT.typekitFonts[t]=e});t&&t()}})},_initCustomFonts:function(a,e){var i=this._getFrameStatic(e);if(!l.Lang.isValue(i))return;var t=i.SQUARESPACE_CONTEXT.website.typekitId;l.jsonp("https://typekit.com/api/v1/json/kits/"+t+"/published?callback={callback}",{context:this,on:{failure:function(){console.log("TypekitUtils: Custom kit load failure.")},success:function(e){var t=l.Object.getValue(e,["kit","families"]);l.Lang.isValue(t)&&l.Array.each(t,function(e){var t=e.css_names[0];i.SQUARESPACE_CONTEXT.typekitkitFonts[t]={familyName:t,normalName:e.name,foundry:"Typekit",variationNames:this._getVariationNames(e.variations),variations:e.variations,id:e.id,type:s("Adobe Fonts Project ID")}},this);a&&a()},timeout:function(){console.log("TypekitUtils: Custom kit load timeout.")}},timeout:3e4})},_getVariationNames:function(e){var n=[];l.Array.each(e,function(e,t){var a=e[1];var i=e[0];var s="";switch(a){case"1":s+="Thin";break;case"2":s+="Extra Light";break;case"3":s+="Light";break;case"4":s+="Regular";break;case"5":s+="Medium";break;case"6":s+="Semibold";break;case"7":s+="Bold";break;case"8":s+="Extra Bold";break;case"9":s+="Black";break;default:s+=a+"00";break}switch(i){case"n":s+="";break;case"i":s+=" Italic";break;default:s+=" "+i;break}n[t]=s});return n},_getFrameStatic:function(e){if(e)return l.Squarespace.Damask.ContextGlobals.get("Static");return l.config.win.Static}}},"1.0",{requires:["jsonp","squarespace-damask-context-globals","squarespace-util"]})},"./src/main/webapp/universal/scripts-v6/ui-base.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/universal/src/shared/utils/humanizeDate.js");YUI.add("squarespace-ui-base",function(d){d.namespace("Squarespace");d.mix(d.Node.DOM_EVENTS,{message:true});d.Squarespace.DIALOG_ZINDEX_BASE=3e4;d.Anim._intervalTime=10;var p=Number;d.Anim.DEFAULT_SETTER=function(e,t,a,i,s,n,r,o){var l=e._node,c=l._node,u=r(s,p(a),p(i)-p(a),n);if(null===l._node){false;return}if(c)if("style"in c&&(t in c.style||t in d.DOM.CUSTOM_STYLES)){o=o||"";l.setStyle(t,u+o)}else"attributes"in c&&t in c.attributes?l.setAttribute(t,u):t in c&&(c[t]=u);else l.set?l.set(t,u):t in l&&(l[t]=u)};d.Squarespace.TextShrink=d.Base.create("TextShrink",d.Plugin.Base,[],{initializer:function(){var e=this.get("host");d.Lang.isValue(this.get("parentEl"))||this.set("parentEl",e.ancestor());this._setupEl();d.on("domready",this.refresh,this);this._resizeEvent=d.on("resize",function(){this._timeout&&this._timeout.cancel();this._timeout=d.later(100,this,this.refresh)},d.config.win,this);this._tweakChange=d.Global.on("tweak:change",this.refresh,this);this._tweakSaveResetClose=d.Global.on(["tweak:save","tweak:reset","tweak:close"],this.refresh,this)},refresh:function(){this._reset();this._setupEl();this._adjust()},isOverflowing:function(){var e=this._getWidths();Math.abs(e.el-e.parentEl)<=3&&(e.el=e.parentEl=Math.min(e.el,e.parentEl));return e.el>e.parentEl},_adjust:function(){var e=this.get("host");var t=this._getWidths();if(this.isOverflowing()){var a=this._getStyleValue(e,"fontSize");a=t.parentEl/t.el*a;this._setFontSize(Math.floor(a))}return true},_setFontSize:function(e){var t=this.get("host");var a=this.get("minFontSize");a&&e<a&&(e=a);isNaN(e)||t.setStyle("fontSize",e+"px")},_getStyleValue:function(e,t){return parseInt(e.getStyle(t),10)},_getWidths:function(){var e=this.get("host");var t=this.get("parentEl");var a=e.get("scrollWidth");var i=this._getStyleValue(t,"paddingLeft")+this._getStyleValue(t,"paddingRight");var s=t.get("offsetWidth")-i;0!==a&&d.Lang.isValue(a)||(a=e.get("offsetWidth"));return{parentEl:s,el:a}},_setupEl:function(){var e=this.get("host");e.setAttribute("data-shrink-original-size",this._getStyleValue(e,"fontSize"));this.letterSpacing=this._getStyleValue(e,"letterSpacing")/e.getAttribute("data-shrink-original-size")+"em";e.setStyle("letterSpacing",this.letterSpacing)},_reset:function(){var e=this.get("host");e.setStyles({letterSpacing:null,fontSize:null})},destructor:function(){this._resizeEvent&&this._resizeEvent.detach();this._tweakChange&&this._tweakChange.detach();this._tweakSaveResetClose&&this._tweakSaveResetClose.detach()}},{ATTRS:{minFontSize:{value:11},parentEl:{value:null}},NS:"TextShrink"});d.Squarespace.SimpleFlexibleGrid=d.Base.create("SimpleFlexibleGrid",d.Plugin.Base,[],{initializer:function(){this._stylesheetEl=d.Node.create("<style></style>");this.get("host").append(this._stylesheetEl);this._resizeEvent=d.on("resize",this.syncUI,d.config.win,this);this.syncUI()},syncUI:function(){var e;e=this.get("minWidth")?Math.floor(this.get("container").get("offsetWidth")/this.get("minWidth")):Math.ceil(this.get("container").get("offsetWidth")/this.get("maxWidth"));this._stylesheetEl.set("innerHTML",this.get("selector")+"{width:"+100/e+"% !important;}");this.get("host").fire("simpleFlexibleGridSyncUI")},destructor:function(){this._stylesheetEl.remove();this._resizeEvent.detach()}},{ATTRS:{container:{},selector:{},maxWidth:{},minWidth:{}},NS:"simple-flexible-grid"});d.Squarespace.Mouse={lastX:100,lastY:100,client:{lastX:100,lastY:100},debug:function(){this.isDebugging=true;if(!this._debugNode){this._debugNode=d.one(d.config.doc.body).appendChild("<div></div>");this._debugNode.setStyles({position:"fixed",width:50,height:50,borderRadius:"50%",background:"rgba(20, 170, 255, 0.5)",marginLeft:-25,marginTop:-25,zIndex:Math.pow(10,5),pointerEvents:"none"})}this._debugNode.setStyles({top:d.Squarespace.Mouse.lastY,left:d.Squarespace.Mouse.lastX})}};d.Object.getValue(d.config.win,"Static.SQUARESPACE_CONTEXT.authenticatedAccount".split("."))&&d.on(d.UA.mobile?"touchmove":"mousemove",function(e){d.Squarespace.Mouse.lastX=e.pageX;d.Squarespace.Mouse.lastY=e.pageY;d.Squarespace.Mouse.client.lastX=e.clientX;d.Squarespace.Mouse.client.lastY=e.clientY;d.Squarespace.Mouse.isDebugging&&d.Squarespace.Mouse.debug()},d.one("html"));d.Squarespace.Image={loadAndFit:function(e,t){var a=new Image;a.src=t;d.one(a).on("load",function(e,t,a){t.set("src",a.src);t.resizeToParent({scale:"cover"})},this,e,a)},straighten:function(e,t,a,i){var s=(i<0?360-i:i)%360,n=s;s>=90&&(n=s%90-90);s>=180&&(n=-1*s%180-180);s>=270&&(n=s%270-90);var r=Math.abs(n)*(Math.PI/180);var o;o=a>t?(t*Math.cos(r)+a*Math.sin(r))/t:(a*Math.cos(r)+t*Math.sin(r))/a;e.setStyle("transform","rotate("+i+"deg) scale("+Math.abs(o)+")")}};d.Squarespace.Position=Class.create({initialize:function(e){this.EDGE_MARGIN=20;this.avoidElX=e.avoidElX;this.avoidElY=e.avoidElY;this.xdir=e.xdir;this.ydir=e.ydir;this.x=e.x;this.y=e.y;this.xo=e.xo?e.xo:0;this.yo=e.yo?e.yo:0;this.w=e.w;this.h=e.h;this.initialX=this.getX();this.initialY=this.getY()},setX:function(e){this.x=e},setY:function(e){this.y=e},getX:function(){return this.x+this.getXO()},getY:function(){return this.y+this.getYO()},getXY:function(){return[this.getX(),this.getY()]},getXAdj:function(){return this.initialX-this.getX()},getYAdj:function(){return this.initialY-this.getY()},getXO:function(){return(this.avoidElX&&"right"===this.xdir?this.avoidElX.get("offsetWidth"):0)+this.xo},getYO:function(){return(this.avoidElY&&"top"===this.ydir?-this.avoidElY.get("offsetHeight"):0)+this.yo},isRightViolation:function(){return this.x+this.w-Math.abs(this.getXO())+this.EDGE_MARGIN>d.one(document.body).get("winWidth")},isLeftViolation:function(){return this.x-Math.abs(this.getXO())-this.EDGE_MARGIN<0},isTopViolation:function(){return this.y-Math.abs(this.getYO())-this.EDGE_MARGIN<d.one(document.body).get("docScrollY")},isBottomViolation:function(){return this.y+this.h-Math.abs(this.getYO())+this.EDGE_MARGIN>d.one(document.body).get("winHeight")+d.one(document.body).get("docScrollY")},reflectFix:function(){if("right"===this.xdir&&this.isRightViolation()){this.xdir="left";this.getX=function(){return this.x-this.w-this.getXO()+11}}else if("left"===this.xdir&&this.isLeftViolation()){this.xdir="right";this.getX=function(){return this.x+this.w+this.getXO()}}if("bottom"===this.ydir&&this.isBottomViolation()){this.ydir="top";this.getY=function(){return this.y-this.h-this.getYO()};console.log("bottom violation .. now "+this.getY())}else if("top"===this.ydir&&this.isTopViolation()){this.ydir="bottom";this.getY=function(){return this.y+this.h+this.getYO()};console.log("top violation")}if(this.getY()-this.EDGE_MARGIN<0){this.getY=function(){return d.one(document.body).get("winHeight")-this.h-this.EDGE_MARGIN};this.ydir="bottom"}else if(this.getY()+this.h+this.EDGE_MARGIN>d.one(document.body).get("winHeight")+d.one(document.body).get("docScrollY")){this.getY=function(){return d.one(document.body).get("winHeight")+d.one(document.body).get("docScrollY")-this.EDGE_MARGIN-this.h};this.ydir="top"}if(this.getX()-this.EDGE_MARGIN<0){this.getX=function(){return this.EDGE_MARGIN};this.ydir="left"}else if(this.getX()+this.w+this.EDGE_MARGIN>d.one(document.body).get("winWidth")){this.getX=function(){return d.one(document.body).get("winWidth")-this.w-this.EDGE_MARGIN};this.ydir="right"}if(this.getY()<d.one(document.body).get("docScrollY")){console.log("fixing y offscreen issues.");this.yo=d.one(document.body).get("docScrollY")+this.EDGE_MARGIN-this.y}},nudgeFix:function(){this.isRightViolation()?this.getX=function(){return d.one(document.body).get("winWidth")+d.one(document.body).get("docScrollX")-this.w-this.EDGE_MARGIN}:this.isLeftViolation()&&(this.getX=function(){return this.EDGE_MARGIN});this.isBottomViolation()?this.getY=function(){return d.one(document.body).get("winHeight")+d.one(document.body).get("docScrollY")-this.h-this.EDGE_MARGIN}:this.isTopViolation()&&(this.getY=function(){return this.EDGE_MARGIN})},overflowFix:function(){this.isRightViolation()?this.x=d.one(document.body).get("winWidth")+d.one(document.body).get("docScrollX")-this.w-this.EDGE_MARGIN:this.isLeftViolation()&&(this.x=this.EDGE_MARGIN);this.isBottomViolation()?this.y=d.one(document.body).get("winHeight")+d.one(document.body).get("docScrollY")-this.h-this.EDGE_MARGIN:this.y-Math.abs(this.getXO())-this.EDGE_MARGIN<0&&(this.y=this.EDGE_MARGIN)}});d.Squarespace.ToolTipManager={canShow:true,disableTooltips:function(){this.canShow=false;if(this.currentTip){this.currentTip.hide();this.currentTip=null}},enableTooltips:function(){this.canShow=true}};d.Squarespace.ToolTip=Class.create({initialize:function(e){this.params=e;var t=d.all(this.params.target);if(0===t.size()){false;return}void 0===this.params.showTimeout&&(this.params.showTimeout=1200);void 0===this.params.width&&(this.params.width=250);void 0===this.params.style&&(this.params.style="info");this.mouseOffset=15;this.events=[];t.each(function(e){this.events.push(e.on("mouseover",function(e){this.lastX=e.pageX;this.lastY=e.pageY;this.move();if(this.showTimer)return;this.showTimer=d.later(this.params.showTimeout,this,this.show)},this));this.events.push(e.on("mouseout",function(e){if(this.showTimer){this.showTimer.cancel();this.showTimer=null}this.hide()},this));this.events.push(e.on("click",function(e){if(this.params.clickToShow){this.show();e.halt()}else this.hide()},this))},this);this.events.push(d.Global.on("manager:change-mode",function(e){this.hide()},this))},destroy:function(){for(var e=0;e<this.events.length;++e)this.events[e].detach();if(this.el){this.el.remove();this.el=null}this.events=[];this.destroyed=true;this.shown=false},move:function(){if(!this.el)return;this.position.x=this.lastX;this.position.y=this.lastY;this.a?this.el.setStyles({left:this.position.getX()+"px"}):this.el.setStyles({left:this.position.getX()+"px",top:this.position.getY()+"px"})},show:function(){if(this.el||this.destroyed||this.shown)return;if(!d.Squarespace.ToolTipManager.canShow&&!this.params.dialogTooltip)return;this.el=d.Node.create('<div class="sqsp-tooltip "'+this.params.style+'><div class="title">'+this.params.title+"</div></div>");this.params.body&&this.el.append('<div class="description">'+this.params.body+"</div>");d.one(document.body).append(this.el);this.position=new d.Squarespace.Position({xdir:"right",ydir:"bottom",x:this.lastX,y:this.lastY,xo:this.mouseOffset,yo:this.mouseOffset,w:this.el.get("offsetWidth"),h:this.el.get("offsetHeight")});this.position.reflectFix();this.el.setStyles({left:this.position.getX()+"px",top:this.position.getY()-this.position.yo+"px",width:this.params.width+"px",zIndex:2000000001,opacity:0});this.params.icon&&this.el.setStyle("backgroundImage","url("+this.params.icon+")");this.shown=true;this.a=new d.Anim({node:this.el,to:{top:this.position.getY(),opacity:1},duration:.3,easing:d.Easing.easeOutStrong});this.a.on("end",function(){this.a=null},this);this.a.run();d.Squarespace.ToolTipManager.currentTip=this},hide:function(){if(!this.el)return;var e=new d.Anim({node:this.el,to:{top:this.position.getY()+15,opacity:0},duration:.3,easing:d.Easing.easeOutStrong});e.on("end",function(){this.get("node").remove()});e.run();this.el=null;this.a=null;this.shown=false}});d.Squarespace.Lightbox=Class.create({defaultOpts:{overlayShowDuration:.35,contentShowDuration:.6,margin:0,opacity:1,transition:"fade",clickAnywhereToExit:true,name:null,content:"<div>&nbsp;</div>",theme:"black",overlayStyle:"orb"},name:"Lightbox",initialize:function(e){this.enabled=true;this.params=d.merge(this.defaultOpts,e);this.params.containerNode||(this.params.containerNode=d.one("body"));this.params.transition||(this.params.transition="fade");if(!this.params.zIndex){d.Squarespace.DIALOG_ZINDEX_BASE+=10;this.params.zIndex=d.Squarespace.DIALOG_ZINDEX_BASE}this.events=[]},enable:function(){this.enabled=true;this.overlayEl&&this.overlayEl.setStyle("display","block")},disable:function(){this.enabled=false;this.overlayEl&&this.overlayEl.setStyle("display","none")},getContentEl:function(){return this.contentEl},show:function(){var e="sqs-lightbox"+(this.params.name?" sqs-lightbox-"+this.params.name:"");d.Lang.isArray(this.params.classNames)&&(e=e+" "+this.params.classNames.join(" "));this.contentEl=d.Node.create('<div class="'+e+'"></div>');d.Lang.isArray(this.params.content)?this.params.content.forEach(function(e){this.contentEl.append(e)},this):this.contentEl.append(this.params.content);this.contentEl.setStyles({position:"fixed",opacity:"0",zIndex:this.params.zIndex});this.events.push(d.on("resize",this.position,d.one(window),this));this.params.disableNormalClose||d.Squarespace.EscManager.addTarget(this);this.params.containerNode.append(this.contentEl);if(this.params.contentOnly)this._showContent();else{var t="sqs-lightbox-overlay"+(this.params.name?" sqs-lightbox-overlay-"+this.params.name:"")+" "+this.params.theme;this.params.name&&(t+=" sqs-lightbox-overlay-"+this.params.name);this.params.overlayStyle&&(t+=" sqs-lightbox-overlay-style-"+this.params.overlayStyle);d.Lang.isArray(this.params.classNames)&&(t=t+" "+this.params.classNames.join(" "));this.overlayEl=d.Node.create('<div class="'+t+'"></div>');this.overlayEl.setStyles({zIndex:this.params.zIndex-1});this.params.containerNode.append(this.overlayEl);this.fire("showing");this.a=d.Squarespace.Transitions.getTransition({el:this.overlayEl,opacity:this.params.opacity,name:"fade",direction:"in",duration:this.params.overlayShowDuration});this.a.on("end",function(){this.fire("overlay-visible");this.a=null;this._showContent()},this);this.a.run();this.params.disableNormalClose?this.events.push(d.on("click",function(e){e.halt()},this.overlayEl,this)):this.events.push(d.on("click",this.close,this.overlayEl,this))}this.params.clickAnywhereToExit&&this.events.push(d.on("click",this.hide,this.contentEl,this))},position:function(){if(!this.enabled)return;var e=d.one(document).get("winWidth");var t=d.one(document).get("winHeight");var a,i;a=e<this.naturalW+2*this.params.margin?e-2*this.params.margin:this.naturalW;i=t<this.naturalH+2*this.params.margin?t-2*this.params.margin:this.naturalH;var s=(e-a)/2;var n=(t-i)/2;if(this.contentAttached){this.contentEl.setStyles({left:s+"px",top:n+"px",width:a+"px"});this.params.noHeightConstrain||this.contentEl.setStyles({height:i+"px"});this.resizeTarget&&this.resizeTarget.resizeToParent({scale:"contain"})}this.fire("position",{width:a,height:i,verticalWidth:e,verticalHeight:t,maxWidth:e-2*this.params.margin,maxHeight:t-2*this.params.margin})},_showContent:function(){this.contentAttached=true;this.resizeTarget=this.contentEl.one(".resize-target");this.naturalW=this.contentEl.one("*").get("offsetWidth");this.naturalH=this.params.height||this.contentEl.one("*").get("offsetHeight");this.position();this.fire("content-ready");var e=d.Squarespace.Transitions.getTransition({el:this.contentEl,name:this.params.transition,direction:"in",duration:this.params.contentShowDuration});e.on("end",function(){this.fire("content-visible")},this);e.run()},close:function(e){if(!this.params.clickAnywhereToExit&&(!e||this.overlayEl&&this.overlayEl.compareTo(e.target)))return;this.hide()},hide:function(){var e;if(!this.enabled)return;this.a&&this.a.stop();this.a=null;this.fire("hiding");d.Squarespace.EscManager.removeTarget(this);if(this.overlayEl){e=d.Squarespace.Transitions.getTransition({el:this.overlayEl,name:"fade",direction:"out",duration:this.params.overlayShowDuration});this.params.overlayShowDuration>this.params.contentShowDuration&&(this.a=e);e.run()}e=d.Squarespace.Transitions.getTransition({el:this.contentEl,name:this.params.transition,direction:"out",duration:this.params.contentShowDuration});this.a||(this.a=e);e.run();this.a.on("end",function(){this.destroy();this.fire("hidden")},this)},destroy:function(){for(var e=0;e<this.events.length;++e)this.events[e].detach();this.contentEl&&this.contentEl.remove();this.overlayEl&&this.overlayEl.remove();this.contentEl=null;this.overlayEl=null;this.events=[]}});d.augment(d.Squarespace.Lightbox,d.EventTarget);d.Squarespace.CustomAnim=Class.create({initialize:function(e){this.params=e},cancel:function(){},stop:function(){}});d.augment(d.Squarespace.CustomAnim,d.EventTarget);d.augment(d.Squarespace.CustomAnim,d.Attribute);d.Squarespace.Transitions={STANDARD_DURATION:.3,getTransition:function(e){if(!e.el||!e.el._node){false;return new d.Anim}e.duration||(e.duration=d.Squarespace.Transitions.STANDARD_DURATION);return d.Squarespace.Transitions.transitionsByName[e.name](e)},transitionsByName:{fade:function(e){return new d.Anim({node:e.el,to:{opacity:d.Lang.isValue(e.opacity)?e.opacity:"in"===e.direction?1:0},duration:d.Squarespace.Transitions.STANDARD_DURATION,easing:d.Easing.easeOutStrong})},scale:function(t){return new(Class.extend(d.Squarespace.CustomAnim,{run:function(){t.opacity||(t.opacity=1);d.Lang.isValue(t.duration)||(t.duration=d.Squarespace.Transitions.STANDARD_DURATION);var e=this.params.el;if("in"===this.params.direction){e.setStyles({transform:"scale(.95)",opacity:0});d.later(10,e,e.setStyles,{transitionProperty:"transform, opacity",transitionDuration:t.duration+"s",transitionTimingFunction:"ease-out","backface-visibility":"hidden"});d.later(20,e,e.setStyles,{transform:"scale(1)",opacity:t.opacity})}else{e.setStyles({transform:"scale(1)",opacity:t.opacity});d.later(10,e,e.setStyles,{transitionProperty:"transform, opacity",transitionDuration:t.duration+"s",transitionTimingFunction:"ease-out",backfaceVisibility:"hidden"});d.later(20,e,e.setStyles,{transform:"scale(.95)",opacity:0})}d.later(1e3*t.duration+100,this,function(){this.fire("end",{_event:true})})}}))(t)},none:function(e){return new(Class.extend(d.Squarespace.CustomAnim,{run:function(){"in"===this.params.direction?this.el.setStyle("opacity",1):this.el.setStyle("opacity",0);this.fire("end")}}))(e)}}};d.Squarespace.Effects={bounce:function(e){e.setStyles({transform:"scale(1)"});d.later(10,e,e.setStyles,{transitionProperty:"transform, opacity",transitionDuration:".1s",transitionTimingFunction:"ease-out",backfaceVisibility:"hidden"});d.later(20,e,e.setStyles,{transform:"scale(1.1)"});d.later(100,e,e.setStyles,{transform:"scale(1)"})},focus:function(e){e.setStyles({boxShadow:"0px 0px 0px rgb(20, 170, 255)"});d.later(10,e,e.setStyles,{transitionProperty:"boxShadow",transitionDuration:".2s",transitionTimingFunction:"ease-out"});d.later(20,e,e.setStyles,{boxShadow:"0px 0px 10px rgb(20, 170, 255)"});d.later(200,e,e.setStyles,{boxShadow:null})},blink:function(e){var t=new d.Anim({node:e,to:{opacity:0},duration:.6,easing:d.Easing.easeOutStrong});t.on("end",function(){var e=new d.Anim({node:this.get("node"),to:{opacity:1},duration:.6,easing:d.Easing.easeOutStrong});e.on("end",function(){});e.run()});t.run()},shimmy:function(e){e.setStyles({transform:"translateX(0px)"});d.UA.safari?d.later(10,e,e.setStyles,{webkitTransitionProperty:"-webkit-transform",webkitTransitionDuration:".3s",webkitTransitionTimingFunction:"cubic-bezier(0.175, 0.885, 0.32, 1.275)"}):d.later(10,e,e.setStyles,{transitionProperty:"transform",transitionDuration:".3s",transitionTimingFunction:"cubic-bezier(0.175, 0.885, 0.32, 1.275)"});d.later(20,e,e.setStyles,{transform:"translateX(-33px)"});d.later(200,e,e.setStyles,{transform:null})}};d.augment(d.Node,Class.create({intersectXY:function(e,t){var a=this.get("region");return a.left<e&&e<a.right&&a.top<t&&t<a.bottom},forceClass:function(e,t){this.toggleClass(e,!!t)},data:function(e){var t=this._node;if(e)while(t){if(t.data&&-1!==t.className.indexOf(e))return t.data;t=t.parentNode}else while(t){if(t.data)return t.data;t=t.parentNode}return null},setNodeData:function(e){this._node.data=e}}));d.Squarespace.RelativeTimeDisplay=d.Base.create("RelativeTimeDisplay",d.Plugin.Base,[],{initializer:function(){this.timer=d.later(this.get("interval"),this,this.syncUI,{},true);this.syncUI()},syncUI:function(){var e=Math.floor(((new Date).getTime()-this.get("date").getTime())/1e3);e<60?0===e?this.get("host").setContent(i("just now")):this.get("host").setContent(i("about {secondsDifference} seconds ago",{secondsDifference:e})):this.get("host").setContent(s(this.get("date"),true))},destructor:function(){this.timer.cancel()}},{NS:"RelativeTimeDisplay",CSS_NAMESPACE:"sqs-action-overlay",ATTRS:{date:{valueFn:function(){return new Date}},interval:{value:5e3}}});d.Squarespace.PositionAnimator=d.Base.create("PositionAnimator",d.Plugin.Base,[],{hold:function(){this.set("originalTop",this.get("host").get("offsetTop"));this.set("originalLeft",this.get("host").get("offsetLeft"));this.previousPosition=this.get("host").getStyle("position")},release:function(e){var t=this.get("host").get("offsetTop");var a=this.get("host").get("offsetLeft");var i=this.get("baseSpeed")+(e?0:.2*Math.random());var s=e?0:200*Math.random();var n=this.get("originalTop")-t;var r=this.get("originalLeft")-a;this.get("host").setStyles({position:"relative",top:n,left:r,transition:"none"});var o=this;var l=this.get("host").anim({top:0,left:0},{from:{top:n,left:r},duration:i,end:function(){if(!this.get("node")._node)return;this.get("node").setStyles({position:this.previousPosition,top:null,left:null,transition:null});o.get("releasedFn")&&o.get("releasedFn")();o.fire("released")}});d.later(s,l,l.run)},destructor:function(){}},{NS:"positionAnimator",ATTRS:{originalTop:{},originalLeft:{},releasedFn:{value:false},baseSpeed:{value:.2}}});d.Anim.behaviors.translate={set:function(e,t,a,i,s,n,r){var o=r(s,parseInt(a[0],10),parseInt(i[0],10)-parseInt(a[0],10),n);var l=r(s,parseInt(a[1],10),parseInt(i[1],10)-parseInt(a[1],10),n);e._node.setStyles({transform:"translate("+o+"px, "+l+"px)"})},get:function(e){false;return[0,0]}}},"1.0",{requires:["anim","attribute","base","event-custom","node","plugin"]})},"./src/main/webapp/universal/scripts-v6/ui-templates.js":function(e,t){YUI.add("squarespace-ui-templates",function(a){var e=a.Base.create("UITemplates",a.Base,[],{render:function(e,t){var a=this.getCompiledTemplate(e);if(!a)throw new Error(this.name+": Could not find UITemplate by the name of: "+e+". Recompile templates?");return a(t||{})},renderAsNodeOrDocFrag:function(e,t){return a.Node.create(this.render(e,t))},getCompiledTemplate:function(e){var t=this.get("compiledTemplates")[e];if(!t)throw new Error(this.name+": A template by the name "+e+" does not exist.");return t}},{ATTRS:{compiledTemplates:{readOnly:true,getter:function(){var e=a.Handlebars.templates;if(!a.Lang.isObject(e))throw new Error(this.name+": No templates are available. Have you loaded your template module?");return e}}}});a.namespace("Squarespace").UITemplates=new e},"1.0",{requires:["base","handlebars-base"]})},"./src/main/webapp/universal/scripts-v6/uploader.js":function(e,t,a){var u=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/universal/src/shared/constants/MediaProcessingErrors.js");var i=a("./src/main/webapp/universal/src/shared/utils/SqsVersion.js");var n=a("./src/main/webapp/universal/src/shared/utils/setDragEffect.js");var d=a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts");var p=a("./src/main/webapp/frontend/packages/enums/Flag.js");YUI.add("squarespace-uploader",function(l){l.namespace("Squarespace");if(l.Squarespace.Utils.isInDamaskFrame()&&!i.isV8()){l.Squarespace.Uploader=l.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Uploader");return}var c={ERR_FILE_UPLOAD:u("Upload failed, please retry"),ERR_FILE_PROCESSING:u("Error processing file, please retry."),INVALID_SIZE_TITLE:u("File Size Limit Exceeded"),INVALID_SIZE:u("The file <strong>{name}</strong> is too large. The maximum allowed file size is <strong>{size}MB</strong>."),INVALID_TYPE_TITLE:u("Only {typeDescription} Allowed"),INVALID_TYPE:u("The file <strong>{name}</strong> does not appear to be a supported {type} file."),HINT_FILE_UPLOAD:u("Add a file"),HINT_FILE_UPLOAD_CLICK_ONLY:u("Click here to add a file")};if("none"===l.Uploader.TYPE){console.error("non-functional uploader");return}l.mix(l.FileHTML5,{isValidFile:function(e){var t=l.config.win.File;var a;try{a=l.Squarespace.Damask.ContextGlobals.fromFrame("File")}catch(e){console.warn("[FileUploader] Could not find bottomFrameFile.")}return t&&(e instanceof t||e instanceof a)}},true);l.Squarespace.Uploader=l.Base.create("uploader",l.Uploader,[l.WidgetChild],{initializer:function(e){this.set("swfURL","/combo/yui/?3.10.1/uploader/assets/flashuploader.swf");this.set("buttonClassNames",{hover:"",active:"",focus:""});this.after(["dragenter","dragover","dragleave","drop"],this._ddHandler,this);this._files={};this.get("fileFilters")||this.addAttr("fileFilters",{value:null});this.after("uploadprogress",this._onUploadFileProgress,this);this.after("uploadcomplete",this._onUploadFileComplete,this);this.on("uploaderror",this._onUploadFileFailure,this);this.on("fileListChange",this._fileListChange,this);this.after("fileFiltersChange",this._fileFiltersChange,this);if(l.Data.DEBUG&&false){this.on("fileuploadstart",function(e){console.log("[UPLOAD] SEND:  "+this.get("uploadURL")+" (POST) : ",l.clone(e.target._files[e.file.get("id")].postData))},this);this.on("uploadcomplete",function(e){console.log("[UPLOAD] RECV:  "+this.get("uploadURL")+" (POST) : ",l.clone(e.target._files[e.file.get("id")].postData))},this)}e.fileFilters&&this.set("fileFilters",e.fileFilters)},destructor:function(){var e=this.get("dragAndDropArea");e&&e.removeClass("drop-active");this._jobOnceCompleteEvt&&this._jobOnceCompleteEvt.detach();this._jobOnceFailureEvt&&this._jobOnceFailureEvt.detach()},cleanupFile:function(e){if(!e)return;var t=e.get("id");this.set("fileList",this.get("fileList").filter(function(e){return e.get("id")!==t}),{source:"cleanupFile"});delete this._files[t]},bindUI:function(){l.Squarespace.Uploader.superclass.bindUI.call(this);this.on("selectButtonLabelChange",function(e){this.get("selectFilesButton").one(".text").setContent(e.newVal)},this)},_onUploadFileProgress:function(e){var t=e.file&&e.file.get("id");var a=this._files[t];var i=a&&a.placeholder&&a.placeholder[l.Squarespace.Plugin.ProgressBar.NS];if(i){i.set("show",true);i.set("progress",e.percentLoaded)}},_onUploadFileComplete:function(t){var e=t.file&&t.file.get("id");var a=this._files[e]||{};var i=a.placeholder&&a.placeholder[l.Squarespace.Plugin.ProgressBar.NS];var s=a.placeholder&&a.placeholder[l.Squarespace.Plugin.ProgressSpinner.NS];var n=t.data;if("string"===typeof n)try{n=l.JSON.parse(n)}catch(e){this._onUploadFileFailure(t)}if(n.error){this._onServerRejectFile(t,n);return}if(i){i.set("progress",100);i.set("show",false)}else false;this.get("fileComplete")&&this.get("fileComplete")(a,n);if(!this.get("createJob")){i&&i.set("show",false);s&&s.set("show",false);this.cleanupFile(t.file);this.fire("upload-complete",l.JSON.parse(t.data));return}if(n&&n.job){s&&s.set("show",true);this._processResponse(n,a)}},_processResponse:function(e,t){if(e&&e.job){var a=t.job=this.get("createJob")(t,e);if(a){a.get("id")||a.set("id",t.id);this._jobOnceCompleteEvt=a.once("complete",l.bind(this._onJobHandler,this,"jobComplete",t));this._jobOnceFailureEvt=a.once("failure",l.bind(this._onJobHandler,this,"jobFailure",t));Static.JOB_MANAGER.addJob(a)}}},_onServerRejectFile:function(e,t){new l.Squarespace.Widgets.Alert({"strings.title":u("Upload Error"),"strings.message":t.error});this.fire("upload-failure");this.cleanupFile(e.file)},_onUploadFileFailure:function(e){var t=this.fileDataFromFile(e.file);t.error={type:s.UPLOAD,message:c.ERR_FILE_UPLOAD};e.fileData=t;this.cleanupFile(e.file);this.abort()},_onJobHandler:function(e,t,a){var i=t.placeholder&&t.placeholder[l.Squarespace.Plugin.ProgressSpinner.NS];i&&i.set("show",false);if(t.id&&!this._files[t.id])return console.log("file upload aborted");"jobFailure"===e&&(t.error={type:s.PROCESSING,message:c.ERR_FILE_PROCESSING});this.get(e)&&this.get(e)(t,a.target);this.cleanupFile(t.file);this.fire(e,{job:a.target,fileData:t})},_ddEventHandler:function(e){e.stopPropagation();e.preventDefault();if(l.Array.indexOf(e._event.dataTransfer.types,"Files")>-1)switch(e.type){case"dragenter":this.fire("dragenter",{originalEvent:e});break;case"dragover":this.fire("dragover",{originalEvent:e});break;case"dragleave":this.fire("dragleave",{originalEvent:e});break;case"drop":var t=e._event.dataTransfer.files,a=[],i=this.get("fileFilterFunction"),s;i?l.each(t,function(e){var t=new l.FileHTML5(e);i(t)&&a.push(t)}):l.each(t,function(e){a.push(new l.FileHTML5(e))});if(a.length>0){s=this.get("fileList");this.set("fileList",this.get("appendNewFiles")?s.concat(a):a);this.fire("fileselect",{fileList:a})}this.fire("drop",{fileList:a});break}},getDataTransferFromEvent:function(e){return l.Object.getValue(e,"domEvent._event.dataTransfer".split("."))||l.Object.getValue(e,"originalEvent._event.dataTransfer".split("."))},_ddHandler:function(e){var t=this.get("dragAndDropArea");if(t){var a=this.getDataTransferFromEvent(e);if("uploader:dragover"===e.type||"uploader:dragenter"===e.type){t.addClass("drop-active");n(a,"move")}else{t.removeClass("drop-active");n(a,"none")}}},uploadAll:function(){var e=this.get("fileList");if(e&&0===e.length)return;var t=this.get("preflight");t?t(l.bind(function(){l.each(this.get("fileList"),function(e,t){this._processFile(this.fileDataFromFile(e))},this);l.Squarespace.Uploader.superclass.uploadAll.call(this)},this)):l.Squarespace.Uploader.superclass.uploadAll.call(this)},abort:function(){this.set("fileList",[])},fileDataFromFile:function(e){if(e)return this._files[e.get("id")]},validateFile:function(e){e=e.get?this.fileDataFromFile(e):e;var t=e.file;var a=[];t.get("size")>1024*this.get("maxSize")*1024&&!d.isFeatureEnabled(p.ALLOW_VIP_SIZE_UPLOADS)&&a.push({title:c.INVALID_SIZE_TITLE,message:l.substitute(c.INVALID_SIZE,{name:l.Escape.html(t.get("name")),size:this.get("maxSize")})});if(this._extensionCheck&&!this._extensionCheck.test(t.get("name"))){var i=this.get("fileFilters").map(function(e){return e.description});var s=i.length>1?u("{sub1} or {sub2}",{sub1:i.slice(0,-1).join(","),sub2:i[i.length-1]}):i[0];var n={typeDescription:s,name:l.Escape.html(t.get("name")),type:s.toLowerCase().replace(/s\b/g,"")};a.push({title:l.substitute(c.INVALID_TYPE_TITLE,n),message:l.substitute(c.INVALID_TYPE,n)})}var r=this.get("validateFileFn");if(l.Lang.isFunction(r)){var o=r(t,e);l.Lang.isObject(o)&&a.push(o)}a.length&&(e.invalid=a);return!a.length},makeDefaultErrorBlock:function(e){var t=e.file?e:this.fileDataFromFile(e);var a=t&&t.error;if(!a)return"";var i=l.Node.create('<div class="failed"><div class="message">'+a.message+'</div><div class="filename">'+t.file.get("name")+'</div><div class="button"><div class="button-title">'+u("Dismiss")+"</div></div></div>");return i},_fileFiltersChange:function(e){var a=[];if(!e.newVal)return;l.each(e.newVal,function(e){var t=e.extensions.split(";").map(function(e){return"(?:"+e.slice(2)+"$)"});a=a.concat(t)},this);this._extensionCheck=new RegExp(a.join("|"),"i")},_setFileFilters:function(){if(!this._fileInputField)return;if(this.get("fileFilters").length>0){var e=[];var t=this.get("fileFilters");for(var a=0;a<t.length;a++)e+=t[a].acceptTypes;this._fileInputField.set("accept",e)}else this._fileInputField.set("accept","")},_fileListChange:function(e){if("cleanupFile"===e.source)return;var s={};var n=false;var t=this.get("uploadLimit");!this.get("multipleFiles")&&e.newVal.length>1&&(e.newVal=[e.newVal[0]]);if(l.Lang.isNumber(t)&&e.newVal.length>t){e.newVal=e.newVal.slice(0,t);var a=u("You have exceeded the upload limit! Only your first {uploadLimit} will be uploaded.",{uploadLimit:t});new l.Squarespace.Widgets.Alert({"strings.title":u("Upload Limit Exceeded"),"strings.message":a})}var r=[];l.each(e.newVal,function(e,t){var a=e.get("id");if(this._files[a]){r.push(e);return}var i=this._processFile({id:a,file:e,index:t});if(i.invalid){false;r.push(e);return}s[a]=i;n=true;!s[a].placeholder&&this.get("addPlaceholder")&&(s[a].placeholder=this.get("addPlaceholder")(s[a]));false;delete this._files[a]},this);if(r.length)for(var i=0;i<r.length;i++)e.newVal.remove(r[i]);this.get("removePlaceholder")&&l.each(this._files,function(e,t){this.queue&&this.queue.cancelUpload(e.file);e.job&&Static.JOB_MANAGER.removeJobById(e.job.id);this.get("removePlaceholder")(e)},this);this._files=s;n&&this.get("autoUpload")&&l.later(0,this,this.uploadAll)},_processFile:function(e){this.validateFile(e);var t=this.get("processFile");t&&t(e);e.postData=l.merge(e.postData||{},{fileName:e.file.get("name"),fileSize:e.file.get("size")});var a=this.get("postVarsPerFile");a[e.id]=e.postData;this.set("postVarsPerFile",a);return e},_makeDefaultSelectFilesButton:function(){return l.Node.create('<button class="upload-indicator image" tabindex="0"><div class="icon">&nbsp;</div><div class="text">'+this.get("selectButtonLabel")+"</div></button>")}},{CSS_PREFIX:"sqs-uploader",ATTRS:{processFile:{},addPlaceholder:{},removePlaceholder:{},preflight:{},createJob:{},fileComplete:{},jobComplete:{},jobFailure:{},autoUpload:{value:false},isTransient:{value:false},isGlobal:{value:false},transientItemId:{value:""},transientItemUrl:{value:""},maxSize:{value:20},uploadLimit:{value:null},uploadURL:{valueFn:function(){return"/api/commondata/"+(this.get("isGlobal")?"SaveGlobalMedia":"SaveMedia")},setter:function(e){return l.Data.addCrumb(e)}},selectButtonLabel:{value:"flash"===l.Uploader.TYPE?c.HINT_FILE_UPLOAD_CLICK_ONLY_HINT:c.HINT_FILE_UPLOAD},selectFilesButton:{valueFn:"_makeDefaultSelectFilesButton",setter:function(e){if(!e)return this._makeDefaultSelectFilesButton();return e}},validateFileFn:{},persistTransient:{value:false,validator:l.Squarespace.AttrValidators.isBoolean}}})},"1.0",{requires:["base","file-html5","node","squarespace-attr-validators","squarespace-damask-context-globals","squarespace-plugin-progress-bar","squarespace-plugin-progress-spinner","squarespace-util","squarespace-widgets-alert","uploader","widget-child"]})},"./src/main/webapp/universal/scripts-v6/upsell/product-violations.js":function(e,t,a){var c=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var u=a("./src/main/webapp/frontend/packages/enums/CollectionTypes.js");var i=a("./src/main/webapp/frontend/packages/enums/CollectionOrdering.js");var s=a("./src/main/webapp/universal/src/shared/constants/Constants.js");var d=a("./src/main/webapp/universal/src/shared/utils/BlockFeatureGatingUtils.js");var n=a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts");var p=a("./src/main/webapp/frontend/packages/enums/Flag.js");YUI.add("squarespace-upsell-product-violations",function(r){r.namespace("Squarespace.Upsell");function o(e){if(e.get("type")===u.PRODUCTS){if(n.isFeatureEnabled(p.NESTED_CATEGORIES))return s.NESTED_CATEGORIES_LIMIT;return s.MAX_PRODUCTS_IN_COLLECTION}if(e.get("ordering")===i.USER)return s.MAX_ITEMS_IN_USER_ORDERABLE_COLLECTION;if(e.get("ordering")===i.MUSIC_ALBUM)return s.MAX_TRACKS_IN_ALBUM;return 99999}function l(e){return r.Squarespace.Models.Inventory.getViolation(e)}r.Squarespace.Upsell.getMaxItemCountForCollection=o;r.Squarespace.ProductViolations={isAllowedToAddItemToCollection:function(s,n){return r.Squarespace.Promises.create(function(e,t){var a=s.get("nextDisplayIndex");var i=o(s);if(a+n>i){new r.Squarespace.Widgets.Alert({"strings.title":c("Page Max Size Reached"),"strings.message":c("This page has a maximum size of {maxItemCount} items. We recommend adding an additional page to hold your items.",{maxItemCount:i})});return t()}if(s.get("type")===u.PRODUCTS)return l(n).then(e).catch(function(e){d.showUpsellConfirmation(e)});e(true)})}}},"1.0",{requires:["base","squarespace-models-inventory","squarespace-models-plan","squarespace-promises"]})},"./src/main/webapp/universal/scripts-v6/util-authenticated.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/stores/AccessPermissionStore.js");YUI.add("squarespace-util-authenticated",function(e){e.namespace("Squarespace");e.Squarespace.UtilAuthenticated={userHasAccessPermission:function(e){return i.hasPermission(e)},isSquarespaceAdmin:function(){return i.isAdmin()}}},"1.0",{requires:["squarespace-util"]})},"./src/main/webapp/universal/scripts-v6/util.js":function(e,t,a){var s=a("./src/main/webapp/frontend/packages/enums/WebsiteType.js");var n=a("./src/main/webapp/frontend/packages/enums/StatusConstants.js");var r=a("./common/temp/node_modules/@sqs/cookie-cutter/index.js");var o=a("./src/main/webapp/universal/src/shared/utils/analytics/trackInternal.ts");var l=a("./src/main/webapp/universal/src/shared/utils/LogoutAPI.js");var c=a("./src/main/webapp/universal/src/shared/utils/isAppleiPadOS13.js");YUI.add("squarespace-util",function(m){m.Squarespace.API_ROOT="/api/";m.Squarespace.REST_API_ROOT="/api/rest/";m.Squarespace.Utils={logoutAndReloadPage:function(){l.logout().then(function(){document.location.reload()}).catch(function(e){false})},logout:function(){if(this.LOGGING_OUT||!Static.SQUARESPACE_CONTEXT.authenticatedAccount)return;this.LOGGING_OUT=true;l.logout().then(function(){m.Global.fire("squarespace:logout");var e="/";m.config.win.CONFIG_PANEL&&(e=window.CONFIG_PANEL.get("previewFrame").get("url"));document.location.href=["http://",document.location.host,e,"?logout=true"].join("");m.Squarespace.Utils.removeSharedSSIdentity()}).catch(function(e){console.error(e)})},getGuid:function(){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return e()+e()+e()+e()+e()},getBrowserClassName:function(){var e={gecko:"browser-gecko",safari:"browser-safari",ie:"browser-msie"};var a="";m.Object.some(e,function(e,t){if(m.UA[t]){a=e;return true}});c()&&(a+=" ipad-os-thirteen");return a},isCoverPageOnly:m.cached(function(){return m.Object.getValue(Static,"SQUARESPACE_CONTEXT.website.websiteType".split("."))===s.COVER_PAGE}),isParkingPage:m.cached(function(){return m.Object.getValue(Static,"SQUARESPACE_CONTEXT.website.websiteType".split("."))===s.PARKING_PAGE}),isIAP:m.cached(function(){return m.Object.getValue(Static,["SQUARESPACE_CONTEXT","website","siteStatus","value"])===n.RESOLD}),isIAPGracePeriod:m.cached(function(){return m.Object.getValue(Static,["SQUARESPACE_CONTEXT","website","siteStatus","value"])===n.RESOLD_GRACE_PERIOD}),isDeveloperModeEnabled:function(){return!!m.Object.getValue(m.config.win,"Static.SQUARESPACE_CONTEXT.website.developerMode".split("."))},isInDamaskFrame:function(){try{return(window.top.Y||window.top.YUI_NOT_YET_LOADED)&&window.top.Y!==m}catch(e){return false}},areCookiesEnabled:function(){m.Lang.isUndefined(this._cookiesEnabled)&&(this._cookiesEnabled="cookie"in document&&(document.cookie.length>0||(document.cookie="test").indexOf.call(document.cookie,"test")>-1));return this._cookiesEnabled},storeSharedSSIdentity:function(){try{var e={identifier:m.Object.getValue(Static,["SQUARESPACE_CONTEXT","website","identifier"])};var t=btoa(JSON.stringify(e));r.set("ss_lastid",t,{domain:Static.SQUARESPACE_CONTEXT.appDomain,path:"/"})}catch(e){false}},removeSharedSSIdentity:function(){try{r.set("ss_lastid",{domain:Static.SQUARESPACE_CONTEXT.appDomain,expires:new Date(0),path:"/"})}catch(e){false}},onPointerAction:function(e,t,a){var i=Array.prototype.slice.call(arguments);i.splice(1,0,"on");return m.Squarespace.Utils._attachPointerAction.apply(this,i)},_attachPointerAction:function(e,t,a,i){var s=Array.prototype.slice.call(arguments);s.splice(0,2);s.splice(0,0,"click");return e[t].apply(e,s)}};m.Squarespace.Marketing={trackLanding:function(){var e=m.QueryString.parse(document.location.search.substring(1));var t=["source","campaign","subcampaign","channel","subchannel","refer","variation","mkwid"];var a={landing:document.location.href,refer:document.referrer,rk:parseInt(99999999*Math.random(),10)};navigator.language?a.lang=navigator.language.toLowerCase():navigator.browserLanguage&&(a.lang=navigator.browserLanguage.toLowerCase());self.screen&&(a.screen=screen.width+"x"+screen.height);for(var i=0;i<t.length;++i){var s=t[i];s in e&&(a[s]=e[s])}var n=new Image(1,1);n.src="/api/track/Track?"+m.QueryString.stringify(a)}};m.Squarespace.Analytics={trackInternal:function(e,t,a){o(e,t).then(a)}};m.namespace("Squarespace.Lang").isPercentage=function(e){return m.Lang.isString(e)&&e.search("%")>0};m.namespace("Squarespace.Lang").sub=function(e,i){var t=/\{\s*([^|}]+?)\s*(?:\|([^}]*))?\s*\}/g;if(!e.replace)return e;return e.replace(t,function(e,t){var a=m.Object.getValue(i,t.split("."));if(m.Lang.isUndefined(a))return e;return a})};if(!m.Base)return;if(m.Color){var t=m.Color.toRGB;m.Color.re_RGBA=/^rgba\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+),\s*(\d+(?:\.\d+)?)\)$/i;m.Color.toRGB=function(e){if(m.Color.re_RGBA.exec(e))return"rgb("+RegExp.$1+","+RegExp.$2+","+RegExp.$3+")";return t(e)}}m.SQSAnim=m.Base.create("SQSAnim",m.Anim,[],{run:function(){if(this.get("destroyed")||null===this.get("node")._node||!this.get("node").inDoc()){this.fire("end");return this}return m.Anim.prototype.run.call(this)}});var i=function(e,t,a,i){e/=i/2;if(e<1)return a/2*e*e*e+t;e-=2;return a/2*(e*e*e+2)+t};m.augment(m.Node,Class.create({anim:function(e,t,a){t=m.merge({node:this,duration:.5,easing:i,to:e},t);this.activeAnim&&this.activeAnim.stop(true);this.activeAnim=new m.SQSAnim(t);this.activeAnim.on("end",function(){delete this.activeAnim},this);t.end&&this.activeAnim.on("end",t.end,a||t.context);t.start&&this.activeAnim.on("start",t.start,a||t.context);this.nodedestroynotifier||this.plug(m.Squarespace.NodeDestroyNotifier,{onDestroy:function(){this.activeAnim&&this.activeAnim.stop(true)},context:this});return this.activeAnim},getAdjustedDimensions:function(e){var t=this;e=e||{};e.scale||(e.scale="cover");e.align||(e.align="center");var a=t.get("parentNode");var i=this.getAttribute("data-image-dimensions");var s;var n;if(i){i=i.split("x");i={width:parseInt(i[0],10),height:parseInt(i[1],10)};s=i.width;n=i.height}else{if(!t.getData("width")&&!t.getData("height")){t.setData("width",e&&e.width?parseInt(e.width,10):t.getAttribute("width")||t.get("offsetWidth"));t.setData("height",e&&e.height?parseInt(e.height,10):t.getAttribute("height")||t.get("offsetHeight"))}s=m.Squarespace.Lang.isPercentage(t.getData("width"))?a.get("offsetWidth")*(parseInt(t.getData("width"),10)/100):parseInt(t.getData("width"),10);n=m.Squarespace.Lang.isPercentage(t.getData("height"))?a.get("offsetHeight")*(parseInt(t.getData("height"),10)/100):parseInt(t.getData("height"),10)}var r=e.containerWidth||a.get("offsetWidth")-(a.get("offsetWidth")-a.get("clientWidth"));var o=e.containerHeight||a.get("offsetHeight")-(a.get("offsetHeight")-a.get("clientHeight"));var l=s/n;var c=r/o;var u;var d;var p;e.scale&&"hidden"!==a.getStyle("overflow")&&a.setStyle("overflow","hidden");p=e.sizeOnly?r/s:"contain"===e.scale?l>c?r/s:o/n:l>c?o/n:r/s;var h=s;var g=n;if("contain"===e.scale){h=s*p;g=n*p;u=g<o?(o-g)/2:0;d=h<r?(r-h)/2:0;-1!==e.align.indexOf("left")?d=0:-1!==e.align.indexOf("right")&&(d=r-h);-1!==e.align.indexOf("top")?u=0:-1!==e.align.indexOf("bottom")&&(u=o-g);h-=this.get("offsetWidth")-this.get("clientWidth");g-=this.get("offsetHeight")-this.get("clientHeight")}else if("cover"===e.scale){h=s*p;g=n*p;u=g>o?(g-o)/-2:0;d=h>r?(h-r)/-2:0;if(e.focalPoint){d=Math.min(Math.max(r/2-h*e.focalPoint[0],r-h),0);u=Math.min(Math.max(o/2-g*e.focalPoint[1],o-g),0)}}return{top:u,left:d,width:h,height:g}},resizeToParent:function(e){var t=this.getAdjustedDimensions(e);var a=this.getStyle("position");if(e.sizeOnly){this.setStyles({width:t.width,height:t.height});var i=this.one("embed");i&&this.one("embed").setStyles({width:t.width,height:t.height});if(this.test("iframe")){var s=this.getAttribute("src");if(s)if(-1!==s.indexOf("?")){var n=s.split("?");-1===n[1].indexOf("wmode=transparent")&&this.setAttribute("src",n[0]+"?wmode=transparent&"+n[1])}else this.setAttribute("src",s+"?wmode=transparent")}i&&"transparent"!==i.getAttribute("wmode")&&this.one("embed").setAttribute("wmode","transparent")}else{var r=5;this.setStyles({position:"relative"!==a&&"absolute"!==a?"relative":a,top:t.top.toFixed(r),left:t.left.toFixed(r),width:t.width.toFixed(r),height:t.height.toFixed(r)})}},width:function(){return this.get("offsetWidth")},height:function(){return this.get("offsetHeight")},setWidth:function(e){this.setStyle("width",e)},setHeight:function(e){this.setStyle("height",e)}}));var e=["Webkit","Moz","O","ms"];var a=["transition","transitionProperty","transitionDuration","transitionTimingFunction","transitionDelay","backfaceVisibility","userSelect","borderBottomLeftRadius","borderBottomRightRadius"];m.Array.each(e,function(e){m.Array.each(a,function(i){var s=e+i.charAt(0).toUpperCase()+i.slice(1);s in m.config.doc.documentElement.style&&(m.DOM.CUSTOM_STYLES[i]={set:function(e,t,a){a[s]=t;a[i]=t},get:function(e,t){m.DOM.getComputedStyle(e,s)}})})});m.IO.prototype._destroy=function(e){if(m.config.win&&!e.notify&&!e.xdr)if(!e.upload&&e.c)e.c.onreadystatechange=null;else if(e.upload){e.c.upload.onprogress=null;e.c.onload=null;e.c.onerror=null}e=e.c=null}},"1.0",{requires:["anim","base","event","io","json","jsonp","node","node-event-delegate","plugin","promise","querystring","selector","squarespace-anim-raf","squarespace-data","squarespace-dom-emitters-resize","squarespace-dom-emitters-scroll","squarespace-logger","squarespace-plugin-node-destroy-notifier","squarespace-public-api","squarespace-system-error","squarespace-ui-base","yui-later"]})},"./src/main/webapp/universal/scripts-v6/variant-row-inputs.js":function(e,t,a){var l=a("./src/main/webapp/frontend/packages/enums/MediaProcessingState.js");var c=a("./src/main/webapp/frontend/packages/enums/RecordType.js");var u=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var d=a("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/VariantImageEditor/WrappedVariantImageEditor.ts");var p=a("./src/main/webapp/universal/src/shared/utils/commerce/analytics/trackProductEditor.ts");var h=a("./src/main/webapp/universal/src/shared/utils/commerce/analytics/types.ts");YUI.add("squarespace-variant-row-inputs",function(r){r.namespace("Squarespace.Widgets.Variants");var s=r.Squarespace.Widgets.Variants.VariantCellInput=r.Base.create("variantCellInput",r.Squarespace.Widgets.DataWidget,[],{renderUI:function(){s.superclass.renderUI.call(this);var e=this.get("contentBox");var t=this.get("title");r.Lang.isValue(t)&&e.append(r.Node.create('<div class="title">'+t+"</div>"));var a=r.Node.create('<input type="text"></input>');e.append(a);a.setAttribute("name",this.get("name"));a.set("value",this.get("data"));var i=this.get("inputClassName");r.Lang.isValue(i)&&a.addClass(i)},bindUI:function(){s.superclass.bindUI.call(this);var e=this.get("contentBox");var t=e.one("input");t.after(["change","valuechange"],function(e){this.set("data",this._getInputValue())},this);t.after("change",function(){r.Squarespace.Analytics.trackInternal("variant_cell_changed",{fieldName:this.get("name")});p.trackUpdateVariantOptionValue({optionName:this.get("name"),optionValue:this._getInputValue(),productId:this.get("productId"),variantId:this.get("variantId"),productEditor:h.ProductEditor.YUI_EDITOR})},this);t.on("click",t.select);t.on("key",function(){this.fire("edit-next-row-requested")},"press:13",this);var a=this.get("userOption");r.Lang.isValue(a)&&a.after("optionNameChange",function(e){this.set("name",a.get("optionName"))},this)},_getInputValue:function(){return this.get("contentBox").one("input").get("value").trim()},disable:function(e){this.set("disabled",true);this.get("contentBox").one("input").set("disabled",true);r.Lang.isValue(e)&&this.get("contentBox").one("input").set("value",e)},enable:function(e){this.set("disabled",false);this.get("contentBox").one("input").set("disabled",false);r.Lang.isValue(e)&&this.get("contentBox").one("input").set("value",e)}},{CSS_PREFIX:"sqs-variant-cell-input",ATTRS:{title:{value:null},userOption:{value:null},name:{value:null},inputClassName:{value:null},productId:{vaue:null},variantId:{value:null}}});var e=r.Squarespace.Widgets.Variants.VariantImageInput=r.Base.create("VariantImageInput",r.Squarespace.Widgets.DataWidget,[],{renderUI:function(){e.superclass.renderUI.call(this);this._renderVariantImage();this._createVariantImageEditorContainer()},bindUI:function(){this.on("click",function(){this._wrappedVariantImageEditor&&this._wrappedVariantImageEditor.show()});if(Static&&Static.JOB_MANAGER){this._completedImageJobListener=Static.JOB_MANAGER.on("completed",this._buildProcessingStateHandler(l.READY));this._failedImageJobListener=Static.JOB_MANAGER.on("failed",this._buildProcessingStateHandler(l.ERROR))}this.get("productModel")&&(this._productModelListener=this.get("productModel").on("change",function(e){var t=this.get("contentBox");t._node&&this._renderVariantImage()}.bind(this)))},destroy:function(){this._wrappedVariantImageEditor&&this._wrappedVariantImageEditor.destroy();this._completedImageJobListener&&this._completedImageJobListener.detach();this._failedImageJobListener&&this._failedImageJobListener.detach();this._productModelListener&&this._productModelListener.detach()},_buildProcessingStateHandler:function(s){return function(e){var t=e.job;var a=t.get("data.contentItemId");var i=this.get("productModel").items.getById(a);if(i){i.set("mediaProcessingState",s);this._wrappedVariantImageEditor&&this._wrappedVariantImageEditor.render()}}.bind(this)},_renderVariantImage:function(){var e=this._getMainImage();e?this._renderSelectedThumbnail(e):this._renderPlaceholderThumbnail()},_renderSelectedThumbnail:function(e){var t=this.get("contentBox");var a=t.one(".variant-image-placeholder");a&&a.remove(true);var i=t.one(".variant-image");var s=e.get("assetUrl");if(i)i.setAttribute("src",s);else{i=r.Node.create('<img class="variant-image" src="'+s+'?format=100w"/>');t.append(i)}},_renderPlaceholderThumbnail:function(){var e=this.get("contentBox");var t=e.one(".variant-image");t&&t.remove(true);var a=e.one(".variant-image-placeholder");if(!a){a=r.Node.create('<img class="variant-image-placeholder" src="/universal/images-v6/dialog/placeholder-image.svg"/>');e.append(a)}},_createVariantImageEditorContainer:function(){var e=this.get("contentBox");var t='<div id="variant-image-editor-container"></div>';var a=r.Node.create(t);e.append(a);this._wrappedVariantImageEditor||(this._wrappedVariantImageEditor=new d({productModel:this.get("productModel"),mainImageId:this.get("data"),variantId:this.get("id"),setMainImageInYUI:this._setMainImageInYUI.bind(this),addProductImageInYUI:this._addProductImageInYUI.bind(this),removeProductImageInYUI:this._removeProductImageInYUI.bind(this),container:a.getDOMNode()}))},_addProductImageInYUI:function(e,t,a){var i=new r.Squarespace.Models.ContentItem({assetUrl:e.assetUrl,displayIndex:t,id:e.id,mediaProcessingState:l.QUEUED,recordType:c.IMAGE});this.get("productModel").items.add(i,{onUpload:true});var s=this._createImageProcessingJob(a);Static&&Static.JOB_MANAGER&&r.config.win.Static.JOB_MANAGER.addJob(s)},_removeProductImageInYUI:function(e,t){var a=this.get("productModel");var i=a.items.getById(e);i&&a.items.removeItems([i],t)},_setMainImageInYUI:function(e){this.set("data",e);this._renderVariantImage()},_getMainImage:function(){var e=this.get("productModel");if(!e||!e.items||e.items.isEmpty())return null;var t=this.get("data");return e.items.getById(t)},_createImageProcessingJob:function(e){var t=r.merge(e,{started:true});var a=new r.Squarespace.ImageProcessingJob(t);a.set("collection",this.get("productModel"));a.set("id",e.id);return a}},{CSS_PREFIX:"sqs-variant-image-input",ATTRS:{name:{value:null},productModel:{value:null}}});var o=r.Squarespace.Widgets.Variants.VariantCellNumericInput=r.Base.create("variantCellNumericInput",s,[],{renderUI:function(){o.superclass.renderUI.call(this);this.get("contentBox").one("input").plug(r.Squarespace.Plugin.NumericFormatter,this.get("numericFormatterConfig"))},_getInputValue:function(){return this.get("contentBox").one("input").numericFormatterPlugin.get("data")}},{CSS_PREFIX:"sqs-variant-cell-numeric-input",ATTRS:{numericFormatterConfig:{value:null}}});var n=r.Squarespace.Widgets.Variants.VariantCellMoneyInput=r.Base.create("variantCellMoneyInput",s,[],{renderUI:function(){n.superclass.renderUI.call(this);this.get("contentBox").one("input").plug(r.Squarespace.Plugin.MoneyFormatter)},_getInputValue:function(){return this.get("contentBox").one("input").moneyFormatterPlugin.get("data")}},{CSS_PREFIX:"sqs-variant-cell-money-input"});var t=r.Squarespace.Widgets.Variants.VariantCellMoneyTrimCentsInput=r.Base.create("variantCellMoneyTrimCentsInput",s,[],{renderUI:function(){t.superclass.renderUI.call(this);this.get("contentBox").one("input").plug(r.Squarespace.Plugin.MoneyFormatterTrimCents)},_getInputValue:function(){return this.get("contentBox").one("input").moneyFormatterTrimCentsPlugin.get("data")}},{CSS_PREFIX:"sqs-variant-cell-money-input-trim-cents"});var a=r.Base.create("pricingInput",r.Base,[],{initializer:function(){var e=this.get("hostNode");e.plug(r.Squarespace.Animations.Flyout,{duration:.1});var t=e.flyoutPlugin;this._flyout=t;var a=r.Node.create('<div class="flyout-variant-edit"><div class="fields"></div><div class="notch"></div></div>');a.addClass(this.get("name"));t.setAttrs({node:a,alignment:"tc"});e.on("click",this.showFlyout,this);t.on("shown",function(){r.Lang.isValue(a.one("input:enabled"))&&a.one("input:enabled").focus()},this);a.delegate("key",function(){this.closeFlyout()},"press:13","input",this);r.Array.each(this.get("fields"),function(e){e.render(a.one(".fields"));e.after("dataChange",function(){this.set("data",this._getFieldData())},this)},this)},showFlyout:function(){this._flyout.show();this._syncFieldsFromData();this.fire("open")},closeFlyout:function(){this.get("inDialog")&&this.set("data",this._getFieldData());this._flyout.hide();this.fire("close")},_syncFieldsFromData:function(){r.Squarespace.FormUtils.setData(this.get("fields"),this.get("data"))},_getFieldData:function(){return r.Squarespace.FormUtils.getData(this.get("fields"))}},{CSS_PREFIX:"sqs-field-flyout",ATTRS:{hostNode:{value:null},fields:{value:[]},content:{value:null},name:{value:null},inDialog:{value:true}}});var i=r.Squarespace.Widgets.Variants.FlyoutDrivenDataWidget=r.Base.create("flyoutDrivenDataWidget",r.Squarespace.Widgets.DataWidget,[],{initializer:function(){this.publish("open");this.publish("close")},renderUI:function(){i.superclass.renderUI.call(this);this.get("contentBox").setHTML('<span class="placeholder"></span>');this._flyout=new a(this._getFlyoutConfig());this._flyout.set("data",this.get("data"))},bindUI:function(){i.superclass.bindUI.call(this);this.get("inDialog")&&this._flyout.after("close",function(){this.fire("close");this.set("data",this._flyout.get("data"))},this);this._flyout.after("dataChange",function(){this.set("data",this._flyout.get("data"))},this);this._flyout.after("edit-next-row-requested",function(){this.fire("edit-next-row-requested")},this);this._flyout.after("open",function(){this.fire("open");this.get("dialog").setActiveFlyout({constraintClasses:".flyout-variant-edit",field:this._flyout})},this)},showFlyout:function(){this._flyout.showFlyout()},syncUI:function(){i.superclass.syncUI.call(this);var e=this.get("contentBox");var t=e.one(".placeholder");t.setContent(this._getPlaceholderContent())},_getFlyoutConfig:function(){throw new Error("FlyoutDrivenDataWidget._getFlyoutConfig: pleaseee implement meeee.")},_getPlaceholderContent:function(){throw new Error("FlyoutDrivenDataWidget._getPlaceholderContent: pleaseee implement meeee.")}},{CSS_PREFIX:"sqs-flyout-driven-data-widget",ATTRS:{dialog:{value:null},inDialog:{value:true}}});r.Squarespace.Widgets.Variants.PricingInput=r.Base.create("pricingInput",r.Squarespace.Widgets.Variants.FlyoutDrivenDataWidget,[],{_getFlyoutConfig:function(){var e=this.get("data");var t=this.get("boundingBox");var a=new n({data:e.price,title:u("Price"),name:"price"});var i=new r.Squarespace.Widgets.BasicCheck({data:e.onSale,title:u("On Sale"),name:"onSale"});i.after("dataChange",function(){i.get("data")?a.disable():a.enable()},this);return{hostNode:t,dialog:this.get("dialog"),inDialog:this.get("inDialog"),name:"pricing",fields:[a,new n({data:e.salePrice,title:u("Sale Price"),name:"salePrice"}),i]}},_getPlaceholderContent:function(){var e=this.get("data");var t=r.Squarespace.Commerce.moneyString(e.price);if(!e.onSale)return t;return r.Squarespace.Commerce.moneyString(e.salePrice)+' <span class="original-price">'+t+"<span>"}},{CSS_PREFIX:"sqs-pricing-input",ATTRS:{data:{value:{price:100,salePrice:0,onSale:false}},name:{value:"pricing"}}});r.Squarespace.Widgets.Variants.StockInput=r.Base.create("stockInput",r.Squarespace.Widgets.Variants.FlyoutDrivenDataWidget,[],{_getFlyoutConfig:function(){var e=this.get("boundingBox");var t=this.get("data");var a=new o({data:t.qtyInStock,title:u("Quantity In Stock"),name:"qtyInStock"});var i=new r.Squarespace.Widgets.BasicCheck({data:t.onSale,title:u("Unlimited"),name:"unlimited"});i.after("dataChange",function(){if(i.get("data")){a.disable("∞");r.Squarespace.Analytics.trackInternal("product_variant_stock_toggled",{isUnlimited:true})}else{a.enable(a.get("data"));r.Squarespace.Analytics.trackInternal("product_variant_stock_toggled",{isUnlimited:false})}},this);return{hostNode:e,name:"stock",dialog:this.get("dialog"),inDialog:this.get("inDialog"),fields:[a,i]}},_getPlaceholderContent:function(){var e=this.get("data");if(e.unlimited)return"∞";return e.qtyInStock}},{CSS_PREFIX:"sqs-stock-input",ATTRS:{data:{value:{qtyInStock:0,unlimited:false}},name:{value:"stock"}}});r.Squarespace.Widgets.Variants.DimensionsInput=r.Base.create("dimensionsInput",r.Squarespace.Widgets.Variants.FlyoutDrivenDataWidget,[],{initializer:function(){this.publish("keyup")},_getFlyoutConfig:function(){var e=this.get("boundingBox");var t=this.get("data");var a=this.get("measurementStandard")===r.Squarespace.MeasurementStandard.IMPERIAL?"in.":"cm";var i=new o({data:t.len,title:u("Length"),name:"len",numericFormatterConfig:{postfixUnit:a}});var s=new o({data:t.width,title:u("Width"),name:"width",numericFormatterConfig:{postfixUnit:a}});var n=new o({data:t.height,title:u("Height"),name:"height",numericFormatterConfig:{postfixUnit:a}});i.on("keyup",this._fireKeyUp,this);s.on("keyup",this._fireKeyUp,this);n.on("keyup",this._fireKeyUp,this);return{hostNode:e,name:"dimensions",dialog:this.get("dialog"),inDialog:this.get("inDialog"),fields:[i,s,n]}},_fireKeyUp:function(e){this.fire("keyup",e)},_getPlaceholderContent:function(){var e=this.get("data");if(0===e.len||0===e.width||0===e.height)return"—";return[e.len,e.width,e.height].join('<span class="x">✕</span>')}},{CSS_PREFIX:"sqs-dimensions-input",ATTRS:{data:{value:{len:0,width:0,height:0}},name:{value:"stock"},measurementStandard:{value:null}}})},"1.0",{requires:["base","node","squarespace-animations","squarespace-basic-check","squarespace-commerce-utils","squarespace-form-utils","squarespace-node-flyout","squarespace-plugin-money-formatter","squarespace-plugin-numeric-formatter","squarespace-plugin-money-formatter-trim-cents","squarespace-util","squarespace-widgets-data-widget","widget-child"]})},"./src/main/webapp/universal/scripts-v6/variant-row.js":function(e,t,a){var n=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var o=a("./common/temp/node_modules/lodash/debounce.js");YUI.add("squarespace-variant-row",function(u){u.namespace("Squarespace");var i=function(e){var t=u.Node.create('<div class="attribute"></div>');e.render(t);t.setAttribute("name",e.get("name"));t.addClass("attribute-"+e.get("name"));return t};var r=function(e){var t=u.Node.create('<div class="attribute"></div>');e.render(t);t.setAttribute("name",e.get("name"));return t};var s=u.Squarespace.Widgets.VariantRow=u.Base.create("variantRow",u.Squarespace.SSWidget,[u.WidgetChild],{initializer:function(){this.publish("validateForShipping")},renderUI:function(){s.superclass.renderUI.call(this);var e=this.get("data");var t=this.get("contentBox");this._userAttributeInputs=[];var a=u.Node.create('<div class="variant-row"><div class="attributes"></div><div class="remove-variant"></div></div>');t.append(a);this._variantImageInput=new u.Squarespace.Widgets.Variants.VariantImageInput({name:"image",id:e.id,productModel:this.get("productModel"),data:e.mainImageId});this._addSystemAttribute(this._variantImageInput);this._skuInput=new u.Squarespace.Widgets.Variants.VariantCellInput({name:"sku",productId:this.get("productModel").get("id"),variantId:this.get("data").id,data:e.sku});this._addSystemAttribute(this._skuInput);if(this.get("isGiftCard")){this._pricingInput=new u.Squarespace.Widgets.Variants.VariantCellMoneyTrimCentsInput({data:e.price,name:"pricing",inputClassName:"gift-card-amount-input"});this._addSystemAttribute(this._pricingInput)}else{this._pricingInput=new u.Squarespace.Widgets.Variants.PricingInput({dialog:this.get("dialog"),inDialog:this.get("inDialog"),name:"pricing",data:{price:e.price,salePrice:e.salePrice,onSale:e.onSale}});this._addSystemAttribute(this._pricingInput)}if(!this.get("isGiftCard")){this._stockInput=new u.Squarespace.Widgets.Variants.StockInput({dialog:this.get("dialog"),inDialog:this.get("inDialog"),name:"stock",data:{qtyInStock:e.qtyInStock,unlimited:e.unlimited}});this._addSystemAttribute(this._stockInput)}if(this.get("isPhysical")){var i=u.Squarespace.Context.getInstance().get("websiteSettings").get("storeSettings").measurementStandard;this._weightInput=new u.Squarespace.Widgets.Variants.VariantCellNumericInput({numericFormatterConfig:{postfixUnit:i===u.Squarespace.MeasurementStandard.IMPERIAL?"lbs":"kg"},data:e.weight,name:"weight"});this._addSystemAttribute(this._weightInput);this._dimensionsInput=new u.Squarespace.Widgets.Variants.DimensionsInput({data:{len:e.len,width:e.width,height:e.height},dialog:this.get("dialog"),inDialog:this.get("inDialog"),measurementStandard:this.get("measurementStandard"),name:"dimensions"});this._addSystemAttribute(this._dimensionsInput)}this.get("isGiftCard")||this.get("optionsList").each(this._addAttribute,this);this._refreshData()},bindUI:function(){s.superclass.bindUI.call(this);var e=this.get("boundingBox");e.plug(u.Squarespace.Animations.Expandable);this.get("optionsList").after("UserOption:optionNameChange",function(e){var t=this._getAttributeElByName(e.prevVal);t.setAttribute("name",e.newVal);this._refreshData()},this);this.get("optionsList").after("add",function(e){var t=e.model;this._addAttribute(t);this._refreshData()},this);this.get("optionsList").after("remove",function(e){var t=e.model;this._getAttributeElByName(t.get("optionName")).remove();this._userAttributeInputs.remove(t);this._refreshData()},this);e.one(".remove-variant").on("click",function(){this.fire("remove-requested")},this);this._skuInput.after("edit-next-row-requested",function(){this.fire("next-row-execute-requested",{command:function(){var e=this._skuInput.get("contentBox").one("input");e.focus();e.select()}})},this);this.get("isPhysical")&&this._weightInput.after("edit-next-row-requested",function(){this.fire("next-row-execute-requested",{command:function(){var e=this._weightInput.get("contentBox").one("input");e.focus();e.select()}})},this);this.after("variantCellInput:edit-next-row-requested",function(t){this.fire("next-row-execute-requested",{command:function(){var e=this._getAttributeElByName(t.target.get("name")).one("input");e.focus();e.select()}})},this);this.after("*:dataChange",function(e){if(e.target===this)return;this._refreshData()},this);if(this.get("isPhysical")){this._weightInput.on("keyup",o(this._validateForShipping.bind(this),300));this._dimensionsInput.on("keyup",o(this._validateForShipping.bind(this),300));this._weightInput.on("blur",this._validateForShipping,this);this._dimensionsInput.on("close",this._validateForShipping,this)}},close:function(){var e=this.get("boundingBox");e.on("closed",function(){this.fire("removed")},this);e.hide()},getError:function(e){var t=e.skuMap;var a=e.priceMap;var i=this.get("data");var s=u.Squarespace.Commerce.maxes();if(""===i.sku.trim())return{inputEl:this._skuInput.get("contentBox"),message:n("SKU cannot be left blank.")};if(i.sku.length>s.skuStringLength)return{inputEl:this._skuInput.get("contentBox"),message:n("SKU is too long.")};if(u.Lang.isValue(t[i.sku]))return{inputEl:this._skuInput.get("contentBox"),message:n("{sub1} is not a unique SKU.",{sub1:i.sku})};if(!i.unlimited&&i.qtyInStock<0)return{inputEl:this._stockInput.get("contentBox"),message:n("{sub1} cannot have negative stock.",{sub1:i.sku})};if(i.price<i.salePrice)return{inputEl:this._pricingInput.get("contentBox"),message:n("Sale price must be less than standard price.")};if(Math.max(i.price,i.salePrice)>s.productPrice)return{inputEl:this._pricingInput.get("contentBox"),message:n("Price must be no more than 1 million.")};if(this.get("isGiftCard")&&a[i.price])return{inputEl:this._pricingInput.get("contentBox"),message:n("Price exists.")};if(this.get("isGiftCard")&&i.price<=0)return{inputEl:this._pricingInput.get("contentBox"),message:n("Price must be greater than 0.")};if(e.isSubscription&&(i.onSale?i.salePrice:i.price)<=0)return{inputEl:this._pricingInput.get("contentBox"),message:n("Price must be greater than 0.")};return null},toggleStockVisibility:function(e){var t=this._getAttributeElByName("stock");t&&t.toggleClass("hidden",e)},_refreshData:function(e){var t=this.get("data");var a=this._pricingInput.get("data");var i=this._getStockData();var s;var n=this.get("isGiftCard");var r=n?a:a.price;var o=n?null:a.salePrice;var l=!n&&a.onSale;var c={id:t.id,sku:this._skuInput.get("data"),price:r,salePrice:o,onSale:l,qtyInStock:i.qtyInStock,unlimited:i.unlimited,attributes:{}};this._variantImageInput&&(c=u.merge(c,{mainImageId:this._variantImageInput.get("data")}));if(this.get("isPhysical")){s=u.Lang.isValue(this._dimensionsInput)?this._dimensionsInput.get("data"):{len:1,width:1,height:1};c=u.merge(c,{weight:this._weightInput.get("data"),len:s.len,width:s.width,height:s.height})}this.get("isGiftCard")||this.get("optionsList").each(function(e){var t=e.get("optionName");var a=this._getAttributeElByName(t);c.attributes[t]=a.one("input").get("value")},this);this.set("data",c)},_getStockData:function(){if(this.get("isGiftCard"))return{unlimited:true};return this._stockInput.get("data")},_getAttributeElByName:function(t){var e=this.get("contentBox");var a;e.all(".attribute").each(function(e){e.getAttribute("name")===t&&(a=e)});return a},_addSystemAttribute:function(e){var t=this.get("contentBox");var a=t.one(".attributes");a.append(i(e));e.addTarget(this,{emitFacade:true})},_addAttribute:function(e){var t=this.get("contentBox");var a=t.one(".attributes");var i=e.get("optionName");var s=new u.Squarespace.Widgets.Variants.VariantCellInput({name:e.get("optionName"),productId:this.get("productModel").get("id"),userOption:e,variantId:this.get("data").id,data:this.get("data.attributes")[i]});var n=r(s);n.setAttribute("name",i);a.append(n);s.addTarget(this,{emitFacade:true});this._userAttributeInputs.push(s)},_validateForShipping:function(){this._refreshData();this.fire("validateForShipping")}},{CSS_PREFIX:"sqs-variant-row",ATTRS:{data:{value:null},optionsList:{value:null},dialog:{value:null},inDialog:{value:true},isPhysical:{value:true},isGiftCard:{value:false},measurementStandard:{value:null},productModel:{value:null}}})},"1.0",{requires:["base","node","squarespace-animations","squarespace-basic-check","squarespace-commerce-utils","squarespace-context","squarespace-plugin-money-formatter","squarespace-plugin-numeric-formatter","squarespace-plugin-pulsewarn","squarespace-ss-widget","squarespace-variant-row-inputs","widget-child"]})},"./src/main/webapp/universal/scripts-v6/video-loader.js":function(e,t,a){var d=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var p=a("./src/main/webapp/universal/src/shared/utils/UrlUtils.js");YUI.add("squarespace-video-loader",function(h){h.namespace("Squarespace");h.Squarespace.VideoLoader=h.Base.create("VideoLoader",h.Plugin.Base,[],{initializer:function(){var e=this.get("host");e.plug(h.Squarespace.NodeDestroyNotifier,{onDestroy:function(){this.destroy()},context:this});this._setVariables();this._resizeEmitter=new h.Squarespace.ResizeEmitter({timeout:1e3});this._onFullscreenChangeHandler=this.handleFullScreenChange.bind(this);this._modeClass="video-"+this.get("mode");e.addClass(this._modeClass);this.once("loaded",this.bindUI,this);this.get("load")&&this.load();this.after("forceAutoplayChange",function(){this._augmentVideoSrc()})},destructor:function(){this.prefixedFullScreenEvents.forEach(function(e){h.config.doc.removeEventListener(e,this._onFullscreenChangeHandler)}.bind(this));this._resizeEmitter.destroy()},load:function(){if(this._loaded)return;if("invalid"===this.get("type")){this._intrinsic=false;if(this.get("overlay")){this.get("overlay").remove();this._set("overlay",null)}}var e=this.get("host");var t=this.get("mode");e.removeClass(this._modeClass);this._modeClass="video-"+t;e.addClass(this._modeClass);var a;var i;if(this._intrinsic){var s=this.getWidth();var n=this.getHeight();var r;r=s&&n?n/s*100:56.3;a=this._getOrCreateNode(".intrinsic",'<div class="intrinsic"></div>');i=this._getOrCreateNode(".intrinsic-inner",'<div class="intrinsic-inner"></div>');i.setStyle("paddingBottom",r+"%");var o=e.get("parentNode");var l=o.getComputedStyle("position");if("fit"===t){e.setStyles(e.getAdjustedDimensions({scale:"contain",width:this.getWidth(),height:this.getHeight()}));"static"===l&&o.setStyle("position","relative")}else"fill"===t&&"static"===l&&o.setStyle("position","relative");if(this.get("overlay")){this.get("overlay").wrap(i);i.wrap(a)}else{a.appendChild(i);e.appendChild(a)}}var c=this.get("overlay");if(c){c.setStyle("opacity",1);var u=c.one(".sqs-video-opaque");if(!u){u=h.Node.create('<div class="sqs-video-opaque"></div>');c.appendChild(u)}var d=c.one(".sqs-video-icon");if(!d){d=h.Node.create('<div class="sqs-video-icon"></div>');c.appendChild(d)}this._setPlayButtonAttributes(this.get("inactive"));this.after("inactiveChange",function(e){this._setPlayButtonAttributes(e.newVal)},this);var p=c.one("img");if(p){p.fire("refresh");p.plug(h.Squarespace.Loader2,{load:true,mode:"fill"});p.fire("refresh")}}else{a?i.appendChild(this.get("video")):e.appendChild(this.get("video"));this._set("showingVideo",true)}this._cacheOverlayWrapperHeight();this.fire("loaded");this._loaded=true},_setPlayButtonAttributes:function(e){var t=this.get("overlay").one(".sqs-video-icon");if(e){t.removeAttribute("tabindex");t.removeAttribute("role");t.removeAttribute("aria-label")}else{t.setAttribute("tabindex",0);t.setAttribute("role","button");t.setAttribute("aria-label",d("Play"))}},_cacheOverlayWrapperHeight:function(){var e=this.get("host").get("parentNode");var t=e.get("offsetHeight");e.setData("cached-height",t)},_getOrCreateNode:function(e,t){var a=this.get("host").one(e);if(a)return a;return h.Node.create(t)},unload:function(){var e=this.get("host");e.setStyles({top:null});this.showOverlay();this.get("overlay")&&this.get("overlay").remove();this.get("video").remove();this._intrinsic&&e.one(".intrinsic").remove(true);if(this.get("overlay")){this.get("overlay").setStyle("opacity",0);e.appendChild(this.get("overlay"))}this._setIntrinsic();this._loaded=false},reload:function(){this.unload();this.load()},handleFullScreenChange:function(e){this.isFullScreen=!this.isFullScreen},showVideoIfNotInactive:function(){this.get("inactive")||this.showVideo()},bindUI:function(){if(this.get("overlay")){this.get("overlay").on("click",this.showVideoIfNotInactive,this);this.get("overlay").one(".sqs-video-icon").on("keydown",function(e){var t=13===e.keyCode;var a=32===e.keyCode;(t||a)&&this.showVideoIfNotInactive()},this)}this.after("modeChange",this.reload,this);this._resizeEmitter.on("resize",function(){"fit"===this.get("mode")&&this._resetFitTop();if(this.get("overlay")){var e=this.get("overlay").one("img");e&&e.fire("refresh")}},this);this._resizeEmitter.on("resize:end",function(){if("fit"===this.get("mode")&&!this.isFullScreen){this._cacheOverlayWrapperHeight();this._resetFitTop()}},this);this.prefixedFullScreenEvents.forEach(function(e){h.config.doc.addEventListener(e,this._onFullscreenChangeHandler)}.bind(this));h.Global.on("tweak:aftershow",function(){"fit"===this.get("mode")&&this._resetFitTop()},this);h.Global.after("tweak:afterclose",function(){"fit"===this.get("mode")&&setTimeout(h.bind(function(){this._resetFitTop()},this),1e3)},this)},showVideo:function(){if(this.get("showingVideo")||!this.get("overlay"))return;this._set("showingVideo",true);this._showOverlayOnOthers();var e=this.get("video");e.setStyle("opacity",0);this._intrinsic?this.get("host").one(".intrinsic-inner").appendChild(e):this.get("host").appendChild(e);var t=this.get("overlay");var a=t.one(".sqs-video-opaque");a.anim({opacity:1},{duration:1,start:function(){t.one(".sqs-video-icon").setStyle("visibility","hidden")},end:function(){this.get("video").setStyle("opacity",1);this.get("showingVideo")&&t.setStyle("visibility","hidden");t.hasClass("no-thumb")?a.setStyle("opacity",1):a.setStyle("opacity",0);t.one(".sqs-video-icon").setStyle("visibility",null)},context:this}).run()},showOverlay:function(){if(!this.get("showingVideo")||!this.get("overlay"))return;this._set("showingVideo",false);this.get("overlay").setStyle("opacity",0);this.get("overlay").setStyle("visibility",null);var e=this.get("video");e.anim({opacity:0},{duration:.3,start:function(){this.get("overlay").anim({opacity:1},{duration:.3}).run()},end:function(){e.remove()},context:this}).run()},refreshVideo:function(){if(!this.get("showingVideo"))return;var e=this.get("video");if("object"===this.get("type")){e.remove();var t=this.get("host");this._intrinsic?t.one(".intrinsic-inner").appendChild(e):t.appendChild(e)}else"iframe"===this.get("type")&&e.setAttribute("src",e.getAttribute("src"))},play:function(){if(!this.get("apiFriendly"))return;var e=this.get("video").getDOMNode().contentWindow;switch(this._providerName){case"Vimeo":e.postMessage('{"method": "play", "value": "true"}',"*");break;case"YouTube":e.postMessage('{"event":"command","func":"playVideo","args":""}',"*");break}},pause:function(){if(!this.get("apiFriendly"))return;var e=this.get("video").getDOMNode().contentWindow;switch(this._providerName){case"Vimeo":e.postMessage('{"method": "pause", "value": "true"}',"*");break;case"YouTube":e.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*");break}},getWidth:function(){return this.get("video").getAttribute("width")},getHeight:function(){return this.get("video").getAttribute("height")},_setVariables:function(){var e=this.get("host");this._setIntrinsic();this._set("overlay",e.one(".sqs-video-overlay"));var t=h.Node.create(e.getAttribute("data-html"));var a=h.Node.create('<div class="sqs-video-invalid-wrapper"><div class="state-message">'+d("Invalid video embed.")+"</div></div>");var i;if(t)if(t.test("iframe")){i=t;this._set("type","iframe")}else if(t.test("object")){i=t;this._set("type","object")}else if(t.one("iframe")){i=t.one("iframe");this._set("type","iframe")}else if(t.one("object"))if(t.one("embed")){i=t.one("object");this._set("type","object")}else{i=a;this._set("type","invalid")}else{i=a;this._set("type","invalid")}else{i=a;this._set("type","invalid")}this._set("video",i);var s=e.getAttribute("data-provider-name");if((!s||""===s)&&"invalid"!==this.get("type")){var n=this.get("video").getAttribute("src");n.match("player.vimeo.com")?s="Vimeo":n.match("www.youtube.com")&&(s="YouTube")}this._providerName=s;this.isFullScreen=h.config.doc.fullScreen||h.config.doc.mozFullScreen||h.config.doc.webkitIsFullScreen;this.prefixedFullScreenEvents=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"];if("invalid"===this.get("type"))e.addClass("video-invalid");else{this._augmentVideoSrc();e.removeClass("video-invalid")}},_setIntrinsic:function(){this._intrinsic="none"===this.get("mode")||"fit"===this.get("mode")},_resetFitTop:function(){var e=this.get("host");var t=e.get("parentNode").get("offsetHeight");t>h.config.win.innerHeight&&(t=e.get("parentNode").getData("cached-height")||h.config.win.innerHeight);var a=e.one(".intrinsic");a.setStyle("top",null);var i=a.get("offsetHeight");e.setStyle("top",(t-i)/2+"px")},_augmentVideoSrc:function(){var e=this.get("type");var t=this.get("video");var a="iframe"===e?t:t.one("embed")||t;var i=a.test("object")?"data":"src";var s=a.getAttribute(i);var n=s.split("?");var r=n[0];var o=n[1]||"";var l=h.QueryString.parse(o);var c=this._providerName;(this.get("overlay")||this.get("forceAutoplay"))&&(c===d("Wistia, Inc.")?l.autoPlay="true":"Animoto"===c?l.options="autostart":l.autoplay=1);var u=["Vimeo","YouTube","Wistia, Inc.","Animoto"];"object"!==e&&-1===u.indexOf(c)||p.isSecure()&&(r=p.securifyURL(r));r=r.replace("http:////","//");r=r.replace("https:////","//");if("iframe"===e)switch(c){case"YouTube":l.enablejsapi=1;this._set("apiFriendly",true);break}s=r+"?"+h.QueryString.stringify(l);a.setAttribute(i,s)},_showOverlayOnOthers:function(){h.all(".sqs-video-wrapper").each(function(e){if(e===this.get("host"))return;e.videoloader.showOverlay()},this)}},{NS:"videoloader",ATTRS:{apiFriendly:{value:false,readOnly:true},inactive:{value:false},load:{value:true},mode:{value:"none",validator:function(e){return-1!==["none","fit","fill",null].indexOf(e)}},overlay:{value:null,readOnly:true},showingVideo:{value:false,readOnly:true},type:{value:null,readOnly:true},video:{value:null,readOnly:true},forceAutoplay:{value:false}}})},"1.0",{requires:["base","node","plugin","querystring","squarespace-dom-emitters-resize","squarespace-image-loader","squarespace-plugin-node-destroy-notifier","squarespace-ui-base"]})},"./src/main/webapp/universal/scripts-v6/view.js":function(e,t,a){var n=a("./common/temp/node_modules/@sqs/cookie-cutter/index.js");YUI.add("squarespace-view",function(s){s.namespace("Squarespace").View=s.Base.create("sqsView",s.View,[],{initializer:function(e){var t=this.get("id");this.after(t+"|modelChange",function(e){e.prevVal&&e.prevVal.removeTarget(this);if(e.newVal){e.newVal.addTarget(this);e.newVal.after("destroy",this.destroy,this)}});e&&e.model&&this.set("model",e.model);this._rerenderSub=this.after(t+"|*:change",function(e){e.silent||this.render()},this)},destructor:function(e){(!e||e&&!e.preserveContainer)&&this.get("container").remove(true);s.detachAll(this.get("id")+"|*")},render:function(e){var t=this.get("container");if(this.template){var a=this._getTemplateContext();var i=s.Squarespace.UITemplates.render(this.template,a);t.setHTML(i);n.get("SQUARESPACE_UI_DEBUG")&&false}e&&e instanceof s.Node&&t.appendTo(e)},_getTemplateContext:function(){var e=this.get("model");if(e)return e.toJSON();return this.getAttrs()}},{ATTRS:{container:{valueFn:function(){return s.Node.create('<div class="sqs-'+this.name+'"/>')},readOnly:true}}})},"1.0",{requires:["base","model","node","squarespace-ui-templates","view"]})},"./src/main/webapp/universal/scripts-v6/website-overlays-manager.js":function(e,t,a){var i=a("./src/main/webapp/frontend/packages/enums/CollectionTypes.js");var r=a("./src/main/webapp/frontend/packages/enums/MobileInfoBarStyle.js");var s=a("./src/main/webapp/frontend/packages/enums/PageFeatures.js");var o=a("./src/main/webapp/frontend/packages/enums/PageTypes.js");var l=a("./src/main/webapp/frontend/packages/enums/SSBadgeType.js");var c=a("./src/main/webapp/frontend/packages/enums/SSBadgeVisibility.js");var u=a("./src/main/webapp/universal/src/shared/utils/WebsiteOverlaysUtils.js");var d=a("./src/main/webapp/universal/src/shared/utils/TemplateVersionUtils.js");YUI.add("squarespace-website-overlays-manager",function(n){n.namespace("Squarespace.Frontend").WebsiteOverlaysManager=n.Base.create("websiteOverlaysManager",n.Base,[],{initializer:function(){this._body=n.one(n.config.doc.body);var e=n.config.win.Static.SQUARESPACE_CONTEXT.pageType;e===o.NOT_FOUND&&n.config.win.Static.SQUARESPACE_CONTEXT.collection&&n.config.win.Static.SQUARESPACE_CONTEXT.collection.type===i.SPLASH_PAGE&&(e=o.SPLASH_PAGE);if(e===o.SPLASH_PAGE||e===o.LOCK_SCREEN){this.syncPreviewBar();return}this.syncPreviewBar();this._initializeMobileInfoBar();this._syncSSBadge();this._manageOverlaps();this.after("ssBadgeSettingsChange",this._syncSSBadge,this);this.after("mobileInfoBarSettingsChange",this.showMobileInfoBar)},syncPreviewBar:function(){if(n.config.win.SQUARESPACE_LOGIN)return;var e=this._body.all('img[data-licensed-asset-preview="true"]');var t=this._body.hasClass("has-preview-getty-imgs");if(t||e.size()>0&&!this.previewBar)this.previewBar=new n.Squarespace.LicensedAssets.Widgets.PreviewBar({render:true});else if(this.previewBar){this.previewBar.destroy();this.previewBar=null}},_syncSSBadge:function(){if(d.isSevenOne())return;var e=this.get("ssBadgeSettings");var t=e.type;if(t===l.NONE){if(this._ssBadge){this._ssBadge.destroy();this._ssBadge=null}return}var a=e.visibility===c.SCROLL;var i=e.position;var s=e.devices;this._ssBadge||(this._ssBadge=new n.Squarespace.Widgets.SSBadge({render:this._body}));this._ssBadge.setAttrs({type:t,position:i,autoHide:a,devices:s})},_initializeMobileInfoBar:function(){var e=this._getMobileInfoBarSettings();if(e){this._mobileInfoBar=new n.Squarespace.Widgets.MobileInfoBar({mobileInfoBarSettings:e,style:e.style});this._mobileInfoBar.render()}},showMobileInfoBar:function(){var e=this._getMobileInfoBarSettings(true);this.hideMobileInfoBar();if(e){this._mobileInfoBar=new n.Squarespace.Widgets.MobileInfoBar({mobileInfoBarSettings:e,style:e.style});this._mobileInfoBar.render()}},hideMobileInfoBar:function(){if(this._mobileInfoBar){this._mobileInfoBar.destroy();this._mobileInfoBar=null}},_manageOverlaps:function(){if(d.isSevenOne())return;var e=this._isSSBadgeVisible();var t=this._isMobileInfoBarVisible();var a=this.get("ssBadgeSettings");if(a){var i=a.visibility;var s=i===c.ALWAYS;if(e&&t&&s){this._adjustSSBadgeBottomOffset();n.one(n.config.win).on("scroll",function(){var e=n.config.doc.body.scrollTop;e<=0?this._adjustSSBadgeBottomOffset():this._clearSSbadgeBottomOffset()},this)}}},_getMobileInfoBarSettings:function(e){var t=this.get("mobileInfoBarSettings");var a=null;var i=e||u.shouldShowMobileInformationBar({win:n.config.win,isMobile:n.UA.mobile,settings:t});if(!n.Lang.isUndefined(t)&&i){var s=r.NONE;t.style=parseInt(t.style,10);t.style!==s&&(a=t)}return a},_adjustSSBadgeBottomOffset:function(){this._ssBadge.set("className","sqs-ss-badge-mobile-info-bar-present")},_clearSSbadgeBottomOffset:function(){this._ssBadge.set("className",null)},_isSSBadgeVisible:function(){var e=this._ssBadge;var t=false;if(e){var a=e.get("boundingBox").getStyle("visibility");t="visible"===a}return t},_isMobileInfoBarVisible:function(){var e=this._mobileInfoBar;return!!e}},{ATTRS:{ssBadgeSettings:{getter:function(e){e=e||n.Object.getValue(n.config.win.Static,["SQUARESPACE_CONTEXT","websiteSettings"]);return{visibility:e.ssBadgeVisibility,position:e.ssBadgePosition,devices:e.ssBadgeDevices,type:e.ssBadgeType}}},mobileInfoBarSettings:{valueFn:function(){return n.Object.getValue(n.config.win.Static,["SQUARESPACE_CONTEXT","websiteSettings","mobileInfoBarSettings"])}}}});n.config.win.Squarespace.onInitialize(n,function(){var e=n.config.win.Static.SQUARESPACE_CONTEXT.pageFeatures||[];-1!==e.indexOf(s.OVERLAYS)&&(n.Squarespace.Singletons.WebsiteOverlaysManager?n.Squarespace.Singletons.WebsiteOverlaysManager.syncPreviewBar():n.Squarespace.Singletons.WebsiteOverlaysManager=new n.Squarespace.Frontend.WebsiteOverlaysManager)})},"1.0",{requires:["base","node","squarespace-licensed-assets-preview-bar","squarespace-mobile-info-bar","squarespace-ss-badge"]})},"./src/main/webapp/universal/scripts-v6/widgets/actions-inline.js":function(e,t){YUI.add("squarespace-actions-inline",function(a){a.namespace("Squarespace.Widgets");var e=a.Squarespace.Widgets.ActionsInline=a.Base.create("ActionsInline",a.Squarespace.Widgets.SSWidget,[],{initializer:function(){this.publish("action",{emitFacade:true,bubbles:true})},renderUI:function(){e.superclass.renderUI.call(this);this._renderButtons()},bindUI:function(){e.superclass.renderUI.call(this);this.after("buttonsChange",this._renderButtons,this);this.get("contentBox").delegate("click",this._onButtonClick,".button-block",this);this.on("disabledChange",function(e){e.newVal?this.get("boundingBox").addClass("disabled"):this.get("boundingBox").removeClass("disabled")})},showSpinner:function(){this.get("contentBox").plug(a.Squarespace.Plugin.ProgressSpinner,{spinnerColor:"dark",spinnerSize:15,showCancel:false,show:true,append:true})},hideSpinner:function(){this.get("contentBox").unplug(a.Squarespace.Plugin.ProgressSpinner)},reset:function(){this.set("buttons",[])},_renderButtons:function(){var e=this.get("contentBox");var t=a.Node.create('<div class="sqs-actions-inline-buttons button-holder"></div>');e.empty();this.get("buttons").forEach(function(e){t.appendChild('<div class="button-block '+e.action+'" data-action="'+e.action+'"><button><span class="button-label-container"><span class="button-icon"></span><span class="button-label">'+e.label+"</span></span></button></div>")},this);e.append(t)},_onButtonClick:function(e){if(this.get("disabled"))return;this.fire("action",{actionName:e.currentTarget.getAttribute("data-action")})}},{CSS_PREFIX:"sqs-actions-inline",ATTRS:{buttons:{value:[],validator:a.Lang.isArray},disabled:{value:false,validator:a.Lang.isBoolean}}})},"1.0",{requires:["base","squarespace-plugin-progress-spinner","squarespace-ss-widget"]})},"./src/main/webapp/universal/scripts-v6/widgets/alert.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-widgets-alert",function(e){e.namespace("Squarespace.Widgets");var t=e.Squarespace.Widgets.Alert=e.Base.create("alert",e.Squarespace.Widgets.Confirmation,[],{},{CSS_PREFIX:"sqs-widgets-confirmation",TYPE:e.Squarespace.Widgets.Confirmation.TYPE,ANCHOR:e.Squarespace.Widgets.Confirmation.ANCHOR,TEMPLATE:e.Squarespace.Widgets.Confirmation.TEMPLATE,show:function(e){return new t(e)},ATTRS:{className:{value:"alert"},style:{value:e.Squarespace.Widgets.Confirmation.TYPE.CONFIRM_ONLY},"strings.confirm":{value:i("Okay")}}})},"1.0",{requires:["base","squarespace-widgets-confirmation"]})},"./src/main/webapp/universal/scripts-v6/widgets/audio-player.js":function(e,t,a){var o=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var l=a("./common/temp/node_modules/@sqs/site-rendering/TrackManager/index.js");var c=a("./src/main/webapp/universal/src/shared/utils/UrlUtils.js");var u=a("./src/main/webapp/universal/src/shared/utils/KeyboardScrubber.js");YUI.add("squarespace-widgets-audio-player",function(n){var i=100;var s=2;var r=75;var t=n.namespace("Squarespace.Widgets").AudioPlayerMinimal=n.Base.create("audioPlayer",n.Squarespace.Widgets.SSWidget,[],{initializer:function(){this.setAttrs(this.get("render").getData());""===this.get("title")&&""!==this.get("url")&&this.set("title",o("Untitled"));this.set("showDownload","true"===this.get("show-download"));this.set("colorTheme",this.get("color-theme"));this.set("artistName",this.get("author"));this._resizeEmitter=new n.Squarespace.ResizeEmitter;this._registerTrack()},destructor:function(){if(n.Lang.isValue(this._funk)){this._funk.pause();this._funk=null}if(n.Lang.isValue(this._resizeEmitter)){this._resizeEmitter.destroy();this._resizeEmitter=null}this._pauseAudio();this._deregisterKeyboardScrubber&&this._deregisterKeyboardScrubber()},renderUI:function(){t.superclass.renderUI.call(this);this.get("showDownload")&&this._renderDownloadLink();this.get("boundingBox").addClass(this.get("colorTheme"))},bindUI:function(){var e=this.get("contentBox");var t=e.one(".action");t.on("click",this._onActionButtonClick,this);t.on("keydown",function(e){var t=13===e.keyCode;var a=32===e.keyCode;if(t||a){e.halt();this._onActionButtonClick()}},this);this.after("playingChange",this._playingChange,this);this.after("progressChange",function(e){var t=this.get("contentBox").one(".player .time .progress");t.setContent(e.newVal);t.addClass("loaded");this._updateTracker(this.get("position"))},this);this.after("durationChange",function(e){var t=this.get("contentBox").one(".player .time .total");t.setContent(e.newVal);t.addClass("loaded");this.syncUI()},this);this.after("titleChange",function(e){this.get("contentBox").one(".player .labels .title").setContent(e.newVal)},this);this.after("artistNameChange",function(e){this.get("contentBox").one(".player .labels .artistName").setContent(e.newVal)},this);this._registerEvent(this._resizeEmitter.on("resize:end",this.syncUI,this));var a,i;function s(e){e.halt();a.detach();a=null;i.detach();i=null;this._setupScrubber();this.set("firstPlay",false);this.set("playing",true)}a=e.on("click",function(e){var t=this.get("showDownload")&&e.target===this._downloadNode.one("a");if(t||!this.get("url"))return;this.get("firstPlay")&&s.call(this,e)},this);i=e.one(".action").on("keydown",function(e){var t=13===e.keyCode;var a=32===e.keyCode;(t||a)&&this.get("firstPlay")&&s.call(this,e)},this)},syncUI:function(){var e=this.get("boundingBox");if(!e.getDOMNode())return;if(e.ancestor(".sqs-editing")){this._pauseAudio();this.set("playing",false)}var t=e.get("offsetWidth");e.one(".player .track").setStyle("width",t);e.toggleClass("playing",this.get("playing"));e.toggleClass("tiny",t<300);e.toggleClass("no-artist",""===this.get("artistName"));e.toggleClass("first-play",this.get("firstPlay"));var a=e.one(".player .labels .title");var i=a.get("offsetWidth")<a.get("scrollWidth");a.toggleClass("marquee-mark",i)},_onActionButtonClick:function(){if(this.get("firstPlay"))return;this.set("playing",!this.get("playing"))},_renderNativeAudio:function(){var e=n.Lang.sub(t.NATIVE_TEMPLATE,this.getAttrs());this.get("contentBox").replace(n.Node.create(e))},_renderDownloadLink:function(){var e=this.get("contentBox").one(".player");var t=c.addQueryParam(this.get("url"),"download","true");var a='<div class="download"><a href="'+t+'" target="_blank">'+o("Download")+"</a></div>";this._downloadNode=e.one(".secondary-controls").appendChild(a);e.addClass("download")},_renderVisualizer:function(){var e=this.get("contentBox").one(".visualizer");var t="";for(var a=0;a<i;a++)t+='<div class="eq-bar"><div class="height"></div></div>';e.append(t)},_pauseAudio:function(){l.player&&l.player.pause&&l.player.pause()},_playingChange:function(e){var t=this.get("fixedUrl");if(n.UA.ios){window.location.href=t;return}n.Lang.isValue(this._funk)||this._registerTrack();e.newVal?this._funk.play():this._funk.pause();this.syncUI()},_registerTrack:function(){var e=n.bind(function(){this.set("playing",false)},this);var t=n.bind(function(){this.set("playing",true);l.player.setVolume(this.get("volume")/100)},this);var a=n.bind(function(){var e=this._funk.duration;if(e>0){e=this._durationToStr(e);this.set("duration",e)}},this);var i=n.bind(function(){this.set("playing",false);this.set("position",0)},this);this._funk=l.createTrack(this.get("fixedUrl"));this._funk.on("ready",a);this._funk.on("ended",i);this._funk.on("play",t);this._funk.on("pause",e);this._funk.on("inactive",e);this._funk.on("positionChange",n.bind(this._whilePlaying,this))},_whilePlaying:function(e){if(!this.get("playing"))return;this.set("position",e.position);this.set("progress",this._durationToStr(e.position))},_updateTracker:function(e){var t=this.get("contentBox").one(".track .played");var a=e/this._funk.duration*100;t.setStyle("width",a+"%")},_mergeEQData:function(){var e=theSound.eqData;var t=e.left;var a=e.right;var i=t.length;var s=[];for(var n=0;n<i;n++)s.push((parseFloat(t[n])+parseFloat(a[n]))/2);return s},_calculateEQChunks:function(){var e=this._mergeEQData();var t=[];for(var a=0;a<length;a+=s){var i=0;n.Array.each(e.slice(a,a+s),function(e){i+=e});t.push(i/s*r)}return t},_drawEQBars:function(){var i=this.get("contentBox").all(".eq-bar .height");var s=this._calculateEQChunks();n.Array.each(s,function(e,t){var a=i.item(t);n.Lang.isValue(a)&&a.setStyle("height",Math.min(45,s[t]))},this);this.syncUI()},_setupScrubber:function(){var a=n.Node.create('<div class="scrubber-shim"></div>');var i;a.setStyles({position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:Math.pow(10,7),cursor:"none"});var e=this.get("contentBox").one(".player .track");e.on("mousedown",function(e){this._updatePosition(e);var t=l.player.getVolume();i=this.get("contentBox").one(".track").get("region");this._funk.isActive&&l.player.setVolume(.25*t);n.one("body").append(a);a.once("mouseup",function(){l.player.setVolume(t);a.remove()},this)},this);a.on("mousemove",function(e){var t=this._getRelativePosition(i,e.pageX);this._funk.seek(t);if(!this.get("playing")){this.set("progress",this._durationToStr(t));this.set("position",t)}},this);e.setAttribute("tabindex",0);this._deregisterKeyboardScrubber=u({element:e,getDuration:function(){return this._funk.duration}.bind(this),getPosition:function(){return this.get("position")}.bind(this),isPlaying:function(){return this.get("playing")}.bind(this),play:function(){this.set("playing",true)}.bind(this),pause:function(){this.set("playing",false)}.bind(this),setPosition:function(e){this._funk.seek(e);this.set("progress",this._durationToStr(e));this.set("position",e)}.bind(this)})},_updatePosition:function(e){if(this.get("firstPlay"))return;var t=this.get("contentBox").one(".track").get("region");var a=this.get("contentBox").one(".track .played .icon");var i=a.get("offsetWidth")/2;this._funk.seek(this._getRelativePosition(t,e.pageX-i))},_durationToStr:function(e){var t=Math.floor(e%60);var a=Math.floor(e/60);var i=Math.floor(a/60);i>0&&(a%=60);var s="";if(i>0){s+=i+":";a<10&&(s+="0")}t<10&&(t="0"+t);s+=a+":"+t;return s},_getRelativePosition:function(e,t){return this._funk.duration*Math.min(1,Math.max(0,(t-e.left)/e.width))},_selectVolume:function(a){var e=this.get("contentBox").all(".player .volume .bar");e.removeClass("active");e.filter(function(e){var t=parseInt(e.getAttribute("data-level"),10);return t<=a}).addClass("active");n.Squarespace.Singletons.Audio.set("volume",a)}},{CSS_PREFIX:"sqs-widgets-audio-player",HANDLEBARS_TEMPLATE:"block-audio-player.html",ATTRS:{fixedUrl:{getter:function(){var e=this.get("url");e.indexOf(Static.SQUARESPACE_CONTEXT.appDomain)>0&&(e=e.replace(/^(http:\/\/|https:\/\/|\/\/)/i,window.location.protocol+"//"));return e},readOnly:true},firstPlay:{value:true,validator:n.Squarespace.AttrValidators.isBoolean},position:{value:0,validator:n.Squarespace.AttrValidators.isNumber},progress:{validator:n.Squarespace.AttrValidators.isNullOrString},duration:{validator:n.Squarespace.AttrValidators.isNullOrString},title:{value:"",validator:n.Squarespace.AttrValidators.isString},artistName:{value:"",validator:n.Squarespace.AttrValidators.isString},playing:{value:false,validator:n.Squarespace.AttrValidators.isBoolean},volume:{value:100,validator:n.Squarespace.AttrValidators.isNumber}}})},"1.0",{requires:["base","node","squarespace-block-audio-player-template","squarespace-dom-emitters-resize","squarespace-ss-widget","widget"]})},"./src/main/webapp/universal/scripts-v6/widgets/billing/checkout/commerce-plan-picker.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/apps/App/screens/Checkout/screens/FeatureLevelSelectionPanel/index.jsx");var s=a("./common/temp/node_modules/react/index.js");var n=a("./common/temp/node_modules/react-dom/index.js");var r=a("./src/main/webapp/frontend/packages/enums/ProductLines.js");YUI.add("squarespace-widgets-billing-checkout-commerce-picker",function(e){e.namespace("Squarespace.Widgets.Billing.Checkout");var t=e.Squarespace.Widgets.Billing.Checkout.CommercePlanPicker=e.Base.create("CommercePicker",e.Squarespace.Widgets.SSWidget,[e.Squarespace.Damask.Panel.MixinPanel,e.Squarespace.Settings.Site.BillingPanels.MixinSwitchProducts],{renderUI:function(){t.superclass.renderUI.apply(this,arguments);this.mountNode=e.Node.create("<div>");this.get("contentBox").append(this.mountNode);n.render(s.createElement(i,{productLine:r.COMMERCE,onFeatureLevelSelected:function(){this._startProductSwitchAuthorizationFlow(r.COMMERCE,{templateIdentifier:e.config.win.__FULL_WEBSITE_TEMPLATE_IDENTIFIER__})}.bind(this),showProductLinePicker:false}),this.mountNode.getDOMNode())},destructor:function(){if(this.mountNode){n.unmountComponentAtNode(this.mountNode.getDOMNode());this.mountNode.remove(true);this.mountNode=null}}},{CSS_PREFIX:"sqs-commerce-plan-picker",ATTRS:{}})},"1.0",{requires:["base","squarespace-settings-site-billing-panels-mixin-switch-products","squarespace-damask-panel-mixin-panel","squarespace-ss-widget"]})},"./src/main/webapp/universal/scripts-v6/widgets/billing/checkout/cover-page-picker.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/frontend/packages/enums/CollectionTypes.js");var n=a("./src/main/webapp/frontend/packages/enums/WebsiteType.js");var r=a("./src/main/webapp/frontend/packages/enums/ProductLines.js");var o=a("./src/main/webapp/universal/src/shared/utils/YuiElimination.ts").isYuiClassEnabled;YUI.add("squarespace-widgets-billing-checkout-cover-page-picker",function(a){if(o("CoverPagePicker")){a.namespace("Squarespace.Widgets.Billing.Checkout");a.Squarespace.Widgets.Billing.Checkout.CoverPagePicker=a.Base.create("CoverPagePicker",a.Squarespace.Widgets.SSWidget,[a.WidgetParent,a.Squarespace.Mixins.Loadable,a.Squarespace.Damask.Panel.MixinPanel,a.Squarespace.Settings.Site.BillingPanels.MixinSwitchProducts],{initializer:function(){this.publish("chosen",{defaultFn:function(e){var t=this.get("onChosen");t&&t(e)},context:this});this._slideLayouts=[];a.Data.get({url:"/api/slide-layouts",data:{slideType:a.Squarespace.SlideType.COVER_PAGE},success:function(e){this._slideLayouts=e.results;this.fire("slide-layouts-loaded")}},this)},renderUI:function(){this._renderCoverPages()},_renderCoverPages:function(){var e=this.get("contentBox");var t=this._renderHeader();this._isParkingPage()||(t+=this._renderExistingCoverPages());t+=this._renderNewCoverPages();e.setContent(t);this._adjustDimensions()},_renderHeader:function(){var e=i("Select a Cover Page to continue.");var t=i("Confirm Product Change");var a=i("To change your plan, choose an existing Cover page or create a new one.");if(this._isParkingPage()){e=i("Choose your Cover Page layout to continue.");t=i("Start Free Trial");a=""}return'<div class="header"><span class="headline">'+e+'</span><span class="confirm-plan-change" data-action="confirm-plan-change">'+t+'</span><p class="explanation">'+a+"</p></div>"},_renderExistingCoverPages:function(){var e=a.Squarespace.ContentCollectionCache.filter(function(e){return e.get("type")===s.SPLASH_PAGE});var t=e.map(function(e){return'<div class="cover-page-frame"><div class="select"><span data-collection-id="'+e.get("id")+'">'+i("Select")+'</span></div><iframe src="/'+e.get("urlId")+'"></iframe></div>'}).join("");""!==t&&(t='<div class="cover-page-frame-wrapper"><div class="label">Existing</div><div class="items">'+t+"</div></div>");return t},_renderNewCoverPages:function(){var e=this._isParkingPage()?"":i("New");var t=this._slideLayouts.map(function(e){return'<div class="new-cover-page" style="background-image: url('+e.thumbnailUrl+')" /><div class="select"><span data-cover-page-identifier="'+e.identifier+'">'+i("Select")+"</span></div></div>"}).join("");""===t&&(t='<span class="loading">'+i("Loading…")+"</span>");t='<div class="new-cover-page-wrapper"><span class="label">'+e+'</span><div class="items">'+t+"</div></div>";return t},_adjustDimensions:function(){var e=this.get("contentBox").one(".items").get("offsetWidth");var t=".items > div.new-cover-page, .items > div.cover-page-frame";var a=this.get("contentBox").one(t);if(!a)return;var i=a.get("offsetWidth");var s=Math.floor(e/i);var n=e-s*i;var r=2*(s-1);var o=Math.floor(n/r);var l="."+this.getClassName("content")+" .items > div";var c=l+" { margin-left: "+o+"px !important; margin-right: "+o+"px !important; margin-bottom: "+o+"px !important; }";var u=l+":nth-child("+s+"n) { margin-right: 0px !important; }";var d=l+":nth-child("+s+"n+1) { margin-left: 0px !important; }";this._dimensionsStyleNode||(this._dimensionsStyleNode=this.get("boundingBox").appendChild("<style></style>"));this._dimensionsStyleNode.set("innerText",[c,d,u].join(""))},_isParkingPage:function(){return Static.SQUARESPACE_CONTEXT.website.websiteType===n.PARKING_PAGE},bindUI:function(){this._registerEvent(a.one(a.config.win).on("resize",function(){this._adjustDimensions()},this));this.get("contentBox").delegate("click",function(e){this.get("selectedExistingCollectionId")===e.target.getAttribute("data-collection-id")?this.set("selectedExistingCollectionId",null):this.set("selectedExistingCollectionId",e.target.getAttribute("data-collection-id"));this.set("selectedNewCoverPageLayoutIdentifier",null)},"[data-collection-id]",this);this.get("contentBox").delegate("click",function(e){this.get("selectedNewCoverPageLayoutIdentifier")===e.target.getAttribute("data-cover-page-identifier")?this.set("selectedNewCoverPageLayoutIdentifier",null):this.set("selectedNewCoverPageLayoutIdentifier",e.target.getAttribute("data-cover-page-identifier"));this.set("selectedExistingCollectionId",null)},"[data-cover-page-identifier]",this);this.get("contentBox").delegate("click",this._emitChosen,'[data-action="confirm-plan-change"]',this);this.on("slide-layouts-loaded",this._renderCoverPages,this);this.after(["selectedExistingCollectionIdChange","selectedNewCoverPageLayoutIdentifierChange"],function(e){var t=this.get("contentBox");t.all(".selected").each(function(e){e.removeClass("selected");e.one(".select span").setContent("Select")});var a=null;this.get("selectedExistingCollectionId")?a=t.one('[data-collection-id="'+this.get("selectedExistingCollectionId")+'"]').ancestor(".cover-page-frame"):this.get("selectedNewCoverPageLayoutIdentifier")&&(a=t.one('[data-cover-page-identifier="'+this.get("selectedNewCoverPageLayoutIdentifier")+'"]').ancestor(".new-cover-page"));if(a){a.one(".select span").setContent("Selected");a.addClass("selected");t.addClass("has-selected")}else t.removeClass("has-selected")},this)},_emitChosen:function(){var e={};this.get("selectedExistingCollectionId")?e.collectionId=this.get("selectedExistingCollectionId"):this.get("selectedNewCoverPageLayoutIdentifier")&&(e.coverPageIdentifier=this.get("selectedNewCoverPageLayoutIdentifier"));this.fire("chosen",e)}},{CSS_PREFIX:"sqs-cover-page-picker",ATTRS:{selectedExistingCollectionId:{},selectedNewCoverPageLayoutIdentifier:{},onChosen:{valueFn:function(){return function(e){this._startProductSwitchAuthorizationFlow(r.COVER_PAGE,{coverPageSlideIdentifier:e.coverPageIdentifier,existingCoverPageId:e.collectionId})}.bind(this)}}}})}},"1.0",{requires:["base","squarespace-settings-site-billing-panels-mixin-switch-products","squarespace-damask-panel-mixin-panel","squarespace-mixins-loadable","squarespace-models-content-collection","squarespace-ss-widget","widget-parent"]})},"./src/main/webapp/universal/scripts-v6/widgets/billing/checkout/website-plan-picker.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/apps/App/screens/Checkout/screens/FeatureLevelSelectionPanel/index.jsx");var s=a("./common/temp/node_modules/react/index.js");var n=a("./common/temp/node_modules/react-dom/index.js");var r=a("./src/main/webapp/frontend/packages/enums/ProductLines.js");YUI.add("squarespace-widgets-billing-checkout-website-picker",function(e){e.namespace("Squarespace.Widgets.Billing.Checkout");var t=e.Squarespace.Widgets.Billing.Checkout.WebsitePlanPicker=e.Base.create("WebsitePicker",e.Squarespace.Widgets.SSWidget,[e.Squarespace.Damask.Panel.MixinPanel,e.Squarespace.Settings.Site.BillingPanels.MixinSwitchProducts],{renderUI:function(){t.superclass.renderUI.apply(this,arguments);this.get("boundingBox").setStyle("width","100%");this.mountNode=e.Node.create("<div>");this.get("contentBox").append(this.mountNode);n.render(s.createElement(i,{productLine:r.CLASSIC,onFeatureLevelSelected:function(){this._startProductSwitchAuthorizationFlow(r.CLASSIC,{templateIdentifier:e.config.win.__FULL_WEBSITE_TEMPLATE_IDENTIFIER__})}.bind(this),showProductLinePicker:false}),this.mountNode.getDOMNode())},destructor:function(){if(this.mountNode){n.unmountComponentAtNode(this.mountNode.getDOMNode());this.mountNode.remove(true);this.mountNode=null}}},{CSS_PREFIX:"sqs-website-plan-picker",ATTRS:{}})},"1.0",{requires:["base","squarespace-settings-site-billing-panels-mixin-switch-products","squarespace-damask-panel-mixin-panel","squarespace-ss-widget"]})},"./src/main/webapp/universal/scripts-v6/widgets/confirmation-media.js":function(e,t,a){var s=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var r=a("./src/main/webapp/universal/src/shared/utils/formatting/substituteString.js");var o=a("./src/main/webapp/universal/src/shared/utils/UrlUtils.js");YUI.add("squarespace-widgets-confirmation-media",function(n){n.namespace("Squarespace.Widgets");var i={IMAGE:0,VIDEO:1,IFRAME:2};var t=n.Squarespace.Widgets.ConfirmationMedia=n.Base.create("confirmation",n.Squarespace.Widgets.Confirmation,[],{renderUI:function(){t.superclass.renderUI.call(this);var e=this.get("mediaType");e===i.IMAGE?this._renderImage():e===i.VIDEO?this._renderVideo():e===i.IFRAME&&this._renderIframe()},_renderImage:function(){this._renderMediaNodeFromHTML('<img src="'+this.get("mediaSrc")+'"/>',this.show)},_renderVideo:function(){if(this.get("videoResolver"))this._getHTMLFromVideoResolver(function(e){this._renderMediaNodeFromHTML(e,this.show)}.bind(this));else{var e=this.get("mediaSrc");Array.isArray(e)||(e=[e]);this._renderMediaNodeFromHTML(r('<video preload="auto" autoplay loop>{sub1}</video>',{sub1:e.reduce(function(e,t){var a=t.src||t;var i=t.type||"video/"+a.match(/\.([^\.]+)$/)[1];return r('{html}<source src="{src}" type="{type}"/>',{html:e,src:a,type:i})},"")}),this.show)}},_getHTMLFromVideoResolver:function(t){this.get("videoResolver").process(this.get("mediaSrc"),{onSuccess:function(e){if(!e||!e.html){console.error("[ConfirmationMedia] no data or html passed from oembed resolver",e);return}t(e.html)},onFailure:function(e){console.warn("[ConfirmationMedia]",e)},onTimeout:function(e){console.warn("[ConfirmationMedia]",e)}},this)},_renderIframe:function(){var e=this.get("mediaSrc");var t="";e.srcDoc?t="srcDoc='"+e.srcDoc+"'":e.src?t="src='"+e.src+"'":"string"===typeof e&&(t="src='"+e+"'");this._renderMediaNodeFromHTML("<iframe "+t+"/>",this.show)},_renderMediaNodeFromHTML:function(e,t){var a=n.Node.create(e);var i=["IMG","IFRAME"].indexOf(a.get("nodeName"))>-1;if(i){a.once("load",function(e){a.detachAll();t.call(this)},this);a.once("error",function(e){a.detachAll();console.error("[ConfirmationMedia] Could not load image",e)})}var s=this.get("mediaDimension");n.Array.each(["width","height"],function(e){s[e]&&a.setStyle(e,s[e]+"px")});this.set("mediaNode",a.appendTo(this.get("contentBox").one(".media")));i||t.call(this)}},{CSS_PREFIX:"sqs-widgets-confirmation",TEMPLATE:'<div class="title"></div><div class="message"></div><div class="media"></div><div class="buttons"></div>',TYPE:n.Squarespace.Widgets.Confirmation.TYPE,ANCHOR:n.Squarespace.Widgets.Confirmation.ANCHOR,TYPE_MEDIA:i,ATTRS:{className:{value:"with-media"},visible:{value:false},style:{value:n.Squarespace.Widgets.Confirmation.TYPE.CONFIRM_ONLY},"strings.confirm":{value:s("Okay, got it.")},width:{value:null,getter:function(e){var t=this.get("mediaDimension");var a=this.get("mediaNode");if(e)return e;if(t&&t.width)return t.width;if(a)return a.get("naturalWidth")||a.get("width")},lazyAdd:false},showOverlay:{value:true},position:{value:n.Squarespace.Widgets.PositionHelper.ANCHOR.CENTER},mediaType:{value:i.IMAGE,validator:function(e){return n.Object.hasValue(i,e)}},mediaSrc:{value:"",setter:function(e){if(e&&"string"===typeof e&&!o.isInternalUrl(e))return o.ensureProtocol(e);return e}},mediaDimension:{value:{width:null,height:null}},videoResolver:{valueFn:function(){if(this.get("mediaType")!==i.VIDEO)return null;var e=n.Squarespace.oEmbedResolvers.youtube;var t=n.Squarespace.oEmbedResolvers.vimeo;var a=this.get("mediaSrc");if(a&&"string"===typeof a){if(e.canProcess(a,"video"))return e;if(t.canProcess(a,"video"))return t}return null},validator:n.Squarespace.AttrValidators.isNullOrInstanceOf(n.Squarespace.EmbedResolver)},mediaNode:{value:null,validator:n.Squarespace.AttrValidators.isNullOrNode}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-oembed-resolvers","squarespace-widgets-confirmation","squarespace-widgets-position-helper"]})},"./src/main/webapp/universal/scripts-v6/widgets/confirmation.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/universal/src/shared/constants/LayoutEngineClassnames.js");var n=a("./src/main/webapp/universal/src/shared/utils/mediaQueries.js");var l=a("./common/temp/node_modules/@sqs/utils/focus/index.js").containFocus;var c=s.DISABLE_DRAG_SELECTION_CLASSNAME;YUI.add("squarespace-widgets-confirmation",function(r){r.namespace("Squarespace.Widgets");var t={CONFIRM_OR_REJECT:0,CONFIRM_OR_CANCEL:1,CONFIRM_ONLY:2,NO_BUTTONS:3};var o=r.Squarespace.Widgets.Confirmation=r.Base.create("confirmation",r.Widget,[r.Squarespace.Mixins.EventRegistrar],{initializer:function(){this._posHelper=new r.Squarespace.Widgets.PositionHelper(this.get("position"),this.get("padding"));this._resizeEmitter=new r.Squarespace.ResizeEmitter;if(this.get("escToCancel")){r.Squarespace.EscManager.addTarget(this);this.ignoreBodyClicks=true}var e=["show","hide","confirm","reject","cancel"];r.Array.each(e,function(e){this.publish(e,{emitFacade:true,broadcast:2})},this);this._timers=[]},destructor:function(){r.Squarespace.EscManager.removeTarget(this);this._resizeEmitter.destroy();this._resizeEmitter=null;this._posHelper=null;this._overlay=null;this._buttonsNode=null;this._cancelButton=null;this._rejectButton=null;this._confirmButton=null;while(0!==this._timers.length)this._timers.shift().cancel();this._timers=null;this.detachAll()},renderUI:function(){o.superclass.renderUI.call(this);var e=this.get("zIndex");var t=this.get("boundingBox");var a=this.get("contentBox");var i=this.constructor.TEMPLATE;r.Lang.isString(i)&&a.prepend(i);t.addClass(this.get("className"));r.Lang.isValue(e)&&t.setStyle("z-index",e);a.addClass("clear");a.one(".title").setContent(this.get("strings.title"));var s=r.guid();a.one(".title").setAttribute("id",s);a.one(".message").setContent(this.get("strings.message"));var n=r.guid();a.one(".message").setAttribute("id",n);a.setAttribute("role","dialog");a.setAttribute("aria-labelledby",s+" "+n);this._buttonsNode=a.one(".buttons");this._renderButtons();this.get("visible")&&this.show();t.addClass(c)},bindUI:function(){var e=r.bind(function e(a){return function e(t){t.halt();this._handleResponse(a)}},this);var t=r.bind(function e(a){return function e(t){if(32===t.keyCode||13===t.keyCode){t.halt();this._handleResponse(a)}}},this);if(r.Lang.isValue(this._confirmButton)){this._confirmButton.on("click",e("confirm"),this);this._confirmButton.on("keydown",t("confirm"),this)}if(r.Lang.isValue(this._cancelButton)){this._cancelButton.on("click",e("cancel"),this);this._cancelButton.on("keydown",t("cancel"),this)}if(r.Lang.isValue(this._rejectButton)){this._rejectButton.on("click",e("reject"),this);this._rejectButton.on("keydown",t("reject"),this)}this.after("positionChange",function(){this._posHelper=new r.Squarespace.Widgets.PositionHelper(this.get("position"),this.get("padding"))},this);this.get("position")!==r.Squarespace.Widgets.PositionHelper.ANCHOR.MOUSE&&this._registerEvent(this._resizeEmitter.on("resize",this._updatePosition,this));var a=this.get("hideAfterTime");r.Lang.isNumber(a)&&this._registerTimer(r.later(a,this,this._hideAfterTime));this.get("destroyOnHide")&&this.onceAfter("hide",this.destroy,this);this.before("hide",function e(){this._revertFocusContainment();r.Lang.isValue(this._overlay)&&this._overlay.remove(true)},this);this.on("cancel",this.hide,this);this.onceAfter("confirm",this.hide,this);this.onceAfter("reject",this.hide,this)},_handleResponse:function(e){this.fire(e)},_renderButtons:function(){var e=this.get("style");if(e===t.NO_BUTTONS)return;e!==t.CONFIRM_ONLY&&(this._cancelButton=this._buttonsNode.appendChild(this._createButton("cancel")));e===t.CONFIRM_OR_REJECT&&(this._rejectButton=this._buttonsNode.appendChild(this._createButton("reject")));this._confirmButton=this._buttonsNode.appendChild(this._createButton("confirm"))},_createButton:function(e){var t="div";return r.Node.create(r.Lang.sub('<{element} role="button" tabindex="0" class="confirmation-button no-frame {type}">{sub1}</{element}>',{type:e,sub1:this.get("strings."+e),element:t}))},_updatePosition:function(){var e=this.get("boundingBox");var t=this._posHelper.fetch(e,this.get("anchor"));e.setStyles(t)},_renderOverlay:function(){var e=this.get("boundingBox");var t=this.get("zIndex")||parseInt(e.getStyle("z-index"),10);this._overlay=e.insertBefore("<div></div>",e);this._overlay.addClass(this.getClassName("overlay"));this._overlay.setStyle("z-index",t-1);this.get("showOverlay")||this._overlay.setStyle("opacity","0");this._overlay.on("click",function(e){e.halt();this._handleResponse("cancel")},this)},show:function(){r.Lang.isValue(this._overlay)||this._renderOverlay();var e=this.get("boundingBox");this.set("visible",true);e.setStyle("width",this.get("width"));this._updatePosition();e.addClass("shown");this._revertFocusContainment=l({container:e.getDOMNode(),root:r.one("body").getDOMNode(),setFocusOnContain:this._confirmButton&&this._confirmButton.getDOMNode()||true});this.fire("show")},hide:function(e){var t=function(e,t){var a=e.addClass;t&&(a=e.removeClass);r.bind(a,e,"hiding")();r.Lang.isValue(r.UA.mobile)&&r.bind(a,e,"mobile")()};var a=this.get("boundingBox");var i=function(){if(r.Lang.isValue(a.getDOMNode())&&a.hasClass("hiding")){t(a,true);this.set("visible",false);this.fire("hide")}};if(r.Lang.isBoolean(e)&&e)i.call(this);else{t(a);a.once(["transitionend","oTransitionEnd","otransitionend","webkitTransitionEnd"],i,this);this._registerTimer(r.later(600,this,i))}},_hideAfterTime:function(){this.hide()},_registerTimer:function(e){this._timers.push(e)}},{CSS_PREFIX:"sqs-widgets-confirmation",TEMPLATE:'<div class="title"></div><div class="message"></div><div class="buttons"></div>',TYPE:t,ANCHOR:r.Squarespace.Widgets.PositionHelper.ANCHOR,show:function(e){return new o(e)},ATTRS:{className:{value:"question",validator:r.Lang.isString},escToCancel:{value:true,validator:r.Lang.isBoolean},hideAfterTime:{validator:r.Squarespace.AttrValidators.isNullOrNumber},destroyOnHide:{value:true,validator:r.Lang.isBoolean},position:{getter:function(e){if(r.Lang.isValue(e))return e;if(r.Lang.isValue(r.UA.mobile)||n.isSubDesktop())return r.Squarespace.Widgets.PositionHelper.ANCHOR.CENTER;return r.Squarespace.Widgets.PositionHelper.ANCHOR.MOUSE},validator:r.Lang.isFunction},anchor:{},padding:{value:20,validator:r.Lang.isNumber},render:{valueFn:function(){var e=r.one(r.Squarespace.Damask.ContextGlobals.fromTop("Y.config.doc.body"));if(r.Lang.isValue(e))return e;return r.one(r.config.doc.body)}},style:{value:t.CONFIRM_OR_CANCEL,validator:r.Lang.isNumber},showOverlay:{value:false,validator:r.Lang.isBoolean},strings:{value:{title:"",message:"",confirm:i("Confirm"),cancel:i("Cancel"),reject:i("Reject")}},width:{value:350},zIndex:{validator:r.Squarespace.AttrValidators.isNullOrNumber},instrumentationTitle:{value:null}}})},"1.0",{requires:["base","squarespace-damask-context-globals","squarespace-dom-emitters-resize","squarespace-escmanager","squarespace-mixins-event-registrar","squarespace-util","squarespace-widgets-position-helper"]})},"./src/main/webapp/universal/scripts-v6/widgets/data-confirmation.js":function(e,t){YUI.add("squarespace-widgets-data-confirmation",function(t){t.namespace("Squarespace.Widgets");var e=t.Squarespace.Widgets.DataConfirmation=t.Base.create("dataConfirmation",t.Squarespace.Widgets.Confirmation,[t.WidgetParent],{initializer:function(){this._addFields()},renderUI:function(){e.superclass.renderUI.call(this);this._childrenContainer=this.get("contentBox").one(".fields");this.get("boundingBox").addClass("sqs-widgets-data-confirmation")},syncUI:function(){this._updatePosition()},_addFields:function(){t.Array.each(this.get("fields"),function(e){t.Object.hasKey(e,"name")?this.add(e):console.warn("[DataConfirmation] Dialog field missing name. Skipping.")},this)},_handleResponse:function(e){this.fire(e,{data:t.Squarespace.FormUtils.getData(this._items)})}},{CSS_PREFIX:"sqs-widgets-confirmation",TEMPLATE:'<div class="title"></div><div class="message"></div><div class="fields"></div><div class="buttons"></div>',TYPE:t.Squarespace.Widgets.Confirmation.TYPE,ANCHOR:t.Squarespace.Widgets.Confirmation.ANCHOR,ATTRS:{fields:{value:[],validator:t.Lang.isArray}}})},"1.0",{requires:["base","squarespace-dialog-field-2","squarespace-form-utils","squarespace-widgets-confirmation"]})},"./src/main/webapp/universal/scripts-v6/widgets/data-widget.js":function(e,t){YUI.add("squarespace-widgets-data-widget",function(a){a.namespace("Squarespace.Widgets");var i="data-state-";var t=a.Squarespace.Widgets.DataWidget=a.Base.create("dataWidget",a.Squarespace.Widgets.SSWidget,[],{initializer:function(e){e.dataState||(this.getProperty("ASYNC_DATA")?this.set("dataState",this.getProperty("DATA_STATES").INITIALIZED):this.set("dataState",this.getProperty("DATA_STATES").LOADED))},renderUI:function(){t.superclass.renderUI.call(this);this._updateDataStateClassName()},bindUI:function(){t.superclass.bindUI.call(this);var e=this.get("id");this.after(e+"|dataChange",function(e){e.noSyncUI||this.syncUI()},this);this.after(e+"|dataStateChange",this._updateDataStateClassName,this)},_updateDataStateClassName:function(){var t=this.get("boundingBox"),e=this.get("dataState");a.Object.each(this.getProperty("DATA_STATES"),function(e){t.removeClass(i+e)});t.addClass(i+e)},setLoadingState:function(){return this.set("dataState",this.getProperty("DATA_STATES").LOADING)},setLoadedState:function(){return this.set("dataState",this.getProperty("DATA_STATES").LOADED)},setLoadFailedState:function(){return this.set("dataState",this.getProperty("DATA_STATES").LOAD_FAILED)},loadedSuccessfully:function(){return this.get("dataState")===this.getProperty("DATA_STATES").LOADED},isLoading:function(){return this.get("dataState")===this.getProperty("DATA_STATES").LOADING},loadFailed:function(){return this.get("dataState")===this.getProperty("DATA_STATES").LOAD_FAILED}},{CSS_PREFIX:"sqs-data-widget",ASYNC_DATA:false,DATA_STATES:{INITIALIZED:"initialized",LOADING:"loading",LOADED:"loaded",LOAD_FAILED:"load-failed"},ATTRS:{data:{value:null,validator:function(e){if(a.Lang.isUndefined(e)){console.warn(this.name+": Will not set data to undefined.");return false}return true}},dataState:{valueFn:function(){return this.getProperty("DATA_STATES").INITIALIZED}},preventRenderTemplate:{value:false,validator:a.Squarespace.AttrValidators.isBoolean}}})},"1.0",{requires:["base","node","squarespace-attr-validators","squarespace-ss-widget","widget"]})},"./src/main/webapp/universal/scripts-v6/widgets/edit-table/cell-error.js":function(e,t){YUI.add("squarespace-widgets-edit-table-cell-error",function(s){s.namespace("Squarespace.Widgets.EditTable");s.Squarespace.Widgets.EditTable.CellError=s.Base.create("CellError",s.Squarespace.Widgets.SSWidget,[],{CONTENT_TEMPLATE:null,destructor:function(){var e=this.get("anchorNode");var t=this.get("flyout");e.remove();e.destroy(true);t.remove();t.destroy(true)},renderUI:function(){this.get("anchorNode").appendTo(this.get("target"));this.get("flyout").appendTo(s.one("body"))},bindUI:function(){this._registerEvent(this.get("anchorNode").on("mouseenter",function(){this.get("target").addClass("error-is-hovering");this.showFlyout()},this),this.get("flyout").on("click",this.hideFlyout,this))},showFlyout:function(){var e=this.get("target");var t=this.get("flyout");var a=e.getX()+e.get("offsetWidth");var i=e.getY();t.setStyles({top:i+1,left:a});t.addClass("is-visible");t.addClass("is-showing");s.config.win.setTimeout(t.removeClass.bind(t,"is-showing"),300)},hideFlyout:function(){var e=this.get("flyout");e.addClass("is-hiding");s.config.win.setTimeout(function(){e.removeClass("is-visible");e.removeClass("is-hiding");this.get("target").removeClass("error-is-hovering")}.bind(this),100)}},{CSS_PREFIX:"sqs-widgets-edit-table-cell-error",ATTRS:{target:{},anchorNode:{valueFn:function(){return s.Node.create('<div class="error-hover">&#33;</div>')}},flyout:{valueFn:function(){return s.Node.create('<div class="cell-error-flyout"><div class="error-message">'+this.get("strings.error")+"</div></div>")}},strings:{value:{}}}})},"1.0",{requires:["base","node","squarespace-ss-widget"]})},"./src/main/webapp/universal/scripts-v6/widgets/edit-table/cell.js":function(e,t){YUI.add("squarespace-widgets-edit-table-cell",function(a){a.namespace("Squarespace.Widgets.EditTable");var e=a.Squarespace.Widgets.EditTable.Cell=a.Base.create("cell",a.Squarespace.Widgets.SSWidget,[],{BOUNDING_TEMPLATE:"<td></td>",CONTENT_TEMPLATE:'<div class="data-container"></div>',initializer:function(){this.publish("cell:edit")},destructor:function(){if(this.error){this.error.destroy(true);this.error=null}},renderUI:function(){e.superclass.renderUI.call(this);this.get("boundingBox").addClass(this.get("field.name"))},bindUI:function(){var t=this.get("contentBox");t.on("click",function(e){if(!this.get("editable")||this.get("locked"))return;e.halt();this.plug(a.Squarespace.Plugin.InlineInputEditor,{render:t,data:this.get("data"),onKeyUp:function(){this.get("boundingBox").removeClass("has-error")}.bind(this),onBlur:function(){this.error&&this.error.hideFlyout()}.bind(this),onCommit:function(e){e.prevVal!==e.newVal&&this.set("data",e.newVal)}})},this);this.before("dataChange",function(e){if(!this.isDataValid(e.newVal))return;this.set("error",null);var t=this.fire("cell:edit",{newVal:e.newVal,prevVal:e.prevVal,cell:this});t||e.halt()});this.after(["dataChange","lockedChange"],this.syncUI);this.after("errorChange",function(e){this._toggleErrorTooltip(e.newVal)})},syncUI:function(){var e=this.get("boundingBox");e.toggleClass("locked",this.get("locked"));e.toggleClass("editable",this.get("editable"));e.toggleClass("has-error",!!this.get("error"));this.get("contentBox").set("text",this.get("data"))},isDataValid:function(e){var t=this.get("validator")(e);if(t){this.set("error",t);return false}this.set("error",null);return true},_toggleErrorTooltip:function(e){this.syncUI();if(e)this.error=new a.Squarespace.Widgets.EditTable.CellError({target:this.get("boundingBox"),render:true,"strings.error":e});else if(this.error){this.error.destroy(true);this.error=null}}},{CSS_PREFIX:"sqs-edit-table-cell",ATTRS:{data:{value:""},field:{},editable:{valueFn:function(){return!!this.get("field.editable")}},locked:{valueFn:function(){return!!this.get("field.locked")}},validator:{valueFn:function(){var e=this.get("field.validator");if(e)return e;return function(){}}},error:{}}})},"1.0",{requires:["base","node","squarespace-plugin-inline-input-editor","squarespace-ui-base","squarespace-ss-widget","squarespace-widgets-edit-table-cell-error"]})},"./src/main/webapp/universal/scripts-v6/widgets/edit-table/delete-cell.js":function(e,t){YUI.add("squarespace-widgets-edit-table-delete-cell",function(e){e.namespace("Squarespace.Widgets.EditTable");var t=e.Squarespace.Widgets.EditTable.DeleteCell=e.Base.create("DeleteCell",e.Squarespace.Widgets.EditTable.Cell,[],{initializer:function(){this.publish("cell:delete")},renderUI:function(){t.superclass.renderUI.call(this);this.get("boundingBox").addClass("sqs-edit-table-cell");this.get("trashCan").appendTo(this.get("contentBox"))},bindUI:function(){this.get("boundingBox").delegate("click",function(e){if(this.get("locked")){e.halt();return}this.fire("cell:delete")},".icon-delete",this);this.after("lockedChange",this.syncUI)},syncUI:function(){this.get("boundingBox").toggleClass("locked",this.get("locked"))}},{CSS_PREFIX:"sqs-edit-table-delete-cell",ATTRS:{trashCan:{valueFn:function(){return e.Node.create('<span class="icon icon-delete"></span>')}}}})},"1.0",{requires:["base","node","squarespace-widgets-edit-table-cell"]})},"./src/main/webapp/universal/scripts-v6/widgets/edit-table/dialog-cell.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-widgets-edit-table-dialog-cell",function(t){t.namespace("Squarespace.Widgets.EditTable.DialogCell");var a=t.Squarespace.Widgets.EditTable.DialogCell=t.Base.create("DialogCell",t.Squarespace.Widgets.EditTable.Cell,[],{initializer:function(){this._constructDialogField();this.publish("cell:click");this.publish("cell:edit")},renderUI:function(){a.superclass.renderUI.call(this);var e=this.get("boundingBox");e.addClass(this.get("name"));e.addClass("sqs-edit-table-cell");this.get("dialogField").render(this.get("contentBox"))},bindUI:function(){var e=this.get("dialogField");this._registerEvent(e.on("click",function(e){if(this.get("locked"))return;this.fire("cell:click",{cell:this})},this),e.after("dataChange",function(e){this.fire("cell:edit",{cell:this})},this),e.on("keyup",function(){this.get("boundingBox").removeClass("has-error")},this));this.after("lockedChange",function(e){e.newVal?this.get("dialogField").disable():this.get("dialogField").enable();this.syncUI()});this.after("errorChange",function(e){this.get("dialogField").toggleError(e.newVal);this.syncUI()})},syncUI:function(){var e=this.get("boundingBox");e.toggleClass("locked",this.get("locked"));e.toggleClass("has-error",!!this.get("error"))},setDialogConfig:function(e){this.set("dialogConfig",e);this.get("dialogField").setAttrs(e)},resetDialogField:function(){this.get("dialogField").set("data",this.get("dialogConfig").data)},isDataValid:function(){this.set("error",null);return a.superclass.isDataValid.apply(this,arguments)},_constructDialogField:function(){var e=this.get("dialogCtor");var t=this.get("dialogConfig");t.disabled=!!this.get("field.locked");var a=new e(t);t["strings.placeholder"]||a.set("strings.placeholder",this.get("field.header")||i("Value"));this.set("dialogField",a)}},{CSS_PREFIX:"sqs-edit-table-dialog-cell",ATTRS:{field:{},dialogCtor:{valueFn:function(){var e=this.get("field.inputCell.dialog");return e||t.Squarespace.DialogFields.Text}},dialogConfig:{valueFn:function(){var e=this.get("field.inputCell.dialogConfig");return e||{}}},dialogField:{},name:{getter:function(){return this.get("field.name")}},placeholder:{setter:function(e){this.get("dialogField").set("strings.placeholder",e);return e}},data:{getter:function(){return this.get("dialogField").get("data")}}}})},"1.0",{requires:["base","squarespace-dialog-text","squarespace-widgets-edit-table-cell"]})},"./src/main/webapp/universal/scripts-v6/widgets/edit-table/dialog-row.js":function(e,t){YUI.add("squarespace-widgets-edit-table-dialog-row",function(t){t.namespace("Squarespace.Widgets.EditTable");var e=t.Squarespace.Widgets.EditTable.DialogRow=t.Base.create("DialogRow",t.Squarespace.Widgets.EditTable.Row,[],{CELL_CONSTRUCTOR:t.Squarespace.Widgets.EditTable.DialogCell,initializer:function(){this.publish("row:cell-click");this.publish("row:cell-edit")},renderUI:function(){e.superclass.renderUI.call(this);this.get("boundingBox").addClass("sqs-edit-table-row")},bindUI:function(){var e=this.get("cells");this._registerEvent(e.map(function(e){return e.on("cell:click",this._propagateCellClick,this)},this));this._registerEvent(e.map(function(e){return e.on("cell:edit",this._propagateDataChange,this)},this));this.after("hasErrorChange",function(e){this.get("boundingBox").toggleClass("has-error",e.newVal)})},isValid:function(){var e=this.get("cells").map(function(e){return e.isDataValid(e.get("data"))});return t.Array.every(e,function(e){return e})},resetDialogCells:function(){this.get("cells").forEach(function(e){e.resetDialogField()})},_propagateCellClick:function(e){if(!this.isValid()){this.set("hasError",true);return}this.set("hasError",false);this.fire("row:cell-click",{cell:e.cell,row:this})},_propagateDataChange:function(e){this.fire("row:cell-edit",{cell:e.cell,row:this})}},{CSS_PREFIX:"sqs-edit-table-dialog-row",ATTRS:{fields:{},cells:{valueFn:function(){return this.get("fields").map(function(e){return new this.CELL_CONSTRUCTOR({field:e})},this)}},hasError:{value:false}}})},"1.0",{requires:["base","squarespace-widgets-edit-table-dialog-cell","squarespace-widgets-edit-table-row"]})},"./src/main/webapp/universal/scripts-v6/widgets/edit-table/group-table.js":function(e,t){YUI.add("squarespace-widgets-edit-table-group-table",function(t){t.namespace("Squarespace.Widgets.EditTable");var e=t.Squarespace.Widgets.EditTable.GroupTable=t.Base.create("GroupTable",t.Squarespace.Widgets.EditTable.Table,[],{renderUI:function(){e.superclass.renderUI.call(this);this.get("boundingBox").addClass("sqs-edit-table-table")},_removeRow:function(t,e){var a=this.get("groups");var i=this.get("groupMap");var s=t.get("data."+this.get("groupKey"));var n=i[s];var r=a[n];a[n]=r.filter(function(e){return e!==t});e||t.destroy(true)},_findInsertNodeByGroup:function(e){var t=this.get("groups");var a=this.get("groupMap");var i=a[e];while(i>=0){var s=t[i];if(s.length){var n=s[s.length-1];return n.get("boundingBox")}i-=1}return this.get("header")},_renderNewRow:function(e){var t=this.get("groups");var a=this.get("groupMap");var i=e.get("data."+this.get("groupKey"));var s=t[a[i]];if(!s){var n=t.push([])-1;a[i]=n;s=t[n]}var r=this._findInsertNodeByGroup(i);s.push(e);e.render(this.get("contentBox"));r?r.insert(e.get("boundingBox"),"after"):this.get("contentBox").prepend(e.get("boundingBox"))},_generateRows:function(){var a=this.get("groups");var i=this.get("groupMap");var s=this.get("groupKey");this.get("data").forEach(function(e){var t=i[e[s]];a[t].push(this.createRow(e))},this)},_destroyAllRows:function(){t.Array.invoke(this.get("rows"),"destroy",true);this.set("groups",this.get("groupOrder").map(function(){return[]}));var e=this.get("inputRow");e&&e.destroy(true)}},{CSS_PREFIX:"sqs-edit-table-group-table",ATTRS:{groupOrder:{value:[],writeOnce:true,validator:t.Squarespace.AttrValidators.isArray},groupKey:{validator:t.Squarespace.AttrValidators.isString},groupMap:{valueFn:function(){var e=this.get("groupOrder");return e.reduce(function(e,t,a){e[t]=a;return e},{})},writeOnce:true,validator:t.Squarespace.AttrValidators.isObject},groups:{valueFn:function(){var e=this.get("groupOrder");return e.map(function(e){return[]})},validator:t.Squarespace.AttrValidators.isArray},rows:{getter:function(){return t.Array.flatten(this.get("groups"))},readOnly:true}}})},"1.0",{requires:["array-invoke","base","squarespace-widgets-edit-table-table","squarespace-attr-validators"]})},"./src/main/webapp/universal/scripts-v6/widgets/edit-table/lockable-table.js":function(e,t){YUI.add("squarespace-widgets-edit-table-lockable-table",function(e){e.namespace("Squarespace.Widgets.EditTable");var t=e.Squarespace.Widgets.EditTable.LockableTable=e.Base.create("LockableTable",e.Squarespace.Widgets.EditTable.Table,[e.Squarespace.Widgets.EditTable.MixinLockable],{bindUI:function(){t.superclass.bindUI.call(this);this.after("lockedChange",this.syncUI)},syncUI:function(){t.superclass.syncUI.call(this);this.get("boundingBox").toggleClass(this.getClassName("locked"),this.get("locked"))},setData:function(){t.superclass.setData.apply(this,arguments);this._toggleTableLock(this.get("locked"))}},{CSS_PREFIX:"sqs-widgets-edit-table-lockable-table",ATTRS:{}})},"1.0",{requires:["base","node","squarespace-widgets-confirmation","squarespace-widgets-edit-table-mixin-lockable","squarespace-widgets-edit-table-table"]})},"./src/main/webapp/universal/scripts-v6/widgets/edit-table/mixin-lockable.js":function(e,t){YUI.add("squarespace-widgets-edit-table-mixin-lockable",function(e){e.namespace("Squarespace.Widgets.EditTable");e.Squarespace.Widgets.EditTable.MixinLockable=e.Base.create("MixinLockable",e.Base,[],{initializer:function(){this.after("lockedChange",function(e){this._toggleTableLock(e.newVal)})},_toggleTableLock:function(t){this.get("rows").forEach(function(e){e.get("cells").forEach(function(e){e.set("locked",t)})});var e=this.get("inputRow");e&&e.get("cells").forEach(function(e){e.set("locked",t)})}},{ATTRS:{locked:{value:false}}})},"1.0",{requires:["base"]})},"./src/main/webapp/universal/scripts-v6/widgets/edit-table/row.js":function(e,t){YUI.add("squarespace-widgets-edit-table-row",function(i){i.namespace("Squarespace.Widgets.EditTable");i.Squarespace.Widgets.EditTable.Row=i.Base.create("row",i.Squarespace.Widgets.SSWidget,[],{BOUNDING_TEMPLATE:"<tr></tr>",CONTENT_TEMPLATE:null,CELL_CONSTRUCTOR:i.Squarespace.Widgets.EditTable.Cell,initializer:function(){this.publish("row:cell-edit");this.publish("row:delete")},destructor:function(){i.Array.invoke(this.get("cells"),"destroy",true)},renderUI:function(){this.get("cells").forEach(function(e){e.render(this.get("boundingBox"))},this)},bindUI:function(){this.get("cells").forEach(this._bindCellEvents,this)},collectCurrentData:function(){var e=this.get("cells").map(function(e){return e.get("data")});var t=this._collectFieldKeys();return i.Array.hash(t,e)},setCellError:function(e,t){var a=this.get("cells")[e];if(!a)return;a.set("error",t);this.set("hasError",true)},animateAdd:function(){var e=this.get("boundingBox").all(".data-container");i.config.win.setTimeout(e.addClass.bind(e,"expanded"),0)},animateRemove:function(){var e=this.get("boundingBox").all(".data-container");e.removeClass("expanded");i.config.win.setTimeout(this.destroy.bind(this,true),300)},_collectFieldKeys:function(){return this.get("fields").map(function(e){return e.name})},_bindCellEvents:function(e){this._registerEvent(e.after("errorChange",this._syncErrorState,this),e.after("cell:edit",function(e){this.fire("row:cell-edit",{row:this,cell:e.cell,newVal:e.newVal,prevVal:e.prevVal})},this),e.after("cell:delete",function(e){this.fire("row:delete",{row:this})},this))},_syncErrorState:function(){var e=this.get("cells").some(function(e){return!!e.get("error")});this.get("boundingBox").toggleClass("has-error",e)}},{CSS_PREFIX:"sqs-edit-table-row",ATTRS:{data:{value:[]},fields:{},cells:{valueFn:function(){var a=this.get("data");return this.get("fields").map(function(e){var t={data:a[e.name],field:e};if("action"===e.name)return new i.Squarespace.Widgets.EditTable.DeleteCell(t);return new this.CELL_CONSTRUCTOR(t)},this)}}}})},"1.0",{requires:["array-invoke","base","node","squarespace-ss-widget","squarespace-widgets-edit-table-cell","squarespace-widgets-edit-table-delete-cell"]})},"./src/main/webapp/universal/scripts-v6/widgets/edit-table/table.js":function(e,t,a){var n=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-widgets-edit-table-table",function(i){i.namespace("Squarespace.Widgets.EditTable");var s=i.Squarespace.Widgets.EditTable.Table=i.Base.create("table",i.Squarespace.Widgets.SSWidget,[],{CONTENT_TEMPLATE:"<table></table>",ROW_CONSTRUCTOR:i.Squarespace.Widgets.EditTable.Row,initializer:function(){var e=this.get("actionColumn");e&&this.get("fields").push(e);this._generateRows();this._createInputRow();this.publish("edit-table:row-add");this.publish("edit-table:row-delete");this.publish("edit-table:cell-edit")},destructor:function(){this._destroyAllRows()},renderUI:function(){s.superclass.renderUI.call(this);var e=this.get("header");e instanceof i.Node&&e.appendTo(this.get("contentBox"));this._renderAllRows();var t=this.get("loadingOverlay");this.get("spinner").render(t);var a=this.get("boundingBox");t.appendTo(a);a.toggleClass("is-visible",this.get("visible"));a.toggleClass("is-hidden",!this.get("visible"))},bindUI:function(){this._bindInputRowEvents();this.get("rows").forEach(this._bindRowEvents,this);this.after("edit-table:row-add",function(e){this.addRow(e.data)});this.after("edit-table:row-add",function(e){this.get("inputRow").resetDialogCells()});this.after("edit-table:row-delete",function(e){this.removeRow(e.row)});this.after("isLoadingChange",function(e){this.get("boundingBox").toggleClass("is-loading",e.newVal)});this.after("visibleChange",function(e){var t=this.get("boundingBox");t.toggleClass("is-visible",e.newVal);t.toggleClass("is-hidden",!e.newVal)})},addRow:function(e){var t=this.createRow(e);this._addRow(t);t.animateAdd()},createRow:function(e){return new this.ROW_CONSTRUCTOR({data:e,fields:this.get("fields")})},removeRow:function(e){this._removeRow(e,true);e.animateRemove()},setData:function(e){this._destroyAllRows();this.set("data",e);this._generateRows();this._createInputRow();this._renderAllRows();this._bindInputRowEvents();this.get("rows").forEach(this._bindRowEvents,this)},revertChanges:function(){this.setData(i.clone(this.get("initialData")))},collectCurrentData:function(){return this.get("rows").map(function(e){return e.collectCurrentData()})},toggleInputRow:function(e){var t=this.get("inputRow");if(!t&&"hide"===e||t&&"show"===e)return;if("show"===e){this._createInputRow();this.get("inputRow").render(this.get("contentBox"));this._bindInputRowEvents()}else if("hide"===e){t.destroy(true);this.set("inputRow",null)}else false},_generateRows:function(){this.set("rows",this.get("data").map(this.createRow,this))},_createInputRow:function(){if(false===this.get("inputRow"))return;this.set("inputRow",new i.Squarespace.Widgets.EditTable.DialogRow({fields:this.get("fields")}))},_addRow:function(e){this.get("rows").push(e);this._renderNewRow(e);this._bindRowEvents(e)},_renderNewRow:function(e){e.render(this.get("contentBox"));this.get("inputRow").get("boundingBox").insert(e.get("boundingBox"),"before")},_removeRow:function(t,e){var a=this.get("rows");a=a.filter(function(e){return e!==t});this.set("rows",a);e||t.detroy(true)},_bindRowEvents:function(t){this._registerEvent(t.on("row:delete",function(e){this.fire("edit-table:row-delete",{row:t})},this),t.on("row:cell-edit",function(e){this.fire("edit-table:cell-edit",{row:e.row,cell:e.cell,newVal:e.newVal,prevVal:e.prevVal})},this))},_bindInputRowEvents:function(){var e=this.get("inputRow");e&&this._registerEvent(e.on("row:cell-click",function(e){"action"===e.cell.get("name")&&e.row.isValid()&&this.fire("edit-table:row-add",{data:e.row.collectCurrentData()})},this))},_renderAllRows:function(){var t=this.get("contentBox");var e=this.get("inputRow");this.get("rows").forEach(function(e){e.render(t);e.get("boundingBox").all(".data-container").addClass("expanded")});e&&e.render(t)},_destroyAllRows:function(){i.Array.invoke(this.get("rows"),"destroy",true);this.set("rows",[]);var e=this.get("inputRow");e&&e.destroy(true)}},{CSS_PREFIX:"sqs-edit-table-table",ATTRS:{data:{value:[]},initialData:{valueFn:function(){return i.clone(this.get("data"))}},fields:{value:[]},header:{valueFn:function(){var t=new i.Node.create('<tr class="header"></tr>');this.get("fields").forEach(function(e){t.append(i.Node.create('<th class="'+e.name+'">'+e.header+"</th>"))});this.get("actionColumn")&&t.append(i.Node.create("<th>&nbsp;</th>"));return t}},inputRow:{},rows:{value:[]},actionColumn:{value:{name:"action",editable:false,header:"",inputCell:{dialog:i.Squarespace.DialogFields.Button,dialogConfig:{className:"primary","strings.text":n("Add")}}}},isLoading:{value:false},loadingOverlay:{valueFn:function(){return i.Node.create('<div class="loading-overlay"></div>')}},spinner:{valueFn:function(){return new i.Squarespace.Spinner({size:22,color:"dark"})}}}})},"1.0",{requires:["array-invoke","base","node","squarespace-dialog-button","squarespace-spinner","squarespace-ss-widget","squarespace-widgets-edit-table-dialog-row","squarespace-widgets-edit-table-row"]})},"./src/main/webapp/universal/scripts-v6/widgets/gismo.js":function(e,t){YUI.add("squarespace-widgets-gismo",function(e){e.namespace("Squarespace.Widgets");e.Squarespace.Widgets.Gismo=e.Base.create("Gismo",e.Widget,[e.Squarespace.GismoBase])},"1.0",{requires:["base","squarespace-gismo","widget"]})},"./src/main/webapp/universal/scripts-v6/widgets/google-places-autocomplete.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-widgets-google-places-autocomplete",function(e){e.namespace("Squarespace.Widgets");e.Squarespace.Widgets.GooglePlacesAutocomplete=e.Base.create("GooglePlacesAutoCompleteWidget",e.Squarespace.Widgets.ScrollingAutoCompleteList,[e.Squarespace.Mixins.GooglePlacesAutocomplete],{},{CSS_PREFIX:e.Squarespace.Widgets.ScrollingAutoCompleteList.CSS_PREFIX,ATTRS:{strings:{value:{items_available:i("Suggestions are available. Use up and down arrows to select suggestions.")}}}})},"1.0",{requires:["base","squarespace-mixins-google-places-autocomplete","squarespace-scrolling-auto-complete-list"]})},"./src/main/webapp/universal/scripts-v6/widgets/information.js":function(e,t){YUI.add("squarespace-widgets-information",function(e){e.namespace("Squarespace.Widgets");var t=e.Squarespace.Widgets.Information=e.Base.create("information",e.Squarespace.Widgets.Confirmation,[],{_hideAfterTime:function(){this.hide();this._handleResponse("confirm")},_renderOverlay:function(){if(!this.get("showOverlay"))return;t.superclass._renderOverlay.call(this)}},{CSS_PREFIX:"sqs-widgets-confirmation",TYPE:e.Squarespace.Widgets.Confirmation.TYPE,ANCHOR:e.Squarespace.Widgets.Confirmation.ANCHOR,TEMPLATE:e.Squarespace.Widgets.Confirmation.TEMPLATE,show:function(e){return new t(e)},ATTRS:{className:{value:"okay"},style:{value:e.Squarespace.Widgets.Confirmation.TYPE.NO_BUTTONS},position:{value:e.Squarespace.Widgets.PositionHelper.ANCHOR.TOP_RIGHT},hideAfterTime:{value:2e3},escToCancel:{value:false}}})},"1.0",{requires:["base","squarespace-widgets-confirmation","squarespace-widgets-position-helper"]})},"./src/main/webapp/universal/scripts-v6/widgets/lightbox2-overlay.js":function(e,t){YUI.add("squarespace-widgets-lightbox2-overlay",function(e){e.namespace("Squarespace.Widgets");e.Squarespace.Widgets.Lightbox2Overlay=e.Squarespace.Lightbox2Overlay=e.Base.create("LightboxOverlay",e.Squarespace.Widgets.Gismo,[],{destructor:function(){if(e.Lang.isValue(this._overlayEl)){this._overlayEl.destroy(true);this._overlayEl=null}},renderUI:function(){this._overlayEl=e.Node.create('<div class="sqs-lightbox-overlay"></div>');this._overlayEl.addClass("sqs-lightbox-overlay-"+this.get("overlayStyle"));"light"===this.get("theme")&&this._overlayEl.addClass("light");this.get("contentBox").appendChild(this._overlayEl);this.get("contentBox").plug(e.Squarespace.Plugin.ScrollLock);this.show()},show:function(){this._overlayEl.setStyles({zIndex:"10000000"});var e=this._anim(this._overlayEl,{opacity:this.get("opacity")},{duration:this.get("speed")});e.on("end",function(){this.fire("shown")},this);e.run()},overlayHideAndDestroy:function(){this.once("hidden",this.destroy);this._hide()},_hide:function(){this.fire("hide");var e=this._anim(this._overlayEl,{opacity:0},{duration:this.get("speed")});e.on("end",function(){this.fire("hidden")},this);this.get("destroyed")?this.fire("hidden"):e.run()},_getContainer:function(){return this._overlayEl}},{NS:"overlay",ATTRS:{opacity:{value:.95},overlayStyle:{value:"default"},theme:{value:"dark"},container:{getter:"_getContainer"},speed:{value:.3}}})},"1.0",{requires:["base","node","squarespace-plugin-scroll-lock","squarespace-widgets-gismo"]})},"./src/main/webapp/universal/scripts-v6/widgets/lightbox2.js":function(e,t,a){var n=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./common/temp/node_modules/@sqs/utils/scroll/getDocScrollNode.js");var i=a("./common/temp/node_modules/@sqs/cross-browser-resize/src/index.js");var r=a("./src/main/webapp/universal/src/shared/utils/selfThrottle.js");var o=a("./common/temp/node_modules/@sqs/utils/focus/index.js").containFocus;YUI.add("squarespace-widgets-lightbox2",function(c){c.namespace("Squarespace.Widgets");c.Squarespace.Widgets.Lightbox2=c.Squarespace.Lightbox2=c.Base.create("Lightbox2",c.Squarespace.Widgets.Gismo,[],{initializer:function(){c.config.win.ACTIVE_LIGHTBOX=this;var e=this.get("contentBox");e.set("role","dialog");e.set("aria-label",this.get("title"));this._overlay=new c.Squarespace.Lightbox2Overlay({theme:this.get("theme")});this._overlay.on("hide",this.hideAndDestroy,this);this.bMobile=c.SQS.Gallery.Manager.isMobile();this.requestUpdateHeightAndRefresh=r(this.updateHeightAndRefresh.bind(this))},destructor:function(){this._flushEvents();if(c.Lang.isValue(this._slideshow)){this._slideshow.destroy();this._slideshow=null}this._overlay.destroy();this._overlay=null;c.config.win.ACTIVE_LIGHTBOX=null;this.crossBrowserResizeHandle&&i.removeListener(this.crossBrowserResizeHandle)},renderUI:function(){c.Squarespace.Lightbox2.superclass.renderUI.call(this);c.one("body").addClass("sqs-lightbox-open");var t=this.get("contentBox");this._overlay.render(t);var e=n("Close");this._closeEl=c.Node.create('<a class="sqs-lightbox-close" role="button" tabindex="0" aria-label="'+e+'"></a>').appendTo(t).hide();if(this.get("set").length>1){if(!this.bMobile&&this.get("controls.previous")){var a=n("Previous Item");this._previousEl=c.Node.create('<a class="sqs-lightbox-previous" role="button" tabindex="0" aria-label="'+a+'"></a>');t.appendChild(this._previousEl)}if(!this.bMobile&&this.get("controls.next")){var i=n("Next Item");this._nextEl=c.Node.create('<a class="sqs-lightbox-next" role="button" tabindex="0" aria-label="'+i+'"></a>');t.appendChild(this._nextEl)}}else this.get("set").length||this.set("set",[{content:this.get("content"),meta:this.get("meta")}]);this._slideshow=this.createSlideshow(t);this._lightboxContentEl=this._slideshow.get("container");if(this.bMobile){var s=n("Toggle Caption");this._metaTriggerEl=c.Node.create('<a class="sqs-lightbox-meta-trigger" role="button" tabindex="0" aria-label="'+s+'">&bull;</a>').appendTo(t)}this._lightboxContentEl.setStyles({opacity:1});this._overlay.once("shown",function(){this.ignoreBodyClicks=true;c.Squarespace.EscManager.addTarget(this);this._lightboxContentEl.show();this._closeEl&&this._closeEl.show();if(this._slideshow){var e=this._slideshow.get("slides").item(this._slideshow.get("currentIndex")).one(".sqs-video-wrapper");e&&e.videoloader.showVideo()}this.revertFocusContainment=o({container:t._node})},this);t.plug(c.Squarespace.Plugin.ScrollLock)},bindClickAndKeyDownEvents:function(e,t,a){this._event(e.on("click",t,this),a);this._event(e.on("keydown",function(e){13!==e.keyCode&&32!==e.keyCode||t.call(this,e)},this),a)},bindUI:function(){c.Squarespace.Lightbox2.superclass.bindUI.call(this);this._slideshow.after("currentIndexChange",c.bind(function(e){this.set("currentSetIndex",e.newVal);this.syncUI()},this));void 0!==c.config.win.orientation&&this._event(c.one(c.config.win).on("orientationchange",this.requestUpdateHeightAndRefresh,this));this._closeEl&&this.bindClickAndKeyDownEvents(this._closeEl,function(e){e.halt();this.hideAndDestroy(true)});this._metaTriggerEl&&this.bindClickAndKeyDownEvents(this._metaTriggerEl,function(){this.toggleMeta()},"meta-trigger");if(this._previousEl){this.bindClickAndKeyDownEvents(this._previousEl,function(e){e.halt();this.previous()},"previous-click");var t=c.throttle(c.bind(this.previous,this),200);this._event(c.on("key",function(e){e.halt();t()},c.config.win,"down:37",this),"keyboard")}if(this._nextEl){this.bindClickAndKeyDownEvents(this._nextEl,function(e){e.halt();this.next()},"next-click");var a=c.throttle(c.bind(this.next,this),200);this._event(c.on("key",function(e){e.halt();a()},c.config.win,"down:39",this),"keyboard");this.bMobile||this.setupNavigationFade()}this.isMobile||this._event(this.get("contentBox").on("click",this.onContentBoxClick,this));this._event(c.on("transition:scroll:tapped",function(e){this.onContentBoxClick(e.touchEvent)},this));this.crossBrowserResizeHandle=i.addListener(this.requestUpdateHeightAndRefresh.bind(this))},syncUI:function(){var e=s(c.config.doc).scrollTop;this.get("contentBox").setStyles({top:e,height:c.config.win.innerHeight});var t=this._slideshow._currentSlide();var a=t.one(".sqs-lightbox-meta")||this.createMetaEl(t);if(a){c.Lang.isValue(this._metaTriggerEl)&&this._metaTriggerEl.show();if(this.bMobile){a.appendTo(t);a.setStyles({bottom:this.bMetaEnabled?0:"-5000px",left:0,right:0});a.addClass("overlay-description-visible")}else{var i=t.one(".sqs-lightbox-padder").get("children").item(0);a.setStyles({bottom:parseInt(i.getStyle("top"),10)-1+"px",left:i.getStyle("left"),right:parseInt(i.getStyle("left"),10)-1+"px"})}}else c.Lang.isValue(this._metaTriggerEl)&&this._metaTriggerEl.hide()},updateHeightAndRefresh:function(){this.syncUI();this._slideshow.refresh()},onContentBoxClick:function(e){if(!e.target.ancestor("a",true)){e.halt();if(e.target.ancestor(".sqs-video-wrapper")){e.target.ancestor(".sqs-video-wrapper").videoloader.showVideo();return}if(!this.bMobile){var t=c.one("body").get("winWidth"),a=c.one("body").get("winHeight"),i=.02;if(e.clientX>t*i&&e.clientX<t*(1-i)&&e.clientY>a*i&&e.clientY<a*(1-i)){if(e.clientX>=t/2&&this._nextEl){this.next();return}if(e.clientX<c.one("body").get("winWidth")/2&&this._previousEl){this.previous();return}}}if(e.target.ancestor("img",true))return;this.hideAndDestroy(true)}},previous:function(){this._slideshow.previousSlide()},next:function(){this._slideshow.nextSlide()},close:function(){this.hideAndDestroy()},toggleMeta:function(){this.get("contentBox").all(".sqs-lightbox-meta").each(c.bind(function(e){this.bMetaEnabled=0===parseInt(e.getStyle("bottom"),10);this._anim(e,{bottom:this.bMetaEnabled?"-5000px":"0"},{duration:this.get("speed")}).run();this.bMetaEnabled=!this.bMetaEnabled},this))},hideAndDestroy:function(e){if(c.Lang.isBoolean(e)&&e)this._overlay.overlayHideAndDestroy();else{this.once("hidden",this.destroy);this.hide()}c.one("body").removeClass("sqs-lightbox-open");this.revertFocusContainment&&this.revertFocusContainment();this.get("historyHash")&&this._slideshow.set("currentIndex",null)},hide:function(){var e=this.get("speed");var t;this.get("contentBox").setStyles({transition:"opacity "+e+"s ease",zIndex:889,opacity:0});t=c.later(1e3*e,this,function(){c.Squarespace.EscManager.removeTarget(this);this.fire("hidden");t.cancel();t=null})},setupNavigationFade:function(){var t;var a=function(){t&&t.cancel()};var i=function(e){a();if(e&&e.inViewportRegion()){e.addClass("mouseover").siblings().removeClass("mouseover");t=c.later(500,this,function(){e&&e.inViewportRegion()&&e.removeClass("mouseover")})}};this._event(this._nextEl.on("mouseenter",function(){a()}),"nav-next-onmouse");this._event(this._previousEl.on("mouseenter",function(){a()}),"nav-prev-onmouse");this._event(this._lightboxContentEl.on("mousemove",c.bind(function(e){e.clientX<c.one("body").get("winWidth")/2?i(this._previousEl):i(this._nextEl)},this)),"container-hovering")},createSlideshow:function(e){var t=c.Node.create('<div class="sqs-lightbox-slideshow"></div>').appendTo(e);var a=this.get("set");for(var i=0;i<a.length;i++){var s=c.Node.create('<div class="sqs-lightbox-slide"></div>').appendTo(t);var n=c.Node.create('<div class="sqs-lightbox-padder"></div>').appendTo(s);var r=c.one(a[i].content.cloneNode(true)).appendTo(n).setAttribute("data-image-stretch","false").setStyle("opacity",null).removeClass("video-fill");var o=a[i].content.ancestor();if(this.get("historyHash")&&o){o.getAttribute("data-slide-url")&&s.setAttribute("data-slide-url",o.getAttribute("data-slide-url"));o.getAttribute("data-slide-id")&&s.setAttribute("data-slide-id",o.getAttribute("data-slide-id"))}r.all("iframe").remove()}var l=new c.SQS.Gallery.Gallery2({container:t,currentIndex:this.get("currentSetIndex"),loop:!this.bMobile,autoplay:false,refreshOnResize:true,refreshOnOrientationChange:true,design:"stacked",keyboard:false,designOptions:{clickBehavior:false,easing:c.Easing.easeInOutExpo,speed:.6,autoHeight:false,transition:this.bMobile?"scroll":"fade",transitionOptions:{direction:"horizontal",allowPageScroll:false}},loaderOptions:{mode:"fit"},lazyLoad:true,videoLoaderOptions:this.get("videoLoaderOptions"),historyHash:this.get("historyHash")});return l},createMetaEl:function(e){e=e.one(".sqs-lightbox-padder");var t=this.getCurrentElMeta();if(t){var a=c.Node.create('<div class="sqs-lightbox-meta"></div>');a.appendChild(t);e.appendChild(a);if(!this.bMobile){this._event(e.one(":first-child").on("mouseenter",function(){a.addClass("overlay-description-visible")},this),"meta-hovering");this._event(e.one(":first-child").on("mouseleave",function(){a.removeClass("overlay-description-visible")},this),"meta-hovering");this._event(a.on("mouseenter",function(){a.addClass("overlay-description-visible")},this),"meta-hovering");this._event(a.on("mouseleave",function(){a.removeClass("overlay-description-visible")},this),"meta-hovering")}return a}},getCurrentElContent:function(){if(this.get("set").length>0)return this.get("set")[this.get("currentSetIndex")].content;return this.get("content")},getCurrentElMeta:function(){if(this.get("set").length>0)return this.get("set")[this.get("currentSetIndex")].meta;return this.get("meta")}},{NS:"lightbox2",ATTRS:{content:{},controls:{value:{previous:false,next:false}},currentSetIndex:{value:0},meta:{},padding:{value:100},set:{value:[]},speed:{value:.6},theme:{value:"dark"},title:{value:n("Gallery")},videoLoaderOptions:{value:{}},historyHash:{value:false}}})},"1.0",{requires:["base","dom-style-ie","event-key","event-mouseenter","node","plugin","squarespace-animations","squarespace-dom-emitters-resize","squarespace-escmanager","squarespace-plugin-scroll-lock","squarespace-touch-event-listener","squarespace-video-loader","squarespace-widgets-gismo","squarespace-widgets-lightbox2-overlay","yui-throttle"]})},"./src/main/webapp/universal/scripts-v6/widgets/list/base-item-view.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var u=a("./src/main/webapp/frontend/packages/enums/CollectionTypes.js");var d=a("./src/main/webapp/frontend/packages/enums/RecordType.js");var s=a("./common/temp/node_modules/@sqs/responsive/dist/index.js").FontSize;var r=a("./src/main/webapp/universal/src/shared/utils/dateFormat.js");var n=a("./src/main/webapp/universal/src/shared/utils/getContextualDate.js");var p=a("./src/main/webapp/universal/src/shared/utils/CMSV7Events.js");var o=a("./src/main/webapp/universal/src/shared/utils/Loggers.ts");var l=a("./src/main/webapp/universal/src/shared/utils/error-reporter/global-sentry.ts");var h=a("./src/main/webapp/universal/src/shared/utils/SqsVersion.js");var g=l.captureException;var m=o.createLogger("content-item list widget","black");YUI.add("squarespace-widgets-list-base-item-view",function(c){c.namespace("Squarespace.Widgets.List");var e=c.Squarespace.Widgets.List.BaseItem=c.Base.create("BaseItem",c.Squarespace.SSWidget,[c.WidgetChild,c.Squarespace.Mixins.ClickSelectable],{initializer:function(){this.publish("buttonAction")},bindUI:function(){var e=this.get("id");this.get("boundingBox").delegate("click",function(e){e.stopImmediatePropagation();this._handleActionClick(e.target.getAttribute("attr-button-name"))},".button",this);this._registerEvent(this.get("item").after(e+"|save",this._renderAgain,this));this._registerEvent(this.get("item").after(e+"|titleChange",this._renderAgain,this));this._registerEvent(this.get("item").after(e+"|publishOnChange",this._renderAgain,this));this._registerEvent(this.get("item").after(e+"|structuredContentChange",function(e){this.get("item").get("recordType")===d.EVENT&&this._renderAgain(e)}.bind(this),this));this._registerEvent(this.get("item").after("workflowStateChange",this.syncUI,this));this._registerEvent(this.get("item").after("workflowStateChange",this.trackAction,this))},_handleActionClick:function(e){this.fire("buttonAction",{action:e})},renderUI:function(){e.superclass.renderUI.call(this);this.get("boundingBox").addClass("sqs-item-view");this.get("contentBox").addClass("sqs-item-view-content");this._addButtons()},syncUI:function(){this._fitText()},_fitText:function(){var e=this.get("contentBox").one(".title");if(e){this._responsiveTitle=new s({rootNode:e.getDOMNode(),widthRatio:1,minFontSize:13});e.setStyle("display","inline-block");this._responsiveTitle.resetAndRespond();e.setStyle("display",null)}},destructor:function(){this.detachAll();this.get("item").detach(this.get("id")+"|*");this._responsiveTitle&&(this._responsiveTitle=null)},trackAction:function(e){try{var t=this.get("item");var a=t.get("id");var i=t.get("recordType");var s=this.get("parent");var n=t.get("collectionId");var r=s?s.get("collection"):null;r=r||c.Squarespace.ContentCollectionCache.getById(n);if(!r)throw new Error("Could not find item's collection");var o=r.get("type");var l="blog";o===u.COLLECTION_TYPE_GENERIC&&i===d.EVENT&&(l="events");if(e.target.get("workflowState")===c.Squarespace.WorkflowStates.DELETED){m("Delete item via widget",{item:t});p.deleteCollectionItemFromPanel({itemId:a,collectionType:l,collectionId:n})}}catch(e){g(e)}},_renderAgain:function(e){if(e.target.get("workflowState")===c.Squarespace.WorkflowStates.DELETED){this.destroy(true);return}if(!this.get("destroyed")){this.get("contentBox").empty().prepend(this.renderTemplate());this._addButtons();this.syncUI()}},_addButtons:function(){var e=this.get("contentBox").one(".list-item");var t=c.Node.create('<div class="buttons controls">');var a=this.get("buttonList");var i=this.get("item");h.isV8()&&i.get("recordType")===d.TEXT&&(a=c.Array.filter(a,function(e){return"edit"!==e.key}));var s=this.get("boundingBox").get("offsetHeight")/a.length;c.Array.each(a,function(e){t.append('<div class="button button-'+e.key+'" attr-button-name="'+e.key+'" style="line-height:'+s+'px">'+e.label+"</div>")});e.append(t)},_getLikeText:function(e){if(!Static.SQUARESPACE_CONTEXT.websiteSettings.simpleLikingEnabled)return false;if(0===e.likeCount)return false;if(1===e.likeCount)return i("1 Like");if(!c.Lang.isValue(e.likeCount))return false;return i("{number} Likes",{number:e.likeCount})},_getCommentText:function(e){if(Static.SQUARESPACE_CONTEXT.websiteSettings.disqusShortname||e.commentState===c.Squarespace.CommentStates.DISABLED||0===e.commentCount||!c.Lang.isValue(e.commentCount))return false;return e.commentCount},_getEventDate:function(e){var t;var a;var i=e.structuredContent;var s=new Date(i.startDate);var n=new Date(i.endDate);if(s.toDateString()===n.toDateString()){t=r(s,"LLLLT");a=r(n,"LT")}else{t=r(s,"LLL");a=r(n,"LLL")}return(s?t+"&nbsp;&mdash;&nbsp;":"")+(n?a:"")},_getHBTemplateContext:function(){var e=this.get("item").toJSON();e.commentCount=this._getCommentText(e);e.likeCount=this._getLikeText(e);c.Lang.isValue(e.proxyForId)&&(e.flag={className:"example-content",message:"Example"});e.recordType===c.Squarespace.RecordType.EVENT&&(e.eventDateDescriptor=this._getEventDate(e));!e.imageUrl||e.coverImageUrl||(e.coverImageUrl=e.imageUrl);c.Lang.isString(e.coverImageUrl)&&(e.coverImageUrl=e.coverImageUrl.replace(/http(s?):/,""));e.author&&(e.author.displayName=this._getUserName(e.author));e.publishOn=n(e.publishOn);return e},_getUserName:function(t){var e=t.displayName;var a=t.firstName;var i=t.lastName;var s=c.Squarespace.Context.getInstance().get("memberAccountNames");var n=c.Object.some(s,function(e){return e.displayName!==t.displayName&&c.Lang.isString(e.displayName)&&-1!==e.displayName.indexOf(i)},this);if(1===c.Object.size(s))return null;c.Object.size(s)<10&&!n&&(e=this._getNameWithInitials(a,i));return c.Lang.isString(e)?c.Escape.html(c.Lang.trim(e)):null},_getNameWithInitials:function(e,t){var a=null;if(c.Lang.isString(e)&&""!==c.Lang.trim(e)){a=c.Lang.trim(e).substr(0,1)+".";c.Lang.isString(t)&&""!==c.Lang.trim(t)&&(a+=" "+c.Lang.trim(t))}return a}},{CSS_PREFIX:"sqs-item-view",HANDLEBARS_TEMPLATE:"widgets-list-base-item-view.html",ATTRS:{buttonList:{value:[{key:"edit",label:i("Edit")},{key:"delete",label:i("Delete")}]},item:{},strings:{value:{typeName:"item"}}}})},"1.0",{requires:["base","squarespace-content-item-types-editor","squarespace-mixins-click-selectable","squarespace-ss-widget","squarespace-util","squarespace-widgets-list-base-item-view-template","widget-child"]})},"./src/main/webapp/universal/scripts-v6/widgets/list/base-view.js":function(e,t,a){YUI.add("squarespace-widgets-list-base-view",function(r){r.namespace("Squarespace.Widgets.List");var e=r.Squarespace.Widgets.List.BaseView=r.Base.create("BaseView",r.Squarespace.Widgets.DataWidget,[r.WidgetParent],{destructor:function(){this._detachItemEvents()},renderUI:function(){e.superclass.renderUI.call(this);this.get("boundingBox").addClass("sqs-list-view");this.get("contentBox").addClass("sqs-list-view-content");this._addChildren(this.get("items"))},bindUI:function(){e.superclass.bindUI.call(this);this._registerItemEvents();this.after("itemsChange",this._onItemChange)},syncUI:function(){e.superclass.syncUI.call(this);this._syncListItems(this.get("items"))},_syncListItems:function(i){i instanceof r.ModelList&&(i=i.toArray());var s=[];var n=[];r.Array.each(i,function(e){var t=this.getWidgetForItemById(e.get("id"));var a=this.indexOf(t);-1!==a&&t.get("item")===e||s.push(e)},this);this.each(function(t,e){var a=r.Array.some(i,function(e){return t.get("item")===e},this);n[e]=!a&&t},this);this._removeChildren(n);this._addChildren(s)},_rerenderChildren:function(e){this._removeAllChildren();this._addChildren(e)},_removeChildren:function(e){r.Array.each(e,this._removeChild,this)},_removeChild:function(e,t){if(e){this.remove(t);e.destroy(true)}},_removeAllChildren:function(){var e=this.removeAll();r.Array.invoke(e,"destroy",true)},_addChildren:function(e){if(!e||0===e.length)return;e instanceof r.ModelList&&(e=e.toArray());e.forEach(this._addItemWidget,this)},_addItemWidget:function(e){if(!e.get("id")){false;return}this.add({item:e})},_onItemChange:function(e){e.prevVal&&this._detachItemEvents();e.newVal&&this._registerItemEvents();this._rerenderChildren(e.newVal);this.syncUI()},_detachItemEvents:function(){if(this._itemEventHandle){this._itemEventHandle.detach();this._itemEventHandle=null}},_registerItemEvents:function(){this._itemEventHandle&&false;this._itemEventHandle=this.get("items").after("add",function(e){if("reorder"===e.source)return;this._addItemWidget(e.model)},this)},getWidgetForItemById:function(t){!t||r.Lang.isString(t)||(t=t.get("id"));return r.Array.find(this.toJSON(),function(e){return e.get("item").get("id")===t})||null},getWidgetForItem:function(t){return r.Array.find(this.toJSON(),function(e){return e.get("item")===t})||null}},{CSS_PREFIX:"sqs-list-view",ATTRS:{defaultChildType:{value:r.Squarespace.Widgets.List.ItemBase},items:{value:new r.ModelList}}})},"1.0",{requires:["array-invoke","base","@sqs/yui-dd-wrappers/dd-behaviors","squarespace-widgets-data-widget","squarespace-widgets-list-base-item-view","widget-parent"]})},"./src/main/webapp/universal/scripts-v6/widgets/list/selectable-view.js":function(e,t){YUI.add("squarespace-widgets-list-selectable-view",function(i){i.namespace("Squarespace.Widgets.List");var a=i.Squarespace.Widgets.List.SelectableListView=i.Base.create("SelectableListView",i.Squarespace.Widgets.List.BaseView,[i.Squarespace.Mixins.ClickSelectableParent,i.Squarespace.Mixins.ContentCollectionBulkActionable],{bindUI:function(){a.superclass.bindUI.call(this);this.after("selectionChange",function(e){this.get("contentBox").toggleClass("multi-select-enabled",e.newVal&&e.newVal.size()>1);this.updateActionTray()},this);this.get("reorderable")&&this._enableItemReorder()},syncUI:function(){var e=this.getFocusedWidget();var t;i.Lang.isValue(e)&&(t=e.get("item"));a.superclass.syncUI.call(this);i.Lang.isValue(t)&&this.setFocusedChild(this.getWidgetForItemById(t.get("id")));this._ddDelegate&&this._ddDelegate.syncTargets()},destructor:function(){if(this._ddDelegate){this._ddDelegate.destroy(true);this._ddDelegate=null}},_enableItemReorder:function(){var e="."+this.get("defaultChildType").CSS_PREFIX;var t=this.get("contentBox");var a=this.get("multiple");this._ddDelegate=new i.SQS.DDWrappers.DD.Delegate({container:t,nodes:e,dragConfig:{groups:["list-"+this.get("id")]},enableDragReorder:true,dragReorderConfig:{selectedClassSelector:e+"-selected",enableGrouping:a},enableDragConstrained:true,dragConstrainedConfig:{stickY:true}});this._ddDelegate.on("reorder:reordered",function(e){this._reorderListItems(a?e.reordered:[e.reordered])},this)},_reorderListItems:function(e){var t=i.Array.map(e,function(e){return i.Widget.getByNode(e.node).get("item")});this.get("model").items.reorderItems(t,e[0].newIndex)}},{CSS_PREFIX:"sqs-list-view",ATTRS:{collection:{},model:{getter:function(e){return this.get("collection")||e}},moveable:{value:true},multiple:{value:true},reorderable:{value:false}}})},"1.0",{requires:["base","squarespace-widgets-list-base-view","squarespace-content-collection-bulk-actionable","squarespace-mixins-click-selectable-parent"]})},"./src/main/webapp/universal/scripts-v6/widgets/model.js":function(e,t){YUI.add("squarespace-widgets-model",function(e){e.namespace("Squarespace.Widgets");var t=e.Squarespace.Widgets.Model=e.Base.create("Model",e.Squarespace.Widgets.SSWidget,[e.WidgetChild],{bindUI:function(){t.superclass.bindUI.call(this);this._registerEvent(this.get("model").after("change",this.syncUI,this))},_getHBTemplateContext:function(){var e=t.superclass._getHBTemplateContext.call(this);e.model=e.model.toJSON();return e}},{CSS_PREFIX:"sqs-model",ATTRS:{model:{valueFn:function(){return new e.Model},validator:e.Squarespace.AttrValidators.isInstanceOf(e.Model),writeOnce:"initOnly"}}})},"1.0",{requires:["base","model","squarespace-attr-validators","squarespace-ss-widget","widget-child"]})},"./src/main/webapp/universal/scripts-v6/widgets/music-album-track.js":function(e,t,a){var o=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var i=a("./src/main/webapp/frontend/packages/enums/CollectionTypes.js");var l=a("./src/main/webapp/universal/src/shared/utils/humanizeDuration.js");var s=a("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/ContentBrowserAPI.js").default;YUI.add("squarespace-widgets-music-album-track",function(n){n.namespace("Squarespace.Widgets");var a="macintosh"===n.UA.os?"metaKey":"ctrlKey";var r=n.Squarespace.Widgets.MusicAlbumTrack=n.Base.create("MusicAlbumTrack",n.Squarespace.Widgets.Model,[n.WidgetChild,n.Squarespace.Mixins.EditableModel],{renderUI:function(){r.superclass.renderUI.call(this);var e=this.get("contentBox");var t=e.one(".meta");this._titleNode=e.one(".title");this._artistNameNode=t.one(".artist-name");this._durationNode=t.one(".duration");this._utilsNode=e.one(".utils")},bindUI:function(){r.superclass.bindUI.call(this);this._bindStructuredContentListener();this.get("contentBox").on(["click","contextmenu"],function(e){var t=this.get("model");e.shiftKey||e[a]?this._toggleSelected():e.target.ancestor(".remove",true)?this._confirmAndDestroy():t&&t.get("mediaProcessingState")===n.Squarespace.MediaProcessingState.READY&&(this.get("parent").get("collection").get("type")===i.COLLECTION_TYPE_GENERIC?s.showCollectionItemSettingsEditor(this.get("model").getAttrs()):this._edit())},this)},syncUI:function(){r.superclass.syncUI.call(this);this._syncMediaProcessingState();var e=this.get("model");var t=e.get("title")||o("No Title");var a=e.get("structuredContent");var i=a.get("artistName")||o("Unknown Artist");var s=a.get("lengthInMilliSeconds");s=n.Lang.isValue(s)?l(s):o("N/A");this._titleNode.empty().setHTML(t);this._artistNameNode.empty().setHTML(i);this._durationNode.empty().setHTML(s)},_toggleSelected:function(){this.set("selected",0===this.get("selected")?1:0)},_confirmAndDestroy:function(){var e=o("Remove Track");var t=o("Are you sure you wish to remove this track?");var a=function(){this.get("model").destroy({remove:true})};new n.Squarespace.Widgets.Confirmation({"strings.title":e,"strings.message":t}).on("confirm",a,this)},_syncMediaProcessingState:function(){var e=this.get("contentBox").one(".processing-wrapper");e&&e.remove(true);var t=this.get("model");var a=t.get("mediaProcessingState");var i=t.get("mediaIsUploading");var s=t.get("systemDataId");switch(a){case n.Squarespace.MediaProcessingState.QUEUED:case n.Squarespace.MediaProcessingState.PROCESSING:this._showProcessingStatus(o("Processing…"),true);break;case n.Squarespace.MediaProcessingState.READY:this.set("className",this.getClassName("ready"));break;default:if(i)this._showProcessingStatus(o("Uploading…"),true);else if(s){this.set("className",this.getClassName("error"));this._showProcessingStatus(o("Error Processing"),false)}else{this.set("className",this.getClassName("error"));this._showProcessingStatus(o("No Audio Asset"),false)}break}},_showProcessingStatus:function(e,t){this.set("className",this.getClassName("processing"));var a=this._utilsNode.appendChild('<div class="processing-wrapper"></div>');t&&new n.Squarespace.Spinner({render:a,color:this.get("spinnerColor")});a.append("<span>"+e+"</span>")},_bindStructuredContentListener:function(){var e=this.get("model").get("structuredContent");e&&this._registerEvent(e.after("change",this.syncUI,this))}},{CSS_PREFIX:"sqs-music-album-track",HANDLEBARS_TEMPLATE:"widgets-music-album-track.html",ATTRS:{editorCtor:{valueFn:function(){return n.Squarespace.ContentItemEditor.Audio}},model:{valueFn:function(){return new n.Squarespace.Models.ContentItem({recordType:n.Squarespace.RecordType.Audio})},validator:n.Squarespace.AttrValidators.isInstanceOf(n.Squarespace.Models.ContentItem)},item:{getter:function(){return this.get("model")},readOnly:true},spinnerColor:{value:"dark"}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-content-item-types-audio","squarespace-enum","squarespace-mixins-editable-model","squarespace-models-content-item","squarespace-spinner","squarespace-ui-base","squarespace-widgets-confirmation","squarespace-widgets-model","squarespace-widgets-music-album-track-template","widget-child"]})},"./src/main/webapp/universal/scripts-v6/widgets/music-albums/list-view.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/universal/src/shared/constants/Constants.js");YUI.add("squarespace-widgets-music-albums-list-view",function(r){r.namespace("Squarespace.Widgets.MusicAlbums");var e=r.Squarespace.Widgets.MusicAlbums.ListView=r.Base.create("trackList",r.Squarespace.Widgets.List.SelectableListView,[],{destructor:function(){this.uploader.destroy();this.uploader=null},_addItemWidget:function(e){this.add({model:e,render:this.get("contentBox").one(".tracks"),spinnerColor:this.get("spinnerColor")})},renderUI:function(){e.superclass.renderUI.call(this);this._renderUploader()},bindUI:function(){e.superclass.bindUI.call(this);this.on("uploadPreflightChange",function(e){this.uploader.get("destroyed")||this.uploader.set("preflight",e.newVal)});this._registerEvent(this.get("items").after(["add","remove"],function(e){"reorder"!==e.source&&this.get("rendered")&&this.syncUI()},this))},syncUI:function(){e.superclass.syncUI.call(this);this._syncEmptyState()},removeItemInPlace:function(e){var t=this.getWidgetForItemById(e.get("id"));this.remove(t.get("index"));t.destroy()},_syncListItems:function(){this._rerenderChildren(this.get("items"))},_syncEmptyState:function(e){var t=e;r.Lang.isBoolean(t)||(t=this.get("items").isEmpty());this.get("boundingBox").toggleClass(this.getClassName("empty"),!!t);var a='<div class="title">'+this.get("strings.uploadText")+"</div>";t&&(a+='<div class="desc">'+this.get("strings.emptyDescription")+"</div>");this.uploader.set("selectButtonLabel",a)},_enableItemReorder:function(){e.superclass._enableItemReorder.call(this);this._ddDelegate.set("dragConstrainedConfig",r.merge(this._ddDelegate.get("dragConstrainedConfig"),{constrain:this.get("contentBox").one(".tracks")}));this._ddDelegate.on("reorder:reorder",this._onDDReorder,this)},_onDDReorder:function(e){var t=e.reorder;t.proxyNode.setAttribute("data-track-number",t.visibleIndex+1)},_renderUploader:function(){this.uploader=new r.Squarespace.Uploader({dragAndDropArea:this.get("boundingBox"),multipleFiles:true,autoUpload:true,fileFilters:[{description:i("Audio"),extensions:"*.mp3;*.mp4;*.ogg;*.m4a"}],processFile:r.bind(this._uploadAudioProcessor,this),addPlaceholder:r.bind(this._addAudioPlaceholder,this),fileComplete:r.bind(this._audioUploadComplete,this),createJob:r.bind(this._createAudioProcessingJob,this),jobFailure:r.bind(this._audioProcessingUpdate,this),jobComplete:r.bind(this._audioProcessingUpdate,this),selectButtonLabel:this.get("strings.uploadText"),preflight:this._doPreflightThenSetUploadURL.bind(this),validateFileFn:r.bind(this._validateFileBeforeUpload,this),render:this.get("contentBox")})},_doPreflightThenSetUploadURL:function(e){var t=this.get("uploadPreflight")||function(e){e()};t(function(){this._updateUploadURL();e()}.bind(this))},_updateUploadURL:function(){this.uploader.set("uploadURL","/api/albums/"+this.get("collection").get("id")+"/tracks")},_uploadAudioProcessor:function(e){var t=this.get("model");var a=this.uploader.fileDataFromFile(e.file);a&&!e.item&&(e.item=a.item);var i=e.index;if(e.item)i=e.item.get("displayIndex");else{var s=t.get("nextDisplayIndex");r.Lang.isNumber(i)&&t instanceof r.Squarespace.Models.ContentCollection?i+=s:i=s}e.postData={contentType:"audio",process:"true",index:i,collectionId:this.get("collection").get("id"),id:e.id};if(e.invalid){var n=e.invalid[0];new r.Squarespace.Widgets.Alert({"strings.title":n.title,"strings.message":n.message})}},_validateFileBeforeUpload:function(){if(this.get("collection").get("nextDisplayIndex")>=s.MAX_TRACKS_IN_ALBUM)return{title:i("Max Size Reached"),message:i("This album has a maximum size of {number} tracks.",{number:s.MAX_TRACKS_IN_ALBUM})}},_addAudioPlaceholder:function(e){var t=new r.Squarespace.Models.ContentItem({mediaIsUploading:true,mediaProcessingState:r.Squarespace.MediaProcessingState.QUEUED,displayIndex:e.postData.index,recordType:r.Squarespace.RecordType.AUDIO});e.item=t;this.get("model").items.add(e.item,{source:"upload"});var a=this.getWidgetForItemById(t.get("id"));if(r.Lang.isValue(a))return a.get("contentBox")},_audioUploadComplete:function(e,t){var a=e.item;a.set("mediaIsUploading",false);a.setAttrs(t.media[0]);0===e.index&&this.get("model").load()},_createAudioProcessingJob:function(e,t){if(!t.job){false;return null}e.item.setAttrs(t.media[0]);var a=new r.Squarespace.AudioProcessingJob(r.merge(t.job,{started:true}));a.set("collection",this.get("model"));return a},_audioProcessingUpdate:function(a,e){var t=new r.Squarespace.Models.ContentItem({id:e.get("data.contentItemId"),recordType:r.Squarespace.RecordType.AUDIO});t.load(function(e,t){r.Lang.isValue(e)||a.item.setAttrs(t)})},_uiAddChild:function(e,t){var a=e.get("boundingBox");t.contains(a)||t.appendChild(e.get("boundingBox"))}},{TEMPLATE:'<div class="sqs-music-album-track-list-header">'+i("Tracks")+'</div><div class="tracks"></div>',CSS_PREFIX:"sqs-music-album-track-list",ATTRS:{defaultChildType:{value:r.Squarespace.Widgets.MusicAlbumTrack},model:{getter:function(e){return this.get("collection")||e}},"strings.uploadText":{value:i("Add Tracks")},"strings.emptyDescription":{value:i("This collection is empty. Click here to add your first item.")},spinnerColor:{value:"dark"},uploadPreflight:{value:null},reorderable:{value:true}}})},"1.0",{requires:["base","@sqs/yui-dd-wrappers/dd-delegate","squarespace-job-manager","squarespace-uploader","squarespace-widgets-alert","squarespace-widgets-list-selectable-view","squarespace-widgets-music-album-track"]})},"./src/main/webapp/universal/scripts-v6/widgets/position-helper.js":function(e,t){YUI.add("squarespace-widgets-position-helper",function(c){c.namespace("Squarespace.Widgets");var t=20;function n(e,t,a,i){var s;try{s=c.Squarespace.Damask.ContextGlobals.relative(i,"Y")}catch(e){s=c}var n=s.DOM.viewportRegion();var r=n.width;var o=n.height;var l={x:a,y:a};e.x+t.width>=r&&(e.x=r-t.width-a);e.x<=l.x&&(e.x=l.x);e.y+t.height>=o&&(e.y=o-t.height-a);e.y<=l.y&&(e.y=l.y);return e}function a(e,t,a){var i=e.get("className").split(" ").map(function(e){return"."+e}).join("");var s=c.all(i).size();var n=a;if(1===s)return n;var r;switch(t){case"top":case"bottom":r=e.get("offsetHeight");break;case"left":case"right":r=e.get("offsetWidth");break}n=r*(s-1)+a*s;return n}var r=function(e){var t={x:c.Squarespace.Mouse.client.lastX,y:c.Squarespace.Mouse.client.lastY};var a={width:e.get("offsetWidth"),height:e.get("offsetHeight")};var i=n({x:t.x-Math.floor(a.width/2),y:t.y-Math.floor(a.height/2)},a,this.padding,e);return{position:"fixed",top:i.y,left:i.x}};var e=function(e){return{position:"fixed",top:a(e,"top",this.padding),left:this.padding}};var i=function(e){return{position:"fixed",top:a(e,"top",this.padding),right:this.padding}};var s=function(e){return{position:"fixed",bottom:a(e,"bottom",this.padding),left:this.padding}};var o=function(e){return{position:"fixed",bottom:a(e,"bottom",this.padding),right:this.padding}};var l=function(e,t){if(!c.Lang.isValue(t))return r(e);var a=t.getX()+t.get("offsetWidth")+this.padding;var i={width:e.get("offsetWidth"),height:e.get("offsetHeight")};var s=n({x:a,y:t.getY()},i,this.padding,e);return{top:s.y,left:s.x}};var u=function(e){var t={x:Math.floor(c.DOM.winWidth()/2),y:Math.floor(c.DOM.winHeight()/2)};var a={width:Math.floor(e.get("offsetWidth")/2),height:Math.floor(e.get("offsetHeight")/2)};var i=n({x:t.x-a.width,y:t.y-a.height},a,this.padding,e);return{position:"fixed",top:i.y,left:i.x}};var d={MOUSE:r,TOP_LEFT:e,TOP_RIGHT:i,BOTTOM_LEFT:s,BOTTOM_RIGHT:o,ELEMENT:l,CENTER:u};c.Squarespace.Widgets.PositionHelper=function(a,e){return{padding:e||t,fetch:function(e,t){return a.call(this,e,t)}}};c.Squarespace.Widgets.PositionHelper.ANCHOR=d},"1.0",{requires:["dom-base","squarespace-damask-context-globals","squarespace-ui-base"]})},"./src/main/webapp/universal/scripts-v6/widgets/products/quick-view.js":function(e,t,a){var i=a("./common/temp/node_modules/@sqs/cookie-cutter/index.js");var s=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var n=a("./src/main/webapp/universal/src/shared/utils/formatting/substituteString.js");var r=a("./src/main/webapp/universal/src/shared/productVariants.js");var o=a("./src/main/webapp/universal/src/shared/utils/census/CensusUtils.ts");YUI.add("squarespace-widgets-products-quick-view",function(a){a.namespace("Squarespace.Widgets.Products");var e=a.Squarespace.Widgets.Products.QuickView=a.Base.create("quickView",a.Squarespace.SSWidget,[],{initializer:function(){this.set("lightbox",new a.Squarespace.Widgets.ModalLightbox({content:this.get("boundingBox"),render:a.one("body"),className:e.CSS_LIGHTBOX_PREFIX}));this.get("lightbox").get("boundingBox").prepend(this.get("closeButton"));this.get("boundingBox").append(this.get("prevButton")).append(this.get("nextButton"))},bindUI:function(){e.superclass.bindUI.call(this);this.after(["currentIdChange","currentGroupChange"],function(){this._destroyProductItemViewInstance();this.syncUI()});this._registerEvent(this.get("lightbox").on("open",function(){this.syncUI()},this));this._registerEvent(this.get("lightbox").on("close",function(){this._destroyProductItemViewInstance();this.set("isLightboxOpen",false)},this));this._bindUIControls();this._bindKeyboardControls();window.SQUARESPACE_LOGIN&&window.SQUARESPACE_LOGIN.isLoggedIn()&&a.on("beforeunload",function(){this.destroy(true);this.get("lightbox").destroy(true)},this)},syncUI:function(){e.superclass.syncUI.call(this);this._getData();this.get("nextButton").toggleClass(e.CSS_HIDDEN,!this._getNextId());this.get("prevButton").toggleClass(e.CSS_HIDDEN,!this._getPrevId());o.trackProductQuickView(this.get("currentId"))},destructor:function(){this._destroyProductItemViewInstance();this.get("lightbox").close()},_bindUIControls:function(){var t=this.get("boundingBox");this._registerEvent(t.delegate("click",function(e){this._setId(this._getNextId());e.halt(true)},"."+e.CSS_NEXT_BUTTON,this));this._registerEvent(t.delegate("click",function(e){this._setId(this._getPrevId());e.halt(true)},"."+e.CSS_PREV_BUTTON,this));this._registerEvent(t.delegate("click",function(e){this.get("lightbox").close();e.stopPropagation()},"."+e.CSS_CLOSE_BUTTON,this));this._registerEvent(a.one("body").on("click",function(e){!this.get("isLightboxOpen")||t.contains(e.target)||this._isProductForm(e.target)||this.get("lightbox").close();e.stopPropagation()},this))},_bindKeyboardControls:function(){this._registerEvent(a.on("key",function(){this.get("isLightboxOpen")&&this._setId(this._getNextId())},a.config.win,"down:39",this));this._registerEvent(a.on("key",function(){this.get("isLightboxOpen")&&this._setId(this._getPrevId())},a.config.win,"down:37",this))},_getData:function(){a.Data.get({url:"/api/rendering/product-quick-view/"+this.get("currentId"),success:function(e){this._renderModal(e.html)},failure:function(e){this._renderError(e)}},this)},_renderModal:function(e){this.get("contentBox").empty().insert(e);this.set("productsItemViewInstance",new a.Squarespace.SystemCollections.Products.ItemV2({host:this.get("contentBox")}));this.get("isLightboxOpen")?this.get("lightbox").syncUI():this.open();this._executeScripts();this._initializeCheckoutArea()},open:function(){this.get("lightbox").open();this.set("isLightboxOpen",true);a.one(".sqs-style-mode-active")&&a.Squarespace.EscManager.removeTarget(this.get("lightbox"))},_executeScripts:function(){var a=this.get("contentBox");a.all("script").each(function(e){var t=document.createElement("script");t.type="text/javascript";e.getAttribute("src")?t.src=e.getAttribute("src"):t.innerHTML=e.get("innerHTML");e.remove();a.append(t)},this)},_initializeCheckoutArea:function(){var e=this.get("contentBox");r.initializeVariantDropdowns(a.config.win.document,e.getDOMNode());a.Squarespace.CartUtils.initializeAddToCartButtons();"true"===i.get("hasCart")||a.Lang.isValue(i.get("CART"))?a.Squarespace.Singletons.ShoppingCart.load(function(){a.all(".sqs-add-to-cart-button-wrapper").setStyle("visibility","visible")},this):a.all(".sqs-add-to-cart-button-wrapper").setStyle("visibility","visible")},_renderError:function(e){var t=s("There was an issue loading the quick view of this product. Please see the product's page for full product details.");new a.Squarespace.Widgets.Alert({"strings.title":s("Error: {message}",{message:e&&e.title?e.title:""}),"strings.message":e&&e.error||t})},_getNextId:function(){var e=this.get("products")[this.get("currentGroup")];var t=e.indexOf(this.get("currentId"))+1;var a=e[t];return a||false},_getPrevId:function(){var e=this.get("products")[this.get("currentGroup")];var t=e.indexOf(this.get("currentId"))-1;var a=e[t];return a||false},_setId:function(e){e&&this.set("currentId",e)},_destroyProductItemViewInstance:function(){this.get("productsItemViewInstance")&&this.get("productsItemViewInstance").destroy(true)},_isProductForm:function(e){var t=a.Squarespace.Widgets.AsyncForm.CSS_PREFIX;return e.ancestor("."+t)||e.hasClass("lightbox-close")&&e.siblings("."+t)||e.one("."+t)||e.hasClass(t)}},{CSS_PREFIX:"sqs-product-quick-view",CSS_LIGHTBOX_PREFIX:"sqs-product-quick-view-lightbox",CSS_NEXT_BUTTON:"sqs-product-quick-view-lightbox-next-button",CSS_PREV_BUTTON:"sqs-product-quick-view-lightbox-prev-button",CSS_CLOSE_BUTTON:"sqs-product-quick-view-lightbox-close-button",CSS_HIDDEN:"sqs-product-quick-view-lightbox-element-hidden",ATTRS:{currentId:{value:null},currentGroup:{value:null},products:{value:{}},lightbox:{value:null},prevButton:{valueFn:function(){return a.Node.create(n('<button class="{sub1}"><svg viewBox="0 0 23 48"><g class="svg-icon"><polyline fill="none" stroke-miterlimit="10" points="21.5,1.3 2.6,23.4 21.5,45.7 "/></g></svg></button>',{sub1:e.CSS_PREV_BUTTON}))}},nextButton:{valueFn:function(){return a.Node.create(n('<button class="{sub1}"><svg viewBox="0 0 23 48"><g class="svg-icon"><polyline fill="none" stroke-miterlimit="10" points="1.5,45.7 20.4,23.5 1.5,1.3 "/></g></svg></button>',{sub1:e.CSS_NEXT_BUTTON}))}},closeButton:{valueFn:function(){return a.Node.create(n('<button class="{sub1}"><svg viewBox="0 0 16 16"><g class="svg-icon"><line fill="none" stroke-miterlimit="10" x1="1.4" y1="1.4" x2="14.4" y2="14.4"/><line fill="none" stroke-miterlimit="10" x1="1.4" y1="14.4" x2="14.4" y2="1.4"/></g></svg></button>',{sub1:e.CSS_CLOSE_BUTTON}))}},isLightboxOpen:{value:false}}})},"1.0",{requires:["squarespace-beforeunload","squarespace-cart-utils","squarespace-escmanager","squarespace-image-loader","squarespace-modal-lightbox","squarespace-models-shopping-cart","squarespace-products-collection-item-v2","squarespace-ss-widget","squarespace-widgets-alert"]})},"./src/main/webapp/universal/scripts-v6/widgets/react-dialog-field.js":function(e,t,a){var n=a("./common/temp/node_modules/lodash/isFunction.js");var r=a("./common/temp/node_modules/react/index.js");var o=a("./common/temp/node_modules/react-dom/index.js");var l=a("./common/temp/node_modules/@sqs/rosetta-styled/build/lib/index.js").ThemeContext;var c=a("./common/temp/node_modules/@sqs/rosetta-themes/build/lib/index.js").rosetta;YUI.add("squarespace-react-dialog-field",function(e){e.namespace("Squarespace.DialogFields");var t=e.Squarespace.DialogFields.ReactDialogField=e.Base.create("ReactDialogField",e.Squarespace.DialogField2,[],{renderUI:function(){t.superclass.renderUI.call(this);this.syncUI()},bindUI:function(){t.superclass.bindUI.call(this);this.after("propsChange",e.bind(this.syncUI,this))},syncUI:function(){var e=this.get("props");var t=this.get("component");var a=r.createElement(t,n(e)?e():e);var i=r.createElement(l.Provider,{theme:c.white},[a]);var s=this.get("contentBox").getDOMNode();o.render(i,s)},didDataChange:function(){var e=this.get("isDirty");if(void 0!==e)return e;return t.superclass.didDataChange.call(this)}},{CSS_PREFIX:"sqs-react-dialog-field",ATTRS:{component:{},props:{},isDirty:{}}})},"1.0",{requires:["node","squarespace-dialog-field-2","squarespace-util"]})},"./src/main/webapp/universal/scripts-v6/widgets/slice-content-editor/action.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-widgets-slice-content-editor-action",function(t){t.namespace("Squarespace.Widgets.SliceContentEditor");t.Squarespace.Widgets.SliceContentEditor.Action=t.Base.create("Action",t.Squarespace.Widgets.SliceContentEditor.Compound,[],{},{SLICE_TYPE:t.Squarespace.SliceType.ACTION,CSS_PREFIX:"sqs-slice-content-editor-action",ATTRS:{sliceContent:{validator:function(e){return e instanceof t.Squarespace.Models.SliceContent.Action}},strings:{value:{title:i("Select Action Type"),description:i("Choose between buttons or navigation links.")}}}})},"1.0",{requires:["base","squarespace-enum","squarespace-models-slice-content-action","squarespace-widgets-slice-content-editor-compound"]})},"./src/main/webapp/universal/scripts-v6/widgets/slice-content-editor/album.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-widgets-slice-content-editor-album",function(t){t.namespace("Squarespace.Widgets.SliceContentEditor");t.Squarespace.Widgets.SliceContentEditor.Album=t.Base.create("Album",t.Squarespace.Widgets.SliceContentEditor.AsyncBase,[],{},{SLICE_TYPE:t.Squarespace.SliceType.ALBUM,CSS_PREFIX:"sqs-slice-content-editor-album",ATTRS:{sliceContent:{validator:function(e){return e instanceof t.Squarespace.Models.SliceContent.Album}},fields:{value:[t.Squarespace.Widgets.SliceContentEditor.Fields.ALBUM]},loadable:{valueFn:function(){return this.get("sliceContent").get("contentCollection").items}},loadOnInitialize:{valueFn:function(){return!this.get("sliceContent").get("contentCollection").isNew()}},strings:{value:{title:i("Album")}}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-enum","squarespace-models-slice-content-album","squarespace-widgets-slice-content-editor-async-base"]})},"./src/main/webapp/universal/scripts-v6/widgets/slice-content-editor/async-base.js":function(e,t){YUI.add("squarespace-widgets-slice-content-editor-async-base",function(e){e.namespace("Squarespace.Widgets.SliceContentEditor");e.Squarespace.Widgets.SliceContentEditor.AsyncBase=e.Base.create("AsyncBase",e.Squarespace.Widgets.SliceContentEditor.Base,[e.Squarespace.Mixins.Loadable],{destructor:function(){this._loadingTimer&&this._loadingTimer.cancel();this._loadingSpinner&&this._loadingSpinner.destroy()},renderUI:function(){},syncUI:function(){this.get("loading")?this._renderLoadingState():this._renderLoadedState()},_renderLoadingState:function(){this._loadingTimer&&this._loadingTimer.cancel();this._loadingTimer=e.later(500,this,function(){this._empty();this._loadingSpinner=new e.Squarespace.Spinner({render:this.get("contentBox"),size:44,color:"dark"})})},_renderLoadedState:function(){this._loadingTimer&&this._loadingTimer.cancel();this._empty();var t=this.get("sliceContent");e.Array.each(this.get("fields"),function(e){this.add(e(t))},this);this.after("*:dataChange",this._onFieldDataChange,this)},_empty:function(){this._loadingSpinner&&this._loadingSpinner.destroy();var e=this.removeAll();e.each(function(e){e.destroy()});this.get("contentBox").empty()}},{CSS_PREFIX:"sqs-slice-content-editor-async-base",ATTRS:{}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-mixins-loadable","squarespace-spinner","squarespace-ss-widget","squarespace-widgets-slice-content-editor-base","squarespace-widgets-slice-content-editor-fields"]})},"./src/main/webapp/universal/scripts-v6/widgets/slice-content-editor/base.js":function(e,t,a){var s=a("./src/main/webapp/universal/src/shared/constants/SliceTypeNames.js");YUI.add("squarespace-widgets-slice-content-editor-base",function(i){i.namespace("Squarespace.Widgets.SliceContentEditor");var e=e||function(){};var a=i.Squarespace.Widgets.SliceContentEditor.Base=i.Base.create("Base",i.Squarespace.Widgets.SSWidget,[i.WidgetParent],{initializer:function(){if(!this.get("isCompoundCurrentContent")){var e=s[this.get("sliceType")];this.get("boundingBox").setAttribute("data-shimmy-id",e)}},destructor:function(){this._descriptionField&&this._descriptionField.destroy(true)},renderUI:function(){a.superclass.renderUI.call(this);this._descriptionField=new i.Squarespace.DialogFields.Description({render:this.get("contentBox"),title:this.get("strings.title"),text:this.get("strings.description")});var t=this.get("sliceContent");i.Array.each(this.get("fields"),function(e){this.add(e(t))},this)},bindUI:function(){a.superclass.bindUI.call(this);this.after("*:dataChange",this._onFieldDataChange,this)},renderError:function(e){this.hideError();this._errorNode=i.Node.create('<div class="error">'+e+"</div>");this.get("contentBox").one(".sqs-description").insert(this._errorNode,"after")},hideError:function(){this._errorNode&&this._errorNode.remove(true)},resetAfterSave:e,_onFieldDataChange:function(e){this.get("sliceContent").set(e.target.get("name"),e.newVal)},_getFieldByName:function(t){var a;this.some(function(e){if(e.get("name")===t){a=e;return true}});return a}},{CSS_PREFIX:"sqs-slice-content-editor-base",ATTRS:{sliceContent:{value:null,validator:i.Squarespace.AttrValidators.isNullOrInstanceOf(i.Squarespace.Models.SliceContent.Base)},sliceType:{},isCompoundCurrentContent:{value:false},fields:{value:[],validator:function(e){if(!i.Lang.isArray(e)){false;return false}var t=i.Squarespace.Widgets.SliceContentEditor.Fields;var a=i.Array.some(e,function(e){return!i.Object.hasValue(t,e)});if(a){false;return false}return true},writeOnce:"initOnly"}}})},"1.0",{requires:["base","widget-parent","squarespace-attr-validators","squarespace-models-slice-content-base","squarespace-ss-widget","squarespace-widgets-slice-content-editor-fields"]})},"./src/main/webapp/universal/scripts-v6/widgets/slice-content-editor/buttons.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-widgets-slice-content-editor-buttons",function(t){t.namespace("Squarespace.Widgets.SliceContentEditor");t.Squarespace.Widgets.SliceContentEditor.Buttons=t.Base.create("Buttons",t.Squarespace.Widgets.SliceContentEditor.Base,[],{},{SLICE_TYPE:t.Squarespace.SliceType.BUTTONS,CSS_PREFIX:"sqs-slice-content-editor-buttons",ATTRS:{sliceContent:{validator:function(e){return e instanceof t.Squarespace.Models.SliceContent.Buttons}},fields:{value:[t.Squarespace.Widgets.SliceContentEditor.Fields.LINKS_BUTTONS]},strings:{value:{title:i("Buttons")}}}})},"1.0",{requires:["base","squarespace-enum","squarespace-widgets-slice-content-editor-base","squarespace-models-slice-content-buttons","squarespace-widgets-slice-content-editor-fields"]})},"./src/main/webapp/universal/scripts-v6/widgets/slice-content-editor/compound.js":function(e,t,a){var s=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-widgets-slice-content-editor-compound",function(i){var t={};t[i.Squarespace.SliceType.BODY]=s("Body");t[i.Squarespace.SliceType.IMAGE]=s("Image");t[i.Squarespace.SliceType.SOCIAL_ICONS]=s("Social Icons");t[i.Squarespace.SliceType.MAP]=s("Map");t[i.Squarespace.SliceType.BUTTONS]=s("Buttons");t[i.Squarespace.SliceType.NAVIGATION]=s("Navigation");t[i.Squarespace.SliceType.NEWSLETTER]=s("Newsletter Form");t[i.Squarespace.SliceType.CUSTOM_FORM]=s("Custom Form");t[i.Squarespace.SliceType.ALBUM]=s("Album");t[i.Squarespace.SliceType.GALLERY]=s("Gallery");t[i.Squarespace.SliceType.VIDEO]=s("Video");t[i.Squarespace.SliceType.HEADING]=s("Heading");t[i.Squarespace.SliceType.SUB_HEADING]=s("Sub Heading");t[i.Squarespace.SliceType.LOGO]=s("Logo");t[i.Squarespace.SliceType.ACTION]=s("Action");t[i.Squarespace.SliceType.POPUP_OVERLAY_ACTION]=s("Action");i.namespace("Squarespace.Widgets.SliceContentEditor");var e=i.Squarespace.Widgets.SliceContentEditor.Compound=i.Base.create("Compound",i.Squarespace.Widgets.SliceContentEditor.Base,[],{initializer:function(){this.get("contentBox").addClass("sqs-slice-content-editor-compound-content");var e=this.get("sliceContent");this._currentTypeSelect=new i.Squarespace.DialogFields.Radio({name:"currentType-"+t[e.get("currentType")],className:"dark",numeric:true,data:e.get("currentType"),options:i.bind(function(){var t=[];i.Array.each(e.get("acceptedTypes"),function(e){t.push({label:this._getLabelForSliceType(e),value:e})},this);return t},this)()})},destructor:function(){this._currentTypeSelect&&this._currentTypeSelect.destroy();this._sliceContentEditor&&this._sliceContentEditor.destroy();this._descriptionField&&this._descriptionField.destroy(true)},renderUI:function(){e.superclass.renderUI.call(this);this._currentTypeSelect.render(this.get("contentBox"))},bindUI:function(){e.superclass.bindUI.call(this);var t=this.get("sliceContent");this._registerEvent(t.after("currentContentChange",this.syncUI,this));this._currentTypeSelect.after("dataChange",function(e){t.set("currentType",e.newVal)})},syncUI:function(){e.superclass.syncUI.call(this);this._destroySliceContentEditor();this._renderSliceContentEditor()},_renderLoadedState:function(){e.superclass._renderLoadedState.call(this)},_empty:function(){e.superclass._empty.call(this)},_getLabelForSliceType:function(e){return t[e]},_renderSliceContentEditor:function(){var e=this.get("sliceContent");var t=e.get("currentType");var a=i.Squarespace.Widgets.SliceContentEditor.Factory;this._sliceContentEditor=a.create(t,{render:this.get("contentBox"),sliceContent:e.get("currentContent"),isCompoundCurrentContent:true})},_destroySliceContentEditor:function(){this._sliceContentEditor&&this._sliceContentEditor.destroy()}},{CSS_PREFIX:"sqs-slice-content-editor-compound",ATTRS:{sliceContent:{validator:function(e){return e instanceof i.Squarespace.Models.SliceContent.Compound}}}})},"1.0",{requires:["base","squarespace-dialog-description","squarespace-dialog-radio","squarespace-enum","squarespace-widgets-slice-content-editor-base","squarespace-widgets-slice-content-editor-factory"]})},"./src/main/webapp/universal/scripts-v6/widgets/slice-content-editor/custom-form.js":function(e,t,a){var n=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-widgets-slice-content-editor-custom-form",function(t){t.namespace("Squarespace.Widgets.SliceContentEditor");var i={FORM:"FORM",NEWSLETTER:"NEWSLETTER"};var s=t.Squarespace.Widgets.SliceContentEditor.CustomForm=t.Base.create("CustomForm",t.Squarespace.Widgets.SliceContentEditor.Base,[],{initializer:function(){this.get("contentBox").addClass("sqs-slice-content-editor-compound-content");var e=this.get("sliceContent");this._formTypeSelect=new t.Squarespace.DialogFields.Radio({name:"currentType-Form",className:"dark",data:e.get("isNewsletterFormSelected")?i.NEWSLETTER:i.FORM,options:[{label:n("Form"),value:i.FORM},{label:n("Newsletter Signup"),value:i.NEWSLETTER}]});this._buttonLabelInput=new t.Squarespace.DialogFields.Text({className:"custom-form-button-label",data:e.get("buttonLabel"),"strings.placeholder":n("Button Label")});this._editFormButton=new t.Squarespace.DialogFields.Button({"strings.text":this._getEditButtonLabel()})},destructor:function(){this._editFormDialog&&this._editFormDialog.destroy(true);this._formTypeSelect.destroy();this._buttonLabelInput.destroy();this._editFormButton.destroy()},renderUI:function(){s.superclass.renderUI.call(this);var e=this.get("contentBox");this._formTypeSelect.render(e);this._buttonLabelInput.render(e);this._editFormButton.render(e)},bindUI:function(){s.superclass.bindUI.call(this);var a=this.get("sliceContent");this._formTypeSelect.after("dataChange",function(e){var t=e.newVal===i.NEWSLETTER;a.set("isNewsletterFormSelected",t);this._editFormButton.set("strings.text",this._getEditButtonLabel())}.bind(this));this._buttonLabelInput.after("dataChange",function(e){a.set("buttonLabel",e.newVal)});this._editFormButton.after("click",this._showEditDialog.bind(this))},_showEditDialog:function(){this._editFormDialog&&this._editFormDialog.destroy(true);this.get("sliceContent").get("isNewsletterFormSelected")?this._editFormDialog=new t.Squarespace.SlideNewsletterFormEditor({model:this.get("sliceContent").get("newsletterForm")}):this._editFormDialog=new t.Squarespace.SlideCustomFormEditor({model:this.get("sliceContent").get("form")});this._editFormDialog.show()},_getEditButtonLabel:function(){return this.get("sliceContent").get("isNewsletterFormSelected")?n("Edit Newsletter Signup"):n("Edit Form")}},{SLICE_TYPE:t.Squarespace.SliceType.CUSTOM_FORM,CSS_PREFIX:"sqs-slice-content-editor-custom-form",ATTRS:{sliceContent:{validator:function(e){return e instanceof t.Squarespace.Models.SliceContent.CustomForm}},strings:{value:{title:n("Select Submission Type"),description:n("Choose between a custom form and a newsletter signup.")}}}})},"1.0",{requires:["base","squarespace-dialog-button","squarespace-dialog-radio","squarespace-dialog-text","squarespace-editor-slide-custom-form","squarespace-editor-slide-newsletter-form","squarespace-enum","squarespace-models-slice-content-custom-form","squarespace-widgets-slice-content-editor-base","squarespace-widgets-slice-content-editor-fields"]})},"./src/main/webapp/universal/scripts-v6/widgets/slice-content-editor/factory.js":function(e,t){YUI.add("squarespace-widgets-slice-content-editor-factory",function(e){var t=e.Squarespace.FactoryUtils.createEnumToClassFactory(e.Squarespace.SliceType,e.Squarespace.Widgets.SliceContentEditor,"SLICE_TYPE");e.namespace("Squarespace.Widgets.SliceContentEditor");e.Squarespace.Widgets.SliceContentEditor.Factory=t},"1.0",{requires:["squarespace-enum","squarespace-factory-utils","squarespace-widgets-slice-content-editor-action","squarespace-widgets-slice-content-editor-album","squarespace-widgets-slice-content-editor-buttons","squarespace-widgets-slice-content-editor-custom-form","squarespace-widgets-slice-content-editor-gallery","squarespace-widgets-slice-content-editor-lock","squarespace-widgets-slice-content-editor-map","squarespace-widgets-slice-content-editor-navigation","squarespace-widgets-slice-content-editor-newsletter","squarespace-widgets-slice-content-editor-password","squarespace-widgets-slice-content-editor-popup-overlay-action","squarespace-widgets-slice-content-editor-social-icons","squarespace-widgets-slice-content-editor-sub-heading","squarespace-widgets-slice-content-editor-twitter","squarespace-widgets-slice-content-editor-video"]})},"./src/main/webapp/universal/scripts-v6/widgets/slice-content-editor/fields.js":function(e,t,a){var l=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var s=a("./src/main/webapp/universal/src/shared/i18n/index.ts").pluralize;var n=a("./src/main/webapp/universal/src/apps/App/shared/stores/FeaturesStore.js");var r=a("./src/main/webapp/frontend/packages/enums/Features.js");var c=a("./src/main/webapp/frontend/packages/enums/FormBackendConnectionType.js");var u=a("./src/main/webapp/frontend/packages/enums/FormBackendConnectionState.js");var d=a("./src/main/webapp/frontend/packages/enums/ExternalServiceProviders.js");YUI.add("squarespace-widgets-slice-content-editor-fields",function(o){o.namespace("Squarespace.Widgets.SliceContentEditor");o.Squarespace.Widgets.SliceContentEditor.Fields={DISPLAY_SOCIAL:function(e){return{childType:o.Squarespace.DialogFields.Check,name:"display",data:e.get("display"),className:"dark","strings.title":l("Display Social Icons"),"strings.description":l("If enabled, the social icons you have configured in your site settings will be displayed.")}},DISPLAY_SOCIAL_PUSHER:function(e){return{childType:o.Squarespace.Damask.Panel.PanelPusher,name:"connected-services",title:l("Connected Accounts"),description:l("Connect your social services."),childPanelConfig:{"strings.title":l("Connected Accounts")}}},DISPLAY_LOCK:function(e){return{childType:o.Squarespace.DialogFields.Check,name:"display",data:e.get("display"),className:"dark","strings.title":l("Display Lock Icon")}},VIDEO:function(e){var t=e.get("contentItem");var a=t.get("structuredContent");return[{childType:o.Squarespace.DialogFields.Oembed,name:"oembed",filter:"video",data:a.get("oembed")}]},MAP:function(e){return{childType:o.Squarespace.DialogFields.Map,name:"location",data:e.get("location").toJSON(),height:250,showTitle:false,googleTrackingContext:{productPage:"cover-page",productSection:"panel"}}},LINKS_BUTTONS:function(e){return{childType:o.Squarespace.Widgets.SliceContentEditor.LinkList,name:"links",numLinksAllowed:e.get("limit"),"strings.linkLabelPlaceholder":l("Button Label"),data:e.get("links")}},LINKS_NAVIGATION:function(e){return{childType:o.Squarespace.Widgets.SliceContentEditor.LinkList,name:"links",numLinksAllowed:e.get("limit"),"strings.linkLabelPlaceholder":l("Link Label"),data:e.get("links")}},ALBUM:function(e){var t=e.get("contentCollection");var a=function(e){if(t.isNew()){t.onceAfter("save",function(){e()});t.save()}else e()};return{childType:o.Squarespace.DialogFields.TrackList,name:"contentCollectionId",data:t,stickyHeadersEnabled:false,uploadPreflight:a}},BUTTON_LABEL:function(e){return{childType:o.Squarespace.DialogFields.Text,name:"buttonLabel","strings.placeholder":l("Button Label"),data:e.get("buttonLabel")}},CUSTOM_FORM:function(e){return{childType:o.Squarespace.DialogFields.Button,name:"editForm",strings:{text:l("Edit Form")}}},NEWSLETTER_FORM:function(e){return{childType:o.Squarespace.DialogFields.Button,name:"editNewsletterForm",strings:{text:l("Storage & Advanced Options")}}},NEWSLETTER_STORAGE:function(e){return[{childType:o.Squarespace.DialogFields.Description,title:l("Storage Options")},n.isFeatureEnabled(r.MAILCHIMP_INTEGRATION)?{childType:o.Squarespace.DialogFields.MailChimpServiceConnect,name:"mailchimpConnect",data:t(e.get("form"),c.MAILCHIMP)}:null,{childType:o.Squarespace.DialogFields.GoogleDocsServiceConnect,name:"googleDocsConnect",data:t(e.get("form"),c.GOOGLE)}].filter(function(e){return e})},NEWSLETTER_SUBMIT_LABEL:function(e){return[{childType:o.Squarespace.DialogFields.Description,title:l("Submit Button Label"),text:l("Display this message to users after they submit your form.")},{childType:o.Squarespace.DialogFields.Text,name:"submitButtonText","strings.placeholder":l("Submit Button Label"),data:e.get("submitButtonText")}]},NEWSLETTER_POST_SUBMIT_HTML:function(e){return[{childType:o.Squarespace.DialogFields.Description,title:l("Post-Submit HTML")},{childType:o.Squarespace.DialogFields.HtmlCode,name:"submissionHTML",data:e.get("submissionHTML")}]},NEWSLETTER_POST_SUBMIT_MESSAGE:function(e){return[{childType:o.Squarespace.DialogFields.Description,title:l("Post-Submit Message")},{childType:o.Squarespace.DialogFields.Wysiwyg,name:"submissionMessage",data:e.get("submissionMessage"),editorHeight:175}]},TWITTER:function(e){var t=e.get("useSearch");var a=i(d.TWITTER,e.get("connectedAccountId"),true);return a.concat([{childType:o.Squarespace.DialogFields.Check,name:"useSearch",data:t,className:"dark","strings.title":l("Use Twitter Search"),"strings.description":l("Search twitter for a phrase, hashtag, or handle.")},{childType:o.Squarespace.DialogFields.TextWithRefresh,name:"searchTerm",className:"thin","strings.placeholder":l("Search Term"),visible:t,data:e.get("socialData").get("socialSearch.searchTerm")},{childType:o.Squarespace.DialogFields.Slider,name:"numTweets",range:[1,20],getPluralizedSliderLabel:function(e){return s({one:"{%n} Tweet",other:"{%n} Tweets"},e)},labelWidth:70,data:e.get("numTweets")},{childType:o.Squarespace.DialogFields.Check,name:"showAvatar",data:e.get("showAvatar"),className:"dark","strings.title":l("Show Avatar"),"strings.description":l("Display the Twitter user's avatar image.")},{childType:o.Squarespace.DialogFields.Check,name:"showDisplayName",data:e.get("showDisplayName"),className:"dark","strings.title":l("Show Display Name"),"strings.description":l("Show the Twitter user's display name.")}])}};function t(e,t){var a={};if(e){var i=e.getConnBackend(t);if(i.length>0){var s=i[0];a={connectionState:u.CONNECTED,username:s.socialConfig.profileUserName,socialConfig:s.socialConfig};t===c.GOOGLE?a.spreadsheetName=s.config.spreadsheetName:t===c.MAILCHIMP&&(a.list=s.backendId)}}return a}function i(n,e,t){var a=o.Squarespace.Models.ConnectedAccounts.loadFromStore().toArray();var i=a.sort(function(e,t){return 0+(e.addedOn<t.addedOn)});var s=o.Array.reduce(i,[],function(e,t){var a=t.get("collectionId");var i=o.Lang.isValue(a);var s=t.get("serviceId")===n;i&&s&&e.push({label:t.get("screenname"),value:t.get("id")});return e});var r={childType:o.Squarespace.DialogFields.Select,name:"connectedAccountId",className:"thin dark",padding:[10,10],options:s,visible:t&&s.length>0,"strings.placeholder":l("Select Account"),data:e};return[r,{childType:o.Squarespace.DialogFields.Button,name:"addAccount",alignment:"center","strings.text":l("Add Account"),visible:t}]}},"1.0",{requires:["squarespace-damask-panel-panel-pusher","squarespace-dialog-button","squarespace-dialog-check","squarespace-dialog-description","squarespace-dialog-file-image","squarespace-dialog-google-docs-service-connect","squarespace-dialog-mailchimp-service-connect","squarespace-dialog-map","squarespace-dialog-music-track-list","squarespace-dialog-oembed","squarespace-dialog-select","squarespace-dialog-slider","squarespace-dialog-text","squarespace-dialog-text-with-refresh","squarespace-dialog-video","squarespace-dialog-wysiwyg","squarespace-enum","squarespace-models-connected-accounts","squarespace-models-content-item","squarespace-util-authenticated","squarespace-widgets-slice-content-editor-link-list","squarespace-content-item-types-editor"]})},"./src/main/webapp/universal/scripts-v6/widgets/slice-content-editor/gallery.js":function(e,t,a){var s=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-widgets-slice-content-editor-gallery",function(o){o.namespace("Squarespace.Widgets.SliceContentEditor");var i=o.Squarespace.Widgets.SliceContentEditor.Gallery=o.Base.create("Gallery",o.Squarespace.Widgets.SliceContentEditor.Base,[o.Squarespace.Widgets.SliceContentEditor.HasExternalAuth],{resetAfterSave:function(){var e=this.get("sliceContent");if(e.get("source")!==o.Squarespace.BackgroundSource.UPLOAD){var t=e.get("defaultCollections");var a=t[o.Squarespace.BackgroundSource.UPLOAD];var i=function(e){if(a.isNew()){a.onceAfter("save",function(){e()});a.save()}else e()};this._getFieldByName("contentCollectionId").setAttrs({data:a,uploadPreflight:i})}},_getServiceProvider:function(){return o.Squarespace.ExternalServiceProviders.INSTAGRAM},_onFieldDataChange:function(e){var t=e.target.get("name");var a=e.newVal;if("contentCollectionId"===t)return;if("connectedAccountId"===t)this._updateCollectionIdForConnectedAccount();else if("source"===t){this.get("sliceContent").set("source",parseInt(a,10));this._updateCollectionId();this._hideAndShowFieldsForSource()}else i.superclass._onFieldDataChange.call(this,e)},_hideAndShowFieldsForSource:function(){var e=this.get("sliceContent").get("source");var t;var a;if(e===o.Squarespace.BackgroundSource.UPLOAD){t=[this._getFieldByName("connectedAccountId"),this._getFieldByName("addAccount")];a=[this._getFieldByName("contentCollectionId")]}else{t=[this._getFieldByName("contentCollectionId")];a=[];var i=this._getFieldByName("connectedAccountId");i.get("options").length>0&&a.push(i);a.push(this._getFieldByName("addAccount"))}o.Array.invoke(t,"set","visible",false);o.Array.invoke(a,"set","visible",true)},_updateCollectionId:function(){var e=this.get("sliceContent");var t=this.get("sliceContent").get("source");var a=null;if(t===o.Squarespace.BackgroundSource.UPLOAD){var i=this._getFieldByName("contentCollectionId");a=i.get("data").get("id")}else{var s=this._getFieldByName("connectedAccountId");var n=s.get("data");if(n){var r=o.Squarespace.Models.ConnectedAccounts.loadFromStore().getById(n);r&&(a=r.get("collectionId"))}}e.set("contentCollectionId",a)},_updateCollectionIdForConnectedAccount:function(){var e=this._getFieldByName("connectedAccountId");var t=e.get("data");var a=o.Squarespace.Models.ConnectedAccounts.loadFromStore().getById(t);var i=a.get("collectionId");var s=this.get("sliceContent");var n=s.get("contentCollection");n.set("id",i);n.ensureProcessedItems().then(function(){s.set("contentCollectionId",i)})}},{SLICE_TYPE:o.Squarespace.SliceType.GALLERY,CSS_PREFIX:"sqs-slice-content-editor-gallery",ATTRS:{sliceContent:{validator:function(e){return e instanceof o.Squarespace.Models.SliceContent.Gallery}},fields:{value:[o.Squarespace.Widgets.SliceContentEditor.Fields.GALLERY]},strings:{value:{title:s("Gallery")}}}})},"1.0",{requires:["array-invoke","base","squarespace-enum","squarespace-models-connected-accounts","squarespace-models-slice-content-gallery","squarespace-widgets-slice-content-editor-base","squarespace-widgets-slice-content-editor-fields","squarespace-widgets-slice-content-editor-has-external-auth"]})},"./src/main/webapp/universal/scripts-v6/widgets/slice-content-editor/has-external-auth.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/utils/ExternalAuthentication.js");var s=a("./src/main/webapp/universal/src/apps/App/shared/actions/ConnectedAccountsActions.js");YUI.add("squarespace-widgets-slice-content-editor-has-external-auth",function(r){r.namespace("Squarespace.Widgets.SliceContentEditor");r.Squarespace.Widgets.SliceContentEditor.HasExternalAuth=r.Base.create("HasExternalAuth",r.Base,[],{initializer:function(){r.Do.after(function(){var e=this._getFieldByName("addAccount");e&&e.after("click",this._addAccount,this)},this,"bindUI",this)},_addAccount:function(){var t=this._getServiceProvider();i.authenticate({urlParams:{authenticationType:"website",startSubscription:true},serviceProvider:t}).then(this._continueAuthentication.bind(this)).catch(function(e){return i.logException(e,t)})},_continueAuthentication:function(e){var t=e.socialConfig;if(r.Lang.isValue(t)){var a=t.externalAuthenticationId;this._refreshConnectedAccountField(a)}},_refreshConnectedAccountField:function(a){this._getAccountFieldOptions().then(r.bind(function(e){var t=this._getFieldByName("connectedAccountId");t.setAttrs({options:e,data:a});e.length>0&&t.set("visible",true)},this))},_getAccountFieldOptions:function(){var n=this._getServiceProvider();return r.Squarespace.Promises.create(function(i){s.refreshConnectedAccounts(true).then(function(){var e=r.Squarespace.Models.ConnectedAccounts.loadFromStore().toArray();var t=e.sort(function(e,t){return 0+(e.addedOn<t.addedOn)});var a=r.Array.reduce(t,[],function(e,t){var a=t.get("collectionId");var i=r.Lang.isValue(a);var s=t.get("serviceId")===n;i&&s&&e.push({label:t.get("screenname"),value:t.get("id")});return e});i(a)})},this)},_getServiceProvider:function(){false}})},"1.0",{requires:["base","squarespace-models-connected-accounts","squarespace-promises"]})},"./src/main/webapp/universal/scripts-v6/widgets/slice-content-editor/has-pusher-mixin.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/utils/YuiElimination.ts").isYuiClassEnabled;YUI.add("squarespace-widgets-slice-content-editor-has-pusher-mixin",function(t){if(i("HasPusherMixin")){t.namespace("Squarespace.Widgets.SliceContentEditor");t.Squarespace.Widgets.SliceContentEditor.HasPusherMixin=t.Base.create("HasPusherMixin",t.Base,[],{getPushers:function(){return this.toJSON().filter(function(e){return e instanceof t.Squarespace.Damask.Panel.PanelPusher})}})}},"1.0",{requires:["base","squarespace-damask-panel-panel-pusher"]})},"./src/main/webapp/universal/scripts-v6/widgets/slice-content-editor/link-list.js":function(e,t){YUI.add("squarespace-widgets-slice-content-editor-link-list",function(l){l.namespace("Squarespace.Widgets.SliceContentEditor");var e=l.Squarespace.Widgets.SliceContentEditor.LinkList=l.Base.create("LinkList",l.Squarespace.DialogField2,[],{initializer:function(){this._linkEditors=[];var e=this.get("data");var a=this.get("strings.linkLabelPlaceholder");e.each(function(e){var t=new l.Squarespace.Widgets.SliceContentEditor.Link({link:e,"strings.linkLabelPlaceholder":a});this._linkEditors.push(t)},this);var t=e.size();var i=this.get("numLinksAllowed");if(i>t){var s=i-t;for(var n=0;n<s;n++){var r=new l.Squarespace.Models.SliceContent.Link;var o=new l.Squarespace.Widgets.SliceContentEditor.Link({link:r,"strings.linkLabelPlaceholder":a});e.add(r);this._linkEditors.push(o)}}},destructor:function(){l.Array.each(this._linkEditors,function(e){e.destroy()})},renderUI:function(){e.superclass.renderUI.call(this);var t=this.get("contentBox");l.Array.each(this._linkEditors,function(e){e.render(t)})}},{CSS_PREFIX:"sqs-widgets-slice-content-editor-link-list",ATTRS:{numLinksAllowed:{value:1,validator:l.Squarespace.AttrValidators.isNumber},data:{validator:l.Squarespace.AttrValidators.isInstanceOf(l.ModelList)}}})},"1.0",{requires:["base","model-list","squarespace-attr-validators","squarespace-dialog-field-2","squarespace-models-slice-content-link","squarespace-widgets-slice-content-editor-link"]})},"./src/main/webapp/universal/scripts-v6/widgets/slice-content-editor/link.js":function(e,t,a){var i=a("./common/temp/node_modules/react/index.js");var s=a("./common/temp/node_modules/react-dom/index.js");var n=a("./src/main/webapp/universal/src/apps/App/shared/components/YUICompatibleLinkEditor/index.js");YUI.add("squarespace-widgets-slice-content-editor-link",function(e){e.namespace("Squarespace.Widgets.SliceContentEditor");var a=e.Squarespace.Widgets.SliceContentEditor.Link=e.Base.create("Link",e.Squarespace.Widgets.SSWidget,[],{initializer:function(){this.reactMountNode=null;this._textField=new e.Squarespace.DialogFields.Text({data:this.get("link").get("text"),className:"thin","strings.placeholder":this.get("strings.linkLabelPlaceholder")})},destructor:function(){this._textField.destroy();if(this.reactMountNode){s.unmountComponentAtNode(this.reactMountNode);this.reactMountNode.remove();this.reactMountNode=null}},renderUI:function(){a.superclass.renderUI.call(this);var e=this.get("contentBox");this._textField.render(e);if(null===this.reactMountNode){this.reactMountNode=this.get("contentBox").appendChild('<div class="yui3-widget sqs-widget sqs-data-widget sqs-dialog-field sqs-create-link data-state-loaded"></div>').getDOMNode();this.renderReact()}},getReactProps:function(){return{flush:true,isDark:true,showVisitLink:false,value:this.get("link").get("clickthroughUrl"),onChange:function(e){this.get("link").set("clickthroughUrl",e)}.bind(this)}},renderReact:function(){s.render(i.createElement(n,this.getReactProps()),this.reactMountNode)},bindUI:function(){a.superclass.bindUI.call(this);var t=this.get("link");this._textField.after("dataChange",function(e){t.set("text",e.newVal)})}},{CSS_PREFIX:"sqs-widgets-slice-content-editor-link",ATTRS:{link:{valueFn:function(){return new e.Squarespace.Models.SliceContent.Link},validator:e.Squarespace.AttrValidators.isInstanceOf(e.Squarespace.Models.SliceContent.Link)}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-dialog-create-link","squarespace-dialog-text","squarespace-models-slice-content-link","squarespace-ss-widget","squarespace-util"]})},"./src/main/webapp/universal/scripts-v6/widgets/slice-content-editor/lock.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-widgets-slice-content-editor-lock",function(t){t.namespace("Squarespace.Widgets.SliceContentEditor");t.Squarespace.Widgets.SliceContentEditor.Lock=t.Base.create("Lock",t.Squarespace.Widgets.SliceContentEditor.Base,[],{},{SLICE_TYPE:t.Squarespace.SliceType.LOCK,CSS_PREFIX:"sqs-slice-content-editor-lock",ATTRS:{sliceContent:{validator:function(e){return e instanceof t.Squarespace.Models.SliceContent.Lock}},fields:{value:[t.Squarespace.Widgets.SliceContentEditor.Fields.DISPLAY_LOCK]},strings:{value:{title:i("Lock")}}}})},"1.0",{requires:["base","squarespace-enum","squarespace-models-slice-content-lock","squarespace-widgets-slice-content-editor-base","squarespace-widgets-slice-content-editor-fields"]})},"./src/main/webapp/universal/scripts-v6/widgets/slice-content-editor/map.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-widgets-slice-content-editor-map",function(t){t.namespace("Squarespace.Widgets.SliceContentEditor");t.Squarespace.Widgets.SliceContentEditor.Map=t.Base.create("Map",t.Squarespace.Widgets.SliceContentEditor.Base,[],{},{SLICE_TYPE:t.Squarespace.SliceType.MAP,CSS_PREFIX:"sqs-slice-content-editor-map",ATTRS:{sliceContent:{validator:function(e){return e instanceof t.Squarespace.Models.SliceContent.Map}},fields:{value:[t.Squarespace.Widgets.SliceContentEditor.Fields.MAP]},strings:{value:{title:i("Map")}}}})},"1.0",{requires:["base","squarespace-enum","squarespace-models-slice-content-map","squarespace-widgets-slice-content-editor-base","squarespace-widgets-slice-content-editor-fields"]})},"./src/main/webapp/universal/scripts-v6/widgets/slice-content-editor/navigation.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-widgets-slice-content-editor-navigation",function(t){t.namespace("Squarespace.Widgets.SliceContentEditor");t.Squarespace.Widgets.SliceContentEditor.Navigation=t.Base.create("Navigation",t.Squarespace.Widgets.SliceContentEditor.Base,[],{},{SLICE_TYPE:t.Squarespace.SliceType.NAVIGATION,CSS_PREFIX:"sqs-slice-content-editor-navigation",ATTRS:{sliceContent:{validator:function(e){return e instanceof t.Squarespace.Models.SliceContent.Navigation}},fields:{value:[t.Squarespace.Widgets.SliceContentEditor.Fields.LINKS_NAVIGATION]},strings:{value:{title:i("Navigation")}}}})},"1.0",{requires:["base","squarespace-enum","squarespace-models-slice-content-navigation","squarespace-widgets-slice-content-editor-base","squarespace-widgets-slice-content-editor-fields"]})},"./src/main/webapp/universal/scripts-v6/widgets/slice-content-editor/newsletter.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-widgets-slice-content-editor-newsletter",function(t){t.namespace("Squarespace.Widgets.SliceContentEditor");t.Squarespace.Widgets.SliceContentEditor.Newsletter=t.Base.create("Newsletter",t.Squarespace.Widgets.SliceContentEditor.Base,[],{},{SLICE_TYPE:t.Squarespace.SliceType.NEWSLETTER,CSS_PREFIX:"sqs-slice-content-editor-newsletter",ATTRS:{sliceContent:{validator:function(e){return e instanceof t.Squarespace.Models.SliceContent.Newsletter}},fields:{value:[t.Squarespace.Widgets.SliceContentEditor.Fields.NEWSLETTER_SUBMIT_LABEL,t.Squarespace.Widgets.SliceContentEditor.Fields.NEWSLETTER_STORAGE,t.Squarespace.Widgets.SliceContentEditor.Fields.NEWSLETTER_POST_SUBMIT_MESSAGE,t.Squarespace.Widgets.SliceContentEditor.Fields.NEWSLETTER_POST_SUBMIT_HTML]},strings:{value:{title:i("Newsletter")}}}})},"1.0",{requires:["base","squarespace-editor-slide-newsletter-form","squarespace-enum","squarespace-models-slice-content-newsletter","squarespace-widgets-slice-content-editor-base","squarespace-widgets-slice-content-editor-fields"]})},"./src/main/webapp/universal/scripts-v6/widgets/slice-content-editor/password.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-widgets-slice-content-editor-password",function(t){t.namespace("Squarespace.Widgets.SliceContentEditor");t.Squarespace.Widgets.SliceContentEditor.Password=t.Base.create("Password",t.Squarespace.Widgets.SliceContentEditor.Base,[],{},{SLICE_TYPE:t.Squarespace.SliceType.PASSWORD,CSS_PREFIX:"sqs-slice-content-editor-password",ATTRS:{sliceContent:{validator:function(e){return e instanceof t.Squarespace.Models.SliceContent.Password}},fields:{value:[]},strings:{value:{title:i("Password")}}}})},"1.0",{requires:["base","squarespace-enum","squarespace-models-slice-content-password","squarespace-widgets-slice-content-editor-base","squarespace-widgets-slice-content-editor-fields"]})},"./src/main/webapp/universal/scripts-v6/widgets/slice-content-editor/popup-overlay-action.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-widgets-slice-content-editor-popup-overlay-action",function(t){t.namespace("Squarespace.Widgets.SliceContentEditor");t.Squarespace.Widgets.SliceContentEditor.PopupOverlayAction=t.Base.create("PopupOverlayAction",t.Squarespace.Widgets.SliceContentEditor.Compound,[],{},{SLICE_TYPE:t.Squarespace.SliceType.POPUP_OVERLAY_ACTION,CSS_PREFIX:"sqs-slice-content-editor-popup-overlay-action",ATTRS:{sliceContent:{validator:function(e){return e instanceof t.Squarespace.Models.SliceContent.PopupOverlayAction}},strings:{value:{title:i("Select Action Type"),description:i("Choose between a newsletter or buttons.")}}}})},"1.0",{requires:["base","squarespace-enum","squarespace-models-slice-content-action","squarespace-widgets-slice-content-editor-compound"]})},"./src/main/webapp/universal/scripts-v6/widgets/slice-content-editor/social-icons.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-widgets-slice-content-editor-social-icons",function(t){t.namespace("Squarespace.Widgets.SliceContentEditor");t.Squarespace.Widgets.SliceContentEditor.SocialIcons=t.Base.create("SocialIcons",t.Squarespace.Widgets.SliceContentEditor.Base,[t.Squarespace.Widgets.SliceContentEditor.HasPusherMixin],{},{SLICE_TYPE:t.Squarespace.SliceType.SOCIAL_ICONS,CSS_PREFIX:"sqs-slice-content-editor-social-icons",ATTRS:{sliceContent:{validator:function(e){return e instanceof t.Squarespace.Models.SliceContent.SocialIcons}},fields:{valueFn:function(){var e=[t.Squarespace.Widgets.SliceContentEditor.Fields.DISPLAY_SOCIAL];t.Squarespace.Utils.isCoverPageOnly()&&e.push(t.Squarespace.Widgets.SliceContentEditor.Fields.DISPLAY_SOCIAL_PUSHER);return e}},strings:{value:{title:i("Social Icons")}}}})},"1.0",{requires:["base","squarespace-enum","squarespace-models-slice-content-social-icons","squarespace-util","squarespace-widgets-slice-content-editor-base","squarespace-widgets-slice-content-editor-fields","squarespace-widgets-slice-content-editor-has-pusher-mixin"]})},"./src/main/webapp/universal/scripts-v6/widgets/slice-content-editor/sub-heading.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-widgets-slice-content-editor-sub-heading",function(t){t.namespace("Squarespace.Widgets.SliceContentEditor");t.Squarespace.Widgets.SliceContentEditor.SubHeading=t.Base.create("SubHeading",t.Squarespace.Widgets.SliceContentEditor.Base,[],{},{SLICE_TYPE:t.Squarespace.SliceType.SUB_HEADING,CSS_PREFIX:"sqs-slice-content-editor-sub-heading",ATTRS:{sliceContent:{validator:function(e){return e instanceof t.Squarespace.Models.SliceContent.SubHeading}},fields:{value:[t.Squarespace.Widgets.SliceContentEditor.Fields.TEXT]},strings:{value:{title:i("Subtitle")}}}})},"1.0",{requires:["base","squarespace-enum","squarespace-models-slice-content-sub-heading","squarespace-widgets-slice-content-editor-base","squarespace-widgets-slice-content-editor-fields"]})},"./src/main/webapp/universal/scripts-v6/widgets/slice-content-editor/twitter.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-widgets-slice-content-editor-twitter",function(a){a.namespace("Squarespace.Widgets.SliceContentEditor");var s=a.Squarespace.Widgets.SliceContentEditor.Twitter=a.Base.create("Twitter",a.Squarespace.Widgets.SliceContentEditor.Base,[a.Squarespace.Widgets.SliceContentEditor.HasExternalAuth],{bindUI:function(){s.superclass.bindUI.call(this);this._getFieldByName("searchTerm").after("refresh",function(){this.hideError();var e=this.get("sliceContent");var t=e.get("socialData").get("socialSearch.searchTerm");a.Lang.isValue(t)&&""!==t||this.renderError(i("Search term has not been defined."));e.previewSocialSearch(function(e,t){a.Lang.isValue(e)&&this.renderError(e.responseJSON.message)}.bind(this))}.bind(this))},_onFieldDataChange:function(e){var t=e.target.get("name");var a=e.newVal;if("searchTerm"===t){var i=this.get("sliceContent").get("socialData");i.set("socialSearch.searchTerm",a)}else{"useSearch"===t&&this._getFieldByName("searchTerm").set("visible",a);s.superclass._onFieldDataChange.call(this,e)}},_getServiceProvider:function(){return a.Squarespace.ExternalServiceProviders.TWITTER}},{SLICE_TYPE:a.Squarespace.SliceType.TWITTER,CSS_PREFIX:"sqs-slice-content-editor-twitter",ATTRS:{sliceContent:{validator:function(e){return e instanceof a.Squarespace.Models.SliceContent.Twitter}},fields:{value:[a.Squarespace.Widgets.SliceContentEditor.Fields.TWITTER]},strings:{value:{title:i("Twitter")}}}})},"1.0",{requires:["base","squarespace-enum","squarespace-models-slice-content-twitter","squarespace-widgets-slice-content-editor-base","squarespace-widgets-slice-content-editor-fields","squarespace-widgets-slice-content-editor-has-external-auth"]})},"./src/main/webapp/universal/scripts-v6/widgets/slice-content-editor/video.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-widgets-slice-content-editor-video",function(o){o.namespace("Squarespace.Widgets.SliceContentEditor");var l=o.Squarespace.Widgets.SliceContentEditor.Video=o.Base.create("Video",o.Squarespace.Widgets.SliceContentEditor.Base,[],{destructor:function(){this._thumbnailSyncTimer&&this._thumbnailSyncTimer.cancel()},_onFieldDataChange:function(e){var t=this.get("sliceContent");var a=t.get("contentItem");var i=a.get("structuredContent");var s=e.newVal;switch(e.target.get("name")){case"title":a.set("title",s);break;case"body":a.set("body",s);break;case"overlay":i.set("overlay",s);break;case"oembed":i.set("oembed",s);var n=s.title;var r=s.description;o.Lang.isValue(n)&&a.set("title",s.title);o.Lang.isValue(r)&&a.set("body",{html:"<p>"+s.description+"</p>"});break;case"mainImage":break;default:l.superclass._onFieldDataChange.call(this,e)}},_syncFieldsForOembedChange:function(e){var t=e.title;var a=e.description;var i=e.thumbnailUrl;o.Lang.isValue(t)&&this._getFieldByName("title").set("data",t);o.Lang.isValue(a)&&this._getFieldByName("body").set("data",{html:"<p>"+a+"</p>"});if(o.Lang.isValue(i)){var s=this._getFieldByName("mainImage");var n=this._getFieldByName("overlay");this._thumbnailSyncTimer&&this._thumbnailSyncTimer.cancel();this._thumbnailSyncTimer=o.later(1e3,this,function(){var e=this.get("sliceContent").get("contentItem");if(e.isNew())e.save(function(){s.saveFromUrl(i,e.get("id"));n.set("data",true)});else{s.saveFromUrl(i,e.get("id"));n.set("data",true)}})}}},{SLICE_TYPE:o.Squarespace.SliceType.VIDEO,CSS_PREFIX:"sqs-slice-content-editor-video",ATTRS:{sliceContent:{validator:function(e){return e instanceof o.Squarespace.Models.SliceContent.Video}},fields:{value:[o.Squarespace.Widgets.SliceContentEditor.Fields.VIDEO]},strings:{value:{title:i("Video")}}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-enum","squarespace-models-slice-content-video","squarespace-widgets-slice-content-editor-base","squarespace-widgets-slice-content-editor-fields"]})},"./src/main/webapp/universal/scripts-v6/widgets/slice-group-editor.js":function(e,t){YUI.add("squarespace-widgets-slice-group-editor",function(n){n.namespace("Squarespace.Widgets");var i=n.Squarespace.Widgets.SliceContentEditor.HasPusherMixin;var e=n.Squarespace.Widgets.SliceGroupEditor=n.Base.create("SliceGroupEditor",n.Squarespace.Widgets.SSWidget,[n.Squarespace.Damask.Panel.MixinPanel,n.Squarespace.Mixins.Loadable,n.Squarespace.Mixins.SaveChanges,n.Squarespace.Mixins.SlideRefresher,n.Squarespace.Damask.Panel.MixinPanelParent],{initializer:function(){this._renderedEditors={};this.get("loading")||this._bindSlicesForChanges();this._registerEvent(this.get("loadable").after("load",function(){this.set("slices",this._getSlicesFromSummary());this._bindSlicesForChanges()},this))},destructor:function(){this._loadingTimer&&this._loadingTimer.cancel();this._loadingSpinner&&this._loadingSpinner.destroy(true);n.Object.each(this._renderedEditors,function(e){e.destroy(true)})},renderUI:function(){var e=this.get("contentBox");var t=this.get("strings.title");var a=this.get("strings.description");e.append('<div class="title">'+t+"</div>");e.append('<div class="description">'+a+"</div>")},syncUI:function(){e.superclass.syncUI.call(this);this.get("loading")?this._renderLoadingState():this._renderLoadedState()},markAsDirty:function(e){if(this.get("slicesSaving"))return;n.Lang.isValue(e)&&e.set("isDemo",false);n.Squarespace.Mixins.SaveChanges.prototype.markAsDirty.apply(this,arguments)},_renderLoadingState:function(){this._loadingTimer&&this._loadingTimer.cancel();this._loadingTimer=n.later(500,this,function(){this._emptyEditorsAndSpinner();this._loadingSpinner=new n.Squarespace.Spinner({render:this.get("contentBox"),size:44,color:"dark"})})},_renderLoadedState:function(){this._loadingTimer&&this._loadingTimer.cancel();this._emptyEditorsAndSpinner();var t=this.get("sliceTypeOrdering");var a=this.get("sliceAreas");n.Array.each(t,function(t){var e=a.filter({asList:true},function(e){return e.get("sliceType")===t});e.each(this._renderEditorForSliceArea,this)},this);a.each(function(e){-1===t.indexOf(e.get("sliceType"))&&this._renderEditorForSliceArea(e)},this);this._registerPushers()},_getRenderedPushersArray:function(){var a=[];n.Object.each(this._renderedEditors,function(e){if(e.hasImpl(i)){var t=e.getPushers();while(t.length>0)a.push(t.shift())}});return a},_renderEditorForSliceArea:function(e){var t=this.get("slices");var a=e.get("sliceType");var i=t.getByType(a);var s=n.Squarespace.Widgets.SliceContentEditor.Factory.create(a,{render:this.get("contentBox"),sliceContent:i.get("content"),sliceType:a});this._renderedEditors[a]=s},_emptyEditorsAndSpinner:function(){n.Object.each(this._renderedEditors,function(e){e.destroy(true)});this._renderedEditors={};this._loadingSpinner&&this._loadingSpinner.destroy(true)},_getSlicesFromSummary:function(){var e=this.get("slideSummary").get("slices");var a=this.get("sliceAreas").map(function(e){return e.get("sliceType")});return e.filter({asList:true},function(e){var t=e.get("type");return-1!==a.indexOf(t)})},_bindSlicesForChanges:function(){var e=this.get("slices");this._registerEvent(e.after("*:change",function(e){if(!this._sliceChangeNeedsRefresh(e.changed))return;this._markAsDirtyAndRefreshSliceRendering(e.target)},this));this._registerEvent(e.each(function(e){this._bindSliceContentForChanges(e.get("content"),e)},this));this._registerEvent(e.after("add",function(e){this._bindSliceContentForChanges(e.model.get("content"),e.model)},this))},_bindSliceContentForChanges:function(e,t){this._registerEvent(e.after("change",function(e){if(e.changed){if("isNewsletterFormSelected"in e.changed)return;if(!this._sliceContentChangeNeedsRefresh(e.changed))return}this._markAsDirtyAndRefreshSliceRendering(t)},this));if(e instanceof n.Squarespace.Models.SliceContent.Compound){var a=e.get("currentContent");this._bindSliceContentForChanges(a,t);this._registerEvent(e.after("currentContentChange",function(e){if(e.newVal===e.prevVal)return;this._bindSliceContentForChanges(e.newVal,t)},this))}else{this._bindSliceContentReferencesForChanges(e,t);this._bindSliceContentReferencedForm(e,t)}},_bindSliceContentReferencedForm:function(a,i){n.Array.each(["form","newsletterForm"],function(e){var t=a.get(e);if(!t)return;this._bindFormReference(t,i);this._registerEvent(a.after("*:change",function(e){if(n.Lang.isValue(e.newVal)&&e.newVal!==e.prevVal){this._markAsDirtyAndRefreshSliceRendering(i,true);this._bindFormReference(e.newVal,i)}},this))},this)},_bindSliceContentReferencesForChanges:function(e,a){var t=e.get("contentCollection");if(n.Lang.isValue(t)){this._bindContentCollectionReference(t,a);this._registerEvent(e.after("contentCollectionChange",function(e){if(n.Lang.isValue(e.newVal)&&e.newVal!==e.prevVal){this._markAsDirtyAndRefreshSliceRendering(a);this._bindContentCollectionReference(e.newVal,a)}},this))}var i=e.get("contentItem");if(n.Lang.isValue(i)){this._bindContentItemReference(i,a);this._registerEvent(e.after("contentItemChange",function(e){if(n.Lang.isValue(e.newVal)&&e.newVal!==e.prevVal){this._markAsDirtyAndRefreshSliceRendering(a);this._bindContentItemReference(e.newVal,a)}},this))}var s=e.get("socialData");if(n.Lang.isValue(s)){this._bindTwitterSocialDataReference(s,a);this._registerEvent(e.after("socialDataChange",function(e){if(n.Lang.isValue(e.newVal)&&e.newVal!==e.prevVal){this._markAsDirtyAndRefreshSliceRendering(a);this._bindTwitterSocialDataReference(e.newVal,a)}},this))}a.get("type")===n.Squarespace.SliceType.CUSTOM_FORM&&this._registerEvent(e.after("isNewsletterFormSelectedChange",function(e){if(n.Lang.isValue(e.newVal)&&e.newVal!==e.prevVal){var t=e.currentTarget;t.get("newsletterFormId")?this._markAsDirtyAndRefreshSliceRendering(a,true):this._markAsDirtyAndRefreshSliceRendering(a,false)}},this))},_bindFormReference:function(e,t){this._registerEvent(e.after("save",function(){this._refreshSliceRendering(t,true)},this))},_bindContentCollectionReference:function(e,i){var s=e.items;this._registerEvent(s.after("remove",function(e){e.onReorder?this._refreshSliceRendering(i):this._markAsDirtyAndRefreshSliceRendering(i)},this));this._registerEvent(s.after("*:change",function(e){var t=e.changed;if(n.Object.hasKey(t,"displayIndex")&&1===n.Object.size(t))return;var a=s.some(function(e){return e.get("mediaProcessingState")!==n.Squarespace.MediaProcessingState.READY});if(a)return;this._markAsDirtyAndRefreshSliceRendering(i)},this))},_bindContentItemReference:function(e,t){this._registerEvent(e.after("change",function(){this._markAsDirtyAndRefreshSliceRendering(t)},this));var a=e.get("structuredContent");n.Lang.isValue(a)&&this._registerEvent(a.after("change",function(){this._markAsDirtyAndRefreshSliceRendering(t)},this))},_bindTwitterSocialDataReference:function(e,t){this._registerEvent(e.after("change",function(e){this._markAsDirtyAndRefreshSliceRendering(t)},this))},_sliceChangeNeedsRefresh:function(e){var a=["id","websiteId","createdOn","updatedOn","isDemo"];return n.Object.some(e,function(e,t){return-1===a.indexOf(t)})},_sliceContentChangeNeedsRefresh:function(e){var a=[];return n.Object.some(e,function(e,t){return-1===a.indexOf(t)})},_markAsDirtyAndRefreshSliceRendering:function(e,t){this.markAsDirty(e);this._refreshSliceRendering(e,t)},_refreshSliceRendering:function(e,t,a){if(this.get("slicesSaving")&&!a)return;try{n.Global.fire("sliceUpdate",{slice:e.toJSON(),forceServerRefresh:t,slideType:this.get("slideSummary").get("slide").get("type")})}catch(e){console.error(e.stack)}},_saveChanges:function(){return n.Squarespace.Promises.create(function(t){var e=new n.Parallel;this._set("slicesSaving",true);this.get("slices").each(function(i){var s=i.get("type");this._renderedEditors[s].hideError();i.get("isDemo")||i.save(e.add(n.bind(function(e,t){if(n.Lang.isValue(e)){var a=e.responseJSON.message;this._renderedEditors[s].renderError(a)}else i.get("content").get("refreshRenderingAfterSave")&&this._refreshSliceRendering(i,false,true)},this)))},this);e.done(n.bind(function(){var e=this.get("slideSummary").get("slide");n.Squarespace.Analytics.trackInternal("coverpage_content_update",{slideId:e.get("id"),collectionId:e.get("collectionId")});this._set("slicesSaving",false);n.Object.each(this._renderedEditors,function(e){e.resetAfterSave()});t()},this))},this)},_revertChanges:function(){return n.Squarespace.Promises.create(function(e){this.get("slideSummary").load(n.bind(function(){this._refreshSlideRendering(false);e()},this))},this)}},{CSS_PREFIX:"sqs-slice-group-editor",ATTRS:{slideSummary:{value:null,validator:n.Squarespace.AttrValidators.isNullOrInstanceOf(n.Squarespace.Models.SlideSummary)},sliceAreas:{valueFn:function(){return new n.Squarespace.Models.SliceAreaList},validator:n.Squarespace.AttrValidators.isInstanceOf(n.Squarespace.Models.SliceAreaList)},slices:{valueFn:"_getSlicesFromSummary",validator:n.Squarespace.AttrValidators.isInstanceOf(n.Squarespace.Models.SliceList)},sliceTypeOrdering:{value:[],validator:n.Squarespace.AttrValidators.isArray},slicesSaving:{value:false},loadable:{valueFn:function(){return this.get("slideSummary")}}}})},"1.0",{requires:["base","parallel","squarespace-attr-validators","squarespace-damask-panel-mixin-panel","squarespace-damask-panel-mixin-panel-parent","squarespace-enum","squarespace-mixin-save-changes","squarespace-mixins-loadable","squarespace-mixins-slide-refresher","squarespace-models-slice-area-list","squarespace-models-slice-content-compound","squarespace-models-slice-list","squarespace-models-slide-summary","squarespace-promises","squarespace-spinner","squarespace-ss-widget","squarespace-util","squarespace-widgets-slice-content-editor-factory","squarespace-widgets-slice-content-editor-has-pusher-mixin","widget-parent"]})},"./src/main/webapp/universal/scripts-v6/widgets/slide-layout-chooser-pusher.js":function(e,t,a){var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;YUI.add("squarespace-widgets-slide-layout-chooser-pusher",function(e){e.namespace("Squarespace.Widgets");var t=e.Squarespace.Widgets.SlideLayoutChooserPusher=e.Base.create("SlideLayoutChooserPusher",e.Squarespace.Widgets.SSWidget,[e.Squarespace.Damask.Panel.MixinPusher],{bindUI:function(){t.superclass.bindUI.call(this);this.after("selectedLayoutChange",this.syncUI,this)},syncUI:function(){t.superclass.syncUI.call(this);var e=this.get("contentBox").one(".image-thumbnail img");e.setAttribute("src",this.get("selectedLayout").get("thumbnailUrl"))}},{CSS_PREFIX:"sqs-slide-layout-chooser-pusher",TEMPLATE:'<div class="image-thumbnail"><img/><div class="image-thumbnail-overlay"></div></div><div class="change-layout-button" data-test="change-layout-button">'+i("Change Layout")+"</div>",ATTRS:{selectedLayout:{value:null,validator:e.Squarespace.AttrValidators.isNullOrInstanceOf(e.Squarespace.Models.SlideLayout)}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-damask-panel-mixin-pusher","squarespace-models-slide","squarespace-models-slide-layout","squarespace-ss-widget"]})},"./src/main/webapp/universal/scripts-v6/widgets/tourdates-bandsintown.js":function(e,t,a){var r=a("./common/temp/node_modules/lodash/padStart.js");var u=a("./common/temp/node_modules/lodash/noop.js");var o=a("./common/temp/node_modules/moment/moment.js");var d=a("./common/temp/node_modules/@sqs/utils/json/escapedStringify.js");var p=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var h=a("./src/main/webapp/universal/src/shared/utils/network.js");var g=a("./src/main/webapp/universal/src/shared/i18n/index.ts").formatDateTime;var m=a("./src/main/webapp/universal/src/shared/utils/UrlUtils.js").doubleEncode;var f=a("./common/temp/node_modules/moment-timezone/index.js");YUI.add("squarespace-widgets-tourdates-bandsintown",function(l){var i="mkt_source";var s=["utm_source","utm_medium","utm_campaign","utm_term","utm_content",i];function c(e){return[e.getFullYear(),r(e.getMonth()+1,2,"0"),r(e.getDate(),2,"0")].join("-")}function n(e,t){return e+(e.includes("?")?"&":"?")+l.QueryString.stringify(t)}var e=l.Base.create("bandsInTownTourDatesModelList",l.ModelList,[],{sync:function(e,t,a){if("read"!==e){console.warn("[TourDatesModelList] Unsupported sync action: "+e);return}a=l.Lang.isFunction(a)?a:u;var i=l.Object.getValue(Static,["SQUARESPACE_CONTEXT","website","identifier"]);var s="squarespace-"+i;var n;var r;if(this.get("artistId")){r=m(this.get("artistId").replace(/"/g,"'"));n="dateRange"===this.get("timeframe")?c(new Date(this.get("startDate")))+","+c(new Date(this.get("endDate"))):"upcoming"}else{r=encodeURIComponent("Morrissey");n="2015-11-01,2015-12-31"}var o="https://rest.bandsintown.com/artists/"+r+"/events?app_id="+s+"&date="+n;false;h.get(o).then(function(e){a(null,e.data)}).catch(function(e){a(e)})}},{ATTRS:{artistId:{value:null},timeframe:{value:null},startDate:{value:null},endDate:{value:null}}});l.namespace("Squarespace.Widgets");var a=l.Squarespace.Widgets.BandsInTownTourDatesList=l.Base.create("bandsInTownTourDatesList",l.Squarespace.SSWidget,[],{initializer:function(){this.onceAfter("loadedChange",this._onLoaded,this);this.get("modelList").load(l.bind(function(){this.set("loaded",true)},this))},_onLoaded:function(){this._registerEvent(l.on("windowresize",l.bind(function(){this._venues.size()&&this._setFlexDirection()},this)));this._registerEvent(l.on("domready",function(){this.renderUI()},this))},renderUI:function(){a.superclass.renderUI.call(this);var e=this.get("boundingBox");if(!this.get("loaded")){this.spinner||(this.spinner=new l.Squarespace.Spinner({size:30,color:"dark",render:e}));return}var t=this.get("contentBox");this.spinner.destroy();t.empty().append(this.renderTemplate());this.appendStructuredData();e.addClass("loaded");if(!this.get("artistId")){e.setAttribute("data-block-state","uninitialized");e.addClass("sqs-block-is-placeholder")}this._venues=t.all(".sqs-tourdates__venue-name");this._setFlexDirection();this.fire("templateRendered")},_setFlexDirection:function(){var e=this.get("contentBox");if(!e.getDOMNode())return;e.removeClass("sqs-tourdates--venuelocation--column");e.removeClass("sqs-tourdates--info--column");var t=this._venues.item(0);if(t){var a=t.getX();var i=this._venues.some(function(e){return e.getX()!==a});i&&e.addClass("sqs-tourdates--venuelocation--column");a=t.getX();i=this._venues.some(function(e){return e.getX()!==a});i&&e.addClass("sqs-tourdates--info--column")}},appendStructuredData:function(){var e=document.createElement("script");e.type="application/ld+json";e.text=this.get("contentBox").one("script").get("innerHTML");l.one("head").append(e)},getTourDateUrlAdditionalParams:function(){var e=l.config.win.location.search.slice(1);var a=l.QueryString.parse(e);var t=Object.keys(a).filter(function(e){return s.includes(e)}).reduce(function(e,t){e[t]=a[t];return e},{});t.hasOwnProperty(i)||(t[i]=l.config.win.location.hostname);return t},responseToStructuredData:function(e){var t;if(e.lineup&&e.lineup.length)t=e.lineup[0];else{console.error("[tourdates-bandsintown] event is missing lineup",e);t=p("artist not listed")}var a=p("{artist} @ {venue} in {city}, {region}",{artist:t,venue:e.venue.name,city:e.venue.city,region:"United States"===e.venue.country?e.venue.region:e.venue.country});var i={"@type":"MusicGroup",name:t,url:"https://www.bandsintown.com/"+m(t)};var s=e.offers.map(function(e){return{"@type":"Offer",url:e.url,availability:e.status,category:e.type}});return{"@context":"https://schema.org","@type":"MusicEvent",name:a,url:e.url,startDate:e.datetime,location:{"@type":"Place",name:e.venue.name,address:{"@type":"PostalAddress",addressCountry:e.venue.country,addressLocality:e.venue.city,addressRegion:e.venue.region},geo:{"@type":"GeoCoordinates",latitude:e.venue.latitude,longitude:e.venue.longitude}},performer:i,offers:s}},_getHBTemplateContext:function(){var e={loading:!this.get("loaded"),strings:{rsvp:p("RSVP"),noResults:p("There are no upcoming tour dates."),loading:p("Loading tour dates..."),notifyMe:p("Notify Me")},newWindow:!l.UA.mobile};if(!this.get("loaded"))return e;var t=this.get("modelList").toJSON();if(!t.length)return e;var a=this.getTourDateUrlAdditionalParams();e.tourdates=t.map(function(e){return e.url?l.merge({},e,{url:n(e.url,a),offers:e.offers.map(function(e){return e.url?l.merge({},e,{url:n(e.url,a)}):e})}):e});var i=t.map(this.responseToStructuredData).filter(function(e){return!!e});e.structuredData=d(i,null,2);return e}},{CSS_PREFIX:"sqs-tourdates-bandsintown-list",HANDLEBARS_TEMPLATE:"tourdates-bandsintown-list.html",ATTRS:{artistId:{value:null},timeframe:{value:null},startDate:{value:null},endDate:{value:null},modelList:{valueFn:function(){return new e(this.getAttrs(["artistId","timeframe","startDate","endDate"]))}},loaded:{value:false}}});l.Handlebars.registerHelper("tourdates-bit-datetime",function(e,t){var a=e.match(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*)?)([zZ]|([+\-])(\d\d):?(\d\d))?$/)[1];var i=o.utc(a);if("date"===t.hash.format)return g(i,"ll");if("weekday"===t.hash.format)return g(i,"ddd");if("time"===t.hash.format)return g(i,"LT")});l.Handlebars.registerHelper("tourdates-timezone-abbr",function(e){return f.tz(e).zoneAbbr()});l.Handlebars.registerHelper("equals-string",function(e,t,a){return l.Handlebars.helpers.if.call(this,function(){return e===t.toString()},a)});l.Handlebars.registerHelper("is-live",function(t,e){return l.Handlebars.helpers.if.call(this,function(){var e=t.filter(function(e){return"Watch Live"===e.type});return e.length>0},e)});l.Handlebars.registerHelper("url-encode",function(e){return encodeURIComponent(e)});l.Handlebars.registerHelper("url-encode-patch",m)},"1.0",{requires:["jsonp","model-list","squarespace-hb-compare","squarespace-promises","squarespace-spinner","squarespace-ss-widget","squarespace-tourdates-bandsintown-list-template"]})},"./src/main/webapp/universal/scripts-v6/yui-config.js":function(e,t){window.YUI_CONFIG={base:"/universal/yui3/3.17.2/",allowRollup:false,combine:false,fetchCSS:false,bootstrap:false};SQUARESPACE_ROLLUPS=window.SQUARESPACE_ROLLUPS||{}},"./src/main/webapp/universal/scripts-v6/yui-for-react-first.js":function(e,t,a){a("./src/main/webapp/universal/src/shared/utils/polyfills/index.js");var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts").setLocale;var s=a("./common/temp/node_modules/react/index.js");var n=a("./common/temp/node_modules/react-dom/index.js");var r=a("./common/temp/node_modules/alt-utils/lib/ActionListeners.js");var o=a("./src/main/webapp/universal/src/shared/dispatchers/alt/index.ts");var l=a("./src/main/webapp/universal/src/apps/App/shared/stores/AppNotificationsStore.js");var c=a("./src/main/webapp/universal/src/apps/App/shared/actions/PopupOverlayActions.js");var u=a("./common/temp/node_modules/@sqs/error-reporter/dist/index.js");var d=a("./common/temp/node_modules/@sqs/imageloader/dist/index.js");var p=a("./src/main/webapp/frontend/packages/enums/Features.js");var h=a("./src/main/webapp/universal/src/apps/App/shared/stores/FeaturesStore.js");var g=a("./src/main/webapp/universal/src/apps/App/shared/stores/WebsiteStore/index.js");var m=a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/index.js");var f=a("./src/main/webapp/universal/src/shared/components/SafariPrivateAlert.jsx");var v=a("./src/main/webapp/universal/src/shared/constants/FrameEvents.js");var b=a("./src/main/webapp/universal/src/shared/utils/Context.js");var S=a("./src/main/webapp/universal/src/shared/utils/__legacyRouterHooks.js");var y=a("./src/main/webapp/universal/src/shared/i18n/resolvedLocales.ts");var _=a("./src/main/webapp/universal/src/shared/utils/setDragEffect.js");var C=a("./src/main/webapp/universal/src/shared/i18n/resolvedLocales.ts").setResolvedMemberLocaleFromContext;YUI.add("squarespace-yui-for-react-first",function(a){a.namespace("Squarespace.Damask");a.config.win.ImageLoader=new d;var t={PREVIEW_FRAME_LOAD:"previewFrameLoad"};a.Squarespace.Damask.ReactFirst=a.Base.create("Damask",a.Squarespace.Widgets.SSWidget,[],{initializer:function(){a.Squarespace.Singletons.Location.set("controller",this);S.setRouter(this.get("router"));this.publish(t.PREVIEW_FRAME_LOAD);this._bindInstrumentation();a.Global.publish("popupOverlay:requestShow");a.Global.publish("popupOverlay:hide");a.Global.publish("cookieBanner:force");a.Global.publish("cookieBanner:unforce");a.Global.publish("previewFrame:load");a.Global.on("siteTitleChange",function(e){var t=this.getSiteTitleAnnotationController();if(!t)return;var a=g.getState().siteTitle;t.setSiteTitle(e.newVal,a)},this);a.Global.on("siteDescriptionChange",function(e){var t=this.getSiteDescriptionAnnotationController();if(!t)return;var a=g.getState().siteDescription;t.setSiteDescription(e.newVal,a)},this);a.Squarespace.Utils.storeSharedSSIdentity();this._bindBrowserDragStart();this._bindActionListeners();this._bindOverlayEvents();u.bindUncaughtErrorReporter("damask",function(){return this.get("router").getCurrentLocation().state}.bind(this));var e=C();i("en-US",e);a.one("html").addClass(a.Squarespace.Utils.getBrowserClassName())},_bindFrame:function(){var e=this.get("previewFrame");this._instrumentation.bindFrame();e.addTarget(this);this._registerEvent([e.after(v.FRAME_EDITING_CHANGE,function(e){e.newVal?this._setBannerVisibility(false):this._syncBannerVisibility()},this)])},_bindInstrumentation:function(){this._instrumentation=new a.Squarespace.Damask.Instrumentation({damask:this,frame:this.get("previewFrame")});this.get("previewFrame")?this._bindFrame():this.after("previewFrameChange",function(){this._bindFrame()})},destructor:function(){this._resizeEmitter.destroy();this._actionListener.removeAllActionListeners();this._actionListener=null;l.unlisten(this.boundSyncBannerVisibility)},renderUI:function(){},bindUI:function(){a.Squarespace.EscManager.attach();b.isProductionEnvironment()&&this._bindContextMenuClick();this._bindAltRToRefresh();this._bindOverlayEvents()},_bindAltRToRefresh:function(){a.one(a.config.doc).on("keyup",function(e){e.altKey&&"r"===String.fromCharCode(e.charCode).toLowerCase()&&e.target.test("body")&&this.requestFrameRefresh()},this)},_bindActionListeners:function(){this._actionListener||(this._actionListener=new r(o));this.boundSyncBannerVisibility=this._syncBannerVisibility.bind(this);l.listen(this.boundSyncBannerVisibility)},_bindOverlayEvents:function(){if(h.isFeatureEnabled(p.POPUP_OVERLAY)){this._actionListener.addActionListener(c.SHOW,function(){a.Global.fire("popupOverlay:requestShow")});this._actionListener.addActionListener(c.HIDE,function(){a.Global.fire("popupOverlay:hide")})}},_syncBannerVisibility:function(){var e=l.getState();this._setBannerVisibility(e.isBannerVisible)},_setBannerVisibility:function(e){this.get("boundingBox").toggleClass(this.getClassName("banner-visible"),e)},_bindContextMenuClick:function(){a.one(a.config.doc).on("contextmenu",function(e){if(!e.target.ancestor('input, textarea, [contenteditable="true"]',true)){e.stopPropagation();e.preventDefault()}})},_bindBrowserDragStart:function(){a.config.doc.addEventListener("dragover",function(e){if(e.dataTransfer&&e.dataTransfer.types&&e.dataTransfer.types.includes("Files")){e.preventDefault();_(e.dataTransfer,"none")}},true)},syncUI:function(){this._updateBodyClass()},_fireEvent:function(e){return function(){this.fire(e)}},getAnnotationControllerByType:function(e){var t=this.getContentModeController();if(!t)return;return t._getAnnotationControllerByType(e)},getSiteTitleAnnotationController:function(){return this.getAnnotationControllerByType(m.SiteTitle)},getSiteDescriptionAnnotationController:function(){return this.getAnnotationControllerByType(m.SiteDescription)},_updateBodyClass:function(){var e=a.one("body");e.addClass("sqs-locale-"+(y.getResolvedMemberLocale()+"").toLowerCase())},_renderSafariPrivateAlert:function(){var e=this.get("contentBox").append("<div>").getDOMNode();n.render(s.createElement(f),e)},shouldFrameBeExpandedOnLoad:function(){if(!a.Squarespace.Help.isTutorialCompleted())return true;return false},getPanelPath:function(){return this.get("router").getCurrentLocation().pathname.substr(1).split("/")},getHistoryPreviewUrl:function(){var e=this.get("router").parseLocationHash();return e[1]||null},getPreviewFrameCollection:function(){return this.get("contentBridge").get("collection")},requestFrameRefresh:function(){if(!this.get("previewFrame"))return;this.get("previewFrame").requestRefresh("yui-for-react-first requeestFrameRefresh")},getFrameUrl:function(){if(!this.get("previewFrame"))return;return this.get("previewFrame").get("url")},setFrameUrl:function(e){this.get("router").replaceFrameUrl(e)},setFrameUrlOrRefresh:function(e){if(!this.get("previewFrame"))return;this.get("previewFrame").setUrlOrRequestRefresh(e)},isFrameEditable:function(){if(!this.get("previewFrame"))return true;return!!this.get("previewFrame").get("editable")},toggleFrameEditable:function(e){var t=this.get("previewFrame");if(!t)return;a.Lang.isUndefined(e)?t.set("editable",!this.isFrameEditable()):t.set("editable",!!e)},getContentModeController:function(){return this.get("contentBridge").get("controller")},getWebsiteOverlaysManager:function(){var e=this.get("previewFrame");return a.Lang.isValue(e)?e.getWebsiteOverlaysManager():null},getFrameContentWindow:function(){return this.get("previewFrame").get("iframe").get("contentWindow")},isFrameLoading:function(){return this.get("previewFrame").get("loading")}},{CSS_PREFIX:"sqs-damask",EVENTS:t,ATTRS:{isSafariPrivate:{valueFn:function(){if(a.UA.safari)try{window.sessionStorage.setItem("safari-test","testing");window.sessionStorage.removeItem("safari-test")}catch(e){if(e.code===DOMException.QUOTA_EXCEEDED_ERR&&0===window.sessionStorage.length)return true}return false}},router:{},basename:{value:"/config"},redirects:{value:[]},contentBridge:{valueFn:function(){return new a.Squarespace.Damask.Preview.ContentBridge},validator:a.Squarespace.AttrValidators.isNullOrInstanceOf(a.Squarespace.Damask.Preview.ContentBridge)},memberAccount:{valueFn:function(){return a.Squarespace.Singletons.AuthenticatedMemberAccount},setter:function(e){if(!a.instanceOf(e,a.Squarespace.Models.MemberAccount)){var t=this.get("siteContext.authenticatedAccount")||{};return new a.Squarespace.Models.MemberAccount(t)}return e}},modalManager:{valueFn:function(){var e=new a.Squarespace.Damask.Modal.Manager({damask:this});return e},validator:a.Squarespace.AttrValidators.isNullOrInstanceOf(a.Squarespace.Damask.Modal.Manager)},previewFrame:{},siteContext:{}}})},"1.0",{requires:["squarespace-common","squarespace-dialog","array-invoke","base","event-custom-base","node","squarespace-attr-validators","squarespace-context","squarespace-damask-instrumentation","squarespace-damask-modal-manager","squarespace-damask-preview-content-bridge","squarespace-damask-preview-frame","squarespace-damask-panel-async-data-panel","squarespace-dom-emitters-resize","squarespace-escmanager","squarespace-help","squarespace-models-content-collection","squarespace-models-member-account","squarespace-navigation-list-utils","squarespace-pinterest","squarespace-singletons-location","squarespace-ss-widget","squarespace-ui-base","squarespace-util","squarespace-widgets-information","widget-parent","squarespace-content-manager-widgets-cover-page","squarespace-async-wrappers-cover-page-editors-for-standalone","squarespace-settings-site-billing-panels-delete-site","squarespace-settings-site-billing-panels-switch-products","squarespace-widgets-billing-checkout-website-picker","squarespace-widgets-billing-checkout-commerce-picker"]})},"./src/main/webapp/universal/src/apps/App/components/Annotations/Annotations.jsx":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var c=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var u=i(a("./src/main/webapp/universal/src/apps/App/shared/redux/CmsStoreProvider.js"));function d(s){var n=p();return function e(){var t=(0,l.default)(s),a;if(n){var i=(0,l.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,o.default)(this,a)}}function p(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var h=a("./common/temp/node_modules/prop-types/index.js");var g=a("./common/temp/node_modules/react/index.js");var m=a("./common/temp/node_modules/@sqs/transitions/lib/index.js"),f=m.CSSTransitionGroup;var v=a("./src/main/webapp/universal/src/apps/App/components/Annotations/constants/transitions.js");var b=a("./src/main/webapp/universal/src/apps/App/components/Annotations/components/Overlay.jsx");var S=a("./src/main/webapp/universal/src/apps/App/components/Annotations/components/NodeHeader.jsx");var y=a("./src/main/webapp/universal/src/apps/App/components/Annotations/components/SurroundingOverlay.jsx");var _=a("./src/main/webapp/universal/src/apps/App/shared/actions/AnnotationsActions.js");var C=a("./src/main/webapp/universal/src/apps/App/components/Annotations/components/SevenOneAnnotations/index.js");var E=a("./src/main/webapp/universal/src/shared/utils/TemplateVersionUtils.js");var w="sqs-frontend-overlay-editor-widget-host-over";var A=function(e){(0,r.default)(a,e);var t=d(a);function a(){(0,s.default)(this,a);return t.apply(this,arguments)}(0,n.default)(a,[{key:"render",value:function e(){var t=this.props,a=t.overlayEditors,i=t.editorOverlay,s=t.visible,p=t.mouseOverNode;if(E.isSevenOne())return g.createElement(u.default,null,g.createElement(C,null));if(0===a.length)return null;if(!s)return null;return g.createElement("div",null,a.map(function(e){var t=e.label,a=e.positionStyles,i=e.isMouseOver,s=e.referenceNode,n=e.buttons,r=e.isNearby,o=e.key,l=e.instrumentationDescription,c=e.classNames,u=e.trackButtonClick;var d=i||s===p||r;return g.createElement(b,{key:o,isActive:d,label:t,positionStyles:a,classNames:c,onMouseOverOverlayChange:function e(t){s.classList.toggle(w,t);_.setMouseOver({referenceNode:s,isOver:t})},instrumentationDescription:l,buttons:n,trackButtonClick:u})}),g.createElement(f,{transitions:v.surroundingOverlay},i&&g.createElement(y,{hostNode:i.hostNode})),i&&g.createElement(S,i))}}]);return a}(g.Component);(0,c.default)(A,"propTypes",{overlayEditors:h.arrayOf(h.shape({label:h.string,buttons:h.arrayOf(h.object),positionStyles:h.object,referenceNode:h.object,isNearby:h.bool,isMouseOver:h.bool,instrumentationDescription:h.string,classNames:h.arrayOf(h.string),trackButtonClick:h.func})),editorOverlay:h.object,visible:h.bool,mouseOverNode:h.object});e.exports=A},"./src/main/webapp/universal/src/apps/App/components/Annotations/FirstSectionAddButton.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var l=i(a("./common/temp/node_modules/react/index.js"));var c=i(a("./common/temp/node_modules/react-dom/index.js"));var u=i(a("./src/main/webapp/universal/src/shared/constants/DeviceViewType.js"));var d=a("./src/main/webapp/universal/src/apps/App/shared/constants/SectionConstants.ts");var p=i(a("./src/main/webapp/universal/src/shared/stores/DeviceViewStore.js"));var h=i(a("./src/main/webapp/universal/src/apps/App/components/Annotations/components/AddSectionButton.js"));var g="sqs-top-section-hovered";var n=function(){function n(e){var t=this;var a=e.currentFirstSection,i=e.destinationNode,s=e.onAddSection;(0,r.default)(this,n);(0,o.default)(this,"onDeviceViewChanges",function(e){if(!t.container)return;e===u.default.DESKTOP?t.show():t.hide()});(0,o.default)(this,"_handleFirstSectionMouseEnter",function(){return t.container.classList.add(g)});(0,o.default)(this,"_handleFirstSectionMouseLeave",function(){return t.container.classList.remove(g)});(0,o.default)(this,"_handleResize",function(){if(!t.isHandlingResize){t.resizeRaf=window.requestAnimationFrame(function(){t._positionButtonBelowHeader();t.isHandlingResize=false});t.isHandlingResize=true}});(0,o.default)(this,"_removeResizeListener",function(){if(t.resizeRaf){window.cancelAnimationFrame(t.resizeRaf);t.resizeRaf=null}t.destinationNode.ownerDocument.defaultView.removeEventListener("resize",t._handleResize)});(0,o.default)(this,"_addResizeListener",function(){t.destinationNode.ownerDocument.defaultView.addEventListener("resize",t._handleResize)});(0,o.default)(this,"_removeMouseoverListeners",function(){if(t.currentFirstSection){t.currentFirstSection.removeEventListener("mouseenter",t._handleFirstSectionMouseEnter);t.currentFirstSection.removeEventListener("mouseleave",t._handleFirstSectionMouseLeave)}});(0,o.default)(this,"_addMouseoverListeners",function(){if(t.currentFirstSection){t.currentFirstSection.addEventListener("mouseenter",t._handleFirstSectionMouseEnter);t.currentFirstSection.addEventListener("mouseleave",t._handleFirstSectionMouseLeave)}});this.destinationNode=i;this.onAddSection=s;this.container=i.ownerDocument.createElement("div");this.syncWithDOM(a);this._render();this._addResizeListener();this._addMouseoverListeners();this.currentFirstSection&&this.currentFirstSection.matches(":hover")&&this._handleFirstSectionMouseEnter();this.destinationNode.appendChild(this.container)}(0,s.default)(n,[{key:"hide",value:function e(){this.container.classList.add("hidden")}},{key:"show",value:function e(){this.container.classList.remove("hidden")}},{key:"syncWithDOM",value:function e(t){this._removeMouseoverListeners();this.currentFirstSection=t;if(t){this.headerElement=t.ownerDocument.getElementById(d.HEADER_SECTION_ID);this.container.classList.remove("sqs-top-section-editing-ui-disabled");this._addMouseoverListeners();this._positionButtonBelowHeader()}else{this.headerElement=null;this.container.classList.add("sqs-top-section-editing-ui-disabled")}}},{key:"destroy",value:function e(){this._removeResizeListener();this._removeMouseoverListeners();this.destinationNode.removeChild(this.container);this.currentFirstSection=null;this.destinationNode=null;this.container=null;this.headerElement=null}},{key:"_positionButtonBelowHeader",value:function e(){var t;var a=(null===(t=this.headerElement)||void 0===t?void 0:t.clientHeight)||0;this.container.style.top=a+"px"}},{key:"_render",value:function e(){var t=p.default.getState(),a=t.view;this.container.classList.add("sqs-section-editing-ui","sqs-top-section-editing-ui");a!==u.default.DESKTOP&&this.hide();c.default.render(l.default.createElement(h.default,{position:"bottom",onClick:this.onAddSection}),this.container)}}]);return n}();t.default=n;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Annotations/OverlayAnnotationController.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var c=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));function r(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?r(Object(a),true).forEach(function(e){(0,s.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var o=a("./common/temp/node_modules/react/index.js");var d=a("./common/temp/node_modules/react-dom/index.js");var p=a("./src/main/webapp/universal/src/apps/App/components/Annotations/index.js");var h=a("./src/main/webapp/universal/src/apps/App/shared/actions/AnnotationsActions.js");var g=a("./src/main/webapp/universal/src/apps/App/shared/stores/AnnotationsStore.js");var m=a("./src/main/webapp/universal/src/apps/App/components/Annotations/utils/assignAlignPoints.js");var f=a("./src/main/webapp/universal/src/apps/App/components/Annotations/utils/getOverlayEditorConfigForAnnotationController.js");var v=a("./src/main/webapp/universal/src/apps/App/components/Annotations/utils/getOverlayPositionStyles.js");var b=a("./src/main/webapp/universal/src/apps/App/components/Annotations/utils/isMouseNearby.js");var S=a("./src/main/webapp/universal/src/apps/App/components/Annotations/utils/isOnScreen.js");var y=a("./src/main/webapp/universal/src/shared/utils/selfThrottle.js");var _=a("./src/main/webapp/universal/src/apps/App/components/Annotations/utils/shouldBeVisible.js");var C=a("./src/main/webapp/universal/src/apps/App/components/Annotations/utils/sortAnnotationControllers.js");var l=function(){function l(e){var t=this;var a=e.contentModeController,i=e.placeLastClassifications,s=e.overlayEditorClassName,n=e.win,r=e.mouse,o=e.allocateTopLeftCorner;(0,c.default)(this,l);this.contentModeController=a;this.placeLastClassifications=i;this.overlayEditorClassName=s;this.win=n;this.mouse=r;this.allocateTopLeftCorner=o;this.mouseMoving=false;this.clearBoundingClientRectCache();this.renderAnnotations();this.repaintRequest=y(function(){return t.evaluateAnnotations()});this.handleMouseMove=function(){t.mouseMoved();t.repaintRequest()};this.win.addEventListener("mousemove",this.handleMouseMove);this.invalidateAndRequestRepaint=function(){t.clearBoundingClientRectCache();t.repaintRequest()};this.win.addEventListener("scroll",this.invalidateAndRequestRepaint);this.win.addEventListener("resize",this.invalidateAndRequestRepaint);this.repaintRequest()}(0,n.default)(l,[{key:"destroy",value:function e(){this.destroyAnnotations();this.win.removeEventListener("mousemove",this.handleMouseMove);this.win.removeEventListener("scroll",this.invalidateAndRequestRepaint);this.win.removeEventListener("resize",this.invalidateAndRequestRepaint);this.mouseMoveTimer&&this.win.clearTimeout(this.mouseMoveTimer);this.repaint=null;this.handleScroll=null;this.win=null;this.invalidateAndRequestRepaint=null;this.repaintRequest=null}},{key:"evaluateAnnotations",value:function e(){var t=this;var a=this.contentModeController,i=this.placeLastClassifications,s=this.overlayEditorClassName,n=this.win,r=this.mouse;if(null===n){console.warn("repaint called after destroy!");return}if(!g.getState().visible)return;var o=C({contentModeController:a,placeLastClassifications:i}).map(function(e){return f(e,s)}).filter(function(e){return e&&e.hasPermission&&e.referenceNode&&e.visible}).map(function(e){return u({},e,{referenceNodeRect:t.getBoundingClientRect(e.referenceNode)})}).filter(function(e){var t=e.referenceNodeRect,a=e.referenceNode;return _(t,a)&&S(n,t)});m(o,this.allocateTopLeftCorner);o=o.map(function(e){return u({},e,{isNearby:t.mouseMoving&&b(e.referenceNodeRect,r,n),test:true,positionStyles:v(e.referenceNodeRect,e.alignPoint,n,e.placeInside)})});h.setOverlayEditors.defer(o)}},{key:"mouseMoved",value:function e(){var t=this;this.mouseMoving=true;this.mouseMoveTimer&&this.win.clearTimeout(this.mouseMoveTimer);this.mouseMoveTimer=this.win.setTimeout(function(){t.mouseMoving=false;t.mouseMoveTimer=null;t.repaintRequest()},3500)}},{key:"renderAnnotations",value:function e(){this.annotationMountNode=this.win.document.createElement("div");this.win.document.body.appendChild(this.annotationMountNode);d.render(o.createElement(p),this.annotationMountNode)}},{key:"destroyAnnotations",value:function e(){d.unmountComponentAtNode(this.annotationMountNode);this.annotationMountNode.parentNode&&this.annotationMountNode.parentNode.removeChild(this.annotationMountNode)}},{key:"getBoundingClientRect",value:function e(t){var a=this._cache.find(function(e){return e.node===t});if(a)return a.rect;var i=t.getBoundingClientRect();this._cache.push({node:t,rect:i});return i}},{key:"clearBoundingClientRectCache",value:function e(){this._cache=[]}}]);return l}();e.exports=l},"./src/main/webapp/universal/src/apps/App/components/Annotations/components/AddSectionButton.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var s=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=r;var p=s(a("./common/temp/node_modules/@babel/runtime/helpers/extends.js"));var h=s(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var g=s(a("./common/temp/node_modules/@babel/runtime/helpers/objectWithoutProperties.js"));var m=a("./src/main/webapp/universal/src/shared/i18n/index.ts");var f=s(a("./common/temp/node_modules/classnames/index.js"));var v=i(a("./common/temp/node_modules/react/index.js"));var b=a("./src/main/webapp/universal/src/shared/constants/LayoutEngineClassnames.js");var S=a("./src/main/webapp/universal/src/apps/App/shared/constants/SectionConstants.ts");var y=s(a("./src/main/webapp/universal/src/apps/App/shared/components/IconButton.jsx"));var _=a("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var C=s(a("./src/main/webapp/frontend/packages/enums/Flag.js"));var E=s(a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts"));function n(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function w(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?n(Object(a),true).forEach(function(e){(0,h.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var A=v.default.createElement("div",{className:"icon-page-section-add-section"});function r(e){var t=e.position,a=e.onClick,i=e.className,s=(0,g.default)(e,["position","onClick","className"]);if(t&&"top"!==t&&"bottom"!==t)throw new Error('Position must be "top" or "bottom"');var n=(0,v.useRef)(null);var r=E.default.isFeatureEnabled(C.default.PAGE_INTERACTIONS_IMPROVEMENTS);var o=r?_.Button.Secondary:y.default;var l=(0,f.default)(S.ADD_SECTION_BUTTON_HIT_BOX_CLASSNAME,b.DISABLE_DRAG_SELECTION_CLASSNAME,(0,h.default)({"redesign-add-button":r},"".concat(t,"-add-hit-box"),!!t),i);var c=w({},s);"bottom"===t&&(c["data-test"]="section-add-button");var u=(0,v.useCallback)(function(){r&&n.current.ownerDocument.documentElement.classList.add("sqs-add-section-button-focused")},[r]);var d=(0,v.useCallback)(function(){r&&n.current.ownerDocument.documentElement.classList.remove("sqs-add-section-button-focused")},[r]);return v.default.createElement("div",{className:l,ref:n},v.default.createElement(o,(0,p.default)({className:"sqs-section-add-button",onClick:a,onMouseEnter:u,onMouseLeave:d,onFocus:u,onBlur:d},c),r?(0,m.t)("Add Section"):A))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Annotations/components/Button.jsx":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/prop-types/index.js");var s=a("./common/temp/node_modules/react/index.js");var n=a("./common/temp/node_modules/classnames/index.js");var r="sqs-button-vanilla";var o=function e(){return s.createElement("div",{className:"icon"})};var l=function e(t){return s.createElement("div",{className:n(r,t.className),"data-test":t.name,onClick:t.handleClick,title:t.title||t.label},s.createElement("div",{className:r+"-content"},s.createElement("div",{className:"label"},t.label),t.icon&&s.createElement(o,null)))};l.propTypes={className:i.string,handleClick:i.func.isRequired,icon:i.bool,label:i.string.isRequired,title:i.string};e.exports=l},"./src/main/webapp/universal/src/apps/App/components/Annotations/components/NodeHeader.jsx":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var g=i(a("./common/temp/node_modules/@babel/runtime/helpers/extends.js"));var m=i(a("./common/temp/node_modules/@babel/runtime/helpers/objectWithoutProperties.js"));var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/assertThisInitialized.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var c=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var f=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));function u(s){var n=d();return function e(){var t=(0,c.default)(s),a;if(n){var i=(0,c.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,l.default)(this,a)}}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var p=a("./common/temp/node_modules/prop-types/index.js");var v=a("./common/temp/node_modules/react/index.js");var b=a("./common/temp/node_modules/classnames/index.js");var h=a("./common/temp/node_modules/lodash/throttle.js");var S=a("./common/temp/node_modules/lodash/debounce.js");var y=a("./common/temp/node_modules/@sqs/utils/scroll/scrollTo.js");var _=a("./common/temp/node_modules/@sqs/utils/scroll/getScrollParent.js");var C=a("./common/temp/node_modules/@sqs/utils/scroll/normalizeScrollSetter.js");var E=a("./src/main/webapp/universal/src/shared/constants/LayoutEngineClassnames.js"),w=E.DISABLE_DRAG_SELECTION_CLASSNAME;var A=a("./src/main/webapp/universal/src/apps/App/components/Annotations/components/Button.jsx");var T="sqs-frontend-node-header-widget";var I=T+"-host";var q=150;var k=500;var L=450;var D=100;var N=100;var R=function(e){(0,o.default)(i,e);var a=u(i);function i(e,t){var d;(0,s.default)(this,i);d=a.call(this,e,t);(0,f.default)((0,r.default)(d),"hideHeader",function(){d.setState({isVisible:false})});(0,f.default)((0,r.default)(d),"ensureAnchorNodeIsOnScreen",function(){var e=d.props.hostNode;var t=_(e);if(!t)return;var a=d.props.scrollLayoutOnEditingStart;var i=C(t);var s=a&&a.anchorNodeId;if(!s)return;var n=e.querySelector("#"+s);if(!n)return;var r=d.state.nodeHeaderHeight;var o=i.scrollTop;var l=n.getBoundingClientRect().top;var c=a.anchorNodeOffsetTop||0;var u=o+l-c-r;if(Math.abs(o-u)>q){y(i,u,{minDuration:k,maxDuration:k,easing:"easeOutQuart"});d.updateAfterScrollTimeoutId=setTimeout(k,d.props.updateAfterScroll)}else d.props.updateAfterScroll()});(0,f.default)((0,r.default)(d),"setHeaderPosition",function(){var e=d.state.previewDocument.documentElement.getBoundingClientRect();var t=d.props.hostNode.getBoundingClientRect();var a=d.state.nodeHeaderHeight;var i=a;var s=Math.max(0,Math.round(t.left-e.left-i));var n=Math.round(t.top-e.top-i-a);var r=Math.min(d.state.previewWindow.innerWidth,Math.round(t.width+2*i));var o=r<L;var l=true;d.setState({isNarrow:o,isVisible:l,left:s,top:n,width:r},d.setHeaderFixed)});(0,f.default)((0,r.default)(d),"setHeaderFixed",function(){var e=d.state,t=e.previewWindow,a=e.top;var i=t.document;var s=i.documentElement&&i.documentElement.scrollTop||i.body.scrollTop;d.setState({isFixedBottom:a>s+t.innerHeight,isFixedTop:a<s})});(0,f.default)((0,r.default)(d),"handleHeaderClick",function(e){e.target.classList.contains(T+"-buttons-wrapper")&&d.ensureAnchorNodeIsOnScreen()});d.throttledScrollHandler=h(d.setHeaderFixed,N);d.debouncedLeadingHideHeader=S(d.hideHeader,D,{leading:true,trailing:false});d.debouncedTrailingSetHeaderPosition=S(d.setHeaderPosition,D);d.debouncedResizeHandler=function(){d.debouncedLeadingHideHeader();d.debouncedTrailingSetHeaderPosition()};d.state={previewWindow:e.hostNode.ownerDocument.defaultView,previewDocument:e.hostNode.ownerDocument,isFixedBottom:false,isFixedTop:false,isNarrow:false,isVisible:false,nodeHeaderHeight:44,left:0,top:0,width:0};return d}(0,n.default)(i,[{key:"componentDidMount",value:function e(){this.props.hostNode.classList.add(I);this.state.previewWindow.addEventListener("scroll",this.throttledScrollHandler);this.state.previewWindow.addEventListener("resize",this.debouncedResizeHandler);this.debouncedResizeHandler();this.ensureAnchorNodeIsOnScreen()}},{key:"UNSAFE_componentWillReceiveProps",value:function e(){this.debouncedTrailingSetHeaderPosition()}},{key:"componentWillUnmount",value:function e(){clearTimeout(this.updateAfterScrollTimeoutId);this.props.hostNode.classList.remove(I);this.state.previewWindow.removeEventListener("scroll",this.throttledScrollHandler);this.state.previewWindow.removeEventListener("resize",this.debouncedResizeHandler);this.throttledScrollHandler.cancel();this.debouncedTrailingSetHeaderPosition.cancel();this.debouncedLeadingHideHeader.cancel()}},{key:"render",value:function e(){if(!this.state.isVisible)return null;var t=this.props,a=t.buttons,i=t.className,s=t.instrumentationDescription,n=t.label,r=t.trackButtonClick;var o=this.state,l=o.isFixedBottom,c=o.isFixedTop,u=o.isNarrow,d=o.left,p=o.top,h=o.width;return v.createElement("div",{className:b(i,w,T,(0,f.default)({},T+"-narrow",u),(0,f.default)({},T+"-fixed-top",c),(0,f.default)({},T+"-fixed-bottom",l)),style:{left:d,top:p,width:h}},v.createElement("div",{className:T+"-content",onClick:this.handleHeaderClick},v.createElement("div",{className:T+"-label",dangerouslySetInnerHTML:{__html:n}}),v.createElement("div",{className:T+"-buttons-wrapper"},a.map(function(e){var a=e.handleClick,i=(0,m.default)(e,["handleClick"]);return v.createElement(A,(0,g.default)({handleClick:function e(t){r({label:i.label,instrumentationDescription:s});a(t)},key:i.name},i))}))))}}]);return i}(v.Component);(0,f.default)(R,"propTypes",{buttons:p.arrayOf(p.object).isRequired,className:p.string,label:p.string.isRequired,instrumentationDescription:p.string,hostNode:p.any.isRequired,scrollLayoutOnEditingStart:p.shape({anchorNodeId:p.string,anchorNodeOffsetTop:p.number}),trackButtonClick:p.func.isRequired,updateAfterScroll:p.func});(0,f.default)(R,"defaultProps",{instrumentationDescription:"",scrollLayoutOnEditingStart:{anchorNodeId:null,anchorNodeOffsetTop:0},updateAfterScroll:function e(){}});e.exports=R},"./src/main/webapp/universal/src/apps/App/components/Annotations/components/Overlay.jsx":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/extends.js"));var c=i(a("./common/temp/node_modules/@babel/runtime/helpers/objectWithoutProperties.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var u=i(a("./common/temp/node_modules/@babel/runtime/helpers/assertThisInitialized.js"));var d=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var p=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var h=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var g=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));function m(s){var n=f();return function e(){var t=(0,h.default)(s),a;if(n){var i=(0,h.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,p.default)(this,a)}}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var s=a("./common/temp/node_modules/prop-types/index.js");var v=a("./common/temp/node_modules/react/index.js");var b=a("./common/temp/node_modules/classnames/index.js");var S=a("./src/main/webapp/universal/src/apps/App/components/Annotations/components/Button.jsx");var y="sqs-frontend-overlay-editor-widget";var n=function(e){(0,d.default)(n,e);var s=m(n);function n(){var e;(0,r.default)(this,n);for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];e=s.call.apply(s,[this].concat(a));(0,g.default)((0,u.default)(e),"handleOnMouseEnter",function(){e.props.onMouseOverOverlayChange(true)});(0,g.default)((0,u.default)(e),"handleOnMouseLeave",function(){e.props.onMouseOverOverlayChange(false)});return e}(0,o.default)(n,[{key:"render",value:function e(){var t=this.props,a=t.label,i=t.positionStyles,s=t.buttons,n=t.className,r=t.isActive,o=t.classNames;return v.createElement("div",{className:b(y,n,(0,g.default)({},y+"-visible",r),o),style:i},v.createElement("div",{className:y+"-content",onMouseEnter:this.handleOnMouseEnter,onMouseLeave:this.handleOnMouseLeave},v.createElement("div",{className:y+"-label"},a),v.createElement("div",{className:y+"-buttons-wrapper"},s.map(function(e){var t=e.handleClick,a=(0,c.default)(e,["handleClick"]);return v.createElement(S,(0,l.default)({handleClick:t,key:a.name},a))}))))}}]);return n}(v.Component);(0,g.default)(n,"propTypes",{label:s.string,positionStyles:s.object,isActive:s.bool,onMouseOverOverlayChange:s.func,buttons:s.array,classNames:s.array});e.exports=n},"./src/main/webapp/universal/src/apps/App/components/Annotations/components/SectionToolbar.jsx":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var s=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var I=s(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var q=s(a("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));var k=a("./src/main/webapp/universal/src/shared/i18n/index.ts");var L=s(a("./common/temp/node_modules/classnames/index.js"));var n=s(a("./common/temp/node_modules/prop-types/index.js"));var D=i(a("./common/temp/node_modules/react/index.js"));var N=a("./common/temp/node_modules/@sqs/rosetta-icons/build/lib/index.js");var R=s(a("./src/main/webapp/frontend/packages/enums/Flag.js"));var r=s(a("./common/temp/node_modules/alt-utils/lib/connectToStores.js"));var O=s(a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts"));var o=s(a("./src/main/webapp/universal/src/shared/stores/DeviceViewStore.js"));var P=s(a("./src/main/webapp/universal/src/shared/constants/DeviceViewType.js"));var x=a("./src/main/webapp/universal/src/shared/constants/LayoutEngineClassnames.js");var B=a("./src/main/webapp/universal/src/apps/App/shared/constants/SectionConstants.ts");var M=s(a("./src/main/webapp/universal/src/apps/App/components/Annotations/components/ToolbarButton.js"));var F=s(a("./src/main/webapp/universal/src/apps/App/components/Annotations/components/AddSectionButton.js"));var j=["duplicate","up","down","delete","more"];var l=function e(t){var a=t.handleAddSection,i=t.handleSettingsClick,s=t.handleToolbarButtonClick,n=t.hasFeature,r=t.hiddenClassName,o=t.isFooterSection,l=t.manageItemsButtonText,c=t.editDetailsButtonText,u=t.sectionNode,d=t.sectionPosition,p=t.view;var h=(0,D.useReducer)(function(e){return e+1},0),g=(0,q.default)(h,2),m=g[1];var f=O.default.isFeatureEnabled(R.default.SECTION_ADMIN)&&!o;var v=j.some(function(e){return n(e)});var b=(0,D.useState)(false),S=(0,q.default)(b,2),y=S[0],_=S[1];var C=!u.previousElementSibling;var E=!u.nextElementSibling;(0,D.useEffect)(function(){var t=function e(){m()};window.Y.Global.on("sections:change",t);return function e(){window.Y.Global.off("sections:change",t)}},[m]);(0,D.useEffect)(function(){var t=function e(t){if(!n("more"))return;t.target.closest(".control-buttons")||_(false)};u.addEventListener("click",t);return function e(){u.removeEventListener("click",t)}},[n,u]);var w=p===P.default.PHONE&&!y;var A=(0,D.useCallback)(function(){a(u,true)},[a,u]);var T=(0,D.useCallback)(function(){a(u,false)},[a,u]);return D.default.createElement("div",{className:(0,L.default)("sqs-section-editing-ui",(0,I.default)({},r,p!==P.default.DESKTOP))},D.default.createElement("div",{className:"shadow"}),n("add")&&D.default.createElement(F.default,{position:"bottom",onClick:T}),D.default.createElement("div",{className:"shim"}),D.default.createElement("div",{"data-template-getter":"section-wrapper",className:"sqs-section-wrapper",onDoubleClick:function e(t){if(n("settings")){if(t.currentTarget!==t.target)return;i(t)}}},D.default.createElement("div",{className:"sqs-section-outline"}),n("add")&&D.default.createElement(F.default,{position:"top",onClick:A}),D.default.createElement("div",{className:"control-buttons-parent ".concat(x.DISABLE_DRAG_SELECTION_CLASSNAME)},f&&D.default.createElement("div",{className:"icon-page-section-control-button-admin","data-test":"toolbar-button-admin",onClick:function e(){return s("admin")}}),D.default.createElement("div",{className:B.SECTION_CONTROL_BUTTON_WRAPPER_CLASSNAME},l&&D.default.createElement("div",{className:"icon-page-section-control-button-manage-items-container"},D.default.createElement("button",{className:"icon-page-section-control-button-manage-items","data-test":"toolbar-button-manage-items",onClick:function e(){return s("manageItems")}},l)),c&&D.default.createElement("div",{className:"icon-page-section-control-button-edit-details-container"},D.default.createElement("button",{className:"icon-page-section-control-button-edit-details","data-test":"toolbar-button-edit-details",onClick:function e(){return s("editDetails")}},c)),n("galleryContent")&&D.default.createElement("div",{className:"icon-page-section-control-button-gallery-content-container"},D.default.createElement("button",{className:"icon-page-section-control-button-gallery-content","data-test":"toolbar-button-gallery",onClick:function e(){return s("galleryContent")}})),n("userItemsListContent")&&D.default.createElement("div",{className:"icon-page-section-control-button-manage-items-container"},D.default.createElement("button",{className:"icon-page-section-control-button-manage-items","data-test":"toolbar-button-user-items",onClick:function e(){return s("userItemsListContent")}},(0,k.t)("Edit List",null,{project:"src.seven-one",notes:"This button opens the list-section manager"}))),n("imageAndTextContent")&&D.default.createElement("div",{className:"icon-page-section-control-button-gallery-content-container"},D.default.createElement("button",{className:"icon-page-section-control-button-gallery-content","data-test":"toolbar-button-image-and-text",onClick:function e(){return s("imageAndTextContent")}})),D.default.createElement("div",{className:"control-buttons",tabIndex:d},D.default.createElement("div",{className:"toolbar-buttons"},n("settings")&&D.default.createElement(M.default,{Icon:N.Edit,"data-test":"toolbar-button-settings",onClick:i,tooltipText:(0,k.t)("Edit Section")}),!w&&D.default.createElement(D.default.Fragment,null,v&&D.default.createElement("span",{className:"icon-page-section-control-button-divider"}),n("duplicate")&&D.default.createElement(M.default,{Icon:N.Duplicate,"data-test":"toolbar-button-duplicate",onClick:function e(){return s("duplicate")},tooltipText:(0,k.t)("Duplicate")}),n("up")&&D.default.createElement(M.default,{Icon:N.ArrowUp,"data-test":"toolbar-button-up",disabled:C,onClickCapture:function e(){return s("up")},tooltipText:(0,k.t)("Move Up")}),n("down")&&D.default.createElement(M.default,{Icon:N.ArrowDown,"data-test":"toolbar-button-down",disabled:E,onClickCapture:function e(){return s("down")},tooltipText:(0,k.t)("Move Down")}),n("delete")&&D.default.createElement(M.default,{Icon:N.Trash,dangerous:true,"data-test":"toolbar-button-delete",onClick:function e(){return s("delete")},tooltipText:(0,k.t)("Delete")}))),D.default.createElement("div",{style:{display:"flex"}},n("more")&&w&&D.default.createElement("button",{className:"icon-page-section-control-button-more","data-test":"more",onClick:function e(){return _(true)}})))))))};l.propTypes={handleAddSection:n.default.func,handleSettingsClick:n.default.func,handleToolbarButtonClick:n.default.func,hasFeature:n.default.func,hiddenClassName:n.default.string,isFooterSection:n.default.bool,manageItemsButtonText:n.default.string,sectionNode:n.default.object,sectionPosition:n.default.number.isRequired,view:n.default.string};var c=(0,r.default)({getStores:function e(){return[o.default]},getPropsFromStores:function e(){return{view:o.default.getState().view}}},l);t.default=c;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Annotations/components/SevenOneAnnotations/SectionThemeIndicator.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var s=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var f=s(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var v=s(a("./common/temp/node_modules/classnames/index.js"));var b=s(a("./src/main/webapp/frontend/packages/enums/Flag.js"));var S=s(a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts"));var y=s(a("./src/main/webapp/universal/src/apps/App/shared/actions/TweakActions.js"));var n=a("./src/main/webapp/universal/src/apps/App/shared/redux/actions/colorsActions.js");var r=a("./src/main/webapp/universal/src/apps/App/shared/redux/CmsStoreProvider.js");var o=s(a("./common/temp/node_modules/memoize-one/dist/memoize-one.esm.js"));var l=s(a("./common/temp/node_modules/prop-types/index.js"));var _=i(a("./common/temp/node_modules/react/index.js"));var C=s(a("./common/temp/node_modules/react-dom/index.js"));var E=a("./src/main/webapp/universal/src/apps/App/shared/components/Colors/index.js");var w=s(a("./src/main/webapp/universal/src/apps/App/components/Annotations/components/SevenOneAnnotations/SevenOneAnnotations.less"));var A=function e(){return S.default.isFeatureEnabled(b.default.SEVEN_ONE_CONTEXTUAL_STYLE_EDITING_V1)?"/design/site-styles/colors/section-themes/theme-editor":"/design/colors/section-themes/theme-editor"};var c=(0,o.default)(function(e){var t;var a=e.palette,i=e.config,s=e.container,n=e.dataAttrKey,r=e.top,o=e.setAdvancedEditingThemeId;var l=i.id,c=i.label,u=i.cardMappings;var d=S.default.isFeatureEnabled(b.default.SEVEN_ONE_CONTEXTUAL_STYLE_EDITING_V1);var p=l.startsWith("dark")||l.startsWith("black");var h=p?"rgba(255,255, 255, 0.4)":"rgba(0, 0, 0, 0.06)";var g={borderColor:h};r&&(g.top="".concat(r,"px"));var m=(0,_.useCallback)(function(){d?o(l):y.default.setAdvancedEditingThemeId(l);var e=window.CONFIG_PANEL;var t=null===e||void 0===e?void 0:e.get("router");null===t||void 0===t?void 0:t.push(A())},[l,o,d]);return C.default.createPortal(_.default.createElement("div",{className:(0,v.default)(w.default.indicatorWrapper,(t={},(0,f.default)(t,w.default.indicatorWrapperAlignmentCSE,d),(0,f.default)(t,w.default.indicatorWrapperAlignment,!d),t)),style:g},_.default.createElement(E.ThemeCard,{capture:true,cardMappings:u,palette:a,value:l,text:c,onClick:m,dataAttrKey:n})),s)});c.propTypes={palette:l.default.object.isRequired,config:l.default.shape({id:l.default.string.isRequired,label:l.default.string,cardMappings:l.default.object.isRequired}).isRequired,container:l.default.object.isRequired};c.defaultProps={top:0};var u={setAdvancedEditingThemeId:n.setAdvancedEditingThemeId};var d=S.default.isFeatureEnabled(b.default.SEVEN_ONE_CONTEXTUAL_STYLE_EDITING_V1)?(0,r.cmsStoreConnect)(null,u)(c):c;t.default=d;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Annotations/components/SevenOneAnnotations/SevenOneAnnotations.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var d=i(a("./common/temp/node_modules/react/index.js"));var p=i(a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts"));var h=i(a("./src/main/webapp/frontend/packages/enums/Flag.js"));var g=i(a("./src/main/webapp/universal/src/apps/App/components/Annotations/components/SevenOneAnnotations/SectionThemeIndicator.js"));var m=a("./src/main/webapp/universal/src/apps/App/components/Annotations/constants/seven-one-annotations.js");var f=a("./src/main/webapp/universal/src/apps/App/shared/utils/SectionDomUtils.js");var s=a("./src/main/webapp/universal/src/apps/App/shared/redux/selectors/siteStylesSelectors.js");var n=a("./src/main/webapp/universal/src/apps/App/shared/redux/CmsStoreProvider.js");var r=function e(t){var a=t.activePalette,i=t.activePaletteCSE,s=void 0===i?null:i,n=t.isHeaderTransparent,r=t.isSectionThemeIndicatorsVisible,o=t.pageSectionNodes;var l=null!==s&&void 0!==s?s:a;if(!l||!r||!o)return null;var c=(0,f.isOverlayNavOpen)(o.header.node);var u=o.header.indicator;n&&o.sections.length>0?u=o.sections[0].indicator:c&&(u=o.overlayNav.indicator);return o&&d.default.createElement(d.default.Fragment,null,c&&p.default.isFeatureEnabled(h.default.SEVEN_ONE_MENU_OVERLAY_THEME_SWITCHER)&&d.default.createElement(g.default,{dataAttrKey:m.OVERLAY_NAV_THEME_INDICATOR_KEY,palette:l,config:o.overlayNav.indicator,container:o.overlayNav.node,top:o.offsets.firstSection}),!c&&d.default.createElement(g.default,{dataAttrKey:m.HEADER_SECTION_THEME_INDICATOR_KEY,palette:l,config:u,container:o.header.node,top:o.offsets.header}),!c&&o.sections.map(function(e,t){var a=e.node,i=e.indicator,s=e.top;var n="".concat(m.SECTION_THEME_INDICATOR_KEY,"-").concat(t);0===t&&(s=o.offsets.firstSection);return d.default.createElement(g.default,{key:n,dataAttrKey:n,palette:l,config:i,container:a,top:s})}))};var o=function e(t){return{activePaletteCSE:(0,s.getActivePalette)(t)}};var l=p.default.isFeatureEnabled(h.default.SEVEN_ONE_CONTEXTUAL_STYLE_EDITING_V1)?(0,n.cmsStoreConnect)(o,null)(r):r;t.default=l;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Annotations/components/SevenOneAnnotations/SevenOneAnnotations.less":function(e,t,a){e.exports={indicatorWrapper:"SevenOneAnnotations-indicatorWrapper-2qPFq",indicatorWrapperAlignment:"SevenOneAnnotations-indicatorWrapperAlignment-1tY1_",indicatorWrapperAlignmentCSE:"SevenOneAnnotations-indicatorWrapperAlignmentCSE-21CaU"}},"./src/main/webapp/universal/src/apps/App/components/Annotations/components/SevenOneAnnotations/index.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var u=i(a("./src/main/webapp/frontend/packages/enums/Flag.js"));var d=a("./src/main/webapp/universal/src/apps/App/shared/utils/selectors.js");var s=i(a("./common/temp/node_modules/alt-utils/lib/connectToStores.js"));var p=i(a("./src/main/webapp/universal/src/apps/App/shared/stores/AnnotationsStore.js"));var n=i(a("./src/main/webapp/universal/src/apps/App/shared/stores/PageSectionsStore.js"));var r=i(a("./src/main/webapp/universal/src/apps/App/shared/stores/FrameToolbarStore.js"));var h=i(a("./src/main/webapp/universal/src/shared/stores/TweakStore.js"));var o=a("./src/main/webapp/universal/src/apps/App/shared/redux/CmsStoreProvider.js");var l=a("./src/main/webapp/universal/src/apps/App/shared/redux/selectors/siteStylesSelectors.js");var g=i(a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts"));var c=i(a("./src/main/webapp/universal/src/apps/App/components/Annotations/components/SevenOneAnnotations/SevenOneAnnotations.js"));var m=i(a("./src/main/webapp/universal/src/apps/App/components/Annotations/utils/getIsSectionThemeIndicatorsVisible.js"));var f=(0,s.default)({getStores:function e(){return[p.default,r.default,n.default,h.default]},getPropsFromStores:function e(t){var a=t.loadedRedux,i=t.tweakValuesCurrentRedux,s=t.activePaletteRedux;var n=p.default.getState(),r=n.pageSectionNodes;var o=h.default.getState();var l=o.loaded,c=o.tweakValuesCurrent;if(g.default.isFeatureEnabled(u.default.SEVEN_ONE_CONTEXTUAL_STYLE_EDITING_V1))return{pageSectionNodes:r,isSectionThemeIndicatorsVisible:(0,m.default)()&&a,activePalette:a?s:null,isHeaderTransparent:a&&i&&"true"===i["tweak-transparent-header"]};return{pageSectionNodes:r,isSectionThemeIndicatorsVisible:(0,m.default)()&&l,activePalette:l?(0,d.getActivePalette)(o):null,isHeaderTransparent:l&&c&&"true"===c["tweak-transparent-header"]}}},c.default);var v=g.default.isFeatureEnabled(u.default.SEVEN_ONE_CONTEXTUAL_STYLE_EDITING_V1)?(0,o.cmsStoreConnect)(function(e){return{activePaletteRedux:(0,l.getActivePalette)(e),loadedRedux:(0,l.getAreTweaksLoaded)(e),tweakValuesCurrentRedux:(0,l.getCurrentTweakValues)(e)}})(f):f;var b=v;t.default=b;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Annotations/components/SurroundingOverlay.jsx":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/objectWithoutProperties.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/assertThisInitialized.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var c=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var u=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var d=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));function p(s){var n=h();return function e(){var t=(0,u.default)(s),a;if(n){var i=(0,u.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,c.default)(this,a)}}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var g=a("./common/temp/node_modules/prop-types/index.js");var m=a("./common/temp/node_modules/react/index.js");var f=a("./common/temp/node_modules/classnames/index.js");var v=a("./common/temp/node_modules/lodash/debounce.js");var b=100;var S="sqs-surrounding-overlay";var y=function(e){(0,o.default)(a,e);var t=p(a);function a(e){var o;(0,n.default)(this,a);o=t.call(this,e);(0,d.default)((0,l.default)(o),"getRectOffsets",function(){var e=o.state.previewDocument.documentElement.getBoundingClientRect();var t=o.props.hostNode.getBoundingClientRect();return{left:t.left-e.left,top:t.top-e.top,height:t.height,width:t.width}});(0,d.default)((0,l.default)(o),"setSectionsPositions",function(){var e=o.state,t=e.previewDocument,a=e.previewWindow;var i=o.getRectOffsets();var s=44;var n=Math.max(t.body.scrollHeight,a.innerHeight);var r=[{name:"top",height:i.top-s,left:0,right:0,top:0},{name:"bottom",height:n-(i.top+i.height+s),left:0,right:0,top:i.top+i.height+s},{name:"left",height:i.height+2*s,left:0,top:i.top-s,width:i.left-s},{name:"right",height:i.height+2*s,left:i.left+i.width+s,right:0,top:i.top-s}];o.setState({sections:r})});(0,d.default)((0,l.default)(o),"renderSection",function(e,t){return m.createElement("div",{key:e,className:f(S,"".concat(S,"-").concat(e)),style:t})});o.debouncedSetSectionsPositions=v(o.setSectionsPositions,b,{maxWait:2*b});o.state={previewWindow:e.hostNode.ownerDocument.defaultView,previewDocument:e.hostNode.ownerDocument,sections:[]};return o}(0,r.default)(a,[{key:"componentDidMount",value:function e(){this.state.previewWindow.addEventListener("resize",this.debouncedSetSectionsPositions);this.debouncedSetSectionsPositions()}},{key:"UNSAFE_componentWillReceiveProps",value:function e(){this.debouncedSetSectionsPositions()}},{key:"componentWillUnmount",value:function e(){this.state.previewWindow&&this.state.previewWindow.removeEventListener("resize",this.debouncedSetSectionsPositions);this.debouncedSetSectionsPositions.cancel()}},{key:"render",value:function e(){var i=this;var t=this.state.sections;return m.createElement("div",null,t.map(function(e){var t=e.name,a=(0,s.default)(e,["name"]);return i.renderSection(t,a)}))}}]);return a}(m.Component);(0,d.default)(y,"propTypes",{hostNode:g.any.isRequired});e.exports=y},"./src/main/webapp/universal/src/apps/App/components/Annotations/components/ToolbarButton.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var s=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=l;var E=s(a("./common/temp/node_modules/@babel/runtime/helpers/extends.js"));var w=s(a("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));var A=s(a("./common/temp/node_modules/@babel/runtime/helpers/objectWithoutProperties.js"));var T=s(a("./common/temp/node_modules/classnames/index.js"));var n=s(a("./common/temp/node_modules/prop-types/index.js"));var I=i(a("./common/temp/node_modules/react/index.js"));var q=a("./common/temp/node_modules/@sqs/rosetta-elements/build/lib/index.js");var r=a("./common/temp/node_modules/@sqs/rosetta-tokens/build/lib/index.js");var o=55;var k=o+parseInt(r.space[2]);var L={display:"flex",alignItems:"center",justifyContent:"center"};var D="#D6D6D6";var N="#F46E67";var R=22;function l(e){var t=e.Component,a=e.Icon,i=e.iconProps,s=e.dangerous,n=void 0!==s&&s,r=e.disabled,o=void 0!==r&&r,l=e.className,c=e.onClick,u=e.onClickCapture,d=e.tooltipText,p=e.ariaLabel,h=void 0===p?d:p,g=(0,A.default)(e,["Component","Icon","iconProps","dangerous","disabled","className","onClick","onClickCapture","tooltipText","ariaLabel"]);var m=(0,I.useState)(false),f=(0,w.default)(m,2),v=f[0],b=f[1];var S=(0,I.useRef)();t=o?"div":t||"button";var y=function e(t){return t?function(){b(false);return t.apply(void 0,arguments)}:t};var _=y(c);var C=y(u);return I.default.createElement(I.default.Fragment,null,I.default.createElement(t,(0,E.default)({style:L,onClick:o?void 0:_,onClickCapture:o?void 0:C,ref:S,onMouseEnter:function e(){return b(true)},onMouseLeave:function e(){return b(false)},"aria-label":h,className:(0,T.default)(l,o&&"disabled-button")},g),I.default.createElement(a,(0,E.default)({width:R,height:R},n?{color:N}:{},o?{color:D}:{},i))),d&&v&&S.current?I.default.createElement(q.Tooltip,{anchor:S.current,isOpen:v,position:"bottom",margin:k,delay:{enter:500,exit:0}},d):null)}l.propTypes={Component:n.default.elementType,Icon:n.default.elementType.isRequired,iconProps:n.default.object,dangerous:n.default.bool,disabled:n.default.bool,className:n.default.string,onClick:n.default.func,onClickCapture:n.default.func,tooltipText:n.default.string,ariaLabel:n.default.string};e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Annotations/constants/seven-one-annotations.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.OVERLAY_NAV_THEME_INDICATOR_KEY=t.HEADER_SECTION_THEME_INDICATOR_KEY=t.SECTION_THEME_INDICATOR_KEY=void 0;var i="section-theme-indicator";t.SECTION_THEME_INDICATOR_KEY=i;var s="header-section-theme-indicator";t.HEADER_SECTION_THEME_INDICATOR_KEY=s;var n="overlay-nav-theme-indicator";t.OVERLAY_NAV_THEME_INDICATOR_KEY=n},"./src/main/webapp/universal/src/apps/App/components/Annotations/constants/transitions.js":function(e,t,a){"use strict";var i={enter:{className:"sqs-surrounding-overlay-container-enter",from:{opacity:0},to:{opacity:1}},leave:{className:"sqs-surrounding-overlay-container-leave",from:{opacity:1},to:{opacity:0}}};var s={surroundingOverlay:i};e.exports=s},"./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/BaseAnnotationController.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var u=i(a("./common/temp/node_modules/@babel/runtime/helpers/objectWithoutProperties.js"));var d=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var p=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var n=a("./src/main/webapp/universal/src/shared/i18n/index.ts"),r=n.t;var o=a("./common/temp/node_modules/lodash/get.js");var h=a("./common/temp/node_modules/lodash/merge.js");var l=a("./common/temp/node_modules/@sqs/utils/style/getBackgroundColor.js");var g=a("./common/temp/node_modules/@sqs/utils/dom/findClosest.js");var m=a("./common/temp/node_modules/@sqs/utils/string/isString.js");var f=a("./common/temp/node_modules/@sqs/utils/color/isDark.js");var v=a("./src/main/webapp/universal/src/shared/constants/Positions.js");var c=a("./src/main/webapp/universal/src/shared/utils/mediaQueries.js"),b=c.isMobile;var S="sqs-frontend-overlay-editor-widget-host";var y=function(){function c(e,t){var n=this;var a=e.Y,i=(0,u.default)(e,["Y"]);(0,d.default)(this,c);(0,p.default)(this,"handleOverlayMouseover",function(e){var t=g(e.target,".".concat(S));var a=n.state.overlayRootNode.getDOMNode();var i=a.contains(t);var s=!(i&&t!==a);n.set("isMouseOver",s)});this.Y=a;this.props=i;var s={rootNode:null,overlayRootNode:t.rootNode,model:null,dirty:false,visible:false,editable:false,alwaysShowAnnotationWhenMouseOver:false,isMouseOver:false,placeAnnotationInside:false,scrollLayoutOnEditingStart:null};this.state=h({},s,t);var r=this.state.rootNode.getDOMNode(),o=r.ownerDocument;this.preview={window:o.defaultView,document:o};this.afterChangeHandlers={};this.eventListeners=[];this.YUIEventListeners=[];this.disabledLinks=[];this.attachEventListeners();var l=this.props.stack.add(function(){});l()}(0,s.default)(c,[{key:"cleanUp",value:function e(){}},{key:"destroy",value:function e(){var t=this.state.rootNode.getDOMNode();t&&t.classList.remove("sqs-layout-dark");var a=this.state.overlayRootNode.getDOMNode();a&&a.classList.remove(S);this.destroyEvents();this.state={};this.preview={};this.afterChangeHandlers={};this.eventListeners=[];this.YUIEventListeners=[];this.disabledLinks=[];this.set("destroyed",true)}},{key:"attachEventListeners",value:function e(){var i=this;this.syncDarkOrLight();var s=this.state.overlayRootNode.getDOMNode();s.classList.add(S);if(b())this.registerEventListener(s,"click",function(e){var t=!i.state.isMouseOver;if(t){var a=function e(t){s.contains(t.target)||i.set("isMouseOver",false)};setTimeout(function(){if(!s||!s.ownerDocument||s.ownerDocument.defaultView)return;s.ownerDocument.body.addEventListener("click",a,{once:true})})}return i.set("isMouseOver",t)});else{this.registerEventListener(s,"mouseenter",function(){return i.set("isMouseOver",true)});this.registerEventListener(s,"mouseleave",function(){return i.set("isMouseOver",false)});this.state.alwaysShowAnnotationWhenMouseOver||this.registerEventListener(s,"mouseover",this.handleOverlayMouseover)}}},{key:"set",value:function e(t,a){if(a===this.state[t])return;this.state[t]=a;var i=this.afterChangeHandlers[t];i&&i.length&&i.forEach(function(e){return e(a)})}},{key:"addAfterChangeHandler",value:function e(t,a){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this;this.afterChangeHandlers[t]||(this.afterChangeHandlers[t]=[]);this.afterChangeHandlers[t].push(a.bind(i))}},{key:"syncDarkOrLight",value:function e(){var a=this.state.rootNode.getDOMNode();if(!a||!this.preview.document.body.contains(a))return;l(a,function(e){var t=f(e);a.classList.toggle("sqs-layout-dark",t);a.classList.toggle("sqs-frontend-overlay-editor-widget-host-light",t)})}},{key:"getId",value:function e(){return this.Y.stamp(this.state.rootNode)}},{key:"getOverlayEditorAlignPoint",value:function e(){var t=this.state.rootNode.getDOMNode();var a=t&&t.getAttribute("data-annotation-alignment");if(!m(a)||0===a.length)return null;var i=["top","left","center","right","bottom"].reduce(function(e,t){e[t]=a.includes(t);return e},{});if(i.top){if(i.left)return v.TOP_LEFT;if(i.right)return v.TOP_RIGHT;if(i.center)return v.TOP_CENTER}else if(i.bottom){if(i.left)return v.BOTTOM_LEFT;if(i.right)return v.BOTTOM_RIGHT;if(i.center)return v.BOTTOM_CENTER}return null}},{key:"hasPermission",value:function e(){return true}},{key:"getClassificationLabel",value:function e(){return"Base"}},{key:"getActionList",value:function e(){return[]}},{key:"invokeOnModelPromise",value:function e(i){var s=this;var t=new Promise(function(t,a){var e=o(s.state.model,i);e?s.state.model[i](function(e){e?a(e):t()}):t()});t.then(function(){return s.set("dirty",false)});t.catch(function(e){var t=o(e,"responseJSON.message",e);return new s.Y.Squarespace.Widgets.Alert({"strings.title":r("Error Saving"),"strings.message":t||r("Please try saving again.")})});return t}},{key:"revert",value:function e(){return this.invokeOnModelPromise("load")}},{key:"save",value:function e(){return this.invokeOnModelPromise("save")}},{key:"syncScroll",value:function e(t){if(t){var a=this.state.rootNode.getDOMNode();var i=a.querySelectorAll(".sqs-block");var n=this.preview.window.innerHeight;var s=Array.from(i).find(function(e){var t=e.getBoundingClientRect();var a=Math.min(n,t.bottom)-Math.max(0,t.top);var i=t.top>=0;var s=a>=n;return t.height>0&&(i||s)})||i[i.length-1];if(!s)return;this.set("scrollLayoutOnEditingStart",{anchorNodeId:s.getAttribute("id"),anchorNodeOffsetTop:s.getBoundingClientRect().top})}else this.set("scrollLayoutOnEditingStart",null)}},{key:"setLayoutNodeHeight",value:function e(t){if(!this.state.rootNode)return;if(t){var a=this.state.rootNode.getDOMNode();var i=a.getBoundingClientRect().height;a.style.minHeight=i+"px"}else this.clearLayoutNodeHeight()}},{key:"clearLayoutNodeHeight",value:function e(){if(!this.state.rootNode)return;var t=this.state.rootNode.getDOMNode();t.style.minHeight=null}},{key:"onGlobalEvent",value:function e(t,a){var i=this;this.registerYUIEventListener(this.Y.Global.on(t,function(e){e.sourceId&&!i.matchesCollectionId(e.sourceId)||a.call(i,e)}))}},{key:"matchesCollectionId",value:function e(t){return this.state.collection.get("id")===t}},{key:"disableLinkNavigation",value:function e(){var t=this;this.disabledLinks=Array.from(this.state.rootNode.getDOMNode().querySelectorAll("a[href]"));this.disabledLinks.map(function(e){return e.addEventListener("click",t.haltEvent)})}},{key:"reenableLinkNavigation",value:function e(){var t=this;this.disabledLinks.map(function(e){return e.removeEventListener("click",t.haltEvent)});this.disabledLinks=[]}},{key:"haltEvent",value:function e(t){t.stopPropagation();t.preventDefault()}},{key:"registerEventListener",value:function e(t,a,i){t.addEventListener(a,i);this.eventListeners.push({node:t,eventName:a,callback:i})}},{key:"registerYUIEventListener",value:function e(t){this.YUIEventListeners.push(t)}},{key:"destroyEvents",value:function e(){this.eventListeners.forEach(function(e){var t=e.node,a=e.eventName,i=e.callback;t.removeEventListener(a,i)});this.YUIEventListeners.forEach(function(e){return e.detach()})}}]);return c}();e.exports=y},"./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/BlockFieldAnnotationController.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/get.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var c=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var u=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));function d(s){var n=p();return function e(){var t=(0,u.default)(s),a;if(n){var i=(0,u.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,c.default)(this,a)}}function p(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var s=a("./src/main/webapp/universal/src/shared/i18n/index.ts"),h=s.t;var g=a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/LayoutBaseAnnotationController.js");var m=a("./src/main/webapp/universal/src/shared/utils/CMSV7Events.js");var f=function(e){(0,l.default)(s,e);var i=d(s);function s(e,t){var a=t.rootNode;(0,n.default)(this,s);return i.call(this,e,{rootNode:a})}(0,r.default)(s,[{key:"loadModel",value:function e(t){var a=this;var i=this.state.rootNode.getDOMNode();var s=Array.from(i.classList).find(function(e){return e.startsWith("columns-")}).substr("columns-".length);s=parseInt(s,10);this.set("columns",s);var n=new this.Y.Squarespace.Models.BlockField({widgetName:i.id,columns:s});n.load(function(){a.set("model",n);var e=a.getPageLayout();e.get("columns")!==a.state.columns&&a.Y.SQS.LayoutEngine.PageLayoutTools.convertLayoutToNewColumnCount(e,a.state.columns);t()})}},{key:"getPageLayout",value:function e(){return this.state.model.get("data").get("layout")}},{key:"getBlockFieldId",value:function e(){return this.state.rootNode.getAttribute("id")}},{key:"getClassificationLabel",value:function e(){var t=(0,o.default)((0,u.default)(s.prototype),"getClassificationLabel",this).call(this);if(!t)return h("Region #")+this.getBlockFieldId();return t}},{key:"trackEditClick",value:function e(){m.annotationClick("block-field-edit",this.getClassificationLabel())}}]);return s}(g);e.exports=f},"./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/BlogAnnotationController.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var d=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/get.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));function p(s){var n=c();return function e(){var t=(0,l.default)(s),a;if(n){var i=(0,l.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,o.default)(this,a)}}function c(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var u=a("./src/main/webapp/universal/src/shared/i18n/index.ts"),h=u.t;var g=a("./common/temp/node_modules/lodash/merge.js");var m=a("./common/temp/node_modules/@sqs/utils/string/isString.js");var f=a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/CollectionBaseAnnotationController.js");var v=function(e){(0,r.default)(u,e);var c=p(u);function u(e,t){var a;var i=t.rootNode,s=t.overlayRootNode,n=t.collection;(0,d.default)(this,u);var r={strings:{label:h("Blog"),nestedItemLabel:h("Post"),edit:h("Manage Posts")},trackingIdentifier:"post",shimmySelector:".sqs-content-manager-blog"};var o=g({},r,{rootNode:i,overlayRootNode:s,collection:n});a=c.call(this,e,o);a.bindNestedContentItems();var l=a.preview.window.Static.SQUARESPACE_CONTEXT.itemId;if(m(l)){a.hasItemId=true;a.set("showEditButton",true)}return a}(0,s.default)(u,[{key:"getActionList",value:function e(){if(this.hasItemId)return[];return(0,n.default)((0,l.default)(u.prototype),"getActionList",this).call(this)}}]);return u}(f);e.exports=v},"./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/BusinessInformationAnnotationController.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var c=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));function u(s){var n=d();return function e(){var t=(0,c.default)(s),a;if(n){var i=(0,c.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,l.default)(this,a)}}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var s=a("./src/main/webapp/universal/src/shared/i18n/index.ts"),p=s.t;var h=a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/BaseAnnotationController.js");var g=a("./src/main/webapp/universal/src/shared/utils/CMSV7Events.js");var m=function(e){(0,o.default)(s,e);var i=u(s);function s(e,t){var a=t.rootNode;(0,n.default)(this,s);return i.call(this,e,{rootNode:a})}(0,r.default)(s,[{key:"getClassificationLabel",value:function e(){return p("Business Information")}},{key:"getActionList",value:function e(){return[{name:"edit",label:p("Edit"),handleClick:this.handleEditClick}]}},{key:"handleEditClick",value:function e(){g.annotationClick("business-information");this.Y.Squarespace.Singletons.Location.go("/config/settings/business-information")}}]);return s}(h);e.exports=m},"./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/CalendarAnnotationController.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var u=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));function n(s){var n=l();return function e(){var t=(0,o.default)(s),a;if(n){var i=(0,o.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,r.default)(this,a)}}function l(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var c=a("./src/main/webapp/universal/src/shared/i18n/index.ts"),d=c.t;var p=a("./common/temp/node_modules/lodash/merge.js");var h=a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/CollectionBaseAnnotationController.js");var g=function(e){(0,s.default)(c,e);var l=n(c);function c(e,t){var a;var i=t.rootNode,s=t.overlayRootNode,n=t.collection;(0,u.default)(this,c);var r={strings:{label:d("Events"),nestedItemLabel:d("Event"),edit:d("Manage Events")},trackingIdentifier:"event",shimmySelector:".sqs-content-manager-calendar"};var o=p({},r,{rootNode:i,overlayRootNode:s,collection:n});a=l.call(this,e,o);a.bindNestedContentItems();return a}return c}(h);e.exports=g},"./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/CollectionBaseAnnotationController.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var c=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));function u(s){var n=d();return function e(){var t=(0,c.default)(s),a;if(n){var i=(0,c.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,r.default)(this,a)}}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var n=a("./src/main/webapp/universal/src/shared/i18n/index.ts"),p=n.t;var h=a("./common/temp/node_modules/lodash/merge.js");var g=a("./common/temp/node_modules/lodash/isObject.js");var m=a("./common/temp/node_modules/@sqs/utils/string/isString.js");var f=a("./src/main/webapp/universal/src/shared/constants/Constants.js"),v=f.IGNORED_ITEM_ANNOTATION_SELECTORS;var b=a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/NodeTextEditorController.js");var S=a("./src/main/webapp/universal/src/apps/App/shared/actions/AnnotationsActions.js");var y=a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/ContentItemMinimalAnnotationController.js");var _=a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/BaseAnnotationController.js");var C=a("./src/main/webapp/universal/src/apps/App/components/Annotations/mixins/withCollectionBaseMixin.js");var E=a("./src/main/webapp/universal/src/shared/utils/CMSV7Events.js");var w='[data-content-field="title"]';var A=function(e){(0,l.default)(r,e);var n=u(r);function r(e,t){var a;(0,o.default)(this,r);var i={collection:null,shimmySelector:".sqs-navigation-bar",showAddItemButton:true,showEditButton:true,strings:{editText:p("Edit")}};var s=h({},i,t);a=n.call(this,e,s);a.toggleEditButton();a.attachAfterChangeListeners();a.examineAndInitializeMainImageToggle(a.state.rootNode);a.containedMetaFields=a.getContainedMetaFields();return a}(0,s.default)(r,[{key:"toggleEditButton",value:function e(){var t=this.preview.window.Static.SQUARESPACE_CONTEXT.itemId;m(t)&&this.set("showEditButton",false)}},{key:"attachAfterChangeListeners",value:function e(){var t=this;this.addAfterChangeHandler("editable",function(){t.syncEditor();t.syncEditorOverlay()},this)}},{key:"bindNestedContentItems",value:function e(){var r=this;this.state.rootNode.all("[data-item-id]:not(.sqs-simple-like):not(.sqs-add-to-cart-button)").each(function(t){var e=v.some(function(e){return t.hasClass(e)});if(e)return;var a=t.getDOMNode().getAttribute("data-item-id");var i=r.Y.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Models.ContentItem");var s=r.Y.Squarespace.AttrValidators.isInstanceOf(i);var n=new i({id:a,collectionId:r.state.collection.get("id")});r.props.registerAnnotationController(y,{rootNode:t,model:s(n,"model")?n:null,collection:r.state.collection,strings:{label:r.state.strings.nestedItemLabel},trackingIdentifier:r.state.trackingIdentifier})})}},{key:"renderInlineMetaDataEditors",value:function e(){var t=this;var a=this.state.rootNode.getDOMNode();var i=this.state.collection;this.disableLinkNavigation();var s=a.querySelector(w);if(s){this.titleEditor=new b(this.Y,{hostNode:s,data:i.get("title"),placeholder:p("Enter a page title…")});this.titleEditor.addDataChangeHandler(function(){return t.set("dirty",true)})}var n=a.querySelector('[data-content-field="description"]');if(n){this.descriptionEditor=new b(this.Y,{hostNode:n,data:i.get("description.html")||"",placeholder:p("Enter a page description…"),multiline:true});this.descriptionEditor.addDataChangeHandler(function(){return t.set("dirty",true)})}}},{key:"destroyInlineMetaDataEditors",value:function e(){if(this.titleEditor){var t=this.titleEditor.hostNode;t.innerHTML=this.state.collection.get("title");this.titleEditor.destroy();this.titleEditor=null}if(this.descriptionEditor){var a=this.descriptionEditor.hostNode;a.innerHTML=this.state.collection.get("description.html");this.descriptionEditor.destroy();this.descriptionEditor=null}this.reenableLinkNavigation()}},{key:"getClassificationLabel",value:function e(){return this.state.strings.label}},{key:"getActionList",value:function e(){var a=this;var t=[];var i=this.state.collection;this.state.showAddItemButton&&t.push({name:"add",label:i.getTemplateConfiguration().get("addText"),handleClick:this.handleAddContentRequest});if(this.state.showEditButton)t.push({name:"edit",label:this.state.strings.edit,handleClick:function e(){E.annotationClickCollection("collection-panel",i.get("typeName"));a.navigateToCollection({shimmy:a.state.shimmySelector})}});else{var s=this.containedMetaFields;s.size()>0&&t.push({name:"edit",label:p("Edit"),handleClick:function e(){E.annotationClickCollection("collection-edit-inline-metadata",i.get("typeName"));var t=function e(){a.state.collection.load(function(){a.set("editable",true)})};i.get("isDemoCollection")?a.cloneCollection().then(t):t()}})}var n=this.getMainImageToggleAction();g(n)&&t.push(n);var r=this.getCollectionSettingsAction();g(r)&&t.push(r);return t}},{key:"getContainedMetaFields",value:function e(){var t=this;var a=[w,'[data-content-field="description"]'];var i=this.state.rootNode;if(i.test(a.join(",")))return new this.Y.NodeList(i);var s=i.all(a.join(","));s=s.filter(function(e){if(t.Y.one(e).ancestor("[data-item-id]"))return false;return true});return s}},{key:"navigateToCollection",value:function e(t){var a=this.state.collection;var i=a?a.get("id"):"";this.Y.Squarespace.Singletons.Location.goToCollection(i,t)}},{key:"syncEditor",value:function e(){this.state.editable?this.renderInlineMetaDataEditors():this.destroyInlineMetaDataEditors()}},{key:"syncEditorOverlay",value:function e(){var t=this;if(!this.state.editable)return S.hideEditorOverlay();S.showEditorOverlay({buttons:[{name:"save",label:p("Save"),handleClick:function e(){return t.props.fireRequestSaveChangesEvent()}},{name:"cancel",label:p("Cancel"),handleClick:function e(){return t.props.fireRequestDiscardChangesEvent()}}],className:"sqs-content-item-minimal-node-header",hostNode:this.state.rootNode.getDOMNode(),label:p("Editing &lsquo;{sub1}&rsquo;",{sub1:this.state.collection.get("title")}),trackButtonClick:this.props.trackButtonClick})}},{key:"save",value:function e(){var t=this;var i=this.state.collection;this.titleEditor&&i.set("title",this.titleEditor.data);this.descriptionEditor&&i.set("description",{html:this.descriptionEditor.data});var e=new Promise(function(t,a){i.save({silent:true},function(e){e?a(e):t()})});e.then(function(){t.set("editable",false);t.set("dirty",false)});return e}},{key:"revert",value:function e(){var i=this;var e=new Promise(function(t,a){i.state.collection.load(function(e){e?a(e):t()})});e.then(function(){i.set("editable",false);i.set("dirty",false)});return e}}]);return r}(C(_));e.exports=A},"./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/ConnectedAccountsAnnotationController.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var c=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));function u(s){var n=d();return function e(){var t=(0,c.default)(s),a;if(n){var i=(0,c.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,l.default)(this,a)}}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var s=a("./src/main/webapp/universal/src/shared/i18n/index.ts"),p=s.t;var h=a("./src/main/webapp/universal/src/apps/App/shared/stores/WebsiteRoleStore.js");var g=a("./src/main/webapp/frontend/packages/enums/WebsiteRole.js"),m=g.EDITOR,f=g.STORE_MANAGER;var v=a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/BaseAnnotationController.js");var b=a("./src/main/webapp/universal/src/shared/utils/CMSV7Events.js");var S=function(e){(0,o.default)(s,e);var i=u(s);function s(e,t){var a=t.rootNode;(0,n.default)(this,s);return i.call(this,e,{rootNode:a})}(0,r.default)(s,[{key:"hasPermission",value:function e(){return!h.hasRole(m)&&!h.hasRole(f)}},{key:"getClassificationLabel",value:function e(){return p("Social Links")}},{key:"getActionList",value:function e(){return[{name:"edit",label:p("Edit"),handleClick:this.handleEditClick}]}},{key:"handleEditClick",value:function e(){b.annotationClick("social-links");this.Y.Squarespace.Singletons.Location.go("/config/settings/social-links",{shimmy:".sqs-social-account-settings"})}}]);return s}(v);e.exports=S},"./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/ContentItemMinimalAnnotationController.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var g=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var m=i(a("./common/temp/node_modules/@babel/runtime/helpers/assertThisInitialized.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var f=i(a("./common/temp/node_modules/@babel/runtime/helpers/get.js"));var v=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var b=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));function o(s){var n=l();return function e(){var t=(0,v.default)(s),a;if(n){var i=(0,v.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,r.default)(this,a)}}function l(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var c=a("./src/main/webapp/universal/src/shared/i18n/index.ts"),S=c.t;var y=a("./common/temp/node_modules/lodash/merge.js");var _=a("./common/temp/node_modules/lodash/get.js");var u=a("./src/main/webapp/universal/src/shared/constants/Positions.js");var C=a("./common/temp/node_modules/@sqs/utils/string/isString.js");var E=a("./src/main/webapp/frontend/packages/enums/RecordType.js");var w=a("./src/main/webapp/frontend/packages/enums/Flag.js");var A=a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts");var T=a("./src/main/webapp/universal/src/apps/App/shared/actions/AnnotationsActions.js");var I=a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/NodeTextEditorController.js");var q=a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/LayoutEngineEditorController.js");var k=a("./src/main/webapp/universal/src/apps/App/shared/stores/AuthenticatedAccountStore.js");var d=a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/BaseAnnotationController.js");var p=a("./src/main/webapp/universal/src/apps/App/components/Annotations/mixins/withCollectionBaseMixin.js");var L=a("./src/main/webapp/universal/src/shared/utils/CMSV7Events.js");var D=a("./src/main/webapp/universal/src/apps/App/shared/actions/FrameActions.js");var N=a("./src/main/webapp/universal/src/shared/utils/error-reporter/global-sentry.ts");var R=a("./src/main/webapp/universal/src/shared/utils/commerce/analytics/trackProductEditor.ts");var O=a("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/ContentBrowserAPI.js").default;var P="layout-add-block-button";var h=function(e){(0,n.default)(h,e);var p=o(h);function h(e,t){var a,i,r;var s=t.rootNode,n=t.model,o=t.collection,l=t.strings,c=t.trackingIdentifier;(0,g.default)(this,h);var u={collection:null,model:null,placeAnnotationInside:true,nodeHeaderTitle:S("Post"),strings:{label:S("Generic Item")},pageLayout:new e.Y.SQS.LayoutEngine.Models.PageLayout({collectionId:o.get("id"),parentItemId:n.get("id")}),trackingIdentifier:"generic"};var d=y({},u,{rootNode:s,model:n,collection:o,strings:l,trackingIdentifier:c});r=p.call(this,e,d);(0,b.default)((0,m.default)(r),"destroy",function(){r.state.model&&r.state.model.destroy();(0,f.default)((a=(0,m.default)(r),(0,v.default)(h.prototype)),"destroy",a).call(a)});(0,b.default)((0,m.default)(r),"loadContentItem",function(){return new Promise(function(s,e){if(!r.state.model){e(new Error("Cannot load content item"));return}r.state.model.load({forceReload:true},function(){var e=r.state,t=e.model,a=e.pageLayout;var i=t.get("title");C(i)&&i.length>0&&r.set("nodeHeaderTitle",i);a.setAttrs(t.get("body.layout"));s()})})});(0,b.default)((0,m.default)(r),"editItem",function(){!r.state.destroyed&&r.hasResourcesToInlineEdit()?r.startInlineEditing():r.showContentItemEditor()});(0,b.default)((0,m.default)(r),"hasResourcesToInlineEdit",function(){var e=r.state.model;if(!e||e.get("recordType")!==E.TEXT)return false;return r.hasNodesForFrontendEditing()});(0,b.default)((0,m.default)(r),"startInlineEditing",function(){r.set("editable",true)});(0,b.default)((0,m.default)(r),"syncEditorOverlay",function(){if(!r.state.editable)return T.hideEditorOverlay();var e=k.isTutorialCompleted(P);var t=S("Add Block");var a=[{name:"save",label:S("Save"),handleClick:function e(){return r.props.fireRequestSaveChangesEvent(r.state.model)}},{name:"cancel",label:S("Cancel"),handleClick:function e(){return r.props.fireRequestDiscardChangesEvent()}},{name:"add",label:e?"":t,title:S("Add Block"),className:"sqs-float-right sqs-annotation-add-block-button",icon:e,handleClick:function e(t){k.markTutorialCompleted(P);r.Y.Squarespace.LayoutEngine.EditController.getInstance().showBlockMenu({align:{node:r.Y.one(t.target),points:[r.Y.WidgetPositionAlign.TC,r.Y.WidgetPositionAlign.TR]},layoutNode:r.state.rootNode.one('.sqs-layout[data-type="item"]')})}},{name:"settings",label:S("Settings"),className:"sqs-float-right",handleClick:function e(){r.showContentItemEditor({onlySetAttrsOnSave:true})}}];T.showEditorOverlay({buttons:a,className:"sqs-content-item-minimal-node-header",hostNode:r.state.rootNode.getDOMNode(),label:S("Editing &lsquo;{sub1}&rsquo;",{sub1:r.state.nodeHeaderTitle.trim()}),scrollLayoutOnEditingStart:r.state.scrollLayoutOnEditingStart,trackButtonClick:r.props.trackButtonClick,updateAfterScroll:r.clearLayoutNodeHeight.bind((0,m.default)(r))})});(0,b.default)((0,m.default)(r),"save",function(){r.syncInlineEditorsToEditingItem();return(0,f.default)((i=(0,m.default)(r),(0,v.default)(h.prototype)),"save",i).call(i)});(0,b.default)((0,m.default)(r),"onCancel",function(){r.set("dirty",false)});(0,b.default)((0,m.default)(r),"revert",function(){var e=function e(t){var a=_(t,"message",_(t,"responseJSON.message"));return new r.Y.Squarespace.Widgets.Alert({"strings.title":S("Error Saving"),"strings.message":a||S("Please try saving again.")})};var t=new Promise(function(e,t){r.state.model?r.state.model.resetToLastRead(e,t):t(new Error("No content item model to revert."))});return t.then(r.onCancel).catch(e)});(0,b.default)((0,m.default)(r),"syncInlineEditorsToEditingItem",function(){var e=r.state.model;if(!e){N.captureException(new Error("Missing item, cannot sync inline editors"));return}r.titleEditor&&e.set("title",r.titleEditor.data);r.bodyEditor&&e.set("body",{layout:r.state.pageLayout.toJSON()})});(0,b.default)((0,m.default)(r),"showContentItemEditor",function(e){var t;var a=r.state.model;if(!a){N.captureException(new Error("Missing item, cannot show content item editor"));return}if(A.isFeatureEnabled(w.EVENTS_PANEL_70)&&O.isEvents(null===(t=r.state.collection)||void 0===t?void 0:t.toJSON())){O.openEventModal70(window.top.Y,a.get("collectionId"),a.get("id"));return}var i=r.Y.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.ContentItemEditorFactory");r.syncInlineEditorsToEditingItem();var s=i.getEditor(a);var n=new s(r.Y.merge(e,{model:a}));n.once(["savingClose","nonSavingClose"],function e(t){if(!this.hasResourcesToInlineEdit(a)){window.setTimeout(function(){this.Y.Squarespace.Singletons.Location.requestFrameRefresh()}.bind(this),0);return}if(t.type.indexOf("savingClose")>-1){this.syncEditor();this.set("dirty",true)}n.get("autoSaveAnnotation")&&this.props.fireRequestSaveChangesEvent(this.state.model)},(0,m.default)(r));n.show()});(0,b.default)((0,m.default)(r),"syncEditor",function(){r.state.editable?r.renderInlineEditors():r.destroyInlineEditors()});(0,b.default)((0,m.default)(r),"revertPageLayout",function(){var e=r.state,t=e.model,a=e.pageLayout;var i=t.get("body.layout");a.setAttrs(i);return a});(0,b.default)((0,m.default)(r),"destroyInlineEditors",function(){if(r.titleEditor){var e=r.titleEditor.hostNode;r.state.model&&(e.innerHTML=r.state.model.get("title"));r.titleEditor.destroy();r.titleEditor=null}r.reenableLinkNavigation();r.state.model&&r.state.model.detachAll();if(r.bodyEditor){var t=r.bodyEditor.hostNode;r.bodyEditor.destroy();r.bodyEditor=null;var a=r.Y.Squarespace.LayoutEngine.EditController.getInstance();a.pluginLayoutBuilder(r.Y.one(t),r.revertPageLayout());a.destroyLayoutBuilder(r.Y.one(t))}});(0,b.default)((0,m.default)(r),"renderInlineEditors",function(){var e=r.state.rootNode;r.destroyInlineEditors();r.disableLinkNavigation();var t={editorUid:r.Y.guid()};var a=e.one('[data-content-field="title"]');if(a&&r.state.model){r.titleEditor=new I(r.Y,{hostNode:a.getDOMNode(),data:r.state.model.get("title"),placeholder:S("Enter a post title…"),multiline:false});r.titleEditor.addDataChangeHandler(function(e){r.set("dirty",true);r.state.model.set("title",e,t)})}var i=e.one('.sqs-layout[data-type="item"]');if(i){var s=e.one('.sqs-layout[data-type="promoted-block"]');s&&s.hide();r.bodyEditor=new q(r.Y,{hostNode:i.getDOMNode(),pageLayout:r.revertPageLayout(),startupBlockId:r.state.startupBlockId});r.bodyEditor.addDirtyLayoutDataHandler(function(e){if(e.editorUid)return;r.set("dirty",true);r.state.model.set("body",{layout:r.bodyEditor.pageLayout.toJSON()},t)})}if(!r.afterModelChangeHandler&&r.state.model){r.afterModelChangeHandler=r.state.model.after("change",r.afterModelChange,(0,m.default)(r),t);r.registerYUIEventListener(r.afterModelChangeHandler)}});r.isItemView=Boolean(r.preview.window.Static.SQUARESPACE_CONTEXT.itemId);r.addAfterChangeHandler("editable",r.afterEditableChange);r.registerYUIEventListener(r.state.rootNode.delegate("dblclick",r.handleDblClick,".sqs-block",(0,m.default)(r)));return r}(0,s.default)(h,[{key:"afterEditableChange",value:function e(t){this.syncScroll(t);this.setLayoutNodeHeight(t);this.syncEditor();this.syncEditorOverlay();t&&this.set("startupBlockId",null)}},{key:"handleDblClick",value:function e(t){t.halt();if(!this.state.visible||this.state.editable)return;var a=t.target;var i=a.hasClass(".sqs-block")?a:a.ancestor(".sqs-block");i&&this.set("startupBlockId",i.getAttribute("id"));this.requestEditFlowEntrance()}},{key:"getOverlayEditorAlignPoint",value:function e(){return u.TOP_RIGHT}},{key:"getActionList",value:function e(){var i=this;return[{name:"edit",label:S("Edit"),handleClick:function e(){L.annotationClickItem("item-edit",i.state.trackingIdentifier);var t=i.state.model.get("collectionId");var a=O.getCollection(t);O.isProducts(a)&&R.trackClickEditProduct("cms-page-preview");i.handleEditClick()}}]}},{key:"getClassificationLabel",value:function e(){return this.state.strings.label}},{key:"requestEditFlowEntrance",value:function e(){this.handleEditClick()}},{key:"handleEditClick",value:function e(){var t=this;var a=this.state,i=a.collection,s=a.model;if(i.get("isDemoCollection")){i.cloneToNewCollectionWithItem(s.get("id"),{silent:true}).then(function(e){t.props.registerActionOnNextLoad({action:"enterPostEditFlow",options:{}});D.setUrl(e.itemFullUrl)});return}this.loadContentItem().then(this.editItem)}},{key:"hasNodesForFrontendEditing",value:function e(){var t=this.state.rootNode;var a=t.all('[data-content-field="title"]');var i=a.size()>0;var s=t.all('.sqs-layout[data-type="item"]');var n=s.size()>0;if(this.isItemView)return n;if(!this.isItemView)return i&&n;return false}},{key:"afterModelChange",value:function e(t,a){if(t.editorUid===a.editorUid||t.changed.active)return;t.changed.title&&this.titleEditor&&this.titleEditor.setData(t.changed.title.newVal,{silent:true});t.changed.body&&t.changed.body.newVal.layout&&this.bodyEditor&&this.bodyEditor.pageLayout.setAttrs(t.changed.body.newVal.layout,{editorUid:t.editorUid||a.editorUid,forceRefresh:!!t.editorUid});this.set("dirty",true)}},{key:"previewLayout",value:function e(t){var a=this.Y.Squarespace.LayoutEngine.EditController.getInstance();var i=this.state.rootNode.one('.sqs-layout[data-type="item"]');a.pluginLayoutBuilder(i,t);a.destroyLayoutBuilder(i)}}]);return h}(p(d));e.exports=h},"./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/FooterSectionsAnnotationController.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/assertThisInitialized.js"));var c=i(a("./common/temp/node_modules/@babel/runtime/helpers/get.js"));var u=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var d=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var p=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var h=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var g=a("./src/main/webapp/universal/src/shared/i18n/index.ts");var m=a("./src/main/webapp/universal/src/shared/constants/LayoutEngineClassnames.js");var f=i(a("./src/main/webapp/universal/src/apps/App/shared/constants/SectionsArea.js"));var v=i(a("./src/main/webapp/universal/src/shared/utils/CMSV7Events.js"));var b=i(a("./src/main/webapp/universal/src/apps/App/shared/stores/FooterSectionsStore.js"));var S=i(a("./src/main/webapp/universal/src/apps/App/shared/actions/FooterSectionsActions.js"));var y=i(a("./src/main/webapp/universal/src/apps/App/shared/stores/PageSectionsStore.js"));var _=i(a("./src/main/webapp/universal/src/apps/App/shared/actions/SiteHeaderFooterActions.js"));var C=a("./src/main/webapp/universal/src/apps/App/shared/actions/SectionsPersistenceHelper.js");var s=i(a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/SectionsAnnotationController.js"));function n(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function E(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?n(Object(a),true).forEach(function(e){(0,h.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function w(s){var n=A();return function e(){var t=(0,p.default)(s),a;if(n){var i=(0,p.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,d.default)(this,a)}}function A(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var T=function(e){(0,u.default)(n,e);var s=w(n);function n(e,t){var a;(0,r.default)(this,n);a=s.call(this,E({},e,{sectionsArea:f.default.FOOTER_SECTIONS}),t);(0,h.default)((0,l.default)(a),"name","FooterSectionsAnnotationController");(0,h.default)((0,l.default)(a),"scrollFooterIntoView",function(){if(!a.isFrameRealAndIfNotDestroy())return;var e=a.getRootEl().ownerDocument;e.defaultView.innerHeight+e.defaultView.scrollY<e.body.scrollHeight-10&&e.defaultView.scrollTo(0,e.body.clientHeight)});S.default.setControllerInitialized(true);a.detachFooterSectionsActionListener=b.default.listen(function(){if(!a.isFrameRealAndIfNotDestroy())return;var e=a.getSectionStoreState();if(e.isPageEditing!==a.state.isPageEditing){a.set("isPageEditing",e.isPageEditing);e.isEditing||e.isPageEditing?a.appendEmptyPreviewSectionNodeIfNeeded():a.cleanUpEmptySectionNode()}a.onSectionStoreUpdate(e)});a.addAfterChangeHandler("isMouseOver",a.toggleScrim,(0,l.default)(a));a.addAfterChangeHandler("isEditing",a.toggleScrim,(0,l.default)(a));var i=a.getRootEl();i.setAttribute("data-test","footer");i.classList.add(m.DISABLE_DRAG_SELECTION_CLASSNAME);return a}(0,o.default)(n,[{key:"toggleScrim",value:function e(){var t=y.default.getState(),a=t.isGalleryContentEditorOpen;if(a)return;var i=this.state,s=i.isPageEditing,n=i.isEditing,r=i.isMouseOver,o=i.isScrimEnabled;s&&!n&&r&&!o?this.showScrim():!o||s&&r&&!n||this.hideScrim()}},{key:"initializeEditors",value:function e(){this.scrollFooterIntoView();(0,c.default)((0,p.default)(n.prototype),"initializeEditors",this).call(this)}},{key:"cleanUp",value:function e(){(0,c.default)((0,p.default)(n.prototype),"cleanUp",this).call(this);this.cleanUpEmptySectionNode()}},{key:"loadLatestSectionData",value:function e(){return _.default.load()}},{key:"getSectionStoreState",value:function e(){return b.default.getState()}},{key:"getSectionActions",value:function e(){return S.default}},{key:"createEmptySectionNode",value:function e(){return this.createPreviewEmptySectionNode()}},{key:"createPreviewEmptySectionNode",value:function e(){return this.buildEmptySectionNode({title:(0,g.t)("Add Site Footer"),hasButton:true})}},{key:"handleCloseCatalog",value:function e(){(0,c.default)((0,p.default)(n.prototype),"handleCloseCatalog",this).call(this);if(this.isReturnToPageEditModeOnCloseEmptyCatalog){this.isReturnToPageEditModeOnCloseEmptyCatalog=false;(0,C.switchFromFooterEditingToPageEditing)()}}},{key:"onScrimClicked",value:function e(t){this.isReturnToPageEditModeOnCloseEmptyCatalog=false;if(this.state.isEmpty){this.isReturnToPageEditModeOnCloseEmptyCatalog=true;this.showSectionCatalog()}(0,C.switchFromPageEditingToFooterEditing)();v.default.clickEditSiteFooter()}},{key:"destroy",value:function e(){(0,c.default)((0,p.default)(n.prototype),"destroy",this).call(this);this.detachFooterSectionsActionListener();S.default.setControllerInitialized.defer(false)}}]);return n}(s.default);t.default=T;(0,h.default)(T,"scrimButton",{text:(0,g.t)("Edit Footer"),fadeOutDuration:100});(0,h.default)(T,"sectionAreaName","footer");e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/GalleryAnnotationController.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var c=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));function n(s){var n=l();return function e(){var t=(0,o.default)(s),a;if(n){var i=(0,o.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,r.default)(this,a)}}function l(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var u=a("./src/main/webapp/universal/src/shared/i18n/index.ts"),d=u.t;var p=a("./common/temp/node_modules/lodash/merge.js");var h=a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/CollectionBaseAnnotationController.js");var g=function(e){(0,s.default)(l,e);var o=n(l);function l(e,t){var a=t.rootNode,i=t.overlayRootNode,s=t.collection;(0,c.default)(this,l);var n={strings:{label:d("Gallery"),edit:d("Edit")},shimmySelector:".sqs-content-manager-gallery"};var r=p({},n,{rootNode:a,overlayRootNode:i,collection:s});return o.call(this,e,r)}return l}(h);e.exports=g},"./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/IndexAnnotationController.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var d=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/get.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var p=i(a("./common/temp/node_modules/lodash/isObject.js"));var h=i(a("./common/temp/node_modules/lodash/merge.js"));var g=a("./src/main/webapp/universal/src/shared/i18n/index.ts");var m=i(a("./common/temp/node_modules/@sqs/utils/string/isString.js"));var f=i(a("./common/temp/node_modules/@sqs/utils/scroll/getDocScrollNode.js"));var v=i(a("./src/main/webapp/frontend/packages/enums/IndexType.js"));var b=a("./common/temp/node_modules/@sqs/styles/variables/baseDamask.js");var c=i(a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/CollectionBaseAnnotationController.js"));function S(s){var n=u();return function e(){var t=(0,l.default)(s),a;if(n){var i=(0,l.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,o.default)(this,a)}}function u(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var y=function(e){(0,r.default)(u,e);var c=S(u);function u(e,t){var a;var i=t.rootNode,s=t.overlayRootNode,n=t.collection;var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,d.default)(this,u);var o={childAnnotationControllers:[],shimmySelector:'[data-collection-id="'.concat(n.get("id"),'"]'),showAddItemButton:false,strings:{label:(0,g.t)("Index"),edit:(0,g.t)("Edit")}};var l=(0,h.default)({},o,r,{rootNode:i,overlayRootNode:s,collection:n});a=c.call(this,e,l);a.attachHashChangeListener();a.syncChildCollectionAnnotationControllers();a.renderPlaceholder();return a}(0,s.default)(u,[{key:"destroy",value:function e(){if(this.hasPlaceholder()){this.placeholder.remove();this.placeholder.destroy();this.placeholder=null}if(this.hashChangeEvt){this.hashChangeEvt.detach();this.hashChangeEvt=null}(0,n.default)((0,l.default)(u.prototype),"destroy",this).call(this)}},{key:"attachHashChangeListener",value:function e(){var t=this;this.hashChangeEvt=this.Y.one(this.preview.window).on("hashchange",function(e){t.evaluateCollectionFromHash(e.newHash)});this.evaluateCollectionFromHash(this.preview.window.location.hash)}},{key:"_getCollectionByHash",value:function e(a,i){var s=this;this.Y.Squarespace.ContentCollectionCache.toArray().find(function(e){var t=s.Y.Squarespace.Lang.sub(a,{collection:e.toJSON()});return t===i})}},{key:"evaluateCollectionFromHash",value:function e(t){if(0===t.length)return;var a=this.state.collection.getTemplateConfiguration();var i=this.state.collection.getTemplateConfiguration().get("index");var s=a.get("indexCollectionHashUrlTemplate");if(!i||!s||!(0,m.default)(s))return;t=t.startsWith("#")?t:"#".concat(t);var n=this._getCollectionByHash(s,t);!n&&this.hasFoundCollectionsBefore?n=this.state.collection:n&&!this.hasFoundCollectionsBefore&&(this.hasFoundCollectionsBefore=true);if(!n)return;n.load();this.navigateToCollection({},n)}},{key:"renderPlaceholder",value:function e(){if(this.isEmptyIndex()&&0===this.state.rootNode.get("innerText").trim().length){this.placeholder=this.getPlaceHolder();this.state.rootNode.appendChild(this.placeholder);this.initializeEmptyIndex()}}},{key:"initializeEmptyIndex",value:function e(){}},{key:"isEmptyIndex",value:function e(){if(!this.state.collection)return false;var t=this.state.collection.get("id");var a=this.Y.Squarespace.Singletons.TemplateNavigationList;var i=a.getItemByCollectionId(t);if(!i)return false;var s=i.get("children");return s&&0===s.size()}},{key:"getPlaceHolder",value:function e(){return this.Y.Node.create('<div class="sqs-empty-index-placeholder"><span>'+(0,g.t)("Empty Index Page")+"</span></div>")}},{key:"hasPlaceholder",value:function e(){return!!this.placeholder}},{key:"syncChildCollectionAnnotationControllers",value:function e(t,a){var i=this.state.childAnnotationControllers,s=void 0===i?[]:i;var n=[];s.forEach(function(e){!e.state.destroyed&&e.state.rootNode.inDoc()||n.push(e)});while(0!==n.length){var r=n.shift();this.props.removeAnnotationController(r);s.remove(r)}var o=this.getChildAnnotationControllerWrapperNodes(t);if(!o||this.isEmptyIndex())return;o.each(this.ensureInitializedECForNode.bind(this));a&&a()}},{key:"getAcForNode",value:function e(t){var a=this.state.childAnnotationControllers,i=void 0===a?[]:a;return i.find(function(e){return e.state.rootNode===t})}},{key:"ensureInitializedECForNode",value:function e(t){var a=this.state.childAnnotationControllers,i=void 0===a?[]:a;var s=this.getAcForNode(t);if(!s){s=this.props.initializeAnnotationControllerForNode(t);if(!s)return;i.push(s)}var n=this.props.isNodeVisible(t,true);s.set("visible",n)}},{key:"getChildAnnotationControllerWrapperNodes",value:function e(t){var a=this;if(!this.Y.config)return;if(t){var i=this.Y.all('[data-dynamic-href="'.concat(t,'"],[data-url="').concat(t,'"]'));return i}var s=this.state.rootNode.all('[data-collection-id],.sqs-layout[data-type="page"]');return s.filter(function(e){if(a.Y.one(e).one('.sqs-layout[data-type="page"]'))return false;return true})}},{key:"navigateToCollection",value:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.collection;var i=a?a.get("id"):"";var s=this.Y.Squarespace.Singletons.Location;var n="pages";this.props.contentModeControllerSet("contextCollection",a);s.getPanelPath()[0]!==n&&s.go(n,t);this.syncChildCollectionAnnotationControllers();this.ensureCollectionIsInView(i)}},{key:"handleAddContentRequest",value:function e(){return new this.Y.Squarespace.Widgets.Alert({"strings.title":(0,g.t)("Not Available Yet"),"strings.message":(0,g.t)("But it will be super cool when its available.")}).show()}},{key:"getActionList",value:function e(){if(!this.isEmptyIndex()){var t=this.getMainImageToggleAction();var a=this.getContainedMetaFields();if(!(0,p.default)(t)&&(this.state.showEditButton||0===a.size()))return[]}return(0,n.default)((0,l.default)(u.prototype),"getActionList",this).call(this)}},{key:"getAnnotationControllerForCollectionId",value:function e(a){var t=this.state.childAnnotationControllers,i=void 0===t?[]:t;return i.find(function(e){if(!e.state.visible)return;var t=e.state.collection;if(!t)return false;return t.get("id")===a})}},{key:"cleanupArtifacts",value:function e(){var t=this.preview.window.ACTIVE_LIGHTBOX;t&&t.hideAndDestroy()}},{key:"awaitContentChange",value:function e(t,a){var i;var s=[];var n=[];var r=new MutationObserver(function(e){e.forEach(function(e){i&&clearTimeout(i);n.push(e);i=setTimeout(function(){clearTimeout(i);r.disconnect();a(n)},200)})});for(var o=0;o<t.length;o++)if(!t[o].children.length||!t[o].classList.contains("sqs-dynamic-data-ready")&&!t[o].querySelectorAll(".sqs-dynamic-data-ready").length){r.observe(t[o],{childList:true,subtree:true});s.push(t[o])}s.length||r.disconnect()}},{key:"ensureCollectionIsInView",value:function e(t){var a=this;this.syncChildCollectionAnnotationControllers();this.cleanupArtifacts();var i=this.getAnnotationControllerForCollectionId(t);if(!i){if(v.default.GRID===this.state.collection.getTemplateConfiguration().get("indexType")){var s=this.Y.Squarespace.ContentCollectionCache.getById(t).get("urlId");var n=this.getChildAnnotationControllerWrapperNodes("/".concat(s,"/"));if(!n)return;var r=this.props.stack.add(function(){});this.awaitContentChange(n.getDOMNodes(),function(){return a.syncChildCollectionAnnotationControllers("/".concat(s,"/"),r)})}return}var o=i.state.rootNode;var l=o.get("region");var c=l.top;var u=10*b.GRID_PX;var d=c-u;this.Y.one((0,f.default)(this.preview.document)).anim({scroll:[0,d]}).run()}}]);return u}(c.default);t.default=y;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/LayoutBaseAnnotationController.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/assertThisInitialized.js"));var c=i(a("./common/temp/node_modules/@babel/runtime/helpers/get.js"));var u=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var d=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var p=i(a("./common/temp/node_modules/lodash/isFunction.js"));var h=i(a("./common/temp/node_modules/lodash/merge.js"));var g=a("./src/main/webapp/universal/src/shared/i18n/index.ts");var m=a("./common/temp/node_modules/@sqs/rum-collector/timing.js");var f=i(a("./src/main/webapp/universal/src/apps/App/shared/actions/AnnotationsActions.js"));var v=i(a("./src/main/webapp/universal/src/apps/App/shared/stores/AuthenticatedAccountStore.js"));var b=i(a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/LayoutEngineEditorController.js"));var n=i(a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/BaseAnnotationController.js"));function S(s){var n=y();return function e(){var t=(0,d.default)(s),a;if(n){var i=(0,d.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,r.default)(this,a)}}function y(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var _="layout-add-block-button";var C="enter-edit-mode";var E=function(e){(0,u.default)(r,e);var n=S(r);function r(e,t){var a;(0,o.default)(this,r);var i={model:null,isModelLoading:false,columns:null,instrumentationDescription:""};var s=(0,h.default)({},i,t);a=n.call(this,e,s);a.addAfterChangeHandler("editable",a.afterEditableChange);a.registerYUIEventListener(a.state.rootNode.delegate("dblclick",a.handleDblClick,".sqs-block",(0,l.default)(a)));return a}(0,s.default)(r,[{key:"afterEditableChange",value:function e(t){this.syncScroll(t);this.setLayoutNodeHeight(t);this.renderEditor();this.setLayoutNodeHeight();this.syncEditorOverlay();if(t){this.set("startupBlockId",null);(0,m.measure)(C)}}},{key:"handleDblClick",value:function e(t){t.halt();if(!this.state.visible||this.state.editable)return;var a=t.target;var i=a.hasClass(".sqs-block")?a:a.ancestor(".sqs-block");i&&this.set("startupBlockId",i.getAttribute("id"));this.enterEditMode()}},{key:"enterEditMode",value:function e(){var t=this;(0,m.mark)(C);this.state.model?this.set("editable",true):this.initModel(function(){return t.set("editable",true)})}},{key:"initModel",value:function e(t){var a=this;(0,p.default)(t)||(t=function e(){});if(this.state.model){t.call(this);return}if(this.state.isModelLoading){this.addAfterChangeHandler("isModelLoading",t);return}this.set("isModelLoading",true);this.loadModel(function(){a.set("isModelLoading",false);t.call(a)})}},{key:"loadModel",value:function e(t){throw new Error("LayoutBase#_loadModel not implemented.")}},{key:"revert",value:function e(){var t=this;var a=(0,c.default)((0,d.default)(r.prototype),"revert",this).call(this);a.then(function(){t.layoutEditorInstance&&t.layoutEditorInstance.setDirtyLayoutData(false);t.renderEditor()});return a}},{key:"save",value:function e(){var t=this;var a=(0,c.default)((0,d.default)(r.prototype),"save",this).call(this);a.then(function(){t.layoutEditorInstance&&t.layoutEditorInstance.setDirtyLayoutData(false)});return a}},{key:"renderEditor",value:function e(){var t=this;if(this.layoutEditorInstance){this.layoutEditorInstance.destroy();this.layoutEditorInstance=null}if(this.state.editable){var a=this.getPageLayout();var i=this.state.collection;i&&a.set("collectionId",i.get("id"));this.layoutEditorInstance=new b.default(this.Y,{hostNode:this.state.rootNode.getDOMNode(),pageLayout:a,startupBlockId:this.state.startupBlockId});this.layoutEditorInstance.addDirtyLayoutDataHandler(function(e){t.syncEditorOverlay();t.set("dirty",e)})}}},{key:"trackEditClick",value:function e(){}},{key:"getActionList",value:function e(){var t=this;return[{name:"edit",label:(0,g.t)("Edit"),handleClick:function e(){t.trackEditClick();t.enterEditMode()}}]}},{key:"getClassificationLabel",value:function e(){return this.state.rootNode.getAttribute("data-layout-label")||null}},{key:"syncEditorOverlay",value:function e(){var a=this;if(!this.state.editable)return f.default.hideEditorOverlay();var t=[{name:"save",label:(0,g.t)("Save"),handleClick:function e(){return a.props.fireRequestSaveChangesEvent()}},{name:"cancel",label:(0,g.t)("Cancel"),handleClick:function e(){return a.props.fireRequestDiscardChangesEvent()}}];if(!this.state.rootNode.getDOMNode().classList.contains("sqs-locked-layout")){var i=v.default.isTutorialCompleted(_);var s=(0,g.t)("Add Block");t.push({name:"add",label:i?"":s,title:s,className:"sqs-float-right sqs-annotation-add-block-button",icon:i,handleClick:function e(t){v.default.markTutorialCompleted(_);a.showAddBlockMenu(t)}})}f.default.showEditorOverlay({buttons:t,hostNode:this.state.rootNode.getDOMNode(),instrumentationDescription:this.getClassificationLabel().trim(),label:(0,g.t)("Editing &lsquo;{sub1}&rsquo;",{sub1:this.getClassificationLabel().trim()}),scrollLayoutOnEditingStart:this.state.scrollLayoutOnEditingStart,trackButtonClick:this.props.trackButtonClick})}},{key:"showAddBlockMenu",value:function e(t){if(!this.layoutEditorInstance)return;this.layoutEditorInstance.showAddBlockMenu({align:{node:this.Y.one(t.target),points:[this.Y.WidgetPositionAlign.TC,this.Y.WidgetPositionAlign.TR]},layoutNode:this.state.rootNode})}}]);return r}(n.default);t.default=E;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/LayoutEngineEditorController.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var n=a("./src/main/webapp/universal/src/shared/i18n/index.ts");var r=i(a("./src/main/webapp/universal/src/shared/utils/TemplateVersionUtils.js"));var c=i(a("./src/main/webapp/universal/src/apps/App/shared/stores/AuthenticatedAccountStore.js"));var u=a("./src/main/webapp/universal/src/apps/App/utils/mobileWebFlags.js");var d="le2-welcome";var o=function(){function o(e,t){var a=this;var i=t.hostNode,s=t.pageLayout,n=t.startupBlockId;(0,l.default)(this,o);this.Y=e;this.hostNode=i;this.pageLayout=s;this.startupBlockId=n||null;this.dirtyLayoutData=false;while(this.hostNode.firstChild)this.hostNode.removeChild(this.hostNode.firstChild);this.EDIT_CONTROLLER=this.Y.Squarespace.LayoutEngine.EditController.getInstance();var r={layoutNode:this.Y.one(this.hostNode),layoutModel:this.pageLayout,editMode:this.getEditMode(),startupBlockId:this.startupBlockId,layoutTutorialPromise:this.showTutorialIfNecessary(),dragDropLock:(0,u.isMobileContentEditingEnabled)()};this.imageLoaderRefreshHandle||(this.imageLoaderRefreshHandle=this.Y.SQS.LayoutEngine.Events.on("layout-engine:grid-cleaned",function(){a.Y.Squarespace.ImageLoadManager.refreshAll()}));this.EDIT_CONTROLLER.pluginLayoutEditor(r);this.EDIT_CONTROLLER.alignInsertPoints(this.Y.one(this.hostNode));this.onBlockRemoveRequestHandler=this.Y.SQS.LayoutEngine.Events.on("layout-engine:remove-requested",this.onBlockRemoveRequested.bind(this));this.pageLayoutOnChangeHandler=this.pageLayout.on("change",function(e){a.setDirtyLayoutData(true,{editorUid:e.editorUid})});this.pageLayoutAfterChangeHandler=this.pageLayout.after("change",function(e){if(e.forceRefresh){a.EDIT_CONTROLLER.destroyLayoutEditor(a.Y.one(a.hostNode));a.Y.fire("renderLayoutEngineUpgradeWrappers");a.EDIT_CONTROLLER.pluginLayoutEditor(r)}})}(0,s.default)(o,[{key:"getEditMode",value:function e(){if(!r.default.isSevenOne())return null;if("item"===this.hostNode.getAttribute("data-type"))return null;var t=this.Y.SQS.LayoutEngine.Layout.EditMode;return t.SECTION}},{key:"destroy",value:function e(){this.dirtyLayoutDataChangeHandler=null;this.onBlockRemoveRequestHandler.detach();this.pageLayoutOnChangeHandler.detach();this.pageLayoutAfterChangeHandler.detach();this.imageLoaderRefreshHandle&&this.imageLoaderRefreshHandle.detach();this.EDIT_CONTROLLER.destroyLayoutEditor(this.Y.one(this.hostNode));var t=this.hostNode.querySelectorAll(".sqs-block-content[tabindex]");Array.from(t).forEach(function(e){return e.removeAttribute("tabindex")})}},{key:"setDirtyLayoutData",value:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.dirtyLayoutData=t;this.dirtyLayoutDataChangeHandler(t,a)}},{key:"addDirtyLayoutDataHandler",value:function e(t){this.dirtyLayoutDataChangeHandler=t}},{key:"showTutorialIfNecessary",value:function e(){var i=this;return new Promise(function(e,t){if(c.default.isTutorialCompleted(d))return e();if(r.default.isSevenOne())return e();c.default.markTutorialCompleted(d);var a=i.promptLayoutEngineVideoModal();a.onceAfter(["confirm","cancel"],function(){return e()})})}},{key:"onBlockRemoveRequested",value:function e(t){var a=this;t.preventDefault();var i=t.selected;var s=i.size();return new this.Y.Squarespace.Widgets.Confirmation({"strings.title":(0,n.pluralize)({one:"Remove Block",other:"Remove Blocks"},s),"strings.message":(0,n.pluralize)({one:"Are you sure you want to delete this block",other:"Are you sure you want to delete these blocks"},s)}).on("confirm",function(){a.Y.SQS.LayoutEngine.Events.fire("layout-engine:remove-confirmed",{selected:i})})}},{key:"promptLayoutEngineVideoModal",value:function e(){var t=this.Y.Squarespace.Widgets.ConfirmationMedia;return new t({mediaSrc:["https://assets.squarespace.com/universal/images-v6/tutorial/layoutengine-guide.webm","https://assets.squarespace.com/universal/images-v6/tutorial/layoutengine-guide.mp4"],"strings.confirm":(0,n.t)("OK"),"strings.title":(0,n.t)("Adding Content With Blocks"),mediaDimension:{width:734,height:500},mediaType:t.TYPE_MEDIA.VIDEO})}},{key:"showAddBlockMenu",value:function e(t){this.EDIT_CONTROLLER.showBlockMenu(t)}}]);return o}();t.default=o;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/MusicAlbumAnnotationController.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var c=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));function n(s){var n=l();return function e(){var t=(0,o.default)(s),a;if(n){var i=(0,o.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,r.default)(this,a)}}function l(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var u=a("./src/main/webapp/universal/src/shared/i18n/index.ts"),d=u.t;var p=a("./common/temp/node_modules/lodash/merge.js");var h=a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/CollectionBaseAnnotationController.js");var g=function(e){(0,s.default)(l,e);var o=n(l);function l(e,t){var a=t.rootNode,i=t.overlayRootNode,s=t.collection;(0,c.default)(this,l);var n={strings:{label:d("Music Album"),edit:d("Edit")},shimmySelector:".sqs-content-manager-music-album"};var r=p({},n,{rootNode:a,overlayRootNode:i,collection:s});return o.call(this,e,r)}return l}(h);e.exports=g},"./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/NavigationAnnotationController.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var c=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));function u(s){var n=d();return function e(){var t=(0,c.default)(s),a;if(n){var i=(0,c.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,l.default)(this,a)}}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var s=a("./src/main/webapp/universal/src/shared/i18n/index.ts"),p=s.t;var h=a("./src/main/webapp/universal/src/apps/App/shared/stores/WebsiteRoleStore.js");var g=a("./src/main/webapp/frontend/packages/enums/WebsiteRole.js"),m=g.EDITOR,f=g.STORE_MANAGER;var v=a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/BaseAnnotationController.js");var b=a("./src/main/webapp/universal/src/shared/utils/CMSV7Events.js");var S=function(e){(0,o.default)(s,e);var i=u(s);function s(e,t){var a=t.rootNode;(0,n.default)(this,s);return i.call(this,e,{rootNode:a})}(0,r.default)(s,[{key:"hasPermission",value:function e(){return!h.hasRole(m)&&!h.hasRole(f)}},{key:"getClassificationLabel",value:function e(){return p("Navigation")}},{key:"getActionList",value:function e(){return[{name:"edit",label:p("Edit"),handleClick:this.handleEditClick}]}},{key:"handleEditClick",value:function e(){b.annotationClick("navigation-edit");this.Y.Squarespace.Singletons.Location.go("/pages",{shimmy:".sqs-navigation-pages"})}}]);return s}(v);e.exports=S},"./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/NodeTextEditorController.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var c=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var u=i(a("./common/temp/node_modules/lodash/isString.js"));var d=a("./src/main/webapp/universal/src/shared/i18n/index.ts");var p=a("./src/main/webapp/universal/src/shared/constants/LayoutEngineClassnames.js");function r(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function o(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?r(Object(a),true).forEach(function(e){(0,s.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var l=function(){function l(e,t){var a=t.hostNode,i=t.data,s=t.placeholder,n=t.multiline,r=t.menuItems,o=t.textEditorOptions;(0,c.default)(this,l);this.Y=e;this.hostNode=a;this.parentNode=a.parentNode;this.data=(0,u.default)(i)?i:"";this.dataChangeHandler=function(){};this.placeholder=s||(0,d.t)("Write here…");this.multiline=n||false;this.dirty=false;this.menuItems=r;this.parentNode.classList.add(p.DISABLE_DRAG_SELECTION_CLASSNAME);this.hostNode.innerHTML="";this.editor=this.createHTMLContentEditor(o)}(0,n.default)(l,[{key:"destroy",value:function e(){this.editor.destroy(true);this.editor=null;this.dataChangeHandler=null;this.parentNode.classList.remove(p.DISABLE_DRAG_SELECTION_CLASSNAME)}},{key:"setData",value:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.data=t;this.dataChangeHandler(t,a)}},{key:"addDataChangeHandler",value:function e(t){this.dataChangeHandler=t}},{key:"createHTMLContentEditor",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var a=new this.Y.Squarespace.TextEditor(o({render:this.hostNode,placeholder:this.placeholder,type:this.multiline?"simple":"plainText",isInline:!this.multiline,MenuConstructor:this.multiline?this.Y.Squarespace.Singletons.TextEditorToolbar:null,menuItems:this.menuItems,initialData:this.data,boundingBox:this.multiline?"div":"span"},t));a.on("contentUpdated",function(e){if(this.data!==e.content){this.data=e.content;this.dataChangeHandler(this.data);this.dirty=true}}.bind(this));return a}}]);return l}();t.default=l;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/PageAnnotationController.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var h=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var g=i(a("./common/temp/node_modules/@babel/runtime/helpers/assertThisInitialized.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/get.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var m=i(a("./common/temp/node_modules/lodash/merge.js"));var c=i(a("./common/temp/node_modules/lodash/isObject.js"));var u=a("./src/main/webapp/universal/src/shared/i18n/index.ts");var f=i(a("./common/temp/node_modules/@sqs/utils/scroll/scrollIntoView.js"));var d=i(a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/LayoutBaseAnnotationController.js"));var p=i(a("./src/main/webapp/universal/src/apps/App/components/Annotations/mixins/withCollectionBaseMixin.js"));var v=i(a("./src/main/webapp/universal/src/apps/App/components/Annotations/utils/attachRedirectOnCollectionDestroy.js"));var b=i(a("./src/main/webapp/universal/src/shared/utils/CMSV7Events.js"));function S(s){var n=y();return function e(){var t=(0,l.default)(s),a;if(n){var i=(0,l.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,o.default)(this,a)}}function y(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var _=function(e){(0,r.default)(p,e);var d=S(p);function p(e,t){var a;var i=t.rootNode,s=t.overlayRootNode,n=t.collection;(0,h.default)(this,p);var r={model:null,collection:null,columns:12};var o=(0,m.default)({},r,{rootNode:i,overlayRootNode:s,collection:n});a=d.call(this,e,o);var l=a.state.rootNode.ancestor("[data-collection-id]",true);var c=a.examineAndInitializeMainImageToggle(l);a.state.collection.load(function(){var e=this;if(!this.state.collection)return;this.state.collection.get("isDemoCollection")||this.initModel(function(){e.renderEmptyMessage()});if(c){var t=this.state.collection.get("mainImageId");var a=this.mainImageToggleNodeReference;t&&a&&this.set("overlayRootNode",a)}},(0,g.default)(a));if(n.get("isDemoCollection")){var u=window.CONFIG_PANEL.get("router");a.registerYUIEventListener((0,v.default)(a.Y,u,n))}return a}(0,s.default)(p,[{key:"destroy",value:function e(){this.removeEmptyMessage(true);(0,n.default)((0,l.default)(p.prototype),"destroy",this).call(this)}},{key:"afterEditableChange",value:function e(t){t&&this.removeEmptyMessage();(0,n.default)((0,l.default)(p.prototype),"afterEditableChange",this).call(this,t);t||this.renderEmptyMessage()}},{key:"save",value:function e(){var t=this;var a=this.saveModel();return a.then(function(){t.set("dirty",false)})}},{key:"saveModel",value:function e(){var i=this;return new Promise(function(t,a){i.state.model.save(function(e){e?a(e):t()})})}},{key:"getLayoutLabel",value:function e(){var t=this.state.collection;if(this.getParentCollection(t))return t.get("navigationTitle");return(0,u.t)("Page Content")}},{key:"getClassificationLabel",value:function e(){return this.getLayoutLabel()}},{key:"getPageLayout",value:function e(){return this.state.model.get("data").get("layout")}},{key:"getActionList",value:function e(){var t=(0,n.default)((0,l.default)(p.prototype),"getActionList",this).call(this);var a=this.getMainImageToggleAction();(0,c.default)(a)&&t.push(a);var i=this.getCollectionSettingsAction();(0,c.default)(i)&&t.push(i);return t}},{key:"enterEditMode",value:function e(){var t=this;if(this.state.collection.get("isDemoCollection")){if(this.isProcessing)return;this.getCollectionDialogPortal().exampleContentCloneConfirmationWithCollectionId(this.state.collection.get("id")).then(function(){t.initModel(function(){var e=t.state.model;e.set("collection",t.state.collection);e.load(function(e){t.isProcessing=false;t.enterEditMode()})})});return}(0,n.default)((0,l.default)(p.prototype),"enterEditMode",this).call(this)}},{key:"trackEditClick",value:function e(){var t=this.state.collection;b.default.annotationClickCollection("page-content-edit",t.get("typeName"))}},{key:"loadModel",value:function e(t){var a=this;var i=this.Y.Squarespace,s=i.AttrValidators,n=i.Models;var r=s.isInstanceOf(n.PageCollectionData);var o=new n.PageCollectionData({collection:this.state.collection});o.load(function(){r(o,"model")&&a.set("model",o);t()})}},{key:"previewLayout",value:function e(t){var a=this.state.rootNode;var i=a.get("clientHeight");a.setStyle("height",i+"px");this.updateLayoutFromJSON(t);setTimeout(function(){a.setStyle("height",null);var e=a.getDOMNode();e&&(0,f.default)(e,true)},0)}},{key:"updateLayoutFromJSON",value:function e(t){var a=this.Y.Squarespace.LayoutEngine.EditController.getInstance();var i=this.getPageLayout();var s=this.state.rootNode;this.removeEmptyMessage();i.setAttrs(t);s.toggleClass("empty",i.isEmpty());a.pluginLayoutBuilder(s,i);a.destroyLayoutBuilder(s);this.renderEmptyMessage()}},{key:"getParentCollection",value:function e(t){var a=t.get("id");var i=this.Y.Squarespace.Singletons.TemplateNavigationList.getItemByCollectionId(a);if(!i)return false;var s=i.getFolderItemList();if(!s)return false;var n=s.getNavigationItem();if(!n||!n.get("collectionId"))return false;return n.get("collection")}}]);return p}((0,p.default)(d.default));t.default=_;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/PageSectionsAnnotationController.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/toConsumableArray.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/typeof.js"));var p=i(a("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var c=i(a("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var h=i(a("./common/temp/node_modules/@babel/runtime/helpers/assertThisInitialized.js"));var d=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var u=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var g=i(a("./common/temp/node_modules/@babel/runtime/helpers/get.js"));var m=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var f=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var v=i(a("./common/temp/node_modules/lodash/noop.js"));var b=i(a("./common/temp/node_modules/lodash/debounce.js"));var S=i(a("./src/main/webapp/frontend/packages/enums/RecordType.js"));var n=i(a("./src/main/webapp/frontend/packages/enums/Flag.js"));var y=a("./src/main/webapp/universal/src/shared/i18n/index.ts");var _=i(a("./src/main/webapp/universal/src/shared/utils/CMSV7Events.js"));var C=i(a("./src/main/webapp/universal/src/shared/utils/CMSV7EventsCollectionHelpers.js"));var E=a("./src/main/webapp/universal/src/apps/App/shared/constants/SectionConstants.ts");var w=i(a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/SectionsAnnotationController.js"));var A=i(a("./src/main/webapp/universal/src/apps/App/shared/actions/FrameActions.js"));var T=i(a("./src/main/webapp/universal/src/apps/App/shared/actions/TweakActions.js"));var I=i(a("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/ContentBrowserAPI.js"));var q=i(a("./src/main/webapp/universal/src/apps/App/shared/stores/PageSectionsStore.js"));var k=i(a("./src/main/webapp/universal/src/apps/App/shared/actions/PageSectionsActions.js"));var L=i(a("./src/main/webapp/universal/src/apps/App/shared/actions/FooterSectionsActions.js"));var D=a("./src/main/webapp/universal/src/apps/App/shared/actions/SectionsPersistenceHelper.js");var N=i(a("./src/main/webapp/universal/src/apps/App/shared/constants/SectionsArea.js"));var R=i(a("./src/main/webapp/universal/src/shared/constants/DeviceViewType.js"));var O=i(a("./src/main/webapp/universal/src/shared/stores/DeviceViewStore.js"));var P=i(a("./src/main/webapp/universal/src/apps/App/shared/stores/SiteHeaderFooterStore.js"));var x=i(a("./src/main/webapp/universal/src/apps/App/components/Annotations/FirstSectionAddButton.js"));var B=i(a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/NodeTextEditorController.js"));var M=i(a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/LayoutEngineEditorController.js"));var F=a("./src/main/webapp/universal/src/shared/utils/error-reporter/global-sentry.ts");var j=i(a("./common/temp/node_modules/alt-utils/lib/ActionListeners.js"));var U=i(a("./src/main/webapp/universal/src/shared/dispatchers/alt/index.ts"));var V=i(a("./src/main/webapp/universal/src/apps/App/shared/stores/FooterSectionsStore.js"));var H=i(a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts"));var G=i(a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/PageSectionsAnnotationController.less"));var W=i(a("./src/main/webapp/universal/src/apps/App/shared/actions/ContentItemActions.js"));var z=i(a("./src/main/webapp/frontend/packages/enums/WorkflowStates.js"));var Y=a("./src/main/webapp/universal/src/shared/utils/Loggers.ts");var Q=i(a("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/Inventory/screens/components/EditProductModal/ProductDialogActions.ts"));var X=i(a("./src/main/webapp/universal/src/apps/App/shared/constants/SectionTypes.js"));var K=i(a("./src/main/webapp/universal/src/apps/App/shared/stores/ContentCollectionStore.js"));var J=i(a("./src/main/webapp/universal/src/apps/App/shared/stores/WebsiteStore/index.js"));var $=i(a("./src/main/webapp/universal/src/shared/stores/TweakStore.js"));var Z=a("./src/main/webapp/universal/src/shared/utils/ProductsUtils.js");var ee=a("./src/main/webapp/universal/src/apps/App/shared/utils/CollectionUtils.ts");var te=i(a("./src/main/webapp/universal/src/shared/utils/Tweaks/getTweakApi.js"));function ae(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function ie(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?ae(Object(a),true).forEach(function(e){(0,f.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ae(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function se(s){var n=ne();return function e(){var t=(0,m.default)(s),a;if(n){var i=(0,m.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,u.default)(this,a)}}function ne(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var re="pageScrim";var oe='[data-content-field="title"]';var le='.sqs-layout[data-type="item"]';var ce=H.default.isFeatureEnabled(n.default.SEVEN_ONE_CONTEXTUAL_STYLE_EDITING_V1)?"/config/design/site-styles/colors/section-themes/theme-editor":"/config/design/colors/section-themes/theme-editor";var ue="/config/pages";var de="POST_EDIT_REFRESH_KEY";var pe=(0,Y.createLogger)("page-section-annotation-controller","#358");var he={default:{buttonText:(0,y.t)("Manage Items"),dirtyText:(0,y.t)("Do you want to save your changes before managing the items?")},blog:{buttonText:(0,y.t)("Manage Posts"),dirtyText:(0,y.t)("Do you want to save your changes before managing the posts?")},events:{buttonText:(0,y.t)("Manage Events"),dirtyText:(0,y.t)("Do you want to save your changes before managing the events?")},portfolio:{buttonText:(0,y.t)("Manage Projects"),dirtyText:(0,y.t)("Do you want to save your changes before managing the projects?")},products:{buttonText:(0,y.t)("Manage Items"),dirtyText:(0,y.t)("Do you want to save your changes before managing the items?")}};var ge="request";var me="save";var fe="cancel";var ve="navigate";var be=667;var Se=375;var ye=55;var _e=function e(t){if("location"===t)return"location";if(["source-url","author"].includes(t))return"options";return null};var Ce=function(e){(0,d.default)(u,e);var n=se(u);function u(e,t){var a,i,d;(0,r.default)(this,u);d=n.call(this,ie({},e,{sectionsArea:N.default.PAGE_SECTIONS}),t);(0,f.default)((0,h.default)(d),"name","PageSectionsAnnotationController");(0,f.default)((0,h.default)(d),"attachSectionNodeHandlers",function(e,t){(0,g.default)((a=(0,h.default)(d),(0,m.default)(u.prototype)),"attachSectionNodeHandlers",a).call(a,e,t);d._detachMetadataClickListeners();d._addMetadataClickHandlers()});(0,f.default)((0,h.default)(d),"_handleHeaderHeightChange",function(e){var t=e.headerHeight;d.set("topOffset",t)});(0,f.default)((0,h.default)(d),"_handleTopOffsetChange",(0,b.default)(function(){var e=O.default.getState(),t=e.view;var a=document.getElementById(re);a&&d.state.rootNode&&(t===R.default.DESKTOP?a.style.top=ye+d.state.topOffset+"px":a.style.top="calc((50% - ".concat(be/2,"px) + ").concat(ye/2+d.state.topOffset,"px)"))},60));(0,f.default)((0,h.default)(d),"afterSectionsChanged",function(){window.Y.Global.fire("section:first:change");d.firstSectionAddButton&&d.firstSectionAddButton.syncWithDOM(d._getFirstSection());(0,g.default)((i=(0,h.default)(d),(0,m.default)(u.prototype)),"afterSectionsChanged",i).call(i)});(0,f.default)((0,h.default)(d),"onMeasureEditModePerformance",function(){try{var e=d.getSectionStoreState(),t=e.collectionId;C.default.frameToolbarEditFinish(t,d.state.item)}catch(e){pe(e)}});(0,f.default)((0,h.default)(d),"_handleEditDetails",function(e,t){var a=t.id;Q.default.commerceOpenCreateProductDialog({productId:a})});(0,f.default)((0,h.default)(d),"_finishEditingAndNavigateToPanel",function(e,t){var a=t.dirtyText,s=t.destination,n=t.trackingCallback,r=t.cancelCallback,o=t.closeCallback;if(q.default.getState().isDirty||P.default.getState().isDirty||V.default.getState().isDirty){n&&n(ge);d.confirm({title:(0,y.t)("Unsaved Changes"),message:a,cancelLabel:(0,y.t)("Don't Save"),confirmLabel:(0,y.t)("Save")}).then((0,c.default)(p.default.mark(function e(){var a,i=arguments;return p.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:a=i.length>0&&void 0!==i[0]?i[0]:"";if(!("onDismiss"===a&&r)){t.next=7;break}r({destination:s,trackingCallback:n,closeCallback:o});n&&n(fe);return t.abrupt("return");case 7:if(!("onRequestClose"===a&&o)){t.next=10;break}o();return t.abrupt("return");case 10:t.next=12;return(0,D.saveAllSections)();case 12:d.props.fireRequestSaveChangesEvent&&d.props.fireRequestSaveChangesEvent();n&&n(me);d._editCollectionItemsFromPristineState({destination:s,trackingCallback:n,closeCallback:o});case 15:case"end":return t.stop()}},e)}))).catch(function(e){(0,l.default)(e)===Error&&(0,F.captureException)(e)})}else setTimeout(function(){return d._editCollectionItemsFromPristineState({destination:s,trackingCallback:n,closeCallback:o})})});(0,f.default)((0,h.default)(d),"_editCollectionItemsFromPristineState",function(e){var t=e.destination,a=e.trackingCallback,i=e.closeCallback;var s=window.CONFIG_PANEL.get("router");s.push(t);(0,D.finishEditing)();A.default.disableEditing();a&&a(ve);i&&i()});(0,f.default)((0,h.default)(d),"_trackClickManageCollectionInSection",function(e){if(e!==ve)return;var t=d.getSectionStoreState(),a=t.collectionId;try{C.default.clickManageCollectionInSection(a)}catch(e){console.log(e)}});(0,f.default)((0,h.default)(d),"navigateToThemeEditor",function(e){var t=e.theme;d._finishEditingAndNavigateToPanel(null,{dirtyText:(0,y.t)("You have unsaved changes"),destination:ce+"?themeId="+t,trackingCallback:function e(t){_.default.sectionThemeEditClick(t)}})});(0,f.default)((0,h.default)(d),"_onUpdateFromContentBrowserSave",function(){var t=(0,c.default)(p.default.mark(function e(a){var i,s,n,r,o,l,c,u;return p.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:i=a.item,s=a.shouldSyncInlineFields;if(d.isFrameRealAndIfNotDestroy()){t.next=3;break}return t.abrupt("return");case 3:n=ie({},i);if(!s){c=null===(r=d.bodyEditor)||void 0===r?void 0:null===(o=r.pageLayout)||void 0===o?void 0:o.toJSON();c&&(n.body={layout:c});u=null===(l=d.titleEditor)||void 0===l?void 0:l.data;u&&(n.title=u)}k.default.setItem.defer(n);t.next=8;return d.updateSectionDomAndStyles(d.getSectionStoreState().sections[0],i.fullUrl);case 8:s&&d._syncInlineEditors();case 9:case"end":return t.stop()}},e)}));return function(e){return t.apply(this,arguments)}}());(0,f.default)((0,h.default)(d),"_duplicateBlogPostActionHandler",function(){var e=d.itemEditor;if(!e)return;d.pendingDuplicateCallbackRequested=true;var t=e.get("dialog");t.edited?t.saveAndClose():t.close()});d.metadataClickListeners=[];d.pendingRenderedNodes=[];k.default.setCollectionAndItemId({collectionId:d.Y.config.win.Static.SQUARESPACE_CONTEXT.collection.id,itemId:d.getItemIdFromContext()});d.appendEmptyPreviewSectionNodeIfNeeded();d.detachPageSectionsActionListener=q.default.listen(function e(){if(!this.isFrameRealAndIfNotDestroy())return;var t=this.getSectionStoreState();this.set("isFooterEditing",t.isFooterEditing);this.set("isSettingsOpen",t.isSettingsOpen);this.set("isGalleryContentEditorOpen",t.isGalleryContentEditorOpen);this.set("isUserItemsListContentEditorOpen",t.isUserItemsListContentEditorOpen);this.set("isImageAndTextContentEditorOpen",t.isImageAndTextContentEditorOpen);this.set("isItemDialogOpen",t.isItemDialogOpen);this.set("item",t.item);this.onSectionStoreUpdate(t)}.bind((0,h.default)(d)));d.detachDeviceViewScrimListener=O.default.listen(function(){var e=document.getElementById(re);e&&d._styleScrim(e)});d.headerHeightChangeListener=d.Y.Global.on("headerHeight",d._handleHeaderHeightChange.bind((0,h.default)(d)));d.addAfterChangeHandler("isFooterEditing",d.toggleScrim,(0,h.default)(d));d.addAfterChangeHandler("topOffset",d._handleTopOffsetChange,(0,h.default)(d));d.addAfterChangeHandler("isItemDialogOpen",d._handleItemDialogOpen,(0,h.default)(d));var s=d.getFrameWindow();s.innerWidth!==window.top.innerWidth&&(d.setTopOffsetOnAnimationEnd=window.setTimeout(function(){d._handleTopOffsetChange()},300));d._loadItem().then(function(){if(!d.isFrameRealAndIfNotDestroy())return;k.default.setControllerInitialized(true)});d.actionListener=new j.default(U.default);d.actionListener.addActionListener(k.default.NAVIGATE_TO_THEME_EDITOR,d.navigateToThemeEditor);d.actionListener.addActionListener(k.default.UPDATE_FRAME_FROM_CONTENT_BROWSER_SAVE,d._onUpdateFromContentBrowserSave);d.actionListener.addActionListener(k.default.DUPLICATE_BLOG_POST,d._duplicateBlogPostActionHandler);return d}(0,o.default)(u,[{key:"initializeEditors",value:function e(){if(!this.getFrameWindow())return;(0,g.default)((0,m.default)(u.prototype),"initializeEditors",this).call(this);this.firstSectionAddButton||this._initializeFirstAddSectionButton();var t=this.getRootEl();t&&t.setAttribute("data-test","page-sections-container");this.isInlineEditable()&&this.renderInlineEditors()}},{key:"getCollectionType",value:function e(t){var a=this.getSectionStoreState(),i=a.collectionId;var s=I.default.getCollection(i);if(!s)return null;if(I.default.isBlog(s))return"blog";if(I.default.isEvents(s))return"events";if(I.default.isPortfolio(s))return"portfolio";if(I.default.isProducts(s))return"products";return null}},{key:"getItemIdFromContext",value:function e(){return this.Y.config.win.Static.SQUARESPACE_CONTEXT.itemId}},{key:"getItem",value:function e(){return this.getSectionStoreState().item}},{key:"discardSectionEditingChanges",value:function e(){k.default.reset();k.default.setDirty(false);k.default.setEditing(false);L.default.setDirty(false);L.default.setEditing(false);A.default.refresh()}},{key:"getSectionEditingFeatures",value:function e(t){var i=this;var a={};var s=this._finishEditingAndNavigateToPanel||v.default;var n=this.getCollectionType(t)||"default";if(s&&this.isSectionItemManageable(t)){var r=this.getSectionStoreState(),o=r.collectionId;a={manageItems:ie({handler:s},he[n],{destination:"/config/pages/".concat(o),trackingCallback:this._trackClickManageCollectionInSection.bind(this),cancelCallback:function e(t){var a=t.trackingCallback;a();i.discardSectionEditingChanges()},closeCallback:function e(){}})}}else this.isSectionDetailEditable(t)&&(a={editDetails:{handler:this._handleEditDetails.bind(this),id:this.getItem().id,buttonText:(0,y.t)("Edit Product")}});return ie({},(0,g.default)((0,m.default)(u.prototype),"getSectionEditingFeatures",this).call(this,t),{},a)}},{key:"isInlineEditable",value:function e(){var t=this.getItem();if(!t)return false;return t.recordType===S.default.TEXT||t.recordType===S.default.EVENT}},{key:"isSectionAddable",value:function e(t){if(this.isInlineEditable()||I.default.isProductItem(this.getItem()))return false;return(0,g.default)((0,m.default)(u.prototype),"isSectionAddable",this).call(this,t)}},{key:"isSectionMoveable",value:function e(t){if(this.isInlineEditable()||I.default.isProductItem(this.getItem()))return false;return(0,g.default)((0,m.default)(u.prototype),"isSectionMoveable",this).call(this,t)}},{key:"isSectionDetailEditable",value:function e(t){if(I.default.isProductItem(this.getItem()))return true;return(0,g.default)((0,m.default)(u.prototype),"isSectionDetailEditable",this).call(this,t)}},{key:"_initializeFirstAddSectionButton",value:function e(){var t=this;if(this.isInlineEditable()||I.default.isProductItem(this.getItem()))return;var a=this.state.rootNode.getDOMNode();var i=a.ownerDocument.querySelector("#siteWrapper");this.firstSectionAddButton=new x.default({destinationNode:i,currentFirstSection:this._getFirstSection(),onAddSection:function e(){return t.showSectionCatalog(t._getFirstSection(),true)}});this.detachSiteHeaderFooterActionListener=P.default.listen(function e(){var t=P.default.getState();this.set("isHeaderModalOpen",t.isHeaderModalOpen);this._onHeaderFooterStoreUpdate(t)}.bind(this));this.addAfterChangeHandler("isFooterEditing",this.toggleScrim,this);this.addAfterChangeHandler("isHeaderModalOpen",this.toggleScrim,this);this.addAfterChangeHandler("isSettingsOpen",this._handleSettingsOpen,this);this.addAfterChangeHandler("isGalleryContentEditorOpen",this._handleSettingsOpen,this);this.addAfterChangeHandler("isUserItemsListContentEditorOpen",this._handleSettingsOpen,this);this.addAfterChangeHandler("isImageAndTextContentEditorOpen",this._handleSettingsOpen,this)}},{key:"_createCustomHeaderScrim",value:function e(){var t=document.createElement("div");t.id=re;this._styleScrim(t);t.className="sqs-customHeaderPageScrim";document.body.appendChild(t)}},{key:"_styleScrim",value:function e(t){var a=O.default.getState(),i=a.view;if(i===R.default.DESKTOP){t.style.top="".concat(this.state.topOffset+ye,"px");t.style.left="0px";t.style.width="100%";t.style.height="100%"}else{t.style.top="calc((50% - ".concat(be/2,"px) + ").concat(ye/2+this.state.topOffset,"px)");t.style.left="calc(50% - ".concat(Se/2,"px)");t.style.width="".concat(Se,"px");t.style.height="".concat(667-this.state.topOffset,"px")}}},{key:"_removeCustomHeaderScrim",value:function e(){var t=document.getElementById(re);if(t){var a=t.parentNode;a.removeChild(t)}}},{key:"_onHeaderFooterStoreUpdate",value:function e(t){var a,i;if(!this.state.rootNode){console.warn("[".concat(this.constructor.name,"] still listening to store updates after rootNode removal"));return}var s=t.isHeaderModalOpen;var n=t.isOverlayDisclosureOpen;var r=null===(a=document.getElementById("sqs-site-frame"))||void 0===a?void 0:null===(i=a.contentWindow.document)||void 0===i?void 0:i.body;var o=document.getElementById(re);n&&r?window.Y.Global.fire("header:menuOverlay:opened"):window.Y.Global.fire("header:menuOverlay:closed");if(s&&!n){if(o)return;this._createCustomHeaderScrim()}else s&&!n||this._removeCustomHeaderScrim()}},{key:"toggleScrim",value:function e(){var t=this.state,a=t.isFooterEditing,i=t.isScrimEnabled;a&&!i?this.showScrim():i&&!a&&this.hideScrim()}},{key:"_handleSettingsOpen",value:function e(){var t=this.state,a=t.isSettingsOpen,i=t.isGalleryContentEditorOpen,s=t.isUserItemsListContentEditorOpen,n=t.isImageAndTextContentEditorOpen;var r=!(a||i||s||n);r?this.firstSectionAddButton.show():this.firstSectionAddButton.hide()}},{key:"_getFirstSection",value:function e(){if(this.state.rootNode)return this.state.rootNode.getDOMNode().querySelector(E.SECTION_SELECTOR);return null}},{key:"_getPageSectionsId",value:function e(){return this.state.rootNode.getAttribute("data-page-sections")}},{key:"_loadItem",value:function e(){var s=this;var n=this.getItemIdFromContext();if(!n){k.default.setItem(null);return Promise.resolve()}return new Promise(function(t,a){var e=s.props.collectionId;var i=new window.top.Y.Squarespace.Models.ContentItem({id:n,collectionId:e});i.load(function(e){if(!s.isFrameRealAndIfNotDestroy())return;if(e)a(e);else{k.default.setItem(i.toJSON());t()}})})}},{key:"loadLatestSectionData",value:function e(){var t=k.default.load(this._getPageSectionsId());var a=this.getItemIdFromContext();if(!a)return t;return Promise.all([t,this._loadItem()])}},{key:"getSectionStoreState",value:function e(){return q.default.getState()}},{key:"getSectionActions",value:function e(){return k.default}},{key:"handleEnterEditMode",value:function e(t){var a=this;(0,g.default)((0,m.default)(u.prototype),"handleEnterEditMode",this).call(this,t);if((0,Z.isEditModeV2Enabled)()&&I.default.isProductItem(this.getItem())){var i=$.default.getState(),s=i.loaded;if(s){this.openSettingsForProductItem();return}var n=(0,te.default)(),r=n.pageType,o=n.tweakApi;var l=J.default.getState(),c=l.typekitId;T.default.fetchData({pageType:r,tweakApi:o,typekitId:c}).then(function(){a.openSettingsForProductItem()})}}},{key:"openSettingsForProductItem",value:function e(){var t=this.getSectionStoreState(),a=t.collectionId;var i=K.default.getState().get(a);var s=q.default.getState(),n=s.sections;var r=n.find(function(e){var t=e.sectionName;return t===X.default.MAIN_CONTENT});var o=this.getSectionNode(r);var l=this.getSectionToolbarNode(o);if(o){var c,u;k.default.setIsSettingsOpen({isGallery:false,isMainContent:true,isSettingsOpen:true,openSectionNode:o,openSectionToolbarRect:l.getBoundingClientRect(),openSettingsId:r.id,typeName:null!==(c=r.typeName)&&void 0!==c?c:(0,ee.getTypeNameById)(a),itemLayoutKey:null!==(u=r.itemLayoutKey)&&void 0!==u?u:null===i||void 0===i?void 0:i.get("itemLayoutKey")})}}},{key:"createPreviewEmptySectionNode",value:function e(){var t=(0,y.t)("Empty Page");var a=(0,y.t)("Create a beautiful page by adding and combining sections.");return this.buildEmptySectionNode({title:t,description:a})}},{key:"createEmptySectionNode",value:function e(){var t=(0,y.t)("Add Page Content");return this.buildEmptySectionNode({title:t,hasButton:true})}},{key:"onScrimClicked",value:function e(t){var a=this.state,i=a.isFooterEditing,s=a.isHeaderModalOpen;_.default.clickEditSiteAfterEditingHeaderOrFooter(i?"footer":s?"header":"");(0,D.switchFromFooterEditingToPageEditing)()}},{key:"onDeviceViewChanges",value:function e(t){(0,g.default)((0,m.default)(u.prototype),"onDeviceViewChanges",this).call(this,t);this.firstSectionAddButton&&this.firstSectionAddButton.onDeviceViewChanges(t)}},{key:"destroy",value:function e(){(0,g.default)((0,m.default)(u.prototype),"destroy",this).call(this);window.clearTimeout(this.setTopOffsetOnAnimationEnd);this._handleTopOffsetChange.cancel();this.detachPageSectionsActionListener&&this.detachPageSectionsActionListener();if(this.detachDeviceViewScrimListener){this.detachDeviceViewScrimListener();this.detachDeviceViewScrimListener=null}this.detachSiteHeaderFooterActionListener&&this.detachSiteHeaderFooterActionListener();if(this.headerHeightChangeListener){this.headerHeightChangeListener.detach();this.headerHeightChangeListener=null}if(this.firstSectionAddButton){this.firstSectionAddButton.destroy();this.firstSectionAddButton=null}if(this.performanceTrackingEventHandle){this.performanceTrackingEventHandle.detach();this.performanceTrackingEventHandle=null}k.default.setControllerInitialized.defer(false);if(this.actionListener){this.actionListener.removeAllActionListeners();this.actionListener=null}this._detachMetadataClickListeners()}},{key:"_addMetadataClickHandlers",value:function e(){var t=this.state.rootNode;var a=['[data-content-field="event-date-time-range"]','[data-content-field="location"]','[data-content-field="categories"]','[data-content-field="tags"]','[data-content-field="source-url"]','[data-content-field="published-on"]','[data-content-field="author"]','[data-content-field="comments"]'].join(", ");var i=t.all(a);i.each(function(e){var a=this;var i=e.getDOMNode();i.style.zIndex=1;i.style.position="relative";i.style.cursor="pointer";this.metadataClickListeners.push(e.on("click",function(){var e=a.state.item;if(I.default.canEditItemSettings(e)){var t=i.dataset.contentField;_.default.clickMetadata(e,t);I.default.showCollectionItemSettingsEditor(e,_e(t))}else k.default.setItemDialogOpen(true)}))},this)}},{key:"_detachMetadataClickListeners",value:function e(){this.metadataClickListeners.forEach(function(e){return e.detach()});this.metadataClickListeners=[]}},{key:"bindMeasureEditModePerformance",value:function e(t){var a=this;this.performanceTrackingEventHandle||(this.performanceTrackingEventHandle=this.Y.SQS.LayoutEngine.Events.on("layout-engine:layout-rendered",function(t){a.pendingRenderedNodes=a.pendingRenderedNodes.filter(function(e){return e.getDOMNode()!==t.node.getDOMNode()});0===a.pendingRenderedNodes.length&&a.onMeasureEditModePerformance()}));this.pendingRenderedNodes.push(this.Y.one(t))}},{key:"renderInlineEditors",value:function e(){var t=this;var a=this.state,i=a.item,s=a.rootNode;var n=s.one(oe);if(n){n.getDOMNode().classList.add(G.default.titleEditor);this.titleEditor=new B.default(this.Y,{hostNode:n.getDOMNode(),data:i.title,placeholder:i.recordType===S.default.EVENT?(0,y.t)("Enter an event title…"):(0,y.t)("Enter a post title…"),multiline:false});this.titleEditor.addDataChangeHandler(function(e){k.default.setDirty(true);k.default.setItem(ie({},q.default.getState().item,{title:e}))})}var r=s.one(le);if(r){this.bodyEditor=new M.default(this.Y,{hostNode:r.getDOMNode(),pageLayout:this._revertPageLayout()});this.bindMeasureEditModePerformance(r);r.getDOMNode().style.zIndex=1;this.bodyEditor.addDirtyLayoutDataHandler(function(e){if(e.editorUid)return;k.default.setDirty(true);k.default.setItem(ie({},q.default.getState().item,{body:{layout:t.bodyEditor.pageLayout.toJSON()}}))});this.bodyEditors.push(this.bodyEditor)}this._addMetadataClickHandlers()}},{key:"_revertPageLayout",value:function e(){var t=this.state.item;var a=new this.Y.Squarespace.Models.ContentItem(t);this.pageLayout||(this.pageLayout=new this.Y.SQS.LayoutEngine.Models.PageLayout({collectionId:t.collectionid,parentItemId:t.id}));this.pageLayout.setAttrs(a.get("body.layout"));return this.pageLayout}},{key:"destroyInlineEditors",value:function e(){var t=this.state.item;if(this.titleEditor){var a=this.titleEditor.hostNode;a.innerHTML=t.title;this.titleEditor.destroy();this.titleEditor=null}this.reenableLinkNavigation();if(this.bodyEditor){var i=this.bodyEditor.hostNode;this.bodyEditor.destroy();this.bodyEditor=null;var s=this.Y.Squarespace.LayoutEngine.EditController.getInstance();s.pluginLayoutBuilder(this.Y.one(i),this._revertPageLayout());s.destroyLayoutBuilder(this.Y.one(i))}this._detachMetadataClickListeners()}},{key:"_syncInlineEditors",value:function e(){this.destroyInlineEditors();this.renderInlineEditors()}},{key:"_handleItemDialogOpen",value:function e(){if(!this.state.isItemDialogOpen)return;if(this.itemEditor){console.log("There is already an editor!");return}var t=this.Y.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Models.ContentItem");var a=new t(this.getItem());var i=this.Y.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.ContentItemEditorFactory").getEditor(a);this.itemEditor=new i({model:a,onlySetAttrsOnSave:true});this.itemEditor.once(["savingClose","nonSavingClose"],function(e){var t=this;if(e.type.includes("savingClose")){k.default.setItem.defer(a.toJSON());k.default.setDirty.defer(true);setTimeout(function(){return t._syncInlineEditors()})}this.itemEditor=null;k.default.setItemDialogOpen.defer(false);if(this.pendingDuplicateCallbackRequested){this.pendingDuplicateCallbackRequested=false;setTimeout(function(){return t._duplicateCallback()},100)}},this);this.itemEditor.show()}},{key:"getPersistantSelectors",value:function e(){if(!this.isInlineEditable())return(0,g.default)((0,m.default)(u.prototype),"getPersistantSelectors",this).call(this);return[].concat((0,s.default)((0,g.default)((0,m.default)(u.prototype),"getPersistantSelectors",this).call(this)),[oe,le])}},{key:"_duplicateCallback",value:function e(){var r=this;var t=this.getSectionStoreState(),a=t.collectionId;this._finishEditingAndNavigateToPanel(null,{dirtyText:(0,y.t)("You have unsaved changes"),destination:"".concat(ue,"/").concat(a),cancelCallback:function(){var t=(0,c.default)(p.default.mark(function e(a){var i,s,n;return p.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:i=a.destination,s=a.trackingCallback,n=a.closeCallback;t.next=3;return(0,D.discardAllSections)();case 3:r._editCollectionItemsFromPristineState({destination:i,trackingCallback:s,closeCallback:n});case 4:case"end":return t.stop()}},e)}));function e(e){return t.apply(this,arguments)}return e}(),closeCallback:this._doDuplicateBlogPostAndEnterEditMode.bind(this)})}},{key:"_doDuplicateBlogPostAndEnterEditMode",value:function e(){var s=this;var t=this.getSectionStoreState(),a=t.collectionId;var n=this.getItem().id;_.default.duplicateCollectionItem({itemId:n,collectionType:"blog",collectionId:a});this.Y.Squarespace.ContentCollectionCache.getCollectionById(a,function(){var t=(0,c.default)(p.default.mark(function e(a){var i;return p.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return W.default.copy(n,z.default.DRAFT);case 2:i=t.sent;a.items.add(new s.Y.Squarespace.Models.ContentItem(i));A.default.addLoadHandler(de,function(){setTimeout(function(){A.default.removeLoadHandler(de);A.default.enterItemEditingMode()},100)});A.default.setUrl(i.fullUrl);case 6:case"end":return t.stop()}},e)}));return function(e){return t.apply(this,arguments)}}())}}]);return u}(w.default);t.default=Ce;(0,f.default)(Ce,"scrimButton",{text:(0,y.t)("Edit Page"),fadeOutDuration:200});(0,f.default)(Ce,"sectionAreaName","main");e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/PageSectionsAnnotationController.less":function(e,t,a){e.exports={titleEditor:"PageSectionsAnnotationController-titleEditor-2_oHX"}},"./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/PageWrapperAnnotationController.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var u=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/get.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var d=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var p=i(a("./common/temp/node_modules/lodash/merge.js"));var h=a("./src/main/webapp/universal/src/shared/i18n/index.ts");var g=i(a("./src/main/webapp/universal/src/apps/App/shared/stores/PageCollectionDataStore.js"));var l=i(a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/CollectionBaseAnnotationController.js"));var c=i(a("./src/main/webapp/universal/src/apps/App/components/Annotations/mixins/withCollectionBaseMixin.js"));var m=i(a("./src/main/webapp/universal/src/shared/utils/CMSV7Events.js"));function f(s){var n=v();return function e(){var t=(0,d.default)(s),a;if(n){var i=(0,d.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,o.default)(this,a)}}function v(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var b=function(e){(0,n.default)(c,e);var l=f(c);function c(e,t){var a;var i=t.rootNode,s=t.overlayRootNode,n=t.collection;(0,u.default)(this,c);var r={strings:{label:(0,h.t)("Page")},showAddItemButton:false,showEditButton:false,pageCollectionDataLoaded:false,pageCollectionData:new e.Y.Squarespace.Models.PageCollectionData({collection:n})};var o=(0,p.default)({},r,{rootNode:i,overlayRootNode:s,collection:n});a=l.call(this,e,o);a.state.pageCollectionData.load(function(){a.set("pageCollectionDataLoaded",true);a.isPageEmpty()&&a.renderEmptyMessage();a.props.annotationController&&"function"===typeof a.props.annotationController.repaintRequest&&a.props.annotationController.repaintRequest()});return a}(0,s.default)(c,[{key:"destroy",value:function e(){this.removeEmptyMessage(true);(0,r.default)((0,d.default)(c.prototype),"destroy",this).call(this)}},{key:"isPageEmpty",value:function e(){var t=this.state.pageCollectionData;return t&&t.get("data")&&t.isLayoutEmpty()}},{key:"getActionList",value:function e(){var t=this;var a=(0,r.default)((0,d.default)(c.prototype),"getActionList",this).call(this);if(!this.state.pageCollectionDataLoaded)return a;var i=this.state.collection;var s=i.get("id");var n=a.some(function(e){return e&&"Edit"===e.label});!n&&s&&this.isPageEmpty()&&a.unshift({name:"edit",label:(0,h.t)("Edit"),handleClick:function e(){m.default.annotationClickCollection("edit-addEmptyContentAndRefreshFrame",i.get("typeName"));t.addEmptyContentAndRefreshFrame(s)}});return a}},{key:"addEmptyContentAndRefreshFrame",value:function e(t){var a=this;g.default.resetPageCollectionData(t).then(function(){return a.Y.Squarespace.Singletons.Location.requestFrameRefresh()}).catch(function(e){var t=e.data&&e.data.message;return new a.Y.Squarespace.Widgets.Alert({"strings.title":(0,h.t)("Something Went Wrong"),"strings.message":t||(0,h.t)("Failed to create placeholder content and edit. Please try again.")})})}}]);return c}((0,c.default)(l.default));t.default=b;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/PanelLinkAnnotationController.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));function c(s){var n=u();return function e(){var t=(0,o.default)(s),a;if(n){var i=(0,o.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,r.default)(this,a)}}function u(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var d=a("./src/main/webapp/universal/src/shared/i18n/index.ts"),p=d.t;var h=a("./src/main/webapp/universal/src/shared/constants/SliceTypeByName.js");var g=a("./src/main/webapp/universal/src/shared/utils/CMSV7Events.js");var m=a("./src/main/webapp/universal/src/shared/utils/CoverPageEditorLang.js");var f=a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/BaseAnnotationController.js");var v=function(e){(0,n.default)(o,e);var r=c(o);function o(e,t){var a=t.contextCollectionId,i=t.rootNode,s=t.sliceTypeStr,n=t.visible;(0,l.default)(this,o);return r.call(this,e,{contextCollectionId:a,rootNode:i,sliceTypeStr:s,visible:n})}(0,s.default)(o,[{key:"getClassificationLabel",value:function e(){return m.getLabelForSliceType(this.getSliceType())}},{key:"getActionList",value:function e(){var t=this.getClassificationLabel();return[{name:"edit",label:p("Edit {classificationLabel}",{classificationLabel:t}),handleClick:this.handleEditClick}]}},{key:"getSliceType",value:function e(){var t=this.state.sliceTypeStr;return h[t]}},{key:"getUrl",value:function e(){var t=this.getSliceType();var a=this.Y.Squarespace.SliceTypeGroups;var i=m.getUrlForSliceTypeGroupForSliceType(t,a);var s=[];if(this.Y.Squarespace.Utils.isCoverPageOnly())s.push(i);else{s.push("config");s.push("pages");s.push(this.state.contextCollectionId);s.push(i)}return"/"+s.join("/")}},{key:"getShimmySelector",value:function e(){var t=this.state.sliceTypeStr;return'[data-shimmy-id="'.concat(t,'"]')}},{key:"handleEditClick",value:function e(){var t=this.getSliceType();var a=this.Y.Squarespace.SliceTypeGroups;var i=m.getUrlForSliceTypeGroupForSliceType(t,a);g.annotationClick("cover-page-".concat(i));this.Y.Squarespace.Singletons.Location.go(this.getUrl(),{shimmy:this.getShimmySelector(),pathParams:{collectionId:this.state.contextCollectionId}})}}]);return o}(f);e.exports=v},"./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/ProductsAnnotationController.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var u=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));function n(s){var n=l();return function e(){var t=(0,o.default)(s),a;if(n){var i=(0,o.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,r.default)(this,a)}}function l(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var c=a("./src/main/webapp/universal/src/shared/i18n/index.ts"),d=c.t;var p=a("./common/temp/node_modules/lodash/merge.js");var h=a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/CollectionBaseAnnotationController.js");var g=function(e){(0,s.default)(c,e);var l=n(c);function c(e,t){var a;var i=t.rootNode,s=t.overlayRootNode,n=t.collection;(0,u.default)(this,c);var r={strings:{label:d("Products"),nestedItemLabel:d("Product"),edit:d("Manage Products")},trackingIdentifier:"product",shimmySelector:".sqs-content-manager-products"};var o=p({},r,{rootNode:i,overlayRootNode:s,collection:n});a=l.call(this,e,o);a.bindNestedContentItems();return a}return c}(h);e.exports=g},"./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/SectionEditingUI.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var l=i(a("./common/temp/node_modules/react/index.js"));var c=i(a("./common/temp/node_modules/react-dom/index.js"));var u=i(a("./src/main/webapp/frontend/packages/enums/Flag.js"));var d=i(a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts"));var p=i(a("./src/main/webapp/universal/src/shared/constants/DeviceViewType.js"));var h=a("./src/main/webapp/universal/src/apps/App/shared/constants/SectionConstants.ts");var g=i(a("./src/main/webapp/universal/src/apps/App/components/Annotations/components/SectionToolbar.jsx"));var m="hidden-add-section";var s=function e(t){var n=this;var a=t.sectionNode,i=t.sectionPosition,s=t.features;(0,r.default)(this,e);(0,o.default)(this,"onDeviceViewChanges",function(e){var t=Array.from(n.sectionNode.querySelectorAll(".sqs-section-editing-ui"));t.length>0&&(e===p.default.DESKTOP?t.forEach(function(e){return e.classList.remove(m)}):t.forEach(function(e){return e.classList.add(m)}))});(0,o.default)(this,"handleToolbarButtonClick",function(e){var t=n.features[e];var a="function"===typeof t?t:t.handler;var i="function"===typeof t?{}:t;return a(n.sectionNode,i)});(0,o.default)(this,"renderToolbar",function(){var e,t;var a=n.sectionNode.ownerDocument.createElement("div");n.uiContainer=a;c.default.render(l.default.createElement(g.default,{handleAddSection:n.features.add,handleSettingsClick:function e(t){t.stopPropagation();n.features.settings(n.sectionNode)},handleToolbarButtonClick:n.handleToolbarButtonClick,hasFeature:n.hasFeature,hiddenClassName:m,isFooterSection:n.isFooterSection,manageItemsButtonText:null===(e=n.features.manageItems)||void 0===e?void 0:e.buttonText,editDetailsButtonText:null===(t=n.features.editDetails)||void 0===t?void 0:t.buttonText,sectionNode:n.sectionNode,sectionPosition:n.sectionPosition}),a);n.sectionNode.appendChild(a)});(0,o.default)(this,"hasFeature",function(e){if("admin"===e&&(!d.default.isFeatureEnabled(u.default.SECTION_ADMIN)||n.isFooterSection))return false;return Object.keys(n.features).includes(e)});(0,o.default)(this,"toggleToolbar",function(e){var t=n.sectionNode.querySelector(".sqs-section-editing-ui .".concat(h.SECTION_CONTROL_BUTTON_WRAPPER_CLASSNAME));if(!t)return;t.classList.toggle("control-button-wrapper-hidden",!e)});(0,o.default)(this,"toggleAddButtons",function(e){if(!n.hasFeature("add"))return;var t=n.sectionNode.querySelector(".sqs-section-editing-ui .bottom-add-hit-box");var a=n.sectionNode.querySelector(".sqs-section-editing-ui .top-add-hit-box");if(e){t.classList.remove("add-hit-box-hidden");a.classList.remove("add-hit-box-hidden")}else{t.classList.add("add-hit-box-hidden");a.classList.add("add-hit-box-hidden")}});(0,o.default)(this,"show",function(){n.toggleToolbar(true);n.toggleAddButtons(true)});(0,o.default)(this,"hide",function(){n.toggleToolbar(false);n.toggleAddButtons(false)});(0,o.default)(this,"registerTimer",function(e,t){for(var a=arguments.length,i=new Array(a>2?a-2:0),s=2;s<a;s++)i[s-2]=arguments[s];n.timeouts.push(setTimeout.apply(void 0,[e,t].concat(i)))});(0,o.default)(this,"deregisterTimers",function(){n.timeouts.forEach(function(e){return clearTimeout(e)});n.timeouts.length=0});(0,o.default)(this,"destroy",function(){var e;n.deregisterTimers();null===(e=n.uiContainer)||void 0===e?void 0:e.remove()});this.sectionNode=a;this.sectionPosition=i;this.features=s;this.timeouts=[];this.isFooterSection=!!this.sectionNode.closest("[data-footer-sections]");this.renderToolbar()};t.default=s;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/SectionsAnnotationController.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/toConsumableArray.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var c=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var u=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var d=i(a("./common/temp/node_modules/@babel/runtime/helpers/assertThisInitialized.js"));var p=i(a("./common/temp/node_modules/@babel/runtime/helpers/get.js"));var h=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var g=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var m=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var f=i(a("./common/temp/node_modules/lodash/merge.js"));var v=i(a("./common/temp/node_modules/lodash/get.js"));var l=a("./common/temp/node_modules/@sqs/rosetta-tokens/build/lib/index.js");var b=a("./common/temp/node_modules/@sqs/rosetta-utilities/build/lib/index.js");var S=i(a("./common/temp/node_modules/@sqs/utils/scroll/scrollTo.js"));var y=a("./common/temp/node_modules/@sqs/styles/variables/baseDamask.js");var _=i(a("./src/main/webapp/universal/src/shared/constants/DeviceViewType.js"));var C=a("./src/main/webapp/universal/src/shared/constants/LayoutEngineClassnames.js");var E=a("./src/main/webapp/universal/src/apps/App/shared/constants/SectionConstants.ts");var w=a("./src/main/webapp/universal/src/shared/utils/Loggers.ts");var A=a("./src/main/webapp/universal/src/shared/utils/error-reporter/global-sentry.ts");var T=a("./src/main/webapp/universal/src/apps/App/shared/utils/SectionUtils.ts");var I=a("./src/main/webapp/universal/src/apps/App/shared/utils/SectionDomUtils.js");var q=i(a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/BaseAnnotationController.js"));var k=i(a("./common/temp/node_modules/react/index.js"));var L=i(a("./common/temp/node_modules/react-dom/index.js"));var D=i(a("./common/temp/node_modules/@sqs/core-components/lib/web/ConfirmModal.js"));var N=i(a("./src/main/webapp/universal/src/apps/App/components/Catalog/stores/SectionCatalogEntryStore.js"));var R=i(a("./src/main/webapp/universal/src/apps/App/shared/stores/PageSectionsStore.js"));var O=i(a("./src/main/webapp/universal/src/shared/stores/DeviceViewStore.js"));var P=i(a("./src/main/webapp/universal/src/apps/App/shared/actions/PageSectionsActions.js"));var x=i(a("./src/main/webapp/universal/src/apps/App/shared/constants/SectionTypes.js"));var B=i(a("./src/main/webapp/universal/src/apps/ConfigWebsite/RteManager.js"));var M=i(a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/SectionsAnnotationControllerMixins/CatalogControllerMixin.js"));var F=i(a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/SectionsAnnotationControllerMixins/LayoutEngineMixin.js"));var j=i(a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/SectionsAnnotationControllerMixins/SectionRerenderMixin.js"));var U=i(a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/SectionsAnnotationControllerMixins/SectionToolbarMixin.js"));var V=i(a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/SectionsAnnotationControllerMixins/ThemeIndicatorMixin.js"));var H=i(a("./src/main/webapp/universal/src/apps/App/components/Annotations/components/AddSectionButton.js"));function G(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function W(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?G(Object(a),true).forEach(function(e){(0,m.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):G(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function z(s){var n=Y();return function e(){var t=(0,g.default)(s),a;if(n){var i=(0,g.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,o.default)(this,a)}}function Y(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var Q=(0,w.createLogger)("section-annotation-controller","#357");var X=275;var K=2.5*y.GRID_PX;var J="sqs-scrim-enabled";var $="sqs-scrim-fading";var Z="sqs-empty-section-list";var ee="sqs-empty-section";var te="sqs-empty-add-button";var ae="sqs-loading-section";var ie="section.page-section";var se=".system-page";var ne=function e(){return"desktop"!==(0,b.getBreakpoint)(l.breakpoints).platform};var re=function e(){window.Y.Global.fire("tweak:change",{config:{},getName:function e(){return"move-section"},getValue:function e(){return true}})};var oe=function e(){for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return function(e){return a.reduceRight(function(e,t){return t(e)},e)}};var le=oe(V.default,U.default,j.default,M.default,F.default);var ce=function(e){(0,h.default)(l,e);var o=z(l);function l(e,t){var n;var a=t.rootNode;(0,c.default)(this,l);var i={isAddingSection:false,isEditing:false,isScrimEnabled:false,stylesBySectionId:{}};var s=(0,f.default)({},i,{rootNode:a});n=o.call(this,e,s);(0,m.default)((0,d.default)(n),"_getSections",function(){return(0,v.default)(n.getSectionStoreState(),"sections",[])});(0,m.default)((0,d.default)(n),"_getSectionById",function(a){return a?n._getSections().find(function(e){var t=e.id;return t===a}):null});(0,m.default)((0,d.default)(n),"_getSectionByNode",function(e){return e?n._getSectionById((0,I.getSectionIdByEl)(e)):null});(0,m.default)((0,d.default)(n),"getSectionNode",function(e){var t=n.getRootEl();return null===t||void 0===t?void 0:t.querySelector((0,T.getSectionSelector)(e))});(0,m.default)((0,d.default)(n),"getSectionToolbarNode",function(e){return null===e||void 0===e?void 0:e.querySelector(".toolbar-buttons")});(0,m.default)((0,d.default)(n),"_toggleEmptyState",function(e){var t=n.getRootEl();if(!t)return;e&&0!==e.length?t.classList.remove(Z):t.classList.add(Z)});(0,m.default)((0,d.default)(n),"updateRootElOnIsEditingChange",function(){var e=n.getRootEl();if(!e)return;e.dataset.isEditing=n.state.isEditing;e.classList.toggle(C.DISABLE_DRAG_SELECTION_CLASSNAME,!n.state.isEditing)});(0,m.default)((0,d.default)(n),"_onPageSectionStoreUpdate",function(){n._updateSectionThemeUI();var e=R.default.getState(),t=e.isSettingsOpen,a=e.isEditing;if(!a)return;var i=n.Y.Squarespace.LayoutEngine.EditController.getInstance();if(!i||i.get("destroyed"))return;var s=i._dragSelection;t&&s.get("enabled")?i.disableDragSelection():t||s.get("enabled")||i.enableDragSelection()});(0,m.default)((0,d.default)(n),"onSectionListClick",function(e){e.target.classList.contains(J)&&n.onScrimClicked(e)});(0,m.default)((0,d.default)(n),"_initializeMobileSelection",function(t,a){ne()&&t.id===n.getSectionStoreState().focusedSectionId&&a.setAttribute("data-focused-section",true);a.addEventListener("click",function(){if(ne()){var e=n.getRootEl().querySelector("[data-focused-section]");e&&e.removeAttribute("data-focused-section");a.setAttribute("data-focused-section",true);P.default.setFocusedSectionId(t.id)}})});(0,m.default)((0,d.default)(n),"hideScrim",function(){n.getRootEl().classList.add($);n.set("isScrimEnabled",false);n.registerTimer(function(){var e=n.getRootEl();e&&e.classList.remove(J,$)},n.constructor.scrimButton.fadeOutDuration+150)});(0,m.default)((0,d.default)(n),"confirm",function(i){if(!n.confirmationMountNode){var e=n.getRootEl().ownerDocument;n.confirmationMountNode=e.createElement("div");e.body.appendChild(n.confirmationMountNode)}var a=function e(t,a){L.default.render(k.default.createElement(D.default,W({isOpen:false,cancelStyle:"default",confirmStyle:"default"},i)),n.confirmationMountNode);t(a)};return new Promise(function(e,t){L.default.render(k.default.createElement(D.default,W({isOpen:true,onConfirm:a.bind((0,d.default)(n),e),onDismiss:a.bind((0,d.default)(n),e,"onDismiss"),onRequestClose:a.bind((0,d.default)(n),e,"onRequestClose"),cancelStyle:"default",confirmStyle:"default"},i)),n.confirmationMountNode)})});var r=a.getDOMNode();n.constructor.scrimButton&&r.setAttribute("data-edit-button-text",n.constructor.scrimButton.text);r.addEventListener("click",n.onSectionListClick);n.addAfterChangeHandler("isEditing",n.updateRootElOnIsEditingChange,(0,d.default)(n));n.detachPageSectionsStoreActionListener=R.default.listen(n._onPageSectionStoreUpdate);n.timeouts=[];n.bodyEditors=[];n.rteManagerNode=null;return n}(0,u.default)(l,[{key:"getRootEl",value:function e(){return this.state.rootNode?this.state.rootNode.getDOMNode():null}},{key:"getFrameWindow",value:function e(){var t=this.getRootEl();return t&&t.ownerDocument.defaultView||null}},{key:"onSectionStoreUpdate",value:function(){var t=(0,s.default)(r.default.mark(function e(a){var i,s,n;return r.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:if(this.state.rootNode){t.next=3;break}Q("[".concat(this.constructor.name,"] still listening to store updates after rootNode removal"));return t.abrupt("return");case 3:this._toggleEmptyState(a.sections);this.set("editable",a.isEditing);this.set("dirty",a.isDirty);this._isSectionRerenderRequired(this.prevState,a)&&this._updateEditedSection(a);this.prevState=a;this._toggleEditingUi(a);i=a.isEditing!==this.state.isEditing;s=i&&a.isEditing&&!this.isEnteringEditMode;if(!s){t.next=24;break}this.isEnteringEditMode=true;t.prev=13;t.next=16;return this.preloadSectionData(a.isLoaded);case 16:this.handleEnterEditMode();t.next=22;break;case 19:t.prev=19;t.t0=t["catch"](13);Q("error prefetching section data before entering edit mode",t.t0);case 22:this.isEnteringEditMode=false;return t.abrupt("return");case 24:n=i&&!a.isEditing&&!this.isExitingEditMode;if(n){this.isExitingEditMode=true;this.handleExitEditMode();this.isExitingEditMode=false}case 26:case"end":return t.stop()}},e,this,[[13,19]])}));function e(e){return t.apply(this,arguments)}return e}()},{key:"preloadSectionData",value:function e(t){var a=t?Promise.resolve():this.loadLatestSectionData();var i=N.default.getState().isLoaded?Promise.resolve():this._loadLatestCatalogSectionData();return Promise.all([a,i])}},{key:"handleEnterEditMode",value:function e(t){var a=this;Q("entering edit mode",this.constructor.name);this.initializeEditors();this.detachDeviceViewStoreListener||(this.detachDeviceViewStoreListener=O.default.listen(function(){var e=O.default.getState(),t=e.view;a.onDeviceViewChanges(t)}));this.set("isEditing",true)}},{key:"handleExitEditMode",value:function e(){Q("exiting edit mode",this.constructor.name);this.cleanUp();this.appendEmptyPreviewSectionNodeIfNeeded();this.set("isEditing",false)}},{key:"initializeEditors",value:function e(){var s=this;if(!this.getFrameWindow())return;var t=this.getRootEl();if(!t)return;var a=this.getSectionStoreState(),i=a.sections;var n=i.length;if(0===n){this.cleanUpEmptySectionNode();this.set("isEmpty",true);t.append(this.createEmptySectionNode())}var r=0;var o=0;var l=function e(){o++;var t=o===r;if(r&&t){Q("observer checked all layout engine sections, firing edit perf",{layoutEngineSectionsCount:r});s.onMeasureEditModePerformance()}};r=i.filter(function(e,t){var a=s.initializeEditorForSection(e,t,n,l),i=a.isLayoutEngineSection;return i}).length;this._renderRteManager();0!==n&&0!==r||this.onMeasureEditModePerformance()}},{key:"getPersistantSelectors",value:function e(){return[E.LE2_SECTION_SELECTOR]}},{key:"_renderRteManager",value:function e(){var t=this.getRootEl();this.rteManagerNode=t.ownerDocument.createElement("div");L.default.render(k.default.createElement(B.default,{rootElement:t}),this.rteManagerNode)}},{key:"appendEmptyPreviewSectionNodeIfNeeded",value:function e(){this.cleanUpEmptySectionNode();var t=this.getRootEl();if(!t)return false;var a=t.querySelectorAll(".page-section");if(0===a.length){this.set("isEmpty",true);t.append(this.createPreviewEmptySectionNode());return true}return false}},{key:"cleanUpEmptySectionNode",value:function e(){var t=this.getRootEl();if(!t)return;var a=t.querySelector("."+ee);if(a){this.set("isEmpty",false);a.remove()}}},{key:"initializeEditorForSection",value:function e(t,a,i,s){var n=this.getSectionNode(t);if(!n)return{error:"missing_node"};this.attachSectionNodeHandlers(t,a);if(!t.content){t.sectionName===x.default.MAIN_CONTENT&&this.onMeasureEditModePerformance();return{isLayoutEngineSection:false}}this.enableLayoutEngineForSection({sectionNode:n,onFirstCheck:s});return{isLayoutEngineSection:true}}},{key:"buildEmptySectionNode",value:function e(t){var a=this;var i=t.title,s=t.description,n=t.hasButton;var r=this.getRootEl().ownerDocument;var o=r.createElement("div");o.classList.add(ee);o.dataset.controller="";var l=o.appendChild(r.createElement("div"));l.classList.add("sqs-empty-section-content",C.DISABLE_DRAG_SELECTION_CLASSNAME);var c=i?'<div class="sqs-empty-title">'.concat(i,"</div>"):"";var u=s?'<div class="sqs-empty-description">'.concat(s,"</div>"):"";l.innerHTML=c+u;if(n){var d=l.appendChild(r.createElement("div"));L.default.render(k.default.createElement(H.default,{onClick:function e(){return a.showSectionCatalog()},className:te}),d)}return o}},{key:"_buildLoadingPlaceholderNode",value:function e(t){var a=this.getRootEl().ownerDocument.createElement("div");a.classList.add(ae);a.dataset.controller="";var i=t.clientHeight+"px";a.style.height=i;a.style.width="100%";return a}},{key:"_getPageSectionEls",value:function e(){var t;var a=this.getRootEl();var i=null===a||void 0===a?void 0:null===(t=a.ownerDocument)||void 0===t?void 0:t.querySelector(se);var s=Array.from(a&&a.ownerDocument&&a.ownerDocument.querySelectorAll(ie));if(i)return[i].concat((0,n.default)(s));return s}},{key:"_injectSection",value:function e(t){var a=t.section,i=t.sectionNode,s=t.aboveNode;this._injectSectionNode({sectionNode:i,aboveNode:s});this._connectNewSectionNode({section:a,sectionNode:i})}},{key:"_injectSectionNode",value:function e(t){var a=t.sectionNode,i=t.aboveNode;if(!a)throw new Error("Tried to inject a section without a sectionNode");a.style.opacity=0;a.style.transition="opacity ".concat(X,"ms ease-in");this._holdPositionAnimator();var s=this.getRootEl();i?s.insertBefore(a,i):s.appendChild(a);this.cleanUpEmptySectionNode();this.registerTimer(function(){a.style.transition="";a.style.opacity=1},0);this._releasePositionAnimator();this.scrollIntoViewIfNeeded(a);this.afterSectionsChanged()}},{key:"_removeSectionNode",value:function e(t){var a=this;this._holdPositionAnimator();this.registerTimer(function(){t.remove();a._releasePositionAnimator()},0)}},{key:"_connectNewSectionNode",value:function e(t){var a=t.section,i=t.sectionNode;i.ownerDocument.defaultView.Squarespace.initializeLayoutBlocks(this.Y,this.Y.one(i));this._getContentInitializer().initializeScripts(i);var s=this.getSectionStoreState(),n=s.sections;this.currentSectionNode=i;var r=(0,I.getCurrentSectionPosition)(n,i);this.initializeEditorForSection(a,r);re()}},{key:"scrollIntoViewIfNeeded",value:function e(t){var a=t.ownerDocument.querySelector("html");var i=a.clientHeight;var s=a.scrollTop;var n=s+i;var r=t.offsetHeight;var o=t.offsetTop;var l=o+r;var c=o-K<s;var u=l+K>n;if(c||u){var d=o-K;(0,S.default)(a,{top:d,left:0},{easing:"easeInOutSine",maxDuration:X})}}},{key:"_holdPositionAnimator",value:function e(){this.positionAnimatorTimer&&window.clearTimeout(this.positionAnimatorTimer);var t=this.getRootEl();if(!t)return;this.positions=(0,n.default)(t.querySelectorAll(E.SECTION_SELECTOR)).map(function(e){var t=e.getBoundingClientRect();e.style.transition="";e.style.transform="";return{top:t.top,section:e}})}},{key:"_releasePositionAnimator",value:function e(){var t=this;if(!this.positions)return;this.positions.forEach(function(e){var t=e.section,a=e.top;var i=t.getBoundingClientRect();var s=i.top;t.style.transform="translateY(".concat(a-s,"px)")});this.positionAnimatorTimer=setTimeout(function(){t.positions.forEach(function(e){var t=e.section;t.style.transition="transform ".concat(X,"ms ease-in-out")});t.positionAnimatorTimer=setTimeout(function(){t.positions.forEach(function(e){var t=e.section;t.style.transform="translateY(0px)"});t.positionAnimatorTimer=setTimeout(function(){t.positions.forEach(function(e){var t=e.section;t.style.transform="";t.style.zIndex=""});t.registerTimer(re,0);t.positionAnimatorTimer=setTimeout(function(){var e=t.getRootEl();e&&e.classList.remove("sqs-section-moving")},200)},X+100)},0)},0)}},{key:"revert",value:function e(){var t=this.getSectionActions();t.setDirty(false);t.setEditing(false);return Promise.resolve()}},{key:"showScrim",value:function e(){this.getRootEl().classList.add(J);this.set("isScrimEnabled",true)}},{key:"onDeviceViewChanges",value:function e(t){var a=this.Y.Squarespace.LayoutEngine.EditController.getInstance();if(a&&!a.get("destroyed"))if(t===_.default.PHONE){this.turnOffInsertionPoints();a.set("supportsInsertPoints",false)}else{a.set("supportsInsertPoints",true);this.turnOnInsertionPoints()}if(!this.sectionEditingUisBySectionId)return;Object.values(this.sectionEditingUisBySectionId).forEach(function(e){return e.onDeviceViewChanges(t)})}},{key:"onScrimClicked",value:function e(t){}},{key:"afterSectionsChanged",value:function e(){window.Y.Global.fire("sections:change",this._getSections())}},{key:"attachSectionNodeHandlers",value:function e(t,a){var i=this.getSectionNode(t);if(!i){Q("section not in DOM (okay if looking at collection item)",t.id);return}this._initializeMobileSelection(t,i);this.initializeSectionHelperElements(t.id,i,a);i.setAttribute("data-test","section")}},{key:"registerTimer",value:function e(t,a){for(var i=arguments.length,s=new Array(i>2?i-2:0),n=2;n<i;n++)s[n-2]=arguments[n];this.timeouts.push(setTimeout.apply(void 0,[t,a].concat(s)))}},{key:"deregisterTimers",value:function e(){this.timeouts.forEach(function(e){return clearTimeout(e)})}},{key:"turnOffInsertionPoints",value:function e(){this.bodyEditors.forEach(function(e){e.EDIT_CONTROLLER.disableInsertPoints()})}},{key:"turnOnInsertionPoints",value:function e(){this.bodyEditors.forEach(function(e){e.EDIT_CONTROLLER.enableInsertPoints()})}},{key:"unmountEditors",value:function e(){this.bodyEditors.forEach(function(e){e.destroy()});this.bodyEditors=[];if(this.rteManagerNode){L.default.unmountComponentAtNode(this.rteManagerNode);this.rteManagerNode=null}}},{key:"destroy",value:function e(){(0,p.default)((0,g.default)(l.prototype),"destroy",this).call(this);this.prevState=null;this.deregisterTimers();this.cleanUp();this.positionAnimatorTimer&&clearTimeout(this.positionAnimatorTimer);if(this.confirmationMountNode){L.default.unmountComponentAtNode(this.confirmationMountNode);this.confirmationMountNode=null}if(this.detachPageSectionsStoreActionListener){this.detachPageSectionsStoreActionListener();this.detachPageSectionsStoreActionListener=null}}},{key:"cleanUp",value:function e(){(0,p.default)((0,g.default)(l.prototype),"cleanUp",this).call(this);if(this.detachDeviceViewStoreListener){this.detachDeviceViewStoreListener();this.detachDeviceViewStoreListener=null}this.unmountEditors();this.set("isAddingSection",false)}},{key:"isInlineEditable",value:function e(){return false}},{key:"onMeasureEditModePerformance",value:function e(){}},{key:"loadLatestSectionData",value:function e(){false}},{key:"getSectionStoreState",value:function e(){false}},{key:"getSectionActions",value:function e(){false}},{key:"createEmptySectionNode",value:function e(){false}},{key:"createPreviewEmptySectionNode",value:function e(){false}},{key:"isFrameRealAndIfNotDestroy",value:function e(){if(this.Y.config.win.frameElement||this.Y.config.win.MOBILEAPP)return true;(0,A.captureMessage)("Detached frame not properly unloaded!");this.destroy();return false}}]);return l}(le(q.default));t.default=ce;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/SectionsAnnotationControllerMixins/CatalogControllerMixin.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var h=i(a("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/assertThisInitialized.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/get.js"));var c=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var u=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var d=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var g=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var p=i(a("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));var m=i(a("./src/main/webapp/frontend/packages/enums/Flag.js"));var f=a("./common/temp/node_modules/@sqs/rum-collector/timing.js");var v=a("./src/main/webapp/universal/src/shared/i18n/index.ts");var b=i(a("./src/main/webapp/universal/src/apps/App/shared/actions/FrameActions.js"));var S=i(a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts"));var y=i(a("./src/main/webapp/universal/src/shared/utils/CMSV7Events.js"));var _=a("./src/main/webapp/universal/src/shared/utils/error-reporter/global-sentry.ts");var C=a("./src/main/webapp/universal/src/apps/App/shared/utils/SectionDomUtils.js");var E=a("./src/main/webapp/universal/src/shared/utils/Loggers.ts");var w=i(a("./src/main/webapp/universal/src/apps/App/shared/constants/SectionsArea.js"));var A=a("./src/main/webapp/universal/src/apps/App/shared/constants/SectionConstants.ts");var T=a("./src/main/webapp/universal/src/apps/App/shared/utils/SectionUtils.ts");var I=i(a("./src/main/webapp/universal/src/apps/App/components/Catalog/CatalogView.js"));var q=i(a("./src/main/webapp/universal/src/apps/App/shared/constants/category/SectionCategoryMessageBundle.js"));var k=i(a("./src/main/webapp/universal/src/apps/App/components/Catalog/constants/FooterSectionCategoryOrder.js"));var L=i(a("./src/main/webapp/universal/src/apps/App/components/Catalog/constants/PageSectionCategoryOrder.js"));var D=i(a("./src/main/webapp/universal/src/apps/App/components/Catalog/actions/SectionCatalogEntryActions.js"));var N=i(a("./src/main/webapp/universal/src/apps/App/components/Catalog/stores/SectionCatalogEntryStore.js"));var R=i(a("./src/main/webapp/universal/src/apps/App/components/Catalog/utils/CatalogContentInitializer.js"));var O=i(a("./src/main/webapp/universal/src/apps/App/components/Catalog/utils/SectionCatalogEntryAPI.js"));var P=a("./src/main/webapp/universal/src/apps/App/components/Catalog/utils/CatalogPerformanceGuidUtils.js");var x=a("./src/main/webapp/universal/src/apps/App/components/Catalog/constants/CatalogPerformanceEvents.js");function B(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function M(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?B(Object(a),true).forEach(function(e){(0,g.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):B(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function F(s){var n=j();return function e(){var t=(0,d.default)(s),a;if(n){var i=(0,d.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,u.default)(this,a)}}function j(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var U="sqs-empty-section";var V="layoutEngineSection";var H="gallerySection";var G="userItemsListSection";var W="imageAndTextSection";var z="jsonSchemaSection";var Y=function e(t,a){var i=(0,p.default)(a,5),s=i[0],n=i[1],r=i[2],o=i[3],l=i[4];switch(t){case V:return s;case H:return n;case G:return r;case W:return o;case z:return l;default:throw new Error("Unsupported empty section type: "+t)}};var Q=(0,E.createLogger)("section-annotation-controller","#357");var X=function e(t){var a;return a=function(e){(0,c.default)(i,e);var a=F(i);function i(e,t){var p;(0,n.default)(this,i);p=a.call(this,e,t);(0,g.default)((0,o.default)(p),"_getAddBlankHandler",function(d){return(0,s.default)(h.default.mark(function e(){var a,i,s,n,r,o,l,c,u;return h.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:if(!p.state.isAddingSection){t.next=2;break}return t.abrupt("return");case 2:p.set("isAddingSection",true);t.next=5;return O.default.loadBlanks();case 5:a=t.sent;i=a.data;s=Y(d,i),n=s.html,r=s.sectionId,o=s.sectionDefinitionName;t.next=10;return p.getSectionActions().addBlankSection({type:d,sectionId:r,sectionDefinitionName:o,afterSectionId:(0,C.getSectionIdByEl)(p.currentSectionNode),isAddAbove:p.isTopAddSelected});case 10:l=t.sent;Q("Add ".concat(d," to the store using blank sectionId."),{sectionIdFromBlank:r,sectionAdded:l});try{c=p._buildSectionNode({html:n,section:l});u=p.isTopAddSelected?p.currentSectionNode:(0,C.getNextSectionEl)(p.currentSectionNode);p._injectSection({section:l,sectionNode:c,aboveNode:u})}catch(e){(0,_.captureException)(e)}p.hideCatalog();case 14:case"end":return t.stop()}},e)}))});(0,g.default)((0,o.default)(p),"showSectionCatalog",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};p.hasMeasuredRenderTime=false;p.hasMeasuredLoadTime=false;(0,P.resetGuid)();var i={detail:(0,P.getGuid)()};(0,f.mark)(x.SECTION_CATALOG_ENTRY_ADDED,i);(0,f.mark)(x.SECTION_CATALOG_RENDERED,i);(0,f.mark)(x.SECTION_CATALOG_FULLY_LOADED,i);if(!p.hasMeasuredCatalogEffectiveness){p.hasMeasuredCatalogEffectiveness=true;(0,f.measure)(x.SECTION_CATALOG_PRELOAD_EFFECTIVENESS)}var s=150;var n=p.getRootEl();e=e||n.querySelector("."+U);p.isTopAddSelected=t;p.currentSectionNode=e;b.default.openingCatalog();p._getOrCreateAndShowSectionCatalog(a);p.turnOffInsertionPoints();var r=p.sectionCatalogNode.ownerDocument.body;r.style.overflowY="hidden";p.updateCatalogData();p.getSectionActions().setIsCatalogOpen(true);y.default.openSectionCatalog();p.registerTimer(function(){var e=p.sectionCatalogNode.querySelector(".sqs-catalog-container");var t=p.sectionCatalogNode.querySelector(".sqs-catalog-scrim ");e&&e.classList.add("visible");t&&t.classList.add("visible");p.sectionCatalogNode.classList.add("visible")},s)});(0,g.default)((0,o.default)(p),"updateCatalogData",function(){if(!p.sectionCatalog)return;var e=N.default.getState(),t=e.categories,a=e.entryPreviews;if(!p.hasMeasuredRenderTime&&a&&a.length){p.hasMeasuredRenderTime=true;(0,f.measure)(x.SECTION_CATALOG_RENDERED,{detail:(0,P.getGuid)()})}p.sectionCatalog.setLoadedCategories(t)});p.detachSectionCatalogEntryActionListener=N.default.listen(p.updateCatalogData);p.updateCatalogData();return p}(0,r.default)(i,[{key:"destroy",value:function e(){(0,l.default)((0,d.default)(i.prototype),"destroy",this).call(this);if(this.catalogContentInitializer){this.catalogContentInitializer.destroy();this.catalogContentInitializer=null}}},{key:"cleanUp",value:function e(){(0,l.default)((0,d.default)(i.prototype),"cleanUp",this).call(this);this.sectionCatalog&&this.sectionCatalog.cleanUp();if(this.sectionCatalogNode){this.sectionCatalogNode.remove();this.sectionCatalogNode=null}if(this.detachSectionCatalogEntryActionListener){this.detachSectionCatalogEntryActionListener();this.detachSectionCatalogEntryActionListener=null}}},{key:"_buildSectionNode",value:function e(t){var a=t.html,i=t.section;var s=this.currentSectionNode.ownerDocument;var n=s.createElement("div");n.innerHTML=a;var r=n.querySelector(A.SECTION_SELECTOR)||n.firstElementChild;if(!r)throw new Error("Could not _buildSectionNode");r.setAttribute(A.SECTION_ID_ATTR,i.id);r.classList.add("page-section-catalog-added");var o=r.querySelector(A.LE2_SECTION_SELECTOR);if(o){var l=(0,T.getLE2SectionSelectorById)(i.id).replace("#","");o.setAttribute("id",l)}return r}},{key:"_getContentInitializer",value:function e(){this.catalogContentInitializer||(this.catalogContentInitializer=new R.default(this.Y));return this.catalogContentInitializer}},{key:"_loadLatestCatalogSectionData",value:function e(){this.hasMeasuredCatalogEffectiveness||(0,f.mark)(x.SECTION_CATALOG_PRELOAD_EFFECTIVENESS);D.default.loadCatalog.defer()}},{key:"_getOrCreateAndShowSectionCatalog",value:function e(){var a=this;var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.sectionCatalogNode)return this.sectionCatalogNode;var i=[{id:"blank_section",label:(0,v.t)("Add Blank"),onClick:this._getAddBlankHandler(V)}];if(S.default.isFeatureEnabled(m.default.SECTION_ADMIN)){var s={id:"blank_gallery",label:(0,v.t)("Add Blank Gallery"),onClick:this._getAddBlankHandler(H)};i.push(s);var n={id:"blank_image_and_text",label:(0,v.t)("Add Blank Image And Text"),onClick:this._getAddBlankHandler(W)};i.push(n);if(S.default.isFeatureEnabled(m.default.SEVEN_ONE_LIST_SECTION)){var r={id:"blank_user_items_list_section",label:(0,v.t)("Add Blank User Items List Section"),onClick:this._getAddBlankHandler(G)};i.push(r)}var o={id:"blank_user_json_schema_section",label:(0,v.t)("Add Blank Json Schema Gallery Section"),onClick:this._getAddBlankHandler(z)};i.push(o)}var l=M({buttons:i,entrySelector:".page-section[".concat(A.SECTION_ID_ATTR,"]"),onCategoryClick:function e(t){a.hasMeasuredLoadTime=true;y.default.categoryClick(t,"section-catalog")},categoryMessageBundle:q.default,categoryOrder:this.props.sectionsArea===w.default.FOOTER_SECTIONS?k.default:L.default,getEntriesForCategory:function e(t){return N.default.getSectionsForCategory(t)},initializeItems:this._getContentInitializer().initializeSections,onCloseCatalog:this.handleCloseCatalog.bind(this),onCategoryLoaded:function e(){if(!a.hasMeasuredLoadTime){a.hasMeasuredLoadTime=true;(0,f.measure)(x.SECTION_CATALOG_FULLY_LOADED,{detail:(0,P.getGuid)()})}},onSelectItem:this.handleSelectedSectionNode.bind(this),title:(0,v.t)("Add a Section")},t);var c=this.getRootEl();if(c){var u=new I.default(c,l);var d=u.getCatalog();c.ownerDocument.body.appendChild(d);this.sectionCatalog=u;this.sectionCatalogNode=d;return d}}},{key:"handleSelectedSectionNode",value:function e(t,n){var a=this;if(this.state.isAddingSection)return;this.set("isAddingSection",true);(0,f.measure)(x.SECTION_CATALOG_ENTRY_ADDED,{detail:(0,P.getGuid)()});var r=(0,C.getSectionIdByEl)(t);var o=N.default.getPreviewEntryForSection(r);var i=N.default.getCatalogEntryForSection(r);if(null===o)throw new Error("Unable to find preview");if(null===i)throw new Error("Unable to find catalog entry");var l=this._buildLoadingPlaceholderNode(t);var c=this.isTopAddSelected?this.currentSectionNode:(0,C.getNextSectionEl)(this.currentSectionNode);this._injectSectionNode({sectionNode:l,aboveNode:c});this.getSectionActions().addSection({section:o,afterSectionId:(0,C.getSectionIdByEl)(this.currentSectionNode),websiteId:o.websiteId,isAddAbove:this.isTopAddSelected,componentReplacements:i.componentReplacements||[]}).then(function e(t){var a=this._buildSectionNode({html:o.html,section:t});this.getRootEl().replaceChild(a,l);this._injectSection({section:t,sectionNode:a,aboveNode:c});var i=this.getSectionStoreState(),s=i.collectionId;y.default.addSectionToPage(n,r,this.constructor.sectionAreaName,s)}.bind(this)).catch(function(e){a._removeSectionNode(l);throw e});this.hideCatalog()}},{key:"hideCatalog",value:function e(){var t=this;this.turnOnInsertionPoints();this.set("isAddingSection",false);var a=300;if(!this.sectionCatalogNode||!this.sectionCatalog)return;var i=this.sectionCatalogNode.ownerDocument.body;i.style.overflowY="";if(this.sectionCatalogNode){var s=this.sectionCatalogNode.querySelector(".sqs-catalog-container");var n=this.sectionCatalogNode.querySelector(".sqs-catalog-scrim");s&&s.classList.remove("visible");n&&n.classList.remove("visible")}this.registerTimer(function(){t.sectionCatalogNode&&t.sectionCatalogNode.classList.remove("visible");t.sectionCatalog.cleanUp();t.getSectionActions().setIsCatalogOpen(false)},2*a)}},{key:"handleCloseCatalog",value:function e(){this.hideCatalog()}}]);return i}(t),a};t.default=X;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/SectionsAnnotationControllerMixins/LayoutEngineMixin.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/assertThisInitialized.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/get.js"));var c=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var u=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var d=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var p=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var h=a("./common/temp/node_modules/@sqs/rum-collector/timing.js");var g=a("./src/main/webapp/universal/src/shared/constants/CMSPerformanceEvents.js");var s=i(a("./src/main/webapp/universal/src/shared/utils/Loggers.ts"));var m=a("./src/main/webapp/universal/src/apps/App/shared/constants/SectionConstants.ts");var f=a("./src/main/webapp/universal/src/apps/App/shared/utils/SectionUtils.ts");var v=i(a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/LayoutEngineEditorController.js"));function b(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function S(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?b(Object(a),true).forEach(function(e){(0,p.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function y(s){var n=_();return function e(){var t=(0,d.default)(s),a;if(n){var i=(0,d.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,u.default)(this,a)}}function _(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var C=(0,s.default)("section-annotation-controller","#357"),E=C.log,w=C.err;var A=function e(t){var a;return a=function(e){(0,c.default)(s,e);var i=y(s);function s(){var d;(0,n.default)(this,s);for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];d=i.call.apply(i,[this].concat(t));(0,p.default)((0,o.default)(d),"enableLayoutEngineForSection",function(e){var t=e.sectionNode,a=e.onFirstCheck;d.firstCheckCallbacks=d.firstCheckCallbacks||new Map;d.firstCheckCallbacks.set(t,a);if(!d.layoutEngineObserver){E("initializing LayoutEngine IntersectionObserver",d.name);d.layoutEngineObserver=new IntersectionObserver(d.onLayoutEngineSectionIntersect,{rootMargin:"0px",threshold:0})}d.layoutEngineObserver.observe(t)});(0,p.default)((0,o.default)(d),"onLayoutEngineSectionIntersect",function(e,u){return e.forEach(function(t){var a=t.target;var i=d._getSectionByNode(a);if(t.isIntersecting){u.unobserve(a);if(!i){w("Could not get section for node",a);return}var e=a.querySelector(m.LE2_SECTION_SELECTOR);var s=(0,f.getLE2SectionSelectorById)(i.id).replace("#","");if(!e||!s||e.id!==s){w("Could not find LayoutEngine node for section",{hostNode:e,section:i,le2Id:s});return}var n="".concat(g.RENDER_LAYOUT_ENGINE_SECTION,"-").concat(performance.now());(0,h.mark)(n);e.style.zIndex="1";var r=new d.Y.SQS.LayoutEngine.Models.EditableContentBlock(i.content);var o=r.get("layout");var l=new v.default(d.Y,{hostNode:e,pageLayout:o});var c=d.makeLayoutEngineDataHandler({section:i,bodyEditor:l});l.addDirtyLayoutDataHandler(c);d.bodyEditors.push(l);(0,h.measure)(g.RENDER_LAYOUT_ENGINE_SECTION,{requireStart:true,start:n})}window.setTimeout(function(){var e=d.firstCheckCallbacks.get(a);if("function"===typeof e){e({section:i,sectionNode:a,entry:t});d.firstCheckCallbacks.delete(a)}},0)})});(0,p.default)((0,o.default)(d),"makeLayoutEngineDataHandler",function(e){var t=e.section,a=e.bodyEditor;return function(){d.getSectionActions().setSectionContent({sectionId:t.id,content:S({},t.content,{layout:a.pageLayout.toJSON()})})}});return d}(0,r.default)(s,[{key:"cleanUp",value:function e(){if(this.layoutEngineObserver){this.layoutEngineObserver.disconnect();this.layoutEngineObserver=null}(0,l.default)((0,d.default)(s.prototype),"cleanUp",this).call(this)}}]);return s}(t),a};t.default=A;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/SectionsAnnotationControllerMixins/SectionRerenderMixin.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/typeof.js"));var y=i(a("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/toConsumableArray.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var c=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var u=i(a("./common/temp/node_modules/@babel/runtime/helpers/assertThisInitialized.js"));var d=i(a("./common/temp/node_modules/@babel/runtime/helpers/get.js"));var p=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var h=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var g=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var m=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var f=i(a("./common/temp/node_modules/lodash/xor.js"));var v=i(a("./common/temp/node_modules/lodash/omit.js"));var b=i(a("./common/temp/node_modules/lodash/isEqual.js"));var S=i(a("./common/temp/node_modules/lodash/get.js"));var _=i(a("./common/temp/node_modules/lodash/debounce.js"));var C=i(a("./common/temp/node_modules/lodash/compact.js"));var E=i(a("./src/main/webapp/frontend/packages/enums/Flag.js"));var s=i(a("./src/main/webapp/universal/src/shared/utils/CMSV7EventsCollectionHelpers.js"));var w=a("./src/main/webapp/universal/src/shared/utils/ContentPreview.js");var A=i(a("./src/main/webapp/universal/src/apps/App/shared/constants/SectionTypes.js"));var T=a("./src/main/webapp/universal/src/apps/App/shared/utils/SectionUtils.ts");var I=a("./src/main/webapp/universal/src/apps/App/shared/utils/SectionDomUtils.js");var q=i(a("./src/main/webapp/universal/src/apps/App/shared/utils/isImageAndTextSection.js"));var k=a("./src/main/webapp/universal/src/apps/App/shared/utils/renderSection/index.js");var L=i(a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts"));var D=a("./src/main/webapp/universal/src/apps/App/shared/utils/CollectionUtils.ts");var N=i(a("./src/main/webapp/universal/src/shared/utils/Tweaks/getTweakDefinitionsForSection.js"));var R=i(a("./src/main/webapp/universal/src/apps/App/shared/stores/ContentCollectionStore.js"));var O=i(a("./src/main/webapp/universal/src/shared/stores/TweakStore.js"));var P=a("./src/main/webapp/universal/src/apps/App/shared/redux/CmsStoreProvider.js");var x=a("./src/main/webapp/universal/src/apps/App/shared/redux/selectors/siteStylesSelectors.js");var B=a("./src/main/webapp/universal/src/shared/utils/error-reporter/global-sentry.ts");var M=a("./src/main/webapp/universal/src/shared/utils/Loggers.ts");var F=i(a("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/ContentBrowserAPI.js"));function j(s){var n=U();return function e(){var t=(0,g.default)(s),a;if(n){var i=(0,g.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,h.default)(this,a)}}function U(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var V=(0,M.createLogger)("section-annotation-controller","#357");var H=function e(t,a){return!L.default.isFeatureEnabled(E.default.SEVEN_ONE_FRONTEND_RENDER_PAGE_SECTION)&&["video.filterStrength"].some(function(e){return(0,S.default)(t,e)&&(0,S.default)(t,e)!==(0,S.default)(a,e)})};var G=function e(t,a){switch(a.sectionName){case A.default.GALLERY:t.galleryOptions.design!==a.galleryOptions.design&&s.default.changeGalleryLayoutFinish(a.galleryOptions.design,a.id);break;case A.default.MAIN_CONTENT:t.typeName!==a.typeName&&s.default.changeCollectionLayoutFinish(a.typeName);break;case A.default.LAYOUT_ENGINE:t.styles.sectionTheme!==a.styles.sectionTheme&&s.default.changeLayoutEngineColorFinish();break}};var W=function e(){return new Promise(function(e){return setTimeout(function(){return e(true)})})};var z=function e(t,a){if(t.galleryOptions&&a.galleryOptions&&t.galleryOptions.transientGalleryId!==a.galleryOptions.transientGalleryId)return true;if(t.galleryOptions&&a.galleryOptions&&t.galleryOptions.design!==a.galleryOptions.design)return true;return false};var Y=function e(t,a){var i=!(0,b.default)(t.userItems,a.userItems);var s=t.userItemsListOptions&&a.userItemsListOptions&&t.userItemsListOptions.layout!==a.userItemsListOptions.layout;return i||s};var Q=function e(t,a){var i={headline:t.headline,subheadline:t.subheadline,imageId:t.imageId,mediaFocalPoint:t.mediaFocalPoint,link:t.link};var s={headline:a.headline,subheadline:a.subheadline,imageId:a.imageId,mediaFocalPoint:a.mediaFocalPoint,link:a.link};var n=!(0,b.default)(i,s);return n};var X=function e(t,a){if(!t)return false;if((0,T.isGallerySection)(t)&&t.styles.sectionTheme!==a.styles.sectionTheme)return true;if((0,T.isUserItemsListSection)(t)&&t.styles.sectionTheme!==a.styles.sectionTheme)return true;if((0,q.default)(t)&&t.styles.sectionTheme!==a.styles.sectionTheme)return true;return!(0,b.default)(t.styles,a.styles)};var K=function e(t,a){if(!t)return false;var i=t?!(0,b.default)(t.backgroundImageId,a.backgroundImageId):a.backgroundImageId;if(i)return true;var s=t?!(0,b.default)(t.video,a.video):a.video.url;if(s)return true;var n=(0,S.default)(t,"galleryOptions.lastUpdate")!==(0,S.default)(a,"galleryOptions.lastUpdate");if(n)return true;if(z(t,a))return true;if(Y(t,a))return true;if(Q(t,a))return true;if(!(0,b.default)(t.typeName,a.typeName))return true;if(!(0,b.default)(t.itemLayoutKey,a.itemLayoutKey))return true;return false};var J=function e(t,a){if(!t)return false;if((0,T.isGallerySection)(t)&&!(0,b.default)(t.galleryOptions,a.galleryOptions))return true;if((0,T.isUserItemsListSection)(t)&&!(0,b.default)(t.userItemsListOptions,a.userItemsListOptions))return true;if((0,q.default)(t)&&!(0,b.default)(t.imageAndTextOptions,a.imageAndTextOptions))return true;return false};var $=function e(t){var a;return a=function(e){(0,p.default)(s,e);var i=j(s);function s(){var S;(0,l.default)(this,s);for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];S=i.call.apply(i,[this].concat(t));(0,m.default)((0,u.default)(S),"_updateTweaksJsf",function(e){var t=S.getSectionStoreState(),a=t.tweakDefinitionsForSection,i=t.collectionId;if(!a)return;var s=e[0];var n=(0,I.getClosestSectionEl)(s.target);var r=S._getSectionByNode(n);if(!r){console.error("Mutation detected on dead section",{section:r});S.unobserveSection();return}var o=r.typeName||(0,D.getTypeNameById)(i);var l=r.itemLayoutKey;var c=L.default.isFeatureEnabled(E.default.SEVEN_ONE_CONTEXTUAL_STYLE_EDITING_V1)?(0,x.getTweakDefinitions)(P.cmsStore.getState()):O.default.getState().tweakDefinitions;var u=(0,N.default)({isGallery:(0,T.isGallerySection)(r),isUserItemsList:(0,T.isUserItemsListSection)(r),isMainContent:(0,T.isMainContentSection)(r),isJsonSchemaSection:(0,T.isJsonSchemaSection)(r),sectionNode:n,tweakDefinitions:c,typeName:o,itemLayoutKey:l});var d=(0,f.default)(Object.keys(u),Object.keys(a));if(0===d.length)return;V("tweakDefinitions changed",{tweakDefinitionsDiff:d});S.getSectionActions().setTweakDefinitionsForSection({tweakDefinitionsForSection:u})});(0,m.default)((0,u.default)(S),"_debouncedUpdateTweaksJsf",(0,_.default)(function(){S._updateTweaksJsf(S.aggregatedMutationLists);S.aggregatedMutationLists.length=0},10,{leading:false,trailing:true}));(0,m.default)((0,u.default)(S),"_handleSectionMutated",function(e){var t=(0,o.default)(e).filter(function(e){return e.target&&!(0,I.isEditingUiEl)(e.target)});S.aggregatedMutationLists=(0,C.default)(t.concat(S.aggregatedMutationLists));S.aggregatedMutationLists.length>0&&S._debouncedUpdateTweaksJsf()});(0,m.default)((0,u.default)(S),"_updateEditedSection",function(){var t=(0,n.default)(y.default.mark(function e(a){var i,s,n,r,o,l,c,u,d,p,h,g,m,f,v,b;return y.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:i=a.openSettingsId,s=a.isGalleryContentEditorOpen,n=a.isUserItemsListContentEditorOpen,r=a.isImageAndTextContentEditorOpen,o=a.sectionId,l=a.sections;c=s||n||r;u=i||(c?o:null);if(!(!l||!u)){t.next=5;break}return t.abrupt("return");case 5:d=l.findIndex(function(e){var t=e.id;return t===u});p=S.prevState.sections.find(function(e){var t=e.id;return t===u});if(!(-1===d)){t.next=9;break}return t.abrupt("return");case 9:h=S.state.stylesBySectionId;g=h[u];m=l[d];f=!g;v=f||X(g,m)||K(g,m)||J(g,m);if(!(v&&S._canModifySectionDom(m))){t.next=25;break}b=S._updateTweaksViaTemplateHandler(m);if(b){t.next=25;break}if(!H(g,m)){t.next=21;break}S._debouncedUpdateSectionDomAndStyles(m);t.next=25;break;case 21:t.next=23;return S.updateSectionDomAndStyles(m);case 23:G(p,m);S._notifyTemplateOfSectionThemeUpdate(g,m,u);case 25:S._updateStylesBySectionId(u,m);case 26:case"end":return t.stop()}},e)}));return function(e){return t.apply(this,arguments)}}());(0,m.default)((0,u.default)(S),"_isSectionRerenderRequired",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==(0,r.default)(e)||!e)return false;if(t.isSaving)return false;var a=["activeTab","catalog","catalogHTML","focusedSectionId","isAdminOpen","isCatalogOpen","isColorPanelOpen","isControllerInitialized","isDirty","isEditing","isGalleryContentEditorOpen","isUserItemsListContentEditorOpen","isImageAndTextContentEditorOpen","isLoaded","isSectionThemesPanelOpen","isSettingsOpen","isThemeEditorOpen","lastPersistedSections","openAdminId","openSectionNode","openSectionToolbarRect","openSettingsId","pageSectionsId","sectionId","themeUISchema","tweakDefinitionsForSection","typeName","itemLayoutKey","uiSchema"];var i=(0,v.default)(e,a);var s=(0,v.default)(t,a);var n=!(0,b.default)(i,s);return n});(0,m.default)((0,u.default)(S),"_canModifySectionDom",function(e){if(!e){V("section not provided");return false}var t=S.getRootEl();if(!t)return false;if(!S.getFrameWindow()){V("The frameWindow reference was released.");return false}var a=S.getSectionNode(e);if(!a||!a.parentNode){V("The sectionNode is no longer present.",{section:e});return false}return true});(0,m.default)((0,u.default)(S),"_updateTweaksViaTemplateHandler",function(e){var t=S.getFrameWindow();if(!S.getFrameWindow())return false;var a=t.SQSSectionTweak&&t.SQSSectionTweak.refresh(e.id,e);return a});(0,m.default)((0,u.default)(S),"_getSectionReplacements",function(e){var t=[{entityType:"page-sections",key:"idv1.p.".concat(e.id),replacement:{type:"reference-page-sections",pageSections:{sections:[e],websiteId:window.Static.SQUARESPACE_CONTEXT.website.id}}}];if(e.typeName){var a=S.getSectionStoreState(),i=a.collectionId;t.push({entityType:"no-component",replacement:{type:"collection-type-name",typeName:e.typeName,collectionId:i}})}if(e.itemLayoutKey){var s=S.getSectionStoreState(),n=s.collectionId;t.push({entityType:"no-component",replacement:{type:"collection-item-layout-key",itemLayoutKey:e.itemLayoutKey,collectionId:n}})}return t});(0,m.default)((0,u.default)(S),"_shouldUseNewMainContentPreviewApi",function(e){if(!L.default.isFeatureEnabled(E.default.SEVEN_ONE_MAIN_CONTENT_PREVIEW_API)||e.sectionName!==A.default.MAIN_CONTENT)return false;var t=S.getSectionStoreState(),a=t.collectionId,i=t.itemId;var s=R.default.getState().get(a);return s&&!i&&!F.default.isProducts(s.toJS())});(0,m.default)((0,u.default)(S),"updateSectionDomAndStyles",function(){var t=(0,n.default)(y.default.mark(function e(a){var i,s,n,r,o,l,c,u,d,p,h,g,m,f=arguments;return y.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:i=f.length>1&&void 0!==f[1]?f[1]:null;if(S._canModifySectionDom(a)){t.next=3;break}return t.abrupt("return");case 3:s=L.default.isFeatureEnabled(E.default.SEVEN_ONE_CONTENT_PREVIEW_SECTION_API)&&(a.sectionName===A.default.GALLERY||a.sectionName===A.default.LAYOUT_ENGINE);t.prev=4;n=S.getFrameWindow();l=(0,T.getSectionSelector)(a);if(!(L.default.isFeatureEnabled(E.default.SEVEN_ONE_FRONTEND_RENDER_PAGE_SECTION)&&a.sectionName===A.default.LAYOUT_ENGINE||L.default.isFeatureEnabled(E.default.SEVEN_ONE_FRONTEND_RENDER_GALLERY_SECTION)&&a.sectionName===A.default.GALLERY)){t.next=16;break}t.next=10;return W();case 10:t.next=12;return(0,k.renderPageSection)(a);case 12:c=t.sent;o=c.querySelector(l);t.next=36;break;case 16:if(!s){t.next=23;break}t.next=19;return(0,w.getSectionPreview)(a,l);case 19:r=t.sent;o=r;t.next=36;break;case 23:if(!S._shouldUseNewMainContentPreviewApi(a)){t.next=31;break}u=i||n.location.pathname;t.next=27;return(0,w.getMainContentPreview)(u,a,l);case 27:r=t.sent;o=r;t.next=36;break;case 31:d=S._getSectionReplacements(a);t.next=34;return(0,w.getContentPreview)({pathname:i||n.location.pathname,replacements:d});case 34:r=t.sent;o=(0,w.getFragmentFromContentPreview)({responseDoc:r,selector:l});case 36:if(S._canModifySectionDom(a)){t.next=38;break}return t.abrupt("return");case 38:p=S.getSectionNode(a);S._replaceSectionNode(a,p,o);V("Replaced section with newly fetched DOM",{section:a});n.ImageLoader.loadAll();S._getContentInitializer().initializeScripts(o);h=S.getSectionStoreState(),g=h.sections;m=(0,I.getCurrentSectionPosition)(g,o);S.attachSectionNodeHandlers(a,m);S.afterSectionsChanged();t.next=52;break;case 49:t.prev=49;t.t0=t["catch"](4);V("Uncaught Error in updateSectionDomAndStyles",t.t0);case 52:case"end":return t.stop()}},e,null,[[4,49]])}));return function(e){return t.apply(this,arguments)}}());(0,m.default)((0,u.default)(S),"_debouncedUpdateSectionDomAndStyles",(0,_.default)(S.updateSectionDomAndStyles,500));return S}(0,c.default)(s,[{key:"cleanUp",value:function e(){(0,d.default)((0,g.default)(s.prototype),"cleanUp",this).call(this);this.unobserveSection()}},{key:"unobserveSection",value:function e(){this._debouncedUpdateTweaksJsf.cancel();if(this.sectionMutationObserver){this.sectionMutationObserver.disconnect();this.sectionMutationObserver=null}this.observedSectionNode=null}},{key:"observeSection",value:function e(t){this.unobserveSection();if(!t)return;this.observedSectionNode=t;this.sectionMutationObserver=new MutationObserver(this._handleSectionMutated);this.sectionMutationObserver.observe(t,{attributeFilter:["class"],attributes:true,childList:true,subtree:true})}},{key:"_updateStylesBySectionId",value:function e(t,a){if(!this.state||!this.state.stylesBySectionId){(0,B.captureMessage)("Attempting to update styles by section ID with no state!");return}this.state.stylesBySectionId[t]=a}},{key:"_replaceSectionNode",value:function e(t,i,s){var a=i.parentNode;if(!a)return;a.insertBefore(s,i);this.getPersistantSelectors().forEach(function(e){var t=i.querySelector(e);if(t){var a=s.querySelector(e);if(!a){(0,B.captureMessage)("_replaceSectionNode: No new layout node to replace with.");return}a.parentNode.insertBefore(t,a);a.remove()}});if(this.observedSectionNode===i){this.observeSection(s);this._updateTweaksJsf([{target:s}])}i.remove()}},{key:"_notifyTemplateOfSectionThemeUpdate",value:function e(t,a,i){if(!t)return;var s=(0,S.default)(t,"styles.sectionTheme");var n=(0,S.default)(a,"styles.sectionTheme");s!==n&&window.Y.Global.fire("section:theme:change",i,n)}}]);return s}(t),a};t.default=$;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/SectionsAnnotationControllerMixins/SectionToolbarMixin.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var g=i(a("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));var m=i(a("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/assertThisInitialized.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/get.js"));var c=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var u=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var d=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var p=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var h=i(a("./src/main/webapp/frontend/packages/enums/Flag.js"));var f=i(a("./src/main/webapp/universal/src/shared/utils/CMSV7Events.js"));var v=a("./src/main/webapp/universal/src/shared/utils/ContentPreview.js");var b=a("./src/main/webapp/universal/src/apps/App/shared/constants/SectionConstants.ts");var S=a("./src/main/webapp/universal/src/apps/App/shared/utils/SectionUtils.ts");var y=a("./src/main/webapp/universal/src/apps/App/shared/utils/SectionDomUtils.js");var _=i(a("./src/main/webapp/universal/src/apps/App/shared/utils/isImageAndTextSection.js"));var C=a("./src/main/webapp/universal/src/apps/App/shared/utils/renderSection/index.js");var E=i(a("./src/main/webapp/universal/src/shared/utils/CMSV7EventsCollectionHelpers.js"));var w=i(a("./src/main/webapp/universal/src/apps/App/shared/stores/ContentCollectionStore.js"));var A=i(a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts"));var T=a("./src/main/webapp/universal/src/apps/App/shared/utils/CollectionUtils.ts");var I=i(a("./src/main/webapp/universal/src/apps/App/shared/actions/SectionsCatalogTaxonomyActions.js"));var q=a("./src/main/webapp/universal/src/shared/i18n/index.ts");var k=i(a("./src/main/webapp/universal/src/apps/App/shared/constants/SectionTypes.js"));var L=i(a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/SectionEditingUI.js"));function D(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function N(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?D(Object(a),true).forEach(function(e){(0,p.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function R(s){var n=O();return function e(){var t=(0,d.default)(s),a;if(n){var i=(0,d.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,u.default)(this,a)}}function O(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var P=150;var x={DOWN:1,UP:-1};var B=function e(t,a,i){var s=t[a];t[a]=t[i];t[i]=s;return t};var M=function e(t){var a;return a=function(e){(0,c.default)(i,e);var a=R(i);function i(e,t){var h;(0,n.default)(this,i);h=a.call(this,e,t);(0,p.default)((0,o.default)(h),"_toggleEditingUi",function(e){var t=e.isGalleryContentEditorOpen,a=e.isUserItemsListContentEditorOpen,i=e.isImageAndTextContentEditorOpen,s=e.isSettingsOpen;var n=!(s||t||a||i);Object.values(h.sectionEditingUisBySectionId).forEach(function(e){n?e.show():e.hide()})});(0,p.default)((0,o.default)(h),"_isMainContentCollectionSection",function(e){var t=h.getSectionStoreState(),a=t.collectionId,i=t.itemId;var s=w.default.getState().get(a);return(0,S.isMainContentSection)(e)&&s&&!i});(0,p.default)((0,o.default)(h),"moveSectionUp",function(e){var t=h.getSectionStoreState(),a=t.sections;if(e){var i=(0,y.getCurrentSectionPosition)(a,e);if(-1===i||0===i)return;h.getRootEl().classList.add("sqs-section-moving");h.registerTimer(function(){h._moveSection(e,i,x.UP)},P);f.default.moveSection("up",h.constructor.sectionAreaName)}});(0,p.default)((0,o.default)(h),"moveSectionDown",function(e){if(e){var t=h.getSectionStoreState(),a=t.sections;var i=(0,y.getCurrentSectionPosition)(a,e);if(-1===i||i===a.length-1)return;h.getRootEl().classList.add("sqs-section-moving");h.registerTimer(function(){h._moveSection(e,i,x.DOWN)},P);f.default.moveSection("down",h.constructor.sectionAreaName)}});(0,p.default)((0,o.default)(h),"_duplicateSection",function(){var t=(0,s.default)(m.default.mark(function e(a){var i,s,n,r,o,l,c;return m.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:i=E.default.userDuplicatesSectionStart();s=h._getSectionByNode(a);n=h._buildLoadingPlaceholderNode(a);h._injectSectionNode({sectionNode:n,aboveNode:(0,y.getNextSectionEl)(a)});h.currentSectionNode=a;t.prev=5;t.next=8;return h.getSectionActions().duplicateSection(s);case 8:r=t.sent;t.next=11;return(0,v.getSectionPreview)(r,(0,S.getSectionSelector)(r));case 11:o=t.sent;h.getRootEl().replaceChild(o,n);h._injectSection({section:r,sectionNode:o,aboveNode:(0,y.getNextSectionEl)(a)});l=h.getSectionStoreState(),c=l.collectionId;E.default.userDuplicatesSectionFinish(i,{sectionType:s.sectionName,originalSectionId:s.id,area:h.constructor.sectionAreaName,collectionId:c});t.next=22;break;case 18:t.prev=18;t.t0=t["catch"](5);h._removeSectionNode(n);throw t.t0;case 22:case"end":return t.stop()}},e,null,[[5,18]])}));return function(e){return t.apply(this,arguments)}}());(0,p.default)((0,o.default)(h),"deleteSection",function(){var t=(0,s.default)(m.default.mark(function e(a){var i,s,n,r,o,l,c,u,d,p;return m.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:t.prev=2;t.next=5;return h.confirm({title:(0,q.t)("Remove Section"),message:(0,q.t)("Are you sure you want to remove this section?"),confirmLabel:(0,q.t)("Remove")});case 5:i=t.sent;if(!("onDismiss"===i||"onRequestClose"===i)){t.next=8;break}return t.abrupt("return");case 8:t.next=13;break;case 10:t.prev=10;t.t0=t["catch"](2);return t.abrupt("return");case 13:h._holdPositionAnimator();s=h.getSectionStoreState(),n=s.sections;r=(0,y.getCurrentSectionPosition)(n,a);o=n.splice(r,1),l=(0,g.default)(o,1),c=l[0].sectionName;h.getSectionActions().updateSections(n);u=(0,y.getSectionIdByEl)(a);d=h.getSectionStoreState(),p=d.collectionId;a.remove();if(0===n.length){h.set("isEmpty",true);h.getRootEl().append(h.createEmptySectionNode())}h._releasePositionAnimator();h.afterSectionsChanged();f.default.deleteSection(c,u,h.constructor.sectionAreaName,p);case 25:case"end":return t.stop()}},e,null,[[2,10]])}));return function(e){return t.apply(this,arguments)}}());(0,p.default)((0,o.default)(h),"_closeSettings",function(){h.unobserveSection();h.getSectionActions().setIsSettingsOpen({isSettingsOpen:false,openSettingsId:null,openSectionToolbarRect:null,openSectionNode:null});h.getSectionActions().setIsGalleryContentEditorOpen({isGalleryContentEditorOpen:false,sectionId:null});h.getSectionActions().setIsImageAndTextContentEditorOpen({isImageAndTextContentEditorOpen:false,sectionId:null});h.getSectionActions().setIsUserItemsListContentEditorOpen({isUserItemsListContentEditorOpen:false,sectionId:null});var e=h.getRootEl();e&&e.removeEventListener("click",h._closeSettings)});h.sectionEditingUisBySectionId={};return h}(0,r.default)(i,[{key:"cleanUp",value:function e(){(0,l.default)((0,d.default)(i.prototype),"cleanUp",this).call(this);if(this.sectionEditingUisBySectionId){Object.values(this.sectionEditingUisBySectionId).forEach(function(e){return e.destroy()});this.sectionEditingUisBySectionId={}}}},{key:"destroy",value:function e(){(0,l.default)((0,d.default)(i.prototype),"destroy",this).call(this);if(this.sectionEditingUisBySectionId){Object.values(this.sectionEditingUisBySectionId).forEach(function(e){return e.destroy()});this.sectionEditingUisBySectionId=null}}},{key:"initializeSectionHelperElements",value:function e(t,a,i){this.getSectionActions().setOpenSectionNode(a);if(!a.querySelector(".sqs-section-editing-ui")){var s=this.getSectionEditingFeatures(a);this.sectionEditingUisBySectionId[t]=new L.default({sectionNode:a,sectionPosition:i,features:s})}}},{key:"isSectionItemManageable",value:function e(t){var a=(0,y.getSectionIdByEl)(t);var i=this.getSectionStoreState(),s=i.sections;var n=s.find(function(e){return e.id===a});return this._isMainContentCollectionSection(n)}},{key:"isSectionDetailEditable",value:function e(t){return false}},{key:"getSectionEditingFeatures",value:function e(t){var a=this;var i=(0,y.getSectionIdByEl)(t);var s=this.getSectionStoreState().sections.find(function(e){return e.id===i});var n=(0,S.isGallerySection)(s)?{galleryContent:function e(){f.default.openGalleryImagePicker(i);a._openGalleryContentEditor(s,t)}}:{};var r=(0,S.isUserItemsListSection)(s)?{userItemsListContent:function e(){a._openUserItemsListContentEditor(s)}}:{};var o=(0,_.default)(s)?{imageAndTextContent:function e(){a._openImageAndTextContentEditor(s)}}:{};var l=this._isSectionDeletable(t);var c=l?{delete:this.deleteSection}:{};var u=this.isSectionMoveable(t);var d=u?{up:this.moveSectionUp,down:this.moveSectionDown}:{};var p=this.isSectionAddable(t);var h=p?{add:this.showSectionCatalog}:{};var g=this._isSectionDuplicable(t)?{duplicate:this._duplicateSection}:{};var m=l||u?{more:true}:{};return N({},h,{},g,{},d,{settings:this._handleSettingsButtonClick.bind(this),admin:this._handleAdminButtonClick.bind(this)},c,{},n,{},r,{},o,{},m)}},{key:"isSectionAddable",value:function e(t){return true}},{key:"_isSectionDuplicable",value:function e(t){var a=this._getSectionByNode(t);return!(0,S.isMainContentSection)(a)}},{key:"isSectionMoveable",value:function e(t){return true}},{key:"_handleSettingsButtonClick",value:function e(t){var a,i=this;var s=(0,y.getSectionIdByEl)(t);var n=t.querySelector(".toolbar-buttons");var r=this.getSectionStoreState(),o=r.sections,l=r.collectionId,c=r.itemId;var u=o.find(function(e){return e.id===s});E.default.clickEditSection(this.constructor.sectionAreaName,l,c);var d=u.typeName||(0,T.getTypeNameById)(l);var p=u.itemLayoutKey||(null===(a=w.default.getState().get(l))||void 0===a?void 0:a.get("itemLayoutKey"));this.registerTimer(function(){var e=i.getRootEl();e&&e.addEventListener("click",i._closeSettings)});(u.sectionName===k.default.LAYOUT_ENGINE&&A.default.isFeatureEnabled(h.default.SEVEN_ONE_FRONTEND_RENDER_PAGE_SECTION)||u.sectionName===k.default.GALLERY&&A.default.isFeatureEnabled(h.default.SEVEN_ONE_FRONTEND_RENDER_GALLERY_SECTION))&&(0,C.preloadPageSectionRenderContext)(u);this.getSectionActions().setIsSettingsOpen({collectionId:l,isGallery:(0,S.isGallerySection)(u),isUserItemsList:(0,S.isUserItemsListSection)(u),isMainContent:(0,S.isMainContentSection)(u),isJsonSchemaSection:(0,S.isJsonSchemaSection)(u),isSettingsOpen:true,openSectionNode:t,openSectionToolbarRect:n.getBoundingClientRect(),openSettingsId:s,typeName:d,itemLayoutKey:p});this.observeSection(t)}},{key:"_openGalleryContentEditor",value:function e(t){var a=this;this.registerTimer(function(){var e=a.getRootEl();e&&e.addEventListener("click",a._closeSettings)});this.getSectionActions().setIsGalleryContentEditorOpen({isGalleryContentEditorOpen:true,sectionId:t.id})}},{key:"_openImageAndTextContentEditor",value:function e(t){var a=this;this.registerTimer(function(){var e=a.getRootEl();e&&e.addEventListener("click",a.closeSettings)});this.getSectionActions().setIsImageAndTextContentEditorOpen({isImageAndTextContentEditorOpen:true,sectionId:t.id})}},{key:"_openUserItemsListContentEditor",value:function e(t){var a=this;this.registerTimer(function(){var e=a.getRootEl();e&&e.addEventListener("click",a._closeSettings)});E.default.userOpenSectionManagerModal("USER_ITEMS_LIST","main");this.getSectionActions().setIsUserItemsListContentEditorOpen({isUserItemsListContentEditorOpen:true,sectionId:t.id})}},{key:"_handleAdminButtonClick",value:function e(t){var a=(0,y.getSectionIdByEl)(t);var i=t.querySelector(".control-buttons");var s=this.getSectionStoreState(),n=s.collectionId;I.default.loadCategories(n,a);this.getSectionActions().setIsAdminOpen.defer({isAdminOpen:true,openAdminId:a,openSectionToolbarRect:i.getBoundingClientRect()})}},{key:"_moveSection",value:function e(t,a,i){var s=this.getSectionStoreState(),n=s.sections;var r=this.getRootEl();this._holdPositionAnimator();var o=a+i;var l=n[o].id;var c="[".concat(b.SECTION_ID_ATTR,'="').concat(l,'"]');var u=r.querySelector(c);t.style.zIndex=1;var d=i>0?u:t;var p=i>0?t:u;r.insertBefore(d,p);B(n,a,o);this.getSectionActions().updateSections(n);this._releasePositionAnimator();this.scrollIntoViewIfNeeded(t);this.afterSectionsChanged()}},{key:"_isSectionDeletable",value:function e(t){var a=this.getSectionStoreState(),i=a.sections;var s=i.find(function(e){return e.id===(0,y.getSectionIdByEl)(t)});return s.sectionName!==k.default.MAIN_CONTENT}}]);return i}(t),a};t.default=M;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/SectionsAnnotationControllerMixins/ThemeIndicatorMixin.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/assertThisInitialized.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/get.js"));var c=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var u=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var d=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var p=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var h=i(a("./src/main/webapp/frontend/packages/enums/Flag.js"));var g=a("./src/main/webapp/universal/src/apps/App/shared/utils/SectionDomUtils.js");var m=a("./src/main/webapp/universal/src/shared/constants/ThemesConfig.js");var f=a("./src/main/webapp/universal/src/apps/App/shared/utils/ThemesUtils.js");var v=i(a("./src/main/webapp/universal/src/shared/stores/TweakStore.js"));var b=a("./src/main/webapp/universal/src/apps/App/shared/redux/CmsStoreProvider.js");var S=a("./src/main/webapp/universal/src/apps/App/shared/redux/selectors/siteStylesSelectors.js");var y=a("./src/main/webapp/universal/src/apps/App/shared/redux/utils/themeUtils.js");var _=i(a("./src/main/webapp/universal/src/apps/App/shared/actions/AnnotationsActions.js"));var C=i(a("./src/main/webapp/universal/src/apps/App/shared/stores/FrameToolbarStore.js"));var E=i(a("./src/main/webapp/universal/src/apps/App/shared/stores/SiteHeaderFooterStore.js"));var w=i(a("./src/main/webapp/universal/src/apps/App/components/Annotations/utils/getIsSectionThemeIndicatorsVisible.js"));var A=a("./src/main/webapp/universal/src/apps/App/shared/constants/SectionConstants.ts");var T=a("./src/main/webapp/universal/src/apps/App/components/Annotations/constants/seven-one-annotations.js");var I=i(a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts"));function s(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function q(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?s(Object(a),true).forEach(function(e){(0,p.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function k(s){var n=L();return function e(){var t=(0,d.default)(s),a;if(n){var i=(0,d.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,u.default)(this,a)}}function L(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var D=11;var N=function e(t){var a;return a=function(e){(0,c.default)(s,e);var i=k(s);function s(e,t){var a;(0,n.default)(this,s);a=i.call(this,e,t);(0,p.default)((0,o.default)(a),"_onFrameToolBarStoreUpdate",function(){a._updateSectionThemeUI()});(0,p.default)((0,o.default)(a),"_onTweakStoreUpdate",function(){a._updateSectionThemeUI()});(0,p.default)((0,o.default)(a),"_onSiteHeaderFooterStoreUpdate",function(){a._updateSectionThemeUI()});(0,p.default)((0,o.default)(a),"_scroll",function(){a.scrollRafId=window.requestAnimationFrame(function(){var e=a.getFrameWindow();if(!e)return;e.scrollY>10?a._hideThemeButton(T.HEADER_SECTION_THEME_INDICATOR_KEY):a._showThemeButton(T.HEADER_SECTION_THEME_INDICATOR_KEY)})});a.detachFrameToolBarStoreListener=C.default.listen(a._onFrameToolBarStoreUpdate);a.detachSiteHeaderFooterStoreListener=E.default.listen(a._onSiteHeaderFooterStoreUpdate);a.detachTweakStoreListener=I.default.isFeatureEnabled(h.default.SEVEN_ONE_CONTEXTUAL_STYLE_EDITING_V1)?b.cmsStore.onChange(function(e){return{loaded:(0,S.getAreTweaksLoaded)(e),activeThemeId:(0,S.getActiveThemeId)(e)}},a._onTweakStoreUpdate):v.default.listen(a._onTweakStoreUpdate);return a}(0,r.default)(s,[{key:"cleanUp",value:function e(){(0,l.default)((0,d.default)(s.prototype),"cleanUp",this).call(this);if(this.detachFrameToolBarStoreListener){this.detachFrameToolBarStoreListener();this.detachFrameToolBarStoreListener=null}if(this.detachSiteHeaderFooterStoreListener){this.detachSiteHeaderFooterStoreListener();this.detachSiteHeaderFooterStoreListener=null}if(this.detachTweakStoreListener){this.detachTweakStoreListener();this.detachTweakStoreListener=null}}},{key:"destroy",value:function e(){(0,l.default)((0,d.default)(s.prototype),"destroy",this).call(this);this._cleanupScrollEvents()}},{key:"_cleanupScrollEvents",value:function e(){this.scrollRafId&&window.cancelAnimationFrame(this.scrollRafId);var t=this.getFrameWindow();t&&t.removeEventListener("scroll",this._scroll)}},{key:"_getOverlayNavEl",value:function e(){var t;var a=this.getRootEl();return null===a||void 0===a?void 0:null===(t=a.ownerDocument)||void 0===t?void 0:t.querySelector(A.OVERLAY_NAV_TAG)}},{key:"_getHeaderEl",value:function e(){var t;var a=this.getRootEl();return null===a||void 0===a?void 0:null===(t=a.ownerDocument)||void 0===t?void 0:t.querySelector("header")}},{key:"_getIndicatorPositionOffsets",value:function e(){var t=this._getHeaderEl();var a=t.getBoundingClientRect();var i=a.height;return{header:D,firstSection:i+D}}},{key:"_getIndicatorConfig",value:function e(t,a){var i=(0,g.getThemeDataBySectionEl)(t,a),s=i.themeId;if(!s)return null;var n=m.ThemesConfigById[s];if(!n)return null;var r;if(I.default.isFeatureEnabled(h.default.SEVEN_ONE_CONTEXTUAL_STYLE_EDITING_V1)){var o=(0,S.getThemes)(b.cmsStore.getState());r=(0,y.getThemeCardMappingsById)(o,s)}else r=(0,f.getThemeCardMappingsById)(s);return q({},n,{cardMappings:r})}},{key:"_updateSectionThemeUI",value:function e(){var t=this;var a=I.default.isFeatureEnabled(h.default.SEVEN_ONE_CONTEXTUAL_STYLE_EDITING_V1)?(0,S.getAreTweaksLoaded)(b.cmsStore.getState()):v.default.getState().loaded;if(!a)return;if(!(0,w.default)())return;!this.scrollRafId&&this.getFrameWindow()&&this.getFrameWindow().addEventListener("scroll",this._scroll);_.default.setPageSectionNodes.defer({header:{node:this._getHeaderEl(),indicator:this._getIndicatorConfig(this._getHeaderEl())},overlayNav:{node:this._getOverlayNavEl(),indicator:this._getIndicatorConfig(this._getOverlayNavEl(),"menuOverlayTheme")},sections:this._getPageSectionEls().map(function(e){return{node:e,indicator:t._getIndicatorConfig(e)}}),offsets:this._getIndicatorPositionOffsets()})}},{key:"_getThemeButton",value:function e(t){var a=this.getFrameWindow();var i=null===a||void 0===a?void 0:a.document.querySelector("[data-key=".concat(t,"]"));return i}},{key:"_showThemeButton",value:function e(t){var a=this._getThemeButton(t);a&&(a.style.display="")}},{key:"_hideThemeButton",value:function e(t){var a=this._getThemeButton(t);a&&(a.style.display="none")}}]);return s}(t),a};t.default=N;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/SiteDescriptionAnnotationController.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/assertThisInitialized.js"));var c=i(a("./common/temp/node_modules/@babel/runtime/helpers/get.js"));var u=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var d=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var p=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var h=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var g=a("./src/main/webapp/frontend/packages/enums/AccessPermissions.js");var m=a("./src/main/webapp/universal/src/shared/i18n/index.ts");var f=i(a("./src/main/webapp/universal/src/shared/constants/Positions.js"));var v=i(a("./src/main/webapp/universal/src/shared/stores/AccessPermissionStore.js"));var b=i(a("./src/main/webapp/universal/src/apps/App/shared/stores/WebsiteStore/index.js"));var S=i(a("./src/main/webapp/universal/src/apps/App/shared/actions/AnnotationsActions.js"));var s=i(a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/BaseAnnotationController.js"));var y=i(a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/NodeTextEditorController.js"));var _=i(a("./src/main/webapp/universal/src/shared/utils/CMSV7Events.js"));var C=a("./src/main/webapp/universal/src/shared/utils/RteUtils.js");var E=a("./src/main/webapp/frontend/packages/universal-flags/lib/index.js");var w=a("./common/temp/node_modules/@sqs/rosetta-tokens/build/lib/index.js");var A=a("./common/temp/node_modules/@sqs/rosetta-utilities/build/lib/index.js");function T(s){var n=I();return function e(){var t=(0,p.default)(s),a;if(n){var i=(0,p.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,d.default)(this,a)}}function I(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var n=function(e){(0,u.default)(n,e);var s=T(n);function n(e,t){var a;var i=t.rootNode;(0,r.default)(this,n);a=s.call(this,e,{rootNode:i});(0,h.default)((0,l.default)(a),"afterEditableChange",function(){a.state.editable?a.renderEditor():a.destroyEditor();a.syncEditorOverlay()});(0,h.default)((0,l.default)(a),"finish",function(){a.set("dirty",false);a.renderActualWithSpacer()});a.editor=null;a.nodeRect=null;a.renderActualWithSpacer();a.addAfterChangeHandler("editable",a.afterEditableChange,(0,l.default)(a));return a}(0,o.default)(n,[{key:"destroy",value:function e(){this.nodeRect=null;(0,c.default)((0,p.default)(n.prototype),"destroy",this).call(this)}},{key:"getSiteDescription",value:function e(){var t=b.default.getState(),a=t.siteDescription;return a.get("html")}},{key:"getSiteDescriptionOrSpacer",value:function e(){var t=this.getSiteDescription();return"<p></p>"===t?"<p>&nbsp; &nbsp;</p>":t}},{key:"setSiteDescription",value:function e(t,a){return t!==a?b.default.save({siteDescription:t}):Promise.resolve()}},{key:"renderActualWithSpacer",value:function e(){this.state.rootNode.getDOMNode().innerHTML=this.getSiteDescriptionOrSpacer()}},{key:"destroyEditor",value:function e(){this.reenableLinkNavigation();if(!this.editor)return;this.editor.destroy();this.editor=null}},{key:"renderEditor",value:function e(){var t=this;this.disableLinkNavigation();var a=this.state.rootNode.getDOMNode();if(a){this.editor=new y.default(this.Y,{hostNode:a,data:this.getSiteDescription()||"",placeholder:(0,m.t)("Enter a site description…"),multiline:true,menuItems:(0,E.isRosettaRichTextToolbarLayoutEngineEnabled)((0,A.getBreakpoint)(w.breakpoints))?(0,C.getItems)({hasLink:true}):this.Y.Squarespace.Singletons.TextEditorToolbar.getItems({hasLink:true})});this.editor.addDataChangeHandler(function(){return t.set("dirty",true)})}}},{key:"save",value:function e(){return this.setSiteDescription({html:this.editor.data,raw:false,source:this.editor.data},this.getSiteDescription()).then(this.finish)}},{key:"revert",value:function e(){this.editor&&(this.editor.hostNode.innerHTML=this.getSiteDescriptionOrSpacer());return Promise.resolve().then(this.finish)}},{key:"hasPermission",value:function e(){return v.default.hasPermission(g.CONFIG_CHANGE_STRUCTURE)}},{key:"getClassificationLabel",value:function e(){return(0,m.t)("Site Description")}},{key:"getActionList",value:function e(){var t=this;return[{name:"edit",label:(0,m.t)("Edit"),handleClick:function e(){_.default.annotationClick("site-description-inline");t.set("editable",true)}}]}},{key:"getOverlayEditorAlignPoint",value:function e(){var t=this.preview.window;var a=this.nodeRect;if(!a){var i=this.state.overlayRootNode&&this.state.overlayRootNode.getDOMNode();if(i){a=i.getBoundingClientRect();this.nodeRect=a}}if(a&&a.x+a.width>3*t.innerWidth/4)return f.default.TOP_RIGHT;return(0,c.default)((0,p.default)(n.prototype),"getOverlayEditorAlignPoint",this).call(this)}},{key:"syncEditorOverlay",value:function e(){var t=this;if(!this.state.editable)return S.default.hideEditorOverlay();var a=[{name:"save",label:(0,m.t)("Save"),handleClick:function e(){return t.props.fireRequestSaveChangesEvent(t.state.model)}},{name:"cancel",label:(0,m.t)("Cancel"),handleClick:function e(){return t.props.fireRequestDiscardChangesEvent()}}];S.default.showEditorOverlay({buttons:a,hostNode:this.state.rootNode.getDOMNode(),label:(0,m.t)("Editing Site Description"),trackButtonClick:this.props.trackButtonClick})}}]);return n}(s.default);var q=n;t.default=q;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/SiteHeaderAnnotationController.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/assertThisInitialized.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/get.js"));var c=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var u=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var d=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var p=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var h=i(a("./common/temp/node_modules/alt-utils/lib/ActionListeners.js"));var g=i(a("./common/temp/node_modules/@sqs/utils/scroll/scrollTo.js"));var m=a("./src/main/webapp/universal/src/shared/i18n/index.ts");var f=a("./src/main/webapp/universal/src/shared/constants/LayoutEngineClassnames.js");var v=i(a("./src/main/webapp/universal/src/shared/utils/CMSV7Events.js"));var b=a("./src/main/webapp/universal/src/shared/utils/mediaQueries.js");var S=i(a("./src/main/webapp/universal/src/shared/dispatchers/alt/index.ts"));var y=i(a("./src/main/webapp/universal/src/apps/App/shared/stores/PageSectionsStore.js"));var _=i(a("./src/main/webapp/universal/src/apps/App/shared/actions/PageSectionsActions.js"));var C=i(a("./src/main/webapp/universal/src/apps/App/shared/actions/SiteHeaderFooterActions.js"));var E=a("./src/main/webapp/universal/src/apps/App/shared/actions/SectionsPersistenceHelper.js");var w=i(a("./src/main/webapp/universal/src/shared/stores/TweakStore.js"));var A=a("./src/main/webapp/universal/src/apps/App/shared/redux/CmsStoreProvider.js");var T=a("./src/main/webapp/universal/src/apps/App/shared/redux/selectors/siteStylesSelectors.js");var I=i(a("./src/main/webapp/universal/src/apps/App/shared/stores/SiteHeaderFooterStore.js"));var q=a("./src/main/webapp/universal/src/apps/App/shared/utils/renderSection/index.js");var s=i(a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/BaseAnnotationController.js"));var k=i(a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts"));var L=i(a("./src/main/webapp/frontend/packages/enums/Flag.js"));function D(s){var n=N();return function e(){var t=(0,d.default)(s),a;if(n){var i=(0,d.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,u.default)(this,a)}}function N(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var R="sqs-scrim-enabled";var O=function(e){(0,c.default)(s,e);var i=D(s);function s(e,t){var l;(0,n.default)(this,s);l=i.call(this,e,t);(0,p.default)((0,o.default)(l),"name","SiteHeaderAnnotationController");(0,p.default)((0,o.default)(l),"handleOnClick",function(e){if(!l.state.isScrimEnabled)return;var t=y.default.getState(),a=t.isEditing,i=t.isFooterEditing;var s=k.default.isFeatureEnabled(L.default.SEVEN_ONE_CONTEXTUAL_STYLE_EDITING_V1)?(0,T.getTweakDefinitions)(A.cmsStore.getState()):w.default.getState().tweakDefinitions;if(!l.state.isScrimEnabled||!a&&!i||0===Object.values(s).length)return;e.stopPropagation();l.hideScrim();var n=l.state.rootNode.getDOMNode().ownerDocument;var r=n.querySelector("html");var o=n.scrollingElement.scrollTop;o>0&&(0,g.default)(r,{top:0,left:0},{easing:"easeInOutSine",maxDuration:100});v.default.clickEditSiteHeader();i&&(0,E.switchFromFooterEditingToPageEditing)();k.default.isFeatureEnabled(L.default.SEVEN_ONE_FRONTEND_RENDER_HEADER)&&(0,q.preloadHeaderRenderContext)(I.default.getState());C.default.setHeaderModalOpen(true)});(0,p.default)((0,o.default)(l),"hideScrim",function(){if(!l.state.rootNode||!l.state.rootNode.getDOMNode())return;l.state.rootNode.getDOMNode().classList.remove(R);l.set("isScrimEnabled",false)});l.initializeRootNode();var a=(0,b.isMobile)()?function(){return setTimeout(l.toggleScrim.bind((0,o.default)(l)))}:l.toggleScrim;l.addAfterChangeHandler("isMouseOver",a,(0,o.default)(l));l.actionListener=new h.default(S.default);l.actionListener.addActionListener(_.default.NAVIGATE_TO_THEME_EDITOR,l.hideScrim.bind((0,o.default)(l)));return l}(0,r.default)(s,[{key:"destroy",value:function e(){(0,l.default)((0,d.default)(s.prototype),"destroy",this).call(this);if(this.actionListener){this.actionListener.removeAllActionListeners();this.actionListener=null}}},{key:"initializeRootNode",value:function e(){this.registerEventListener(this.state.rootNode.getDOMNode(),"click",this.handleOnClick);this.initializeScrim(this.state.rootNode);this.state.rootNode.getDOMNode().setAttribute("data-test","header");this.state.rootNode.getDOMNode().classList.add(f.DISABLE_DRAG_SELECTION_CLASSNAME)}},{key:"initializeScrim",value:function e(t){t.getDOMNode().setAttribute("data-edit-button-text",this.getScrimButtonText())}},{key:"reattachBaseListeners",value:function e(){this.eventListeners.forEach(function(e){var t=e.node,a=e.eventName,i=e.callback;t.removeEventListener(a,i)});this.eventListeners=[];this.attachEventListeners()}},{key:"updateHeaderNode",value:function e(t){var a=window.Y.Node(t);this.set("rootNode",a);this.set("overlayRootNode",a);this.reattachBaseListeners();this.initializeRootNode()}},{key:"showScrim",value:function e(){if(!this.state.rootNode||!this.state.rootNode.getDOMNode())return;this.state.rootNode.getDOMNode().classList.add(R);this.set("isScrimEnabled",true)}},{key:"getScrimFadeOutDuration",value:function e(){return 100}},{key:"toggleScrim",value:function e(){var t=y.default.getState(),a=t.isGalleryContentEditorOpen,i=t.isEditing,s=t.isFooterEditing;if(a)return;var n=this.state.isMouseOver;n&&(i||s)?this.showScrim():this.hideScrim()}},{key:"getScrimButtonText",value:function e(){return(0,m.t)("Edit Site Header")}}]);return s}(s.default);t.default=O;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/SiteTitleAnnotationController.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/get.js"));var c=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var u=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var d=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));function p(s){var n=h();return function e(){var t=(0,d.default)(s),a;if(n){var i=(0,d.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,u.default)(this,a)}}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var s=a("./src/main/webapp/universal/src/shared/i18n/index.ts"),g=s.t;var m=a("./common/temp/node_modules/lodash/trim.js");var f=a("./src/main/webapp/universal/src/shared/stores/AccessPermissionStore.js");var n=a("./src/main/webapp/frontend/packages/enums/AccessPermissions.js"),v=n.CONFIG_CHANGE_STRUCTURE;var b=a("./src/main/webapp/universal/src/shared/constants/Positions.js");var S=a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/BaseAnnotationController.js");var y=a("./src/main/webapp/universal/src/shared/utils/CMSV7Events.js");var _=a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts");var C=a("./src/main/webapp/frontend/packages/enums/Flag.js");var E=function(e){(0,c.default)(n,e);var s=p(n);function n(e,t){var a;var i=t.rootNode;(0,r.default)(this,n);a=s.call(this,e,{rootNode:i});a.siteTitleNodes=null;a.nodeRect=null;return a}(0,o.default)(n,[{key:"destroy",value:function e(){this.siteTitleNodes=null;this.nodeRect=null;(0,l.default)((0,d.default)(n.prototype),"destroy",this).call(this)}},{key:"hasPermission",value:function e(){return f.hasPermission(v)}},{key:"getClassificationLabel",value:function e(){return g("Site Title")}},{key:"getActionList",value:function e(){return[{name:"edit",label:g("Edit"),handleClick:this.handleEditClick}]}},{key:"getOverlayEditorAlignPoint",value:function e(){var t=this.preview.window;var a=this.nodeRect;if(!a){var i=this.state.overlayRootNode&&this.state.overlayRootNode.getDOMNode();if(i){a=i.getBoundingClientRect();this.nodeRect=a}}if(a&&a.x+a.width>3*t.innerWidth/4)return b.TOP_RIGHT;return(0,l.default)((0,d.default)(n.prototype),"getOverlayEditorAlignPoint",this).call(this)}},{key:"handleEditClick",value:function e(){y.annotationClick("site-title");var t="/design/logo-title";_.isFeatureEnabled(C.SITE_HEADER_FOOTER)&&(t="/design/site-header");this.Y.Squarespace.Singletons.Location.go(t,{shimmy:".logoSettingsPanel",focus:".logoSettingsPanel .siteTitleInput"})}},{key:"findNodesWithOriginalSiteTitle",value:function e(t){var a=this.state.rootNode.getDOMNode();var i=[].concat(Array.from(a.querySelectorAll("*")),a);this.siteTitleNodes=Array.from(i).filter(function(e){return m(e.innerHTML)===t})}},{key:"setSiteTitle",value:function e(t,a){this.siteTitleNodes||this.findNodesWithOriginalSiteTitle(a);this.siteTitleNodes.forEach(function(e){e.innerText=t})}}]);return n}(S);e.exports=E},"./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/StackedIndexAnnotationController.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var c=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/get.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var u=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var d=a("./src/main/webapp/universal/src/shared/i18n/index.ts");var p=i(a("./common/temp/node_modules/react/index.js"));var h=i(a("./common/temp/node_modules/react-dom/index.js"));var g=i(a("./src/main/webapp/universal/src/apps/App/components/IndexEditor/index.jsx"));var m=i(a("./src/main/webapp/frontend/packages/enums/CollectionTypes.js"));var f=i(a("./common/temp/node_modules/@sqs/cookie-cutter/index.js"));var v=a("./common/temp/node_modules/@sqs/styles/variables/baseDamask.js");var b=i(a("./src/main/webapp/universal/src/shared/constants/Positions.js"));var S=i(a("./src/main/webapp/universal/src/apps/App/components/Annotations/stacked-items-controller/index.js"));var l=i(a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/IndexAnnotationController.js"));var y=i(a("./src/main/webapp/universal/src/shared/utils/CMSV7Events.js"));function _(s){var n=C();return function e(){var t=(0,u.default)(s),a;if(n){var i=(0,u.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,o.default)(this,a)}}function C(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var E=function(e){(0,r.default)(l,e);var o=_(l);function l(e,t){var a;var i=t.rootNode,s=t.overlayRootNode,n=t.collection;(0,c.default)(this,l);var r={strings:{label:(0,d.t)("Index"),edit:(0,d.t)("Edit"),emptyTitle:(0,d.t)("Empty Index Page"),emptyDescription:(0,d.t)("Click the + to get started adding sections"),addPageLabel:(0,d.t)("Add index section"),editPageAnnotation:(0,d.t)("Manage sections")},pageInsertPoints:[],alwaysShowAnnotationWhenMouseOver:true,placeAnnotationInside:true};a=o.call(this,e,{rootNode:i,overlayRootNode:s,collection:n},r);a.top={};a.top.window=a.preview.window.top;a.top.document=a.top.window.document;a.top.uiMountNode=a.renderTopMountNode();a.bindTopUI();a.bindUI();return a}(0,s.default)(l,[{key:"destroy",value:function e(){this.disableSectionManager();this.onSectionDeleteHandle.detach();this.preview.window.removeEventListener("sqs-stacked-items-drag-start",this.onDragStartHandler);this.preview.document.documentElement.removeEventListener("dblclick",this.onDoubleClickHandler);this.unbindTopUI();this.removeTopMountNode();(0,n.default)((0,u.default)(l.prototype),"destroy",this).call(this)}},{key:"getPreviewFrame",value:function e(){return this.top.document.querySelector(".App")}},{key:"getPreviewFrameContent",value:function e(){return this.top.document.querySelector(".config-website-frame")}},{key:"removeTopMountNode",value:function e(){var t=this.top.uiMountNode;t.parentNode&&t.parentNode.removeChild(t)}},{key:"renderTopMountNode",value:function e(){var t=this.top.document.createElement("div");this.top.document.body.querySelector(".sqs-damask").appendChild(t);return t}},{key:"getActionList",value:function e(){var t=this;var a=[];var i=this.state,s=i.collection,n=i.childAnnotationControllers,r=void 0===n?[]:n;var o=this.getSectionSelectorsForCollection(s);if(!o||!r.length)return a;var l=this.Y.one(o.itemsContainerSelector);if(l&&l.all(o.itemSelector).getDOMNodes().length){var c=this.state.strings.editPageAnnotation;a.push({name:c,label:c,handleClick:function e(){y.default.annotationClickCollection("manage-sections",s.get("typeName"));t.enableSectionManager()}})}return a}},{key:"bindUI",value:function e(){window.CONFIG_PANEL.get("router").onChange(this.onRouterChange.bind(this));this.onDragStartHandler=this.onSectionDragStart.bind(this);this.preview.window.addEventListener("sqs-stacked-items-drag-start",this.onDragStartHandler);this.onSectionDeleteHandle=this.Y.Global.on("stack:collection:deleted",this.removeSectionForCollectionId.bind(this));this.onDoubleClickHandler=this.onSectionDoubleClick.bind(this);this.preview.document.documentElement.addEventListener("dblclick",this.onDoubleClickHandler)}},{key:"isInDragMode",value:function e(){if(!this.stackedItemsController)return false;return this.stackedItemsController.isInDragMode()}},{key:"onDamaskMouseup",value:function e(){if(!this.isInDragMode())return;this.Y.one("body").simulate("mouseup",{})}},{key:"onSectionDragStart",value:function e(){var t=new Date;t.setDate(t.getDate()+14);f.default.set("recently-reordered-section",true,{expires:t});this.renderTopUI(false);this.onDamaskMouseUpHandler=this.onDamaskMouseup.bind(this);this.top.document.body.addEventListener("mouseup",this.onDamaskMouseUpHandler)}},{key:"onSectionDoubleClick",value:function e(t){if(!this.isInDragMode())return;var a=this.getSectionElementForPoint(t.clientX,t.clientY);if(!a)return;var i=this.Y.one(a);var s=a.getBoundingClientRect();var n=this.getAcForNode(i)||this.getAcForOverlayRootNode(i);if(!n)return;if(n.state.collection.get("type")===m.default.COLLECTION_TYPE_PAGE)return;this.Y.one(this.preview.document).one(this.Y.UA.gecko||this.Y.UA.ie?"html":"body").anim({scroll:[0,this.preview.window.scrollY+s.top]},{end:function(){n.state.shimmySelector?this.Y.Squarespace.Singletons.Location.go("/pages/"+n.state.collection.get("id")):n.set("editable",true);this.disableSectionManager()}.bind(this)}).run()}},{key:"initializeEmptyIndex",value:function e(){var a=this.state.strings;this.Y.all(".sqs-helper-page-insert").each(function(e,t){return new this.Y.Squarespace.Widgets.Button({render:e,strings:{text:a.addPageLabel},className:"add-section",icon:true,onClick:function(){var e=this.getPreviewFrameContent().getBoundingClientRect();this.requestNewSection(0,{left:e.left+e.width/2-v.PANEL_WIDTH_PX/2})}.bind(this)})}.bind(this))}},{key:"ensureInitializedECForNode",value:function e(t){var a=this.getAcForNode(t);if(!a){var i=this.getOverlayRootNodeForCollectionWrapper(t);a=this.props.initializeAnnotationControllerForNode(t,i);if(!a)return;this.state.childAnnotationControllers=this.state.childAnnotationControllers||[];this.state.childAnnotationControllers.push(a)}var s=this.props.isNodeVisible(t,true);a.set("visible",s)}},{key:"renderTopUI",value:function e(t){var a={active:t,annotationController:this,showInstructions:!f.default.get("recently-reordered-section"),bridgedActions:{add:this.requestNewSection.bind(this),delete:this.requestDeleteSection.bind(this),close:this.disableSectionManager.bind(this)}};if(t){a.position=this.getPreviewFrameContent().getBoundingClientRect();a.scroll={x:this.preview.window.pageXOffset,y:this.preview.window.pageYOffset};a.scaleFactor=parseFloat(this.preview.document.body.dataset.sqsScalefactor)}h.default.render(p.default.createElement(g.default,a),this.top.uiMountNode);if(t){this.topUIBound||this.bindTopUI();return}this.unbindTopUI()}},{key:"bindTopUI",value:function e(){this.onShouldRerenderTopUI=function(){if(!this.isInDragMode())return;this.renderTopUI(true)}.bind(this);this.top.window.addEventListener("resize",this.onShouldRerenderTopUI);this.preview.window.addEventListener("scroll",this.onShouldRerenderTopUI);this.topUIBound=true}},{key:"unbindTopUI",value:function e(){this.top.window.removeEventListener("resize",this.onShouldRerenderTopUI);this.preview.window&&this.preview.window.removeEventListener("scroll",this.onShouldRerenderTopUI);this.topUIBound=false}},{key:"getPlaceHolder",value:function e(){var t=this.state.strings;return this.Y.Node.create('<div class="sqs-empty-index-placeholder"><div class="sqs-empty-index-placeholder-instructions"><h3>'+t.emptyTitle+"</h3><p>"+t.emptyDescription+'</p><span class="sqs-helper-page-insert"></span></div></div>')}},{key:"onRouterChange",value:function e(t){this.isInDragMode()&&0!==t.pathname.indexOf("/pages")&&this.disableSectionManager()}},{key:"requestNewSection",value:function e(t,a){this.Y.Squarespace.Singletons.Location.go("/pages");var i={indexCollection:this.state.collection,insertIndex:t,dialogConfig:this.Y.merge({top:window.innerHeight/3,left:window.innerWidth/2-v.PANEL_WIDTH_PX/2,anchorNode:null,overlay:true},a||{})};this.Y.Global.fire("stack:requestNewItem",i)}},{key:"requestDeleteSection",value:function e(t){var a=this.getAcForSectionIndex(t);if(!a)return;this.Y.Squarespace.Singletons.Location.go("/pages");this.Y.Global.fire("stack:collection:requestDelete",{collectionId:a.state.collection.get("id")})}},{key:"enableDragMode",value:function e(t){var a=this.state.collection.get("id");if(!this.stackedItemsController){var i=this.getSectionSelectorsForCollection(this.state.collection);this.stackedItemsController=new S.default;this.stackedItemsController.configure({previewWindow:this.preview.window,previewFrame:this.getPreviewFrameContent(),itemsContainerSelector:i.itemsContainerSelector,itemSelector:i.itemSelector})}this.stackedItemsController.enableDragMode({scaleFactor:.5,indexCollectionId:a,onDragEnd:function(){this.top.document.body.removeEventListener("mouseup",this.onDamaskMouseUpHandler)}.bind(this),onItemIndexChange:function(e){this.Y.Squarespace.Analytics.trackInternal("index_section",{action:"orderChange",from:e.dragStart.index,to:e.nextIndex});this.renderTopUI(true);this.Y.Global.fire("stack:requestReorder",{indexCollectionId:a,index:e.dragStart.index,targetIndex:e.nextIndex})}.bind(this)});if(t)return;this.awaitTransitionEnd([{node:this.getPreviewFrameContent(),transitionProperty:"transform"}],this.onSectionManagerEnterTransitionEnd.bind(this));this.Y.Global.fire("section-manager:enter",{})}},{key:"awaitTransitionEnd",value:function e(i,s){var n=0;i.forEach(function(a){var e=function e(t){if(t.srcElement!==a.node&&t.target!==a.node||t.propertyName!==a.transitionProperty)return;a.node.removeEventListener("transitionend",e);n++;a.onComplete&&a.onComplete.call(this);s&&n>=i.length&&s()};a.node.addEventListener("transitionend",e)})}},{key:"onSectionManagerEnterTransitionEnd",value:function e(){this.renderTopUI(true);var t=this.getPreviewFrame();var a="App";var i=function(e){if(!e.target.classList.contains(a))return;t.removeEventListener("click",i);this.disableSectionManager()}.bind(this);t.addEventListener("click",i);t.classList.add("zoomed")}},{key:"enableSectionManager",value:function e(){this.Y.Squarespace.Singletons.Location.go("/pages");this.enableDragMode()}},{key:"disableSectionManager",value:function e(){this.Y.Global.fire("section-manager:exit",{});this.renderTopUI(false);this.disableDragMode();if(this.top.window){var t=this.getPreviewFrame();t&&t.classList.remove("zoomed")}}},{key:"disableDragMode",value:function e(){if(!this.stackedItemsController)return;this.stackedItemsController.disableDragMode()}},{key:"getSectionForCollectionId",value:function e(t){var a=this.state.childAnnotationControllers,i=void 0===a?[]:a;var s=i.find(function(e){return e.state.collection.get("id")===t});return this.getSectionNodeForNode(s.state.rootNode)}},{key:"removeSectionForCollectionId",value:function e(a){var i=this;var t=this.getSectionForCollectionId(a.collectionId);var s=this.getStackedItemWrapperNodes().indexOf(t.getDOMNode());t.remove(true);this.preview.window.dispatchEvent(new CustomEvent("sqs-stacked-items-dom-deleted",{detail:{oldIndex:s,collectionId:a.collectionId}}));var n=this.state.childAnnotationControllers,r=void 0===n?[]:n;var o=r.filter(function(e){var t=e.state.collection.get("id")===a.collectionId;t&&i.props.removeAnnotationController(e);return!t});this.set("childAnnotationControllers",o);this.disableDragMode();this.syncChildCollectionAnnotationControllers();this.renderPlaceholder();this.enableDragMode(true);this.renderTopUI(true)}},{key:"getAcForSectionIndex",value:function e(t){var a=this.getStackedItemWrapperNodes()[t];var i=this.Y.one(a);return this.getAcForNode(i)||this.getAcForOverlayRootNode(i)}},{key:"getAcForOverlayRootNode",value:function e(t){var a=this.state.childAnnotationControllers,i=void 0===a?[]:a;return i.find(function(e){return e.state.overlayRootNode===t})}},{key:"getSectionNodeForNode",value:function e(t){var a=this.getSectionSelectorsForCollection(this.state.collection);if(!a)return;var i=t;i.getDOMNode().matches(a.itemSelector)||(i=t.ancestor(a.itemSelector));return i}},{key:"getSectionElementForPoint",value:function e(t,a){var i=this.getStackedItemWrapperNodes();var s={x:t,y:a};function n(e,t){var a=e.getBoundingClientRect();return t.x>=a.left&&t.x<=a.right&&t.y>=a.top&&t.y<=a.bottom}for(var r=0;r<i.length;r++)if(n(i[r],s))return i[r]}},{key:"getOverlayRootNodeForCollectionWrapper",value:function e(t){var a=this.getSectionNodeForNode(t);if(!this.getAcForOverlayRootNode(a))return a}},{key:"getStackedItemWrapperNodes",value:function e(){var t=this.getSectionSelectorsForCollection(this.state.collection);if(!t)return;var a=this.Y.one(t.itemsContainerSelector);var i=a.all(t.itemSelector);return i.getDOMNodes()}},{key:"getOverlayEditorAlignPoint",value:function e(){return b.default.TOP_RIGHT}},{key:"getSectionSelectorsForCollection",value:function e(t){if(!t)return;var a=this.Y.Squarespace.Navigation.ListUtils.getIndexCollectionForCollection(t);var i=this.Y.Squarespace.Navigation.ListUtils.isCollectionAStackedIndex(a);if(!i)return;var s={itemSelector:"[data-collection-id]",itemsContainerSelector:'[data-collection-id="{indexCollection.id}"]'};var n=a.getTemplateConfiguration().get("indexItemSelectors");var r=n||s;return this.substituteSelectors(this.Y.merge(r),t.toJSON(),a.toJSON())}},{key:"substituteSelectors",value:function e(t,a,i){for(var s in t){var n=this.Y.Squarespace.Lang.sub(t[s],{indexCollection:i,collection:a});t[s]=n}return t}}]);return l}(l.default);t.default=E;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/index.js":function(e,t,a){"use strict";var i=a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/BlockFieldAnnotationController.js");var s=a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/BlogAnnotationController.js");var n=a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/BusinessInformationAnnotationController.js");var r=a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/CalendarAnnotationController.js");var o=a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/ConnectedAccountsAnnotationController.js");var l=a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/ContentItemMinimalAnnotationController.js");var c=a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/GalleryAnnotationController.js");var u=a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/IndexAnnotationController.js");var d=a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/LayoutBaseAnnotationController.js");var p=a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/MusicAlbumAnnotationController.js");var h=a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/NavigationAnnotationController.js");var g=a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/PageAnnotationController.js");var m=a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/PageSectionsAnnotationController.js");var f=a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/FooterSectionsAnnotationController.js");var v=a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/PageWrapperAnnotationController.js");var b=a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/PanelLinkAnnotationController.js");var S=a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/ProductsAnnotationController.js");var y=a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/SectionsAnnotationController.js");var _=a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/SiteDescriptionAnnotationController.js");var C=a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/SiteTitleAnnotationController.js");var E=a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/SiteHeaderAnnotationController.js");var w=a("./src/main/webapp/universal/src/apps/App/components/Annotations/controllers/StackedIndexAnnotationController.js");e.exports={BlockField:i,Blog:s,BusinessInformation:n,Calendar:r,ConnectedAccounts:o,ContentItemMinimal:l,FooterSections:f,Gallery:c,Index:u,LayoutBase:d,MusicAlbum:p,Navigation:h,Page:g,PageSections:m,PageWrapper:v,PanelLink:b,Products:S,Sections:y,SiteDescription:_,SiteTitle:C,SiteHeader:E,StackedIndex:w}},"./src/main/webapp/universal/src/apps/App/components/Annotations/index.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/alt-utils/lib/connectToStores.js");var s=a("./src/main/webapp/universal/src/apps/App/components/Annotations/Annotations.jsx");var o=a("./src/main/webapp/universal/src/apps/App/shared/stores/AnnotationsStore.js");var n=i({getStores:function e(){return[o]},getPropsFromStores:function e(){var t=o.getState(),a=t.overlayEditors,i=t.editorOverlay,s=t.visible,n=t.mouseOverNode,r=t.pageSectionNodes;return{overlayEditors:a,editorOverlay:i,visible:s,mouseOverNode:n,pageSectionNodes:r}}},s);e.exports=n},"./src/main/webapp/universal/src/apps/App/components/Annotations/mixins/withCollectionBaseMixin.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/get.js"));var c=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var u=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var d=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var p=i(a("./common/temp/node_modules/lodash/merge.js"));var h=i(a("./common/temp/node_modules/lodash/get.js"));var g=i(a("./common/temp/node_modules/@sqs/utils/color/isDark.js"));var m=a("./src/main/webapp/universal/src/shared/i18n/index.ts");var f=i(a("./src/main/webapp/universal/src/shared/stores/AccessPermissionStore.js"));var v=i(a("./src/main/webapp/frontend/packages/enums/AccessPermissions.js"));var b=i(a("./src/main/webapp/universal/src/shared/utils/CMSV7Events.js"));var S=i(a("./src/main/webapp/frontend/packages/enums/CollectionTypes.js"));function y(s){var n=_();return function e(){var t=(0,d.default)(s),a;if(n){var i=(0,d.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,u.default)(this,a)}}function _(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var C="data-edit-main-image";var E="pageAnnotationEmptyMessage";var w="pageAnnotationEmptyMessageLight";var A="pageAnnotationEmptyMessageDark";var s=function e(t){return function(e){(0,c.default)(n,e);var s=y(n);function n(e,t){(0,r.default)(this,n);var a={emptyMessage:e.Y.Node.create('<div class="'.concat(E,'">')+(0,m.t)("This page is empty. Start editing and add content blocks.")+"</div>")};var i=(0,p.default)({},a,t);return s.call(this,e,i)}(0,o.default)(n,[{key:"destroy",value:function e(){if(this.addContentItemHelper){this.addContentItemHelper.destroy();this.addContentItemHelper=null}(0,l.default)((0,d.default)(n.prototype),"destroy",this).call(this)}},{key:"handleAddContentRequest",value:function e(){var t=this.state.collection;b.default.annotationClickCollection("collection-add",t.get("typeName"));if(t.get("isDemoCollection")){this.cloneCollection().then(this.handleAddContentRequest.bind(this));return}this.addContentItemHelper||(this.addContentItemHelper=new(this.Y.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Mixins.AddContentItemHandlerMixin"))({collection:t,collectionConfiguration:t.getTemplateConfiguration()}));t.get("type")===S.default.PRODUCTS?this.addContentItemHelper.handleAddContentRequest({analytics:{productPage:"cms-page-preview"}}):this.addContentItemHelper.handleAddContentRequest()}},{key:"getCollectionDialogPortal",value:function e(){return this.Y.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.CollectionDialogPortal")}},{key:"cloneCollection",value:function e(){return this.getCollectionDialogPortal().exampleContentCloneConfirmationWithCollectionId(this.state.collection.get("id"))}},{key:"showCollectionSettings",value:function e(t){var a=this.state.collection.get("id");this.getCollectionDialogPortal().showCollectionConfigurationDialog(a,t)}},{key:"examineAndInitializeMainImageToggle",value:function e(t){var a=this;if(!t)return false;if(t.hasAttribute(C)){this.mainImageToggleNodeReference=t;this.state.collection.load(function(){a.props.annotationController&&"function"===typeof a.props.annotationController.repaintRequest&&a.props.annotationController.repaintRequest()});return true}}},{key:"getMainImageToggleAction",value:function e(){var t=this;if(!f.default.hasPermission(v.default.CONFIG_CHANGE_STRUCTURE))return null;var a=this.mainImageToggleNodeReference&&this.mainImageToggleNodeReference.getDOMNode();if(!a||!a.hasAttribute(C))return null;var i=this.state.collection;if(i.get("isDemoCollection")&&!i.get("mainImageId"))return null;return{name:"banner",label:(0,m.t)("Banner"),handleClick:function e(){b.default.annotationClickCollection("collection-settings-banner",i.get("typeName"));t.showCollectionSettings("media")}}}},{key:"getCollectionSettingsAction",value:function e(){var t=this;if(!f.default.hasPermission(v.default.CONFIG_CHANGE_STRUCTURE))return null;var a=this.state.collection;return{name:"settings",label:(0,m.t)("Settings"),handleClick:function e(){b.default.annotationClickCollection("collection-settings",a.get("typeName"));t.showCollectionSettings()}}}},{key:"findMainElementBackgroundColor",value:function e(){var t=this.state.rootNode;while(t){var a=t.getComputedStyle("backgroundColor");if("transparent"!==a)return a;t=t.ancestor()}return"white"}},{key:"setEmptyMessageStyle",value:function e(t,a){if(t&&a){var i=(0,g.default)(a);if(i){t.removeClass(A);t.addClass(w)}else{t.removeClass(w);t.addClass(A)}}}},{key:"renderEmptyMessage",value:function e(){if(!(0,h.default)(this,"state.rootNode"))return;var t=this.state.rootNode.getDOMNode();if(!(0,h.default)(t,"ownerDocument.defaultView"))return;if(!this.state.model)return;if(!this.state.model.isLayoutBlank())return;var a=this.findMainElementBackgroundColor();this.setEmptyMessageStyle(this.state.emptyMessage,a);this.state.rootNode.prepend(this.state.emptyMessage)}},{key:"removeEmptyMessage",value:function e(t){this.state.emptyMessage&&this.state.emptyMessage.remove(t)}}]);return n}(t)};t.default=s;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Annotations/stacked-items-controller/dom.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var o=a("./src/main/webapp/universal/src/apps/App/components/Annotations/stacked-items-controller/static/constants.js");var l=a("./src/main/webapp/universal/src/apps/App/components/Annotations/stacked-items-controller/static/styles.js");var c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,s.default)(this,t);this.minScaleFactor=e.minScaleFactor||l.MIN_SCALE_FACTOR;this.window=e.window||window;this.previewFrame=e.previewFrame;this.itemsContainerSelector=e.itemsContainerSelector;this.itemSelector=e.itemSelector;this.itemsWithStoredStyles=[]}(0,n.default)(t,[{key:"storeItemStyles",value:function e(){var i=this;var t=this.getItems();t.forEach(function(e){var t=e.getAttribute(o.STYLE_STORE_DATA_ATTRIBUTE);var a=e.getAttribute("style");!t&&a&&e.setAttribute(o.STYLE_STORE_DATA_ATTRIBUTE,a);i.itemsWithStoredStyles.push(e)})}},{key:"restoreStyles",value:function e(){var t=this.itemsWithStoredStyles;t.forEach(function(e){var t=e.getAttribute(o.STYLE_STORE_DATA_ATTRIBUTE);t?e.setAttribute("style",t):e.removeAttribute("style");e.removeAttribute(o.STYLE_STORE_DATA_ATTRIBUTE)});this.itemsWithStoredStyles=[]}},{key:"switchDOMTree",value:function e(t,a){var i=this.getItems();var s=t.parentNode;var n=i.indexOf(t);var r=i[a];n<a&&(r=i[a+1]);s.insertBefore(t,r)}},{key:"getItems",value:function e(){var t=this.window.document.querySelector(this.itemsContainerSelector);var a=t.querySelectorAll(this.itemSelector);return Array.prototype.slice.call(a)}},{key:"getItemsWrapper",value:function e(){return this.window.document.querySelector(this.itemsContainerSelector)}},{key:"getItemAtIndex",value:function e(t){var a=this.getItems();return a[t]}},{key:"nodeIsValidDragTarget",value:function e(t){var a=this.window.document.querySelector(this.itemsContainerSelector);var i=a.querySelectorAll(this.itemSelector);return-1!==Array.prototype.indexOf.call(i,t)}},{key:"setAndStoreHeight",value:function e(a){var t=o.RELATIVE_HEIGHT_PROPS.reduce(function(e,t){a.style[t]&&e.push("".concat(t,":").concat(a.style[t]));a.style.setProperty(t,Math.round(a.offsetHeight)+"px","important");return e},[]).join(";");a.setAttribute(o.RELATIVE_HEIGHT_STORE_DATA_ATTRIBUTE,t)}},{key:"resetAndRestoreHeight",value:function e(a){var t=a.getAttribute(o.RELATIVE_HEIGHT_STORE_DATA_ATTRIBUTE);var n={};t&&t.split(";").forEach(function(e){var t=e.split(":"),a=(0,r.default)(t,2),i=a[0],s=a[1];n[i]=s});o.RELATIVE_HEIGHT_PROPS.forEach(function(e){var t=n[e]||"";a.style.setProperty(e,t)});a.removeAttribute(o.RELATIVE_HEIGHT_STORE_DATA_ATTRIBUTE)}},{key:"storeItemViewportResponsiveHeights",value:function e(){var t=this.getItems();t.forEach(this.setAndStoreHeight)}},{key:"restoreItemViewportResponsiveHeights",value:function e(){var t=this.getItems();if(!t.length)return;t.forEach(this.resetAndRestoreHeight)}},{key:"storeItemsContainerHeight",value:function e(){var t=this.getItemsWrapper();if(!t)return;this.setAndStoreHeight(t)}},{key:"restoreItemsContainerHeight",value:function e(){var t=this.getItemsWrapper();if(!t)return;this.resetAndRestoreHeight(t)}},{key:"calculateScaleFactor",value:function e(){var t=this.window.innerHeight/this.window.document.documentElement.offsetHeight;if(t>=this.minScaleFactor)return t;return this.minScaleFactor}},{key:"zoomInFrame",value:function e(){if(!this.frameWasZoomedOut)return;var t=this.previewFrame;var a=this.window;t.style.transform="";t.style.maxHeight="";t.style.height="";t.style.transformOrigin="";a.document.body.removeAttribute("data-sqs-scalefactor");this.frameWasZoomedOut=false}},{key:"zoomOutFrame",value:function e(t){this.frameWasZoomedOut=true;var a=t.scaleFactor||this.calculateScaleFactor();var i=this.previewFrame;var s=this.window;i.style.transform="scale("+a+")";i.style.maxHeight=100/a+"%";i.style.height=100/a+"%";i.style.transformOrigin="top center";s.document.body.classList.add(o.CLASS_NAME_ITEMS_REORDERING);a<1&&s.document.body.setAttribute("data-sqs-scalefactor",a)}},{key:"getComputedStyle",value:function e(t,a){return this.window.getComputedStyle(t,null).getPropertyValue(a)}}]);return t}();e.exports=c},"./src/main/webapp/universal/src/apps/App/components/Annotations/stacked-items-controller/dragger.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var g=a("./src/main/webapp/universal/src/apps/App/components/Annotations/stacked-items-controller/state.js");var r=a("./src/main/webapp/universal/src/apps/App/components/Annotations/stacked-items-controller/static/constants.js");var o=a("./src/main/webapp/universal/src/apps/App/components/Annotations/stacked-items-controller/static/frameEvents.js");var l=a("./src/main/webapp/universal/src/apps/App/components/Annotations/stacked-items-controller/static/styles.js");var c=a("./src/main/webapp/universal/src/apps/App/components/Annotations/stacked-items-controller/utils.js");var u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,s.default)(this,t);this.Dom=e.Dom;this.Transition=e.Transition;this.scrollTriggerSize=e.scrollTriggerSize||l.SCROLL_TRIGGER_SIZE;this.useAcceleratedScroll=e.useAcceleratedScroll||l.USE_ACCELERATED_SCROLL;this.scrollBaseSpeed=e.scrollBaseSpeed||l.SCROLL_SPEED}(0,n.default)(t,[{key:"getBoundingDOMRect",value:function e(t){var a=t.getBoundingClientRect();var i=this.Dom.window.document.documentElement;var s=this.Dom.window.pageYOffset||i.scrollTop;var n=this.Dom.window.pageXOffset||i.scrollLeft;var r=a.top+s;var o=a.left+n;var l={width:a.width,height:a.height,top:r,left:o,bottom:r+a.height,right:o+a.width};return l}},{key:"getBoundingElemRect",value:function e(t){var a=this.getBoundingDOMRect(t);var i=this.getBoundingDOMRect(t.parentNode);var s=a.top-i.top;var n=a.left-i.left;return{width:a.width,height:a.height,top:s,left:n,bottom:s+a.height,right:n+a.width}}},{key:"runScrollListenerLoop",value:function e(){if(!g.isInFlight)return;var t=this.getScrollRequirementsForMousePosition(g.isInFlight.mouse.client.x,g.isInFlight.mouse.client.y);(t.x||t.y)&&this.Dom.window.scrollBy(t.x,t.y);requestAnimationFrame(this.runScrollListenerLoop.bind(this))}},{key:"runDropIndexLoop",value:function e(){if(!g.isInFlight)return;var t=0;var a=this.Dom.getItems();var i=a.length;var s=a.find(function(e){return!e.classList.contains("sqs-in-flight")});var n=parseInt(this.Dom.getComputedStyle(s,"margin-top"));var r=parseInt(this.Dom.getComputedStyle(s,"margin-bottom"));var o=n+r;for(var l=0;l<i;l++){if(l===g.isInFlight.dragStart.index)continue;var c=a[l].offsetTop+g.isInFlight.dragStart.element.height+r;var u=c+o;var d=g.isInFlight.dragStart.element.top+g.isInFlight.dragTransform.top;var p=d+g.isInFlight.dragStart.element.offsetHeight;if(p>u){t++;a[l].style.transform="translate3d(0,0,0)"}else{var h=g.isInFlight.dragStart.element.height+r;a[l].style.transform="translate3d(0,"+h+"px,0)"}}g.isInFlight.nextIndex!==t&&(g.isInFlight.nextIndex=t);requestAnimationFrame(this.runDropIndexLoop.bind(this))}},{key:"prepareDragger",value:function e(t){for(var a=0;a<t.children.length;a++){t.children[a].setAttribute("data-sqs-original-pointer-event",t.children[a].style.pointerEvents);t.children[a].style.pointerEvents="none"}}},{key:"destroyDragger",value:function e(t){for(var a=0;a<t.children.length;a++){t.children[a].style.pointerEvents=t.children[a].getAttribute("data-sqs-original-pointer-event");t.children[a].removeAttribute("data-sqs-original-pointer-event")}}},{key:"buildDragStateForEvent",value:function e(t,a){var i=this.getBoundingDOMRect(this.Dom.getItemsWrapper());var s=this.getBoundingElemRect(t);var n=this.Dom.getItems().indexOf(t);var r=this.Transition.getPreflightValuesForItem(t);var o={indexCollection:{initialHeight:this.Dom.getItemsWrapper().offsetHeight},dragStart:{element:r,mouse:{top:c.getInteractionPosition(a,"page","y"),left:c.getInteractionPosition(a,"page","x")},index:n},dragTransform:{top:0,left:0,constraints:{minTransform:-s.top,maxTransform:i.height-s.bottom}},mouse:{client:{y:c.getInteractionPosition(a,"client","y"),x:c.getInteractionPosition(a,"client","x")}},item:t,nextIndex:n};return o}},{key:"beforeDragStart",value:function e(t,a){if(!this.Dom.nodeIsValidDragTarget(t.target)&&!a)return false;if(g.isInFlight)return false;o.dispatch(o.events.BEFORE_FLIGHT_START,this.Dom.window);return true}},{key:"dragStart",value:function e(t,a,i){t.preventDefault();var s=this.beforeDragStart(t,i);if(!s)return;this.Dom.storeItemStyles();g.isInFlight=this.buildDragStateForEvent(a,t);this.Transition.prepareItemForFlight(a,g.isInFlight.dragStart.element);this.Transition.prepareSiblingsForFlight(a,g.isInFlight.dragStart.index,g.isInFlight.dragStart.element);this.runDropIndexLoop();this.runScrollListenerLoop();o.dispatch(o.events.FLIGHT_START,this.Dom.window);this.Dom.window.document.body.classList.add(r.CLASS_NAME_ITEMS_REORDERING_INFLIGHT)}},{key:"drag",value:function e(t){t.preventDefault();if(!g.isInFlight)return;var a=g.isInFlight.item;var i=c.getInteractionPosition(t,"page","y");var s=g.isInFlight.dragTransform.constraints;var n=i-g.isInFlight.dragStart.mouse.top;n<s.minTransform?n=s.minTransform:n>s.maxTransform&&(n=s.maxTransform);g.isInFlight.mouse.client={y:c.getInteractionPosition(t,"client","y"),x:c.getInteractionPosition(t,"client","x")};g.isInFlight.dragTransform.top=n;a.style.transform="translate3d(0,"+n+"px,0)";o.dispatch(o.events.FLIGHT_MOVE,this.Dom.window)}},{key:"dragEnd",value:function e(t,a){if(t.eventPhase){a=t;t=null}if(!g.isInFlight)return;o.dispatch(o.events.BEFORE_FLIGHT_END,this.Dom.window);var i=g.isInFlight.item;var s=this.Transition.getDestinationValuesForItem(g.isInFlight.dragStart.index,g.isInFlight.nextIndex);this.Transition.setDestinationForFlightItem(i,g.isInFlight.dragStart.element,s);this.Transition.setDestinationForSiblings(i,g.isInFlight.dragStart.index,g.isInFlight.nextIndex);this.Transition.setStylesForSimulatedPostFlight(i);this.Dom.switchDOMTree(i,g.isInFlight.nextIndex);this.Dom.restoreStyles();o.dispatch(o.events.DOM_REORDER,this.Dom.window,{item:i,oldIndex:g.isInFlight.dragStart.index,newIndex:g.isInFlight.nextIndex});this.onItemIndexChange&&this.onItemIndexChange(g.isInFlight);g.isInFlight=null;i.classList.remove(r.CLASS_NAME_IN_FLIGHT);this.Dom.window.document.body.classList.remove(r.CLASS_NAME_ITEMS_REORDERING_INFLIGHT);t.onDragEnd&&t.onDragEnd();o.dispatch(o.events.AFTER_FLIGHT_END,this.Dom.window)}},{key:"getScrollRequirementsForMousePosition",value:function e(t,a){var i=0;var s=0;var n=1;var r=1;if(a<this.scrollTriggerSize){i=-this.scrollBaseSpeed;this.useAcceleratedScroll&&(n=Math.abs(a-this.scrollTriggerSize)/this.scrollTriggerSize)}else if(a>this.Dom.window.innerHeight-this.scrollTriggerSize){i=this.scrollBaseSpeed;if(this.useAcceleratedScroll){var o=this.scrollTriggerSize-(this.Dom.window.innerHeight-a);n=o/this.scrollTriggerSize}}return{x:s*r,y:i*n}}},{key:"initializeDraggers",value:function e(){var t=this;var a=this.Dom.getItems();a.forEach(function(e){t.prepareDragger(e)})}},{key:"destroyDraggers",value:function e(){var t=this;var a=this.Dom.getItems();if(!a)return;a.forEach(function(e){t.destroyDragger(e)})}}]);return t}();e.exports=u},"./src/main/webapp/universal/src/apps/App/components/Annotations/stacked-items-controller/frame-extension.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var r=a("./src/main/webapp/universal/src/apps/App/components/Annotations/stacked-items-controller/dom.js");var o=a("./src/main/webapp/universal/src/apps/App/components/Annotations/stacked-items-controller/dragger.js");var l=a("./src/main/webapp/universal/src/apps/App/components/Annotations/stacked-items-controller/transition.js");var d=a("./src/main/webapp/universal/src/apps/App/components/Annotations/stacked-items-controller/state.js");var p=a("./src/main/webapp/universal/src/apps/App/components/Annotations/stacked-items-controller/static/constants.js");var h=a("./src/main/webapp/universal/src/apps/App/components/Annotations/stacked-items-controller/static/frameEvents.js");var g=[];var c=function(){function e(){(0,s.default)(this,e);this.settings={itemsContainerSelector:null,itemSelector:null,previewWindow:null,previewFrame:null}}(0,n.default)(e,[{key:"configure",value:function e(t){for(var a in t)this.settings[a]=t[a];if(!this.settings.previewFrame||!this.settings.previewWindow){console.warn("Missing reference to preview frame or window");return}this.Dom=new r({window:t.previewWindow,previewFrame:t.previewFrame,itemsContainerSelector:t.itemsContainerSelector,itemSelector:t.itemSelector});this.Transition=new l({Dom:this.Dom});this.Dragger=new o({Dom:this.Dom,Transition:this.Transition});this.settings.previewFrame.style.transformOrigin="top center"}},{key:"isInDragMode",value:function e(){return d.isInDragMode}},{key:"addItemMarkers",value:function e(){var t=this.Dom.getItems();for(var a=0;a<t.length;a++)t[a].setAttribute("data-item","");var i=this.Dom.getItemsWrapper();i.setAttribute("data-item-wrapper","")}},{key:"enableDragMode",value:function e(t){var a=this;var i=this.settings.previewWindow;h.dispatch(h.events.BEFORE_FLIGHT_MODE_ENABLED,i);this.addItemMarkers();this.Dragger.onItemIndexChange=t.onItemIndexChange;d.isInDragMode=true;this.Dom.storeItemViewportResponsiveHeights();this.Dom.zoomOutFrame(t);this.onDragStart=function(e){a.Dragger.dragStart(e,e.target)};this.onDrag=this.Dragger.drag.bind(this.Dragger);this.onDragEnd=this.Dragger.dragEnd.bind(this.Dragger,t);i.document.addEventListener("touchstart",this.onDragStart,false);i.document.addEventListener("touchmove",this.onDrag,false);i.document.addEventListener("touchend",this.onDragEnd,false);i.document.addEventListener("mousedown",this.onDragStart,false);i.document.addEventListener("mousemove",this.onDrag,false);i.document.addEventListener("mouseup",this.onDragEnd,false);this.Dragger.initializeDraggers();h.dispatch(h.events.FLIGHT_MODE_ENABLED,i)}},{key:"disableDragMode",value:function e(){var t=this.settings.previewWindow;h.dispatch(h.events.BEFORE_FLIGHT_MODE_DISABLED,t);this.Dom.zoomInFrame();t.document.removeEventListener("touchstart",this.onDragStart,false);t.document.removeEventListener("touchmove",this.onDrag,false);t.document.removeEventListener("touchend",this.onDragEnd,false);t.document.removeEventListener("mousedown",this.onDragStart,false);t.document.removeEventListener("mousemove",this.onDrag,false);t.document.removeEventListener("mouseup",this.onDragEnd,false);this.Dragger.destroyDraggers();this.Dragger.onItemIndexChange=null;this.Dom.restoreItemViewportResponsiveHeights();t.document.documentElement.classList.remove(p.CLASS_NAME_ITEMS_REORDERING);t.document.body.classList.remove(p.CLASS_NAME_ITEMS_REORDERING);d.isInDragMode=false;h.dispatch(h.events.FLIGHT_MODE_DISABLED,t)}},{key:"moveItem",value:function e(i,s,n){var r=this;var o=this.settings.previewWindow;var l=this.Dom.getItemAtIndex(i);s=Math.min(s,this.Dom.getItems().length-1);if(!l||s<0||i===s)return;if(d.isInFlight){g.push({action:"moveItem",fromIndex:i,toIndex:s,opts:n});return}d.isInFlight=true;var c=this.Transition.getPreflightValuesForItem(l);var t=this.Transition.getDestinationValuesForItem(i,s);h.dispatch(h.events.BEFORE_FLIGHT_START,o);this.Dom.storeItemStyles();this.Transition.prepareItemForFlight(l,c,true);this.Transition.prepareSiblingsForFlight(l,i,c);o.document.body.classList.add(p.CLASS_NAME_ITEMS_REORDERING);o.document.body.classList.add(p.CLASS_NAME_ITEMS_REORDERING_INFLIGHT);h.dispatch(h.events.FLIGHT_MODE_ENABLED,o);h.dispatch(h.events.FLIGHT_START,o);this.Transition.setDestinationForFlightItem(l,c,t);this.Transition.setDestinationForSiblings(l,i,s);function a(){h.dispatch(h.events.FLIGHT_MOVE,o);d.isInFlight&&requestAnimationFrame(a)}a();var u=function e(){if("none"!==l.style.boxShadow)r.Transition.setStylesForSimulatedPostFlight(l);else{l.removeEventListener("transitionend",e);h.dispatch(h.events.BEFORE_FLIGHT_END,o);r.Dom.switchDOMTree(l,s);r.Dom.restoreStyles();h.dispatch(h.events.DOM_REORDER,o,{item:l,oldIndex:i,newIndex:s});l.classList.remove(p.CLASS_NAME_IN_FLIGHT);if(n.onItemIndexChange){var t={dragStart:{element:c,mouse:null,index:i},dragTransform:{top:0,left:0},item:l,nextIndex:s};n.onItemIndexChange(t)}d.isInFlight=false;o.document.body.classList.remove(p.CLASS_NAME_ITEMS_REORDERING);o.document.body.classList.remove(p.CLASS_NAME_ITEMS_REORDERING_INFLIGHT);h.dispatch(h.events.AFTER_FLIGHT_END,o);h.dispatch(h.events.FLIGHT_MODE_DISABLED,o);if(g.length){var a=g[0];r[a.action](a.fromIndex,a.toIndex,a.opts);g.shift()}}};l.addEventListener("transitionend",u)}},{key:"dragStart",value:function e(t,a){this.Dragger.dragStart(t,a,t.target)}}]);return e}();e.exports=c},"./src/main/webapp/universal/src/apps/App/components/Annotations/stacked-items-controller/index.js":function(e,t,a){"use strict";e.exports=a("./src/main/webapp/universal/src/apps/App/components/Annotations/stacked-items-controller/frame-extension.js")},"./src/main/webapp/universal/src/apps/App/components/Annotations/stacked-items-controller/state.js":function(e,t,a){"use strict";var i={isInFlight:false,isInDragMode:false};e.exports=i},"./src/main/webapp/universal/src/apps/App/components/Annotations/stacked-items-controller/static/constants.js":function(e,t,a){"use strict";var i={STYLE_STORE_DATA_ATTRIBUTE:"data-sqs-item-stored-style",RELATIVE_HEIGHT_STORE_DATA_ATTRIBUTE:"data-sqs-viewport-relative-height",RELATIVE_HEIGHT_PROPS:["height","min-height","max-height"],CLASS_NAME_IN_FLIGHT:"sqs-in-flight",CLASS_NAME_ITEMS_REORDERING:"sqs-items-reordering",CLASS_NAME_ITEMS_REORDERING_INFLIGHT:"sqs-index-drag-reordering-ready"};e.exports=i},"./src/main/webapp/universal/src/apps/App/components/Annotations/stacked-items-controller/static/frameEvents.js":function(e,t,a){"use strict";var s={BEFORE_FLIGHT_START:"sqs-stacked-items-before-drag-start",FLIGHT_START:"sqs-stacked-items-drag-start",FLIGHT_MOVE:"sqs-stacked-items-drag",BEFORE_FLIGHT_END:"sqs-stacked-items-before-drag-end",AFTER_FLIGHT_END:"sqs-stacked-items-after-drag-end",DOM_REORDER:"sqs-stacked-items-dom-reorder",BEFORE_FLIGHT_MODE_ENABLED:"sqs-stacked-items:before-flightmode-enabled",FLIGHT_MODE_ENABLED:"sqs-flight-mode-enabled",BEFORE_FLIGHT_MODE_DISABLED:"sqs-stacked-items:before-flightmode-disabled",FLIGHT_MODE_DISABLED:"sqs-flight-mode-disabled"};var i=function e(t,a,i){a.dispatchEvent(new CustomEvent(t,{detail:i}));t!==s.FLIGHT_MOVE&&t!==s.BEFORE_FLIGHT_END&&t!==s.DOM_REORDER||a.dispatchEvent(new Event("scroll"))};e.exports={events:s,dispatch:i}},"./src/main/webapp/universal/src/apps/App/components/Annotations/stacked-items-controller/static/styles.js":function(e,t,a){"use strict";var i={IN_FLIGHT:{zIndex:999,boxShadow:"0px 0px 60px rgba(0,0,0,0.2)",position:"absolute"},SIMULATED_POST_FLIGHT:{boxShadow:"none"},TRANSITION_DURATION:.5,MIN_SCALE_FACTOR:.5,SCROLL_SPEED:20,SCROLL_TRIGGER_SIZE:100,USE_ACCELERATED_SCROLL:true};e.exports=i},"./src/main/webapp/universal/src/apps/App/components/Annotations/stacked-items-controller/transition.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var o=a("./src/main/webapp/universal/src/apps/App/components/Annotations/stacked-items-controller/static/styles.js");var l=a("./src/main/webapp/universal/src/apps/App/components/Annotations/stacked-items-controller/static/constants.js");var r=a("./src/main/webapp/universal/src/apps/App/components/Annotations/stacked-items-controller/utils.js");var c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,s.default)(this,t);this.Dom=e.Dom}(0,n.default)(t,[{key:"getPreflightValuesForItem",value:function e(i){var s=this.Dom;function t(e){var t=0;for(var a=0;a<e.length;a++)t+=r.pxToNumber(s.window.getComputedStyle(i,null).getPropertyValue(e[a]));return t}var a={width:r.pxToNumber(s.window.getComputedStyle(i,null).getPropertyValue("width")),height:r.pxToNumber(s.window.getComputedStyle(i,null).getPropertyValue("height")),offsetHeight:t(["height","margin-top","margin-bottom"]),top:i.offsetTop,left:i.offsetLeft};return a}},{key:"getDestinationValuesForItem",value:function e(t,a){var i=this.Dom.getItems();var s=i[a].offsetTop;a>t&&(s=s-i[t].offsetHeight+i[a].offsetHeight);return{top:s,left:0}}},{key:"prepareItemForFlight",value:function e(t,a,i){t.classList.add(l.CLASS_NAME_IN_FLIGHT);for(var s in o.IN_FLIGHT)t.style[s]=o.IN_FLIGHT[s];for(var n in a)t.style[n]=a[n]+"px";if(i){var r=o.TRANSITION_DURATION+"s ease-in-out";t.style.transition=["transform","box-shadow"].map(function(e){return e+" "+r}).join(",")}}},{key:"prepareSiblingsForFlight",value:function e(t,a,i){var s=this.Dom.getItems();for(var n=a+1;n<s.length;n++)s[n].style.transform="translate3d(0,"+i.offsetHeight+"px, 0)"}},{key:"setDestinationForFlightItem",value:function e(t,a,i){var s=i.top-a.top;var n=i.left-a.left;t.style.transform="translate3d("+n+"px,"+s+"px,0)"}},{key:"setDestinationForSiblings",value:function e(t,a,i){var s=this.Dom.getItems();for(var n=0;n<s.length;n++){if(n===a)continue;s[n].style.transform=n===i&&a<i?"translate3d(0,0,0)":n>=i?"translate3d(0,"+t.offsetHeight+"px,0)":"translate3d(0,0,0)"}}},{key:"setStylesForSimulatedPostFlight",value:function e(t){for(var a in o.SIMULATED_POST_FLIGHT)t.style[a]=o.SIMULATED_POST_FLIGHT[a]}}]);return t}();e.exports=c},"./src/main/webapp/universal/src/apps/App/components/Annotations/stacked-items-controller/utils.js":function(e,t,a){"use strict";var i={pxToNumber:function e(t){return parseFloat(t.replace("px",""))},getInteractionPosition:function e(t,a,i){if(!t||!a||!i){console.log("Missing options");return}i=i.toUpperCase();var s=a+i;var n=t[s];"number"!==typeof n&&t.touches&&t.touches.length&&(n=t.touches[0][s]);return n}};e.exports=i},"./src/main/webapp/universal/src/apps/App/components/Annotations/utils/assignAlignPoints.js":function(e,t,a){"use strict";var n=a("./src/main/webapp/universal/src/apps/App/components/Annotations/utils/getPointOnNode.js");var r=a("./src/main/webapp/universal/src/apps/App/components/Annotations/utils/isTooClose.js");var o=a("./src/main/webapp/universal/src/apps/App/components/Annotations/utils/getNextAnchorPoint.js");var l=a("./src/main/webapp/universal/src/shared/constants/Positions.js");var i=function e(t,a){var s=[];a&&s.push({top:0,left:0});t.filter(function(e){var t=e.alignPoint;return t}).forEach(function(e){var t=e.alignPoint,a=e.referenceNodeRect;var i=n(a,t);s.push(i)});t.filter(function(e){var t=e.alignPoint;return!t}).forEach(function(e){var t=l.TOP_LEFT;var a=n(e.referenceNodeRect,t);if(null===a){console.warn("No valid point on node!");return}var i=0;while(i<5&&r(s,a)){t=o(t);a=n(e.referenceNodeRect,t);i+=1}s.push(a);e.alignPoint=t})};e.exports=i},"./src/main/webapp/universal/src/apps/App/components/Annotations/utils/attachRedirectOnCollectionDestroy.js":function(e,t,a){"use strict";function i(e,t,a){var i=e.Squarespace.Navigation.ListUtils.getParentCollection(a);return a.on(a.get("id")+"|destroy",function(){i&&e.Squarespace.Singletons.Location.pointFrameToCollection(i,true);t.replace({pathname:"/pages",state:{frameUrl:"/"}})})}e.exports=i},"./src/main/webapp/universal/src/apps/App/components/Annotations/utils/getIsSectionThemeIndicatorsVisible.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=r;var s=i(a("./src/main/webapp/universal/src/apps/App/shared/stores/PageSectionsStore.js"));var n=i(a("./src/main/webapp/universal/src/apps/App/shared/stores/FrameToolbarStore.js"));function r(){var e=s.default.getState();var t=n.default.getState(),a=t.isExpanded;if(a)return false;if(!e)return false;if(e.isColorPanelOpen)return false;if(!e.isThemeEditorOpen&&!e.isSectionThemesPanelOpen)return false;if(e.isEditing)return false;return true}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Annotations/utils/getNextAnchorPoint.js":function(e,t,a){"use strict";var i=a("./src/main/webapp/universal/src/shared/constants/Positions.js");var s=[i.TOP_LEFT,i.TOP_RIGHT,i.TOP_CENTER,i.BOTTOM_LEFT,i.BOTTOM_RIGHT,i.BOTTOM_CENTER];var n=function e(t){return s[(s.indexOf(t)+1)%s.length]};e.exports=n},"./src/main/webapp/universal/src/apps/App/components/Annotations/utils/getOverlayEditorConfigForAnnotationController.js":function(e,t,a){"use strict";var f=function e(s){return s.getActionList().map(function(e){var t=e.label,a=e.handleClick,i=e.name;return{name:i,label:t,handleClick:a.bind(s)}})};var i=function e(t,a){var i=t.getActionList();if(0===i.length)return null;var s=[];i.filter(function(e){var t=e.className;return t}).forEach(function(e){var t=e.className;return s.push(t)});s.push(a);var n=t.getOverlayEditorAlignPoint();var r=t.getId();var o=t.hasPermission();var l=t.getClassificationLabel();var c=t.getClassificationLabel();var u=f(t);var d=t.state.overlayRootNode.getDOMNode();var p=t.state.placeAnnotationInside;var h=t.state.isMouseOver;var g=t.state.visible;var m=t.props.trackButtonClick;return{key:r,hasPermission:o,label:l,instrumentationDescription:c,buttons:u,classNames:s,visible:g,referenceNode:d,alignPoint:n,placeInside:p,isMouseOver:h,trackButtonClick:m}};e.exports=i},"./src/main/webapp/universal/src/apps/App/components/Annotations/utils/getOverlayPositionStyles.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var g=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var m=a("./src/main/webapp/universal/src/shared/constants/Positions.js");var f=a("./src/main/webapp/universal/src/apps/App/components/Annotations/utils/getPointOnNode.js");var v=44;var b=a("./common/temp/node_modules/@sqs/utils/number/clamp.js");var S=a("./common/temp/node_modules/@sqs/utils/style/normalizeProperty.js");var s=function e(t,a,i,s){var n={transform:[]};var r=f(t,a);if(!r)return n;var o=i.innerWidth;var l=i.innerHeight;if([m.TOP_LEFT,m.TOP_CENTER,m.TOP_RIGHT].includes(a)){var c=l-r.top;var u=l-v;if(s){c-=v;u=Math.max(u,l-t.bottom)}c=b(c,v,u);n.bottom=0;n.transform.push("translateY(".concat(-1*Math.round(c),"px)"))}else if([m.BOTTOM_LEFT,m.BOTTOM_CENTER,m.BOTTOM_RIGHT].includes(a)){var d=r.top;d=b(d,0,l-v);n.top=0;n.transform.push("translateY(".concat(Math.round(d),"px)"))}if([m.TOP_LEFT,m.BOTTOM_LEFT].includes(a)){var p=r.left;p=b(p,0,o);n.left=0;n.transform.push("translateX(".concat(Math.round(p),"px)"))}else if([m.TOP_CENTER,m.BOTTOM_CENTER].includes(a)){n.left=Math.round(r.left);n.transform.push("translateX(-50%)")}else if([m.TOP_RIGHT,m.BOTTOM_RIGHT].includes(a)){var h=o-r.left;h=b(h,0,o);n.right=0;n.transform.push("translateX(".concat(-1*Math.round(h),"px)"))}return Object.assign({},n,(0,g.default)({},S("transform"),n.transform.join(" ")))};e.exports=s},"./src/main/webapp/universal/src/apps/App/components/Annotations/utils/getPointOnNode.js":function(e,t,a){"use strict";var n=a("./src/main/webapp/universal/src/shared/constants/Positions.js");var i=function e(t,a){if(0===t.width&&0===t.height)return null;var i=t.top;[n.BOTTOM_LEFT,n.BOTTOM_CENTER,n.BOTTOM_RIGHT].includes(a)&&(i=t.top+t.height);var s=t.left;[n.TOP_CENTER,n.BOTTOM_CENTER].includes(a)?s=t.left+t.width/2:[n.TOP_RIGHT,n.BOTTOM_RIGHT].includes(a)&&(s=t.left+t.width);return{top:i,left:s}};e.exports=i},"./src/main/webapp/universal/src/apps/App/components/Annotations/utils/isFullscreen.js":function(e,t,a){"use strict";var i=function e(t,a){return t.width>=a.innerWidth&&t.height>=a.innerHeight&&t.top<=0&&t.left<=0};e.exports=i},"./src/main/webapp/universal/src/apps/App/components/Annotations/utils/isMouseNearby.js":function(e,t,a){"use strict";var d=a("./common/temp/node_modules/@sqs/utils/number/clamp.js");var p=a("./src/main/webapp/universal/src/apps/App/components/Annotations/utils/isMouseOver.js");var h=a("./src/main/webapp/universal/src/apps/App/components/Annotations/utils/isFullscreen.js");var g=50;var i=function e(t,a,i){if(p(t,a))return h(t,i);var s=a.client.lastY;var n=a.client.lastX;var r=d(s,t.top,t.bottom);var o=d(n,t.left,t.right);var l=s-r;var c=n-o;var u=Math.sqrt(Math.pow(l,2)+Math.pow(c,2));return u<=g};e.exports=i},"./src/main/webapp/universal/src/apps/App/components/Annotations/utils/isMouseOver.js":function(e,t,a){"use strict";var i=function e(t,a){var i=a.client.lastX;var s=a.client.lastY;if(t.top>s||t.left>i)return false;if(t.top+t.height<s)return false;if(t.left+t.width<i)return false;return true};e.exports=i},"./src/main/webapp/universal/src/apps/App/components/Annotations/utils/isOnScreen.js":function(e,t,a){"use strict";var i=function e(t,a){var i=t.innerWidth;var s=t.innerHeight;if(a.top+a.height<0||a.top>s)return false;if(a.left+a.width<0||a.left>i)return false;return true};e.exports=i},"./src/main/webapp/universal/src/apps/App/components/Annotations/utils/isTooClose.js":function(e,t,a){"use strict";var c=50;var i=function e(t,a){var i=null;var s;for(var n=0;n<t.length;n++){var r=t[n].top-a.top;var o=t[n].left-a.left;var l=Math.sqrt(Math.pow(r,2)+Math.pow(o,2));if(null===i||l<s){i=t[n];s=l}}if(null===i)return false;return s<c};e.exports=i},"./src/main/webapp/universal/src/apps/App/components/Annotations/utils/shouldBeVisible.js":function(e,t,a){"use strict";var i="data-content-field";var s="main-content";var n=function e(t,a){if((0===t.width||0===t.height)&&a.getAttribute(i)!==s)return false;return true};e.exports=n},"./src/main/webapp/universal/src/apps/App/components/Annotations/utils/sortAnnotationControllers.js":function(e,t,a){"use strict";var o=function e(t){var a=0;while(t.parentNode){a++;t=t.parentNode}return a};var i=function e(t){var a=t.contentModeController,i=t.placeLastClassifications;var s=a.getHotAnnotationControllers();s.filter(function(e){return e.state.overlayRootNode&&e.state.overlayRootNode.getDOMNode()}).sort(function(e,t){var a=e.state.overlayRootNode.getDOMNode();var i=t.state.overlayRootNode.getDOMNode();var s;var n;if(a.parentNode===i.parentNode){var r=Array.from(a.parentNode.children);s=r.indexOf(a);n=r.indexOf(i)}else{s=o(a);n=o(i)}return n-s});if(i.length>0){var n=[];s=s.filter(function(e){if(i.includes(e.CLASSIFICATION)){n.push(e);return false}return true});s=s.concat(n)}return s};e.exports=i},"./src/main/webapp/universal/src/apps/App/components/Blocks/BlockEditor.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var c=i(a("./common/temp/node_modules/@babel/runtime/helpers/extends.js"));var u=i(a("./common/temp/node_modules/@babel/runtime/helpers/objectWithoutProperties.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/assertThisInitialized.js"));var d=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var p=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var h=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var g=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var m=i(a("./common/temp/node_modules/react/index.js"));var s=i(a("./common/temp/node_modules/lodash/noop.js"));var f=a("./common/temp/node_modules/@sqs/rosetta-tokens/build/lib/index.js");var v=a("./common/temp/node_modules/@sqs/rosetta-utilities/build/lib/index.js");var b=a("./common/temp/node_modules/@sqs/rosetta-styled/build/lib/index.js");var S=a("./common/temp/node_modules/@sqs/rosetta-themes/build/lib/index.js");var n=i(a("./src/main/webapp/universal/src/apps/App/components/Blocks/BlockEditorContainer.js"));var y=i(a("./src/main/webapp/universal/src/apps/App/components/Blocks/BlockEditorForm.js"));function _(s){var n=C();return function e(){var t=(0,h.default)(s),a;if(n){var i=(0,h.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,p.default)(this,a)}}function C(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var E={"mobile-0":n.default.Mobile,default:n.default.Desktop};var w=function(e){(0,d.default)(n,e);var s=_(n);function n(){var e;(0,r.default)(this,n);for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];e=s.call.apply(s,[this].concat(a));(0,g.default)((0,l.default)(e),"formRef",m.default.createRef());(0,g.default)((0,l.default)(e),"onRequestClose",function(){e.formRef.current&&e.formRef.current.handleClose();e.props.onRequestClose()});return e}(0,o.default)(n,[{key:"render",value:function e(){var t=this.props,a=t.id,i=t.isOpen,s=t.hostNode,n=(0,u.default)(t,["id","isOpen","hostNode"]);if(!i)return null;var r=(0,v.getBreakpoint)(f.breakpoints),o=r.name;var l=E[o]||E.default;return m.default.createElement(b.ThemeContext.Provider,{theme:S.rosetta.gray},m.default.createElement(l,{isOpen:i,onRequestClose:this.onRequestClose,hostNode:s},m.default.createElement(y.default,(0,c.default)({key:a,ref:this.formRef,hostNode:s},n))))}}]);return n}(m.default.Component);(0,g.default)(w,"defaultProps",{onRequestClose:s.default});var A=w;t.default=A;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Blocks/BlockEditorContainer.desktop.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var s=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=s(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var o=i(a("./common/temp/node_modules/react/index.js"));var r=s(a("./common/temp/node_modules/prop-types/index.js"));var c=a("./common/temp/node_modules/@sqs/styles/variables/baseRosetta.js");var l=a("./common/temp/node_modules/@sqs/rosetta-elements/build/lib/index.js");var u=a("./common/temp/node_modules/@sqs/rosetta-tokens/build/lib/index.js");var d=s(a("./src/main/webapp/universal/src/apps/App/shared/utils/hooks/useEventListener.js"));var p=s(a("./src/main/webapp/universal/src/apps/App/components/Blocks/JSFHeader.js"));var h=s(a("./src/main/webapp/universal/src/apps/App/components/Blocks/BlockEditorContainer.desktop.less"));function g(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function m(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?g(Object(a),true).forEach(function(e){(0,n.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var f=230;var v=320;var b=56;var S=parseInt(u.space[4]);var y=function e(t){return o.default.createElement(l.Modal.Position.DragHandle,null,o.default.createElement(p.default,t))};var _=function e(t){if(!t)return{x:0,y:0};var a=t.getBoundingClientRect(),i=a.x,s=a.y,n=a.width;var r=window.innerWidth-S-v;var o=Math.min(i+n+2*c.GRID_SIZE_PX,r);var l=s+b;return{x:o,y:l}};var C=function e(t){var a=t.hostNode,i=t.isOpen,s=t.onRequestClose,n=t.children;var r=(0,o.useRef)(_(a));(0,d.default)("click",s,{element:document.getElementById("sqs-site-frame").contentDocument.body});return o.default.createElement(l.Modal.Transition,{duration:f},i&&o.default.createElement(l.Modal,{closeOnEsc:true,className:h.default.noPointerEvents,onRequestClose:s},o.default.createElement(l.Modal.Position,{draggable:true,position:r.current,anchor:"top-left",className:h.default.noPointerEvents},o.default.createElement(l.Modal.Dialog,{className:h.default.dialogContainer},o.default.cloneElement(o.default.Children.only(n),m({},n.props,{isModalContainer:true,scrollContainerClassName:h.default.scrollContainerClassName,renderHeader:y}))))))};C.propTypes={hostNode:r.default.instanceOf(Element),isOpen:r.default.bool,onRequestClose:r.default.func};var E=C;t.default=E;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Blocks/BlockEditorContainer.desktop.less":function(e,t,a){e.exports={noPointerEvents:"BlockEditorContainer-desktop-noPointerEvents-1__VV",dialogContainer:"BlockEditorContainer-desktop-dialogContainer-3ZbyR",scrollContainerClassName:"BlockEditorContainer-desktop-scrollContainerClassName-2bcTW",customDropdownZIndexHack:"BlockEditorContainer-desktop-customDropdownZIndexHack-3Zs65",contextWithoutMargin:"BlockEditorContainer-desktop-contextWithoutMargin-bF27c"}},"./src/main/webapp/universal/src/apps/App/components/Blocks/BlockEditorContainer.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./src/main/webapp/universal/src/apps/App/components/Blocks/BlockEditorContainer.desktop.js"));var n=i(a("./src/main/webapp/universal/src/apps/App/components/Blocks/BlockEditorContainer.mobile.js"));var r={Desktop:s.default,Mobile:n.default};t.default=r;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Blocks/BlockEditorContainer.mobile.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/assertThisInitialized.js"));var c=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var u=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var d=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var p=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var h=i(a("./common/temp/node_modules/react/index.js"));var g=i(a("./common/temp/node_modules/react-dom/index.js"));var m=a("./common/temp/node_modules/@sqs/rosetta-elements/build/lib/index.js");var f=a("./common/temp/node_modules/@sqs/rosetta-tokens/build/lib/index.js");var v=i(a("./src/main/webapp/universal/src/apps/App/components/Blocks/BlockEditorContainer.mobile.less"));var b=i(a("./src/main/webapp/universal/src/apps/ConfigWebsite/ThemeContext.js"));var S=a("./common/temp/node_modules/@sqs/rosetta-themes/build/lib/index.js");var y=i(a("./src/main/webapp/universal/src/apps/App/components/Blocks/JSFHeader.js"));function s(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function _(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?s(Object(a),true).forEach(function(e){(0,p.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function C(s){var n=E();return function e(){var t=(0,d.default)(s),a;if(n){var i=(0,d.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,u.default)(this,a)}}function E(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var n=function(e){(0,c.default)(n,e);var s=C(n);function n(){var t;(0,r.default)(this,n);for(var e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];t=s.call.apply(s,[this].concat(a));(0,p.default)((0,l.default)(t),"sheetRef",h.default.createRef());(0,p.default)((0,l.default)(t),"onDockIndexChange",function(e){0===e&&t.props.onRequestClose()});(0,p.default)((0,l.default)(t),"receiveHeaderRef",function(e){t.headerNode=e});(0,p.default)((0,l.default)(t),"renderBody",function(){return h.default.createElement("div",{className:v.default.formContainer},h.default.cloneElement(h.default.Children.only(t.props.children),_({},t.props.children.props,{renderHeader:t.renderFormHeader,scrollContainerClassName:v.default.scrollContainerClassName})))});(0,p.default)((0,l.default)(t),"renderFormHeader",function(e){return t.headerNode?g.default.createPortal(h.default.createElement(y.default,e),t.headerNode):null});(0,p.default)((0,l.default)(t),"renderHeader",function(){return h.default.createElement("div",{ref:t.receiveHeaderRef,className:v.default.headerContainer})});return t}(0,o.default)(n,[{key:"componentDidMount",value:function e(){this.sheetRef.current.setDockIndex(1)}},{key:"render",value:function e(){return h.default.createElement(b.default.Provider,{theme:S.rosetta.white},h.default.createElement(m.Sheet.Portal,null,h.default.createElement(m.Sheet.Container,{zIndex:99999},h.default.createElement(m.Sheet.Drawer,{docks:[parseFloat(f.space[10]),window.innerHeight/2,window.innerHeight],draggable:true,onDockIndexChange:this.onDockIndexChange,ref:this.sheetRef,renderHeader:this.renderHeader,renderBody:this.renderBody}))))}}]);return n}(h.default.Component);var w=n;t.default=w;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Blocks/BlockEditorContainer.mobile.less":function(e,t,a){e.exports={headerContainer:"BlockEditorContainer-mobile-headerContainer-2P1kk",formContainer:"BlockEditorContainer-mobile-formContainer-3TSn8",scrollContainerClassName:"BlockEditorContainer-mobile-scrollContainerClassName-3Zhxu"}},"./src/main/webapp/universal/src/apps/App/components/Blocks/BlockEditorForm.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var s=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var o=s(a("./common/temp/node_modules/@babel/runtime/helpers/extends.js"));var d=s(a("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var l=s(a("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var c=s(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var u=s(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var p=s(a("./common/temp/node_modules/@babel/runtime/helpers/assertThisInitialized.js"));var h=s(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var r=s(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var g=s(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var m=s(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var f=s(a("./common/temp/node_modules/lodash/pickBy.js"));var v=s(a("./common/temp/node_modules/lodash/last.js"));var b=s(a("./common/temp/node_modules/lodash/isEqual.js"));var S=i(a("./common/temp/node_modules/react/index.js"));var n=s(a("./common/temp/node_modules/prop-types/index.js"));var y=i(a("./common/temp/node_modules/@sqs/jsf-fields/lib/es/main.js"));var _=a("./common/temp/node_modules/@sqs/block-editor-schemas/dist/cjs/index.js");var C=a("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var E=s(a("./src/main/webapp/universal/src/apps/App/shared/stores/FooterSectionsStore.js"));var w=s(a("./src/main/webapp/universal/src/shared/utils/TemplateVersionUtils.js"));var A=a("./src/main/webapp/universal/src/shared/utils/GoogleReCaptchaAPIAuthenticated.js");var T=s(a("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/ContentBrowserAPI.js"));var I=s(a("./src/main/webapp/universal/src/apps/App/shared/stores/WebsiteStore/index.js"));var q=a("./src/main/webapp/universal/src/apps/App/shared/utils/BlockEditorUtils.js");var k=s(a("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/shared/components/customFields/ImageField.js"));var L=s(a("./src/main/webapp/universal/src/shared/components/Form/index.js"));var D=s(a("./src/main/webapp/universal/src/shared/components/Form/fields/EmbedField.js"));var N=a("./src/main/webapp/universal/src/apps/App/shared/components/JSFHeaderContext/index.js");var R=s(a("./src/main/webapp/universal/src/apps/App/components/Blocks/customFields/SocialAccountLinks/index.js"));var O=s(a("./src/main/webapp/universal/src/apps/App/components/Blocks/errorHandling/BlockEditorDebugComponent.js"));var P=s(a("./src/main/webapp/universal/src/apps/App/components/Blocks/errorHandling/BlockEditorErrorBoundary.js"));var x=s(a("./src/main/webapp/universal/src/shared/utils/CMSV7Events.js"));var B=s(a("./src/main/webapp/universal/src/apps/App/components/Blocks/trackBlockEditorChange.js"));var M=s(a("./src/main/webapp/frontend/packages/enums/Flag.js"));var F=s(a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts"));function j(s){var n=U();return function e(){var t=(0,g.default)(s),a;if(n){var i=(0,g.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,r.default)(this,a)}}function U(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}function V(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function H(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?V(Object(a),true).forEach(function(e){(0,m.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):V(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var G=H({},y,{embed:D.default,socialaccountlinks:R.default});var W={ContentBrowserAPI:T.default};var z=_.fields.headertabs;var Y={BODY:"body",FOOTER:"footer"};var Q=function e(t){if(!w.default.isSevenOne())return{sectionArea:t.closest("footer")?Y.FOOTER:Y.BODY};return{sectionArea:E.default.getState().isEditing?Y.FOOTER:Y.BODY}};var X=function(e){(0,h.default)(r,e);var n=j(r);function r(e){var u;(0,c.default)(this,r);u=n.call(this,e);(0,m.default)((0,p.default)(u),"handleClose",function(){var e=u.state.configurations;var t=u.props,a=t.host,i=t.config.handlers;var s=I.default.getState().toJS(),n=s.captchaSettings;var r=e.environmentVariables.value.captchaSettings;(0,b.default)(n,r)||I.default.save({captchaSettings:r});i&&i.onSave&&"function"===typeof i.onSave&&i.onSave(e.default.value,e,a)});(0,m.default)((0,p.default)(u),"handleChange",function(){var t=(0,l.default)(d.default.mark(function e(a){var i,s,n,r,o,l,c;return d.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:i=a.nextConfigurations;s=u.props,n=s.onChange,r=s.config.handlers,o=s.host;l=u.state.configurations.default.value;u.setState({configurations:i});n&&u.props.onChange(i.default.value);if(!(r&&"function"===typeof r.onChange)){t.next=10;break}t.next=8;return r.onChange(o,i,W);case 8:c=t.sent;u.updateConfigurations(c);case 10:(0,B.default)(a,l);case 11:case"end":return t.stop()}},e)}));return function(e){return t.apply(this,arguments)}}());(0,m.default)((0,p.default)(u),"handleFocalPointChange",function(e){var t=u.props,a=t.config.handlers,i=t.host;a&&"function"===typeof a.onFocalPointChange&&a.onFocalPointChange(i,e)});(0,m.default)((0,p.default)(u),"updateConfigurations",function(t){t&&u.setState(function(e){return{configurations:H({},e.configurations,{},t)}})});(0,m.default)((0,p.default)(u),"renderDebugComponent",function(e){var t=u.props.blockTypeName;return S.default.createElement(O.default,(0,o.default)({},e,{blockTypeName:t}))});(0,m.default)((0,p.default)(u),"handleAfterNavigate",function(e){var t=(0,v.default)(e.history);null!==t&&void 0!==t&&t.route&&x.default.clickBlockEditorDisclosure(H({disclosureRoute:t.route},u.state.configurations.eventMetadata.value))});var t=e.blockTypeName,a=e.hostNode;u.redesignFormComponents=H({},G,{},_.fields,{headertabs:(0,N.withSetHeaderChildren)(function(a){return S.default.createElement(z,(0,o.default)({},a,{onTabChange:function e(t){return x.default.changeBlockEditorHeaderTab(H({},a.configurations.eventMetadata.value,{trackingId:t.trackingId,tabLabel:t.properties.label}))}}))}),imageuploaderwithlicensedassets:function e(t){return S.default.createElement(C.Box,{mx:1},S.default.createElement(k.default,(0,o.default)({},t,{onFocalPointChange:u.handleFocalPointChange,onSelectFile:function e(){x.default.clickAddImage(t.configurations.eventMetadata.value)}})))}});var i=I.default.getState().toJS(),s=i.captchaSettings;u.state={initialValue:e.initialValue,configurations:{default:H({},e.config,{value:e.initialValue}),environmentVariables:{schema:{type:"object",properties:{}},uiSchema:[],value:{platform:"web",device:"desktop",isCaptchaEnabled:(0,A.isCaptchaEnabled)(),captchaSettings:s,betaFlags:(0,m.default)({},M.default.NESTED_CATEGORIES,F.default.isFeatureEnabled(M.default.NESTED_CATEGORIES))}},eventMetadata:{schema:{type:"object",properties:{}},uiSchema:[],value:H({blockTypeName:t},Q(a))}}};x.default.openBlockEditorMenu(u.state.configurations.eventMetadata.value);return u}(0,u.default)(r,[{key:"getComponents",value:function e(){return(0,q.isBlockEditorV2Enabled)(this.props.blockTypeName)?this.redesignFormComponents:G}},{key:"setConfigurationsOnLoad",value:function(){var e=(0,l.default)(d.default.mark(function e(){var a,i,s;return d.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:a=this.props.config.handlers;i=this.state.configurations;if(!(a&&a.onLoad&&"function"===typeof a.onLoad)){t.next=7;break}t.next=5;return a.onLoad(i.default.value,W);case 5:s=t.sent;this.updateConfigurations(s);case 7:case"end":return t.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"componentDidMount",value:function e(){this.setConfigurationsOnLoad()}},{key:"render",value:function e(){var t=this.props,a=t.config,i=t.renderHeader,s=t.scrollContainerClassName;var n=(0,f.default)(a.meta,function(e,t){return"leftBarButton"!==t&&"rightBarButton"!==t});return a.uiSchema?S.default.createElement(N.JSFHeaderContextProvider,null,S.default.createElement(L.default,(0,o.default)({},n,{isFullHeight:true,onChange:this.handleChange,components:this.getComponents(),configurations:this.state.configurations,renderHeader:i,scrollContainerClassName:s,renderDebugComponent:this.renderDebugComponent,onAfterNavigate:this.handleAfterNavigate}))):null}}]);return r}(S.Component);(0,m.default)(X,"defaultProps",{config:{}});(0,m.default)(X,"propTypes",{blockTypeName:n.default.string.isRequired,host:n.default.object.isRequired,config:n.default.shape({schema:n.default.object,uiSchema:n.default.array,itemDefaults:n.default.array,meta:n.default.object,handlers:n.default.object}),initialValue:n.default.object,scrollContainerClassName:n.default.string});var K=S.default.forwardRef(function(e,t){return S.default.createElement(P.default,null,S.default.createElement(X,(0,o.default)({},e,{ref:t})))});t.default=K;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Blocks/BlockSelector.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var s=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=s(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var r=s(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var o=s(a("./common/temp/node_modules/@babel/runtime/helpers/assertThisInitialized.js"));var l=s(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var c=s(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var u=s(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var d=s(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var p=i(a("./common/temp/node_modules/react/index.js"));var h=s(a("./common/temp/node_modules/@sqs/core-components/fields/SearchField.js"));var g=s(a("./common/temp/node_modules/normalize-strings/index.js"));var m=a("./src/main/webapp/universal/src/shared/i18n/index.ts");var f=s(a("./common/temp/node_modules/classnames/index.js"));var v=s(a("./src/main/webapp/universal/src/apps/App/components/Blocks/BlockSelector.less"));var b=a("./src/main/webapp/universal/src/apps/App/components/Blocks/utils/blockIcons.js");function S(s){var n=y();return function e(){var t=(0,u.default)(s),a;if(n){var i=(0,u.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,c.default)(this,a)}}function y(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var _=function(e){(0,l.default)(s,e);var i=S(s);function s(){var r;(0,n.default)(this,s);for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];r=i.call.apply(i,[this].concat(t));(0,d.default)((0,o.default)(r),"state",{searchValue:""});(0,d.default)((0,o.default)(r),"inputRef",p.default.createRef());(0,d.default)((0,o.default)(r),"componentDidUpdate",function(e,t){if(!e.isOpen){r.inputRef&&r.inputRef.focus();r.state.searchValue&&r.setState({searchValue:""})}});(0,d.default)((0,o.default)(r),"handleSearch",function(e){r.setState({searchValue:e.target.value});if(13===e.keyCode){var t=e.target.value?r.getFilteredBlocks():r.props.categories;var a=t[0];if(0===a.items.length)return;var i=r.props,s=i.iconConfigs,n=i.handleIconSelect;n(s[a.items[0]],a.label,"search")}});(0,d.default)((0,o.default)(r),"clearSearch",function(){r.setState({searchValue:""})});(0,d.default)((0,o.default)(r),"getFilteredBlocks",function(){var e=r.props,t=e.categories,s=e.iconConfigs;var n=r.state.searchValue.trim().toLowerCase();var a=[{label:"filtered",items:[]}];t.forEach(function(e){var i=a[0];e.items.forEach(function(e){var t=s[e].tags;var a=t.find(function(e){return(0,g.default)(e.toLowerCase()).indexOf(n)>-1});a&&i.items.push(e)})});return a});(0,d.default)((0,o.default)(r),"renderIcon",function(e){var t=b.icons[e];if(t)return p.default.createElement(t,null);return null});return r}(0,r.default)(s,[{key:"render",value:function e(){var i=this;var t=this.state.searchValue;var a=this.props,s=a.categories,n=a.iconConfigs,r=a.handleIconSelect,o=a.isOpen;var l=t?this.getFilteredBlocks():s;if(!o)return null;return p.default.createElement(p.Fragment,null,p.default.createElement(h.default,{className:v.default.searchInput,onKeyUp:this.handleSearch,onClear:this.clearSearch,inputRef:function e(t){i.inputRef=t},searchInputProps:{"data-test":"search"}}),p.default.createElement("div",{className:v.default.iconList},l.map(function(a,e){return p.default.createElement("div",{key:a.label,className:v.default.iconContainer},p.default.createElement("div",{className:v.default.iconCategory},!t&&p.default.createElement("div",{className:v.default.iconCategoryText},a.label)),a.items.map(function(t,e){return p.default.createElement("div",{key:n[t].id,onClick:function e(){r(n[t],a.label,"click")},"aria-hidden":"true",className:(0,f.default)(v.default.iconWrapper,"sqs-react-blockicon"),"data-icon-id":t,"data-category-label":a.label},i.renderIcon(n[t].id),p.default.createElement("div",{className:v.default.iconText},n[t].label))}))}),t&&0===l[0].items.length&&p.default.createElement("div",{className:v.default.noResults},(0,m.t)("No Results"))))}}]);return s}(p.default.Component);var C=_;t.default=C;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Blocks/BlockSelector.less":function(e,t,a){e.exports={searchInput:"BlockSelector-searchInput-38xL1",iconList:"BlockSelector-iconList-3tcti",iconContainer:"BlockSelector-iconContainer-1ohTd",iconCategory:"BlockSelector-iconCategory-1UjkO",iconWrapper:"BlockSelector-iconWrapper-2vIlH",iconCategoryText:"BlockSelector-iconCategoryText-L8Ukh",iconText:"BlockSelector-iconText-5aynE",noResults:"BlockSelector-noResults-hEIW0"}},"./src/main/webapp/universal/src/apps/App/components/Blocks/JSFHeader.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/react/index.js"));var n=a("./common/temp/node_modules/@sqs/jsf-ui/lib/es/main.js");var r=a("./src/main/webapp/universal/src/apps/App/shared/components/JSFHeaderContext/index.js");var o=function e(t){var a=(0,s.useContext)(r.JSFHeaderChildrenValueContext);return a||s.default.createElement(n.Header,t)};var l=o;t.default=l;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Blocks/customFields/SocialAccountLinks/ServiceConfig.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.SERVICE_CONFIGURATION=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var n=a("./src/main/webapp/universal/src/shared/i18n/index.ts");var r=i(a("./src/main/webapp/frontend/packages/enums/ExternalServiceProviders.js"));var o;var l=(o={},(0,s.default)(o,r.default.EMAIL,{name:(0,n.t)("Add Email"),displayName:(0,n.t)("Email"),icon:"email",accountName:(0,n.t)("Email Address")}),(0,s.default)(o,r.default.FACEBOOK,{displayName:(0,n.t)("Facebook"),icon:"facebook"}),(0,s.default)(o,r.default.FACEBOOK_UNAUTH,{name:(0,n.t)("Facebook"),displayName:(0,n.t)("Facebook")}),(0,s.default)(o,r.default.LINKEDIN,{displayName:(0,n.t)("LinkedIn"),icon:"linkedin"}),(0,s.default)(o,r.default.LINKEDIN_UNAUTH,{name:(0,n.t)("LinkedIn"),displayName:(0,n.t)("LinkedIn")}),(0,s.default)(o,r.default.MEDIUM,{name:(0,n.t)("Medium"),displayName:(0,n.t)("Medium")}),(0,s.default)(o,r.default.PINTEREST,{name:(0,n.t)("Connect to Pinterest"),displayName:(0,n.t)("Pinterest"),icon:"pinterest",accountName:(0,n.t)("Pinterest Username")}),(0,s.default)(o,r.default.PINTEREST_UNAUTH,{name:(0,n.t)("Pinterest"),displayName:(0,n.t)("Pinterest"),icon:"pinterest"}),(0,s.default)(o,r.default.TUMBLR,{displayName:(0,n.t)("Tumblr"),icon:"tumblr"}),(0,s.default)(o,r.default.TUMBLR_UNAUTH,{name:(0,n.t)("Tumblr"),displayName:(0,n.t)("Tumblr")}),(0,s.default)(o,r.default.TWITTER,{displayName:(0,n.t)("Twitter"),icon:"twitter"}),(0,s.default)(o,r.default.TWITTER_UNAUTH,{name:(0,n.t)("Twitter"),displayName:(0,n.t)("Twitter")}),(0,s.default)(o,r.default.REDDIT,{name:(0,n.t)("Reddit"),displayName:(0,n.t)("Reddit"),icon:"reddit"}),(0,s.default)(o,r.default.STUMBLEUPON,{name:(0,n.t)("StumbleUpon"),displayName:(0,n.t)("StumbleUpon"),icon:"stumbleupon"}),(0,s.default)(o,r.default.HOUZZ,{name:(0,n.t)("Houzz"),displayName:(0,n.t)("Houzz"),icon:"houzz"}),(0,s.default)(o,r.default.CHOWNOW,{name:(0,n.t)("Connect to ChowNow"),displayName:(0,n.t)("ChowNow"),icon:"chownow",accountName:(0,n.t)("ChowNow Company ID")}),(0,s.default)(o,r.default.SNAPCHAT,{name:(0,n.t)("Connect to Snapchat"),displayName:(0,n.t)("Snapchat"),icon:"snapchat",accountName:(0,n.t)("Snapchat Username")}),(0,s.default)(o,r.default.IMDB,{name:(0,n.t)("IMDb"),displayName:(0,n.t)("IMDb"),icon:"imdb"}),(0,s.default)(o,r.default.GOODREADS,{name:(0,n.t)("Goodreads"),displayName:(0,n.t)("Goodreads"),icon:"goodreads"}),(0,s.default)(o,r.default.STITCHER,{name:(0,n.t)("Stitcher"),displayName:(0,n.t)("Stitcher"),icon:"stitcher"}),(0,s.default)(o,r.default.FIVEHUNDREDPIX,{displayName:(0,n.t)("500px"),icon:"500px"}),(0,s.default)(o,r.default.FIVEHUNDREDPIX_UNAUTH,{name:(0,n.t)("500px"),displayName:(0,n.t)("500px"),icon:"500px"}),(0,s.default)(o,r.default.BEHANCE,{name:(0,n.t)("Behance"),displayName:(0,n.t)("Behance"),icon:"behance"}),(0,s.default)(o,r.default.DRIBBBLE,{name:(0,n.t)("Connect to Dribbble"),displayName:(0,n.t)("Dribbble"),icon:"dribbble",accountName:(0,n.t)("Dribbble Username")}),(0,s.default)(o,r.default.DROPBOX2017,{displayName:(0,n.t)("Dropbox"),icon:"dropbox2017"}),(0,s.default)(o,r.default.DROPBOX,{displayName:(0,n.t)("Dropbox"),icon:"dropbox2017"}),(0,s.default)(o,r.default.FLICKR,{displayName:(0,n.t)("Flickr"),icon:"flickr"}),(0,s.default)(o,r.default.FLICKR_UNAUTH,{name:(0,n.t)("Flickr"),displayName:(0,n.t)("Flickr"),icon:"flickr"}),(0,s.default)(o,r.default.INSTAGRAM,{displayName:(0,n.t)("Instagram"),icon:"instagram"}),(0,s.default)(o,r.default.INSTAGRAM_UNAUTH,{name:(0,n.t)("Instagram"),displayName:(0,n.t)("Instagram"),icon:"instagram"}),(0,s.default)(o,r.default.SMUGMUG,{name:(0,n.t)("Connect to SmugMug"),displayName:(0,n.t)("SmugMug"),icon:"smugmug",accountName:(0,n.t)("SmugMug Nickname")}),(0,s.default)(o,r.default.SMUGMUG_UNAUTH,{name:(0,n.t)("SmugMug"),displayName:(0,n.t)("SmugMug"),icon:"smugmug"}),(0,s.default)(o,r.default.VSCO,{name:(0,n.t)("VSCO"),displayName:(0,n.t)("VSCO"),icon:"vsco"}),(0,s.default)(o,r.default.TWITCH,{name:(0,n.t)("Twitch"),displayName:(0,n.t)("Twitch"),icon:"twitch"}),(0,s.default)(o,r.default.VEVO,{name:(0,n.t)("Vevo"),displayName:(0,n.t)("Vevo"),icon:"vevo"}),(0,s.default)(o,r.default.VIMEO,{displayName:(0,n.t)("Vimeo"),icon:"vimeo"}),(0,s.default)(o,r.default.VIMEO_UNAUTH,{name:(0,n.t)("Vimeo"),displayName:(0,n.t)("Vimeo"),icon:"vimeo"}),(0,s.default)(o,r.default.VINE,{name:(0,n.t)("Vine"),displayName:(0,n.t)("Vine"),icon:"vine"}),(0,s.default)(o,r.default.YOUTUBE,{displayName:(0,n.t)("YouTube"),icon:"youtube"}),(0,s.default)(o,r.default.YOUTUBE_UNAUTH,{name:(0,n.t)("YouTube"),displayName:(0,n.t)("YouTube"),icon:"youtube"}),(0,s.default)(o,r.default.APPLEPODCAST,{name:(0,n.t)("Apple Podcasts"),displayName:(0,n.t)("Apple Podcasts"),icon:"applepodcast"}),(0,s.default)(o,r.default.BANDSINTOWN,{name:(0,n.t)("Bandsintown"),displayName:(0,n.t)("Bandsintown"),icon:"bandsintown"}),(0,s.default)(o,r.default.GOOGLEPLAY,{name:(0,n.t)("Google Play"),displayName:(0,n.t)("Google Play"),icon:"googleplay"}),(0,s.default)(o,r.default.ITUNES,{name:(0,n.t)("iTunes Store"),displayName:(0,n.t)("iTunes Store"),icon:"itunes"}),(0,s.default)(o,r.default.RDIO,{name:(0,n.t)("Rdio"),displayName:(0,n.t)("Rdio"),icon:"rdio"}),(0,s.default)(o,r.default.SOUNDCLOUD,{displayName:(0,n.t)("SoundCloud"),icon:"soundcloud"}),(0,s.default)(o,r.default.SOUNDCLOUD_UNAUTH,{name:(0,n.t)("SoundCloud"),displayName:(0,n.t)("SoundCloud"),icon:"soundcloud"}),(0,s.default)(o,r.default.SPOTIFY,{displayName:(0,n.t)("Spotify"),icon:"spotify"}),(0,s.default)(o,r.default.SPOTIFY_UNAUTH,{name:(0,n.t)("Spotify"),displayName:(0,n.t)("Spotify Link  "),icon:"spotify"}),(0,s.default)(o,r.default.TIDAL,{name:(0,n.t)("TIDAL"),displayName:(0,n.t)("TIDAL"),icon:"tidal"}),(0,s.default)(o,r.default.FOURSQUARE,{displayName:(0,n.t)("Foursquare Swarm"),icon:"foursquare"}),(0,s.default)(o,r.default.FOURSQUARE_UNAUTH,{name:(0,n.t)("Foursquare Swarm"),displayName:(0,n.t)("Foursquare Swarm"),icon:"foursquare"}),(0,s.default)(o,r.default.MEETUP,{name:(0,n.t)("Meetup"),displayName:(0,n.t)("Meetup"),icon:"meetup"}),(0,s.default)(o,r.default.YELP,{name:(0,n.t)("Yelp"),displayName:(0,n.t)("Yelp"),icon:"yelp"}),(0,s.default)(o,r.default.CODEPEN,{name:(0,n.t)("CodePen"),displayName:(0,n.t)("CodePen"),icon:"codepen"}),(0,s.default)(o,r.default.GITHUB,{displayName:(0,n.t)("GitHub"),icon:"github"}),(0,s.default)(o,r.default.GITHUB_UNAUTH,{name:(0,n.t)("GitHub"),displayName:(0,n.t)("GitHub"),icon:"github"}),(0,s.default)(o,r.default.GOOGLESEARCHCONSOLE,{displayName:(0,n.t)("Google Search Console"),icon:"googlesearchconsole"}),(0,s.default)(o,r.default.THEDOTS,{name:(0,n.t)("The Dots"),displayName:(0,n.t)("The Dots"),icon:"thedots"}),(0,s.default)(o,r.default.TRIPADVISOR,{name:(0,n.t)("TripAdvisor"),displayName:(0,n.t)("TripAdvisor"),icon:"tripadvisor"}),(0,s.default)(o,r.default.URL,{name:(0,n.t)("URL"),displayName:(0,n.t)("URL"),icon:"url"}),o);t.SERVICE_CONFIGURATION=l},"./src/main/webapp/universal/src/apps/App/components/Blocks/customFields/SocialAccountLinks/SocialAccountLinkEditor.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=d;var f=i(a("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var v=i(a("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var b=i(a("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var S=i(a("./common/temp/node_modules/react/index.js"));var n=i(a("./common/temp/node_modules/lodash/debounce.js"));var y=a("./src/main/webapp/universal/src/shared/i18n/index.ts");var r=i(a("./src/main/webapp/universal/src/shared/utils/UrlUtils.js"));var o=i(a("./src/main/webapp/frontend/packages/enums/ExternalServiceProviders.js"));var _=i(a("./common/temp/node_modules/@sqs/core-components/fields/StringField.js"));var C=i(a("./common/temp/node_modules/@sqs/core-components/fields/ButtonField.js"));var E=i(a("./common/temp/node_modules/@sqs/core-components/components/BackButton.js"));var w=i(a("./common/temp/node_modules/@sqs/core-components/fields/BooleanField.js"));var l=a("./src/main/webapp/universal/src/apps/App/components/Blocks/customFields/SocialAccountLinks/ServiceConfig.js");var A=i(a("./src/main/webapp/universal/src/apps/App/components/Blocks/customFields/SocialAccountLinks/matchSocialProvider.js"));var T=i(a("./src/main/webapp/universal/src/apps/App/shared/actions/ConnectedAccountsActions.js"));function c(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?c(Object(a),true).forEach(function(e){(0,s.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var I=(0,n.default)(function e(t,a){if(!t&&a)return(0,y.t)("URL not detected");return},500);function q(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];var i=(0,A.default)(e);var s=l.SERVICE_CONFIGURATION[i].name||l.SERVICE_CONFIGURATION[i].displayName;var n={profileUrl:r.default.ensureUriOrProtocol(e),username:s||""};i===o.default.EMAIL&&(n={username:e});t?T.default.updateConnectedAccount(u({},t,{},n,{url:e,iconEnabled:a})):T.default.createNonOAuthAccount(i,s,n)}function d(a){var e=S.default.useState(null),t=(0,b.default)(e,2),i=t[0],s=t[1];var n=S.default.useState(a.iconEnabled),r=(0,b.default)(n,2),o=r[0],l=r[1];var c=S.default.useState(null),u=(0,b.default)(c,2),d=u[0],p=u[1];var h=function e(){i&&i!==a.url&&q(i,a.socialAccount,o);a.pop()};S.default.useEffect(function(){a.setLeftBarButton(function(){return S.default.createElement(E.default,{onClick:h})})},[h]);var g=S.default.useCallback((0,v.default)(f.default.mark(function e(){return f.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return T.default.removeConnectedAccount(a.id);case 2:a.pop();case 3:case"end":return t.stop()}},e)})),[a.id]);var m=S.default.useCallback(function(e){var t=(0,A.default)(e);s(e);var a=I(t,e);p(a)},[s]);return S.default.createElement(S.default.Fragment,null,S.default.createElement(_.default,{label:(0,y.t)("Profile URL"),placeholder:(0,y.t)("e.g. https://twitter.com/…"),inline:false,value:null===i?a.url:i,onChange:m,errors:{message:d}}),S.default.createElement(w.default,{label:(0,y.t)("Show icon"),value:o,onChange:l}),S.default.createElement(C.default,{label:(0,y.t)("Remove"),color:"warning",onClick:g}))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Blocks/customFields/SocialAccountLinks/SocialUrlPatterns.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./src/main/webapp/frontend/packages/enums/ExternalServiceProviders.js"));var n={"^(https?://)?t.co/[a-zA-Z0-9-.]{8,}":s.default.TWITTER_UNAUTH,"itunes.apple.com/.+/podcast/":s.default.APPLEPODCAST,"500px.com":s.default.FIVEHUNDREDPIX_UNAUTH,"bandsintown.com":s.default.BANDSINTOWN,"behance.com":s.default.BEHANCE,"behance.net":s.default.BEHANCE,"codepen.com":s.default.CODEPEN,"codepen.io":s.default.CODEPEN,"dribbble.com":s.default.DRIBBBLE,"facebook.com":s.default.FACEBOOK_UNAUTH,"fb.me":s.default.FACEBOOK_UNAUTH,"flickr.com":s.default.FLICKR_UNAUTH,"foursquare.com":s.default.FOURSQUARE_UNAUTH,"4sq.com":s.default.FOURSQUARE_UNAUTH,"github.com":s.default.GITHUB_UNAUTH,"goodreads.com":s.default.GOODREADS,"imdb.com":s.default.IMDB,"instagram.com":s.default.INSTAGRAM_UNAUTH,"itunes.apple.com":s.default.ITUNES,"phobos.apple.com":s.default.ITUNES,"music.apple.com":s.default.ITUNES,"linkedin.com":s.default.LINKEDIN_UNAUTH,"medium.com":s.default.MEDIUM,"meetup.com":s.default.MEETUP,"meetu.ps":s.default.MEETUP,"pinterest.com":s.default.PINTEREST_UNAUTH,"play.google.com":s.default.GOOGLEPLAY,"reddit.com":s.default.REDDIT,"smugmug.com":s.default.SMUGMUG_UNAUTH,"snapchat.com":s.default.SNAPCHAT,"soundcloud.com":s.default.SOUNDCLOUD_UNAUTH,"spotify.com":s.default.SPOTIFY_UNAUTH,"stitcher.com":s.default.STITCHER,"the-dots.com":s.default.THEDOTS,"tidal.com":s.default.TIDAL,"tripadvisor.com":s.default.TRIPADVISOR,"tumblr.com":s.default.TUMBLR_UNAUTH,"twitch.com":s.default.TWITCH,"twitch.tv":s.default.TWITCH,"twitter.com":s.default.TWITTER_UNAUTH,"vevo.com":s.default.VEVO,"vimeo.com":s.default.VIMEO_UNAUTH,"vsco.co":s.default.VSCO,"vsco.com":s.default.VSCO,"yelp.com":s.default.YELP,"youtube.com":s.default.YOUTUBE_UNAUTH,"spotify:":s.default.SPOTIFY_UNAUTH,"houzz.":s.default.HOUZZ,"pinterest.":s.default.PINTEREST_UNAUTH,"tripadvisor.":s.default.TRIPADVISOR,"yelp.":s.default.YELP,podcast:s.default.APPLEPODCAST};t.default=n;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Blocks/customFields/SocialAccountLinks/icons/icons.less":function(e,t,a){e.exports={search:"icons-search-2d2sD",add:"icons-add-8Jq-9",clear:"icons-clear-Zqzws",clearLight:"icons-clearLight-28qkb",trash:"icons-trash-1KXuX",trashLight:"icons-trashLight-1lWbT",check:"icons-check-3MzWg",checkDark:"icons-checkDark-29Ksv",checkAfter:"icons-checkAfter-3cZpB",checkDarkAfter:"icons-checkDarkAfter-7XyP0",checkDarkSmallAfter:"icons-checkDarkSmallAfter-22jpE",checkDarkBefore:"icons-checkDarkBefore-3ttJQ",aureusCheck:"icons-aureusCheck-oMAEC",upload:"icons-upload-3WnSM",avatar:"icons-avatar-3upny",gearSmall:"icons-gearSmall-2Rzrn",pencilSmall:"icons-pencilSmall-12195",trashSmall:"icons-trashSmall-23NMO",chevronLight:"icons-chevronLight-mtjSf",chevronRight:"icons-chevronRight-5pzLt",chevronDark:"icons-chevronDark-1Ri0j",circleLogoDark:"icons-circleLogoDark-m70tJ",gettyLogo:"icons-gettyLogo-2TpMp",gettyIconLight:"icons-gettyIconLight-1qXEX",chevronUpDark:"icons-chevronUpDark-3UoWw",chevronDownDark:"icons-chevronDownDark-1e9sk",arrowDark:"icons-arrowDark-3scQY",file:"icons-file-1RMEh",shoppingCart:"icons-shoppingCart-2i9_d",squarespace:"icons-squarespace-3702C",zoomin:"icons-zoomin-1o73D",zoomout:"icons-zoomout-2Ztn8",squarespaceLight:"icons-squarespaceLight-14C51",image:"icons-image-1OV_-",facebook:"icons-facebook-2OYZI","facebook-unauth":"icons-facebook-unauth-3100-",twitter:"icons-twitter-3cwn3","twitter-unauth":"icons-twitter-unauth-2MHgP",googlesearchconsole:"icons-googlesearchconsole-1u9rb",tumblr:"icons-tumblr-3Ar_z","tumblr-unauth":"icons-tumblr-unauth-2fykE",dropbox2017:"icons-dropbox2017-2zGRG",foursquare:"icons-foursquare-3AbwZ","foursquare-unauth":"icons-foursquare-unauth-1fToL",instagram:"icons-instagram-ktW0b","instagram-unauth":"icons-instagram-unauth-2Qq6n",flickr:"icons-flickr-2Vpcu","flickr-unauth":"icons-flickr-unauth-3_klc",youtube:"icons-youtube-rNcRG","youtube-unauth":"icons-youtube-unauth-2GQyl",vimeo:"icons-vimeo-2u12H","vimeo-unauth":"icons-vimeo-unauth-by3QN",linkedin:"icons-linkedin-3g8LX","linkedin-unauth":"icons-linkedin-unauth-Ep39A",dribbble:"icons-dribbble-1yqVQ",pinterest:"icons-pinterest-2xwik","pinterest-unauth":"icons-pinterest-unauth-2MvIv",smugmug:"icons-smugmug-WlPAN","smugmug-unauth":"icons-smugmug-unauth-3sylk",fivehundredpix:"icons-fivehundredpix-1N4zA","fivehundredpix-unauth":"icons-fivehundredpix-unauth-3nyK7",email:"icons-email-1Z82v",github:"icons-github-2Gpge","github-unauth":"icons-github-unauth-GEOUc",soundcloud:"icons-soundcloud-2v_rj","soundcloud-unauth":"icons-soundcloud-unauth-12Es8",spotify:"icons-spotify-uPMnW","spotify-unauth":"icons-spotify-unauth-3LdIQ",googleplay:"icons-googleplay-mZG06",itunes:"icons-itunes-dpZLk",bandsintown:"icons-bandsintown-3NI5m",behance:"icons-behance-3zhgW",codepen:"icons-codepen-3FL16",medium:"icons-medium-2Cxib",meetup:"icons-meetup-A_cdq",rdio:"icons-rdio-2nYMi",twitch:"icons-twitch-dBd74",url:"icons-url-3CAkN",vevo:"icons-vevo-3eW06",vine:"icons-vine-1Dh18",vsco:"icons-vsco-5Dag6",yelp:"icons-yelp-1Y1py",houzz:"icons-houzz-30ccp",reddit:"icons-reddit-15vdE",stumbleupon:"icons-stumbleupon-3TKxy",chownow:"icons-chownow-3WL5-",snapchat:"icons-snapchat-1wr2U",imdb:"icons-imdb-247Kj",goodreads:"icons-goodreads-1XhEq",stitcher:"icons-stitcher-3Qf52",tidal:"icons-tidal-3S_Je",applepodcast:"icons-applepodcast-1NqrH",thedots:"icons-thedots-23csH",tripadvisor:"icons-tripadvisor-1Zvum"}},"./src/main/webapp/universal/src/apps/App/components/Blocks/customFields/SocialAccountLinks/index.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var n=i(a("./common/temp/node_modules/react/index.js"));var r=i(a("./common/temp/node_modules/classnames/index.js"));var o=a("./src/main/webapp/universal/src/shared/i18n/index.ts");var l=i(a("./common/temp/node_modules/@sqs/core-components/fields/DisclosureField.js"));var c=i(a("./common/temp/node_modules/@sqs/core-components/fields/ButtonField.js"));var u=i(a("./src/main/webapp/universal/src/apps/App/components/Blocks/customFields/SocialAccountLinks/SocialAccountLinkEditor.js"));var d=i(a("./common/temp/node_modules/alt-utils/lib/connectToStores.js"));var p=i(a("./src/main/webapp/universal/src/apps/App/shared/stores/ConnectedAccountsStore.js"));var h=i(a("./src/main/webapp/universal/src/apps/App/components/Blocks/customFields/SocialAccountLinks/icons/icons.less"));function g(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function m(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?g(Object(a),true).forEach(function(e){(0,s.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function f(a,e){var i=n.default.useCallback(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a.history.push(m({},t,{configurationId:a.configurationId,uiSchema:[{component:e,$mapping:a.$mapping}]}))},[a.history,a.configurationId,a.$mapping,e.scope]);return n.default.createElement(n.default.Fragment,null,a.connectedAccounts.map(function(t){return n.default.createElement(l.default,{label:t.screenname,icon:n.default.createElement("div",{className:(0,r.default)(h.default.image,h.default[t.serviceName])}),onClick:function e(){return i(function(){return n.default.createElement(u.default,{id:t.id,name:t.screenname,url:t.profileUrl,iconEnabled:t.iconEnabled,socialAccount:t,pop:a.history.pop,setLeftBarButton:a.setLeftBarButton})})}})}),n.default.createElement(c.default,{label:(0,o.t)("Add a link"),alignment:"indented",onClick:function e(){return i(function(){return n.default.createElement(u.default,{pop:a.history.pop,setLeftBarButton:a.setLeftBarButton})})}}))}var v=(0,d.default)({getStores:function e(t){return[p.default]},getPropsFromStores:function e(t){var a=p.default.getState(),i=a.connectedAccounts;return{connectedAccounts:i}}},f);t.default=v;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Blocks/customFields/SocialAccountLinks/matchSocialProvider.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=l;var s=i(a("./src/main/webapp/universal/src/apps/App/components/Blocks/customFields/SocialAccountLinks/SocialUrlPatterns.js"));var n=i(a("./src/main/webapp/frontend/packages/enums/ExternalServiceProviders.js"));var r=i(a("./src/main/webapp/universal/src/shared/utils/UrlUtils.js"));var o=i(a("./src/main/webapp/universal/src/shared/utils/EmailUtils.js"));function l(e){var t=Object.keys(s.default);if(o.default.isValidEmail(e))return n.default.EMAIL;for(var a=0;a<t.length;a++)if(e.match(t[a]))return s.default[t[a]];if(r.default.isProperUrl(e)||e.match(r.default.URI_REGEX))return n.default.URL;return false}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Blocks/errorHandling/BlockEditorDebugComponent.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/react/index.js"));var r=a("./common/temp/node_modules/@sqs/jsf-ui/lib/es/main.js");var o=i(a("./src/main/webapp/universal/src/apps/App/components/Blocks/errorHandling/BlockEditorSentry.js"));var n=function e(n){(0,s.useEffect)(function(){var e=n.configurations.environmentVariables;var t=e.value,a=t.device,i=t.platform;var s="The error occurred in the '".concat(n.blockTypeName,"' block editor within in \n      the '").concat(n.component.type,"' field.\n      \n      The editor scope is '").concat(n.scope,"'.\n      \n      The error was thrown on a '").concat(a,"' device on the '").concat(i,"' platform");o.captureMessage(s)},[]);return s.default.createElement(r.DebugComponent,n)};var l=n;t.default=l;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Blocks/errorHandling/BlockEditorErrorBoundary.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var s=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=s(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var r=s(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var o=s(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var l=s(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var c=s(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var u=i(a("./common/temp/node_modules/react/index.js"));var d=a("./src/main/webapp/universal/src/shared/i18n/index.ts");var p=a("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var h=i(a("./src/main/webapp/universal/src/apps/App/components/Blocks/errorHandling/BlockEditorSentry.js"));function g(s){var n=m();return function e(){var t=(0,c.default)(s),a;if(n){var i=(0,c.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,l.default)(this,a)}}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var f=function e(){return u.default.createElement(p.Flex,{py:10,css:{height:"100%"},justifyContent:"center"},u.default.createElement(p.Box,{maxWidth:400,css:{textAlign:"center",alignSelf:"center"}},u.default.createElement(p.Text.Title,{color:"gray.300"},(0,d.t)("Something went wrong"))))};var v=function(e){(0,o.default)(i,e);var a=g(i);function i(e){var t;(0,n.default)(this,i);t=a.call(this,e);t.state={error:null};return t}(0,r.default)(i,[{key:"componentDidCatch",value:function e(t,a){var i=a.componentStack;this.setState({error:t});h.captureException(t,{contexts:{componentStack:i}})}},{key:"render",value:function e(){var t=this.state.error;var a=this.props.children;return t?u.default.createElement(f,null):a}}]);return i}(u.Component);var b=v;t.default=b;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Blocks/errorHandling/BlockEditorSentry.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.addBreadcrumb=t.captureException=t.captureMessage=void 0;var s=i(a("./src/main/webapp/frontend/packages/enums/Flag.js"));var n=i(a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts"));var r=[s.default.BLOCK_EDITORS_P0,s.default.BLOCK_EDITORS_P1,s.default.BLOCK_EDITORS_P2];var o=function e(t,a){var i=a.context,s=a.level;t.setTag("project","block-editor");r.forEach(function(e){return t.setTag("flag.".concat(e),n.default.isFeatureEnabled(e))});i&&t.setExtra("context",JSON.stringify(i));s&&t.setLevel(s)};var l=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var i=a.context;var s=window.SQUARESPACE_SENTRY;s?s.withScope(function(e){o(e,a);s.captureMessage(t)}):console.error("[block-editor Sentry] ".concat(t),i)};t.captureMessage=l;var c=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var i=a.context;var s=window.SQUARESPACE_SENTRY;s?s.withScope(function(e){o(e,a);s.captureException(t)}):console.error("[block-editor Sentry] ".concat(t),i)};t.captureException=c;var u=function e(t){window.SQUARESPACE_SENTRY&&window.SQUARESPACE_SENTRY.addBreadcrumb(t)};t.addBreadcrumb=u},"./src/main/webapp/universal/src/apps/App/components/Blocks/trackBlockEditorChange.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var m=i(a("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));var n=i(a("./common/temp/node_modules/lodash/debounce.js"));var r=a("./common/temp/node_modules/@sqs/jsf-utils/lib/es/main.js");var f=i(a("./src/main/webapp/universal/src/shared/utils/CMSV7Events.js"));function o(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function v(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?o(Object(a),true).forEach(function(e){(0,s.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var b=r.jsonPointerUtils.getJsonPointerValue;var S=(0,n.default)(function(e){return f.default.inputBlockEditorUrl(e)},400);var y=(0,n.default)(f.default.changeFocalPoint,400);var _=function e(t,a){var i=t.properties.enum.indexOf(a);return t.properties.enumAnnotation[i].label};var C={BUTTON:"button",IMAGE:"image",VIDEO:"video",SUMMARY_V2:"summary_v2"};var l=function e(t,a){var i=t.changes,s=t.modifiedUiSubschema,n=t.nextConfigurations;var r=i.default.diff;var o=(0,m.default)(Object.entries(r)[0],2),l=o[0],c=o[1];var u=n.eventMetadata.value.blockTypeName;if("#/combinationAnimation"===l)f.default.changeBlockAnimation(v({value:c,displayName:_(s,c)},n.eventMetadata.value));else if("#/layout"===l)f.default.changeBlockCaptionLayout(v({displayName:_(s,c),value:c},n.eventMetadata.value));else if(u===C.BUTTON&&"#/buttonSize"===l||u===C.SUMMARY_V2&&"#/textSize"===l)f.default.changeBlockSize(v({displayName:_(s,c),value:c},n.eventMetadata.value));else if(u===C.BUTTON&&"#/buttonAlignment"===l||u===C.SUMMARY_V2&&"#/textAlignment"===l||u===C.SUMMARY_V2&&"#/imageAlignment"===l){var d={"#/buttonAlignment":"alignment","#/textAlignment":"text-alignment","#/imageAlignment":"image-alignment"};f.default.changeBlockAlignment(v({alignmentType:d[l],value:c},n.eventMetadata.value))}else if(u===C.VIDEO&&"#/customThumb"===l||u===C.IMAGE&&"#/imageId"===l){var p=b(a,l);p!==c?f.default.changeBlockImage(v({value:c,prevValue:p},n.eventMetadata.value)):y(n.eventMetadata.value)}else if("layoutpicker"===s.type)f.default.changeBlockDesignLayout(v({value:c,displayName:_(s,c)},n.eventMetadata.value));else if(["linkeditor","embed"].includes(s.type)){if(s.trackingId){var h=s.$mapping.url;var g=r[h];b(a,h)!==g&&S(v({trackingId:s.trackingId,value:g},n.eventMetadata.value))}}else"boolean"===s.type&&s.trackingId&&f.default.changeBlockToggle(v({trackingId:s.trackingId,value:c,displayName:s.properties.label},n.eventMetadata.value))};var c=l;t.default=c;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Blocks/utils/blockIcons.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");Object.defineProperty(t,"__esModule",{value:true});t.icons=void 0;var s=i(a("./common/temp/node_modules/@sqs/rosetta-icons/build/lib/index.js"));var n={html:s.Text,image:s.Image,button:s.ImageBlockPoster,form:s.BulletedList,video:s.Video,gallery:s.Gallery,spacer:s.AspectRatioAnamorphicHorizontal,audio:s.Album,newsletter:s.Mail,"horizontal-rule":s.Line,quote:s.Quote,map:s.Location,embed:s.Download,markdown:s.TextArea,code:s.Code,summary:s.Slideshow,menu:s.RestaurantMenu,calendar:s.Events,"social-links":s.SocialLInks,chart:s.BarChart,product:s.Product,donation:s.Currency,acuity:s.Time,instagram:s.LogoInstagram,twitter:s.LogoTwitter,zola:s.LogoZola,amazon:s.LogoAmazon,soundcloud:s.LogoSoundCloud,flickr:s.LogoFlickr,rss:s.LogoRss,fivehundredpix:s.Logo500Px,opentable:s.LogoOpenTable,tourdates:s.LogoBandsintown,foursquare:s.LogoFoursquare,search:s.Search,tagcloud:s.Tag,"collection-link":s.Link,archive:s.Archive};t.icons=n},"./src/main/webapp/universal/src/apps/App/components/Catalog/CatalogSingleViewList.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/react/index.js"));var n=i(a("./common/temp/node_modules/prop-types/index.js"));var r=i(a("./src/main/webapp/universal/src/apps/App/components/Catalog/CategoryViewListItem.js"));var o=function e(t){return s.default.createElement("div",{className:"catalog-item-one-column-center-list catalog-list-column"},t.items.map(function(e,t){var a=e.html,i=e.title;return s.default.createElement(r.default,{key:"listItem"+t,html:a,title:i})}))};o.propTypes={items:n.default.arrayOf(n.default.shape({html:n.default.string.isRequired,title:n.default.string})).isRequired};var l=o;t.default=l;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Catalog/CatalogView.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/toConsumableArray.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var c=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var u=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var d=i(a("./common/temp/node_modules/lodash/noop.js"));var p=i(a("./common/temp/node_modules/lodash/isEmpty.js"));var f=i(a("./common/temp/node_modules/lodash/debounce.js"));var h=i(a("./common/temp/node_modules/react/index.js"));var g=i(a("./common/temp/node_modules/react-dom/index.js"));var s=i(a("./common/temp/node_modules/prop-types/index.js"));var m=a("./src/main/webapp/universal/src/shared/i18n/index.ts");var v=a("./src/main/webapp/universal/src/shared/constants/LayoutEngineClassnames.js");var b=a("./src/main/webapp/universal/src/shared/utils/Loggers.ts");var S=i(a("./src/main/webapp/universal/src/apps/App/shared/actions/PageSectionsActions.js"));var y=a("./common/temp/node_modules/@sqs/rosetta-tokens/build/lib/index.js");var _=a("./common/temp/node_modules/@sqs/rosetta-utilities/build/lib/index.js");var C=i(a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts"));var E=i(a("./src/main/webapp/frontend/packages/enums/Flag.js"));var w=i(a("./src/main/webapp/universal/src/apps/App/components/Catalog/CatalogSingleViewList.js"));var A=i(a("./src/main/webapp/universal/src/apps/App/components/Catalog/CatalogViewList.js"));var T=i(a("./src/main/webapp/frontend/packages/enums/PageCategories.js"));var I=i(a("./src/main/webapp/frontend/packages/enums/SectionCategories.js"));function q(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function k(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?q(Object(a),true).forEach(function(e){(0,u.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):q(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var L="sqs-mobile-web-catalog-visible";var D=(0,b.createLogger)("catalog","#357");var N=100;var R=516;var O=308;var P=[T.default.TEAM,T.default.MENU,I.default.PRODUCTS,I.default.MENU,I.default.TEXT,I.default.SOCIAL,I.default.CALENDAR,I.default.CHART,I.default.FAQS,I.default.LOGO_WALL,I.default.MUSIC];var x=function(){function s(e){var a=this;var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,l.default)(this,s);(0,u.default)(this,"setLoadedCategories",function(e){if(!a.selectedCategory){D("no selected category");return}var t=a.containerNode.querySelector("[class*='sqs-categories-disabled']");t.classList.remove("sqs-categories-disabled");a.selectedCategoryEntries=a.options.getEntriesForCategory(a.selectedCategory);a.categories=e;a.renderCatalog()});(0,u.default)(this,"registerImageLoadCallback",function(e,t){a.imageLoadHandlers=a.imageLoadHandlers||{};a.imageLoadHandlers[e]=t});(0,u.default)(this,"onImageLoad",function(e){var t=e.split("?")[0];a.imageLoadHandlers[t]&&a.imageLoadHandlers[t]()});false;this.rootNode=e;this.options=t;this.timeouts=[];this.refreshAllEntryCatalogNodesListener=null;this.isSingleColumnMode=false;this.leftList=[];this.rightList=[];this.centerList=[];this.selectedCategory=this.getFirstSelectedCategory();this.escManagerTarget={close:t.onCloseCatalog||d.default,ignoreBodyClicks:true};this.landscapeAttributionMessage=(0,m.t)("Landscape photography shot at Aro Ha");this.genericAttributionMessage=(0,m.t)("Images shot at Aro Ha");this.createCatalog()}(0,c.default)(s,[{key:"getFirstSelectedCategory",value:function e(){return this.options.selectedCategory||this.options.categoryOrder[0]}},{key:"createCatalog",value:function e(){var t=this.rootNode.ownerDocument.createElement("div");t.classList.add("sqs-catalog");t.classList.add(v.DISABLE_DRAG_SELECTION_CLASSNAME);t.setAttribute("data-test","catalog");t.innerHTML='\n    <div class="sqs-catalog-scrim">\n      <div class="sqs-catalog-container">\n        <div class="sqs-catalog-content">\n          <div class="sqs-catalog-sidebar .sqs-categories-disabled">\n            <div class="sqs-catalog-close-container">\n              <button class="sqs-catalog-close">'.concat((0,m.t)("Close"),'</button>\n            </div>\n            <h1 class="sqs-catalog-title">').concat(this.options.title,'</h1>\n            <div class="sqs-catalog-categories-container"></div>\n          </div>\n          <div class="sqs-catalog-item-list">\n            <div class="sqs-catalog-back">\n              <span>\n                <svg\n                  width="22"\n                  height="22"\n                  viewBox="0 0 22 22"\n                  fill="none"\n                  xmlns="http://www.w3.org/2000/svg"\n                >\n                  <rect\n                    fill="black"\n                    width="0"\n                    height="2"\n                    x="7"\n                    y="10"\n                  />\n                  <path\n                    fill="black"\n                    d="M15.75 4H13L6 11L13 18H15.75L8.75 11L15.75 4Z"\n                  />\n                </svg>\n              </span>\n              <span>').concat((0,m.t)("Back"),"</span>\n            </div>\n            ").concat(this.getCatalogListHtml(),"\n          </div>\n        </div>\n      </div>\n    </div>\n    ");this.parentContainerNode=t;this.containerNode=t.querySelector(".sqs-catalog-content");this.bindCatalog()}},{key:"getCatalog",value:function e(){return this.parentContainerNode}},{key:"isReactItems",value:function e(){return C.default.isFeatureEnabled(E.default.SEVEN_ONE_CATALOG_PERFORMANCE_IMPROVEMENTS)}},{key:"getCatalogListHtml",value:function e(){var t=this.isReactItems();if(t)return"";return'<div class="catalog-item-two-column-left-list catalog-list-column"></div>\n      <div class="catalog-item-two-column-right-list catalog-list-column"></div>\n      <div class="catalog-item-one-column-center-list catalog-list-column"></div>'}},{key:"renderCategories",value:function e(t){var s=this;var n=t.reduce(function(e,t){return k({},e,(0,u.default)({},t.category,t))},{});return this.options.categoryOrder.filter(function(e){return"-"===e||!!n[e]}).map(function(e){if("-"===e)return'<li class="sqs-catalog-divider"></li>';var t=n[e];var a=t.active?"active-link":"";var i=s.options.categoryMessageBundle[t.category];return"\n            <li>\n              ".concat(s.buildSidebarItem({category:t.category,className:a,text:i}),"\n            </li>\n          ")}).join("")}},{key:"bindCatalog",value:function e(){var a=this;var i=this.containerNode,t=this.parentContainerNode;i.querySelector(".sqs-catalog-close").addEventListener("click",function(e){e.stopPropagation();a.options.onCloseCatalog()});i.querySelector(".sqs-catalog-back").addEventListener("click",function(e){e.stopPropagation();i.classList.remove(L)});t.querySelector(".sqs-catalog-scrim").addEventListener("click",function(e){if(e.target.classList.contains("sqs-catalog-container")){e.stopPropagation();a.options.onCloseCatalog()}});i.querySelector(".sqs-catalog-item-list").addEventListener("click",function(e){var t=a.getSelectedOption(e.target);if(!t)return;a.options.onSelectItem(t,a.selectedCategory);i.classList.remove(L)});i.addEventListener("load",function(e){if("IMG"!==e.target.tagName)return;a.onImageLoad(e.target.src)},true);if(!this.escTargetAdded){window.Y.Squarespace.EscManager.addTarget(this.escManagerTarget);this.escTargetAdded=true}}},{key:"bindCatalogLinks",value:function(){var e=(0,o.default)(r.default.mark(function e(){var a=this;var i,s;return r.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:i=this.containerNode;s=Array.from(i.querySelectorAll(".sqs-catalog-link"));s.forEach(function(e){e.addEventListener("click",function(e){a.handleCategoryClick(e.target);i.classList.add(L)})});case 3:case"end":return t.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getSelectedOption",value:function e(t){var a;a=t.classList.contains("sqs-page-title")?t.parentElement.querySelector(this.options.entrySelector):t.closest(this.options.entrySelector);return a}},{key:"renderCatalog",value:function e(){var t=this.options.sidebarConfig;if(t&&t[this.selectedCategory]){(this.isMobileWeb()||this.isTabletWeb())&&this.containerNode.classList.add("single-view");this.renderSingleCategorySidebar(this.selectedCategory,t[this.selectedCategory])}else{(this.isMobileWeb()||this.isTabletWeb())&&this.containerNode.classList.remove("single-view");this.renderCategorySidebar(this.categories,this.selectedCategory)}this.renderCategory(this.selectedCategory);this.registerTimer(this.shouldSwitchColumnMode.bind(this),400)}},{key:"handleRefreshAllEntryCatalogNodes",value:function e(){var t=this;var a=this.getAllEntryNodes();if(!a)return;this.shouldSwitchColumnMode();a.forEach(function(e){t.handleRefreshEntryCatalogNode(e)})}},{key:"handleRefreshEntryCatalogNode",value:function e(t){this.scaleEntry(t)}},{key:"scaleEntry",value:function e(t){var a=this;var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!t||!t.ownerDocument||!t.ownerDocument.defaultView)return;if(i>3){console.warn("Failed to scale! Send to sentry!");return}var s=this.containerNode.ownerDocument.querySelector(".sqs-catalog-item-list");var n=t.closest('[class*="catalog-list-column"]');var r=n&&n.classList;var o=2;r&&r.contains("catalog-item-one-column-center-list")&&(o=1);var l=s&&s.offsetWidth;var c=t.offsetWidth;if(!c){D("No entry width to scale from entry");this.registerTimer(function(){return a.scaleEntry(t,i+1)},50+50*i);return}var u=t.offsetHeight;var d=Math.max(u,N)/c;var p=66;var h=33;var g=l-(p+h);var m=g/o;m<=O&&(m=O);m>R&&(m=R);var f=m/c;var v=d*m;t.parentNode.style.height="".concat(v,"px");t.parentNode.style.width="".concat(m,"px");t.style.transform="scale(".concat(f,")");t.style.transformOrigin="0% 0%";Array.from(t.children).forEach(function(e){e.style.pointerEvents="none"});t.querySelector(".sqs-block-map")&&this.registerTimer(function(){t.style.transform="";t.style.width="";t.style.transformOrigin="";a.registerTimer(function(){t.style.width="100vw";a.registerTimer(function(){t.style.transform="scale(".concat(f,")");t.style.transformOrigin="0% 0%"},10)},100)},2e3);this.registerTimer(function(){return a.updateEntryWrapperAfterScale(t)},200)}},{key:"handleCategoryClick",value:function e(t){var a=t.closest("[data-category]");if(!a){D("cannot find selected category link");return}var i=a.getAttribute("data-category");this.options.onCategoryClick(i);var s=this.options.buttons.find(function(e){var t=e.id;return t===i});if(s){s.onClick();return}this.selectCategory(i)}},{key:"selectCategory",value:function e(t){var a=this.containerNode.querySelector(".sqs-catalog-item-list");if(a){var i=a.getElementsByClassName("catalog-list-column");[a].concat((0,n.default)(i)).forEach(function(e){e.scrollTop=0})}if(this.selectedCategory===t){D("category has been selected already",t);return}this.selectedCategory=t||this.getFirstSelectedCategory();this.selectedCategoryEntries=this.options.getEntriesForCategory(this.selectedCategory);this.renderCatalog()}},{key:"renderLoadingSpinner",value:function e(){var t=this.containerNode.querySelector(".sqs-catalog-loading-spinner");if(t)return;var a=this.containerNode.ownerDocument.createElement("div");a.classList.add("sqs-catalog-loading-spinner","size-large","color-dark","variant-circle");this.containerNode.appendChild(a)}},{key:"renderCategory",value:function e(){if((0,p.default)(this.selectedCategoryEntries)){this.renderLoadingSpinner();return}var t=this.containerNode.querySelector(".sqs-catalog-loading-spinner");t&&this.containerNode.removeChild(t);var a=!P.includes(this.selectedCategory);var i=this.selectedCategoryEntries;var s=[];var n=[];i.forEach(function(e,t){t%2===0?s.push(e):n.push(e)});this.centerList=i;this.leftList=s;this.rightList=n;var r=this.shouldBeSingleColumnMode();this.renderCategoryLists(r,a)}},{key:"getListItemHtml",value:function e(t,a){var i=a||this.selectedCategory;return this.options.shouldRenderEntryTitles?s.getPageEntryWrapper(t,i):s.getSectionEntryWrapper(t)}},{key:"getAllEntryNodes",value:function e(){return Array.from(this.containerNode.querySelectorAll(this.options.entrySelector))}},{key:"buildSidebarItem",value:function e(t){var a=t.category,i=t.className,s=t.text;return'\n      <a data-category="'.concat(a,'" data-test="category-').concat(a,'" class="sqs-catalog-link ').concat(i,'">\n        <span class="sqs-catalog-link-text">').concat(s,'<span class="sqs-add-blank"></span></span>\n      </a>\n    ')}},{key:"renderCategorySidebar",value:function e(t,a){var s=this;var i=this.containerNode.querySelector("[class*='sqs-catalog-categories-container']");var n=this.containerNode.querySelector("[class*='sqs-catalog-title']");n.textContent=this.options.title;var r=t.map(function(e){var t=e===a;return{active:t,category:e}});var o=this.options.buttons.map(function(e,t){var a=e.id,i=e.label;return s.buildSidebarItem({category:a,className:"sqs-button-category",text:i})}).join("");var l="\n    ".concat(o,'\n    <ul class="sqs-category-list">\n    ').concat(this.renderCategories(r),'\n    </ul>\n    <div class="sqs-catalog-divider"></div>\n    ');i.innerHTML=l;this.bindCatalogLinks()}},{key:"renderSingleCategorySidebar",value:function e(t,a){var i=this.containerNode.querySelector("[class*='sqs-catalog-title']");i.textContent=this.options.title;a&&a.title&&(i.textContent=a.title);var s='<p class="sqs-catalog-help-text-title">'.concat(a.helpTextTitle,"</p>");var n='<p class="sqs-catalog-help-text">'.concat(a.helpText,"</p>");var r="\n    ".concat(s,"\n    ").concat(n,"\n    ");var o=this.containerNode.querySelector("[class*='sqs-catalog-categories-container']");o.innerHTML=r;this.bindCatalogLinks()}},{key:"measureCatalogRenderTime",value:function e(t){var i=this;var a=(t.match(/data-src="([^"]+)"/g)||[]).map(function(e){return e.substring(10,e.length-1)});var s=a.map(function(a){return new Promise(function(e,t){i.registerImageLoadCallback(a,e)})});Promise.all(s).then(function(){i.options.onCategoryLoaded&&i.options.onCategoryLoaded()}).catch(function(e){console.error("Image failed to load",e)})}},{key:"renderReactCategoryLists",value:function e(t){var a=this.containerNode.querySelector(".sqs-catalog-item-list");if(t){var i={items:this.centerList};var s=h.default.createElement(w.default,i);g.default.render(s,a)}else{var n={itemListOne:this.leftList,itemListTwo:this.rightList};var r=h.default.createElement(A.default,n);g.default.render(r,a)}}},{key:"renderCategoryLists",value:function e(t,a){var i=this;this.deregisterTimers();var s=this.containerNode;var n=s.querySelector(".sqs-catalog-photo-attribution");var r=this.selectedCategory===T.default.STORE?this.landscapeAttributionMessage:this.genericAttributionMessage;if(n)if(a){n.classList.add("visible");n.innerHTML=r}else n.classList.remove("visible");else{var o=document.createElement("span");o.classList.add("sqs-catalog-photo-attribution");s.appendChild(o);o.innerHTML=r}var l=this.isReactItems();if(l)this.renderReactCategoryLists(t);else{var c=s.querySelector(".sqs-catalog-item-list .catalog-item-two-column-left-list");var u=s.querySelector(".sqs-catalog-item-list .catalog-item-two-column-right-list");var d=s.querySelector(".sqs-catalog-item-list .catalog-item-one-column-center-list");d.innerHTML="";c.innerHTML="";u.innerHTML="";if(t){var p=this.centerList.map(function(e){var t=e.html,a=e.title;return i.getListItemHtml(t,a)}).join("");this.measureCatalogRenderTime(p);d.innerHTML=p}else{var h=this.leftList.map(function(e){var t=e.html,a=e.title;return i.getListItemHtml(t,a)}).join("");var g=this.rightList.map(function(e){var t=e.html,a=e.title;return i.getListItemHtml(t,a)}).join("");this.measureCatalogRenderTime(h+g);c.innerHTML=h;u.innerHTML=g}}var m=this.getAllEntryNodes();m.forEach(function(e){e.style.width="100vw"});this.refreshAllEntryCatalogNodesListener||(this.refreshAllEntryCatalogNodesListener=(0,f.default)(function(){if(!m)return;i.handleRefreshAllEntryCatalogNodes()},50));window.addEventListener("resize",this.refreshAllEntryCatalogNodesListener);if(this.parentContainerNode&&this.parentContainerNode.classList.contains("visible")){m.map(function(e){i.handleRefreshEntryCatalogNode(e)});this.isMobileWeb()&&S.default.setFocusedSectionId(null)}else this.registerTimer(function(){return i.renderCategoryLists(i.shouldBeSingleColumnMode(),a)},100);this.options.initializeItems(s);this.isSingleColumnMode=t}},{key:"isMobileWeb",value:function e(){var t=(0,_.getBreakpoint)(y.breakpoints),a=t.name;return"mobile-0"===a}},{key:"isTabletWeb",value:function e(){var t=(0,_.getBreakpoint)(y.breakpoints),a=t.name;return"tablet-0"===a}},{key:"shouldBeSingleColumnMode",value:function e(){var t=window.top.innerWidth-132;return t<1025}},{key:"shouldSwitchColumnMode",value:function e(){var t=!P.includes(this.selectedCategory);var a=this.shouldBeSingleColumnMode();if(this.isSingleColumnMode&&!a){this.renderCategoryLists(false,t);return}!this.isSingleColumnMode&&a&&this.renderCategoryLists(true,t)}},{key:"updateEntryWrapperAfterScale",value:function e(t){if(!t.ownerDocument.defaultView)return;var a=t.getBoundingClientRect();if(a.height>0&&a.width>0){t.parentNode.style.height="".concat(a.height,"px");t.parentNode.style.width="".concat(a.width,"px")}}},{key:"registerTimer",value:function e(t,a){for(var i=arguments.length,s=new Array(i>2?i-2:0),n=2;n<i;n++)s[n-2]=arguments[n];this.timeouts.push(setTimeout.apply(void 0,[t,a].concat(s)))}},{key:"deregisterTimers",value:function e(){this.timeouts.forEach(function(e){return clearTimeout(e)})}},{key:"cleanUp",value:function e(){this.deregisterTimers();if(this.escTargetAdded){window.Y.Squarespace.EscManager.removeTarget(this.escManagerTarget);this.escTargetAdded=false}window.removeEventListener("resize",this.refreshAllEntryCatalogNodesListener);if(this.refreshAllEntryCatalogNodesListener){this.refreshAllEntryCatalogNodesListener.cancel();this.refreshAllEntryCatalogNodesListener=null}}}]);return s}();t.default=x;(0,u.default)(x,"propTypes",{buttons:s.default.arrayOf(s.default.shape({id:s.default.string.isRequired,label:s.default.string.isRequired,onClick:s.default.func.isRequired})),categoryOrder:s.default.arrayOf(s.default.string),categoryMessageBundle:s.default.object,entrySelector:s.default.string.isRequired,getEntriesForCategory:s.default.func.isRequired,initializeItems:s.default.func.isRequired,onCategoryLoaded:s.default.func,onCloseCatalog:s.default.func.isRequired,onSelectItem:s.default.func.isRequired,sidebarConfig:s.default.object,shouldRenderEntryTitles:s.default.bool,title:s.default.string.isRequired,onCategoryClick:s.default.func.isRequired});(0,u.default)(x,"getSectionEntryWrapper",function(e){return'<div class="sqs-section item-hover-wrapper" data-test="catalog-item">\n        '.concat(e,"\n      </div>")});(0,u.default)(x,"getPageEntryWrapper",function(e,t){return'<div class="item-hover-wrapper" data-test="catalog-item">\n          '.concat(e,'\n        <div class="sqs-page-title" data-test="page-title">').concat(t,"</div>\n      </div>")});e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Catalog/CatalogViewList.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/react/index.js"));var n=i(a("./common/temp/node_modules/prop-types/index.js"));var r=i(a("./src/main/webapp/universal/src/apps/App/components/Catalog/CategoryViewListItem.js"));var o=function e(t){return s.default.createElement(s.default.Fragment,null,s.default.createElement("div",{className:"catalog-item-two-column-left-list catalog-list-column"},t.itemListOne.map(function(e,t){var a=e.html,i=e.title;return s.default.createElement(r.default,{key:"leftListItem"+t,html:a,title:i})})),s.default.createElement("div",{className:"catalog-item-two-column-right-list catalog-list-column"},t.itemListTwo.map(function(e,t){var a=e.html,i=e.title;return s.default.createElement(r.default,{key:"rightListItem"+t,html:a,title:i})})))};o.propTypes={itemListOne:n.default.arrayOf(n.default.shape({html:n.default.string.isRequired,title:n.default.string})).isRequired,itemListTwo:n.default.arrayOf(n.default.shape({html:n.default.string.isRequired,title:n.default.string})).isRequired};var l=o;t.default=l;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Catalog/CategoryViewListItem.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/react/index.js"));var n=i(a("./common/temp/node_modules/prop-types/index.js"));var r=function e(t){return s.default.createElement("div",{className:"item-hover-wrapper","data-test":"catalog-item"},s.default.createElement("div",{dangerouslySetInnerHTML:{__html:t.html}}),s.default.createElement("div",{className:"sqs-page-title","data-test":"page-title"},t.title))};r.propTypes={title:n.default.string,html:n.default.string.isRequired};var o=r;t.default=o;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Catalog/PageCatalog.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var o=i(a("./src/main/webapp/universal/src/apps/App/components/Catalog/CatalogView.js"));var l=i(a("./src/main/webapp/universal/src/apps/App/shared/actions/PageSectionsActions.js"));var c=i(a("./src/main/webapp/universal/src/apps/App/components/Catalog/actions/PageCatalogEntryActions.js"));var u=i(a("./src/main/webapp/universal/src/apps/App/components/Catalog/stores/PageCatalogEntryStore.js"));var d=i(a("./src/main/webapp/universal/src/apps/App/components/Catalog/constants/PageCategoryOrderV2.js"));var p=i(a("./src/main/webapp/universal/src/apps/App/components/Catalog/constants/ItemCategoryOrder.js"));var h=i(a("./src/main/webapp/universal/src/apps/App/shared/constants/category/PageCategoryMessageBundle.js"));var g=i(a("./src/main/webapp/universal/src/apps/App/shared/constants/category/ItemCategoryMessageBundle.js"));var m=i(a("./src/main/webapp/universal/src/apps/App/shared/actions/FrameActions.js"));var f=a("./src/main/webapp/universal/src/shared/utils/Loggers.ts");var v=i(a("./src/main/webapp/universal/src/shared/actions/FrameToolbarActions.js"));var b=a("./src/main/webapp/universal/src/shared/i18n/index.ts");var S=i(a("./src/main/webapp/universal/src/shared/utils/CMSV7Events.js"));var y=i(a("./src/main/webapp/universal/src/apps/App/shared/constants/PageCatalogType.js"));var _=i(a("./src/main/webapp/universal/src/apps/App/components/Catalog/actions/ItemCatalogEntryActions.js"));var C=i(a("./src/main/webapp/universal/src/apps/App/components/Catalog/stores/ItemCatalogEntryStore.js"));var E=i(a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts"));var w=i(a("./src/main/webapp/frontend/packages/enums/Flag.js"));var A=i(a("./src/main/webapp/universal/src/apps/App/shared/stores/TemplateStore.js"));var T=a("./src/main/webapp/universal/src/apps/App/components/Catalog/constants/PageCatalogConstants.js");var I=i(a("./src/main/webapp/frontend/packages/enums/CollectionTypes.js"));var q=a("./common/temp/node_modules/@sqs/rum-collector/timing.js");var k=a("./src/main/webapp/universal/src/apps/App/components/Catalog/utils/CatalogPerformanceGuidUtils.js");var L=a("./src/main/webapp/universal/src/apps/App/components/Catalog/constants/CatalogPerformanceEvents.js");function D(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function N(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?D(Object(a),true).forEach(function(e){(0,r.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var R=false;var O=(0,f.createLogger)("page-catalog","#357",R);var P=function(){function t(e){var i=this;(0,s.default)(this,t);(0,r.default)(this,"showCatalog",function(e){m.default.openingCatalog();i.categorySelected=e;var t=150;i.hasMeasuredRenderTime=false;i.hasMeasuredLoadTime=false;i.getOrCreateAndShowPageCatalog(e);var a=i.pageCatalogNode.ownerDocument.body;a.style.overflowY="hidden";if(i.isItemCatalogMode()){if(!C.default.getState().isLoaded){(0,q.mark)(L.ITEM_CATALOG_PRELOAD_EFFECTIVENESS);_.default.loadCatalog()}}else u.default.getState().isLoaded||c.default.loadCatalog();v.default.forceHideToolbar(true);i.registerTimer(function(){var e=i.pageCatalogNode.querySelector(".sqs-catalog-container");var t=i.pageCatalogNode.querySelector(".sqs-catalog-scrim ");e&&e.classList.add("visible");t&&t.classList.add("visible");i.pageCatalogNode.classList.add("visible")},t)});(0,r.default)(this,"handleSelectItem",function(e,t){var a=i.isItemCatalogMode()?L.ITEM_CATALOG_ENTRY_ADDED:L.PAGE_CATALOG_ENTRY_ADDED;(0,q.measure)(a,{detail:(0,k.getGuid)()});i.handleSelectedNode({selectedNode:e,catalogName:t})});this.options=e;this.timeouts=[];this.options.catalogType===y.default.COLLECTION?this.detachCatalogActionListener=u.default.listen(function e(){var t=this.getPageCatalogStoreState();this.onCatalogStoreUpdate(t)}.bind(this)):this.detachCatalogActionListener=C.default.listen(function e(){var t=this.getPageCatalogStoreState();this.onCatalogStoreUpdate(t)}.bind(this));this.registerTimer(function(){i.onCatalogStoreUpdate(i.getPageCatalogStoreState())},0)}(0,n.default)(t,[{key:"onCatalogStoreUpdate",value:function e(t){var a=t.categories,i=t.entryPreviews;if(this.pageCatalog){this.pageCatalog.setLoadedCategories(a);if(!this.hasMeasuredRenderTime&&i&&i.length){this.hasMeasuredRenderTime=true;var s=this.isItemCatalogMode()?L.ITEM_CATALOG_RENDERED:L.PAGE_CATALOG_RENDERED;(0,q.measure)(s,{detail:(0,k.getGuid)()})}}}},{key:"isSelectedNodeValid",value:function e(t){if(t)return true;O("Cannot find selected node");return false}},{key:"getDataFromSelectedNode",value:function e(t){var a=this.isItemCatalogMode()?C.default.getCatalogEntryForItem(t.getAttribute("data-item-id")):u.default.getCatalogEntryForCollection(t.getAttribute("data-collection-id"));if(a)return N({},a,{isFolder:t.hasAttribute("data-is-folder")});return null}},{key:"getEventForCategory",value:function e(){return this.isItemCatalogMode()?"start-portfolios":"starter-page-add-collection"}},{key:"handleSelectedNode",value:function e(t){var a=t.selectedNode,i=t.catalogName;if(!this.isSelectedNodeValid(a))return;var s=this.getDataFromSelectedNode(a);if(s){i&&(s.catalogName=i);var n=this.getEventForCategory();this.options.onSelectItem(n,s);this.options.catalogType===y.default.ITEM&&S.default.addItemToCollection(s.taxonomy.categories[0].displayName,s.itemId,s.collectionId)}else O("Cannot find selected collection");this.hideCatalog()}},{key:"handleAddCollectionByTypeName",value:function e(t){this.isItemCatalogMode()?this.options.onSelectItem(this.getEventForCategory()):this.options.onSelectItem(this.getEventForCategory(),{typeName:t});this.hideCatalog()}},{key:"setCatalogOpenState",value:function e(t){l.default.setIsCatalogOpen(t)}},{key:"getPageCatalogStoreState",value:function e(){if(this.isItemCatalogMode())return C.default.getState();return u.default.getState()}},{key:"hideCatalog",value:function e(){if(!this.pageCatalogNode||!this.pageCatalog)return;m.default.toggleExpanded();var t=this.pageCatalogNode.ownerDocument.body;t.style.overflowY="";this.setCatalogOpenState(false);this.pageCatalog.cleanUp();this.detachCatalogActionListener();var a=this.pageCatalogNode.querySelector(".sqs-catalog-container");var i=this.pageCatalogNode.querySelector(".sqs-catalog-scrim");a&&a.classList.remove("visible");i&&i.classList.remove("visible");this.pageCatalogNode.classList.remove("visible")}},{key:"registerTimer",value:function e(t,a){for(var i=arguments.length,s=new Array(i>2?i-2:0),n=2;n<i;n++)s[n-2]=arguments[n];this.timeouts.push(setTimeout.apply(void 0,[t,a].concat(s)))}},{key:"deregisterTimers",value:function e(){this.timeouts.forEach(function(e){return clearTimeout(e)})}},{key:"getBottomButtons",value:function e(){var r=this;var o=[{id:"blank_page",label:(0,b.t)("Add Blank"),onClick:function e(){r.handleAddCollectionByTypeName("page")}}];if(E.default.isFeatureEnabled(w.default.SECTION_ADMIN)&&!this.isItemCatalogMode()){var t=A.default.getState(),l=t.collectionConfigs;var a=function e(t){var a=l[t],i=a.collectionType,s=a.folder,n=a.title;if(s)return"continue";if(i!==I.default.COLLECTION_TYPE_GENERIC&&i!==I.default.PORTFOLIO&&i!==I.default.PRODUCTS)return"continue";o.push({id:t,label:n,onClick:function e(){r.handleAddCollectionByTypeName(t)}})};for(var i in l){var s=a(i);if("continue"===s)continue}}return o}},{key:"isItemCatalogMode",value:function e(){return this.options.catalogType===y.default.ITEM}},{key:"getSideBarConfig",value:function e(){return T.SIDEBAR_CONFIG}},{key:"getCategoryOrder",value:function e(){return this.isItemCatalogMode()?p.default:d.default}},{key:"getOrCreateAndShowPageCatalog",value:function e(t){var a=this;m.default.toggleExpanded();if(this.pageCatalog){this.pageCatalog.selectCategory(t);this.pageCatalogNode=this.pageCatalog.getCatalog();return this.pageCatalogNode}this.setCatalogOpenState(true);if(this.pageCatalogNode)return this.pageCatalogNode;var i=this.options.getDestinationNode();var s={buttons:this.getBottomButtons(),categoryMessageBundle:this.isItemCatalogMode()?g.default:h.default,categoryOrder:this.getCategoryOrder(),entrySelector:this.isItemCatalogMode()?".sections[data-item-id]":".sections[data-collection-id]",getEntriesForCategory:function e(t){if(a.isItemCatalogMode())return C.default.getItemsForCategory(t);return u.default.getPagesForCategory(t)},initializeItems:this.options.onInitializeContent,onCategoryClick:function e(t){a.hasMeasuredLoadTime=true;S.default.categoryClick(t,a.options.catalogType===y.default.ITEM?"item-catalog":"page-catalog")},onCategoryLoaded:function e(){if(!a.hasMeasuredLoadTime){a.hasMeasuredLoadTime=true;var t=a.isItemCatalogMode()?L.ITEM_CATALOG_FULLY_LOADED:L.PAGE_CATALOG_FULLY_LOADED;(0,q.measure)(t,{detail:(0,k.getGuid)()})}},onCloseCatalog:function e(){a.hideCatalog()},onSelectItem:this.handleSelectItem,selectedCategory:t,shouldRenderEntryTitles:true,sidebarConfig:this.getSideBarConfig(),title:this.isItemCatalogMode()?(0,b.t)("Add a Project"):(0,b.t)("Add a Page")};var n=new o.default(i,s);var r=n.getCatalog();i.ownerDocument.body.appendChild(r);this.pageCatalog=n;this.pageCatalogNode=r;return r}}]);return t}();var x=P;t.default=x;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Catalog/actions/CatalogEntryActions.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var r=a("./src/main/webapp/universal/src/shared/utils/Loggers.ts");var o=a("./src/main/webapp/universal/src/apps/App/components/Catalog/utils/CatalogUtils.js");var l=(0,r.createLogger)("section-catalog-entry-actions","#357");var c=function(){function t(e){(0,s.default)(this,t);this.generateActions("loadCatalogEntriesSuccess","loadCatalogPreviewsSuccess","loadCatalogEntriesFailure","loadCatalogPreviewsFailure")}(0,n.default)(t,[{key:"loadCatalog",value:function e(){var a=this;return function(e){e();a.getLoadCatalogPromise().then(function(e){var t=e.data;a.loadCatalogEntriesSuccess(t);a.loadCatalogPreviews(t)}).catch(function(e){a.loadCatalogEntriesFailure(e)})}}},{key:"loadCatalogPreviews",value:function e(i){var s=this;return function(e){e(i);if(!i.length){l("no catalog entries from section catalog");return}var t=3;var a=(0,o.chunkWithMinimum)(i,t);Promise.all(a.map(s.getLoadPreviewsPromise)).then(function(e){var t=e.map(function(e){return e.data});var a=t.flat();s.loadCatalogPreviewsSuccess(a)}).catch(function(e){s.loadCatalogPreviewsFailure(e)})}}}]);return t}();var u=c;t.default=u;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Catalog/actions/ItemCatalogEntryActions.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var c=i(a("./src/main/webapp/universal/src/shared/dispatchers/alt/index.ts"));var u=i(a("./src/main/webapp/universal/src/apps/App/components/Catalog/utils/ItemCatalogEntryAPI.js"));var d=i(a("./src/main/webapp/universal/src/apps/App/components/Catalog/actions/CatalogEntryActions.js"));function p(s){var n=h();return function e(){var t=(0,l.default)(s),a;if(n){var i=(0,l.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,o.default)(this,a)}}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var g=function(e){(0,r.default)(a,e);var t=p(a);function a(){(0,s.default)(this,a);return t.apply(this,arguments)}(0,n.default)(a,[{key:"getLoadCatalogPromise",value:function e(){return u.default.load()}},{key:"getLoadPreviewsPromise",value:function e(t){return u.default.loadPreviews(t)}}]);return a}(d.default);var m=c.default.createActions(g);t.default=m;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Catalog/actions/PageCatalogEntryActions.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var c=i(a("./src/main/webapp/universal/src/shared/dispatchers/alt/index.ts"));var u=i(a("./src/main/webapp/universal/src/apps/App/components/Catalog/utils/PageCatalogEntryAPI.js"));var d=i(a("./src/main/webapp/universal/src/apps/App/components/Catalog/actions/CatalogEntryActions.js"));function p(s){var n=h();return function e(){var t=(0,l.default)(s),a;if(n){var i=(0,l.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,o.default)(this,a)}}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var g=function(e){(0,r.default)(a,e);var t=p(a);function a(){(0,s.default)(this,a);return t.apply(this,arguments)}(0,n.default)(a,[{key:"getLoadCatalogPromise",value:function e(){return u.default.load()}},{key:"getLoadPreviewsPromise",value:function e(t){return u.default.loadPreviews(t)}}]);return a}(d.default);var m=c.default.createActions(g);t.default=m;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Catalog/actions/SectionCatalogEntryActions.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var c=i(a("./src/main/webapp/universal/src/shared/dispatchers/alt/index.ts"));var u=i(a("./src/main/webapp/universal/src/apps/App/components/Catalog/utils/SectionCatalogEntryAPI.js"));var d=i(a("./src/main/webapp/universal/src/apps/App/components/Catalog/actions/CatalogEntryActions.js"));function p(s){var n=h();return function e(){var t=(0,l.default)(s),a;if(n){var i=(0,l.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,o.default)(this,a)}}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var g=function(e){(0,r.default)(a,e);var t=p(a);function a(){(0,s.default)(this,a);return t.apply(this,arguments)}(0,n.default)(a,[{key:"getLoadCatalogPromise",value:function e(){return u.default.load()}},{key:"getLoadPreviewsPromise",value:function e(t){return u.default.loadPreviews(t)}}]);return a}(d.default);var m=c.default.createActions(g);t.default=m;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Catalog/constants/CatalogPerformanceEvents.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=t.SECTION_CATALOG_PRELOAD_EFFECTIVENESS=t.PAGE_CATALOG_PRELOAD_EFFECTIVENESS=t.ITEM_CATALOG_PRELOAD_EFFECTIVENESS=t.SECTION_CATALOG_ENTRY_ADDED=t.PAGE_CATALOG_ENTRY_ADDED=t.ITEM_CATALOG_ENTRY_ADDED=t.SECTION_CATALOG_FULLY_LOADED=t.PAGE_CATALOG_FULLY_LOADED=t.ITEM_CATALOG_FULLY_LOADED=t.SECTION_CATALOG_RENDERED=t.PAGE_CATALOG_RENDERED=t.ITEM_CATALOG_RENDERED=void 0;var i="item-catalog-rendered";t.ITEM_CATALOG_RENDERED=i;var s="page-catalog-rendered";t.PAGE_CATALOG_RENDERED=s;var n="section-catalog-rendered";t.SECTION_CATALOG_RENDERED=n;var r="item-catalog-fully-loaded";t.ITEM_CATALOG_FULLY_LOADED=r;var o="page-catalog-fully-loaded";t.PAGE_CATALOG_FULLY_LOADED=o;var l="section-catalog-fully-loaded";t.SECTION_CATALOG_FULLY_LOADED=l;var c="item-catalog-entry-added";t.ITEM_CATALOG_ENTRY_ADDED=c;var u="page-catalog-entry-added";t.PAGE_CATALOG_ENTRY_ADDED=u;var d="section-catalog-entry-added";t.SECTION_CATALOG_ENTRY_ADDED=d;var p="item-catalog-preload-effectiveness";t.ITEM_CATALOG_PRELOAD_EFFECTIVENESS=p;var h="page-catalog-preload-effectiveness";t.PAGE_CATALOG_PRELOAD_EFFECTIVENESS=h;var g="section-catalog-preload-effectiveness";t.SECTION_CATALOG_PRELOAD_EFFECTIVENESS=g;var m={ITEM_CATALOG_RENDERED:i,PAGE_CATALOG_RENDERED:s,SECTION_CATALOG_RENDERED:n,ITEM_CATALOG_FULLY_LOADED:r,PAGE_CATALOG_FULLY_LOADED:o,SECTION_CATALOG_FULLY_LOADED:l,ITEM_CATALOG_ENTRY_ADDED:c,PAGE_CATALOG_ENTRY_ADDED:u,SECTION_CATALOG_ENTRY_ADDED:d,ITEM_CATALOG_PRELOAD_EFFECTIVENESS:p,PAGE_CATALOG_PRELOAD_EFFECTIVENESS:h,SECTION_CATALOG_PRELOAD_EFFECTIVENESS:g};t.default=m},"./src/main/webapp/universal/src/apps/App/components/Catalog/constants/FooterSectionCategoryOrder.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./src/main/webapp/frontend/packages/enums/SectionCategories.js"));var n=[s.default.FOOTER];t.default=n;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Catalog/constants/ItemCategoryOrder.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./src/main/webapp/frontend/packages/enums/ItemCatalogCategory.js"));var n=[s.default.PROJECTS];t.default=n;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Catalog/constants/PageCatalogConstants.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.SIDEBAR_CONFIG=t.COLLECTION_TYPES=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var n=i(a("./src/main/webapp/frontend/packages/enums/PageCategories.js"));var r=a("./src/main/webapp/universal/src/shared/i18n/index.ts");var o;var l=n.default.BLOG,c=n.default.EVENTS,u=n.default.PORTFOLIO,d=n.default.STORE;var p={BLOG:l,EVENTS:c,PORTFOLIO:u,STORE:d};t.COLLECTION_TYPES=p;var h=(0,r.t)("Share thoughts, stories, ideas.");var g=(0,r.t)("Blogs are organized into Blog Page and individual blog posts. The Blog Page is the first page users see when they visit your blog.");var m=(0,r.t)("Highlight individual events or show a calendar of upcoming events.");var f=(0,r.t)("Each event has its own detailed post to share additional, event-related details.");var v=(0,r.t)("Showcase projects, portfolios, and galleries.");var b=(0,r.t)("A Portfolio Page links to other pages, for example your projects, portfolios, and galleries.");var S=(0,r.t)("Sell your physical and digital goods, and services online.");var y=(0,r.t)("Each product has their individual product page to show variants and options.");var _=(o={},(0,s.default)(o,p.BLOG,{title:(0,r.t)("Add Blog"),helpTextTitle:h,helpText:g}),(0,s.default)(o,p.EVENTS,{title:(0,r.t)("Add Events"),helpTextTitle:m,helpText:f}),(0,s.default)(o,p.PORTFOLIO,{title:(0,r.t)("Add Portfolio"),helpTextTitle:v,helpText:b}),(0,s.default)(o,p.STORE,{title:(0,r.t)("Add Store"),helpTextTitle:S,helpText:y}),o);t.SIDEBAR_CONFIG=_},"./src/main/webapp/universal/src/apps/App/components/Catalog/constants/PageCategoryOrderV2.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./src/main/webapp/frontend/packages/enums/PageCategories.js"));var n=i(a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts"));var r=i(a("./src/main/webapp/universal/src/apps/App/shared/utils/MemberAreasFeatureUtils.ts"));var o=i(a("./src/main/webapp/frontend/packages/enums/Flag.js"));var l=r.default.showMemberAreaPageSectionOption();var c=n.default.isFeatureEnabled(o.default.SECTION_ADMIN);var u=[s.default.GENERAL,s.default.APPOINTMENTS,s.default.ABOUT,s.default.CONTACT,s.default.SERVICES,s.default.GALLERY,s.default.TEAM,s.default.REVIEWS,s.default.MENU,s.default.MUSIC,s.default.RSVP,s.default.FAQS,s.default.PRIVACY_POLICY,s.default.TOS];l&&u.splice(5,0,s.default.MEMBER_AREAS);c&&u.push(s.default.STAGING);var d=u;t.default=d;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Catalog/constants/PageSectionCategoryOrder.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./src/main/webapp/frontend/packages/enums/SectionCategories.js"));var n=i(a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts"));var r=i(a("./src/main/webapp/frontend/packages/enums/Flag.js"));var o=n.default.isFeatureEnabled(r.default.SECTION_ADMIN);var l=n.default.isFeatureEnabled(r.default.SEVEN_ONE_LIST_SECTION);var c=[s.default.HEADLINES,s.default.LIST,s.default.GALLERY,s.default.IMAGES,s.default.QUOTE,s.default.TEXT,s.default.VIDEO,"-",s.default.APPOINTMENTS,s.default.CONTACT,s.default.DONATION,s.default.FORM,s.default.NEWSLETTER,s.default.MEMBERS,s.default.PRODUCTS,s.default.RESERVATIONS,s.default.SOCIAL,s.default.TOUR_DATES,"-",s.default.CALENDAR,s.default.CHART,s.default.FAQS,s.default.LOCATION,s.default.LOGO_WALL,s.default.MENU,s.default.MUSIC,s.default.PRICING,s.default.REGISTRY,s.default.RESUME,s.default.SUMMARY];l&&c.push(s.default.LIST_BETA);o&&c.push(s.default.STAGING);var u=c;t.default=u;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Catalog/stores/BaseCatalogEntryStoreModel.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var r=a("./src/main/webapp/universal/src/shared/utils/Loggers.ts");var c=i(a("./common/temp/node_modules/lodash/isEmpty.js"));var o=a("./src/main/webapp/universal/src/apps/App/components/Catalog/utils/CatalogUtils.js");var u=(0,r.createLogger)("section-catalog-entry-store","#357");var l=function(){function e(){(0,s.default)(this,e);this.state={isLoaded:false,selectedTag:"tag2",categories:[],entriesByCategory:{},entryPreviews:[]};this.exportPublicMethods({findCatalogEntry:this.findCatalogEntry,isEntryForPreview:this.isEntryForPreview})}(0,n.default)(e,[{key:"onLoadCatalogEntriesSuccess",value:function e(t){var a=(0,o.catalogEntryListToCategories)(t);var i=(0,o.catalogEntryListToGroupingByCategory)(t);this.setState({categories:a,entriesByCategory:i,isLoaded:true})}},{key:"onLoadCatalogEntriesFailure",value:function e(t){u("catalog failed to load entries",t);this.setState({isLoaded:true})}},{key:"normalizeEntryPreviews",value:function e(t){false}},{key:"isEntryForPreview",value:function e(t,a){false}},{key:"onLoadCatalogPreviewsSuccess",value:function e(t){var a=this.normalizeEntryPreviews(t);this.setState({entryPreviews:a})}},{key:"onLoadCatalogPreviewsFailure",value:function e(t){u("catalog failed to load previews",t)}},{key:"getPreviewsForCategory",value:function e(t){var a=this;var i=this.getState(),s=i.entriesByCategory,n=i.entryPreviews;if(!n.length||!Object.keys(s).length||!t)return;var r=s[t];if((0,c.default)(r)){u("Entries are missing for the category",t);return}var o=n.filter(function(t){return r.some(function(e){return a.isEntryForPreview(e,t)})});if(n.length>0&&0===o.length){var l=window.SQUARESPACE_SENTRY;l&&l.withScope(function(e){e.setTag("project","seven_one_catalog");e.setExtra("context",JSON.stringify({entryPreviews:n,previewsForCategorySelected:o}));l.captureMessage("previews for category selected is empty")})}return o}},{key:"findCatalogEntry",value:function e(t){var a=this.getState(),i=a.entriesByCategory;if(!i||!t)return null;return Object.values(i).flat().find(function(e){return!!t(e)})}},{key:"getPreviewEntryForSection",value:function e(t){var a=this.getState(),i=a.entryPreviews;var s=i.find(function(e){return e.id===t});return void 0===s?null:s}}]);return e}();var d=l;t.default=d;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Catalog/stores/ItemCatalogEntryStore.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var c=i(a("./src/main/webapp/universal/src/shared/dispatchers/alt/index.ts"));var u=i(a("./src/main/webapp/universal/src/apps/App/components/Catalog/actions/ItemCatalogEntryActions.js"));var d=i(a("./src/main/webapp/universal/src/apps/App/components/Catalog/stores/BaseCatalogEntryStoreModel.js"));function p(s){var n=h();return function e(){var t=(0,l.default)(s),a;if(n){var i=(0,l.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,o.default)(this,a)}}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var g=function(e){(0,r.default)(a,e);var t=p(a);function a(){var e;(0,s.default)(this,a);e=t.call(this);e.bindActions(u.default);e.exportPublicMethods({getItemsForCategory:e.getPreviewsForCategory,getCatalogEntryForItem:e.getCatalogEntryForItem});return e}(0,n.default)(a,[{key:"normalizeEntryPreviews",value:function e(t){return(t||[]).map(function(e){var t=e.html,a=e.itemId,i=e.title,s=e.websiteId,n=e.isFolder;var r=new DOMParser;var o=r.parseFromString(t,"text/html");var l=o.createElement("div");var c=o.body.querySelector("[data-page-sections]");l.classList.add("article-wrapper");c.setAttribute("data-item-id",a);c.setAttribute("data-website-id",s);n&&c.setAttribute("data-is-folder",true);l.innerHTML=c.outerHTML;return{itemId:a,html:l.outerHTML,title:i}})}},{key:"isEntryForPreview",value:function e(t,a){return t.itemId===a.itemId}},{key:"getCatalogEntryForItem",value:function e(a){var t=function e(t){return t.itemId===a};return this.findCatalogEntry(t)}}]);return a}(d.default);var m=c.default.createStore(g,"ItemCatalogEntryStore");t.default=m;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Catalog/stores/PageCatalogEntryStore.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var c=i(a("./src/main/webapp/universal/src/shared/dispatchers/alt/index.ts"));var u=i(a("./src/main/webapp/universal/src/apps/App/components/Catalog/actions/PageCatalogEntryActions.js"));var d=i(a("./src/main/webapp/universal/src/apps/App/components/Catalog/stores/BaseCatalogEntryStoreModel.js"));function p(s){var n=h();return function e(){var t=(0,l.default)(s),a;if(n){var i=(0,l.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,o.default)(this,a)}}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var g=function(e){(0,r.default)(a,e);var t=p(a);function a(){var e;(0,s.default)(this,a);e=t.call(this);e.bindActions(u.default);e.exportPublicMethods({getPagesForCategory:e.getPreviewsForCategory,getCatalogEntryForCollection:e.getCatalogEntryForCollection});return e}(0,n.default)(a,[{key:"normalizeEntryPreviews",value:function e(t){return(t||[]).map(function(e){var t=e.html,a=e.collectionId,i=e.title,s=e.websiteId,n=e.isFolder;var r=new DOMParser;var o=r.parseFromString(t,"text/html");var l=o.createElement("div");var c=o.body.querySelector("[data-page-sections]");l.classList.add("article-wrapper");c.setAttribute("data-collection-id",a);c.setAttribute("data-website-id",s);n&&c.setAttribute("data-is-folder",true);l.innerHTML=c.outerHTML;return{collectionId:a,html:l.outerHTML,title:i}})}},{key:"isEntryForPreview",value:function e(t,a){return t.collectionId===a.collectionId}},{key:"getCatalogEntryForCollection",value:function e(a){var t=function e(t){return t.collectionId===a};return this.findCatalogEntry(t)}}]);return a}(d.default);var m=c.default.createStore(g,"PageCatalogEntryStore");t.default=m;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Catalog/stores/SectionCatalogEntryStore.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var c=i(a("./src/main/webapp/universal/src/shared/dispatchers/alt/index.ts"));var u=a("./src/main/webapp/universal/src/apps/App/shared/constants/SectionConstants.ts");var d=i(a("./src/main/webapp/universal/src/apps/App/components/Catalog/actions/SectionCatalogEntryActions.js"));var p=i(a("./src/main/webapp/universal/src/apps/App/components/Catalog/stores/BaseCatalogEntryStoreModel.js"));function h(s){var n=g();return function e(){var t=(0,l.default)(s),a;if(n){var i=(0,l.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,o.default)(this,a)}}function g(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var m=function(e){(0,r.default)(a,e);var t=h(a);function a(){var e;(0,s.default)(this,a);e=t.call(this);e.bindActions(d.default);e.exportPublicMethods({getSectionsForCategory:e.getPreviewsForCategory,getCatalogEntryForSection:e.getCatalogEntryForSection,getPreviewEntryForSection:e.getPreviewEntryForSection});return e}(0,n.default)(a,[{key:"normalizeEntryPreviews",value:function e(t){return(t||[]).map(function(e){var t=e.html,a=e.websiteId,i=e.sectionId,s=e.collectionId;var n=new DOMParser;var r=n.parseFromString(t,"text/html");var o=r.querySelector("[data-page-sections] > [".concat(u.SECTION_ID_ATTR,'="').concat(i,'"]'));var l=o.outerHTML;return{collectionId:s,html:l,id:i,websiteId:a}})}},{key:"isEntryForPreview",value:function e(t,a){return t.sectionId===a.id}},{key:"getCatalogEntryForSection",value:function e(a){var t=function e(t){return t.sectionId===a};return this.findCatalogEntry(t)}},{key:"getPreviewEntryForSection",value:function e(t){var a=this.getState(),i=a.entryPreviews;var s=i.find(function(e){return e.id===t});return void 0===s?null:s}}]);return a}(p.default);var f=c.default.createStore(m,"SectionCatalogEntryStore");t.default=f;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Catalog/utils/CatalogContentInitializer.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var o=function(){function a(e){var t=this;(0,s.default)(this,a);(0,r.default)(this,"initializePages",function(e){t.initializePageContent(e);t.initializeTweaks();t.initializeImages(e)});(0,r.default)(this,"initializeSections",function(e){e.querySelectorAll("img").forEach(function(e){e.setAttribute("data-size-adjustment",".25")});t.initializeImages(e);t.initializeSectionContent(e);t.initializeTweaks();t.initializeScripts(e)});this.Y=e}(0,n.default)(a,[{key:"initializePageContent",value:function e(t){t.ownerDocument.defaultView.Squarespace.initializePageContent(this.Y,this.Y.one(t))}},{key:"initializeSectionContent",value:function e(t){t.ownerDocument.defaultView.Squarespace.initializeLayoutBlocks(this.Y,this.Y.one(t))}},{key:"initializeImages",value:function e(t){t.ownerDocument.defaultView.ImageLoader.loadAll({load:true},t)}},{key:"initializeTweaks",value:function e(){this.Y.Global.fire("tweak:change",{config:{},getName:function e(){return"section-store-initialized"},getValue:function e(){return true}})}},{key:"initializeScripts",value:function e(t){var s=this.Y.config.win.top.Static.SQUARESPACE_CONTEXT.templateScriptsRootUrl;t.querySelectorAll('squarespace\\3Ascript,script[src^="'.concat(s,'"]')).forEach(function(e){if(e.hasAttribute("data-injected"))return;var t=e.getAttribute("src");var a="";a=t.includes(s)?t:s+t;var i=e.ownerDocument.createElement("script");i.setAttribute("src",a);i.setAttribute("data-injected",true);e.parentNode.insertBefore(i,e);e.remove()})}},{key:"destroy",value:function e(){this.Y=null}}]);return a}();t.default=o;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Catalog/utils/CatalogPerformanceGuidUtils.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=t.resetGuid=t.getGuid=void 0;var s=i(a("./common/temp/node_modules/lodash/get.js"));var n;var r=function e(){var t=(0,s.default)(window,"Static.SQUARESPACE_CONTEXT.website.id");return"".concat(t,"-").concat(Date.now())};var o=function e(){return n};t.getGuid=o;var l=function e(){n=r()};t.resetGuid=l;var c={getGuid:o,resetGuid:l};t.default=c;l()},"./src/main/webapp/universal/src/apps/App/components/Catalog/utils/CatalogUtils.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.chunkWithMinimum=t.catalogEntryListToGroupingByCategory=t.catalogEntryListToCategories=void 0;var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/toConsumableArray.js"));var r=i(a("./common/temp/node_modules/lodash/chunk.js"));var s=function e(t,a){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;var s=Math.ceil(t.length/a);s=Math.max(s,i);return(0,r.default)(t,s)};t.chunkWithMinimum=s;var o=function e(t){var a=t.map(function(e){return e.taxonomy.categories.map(function(e){var t=e.displayName;return t}).filter(function(e){return void 0!==e})});var i=a.flat();var s=(0,n.default)(new Set(i));return s};t.catalogEntryListToCategories=o;var l=function e(t){var i={};t.forEach(function(a){a.taxonomy.categories.forEach(function(e){var t=e.displayName;i[t]=i[t]||[];i[t].push(a)})});return i};t.catalogEntryListToGroupingByCategory=l},"./src/main/webapp/universal/src/apps/App/components/Catalog/utils/ItemCatalogEntryAPI.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@sqs/network/lib/index.js"));var n={load:function e(){return s.default.get("/api/item-catalog")},loadPreviews:function e(t){return s.default.post("/api/catalog-preview/items",t)}};t.default=n;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Catalog/utils/PageCatalogEntryAPI.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@sqs/network/lib/index.js"));var n={load:function e(){return s.default.get("/api/page-catalog")},loadPreviews:function e(t){return s.default.post("/api/catalog-preview/pages",t)}};t.default=n;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/Catalog/utils/SectionCatalogEntryAPI.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var u=i(a("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var n=i(a("./common/temp/node_modules/dexie/dist/dexie.es.js"));var d=i(a("./common/temp/node_modules/js-sha256/src/sha256.js"));var p=i(a("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@sqs/network/lib/index.js"));var h=a("./src/main/webapp/universal/src/shared/i18n/resolvedLocales.ts");var g=i(a("./src/main/webapp/universal/src/shared/utils/isIndexedDbSupported.js"));var r=a("./src/main/webapp/universal/src/shared/utils/praetor/index.ts");var o=a("./src/main/webapp/universal/src/shared/utils/praetor/experiments/cms.ts");var l=a("./src/main/webapp/universal/src/shared/utils/Loggers.ts");var m=(0,l.createLogger)("SectionCatalogEntryAPI","#357");var c;if((0,r.isABTestActive)(o.SECTION_CATALOG_CACHE)){m("using cached api");var f=0;var v=new n.default("SectionCatalogEntryAPI");v.version(1).stores({catalogPreviews:"cacheKey"});var b=null;var S=function(){var t=(0,s.default)(u.default.mark(function e(){var a;return u.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return p.default.get("/api/section-catalog");case 2:a=t.sent;b=(0,d.default)(JSON.stringify(a.data));return t.abrupt("return",a);case 5:case"end":return t.stop()}},e)}));return function e(){return t.apply(this,arguments)}}();var y=function(){var a=(0,s.default)(u.default.mark(function e(a){var i;return u.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.prev=0;t.next=3;return v.catalogPreviews.where({cacheKey:a}).first();case 3:i=t.sent;if(!(null!==i&&void 0!==i&&i.results)){t.next=6;break}return t.abrupt("return",{status:"hit",results:i.results});case 6:return t.abrupt("return",{status:"miss"});case 9:t.prev=9;t.t0=t["catch"](0);return t.abrupt("return",{status:"error"});case 12:case"end":return t.stop()}},e,null,[[0,9]])}));return function e(t){return a.apply(this,arguments)}}();var _=function(){var a=(0,s.default)(u.default.mark(function e(a){var i;var s,n,r,o,l,c;return u.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:n=(0,d.default)(JSON.stringify(a));r=(0,h.getResolvedMemberLocale)();o="".concat(b,"--").concat(n,"--").concat(r,"--").concat(f);if(!(b&&(0,g.default)())){t.next=10;break}t.next=6;return y(o);case 6:s=t.sent;m(s);if(!("hit"===s.status)){t.next=10;break}return t.abrupt("return",s.results);case 10:t.next=12;return p.default.post("/api/catalog-preview/sections",a);case 12:l=t.sent;if(!("miss"===(null===(i=s)||void 0===i?void 0:i.status))){t.next=19;break}t.next=16;return v.catalogPreviews.count();case 16:c=t.sent;if(c>3){m("pruning cache");v.catalogPreviews.clear()}v.catalogPreviews.put({cacheKey:o,results:{data:l.data}});case 19:return t.abrupt("return",l);case 20:case"end":return t.stop()}},e)}));return function e(t){return a.apply(this,arguments)}}();var C=function e(){return p.default.get("/api/catalog-preview/blankSections")};c={load:S,loadPreviews:_,loadBlanks:C}}else{m("using uncached api");c={load:function e(){return p.default.get("/api/section-catalog")},loadPreviews:function e(t){return p.default.post("/api/catalog-preview/sections",t)},loadBlanks:function e(){return p.default.get("/api/catalog-preview/blankSections")}}}var E=c;t.default=E;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/CommentLogin/CommentLogin.jsx":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var c=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));function u(s){var n=d();return function e(){var t=(0,l.default)(s),a;if(n){var i=(0,l.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,o.default)(this,a)}}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var p=a("./common/temp/node_modules/prop-types/index.js");var h=a("./common/temp/node_modules/react/index.js");var g=a("./common/temp/node_modules/@sqs/utils/scroll/scrollTo.js");var m=a("./src/main/webapp/universal/src/apps/App/components/CommentLogin/CommentLogin.less");var f=a("./src/main/webapp/universal/src/shared/utils/FrameMessageConsumer.js");var v=a("./src/main/webapp/universal/src/shared/components/LoadingPage.jsx");var b=a("./common/temp/node_modules/classnames/index.js");var S=a("./src/main/webapp/universal/src/shared/i18n/index.ts"),y=S.t;var _=function(e){(0,r.default)(a,e);var t=u(a);function a(){(0,s.default)(this,a);return t.apply(this,arguments)}(0,n.default)(a,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.onMessageReceived,i=t.frameOrigin;a&&(this.unsubscribe=f.subscribe(a,i));document.body.clientWidth<800&&g(window,{left:0,top:0},{minDuration:0,maxDuration:0})}},{key:"componentWillUnmount",value:function e(){this.unsubscribe&&this.unsubscribe()}},{key:"render",value:function e(){var t=this.props,a=t.isVisible,i=t.shouldLoadIFrame,s=t.isLoading,n=t.onIFrameLoaded,r=t.parentOrigin;var o=encodeURIComponent(r);var l="/config/authentication-frame/comment-login/squarespace?origin=".concat(o);return h.createElement("div",{className:b(m.overlay,(0,c.default)({},m.shown,a))},h.createElement(v,{isVisible:a&&s}),i&&h.createElement("iframe",{className:b((0,c.default)({},m.show,!s)),onLoad:n,src:l,title:y("comment login")}))}}]);return a}(h.Component);(0,c.default)(_,"propTypes",{isVisible:p.bool.isRequired,isLoading:p.bool.isRequired,shouldLoadIFrame:p.bool.isRequired,onIFrameLoaded:p.func,onMessageReceived:p.func,parentOrigin:p.string,frameOrigin:p.string});(0,c.default)(_,"defaultProps",{isIFrameLoaded:false,isRedirecting:false,isVisible:false});e.exports=_},"./src/main/webapp/universal/src/apps/App/components/CommentLogin/CommentLogin.less":function(e,t,a){e.exports={overlay:"CommentLogin-overlay-3n0sp",shown:"CommentLogin-shown-3jzHc",show:"CommentLogin-show-12Hgn"}},"./src/main/webapp/universal/src/apps/App/components/CommentLogin/actions/CommentLoginActions.js":function(e,t,a){"use strict";var i=a("./src/main/webapp/universal/src/shared/dispatchers/alt/index.ts");e.exports=i.generateActions("show","loadInBackground","frameLoaded","closeFrame","showLoading")},"./src/main/webapp/universal/src/apps/App/components/CommentLogin/index.jsx":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/alt-utils/lib/connectToStores.js");var s=a("./src/main/webapp/universal/src/apps/App/components/CommentLogin/CommentLogin.jsx");var n=a("./src/main/webapp/universal/src/apps/App/components/CommentLogin/stores/CommentLoginStore.js");var r=a("./src/main/webapp/universal/src/apps/App/components/CommentLogin/actions/CommentLoginActions.js");var o=i({getStores:function e(){return[n]},getPropsFromStores:function e(){var t=n.getState(),a=t.isLoading,i=t.isVisible,s=t.shouldLoadIFrame;return{isLoading:a,isVisible:i,shouldLoadIFrame:s,onIFrameLoaded:r.frameLoaded}}},s);e.exports=o},"./src/main/webapp/universal/src/apps/App/components/CommentLogin/stores/CommentLoginStore.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var r=a("./src/main/webapp/universal/src/shared/dispatchers/alt/index.ts");var o=a("./src/main/webapp/universal/src/apps/App/components/CommentLogin/actions/CommentLoginActions.js");var l=function(){function e(){(0,s.default)(this,e);this.state={isVisible:false,isLoading:false,shouldLoadIFrame:false};this.bindActions(o)}(0,n.default)(e,[{key:"onShow",value:function e(){this.setState({isVisible:true,shouldLoadIFrame:true,isLoading:true})}},{key:"onLoadInBackground",value:function e(){this.setState({isVisible:false,shouldLoadIFrame:true,isLoading:true})}},{key:"onShowLoading",value:function e(){this.setState({isLoading:true,shouldLoadIFrame:false})}},{key:"onFrameLoaded",value:function e(){this.setState({isLoading:false})}},{key:"onCloseFrame",value:function e(){this.setState({isVisible:false,isLoading:false,shouldLoadIFrame:false})}}]);return e}();e.exports=r.createStore(l,"CommentLoginStore")},"./src/main/webapp/universal/src/apps/App/components/IndexEditor/IndexEditor.less":function(e,t,a){e.exports={wrapper:"IndexEditor-wrapper-2DzsL",isScrolled:"IndexEditor-isScrolled-3TFlL",panels:"IndexEditor-panels-2mcO6",backContainer:"IndexEditor-backContainer-twTLi",instructionsContainer:"IndexEditor-instructionsContainer-3NLak","transition-enter":"IndexEditor-transition-enter-2dC-u","transition-leave":"IndexEditor-transition-leave-3kEwS"}},"./src/main/webapp/universal/src/apps/App/components/IndexEditor/components/ActionButton.jsx":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/assertThisInitialized.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var c=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var u=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var d=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));function p(s){var n=h();return function e(){var t=(0,u.default)(s),a;if(n){var i=(0,u.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,c.default)(this,a)}}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var s=a("./common/temp/node_modules/prop-types/index.js");var g=a("./common/temp/node_modules/react/index.js");var m=a("./common/temp/node_modules/classnames/index.js");var f=a("./src/main/webapp/universal/src/apps/App/components/IndexEditor/components/ActionButton.less");var v=function(e){(0,l.default)(s,e);var i=p(s);function s(){var n;(0,r.default)(this,s);for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];n=i.call.apply(i,[this].concat(t));(0,d.default)((0,o.default)(n),"onClick",function(e){var t=n.props,a=t.action,i=t.bridgedActions,s=t.targetIndex;i[a](s,{top:e.target.getBoundingClientRect().top,constrain:true})});return n}(0,n.default)(s,[{key:"render",value:function e(){var t=this.props,a=t.location,i=t.action;return g.createElement("div",{"data-action":i,onClick:this.onClick,className:m(f.actionButton,f[a])},g.createElement("span",{title:i,className:f[i]}))}}]);return s}(g.Component);(0,d.default)(v,"propTypes",{location:s.string.isRequired,targetIndex:s.number.isRequired,action:s.string.isRequired,bridgedActions:s.object});e.exports=v},"./src/main/webapp/universal/src/apps/App/components/IndexEditor/components/ActionButton.less":function(e,t,a){e.exports={search:"ActionButton-search-3zmwC",add:"ActionButton-add-wVoth undefined",clear:"ActionButton-clear-1DNjE",clearLight:"ActionButton-clearLight-SqHvQ",trash:"ActionButton-trash-2lDbz",trashLight:"ActionButton-trashLight-1esTe",check:"ActionButton-check-2tYNm",checkDark:"ActionButton-checkDark-1_a4y",checkAfter:"ActionButton-checkAfter-1LcsT",checkDarkAfter:"ActionButton-checkDarkAfter-3arrR",checkDarkSmallAfter:"ActionButton-checkDarkSmallAfter-AWHUl",checkDarkBefore:"ActionButton-checkDarkBefore-mnnDn",aureusCheck:"ActionButton-aureusCheck-2WaxV",upload:"ActionButton-upload-3qLJO",avatar:"ActionButton-avatar-2Nm1p",gearSmall:"ActionButton-gearSmall-14ZQy",pencilSmall:"ActionButton-pencilSmall-2jyNM",trashSmall:"ActionButton-trashSmall-3MClw",chevronLight:"ActionButton-chevronLight-3R-lI",chevronRight:"ActionButton-chevronRight-1TVT3",chevronDark:"ActionButton-chevronDark-nGor9",circleLogoDark:"ActionButton-circleLogoDark-3ii-s",gettyLogo:"ActionButton-gettyLogo-3NO-7",gettyIconLight:"ActionButton-gettyIconLight-1k3nn",chevronUpDark:"ActionButton-chevronUpDark-3z-qX",chevronDownDark:"ActionButton-chevronDownDark-xJJfR",arrowDark:"ActionButton-arrowDark-2Uqga",file:"ActionButton-file-3KDv0",shoppingCart:"ActionButton-shoppingCart-2yn3K",squarespace:"ActionButton-squarespace-rlBhD",zoomin:"ActionButton-zoomin-3AsNB",zoomout:"ActionButton-zoomout-3178O",squarespaceLight:"ActionButton-squarespaceLight-3Qyls",actionButton:"ActionButton-actionButton-1gB6I",delete:"ActionButton-delete-1znlk",top:"ActionButton-top-2j5SP",bottom:"ActionButton-bottom-AOU3b",right:"ActionButton-right-3Dbq1",left:"ActionButton-left-3rZTF"}},"./src/main/webapp/universal/src/apps/App/components/IndexEditor/components/Editor.jsx":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/extends.js"));var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var c=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var u=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));function d(s){var n=p();return function e(){var t=(0,c.default)(s),a;if(n){var i=(0,c.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,o.default)(this,a)}}function p(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var h=a("./common/temp/node_modules/prop-types/index.js");var g=a("./common/temp/node_modules/react/index.js");var m=a("./src/main/webapp/universal/src/apps/App/components/IndexEditor/components/ActionButton.jsx");var f=a("./src/main/webapp/universal/src/apps/App/components/IndexEditor/shared/utils.js");var v=a("./src/main/webapp/universal/src/apps/App/components/IndexEditor/components/Editor.less");var b=function(e){(0,r.default)(a,e);var t=d(a);function a(){(0,s.default)(this,a);return t.apply(this,arguments)}(0,n.default)(a,[{key:"render",value:function e(){var t=this.props,a=t.boundingDOMRect,i=t.scaleFactor,s=t.actionPoints,n=t.bridgedActions;var r=f.absolutePositionFromBoundingRect(a,i);var o=s.map(function(e,t){return g.createElement(m,(0,l.default)({},e,{bridgedActions:n,key:"".concat(e.location,"-").concat(t)}))});return g.createElement("div",{className:v.panel,style:r},g.createElement("div",{className:v.relWrapper},o))}}]);return a}(g.Component);(0,u.default)(b,"propTypes",{boundingDOMRect:h.object,scaleFactor:h.number,actionPoints:h.array,bridgedActions:h.object});e.exports=b},"./src/main/webapp/universal/src/apps/App/components/IndexEditor/components/Editor.less":function(e,t,a){e.exports={panel:"Editor-panel-1J9yY",relWrapper:"Editor-relWrapper-1GkZH"}},"./src/main/webapp/universal/src/apps/App/components/IndexEditor/index.jsx":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/assertThisInitialized.js"));var c=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var u=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var d=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var p=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));function h(s){var n=g();return function e(){var t=(0,d.default)(s),a;if(n){var i=(0,d.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,u.default)(this,a)}}function g(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var s=a("./common/temp/node_modules/prop-types/index.js");var m=a("./common/temp/node_modules/react/index.js");var n=a("./common/temp/node_modules/@sqs/transitions/lib/index.js"),f=n.CSSTransitionGroup;var v=a("./src/main/webapp/universal/src/shared/i18n/index.ts"),b=v.t;var S=a("./src/main/webapp/universal/src/shared/i18n/react.ts"),y=S.T;var _=a("./src/main/webapp/universal/src/apps/App/components/IndexEditor/shared/utils.js");var C=a("./src/main/webapp/universal/src/apps/App/components/IndexEditor/components/Editor.jsx");var E=a("./common/temp/node_modules/classnames/index.js");var w=a("./src/main/webapp/universal/src/apps/App/components/IndexEditor/IndexEditor.less");var A=a("./src/main/webapp/universal/src/apps/App/shared/components/MenuHeader/index.jsx"),T=A.default;var I={enter:{className:w["transition-enter"],from:{opacity:0},to:{opacity:1}},leave:{className:w["transition-leave"],from:{opacity:1},to:{opacity:0}}};var q=function(e){(0,c.default)(n,e);var s=h(n);function n(){var a;(0,r.default)(this,n);for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];a=s.call.apply(s,[this].concat(t));(0,p.default)((0,l.default)(a),"getAnnotationController",function(){return a.props.annotationController});(0,p.default)((0,l.default)(a),"getSectionNodes",function(){return a.getAnnotationController().getStackedItemWrapperNodes()});(0,p.default)((0,l.default)(a),"getSectionBoundingDOMRect",function(e){var t=e.getBoundingClientRect(),a=t.width,i=t.height,s=t.top,n=t.left;var r=e.ownerDocument.defaultView,o=r.pageYOffset,l=r.pageXOffset;return{width:a,height:i,top:s+o,left:n+l,right:n+a+l,bottom:s+i+o}});(0,p.default)((0,l.default)(a),"createActionConfig",function(e,t,a){return{location:e,targetIndex:t,action:a}});(0,p.default)((0,l.default)(a),"getActionsPointsForSection",function(e){var t=[a.createActionConfig("right",e,"delete"),a.createActionConfig("bottom",e+1,"add")];e||t.push(a.createActionConfig("top",e,"add"));return t});(0,p.default)((0,l.default)(a),"renderCloseButton",function(){return m.createElement(T,{backLabel:b("Back"),onBackClick:a.props.bridgedActions.close,onDoubleClick:a.props.bridgedActions.close})});(0,p.default)((0,l.default)(a),"renderInstructions",function(){var e=a.props.showInstructions;if(!e)return null;return m.createElement("div",{className:w.instructionsContainer},m.createElement(y,{project:"apps.App"},"To reorder a section, click and drag it into position"))});return a}(0,o.default)(n,[{key:"render",value:function e(){var a=this;var t=this.props,i=t.active,s=t.scaleFactor,n=t.position,r=t.scroll,o=t.bridgedActions;if(!i)return null;var l=this.getSectionNodes().map(function(e,t){return m.createElement(C,{key:"index-editor-panel-".concat(t),boundingDOMRect:a.getSectionBoundingDOMRect(e),scaleFactor:s,actionPoints:a.getActionsPointsForSection(t),bridgedActions:o})});var c=_.absolutePositionFromBoundingRect(n);var u={transform:"translate3d("+[-r.x*s,-r.y*s,0].join("px,")+")"};var d=0!==r.y;return m.createElement(f,{key:"index-editor",wrapChildWithTag:false,transitions:I},m.createElement("div",{className:E(w.wrapper,d&&w.isScrolled),style:c,ref:"wrapper"},this.renderCloseButton(),this.renderInstructions(),m.createElement("div",{className:w.panels,style:u},l)))}}]);return n}(m.Component);(0,p.default)(q,"propTypes",{active:s.bool,annotationController:s.object.isRequired,scaleFactor:s.number,position:s.object,scroll:s.object,bridgedActions:s.object,showInstructions:s.bool});e.exports=q},"./src/main/webapp/universal/src/apps/App/components/IndexEditor/shared/utils.js":function(e,t,a){"use strict";var i={absolutePositionFromBoundingRect:function e(a,i){i=i||1;return["top","left","width","height"].reduce(function(e,t){e[t]=a[t]*i;return e},{})}};e.exports=i},"./src/main/webapp/universal/src/apps/App/components/SEOContentCollectionTab/SEOContentCollectionTab.jsx":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var s=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=s(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var r=s(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var o=s(a("./common/temp/node_modules/@babel/runtime/helpers/assertThisInitialized.js"));var l=s(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var c=s(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var u=s(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var T=s(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var d=s(a("./common/temp/node_modules/prop-types/index.js"));var I=i(a("./common/temp/node_modules/react/index.js"));var q=s(a("./common/temp/node_modules/classnames/index.js"));var k=a("./src/main/webapp/universal/src/shared/i18n/index.ts");var g=a("./src/main/webapp/universal/src/apps/App/shared/utils/StructuredInputUtils.js");var p=s(a("./src/main/webapp/universal/src/shared/utils/UrlUtils.js"));var L=s(a("./src/main/webapp/universal/src/shared/contexts/RouterContext.js"));var h=s(a("./src/main/webapp/universal/src/shared/router/propType.ts"));var D=s(a("./src/main/webapp/universal/src/shared/contexts/LocationContext.js"));var N=s(a("./src/main/webapp/universal/src/apps/App/components/SEOContentCollectionTab/components/SEOFooterDescription.jsx"));var R=s(a("./src/main/webapp/universal/src/apps/App/components/SEOContentCollectionTab/components/SEOGoogleSearchPreview.jsx"));var O=s(a("./src/main/webapp/universal/src/apps/App/components/SEOContentCollectionTab/components/SEOHidePage.jsx"));var P=s(a("./src/main/webapp/universal/src/apps/App/components/SEOContentCollectionTab/components/SEOMainDescription.jsx"));var x=s(a("./src/main/webapp/universal/src/apps/App/components/SEOContentCollectionTab/components/SEOMetaDescription.jsx"));var B=s(a("./src/main/webapp/universal/src/apps/App/components/SEOContentCollectionTab/components/SEOPageTitle.jsx"));var M=s(a("./src/main/webapp/universal/src/apps/App/components/SEOContentCollectionTab/components/SEOSocialTab.jsx"));var m=s(a("./src/main/webapp/universal/src/apps/App/components/SEOContentCollectionTab/actions/SEOContentCollectionTabActions.js"));var F=s(a("./src/main/webapp/universal/src/apps/App/components/SEOContentCollectionTab/SEOContentCollectionTab.less"));function f(s){var n=v();return function e(){var t=(0,u.default)(s),a;if(n){var i=(0,u.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,c.default)(this,a)}}function v(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var j=100;var U=400;var b=function e(t,a,i){var s={"%s":{exampleText:t},"%p":{exampleText:a}};i&&(s["%i"]={exampleText:a});return s};var S=function(e){(0,l.default)(s,e);var i=f(s);function s(){var h;(0,n.default)(this,s);for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];h=i.call.apply(i,[this].concat(t));(0,T.default)((0,o.default)(h),"filterUrlSlug",function(e){return e?p.default.createUrlWithSlash(e):""});(0,T.default)((0,o.default)(h),"linkField",function(a){return{value:h.props[a],onChange:function e(t){return m.default.updateField(a,t)}}});(0,T.default)((0,o.default)(h),"linkFieldText",function(a){return{value:h.props[a]||"",onChange:function e(t){return m.default.updateField(a,t)}}});(0,T.default)((0,o.default)(h),"generateErrorMessage",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;var a=arguments.length>2?arguments[2]:void 0;var i="string"===typeof e?e.length:0;return i===t?a:null});(0,T.default)((0,o.default)(h),"getPreviewTitle",function(){var e=h.props,t=e.collectionTitleFormat,a=e.homepageTitleFormat,i=e.itemTitleFormat,s=e.isContentItem,n=e.isHomepage,r=e.siteTitle,o=e.seoTitle,l=e.title;var c=o;c&&!n||(c=l);var u=b(r,c,s);var d=(0,g.buildRegexes)(u);var p;p=s?i:n?a:t;return(0,g.getPreviewString)(d,u,p)});(0,T.default)((0,o.default)(h),"getDescription",function(){var e=h.props,t=e.isHomepage,a=e.metaDescription,i=e.seoDescription;if(t)return a;return i});return h}(0,r.default)(s,[{key:"getChildContext",value:function e(){return{router:this.props.router,location:this.props.location}}},{key:"render",value:function e(){var t=this.props,a=t.assetHeight,i=t.assetUrl,s=t.assetWidth,n=t.baseUrl,r=t.isContentItem,o=t.isHomepage,l=t.isLoading,c=t.isSocialTab,u=t.seoDescription,d=t.seoSocialSharingImageId,p=t.socialImageId,h=t.seoTitle,g=t.supportsFriendlyUrls,m=t.containsSubPages,f=t.urlId,v=t.router;var b=(0,k.t)("SEO Title cannot be more than {maxLength} characters",{maxLength:j});var S=(0,k.t)("SEO Description cannot be more than {maxLength} characters",{maxLength:U});var y=this.generateErrorMessage(u,U,S);var _=this.generateErrorMessage(h,j,b);var C=this.getPreviewTitle();var E=this.getDescription();var w=!r&&(!o||g);var A=(0,q.default)(F.default.container,(0,T.default)({},F.default.contentItemContainer,r));return I.default.createElement(L.default.Provider,{value:v},I.default.createElement(D.default.Provider,{value:location},I.default.createElement("div",{className:F.default.flexContainer},I.default.createElement("div",{className:A},!c&&I.default.createElement(I.Fragment,null,!o&&I.default.createElement(P.default,{isContentItem:r,isHomepage:o}),I.default.createElement(R.default,{baseUrl:n,description:E,isHomepage:o,title:C,urlId:f}),!o&&I.default.createElement(I.Fragment,null,I.default.createElement(B.default,{errorMessage:_,linkFieldText:this.linkFieldText,maxLength:j}),I.default.createElement(x.default,{errorMessage:y,linkFieldText:this.linkFieldText,maxLength:U})),I.default.createElement(N.default,{baseUrl:n,isContentItem:r,isHomepage:o}),w&&I.default.createElement(O.default,{linkField:this.linkField,isHomePage:o,supportsFriendlyUrls:g,containsSubPages:m})),c&&I.default.createElement(M.default,{assetHeight:a,assetUrl:i,assetWidth:s,description:E,isContentItem:r,isLoading:l,seoSocialSharingImageId:d,socialImageId:p,title:C,url:n,urlSlug:f})))))}}]);return s}(I.Component);(0,T.default)(S,"propTypes",{assetHeight:d.default.number,assetUrl:d.default.string,assetWidth:d.default.number,baseUrl:d.default.string,categoryPagesSeoHidden:d.default.bool,collectionTitleFormat:d.default.string,homepageTitleFormat:d.default.string,isContentItem:d.default.bool,isHidden:d.default.bool,isHomepage:d.default.bool,isSocialTab:d.default.bool,itemTitleFormat:d.default.string,metaDescription:d.default.string,seoDescription:d.default.string,seoSocialSharingImageId:d.default.string,seoTitle:d.default.string,siteTitle:d.default.string,socialImageId:d.default.string,supportsFriendlyUrls:d.default.bool,tagPagesSeoHidden:d.default.bool,title:d.default.string,urlId:d.default.string,containsSubPages:d.default.bool});(0,T.default)(S,"childContextTypes",{router:h.default,location:d.default.object});var y=S;t.default=y;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/SEOContentCollectionTab/SEOContentCollectionTab.less":function(e,t,a){e.exports={container:"SEOContentCollectionTab-container-oVPa9",contentItemContainer:"SEOContentCollectionTab-contentItemContainer-1Fm3b",flexContainer:"SEOContentCollectionTab-flexContainer-XspAm",field:"SEOContentCollectionTab-field-3jitZ",description:"SEOContentCollectionTab-description-12mUH",label:"SEOContentCollectionTab-label-3hS5C",buttonLink:"SEOContentCollectionTab-buttonLink-3Nrvn"}},"./src/main/webapp/universal/src/apps/App/components/SEOContentCollectionTab/actions/SEOContentCollectionTabActions.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var r=i(a("./src/main/webapp/universal/src/shared/dispatchers/alt/index.ts"));var o=function(){function e(){(0,s.default)(this,e);this.generateActions("fetchDataSuccess")}(0,n.default)(e,[{key:"clearEditingState",value:function e(){var t=this;return function(e){e();t.updateFieldNoEdit("isDirty",false)}}},{key:"setAsHomepage",value:function e(){var t=this;return function(e){e();t.updateFieldNoEdit("isHomepage",true)}}},{key:"updateField",value:function e(t,a){return{field:t,value:a}}},{key:"updateFieldNoEdit",value:function e(t,a){return{field:t,value:a}}},{key:"fetchData",value:function e(u,d){var p=this;return function(e){var t=u&&u.toJS();var a=false;t&&e(t.id);if(d&&!t){a=true;t={}}var i=t,s=i.categoryPagesSeoHidden,n=i.homepage,r=i.seoData,o=i.tagPagesSeoHidden,l=i.title,c=i.urlId;p.fetchDataSuccess({categoryPagesSeoHidden:s,isHomepage:n,isContentItem:d,isNewContentItem:a,seoData:r,tagPagesSeoHidden:o,title:l,urlId:c})}}}]);return e}();var l=r.default.createActions(o);t.default=l;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/SEOContentCollectionTab/components/SEOFooterDescription.jsx":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var s=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=s(a("./common/temp/node_modules/react/index.js"));var r=i(a("./common/temp/node_modules/prop-types/index.js"));var o=a("./common/temp/node_modules/@sqs/fields/lib/index.js");var l=i(a("./src/main/webapp/universal/src/apps/App/shared/components/Link.jsx"));var c=a("./src/main/webapp/universal/src/shared/i18n/react.ts");var u=i(a("./src/main/webapp/universal/src/shared/constants/HelpLinks.js"));var d=i(a("./src/main/webapp/universal/src/apps/App/components/SEOContentCollectionTab/SEOContentCollectionTab.less"));var p=function e(t){return n.default.createElement(n.Fragment,null,n.default.createElement(c.T,{project:"apps.App"},"This page is your homepage. Search engines use information from your site’s SEO settings to show your page in their search results, which you can preview here. If you set another page as your homepage, you can edit this page’s SEO information here."),n.default.createElement("div",{className:d.default.field},n.default.createElement(l.default,{className:d.default.buttonLink,to:"/marketing/seo",key:"marketing-seo"},n.default.createElement(c.T,{project:"apps.App"},"EDIT WEBSITE SEO SETTINGS"))))};var h=n.default.createElement(c.T,{squarespaceHelp:n.default.createElement("a",{target:"_blank",href:u.default.SEO_EDIT_TITLE},n.default.createElement(c.T,{project:"apps.App"},"title formats.")),project:"apps.App"},"Search results typically show your SEO title and description. Your title is also the browser window title, and matches your {squarespaceHelp} Depending on the search engine, descriptions displayed can be 50 to 300 characters long. If you don’t add a title or description, search engines will use this item's title and content.");var g=n.default.createElement(c.T,{squarespaceHelp:n.default.createElement("a",{target:"_blank",href:u.default.SEO_EDIT_TITLE},n.default.createElement(c.T,{project:"apps.App"},"title formats.")),project:"apps.App"},"Search results typically show your SEO title and description. Your title is also the browser window title, and matches your {squarespaceHelp} Depending on the search engine, descriptions displayed can be 50 to 300 characters long. If you don’t add a title or description, search engines will use your page title and content.");var m=function e(t){return t?h:g};var f=function e(t){return n.default.createElement(o.Description,null,t.isHomepage?n.default.createElement(p,{baseUrl:t.baseUrl}):m(t.isContentItem))};f.propTypes={baseUrl:r.default.string.isRequired,isContentItem:r.default.bool,isHomepage:r.default.bool};p.propTypes={baseUrl:r.default.string.isRequired};var v=f;t.default=v;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/SEOContentCollectionTab/components/SEOGoogleSearchPreview.jsx":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/prop-types/index.js"));var o=i(a("./common/temp/node_modules/react/index.js"));var l=i(a("./src/main/webapp/universal/src/apps/App/components/SEOContentCollectionTab/SEOContentCollectionTab.less"));var c=i(a("./src/main/webapp/universal/src/apps/App/shared/components/GoogleSearchPreview/index.jsx"));var n=a("./src/main/webapp/universal/src/shared/i18n/index.ts");var u=(0,n.t)("This description will be automatically generated by search engines. To override that description, enter one below.");var d=(0,n.t)("This description will be automatically generated by search engines. To override that description, enter a description in website SEO settings.");var r=function e(t){var a=t.baseUrl||"";var i=t.urlId||"";"/"===i.charAt(0)&&(i=i.substring(1));var s=t.isHomepage?a:a+"/"+i;var n=t.description||u;!t.description&&t.isHomepage&&(n=d);var r=t.title||"";r=r.substring(0,70);return o.default.createElement("div",{className:l.default.field},o.default.createElement(c.default,{url:s,title:r,description:n,isHelpDescription:!t.description,hideTitle:t.hideTitle}))};r.propTypes={baseUrl:s.default.string,description:s.default.string,hideTitle:s.default.bool,isHomepage:s.default.bool,title:s.default.string,urlId:s.default.string};var p=r;t.default=p;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/SEOContentCollectionTab/components/SEOHidePage.jsx":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/extends.js"));var n=i(a("./common/temp/node_modules/react/index.js"));var r=i(a("./common/temp/node_modules/prop-types/index.js"));var o=a("./common/temp/node_modules/@sqs/fields/lib/index.js");var l=a("./src/main/webapp/universal/src/shared/i18n/index.ts");var c=a("./src/main/webapp/universal/src/shared/i18n/react.ts");var u=i(a("./src/main/webapp/universal/src/apps/App/components/SEOContentCollectionTab/SEOContentCollectionTab.less"));var d=function e(t){var a=t.linkField("isHidden").value;if(t.isHomePage&&!t.supportsFriendlyUrls)return n.default.createElement("div",{className:u.default.field});if(t.supportsFriendlyUrls)return n.default.createElement(n.default.Fragment,null,n.default.createElement("div",{className:u.default.field},n.default.createElement(n.default.Fragment,null,n.default.createElement(o.Label,null,n.default.createElement(c.T,{project:"apps.App"},"Hide from Search Engines")),!t.isHomePage&&n.default.createElement(o.Check,(0,s.default)({title:(0,l.t)("All pages in this collection")},t.linkField("isHidden"),{theme:"damask"})),n.default.createElement(o.Check,{isDisabled:a,title:(0,l.t)("All category pages in this collection"),value:a||t.linkField("categoryPagesSeoHidden").value,onChange:t.linkField("categoryPagesSeoHidden").onChange,theme:"damask"}),n.default.createElement(o.Check,{isDisabled:a,title:(0,l.t)("All tag pages in this collection"),value:a||t.linkField("tagPagesSeoHidden").value,onChange:t.linkField("tagPagesSeoHidden").onChange,theme:"damask"}))));return n.default.createElement(n.default.Fragment,null,n.default.createElement("div",{className:u.default.field},t.containsSubPages&&n.default.createElement(o.Check,(0,s.default)({title:(0,l.t)("Hide all pages in this collection from search engines")},t.linkField("isHidden"),{theme:"damask"})),!t.containsSubPages&&n.default.createElement(o.Check,(0,s.default)({title:(0,l.t)("Hide this page from search engines")},t.linkField("isHidden"),{theme:"damask"}))))};d.propTypes={isHomePage:r.default.bool,linkField:r.default.func,supportsFriendlyUrls:r.default.bool,containsSubPages:r.default.bool};var p=d;t.default=p;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/SEOContentCollectionTab/components/SEOImage.jsx":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/prop-types/index.js"));var n=i(a("./common/temp/node_modules/react/index.js"));var r=a("./common/temp/node_modules/@sqs/fields/lib/index.js");var o=i(a("./src/main/webapp/universal/src/apps/App/shared/components/ImageField/index.js"));var l=a("./src/main/webapp/universal/src/shared/i18n/react.ts");var c=i(a("./src/main/webapp/universal/src/apps/App/shared/components/ImagePicker/constants/LicensedAssetDestination.js"));var u=i(a("./src/main/webapp/universal/src/apps/App/components/SEOContentCollectionTab/SEOContentCollectionTab.less"));var d=i(a("./src/main/webapp/universal/src/apps/App/components/SEOContentCollectionTab/components/SEOSocialDescription.jsx"));var p=function e(t){return n.default.createElement("div",{className:u.default.field},n.default.createElement(r.Label,{className:u.default.label},n.default.createElement(l.T,{project:"apps.App"},"Alternate Social Sharing Image (Optional)")),n.default.createElement(o.default,{height:226,allowLicensedImage:true,key:"seo-image-editor",contentItemId:t.contentItemId,onChange:t.onChange,imageDestination:c.default.SEO_CONTENT,isFocalPointEditable:false}),n.default.createElement(d.default,{isContentItem:t.isContentItem}))};p.propTypes={isContentItem:s.default.bool,contentItemId:s.default.string,onChange:s.default.func};var h=p;t.default=h;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/SEOContentCollectionTab/components/SEOMainDescription.jsx":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/prop-types/index.js"));var n=i(a("./common/temp/node_modules/react/index.js"));var r=a("./common/temp/node_modules/@sqs/fields/lib/index.js");var o=a("./src/main/webapp/universal/src/shared/i18n/react.ts");var l=i(a("./src/main/webapp/universal/src/shared/constants/HelpLinks.js"));var c=n.default.createElement(o.T,{squarespaceHelp:n.default.createElement("a",{target:"_blank",href:l.default.SEO_OVERVIEW},n.default.createElement(o.T,{project:"apps.App"},"Learn more")),project:"apps.App"},"Search engine optimization (SEO) allows you to improve your ranking in search results. Use these features to make it easier for users to find your page when they search for it. {squarespaceHelp}");var u=n.default.createElement(o.T,{squarespaceHelp:n.default.createElement("a",{target:"_blank",href:l.default.SEO_OVERVIEW},n.default.createElement(o.T,{project:"apps.App"},"Learn more")),project:"apps.App"},"Search engine optimization (SEO) allows you to improve your ranking in search results. Use these features to make it easier for users to find this item when they search for it. {squarespaceHelp}");var d=function e(t){return n.default.createElement(r.Description,null,t.isContentItem?u:c)};d.propTypes={isContentItem:s.default.bool};var p=d;t.default=p;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/SEOContentCollectionTab/components/SEOMetaDescription.jsx":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/extends.js"));var n=i(a("./common/temp/node_modules/prop-types/index.js"));var r=i(a("./common/temp/node_modules/react/index.js"));var o=a("./common/temp/node_modules/@sqs/fields/lib/index.js");var l=a("./src/main/webapp/universal/src/shared/i18n/index.ts");var c=a("./src/main/webapp/universal/src/shared/i18n/react.ts");var u=i(a("./src/main/webapp/universal/src/apps/App/components/SEOContentCollectionTab/SEOContentCollectionTab.less"));var d=function e(t){var a=t.linkFieldText("seoDescription");return r.default.createElement("div",{className:u.default.field},r.default.createElement(o.Label,{className:u.default.label},r.default.createElement(c.T,{project:"apps.App"},"SEO Description (Optional)")),r.default.createElement(o.TextArea,(0,s.default)({placeholder:(0,l.t)("Enter a description…")},a,{minRows:3,characterCountLimit:t.maxLength,maxLength:t.maxLength,errorMessage:t.errorMessage,wrapperClassName:u.default.description})))};d.propTypes={linkFieldText:n.default.func,maxLength:n.default.number,errorMessage:n.default.string};var p=d;t.default=p;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/SEOContentCollectionTab/components/SEOPageTitle.jsx":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/extends.js"));var n=i(a("./common/temp/node_modules/prop-types/index.js"));var r=i(a("./common/temp/node_modules/react/index.js"));var o=a("./common/temp/node_modules/@sqs/fields/lib/index.js");var l=a("./src/main/webapp/universal/src/shared/i18n/react.ts");var c=i(a("./src/main/webapp/universal/src/apps/App/components/SEOContentCollectionTab/SEOContentCollectionTab.less"));var u=function e(t){return r.default.createElement("div",{className:c.default.field},r.default.createElement(o.Label,{className:c.default.label},r.default.createElement(l.T,{project:"apps.App"},"SEO Title (Optional)")),r.default.createElement(o.TextArea,(0,s.default)({},t.linkFieldText("seoTitle"),{minRows:1,characterCountLimit:t.maxLength,maxLength:t.maxLength,errorMessage:t.errorMessage,wrapperClassName:c.default.description})))};u.propTypes={linkFieldText:n.default.func,maxLength:n.default.number,errorMessage:n.default.string};var d=u;t.default=d;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/SEOContentCollectionTab/components/SEOSocialDescription.jsx":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/prop-types/index.js"));var n=i(a("./common/temp/node_modules/react/index.js"));var r=a("./common/temp/node_modules/@sqs/fields/lib/index.js");var o=a("./src/main/webapp/universal/src/shared/i18n/react.ts");var l=i(a("./src/main/webapp/universal/src/shared/constants/HelpLinks.js"));var c=n.default.createElement(o.T,{squarespaceHelp:n.default.createElement("a",{target:"_blank",href:l.default.SEO_SOCIAL},n.default.createElement(o.T,{project:"apps.App"},"Learn more about images.")),project:"apps.App"},"Social networks typically show your social sharing image together with your SEO title and description. If you don’t add a social sharing image, we’ll use the item's thumbnail instead. {squarespaceHelp}");var u=n.default.createElement(o.T,{squarespaceHelp:n.default.createElement("a",{target:"_blank",href:l.default.SEO_SOCIAL},n.default.createElement(o.T,{project:"apps.App"},"Learn more about images.")),project:"apps.App"},"Social networks typically show your social sharing image together with your SEO title and description. If you don’t add a social sharing image, we’ll use your social sharing logo or site logo instead. {squarespaceHelp}");var d=function e(t){return n.default.createElement(r.Description,null,t.isContentItem?c:u)};d.propTypes={isContentItem:s.default.bool};var p=d;t.default=p;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/SEOContentCollectionTab/components/SEOSocialPreview.jsx":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var s=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var c=s(a("./common/temp/node_modules/@babel/runtime/helpers/extends.js"));var u=s(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var n=s(a("./common/temp/node_modules/prop-types/index.js"));var d=i(a("./common/temp/node_modules/react/index.js"));var p=a("./common/temp/node_modules/@sqs/fields/lib/index.js");var h=a("./src/main/webapp/universal/src/shared/i18n/index.ts");var g=a("./src/main/webapp/universal/src/shared/i18n/react.ts");var m=s(a("./common/temp/node_modules/classnames/index.js"));var f=s(a("./src/main/webapp/universal/src/apps/App/components/SEOContentCollectionTab/components/SEOSocialPreview.less"));var v=function e(t){var a=t.description,i=t.isHelpDescription,s=t.showImage,n=t.styles,r=t.title,o=t.url;var l=(0,m.default)(f.default.description,(0,u.default)({},f.default.helperDescription,i));return d.default.createElement(d.Fragment,null,s&&d.default.createElement("div",{className:f.default.image,style:n}),d.default.createElement("div",{className:f.default.container},d.default.createElement("div",{className:f.default.url},o),d.default.createElement("div",{className:f.default.title},r),d.default.createElement("div",{className:l},a)))};var b=function e(t){var a=t.description,i=t.isHelpDescription,s=t.showImage,n=t.styles,r=t.title,o=t.url;var l=(0,m.default)(f.default.leftAlignedDescription,(0,u.default)({},f.default.helperDescription,i));return d.default.createElement("div",{className:f.default.leftAligned},s&&d.default.createElement("div",{className:f.default.leftAlignedImage,style:n}),d.default.createElement("div",{className:s?f.default.leftAlignedContainer:f.default.leftAlignedContainerFullWidth},d.default.createElement("div",{className:f.default.url},o),d.default.createElement("div",{className:f.default.title},r),d.default.createElement("div",{className:l},a)))};var r=function e(t){var a={backgroundImage:"url('".concat(t.assetUrl,"?format=500w')"),height:"".concat(t.assetHeight,"px"),width:"".concat(t.assetWidth,"px")};var i=t.assetWidth/t.assetHeight;var s=!!t.assetUrl&&t.assetWidth>=200&&t.assetHeight>=200;var n=t.assetWidth<445&&t.assetHeight<315||i<.67;var r=(0,h.t)("This description will be automatically generated depending on the service this link is shared on. To override that description, enter a description on the SEO tab.");var o=t.description||r;var l=!t.description;return d.default.createElement(d.Fragment,null,t.hideTitle?null:d.default.createElement(p.Label,null,d.default.createElement(g.T,{project:"apps.App"},"Social Preview")),n?d.default.createElement(b,(0,c.default)({},t,{description:o,styles:a,showImage:s,isHelpDescription:l})):d.default.createElement(v,(0,c.default)({},t,{description:o,styles:a,showImage:s,isHelpDescription:l})))};r.propTypes={assetHeight:n.default.number,assetUrl:n.default.string,assetWidth:n.default.number,description:n.default.string,hideTitle:n.default.bool,seoSocialSharingImageId:n.default.string,title:n.default.string,url:n.default.string};var o=r;t.default=o;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/SEOContentCollectionTab/components/SEOSocialPreview.less":function(e,t,a){e.exports={container:"SEOSocialPreview-container-2s10l",image:"SEOSocialPreview-image-33Gnm",url:"SEOSocialPreview-url-1iP-3",title:"SEOSocialPreview-title-2nSt-",description:"SEOSocialPreview-description-1YDqK",helperDescription:"SEOSocialPreview-helperDescription-2w6b9",leftAligned:"SEOSocialPreview-leftAligned-1MqGv",leftAlignedContainer:"SEOSocialPreview-leftAlignedContainer-1e4Ua",leftAlignedContainerFullWidth:"SEOSocialPreview-leftAlignedContainerFullWidth-1jsKE",leftAlignedDescription:"SEOSocialPreview-leftAlignedDescription-3lk_R",leftAlignedImage:"SEOSocialPreview-leftAlignedImage-1CmfW"}},"./src/main/webapp/universal/src/apps/App/components/SEOContentCollectionTab/components/SEOSocialTab.jsx":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var s=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var r=s(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var o=s(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var l=s(a("./common/temp/node_modules/@babel/runtime/helpers/assertThisInitialized.js"));var c=s(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var u=s(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var d=s(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var p=s(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var n=s(a("./common/temp/node_modules/prop-types/index.js"));var h=i(a("./common/temp/node_modules/react/index.js"));var g=s(a("./src/main/webapp/universal/src/apps/App/components/SEOContentCollectionTab/actions/SEOContentCollectionTabActions.js"));var m=s(a("./src/main/webapp/universal/src/apps/App/components/SEOContentCollectionTab/components/SEOImage.jsx"));var f=s(a("./src/main/webapp/universal/src/apps/App/components/SEOContentCollectionTab/components/SEOSocialPreview.jsx"));var v=a("./src/main/webapp/universal/src/shared/utils/UrlUtils.js");var b=s(a("./src/main/webapp/universal/src/apps/App/components/SEOContentCollectionTab/components/SEOSocialTab.less"));function S(s){var n=y();return function e(){var t=(0,d.default)(s),a;if(n){var i=(0,d.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,u.default)(this,a)}}function y(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var _=function(e){(0,c.default)(n,e);var s=S(n);function n(){var e;(0,r.default)(this,n);for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];e=s.call.apply(s,[this].concat(a));(0,p.default)((0,l.default)(e),"onImageUpload",function(e){return g.default.updateField("seoSocialSharingImageId",e)});return e}(0,o.default)(n,[{key:"render",value:function e(){var t=this.props,a=t.assetHeight,i=t.assetUrl,s=t.assetWidth,n=t.description,r=t.isContentItem,o=t.isLoading,l=t.seoSocialSharingImageId,c=t.socialImageId,u=t.title,d=t.url;var p=(0,v.stripProtocolAndSlashes)(d);return h.default.createElement(h.Fragment,null,h.default.createElement("div",{className:b.default.field},h.default.createElement(f.default,{assetHeight:a,assetUrl:i,assetWidth:s,description:n,seoSocialSharingImageId:c,title:u,url:p})),h.default.createElement("div",{className:b.default.field},!o&&h.default.createElement(m.default,{contentItemId:l,isContentItem:r,onChange:this.onImageUpload})))}}]);return n}(h.Component);(0,p.default)(_,"propTypes",{assetHeight:n.default.number,assetUrl:n.default.string,assetWidth:n.default.number,description:n.default.string,isContentItem:n.default.bool,isLoading:n.default.bool,seoSocialSharingImageId:n.default.string,socialImageId:n.default.string,title:n.default.string,url:n.default.string});var C=_;t.default=C;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/SEOContentCollectionTab/components/SEOSocialTab.less":function(e,t,a){e.exports={field:"SEOSocialTab-field-1HkVe",label:"SEOSocialTab-label-wRcni"}},"./src/main/webapp/universal/src/apps/App/components/SEOContentCollectionTab/index.jsx":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var u=i(a("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));var n=i(a("./src/main/webapp/universal/src/shared/dispatchers/alt/index.ts"));var r=i(a("./common/temp/node_modules/alt-utils/lib/connectToStores.js"));var o=i(a("./src/main/webapp/frontend/packages/enums/CollectionOrdering.js"));var l=i(a("./src/main/webapp/frontend/packages/enums/CollectionTypes.js"));var L=i(a("./src/main/webapp/universal/src/apps/App/shared/stores/ContentCollectionStore.js"));var D=i(a("./src/main/webapp/universal/src/apps/App/shared/stores/ContentItemStore.js"));var N=i(a("./src/main/webapp/universal/src/apps/App/shared/actions/ContentItemActions.js"));var c=i(a("./src/main/webapp/universal/src/apps/App/components/SEOContentCollectionTab/actions/SEOContentCollectionTabActions.js"));var R=i(a("./src/main/webapp/universal/src/apps/App/components/SEOContentCollectionTab/stores/SEOContentCollectionTabStore.js"));var d=i(a("./src/main/webapp/universal/src/apps/App/components/SEOContentCollectionTab/SEOContentCollectionTab.jsx"));var O=i(a("./src/main/webapp/universal/src/apps/App/shared/stores/WebsiteSettingsStore/index.js"));var P=a("./src/main/webapp/universal/src/apps/App/screens/Settings/screens/SEOPanel/utils.js");var x=i(a("./src/main/webapp/universal/src/apps/App/shared/stores/WebsiteStore/index.js"));function p(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function B(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?p(Object(a),true).forEach(function(e){(0,s.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var M=function e(t){var a=t.collectionId,i=t.hasThumbnailImage,s=t.isHomepage,n=t.seoSocialSharingImageId,r=t.socialLogoImageId,o=t.siteLogoId;if(n)return n;if(s&&!r&&o)return o;if(i)return a;if(r)return r};var F=function e(t){var a=t.assetUrl,i=t.originalSize;var s=i?i.split("x"):[],n=(0,u.default)(s,2),r=n[0],o=n[1];var l=r?Number(r):0;var c=o?Number(o):0;return{assetUrl:a||"",assetWidth:l,assetHeight:c}};var j=function e(t){var a=D.default.getState().get(t);var i=a?a.toJS():{};return i};var U=function e(t,a,i){return!t&&a===o.default.CHRONOLOGICAL&&i===l.default.COLLECTION_TYPE_GENERIC};var V=function e(t,a,i){if(t)return false;if(U(t,a,i))return true;return i===l.default.PRODUCTS||a===o.default.CALENDAR};var h=(0,r.default)({getStores:function e(){return[L.default,D.default,R.default,x.default]},getPropsFromStores:function e(t){var a=R.default.getState();var i=a.isHomepage,s=a.seoSocialSharingImageId,n=a.collectionId;var r=x.default.getState();var o=r.get("baseUrl")||"";var l=r.get("metaDescription")||"";var c=r.get("siteTitle")||"";var u=r.get("socialLogoImageId");var d=r.get("logoImageId");var p;var h=false;if(t.isContentItem){p=j(t.collectionId);h=!!p.coverImageUrl}var g={collectionId:n,hasThumbnailImage:h,isHomepage:i,seoSocialSharingImageId:s,socialLogoImageId:u,siteLogoId:d};var m=M(g);var f=D.default.getState().get(m);!f&&m&&N.default.read.defer(m);p=j(m);var v=p.items;h&&v&&v.length>0&&(p=v[0]);var b=F(p);var S=O.default.getState();var y=(0,P.updateLegacyFormat)(S.collectionTitleFormat);var _=(0,P.updateLegacyFormat)(S.homepageTitleFormat);var C=(0,P.updateLegacyFormat)(S.itemTitleFormat);var E=L.default.getState().get(n);var w=false;var A=false;if(E){var T=E.toJS();var I=T.folder,q=T.ordering,k=T.type;w=V(I,q,k);A=U(I,q,k)}return B({},a,{},b,{baseUrl:o,collectionTitleFormat:y,homepageTitleFormat:_,itemTitleFormat:C,metaDescription:l,siteTitle:c,socialImageId:m,supportsFriendlyUrls:A,containsSubPages:w})},componentDidConnect:function e(t){var a=t.collectionId,i=t.isContentItem;if(a===R.default.getState().collectionId)return;a&&n.default.recycle(R.default);i?D.default.fetchFromServer(a).then(function(e){return c.default.fetchData(e,true)}):L.default.fetch(a).then(function(e){return c.default.fetchData(e)})}},d.default);var g=h;t.default=g;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/SEOContentCollectionTab/stores/SEOContentCollectionTabStore.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var o=i(a("./src/main/webapp/universal/src/shared/dispatchers/alt/index.ts"));var l=i(a("./src/main/webapp/universal/src/apps/App/components/SEOContentCollectionTab/actions/SEOContentCollectionTabActions.js"));var c=function(){function e(){(0,s.default)(this,e);this.bindActions(l.default);this.state={title:"",assetUrl:"",collectionId:"",urlId:"",seoDescription:"",seoSocialSharingImageId:"",seoTitle:"",isContentItem:false,isHomepage:false,isHidden:false,isDirty:false,isLoading:true,categoryPagesSeoHidden:false,tagPagesSeoHidden:false,supportsFriendlyUrls:false}}(0,r.default)(e,[{key:"onUpdateField",value:function e(t){var a;var i=t.field,s=t.value;this.setState((a={},(0,n.default)(a,i,s),(0,n.default)(a,"isDirty",true),a))}},{key:"onUpdateFieldNoEdit",value:function e(t){var a=t.field,i=t.value;this.setState((0,n.default)({},a,i))}},{key:"onFetchData",value:function e(t){this.setState({isLoading:true,collectionId:t})}},{key:"onFetchDataSuccess",value:function e(t){var a=t.categoryPagesSeoHidden,i=void 0!==a&&a,s=t.isHomepage,n=void 0!==s&&s,r=t.isContentItem,o=void 0!==r&&r,l=t.isNewContentItem,c=void 0!==l&&l,u=t.seoData,d=void 0===u?{}:u,p=t.tagPagesSeoHidden,h=void 0!==p&&p,g=t.title,m=void 0===g?"":g,f=t.urlId,v=void 0===f?"":f;var b=d.seoImageId;var S=d.seoTitle,y=d.seoDescription,_=d.seoHidden;var C=m;C=this.state.title||m;if(c){S=this.state.seoTitle||S;y=this.state.seoDescription||y;_=this.state.isHidden||_}this.setState({categoryPagesSeoHidden:i,isContentItem:o,isDirty:false,isHidden:_,isHomepage:n,isLoading:false,seoDescription:y,seoSocialSharingImageId:b,seoTitle:S||"",tagPagesSeoHidden:h,title:C,urlId:v})}}]);return e}();var u=o.default.createStore(c,"SEOContentCollectionTabStore");t.default=u;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/SchedulingEditorDialog/actions/SchedulingEditorDialogActions.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var r=i(a("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var l=i(a("./src/main/webapp/universal/src/shared/dispatchers/alt/index.ts"));var c=a("./src/main/webapp/universal/src/apps/App/components/SchedulingEditorDialog/utils/AcuityAPI.js");var u=i(a("./src/main/webapp/universal/src/apps/App/components/SchedulingEditorDialog/stores/SchedulingEditorDialogStore.js"));var d=function(){function e(){(0,n.default)(this,e);this.generateActions("revertEdits","commitEdits","fetchDataSuccess","fetchDataFailure","resolveFetchDataFailure","change","reset")}(0,o.default)(e,[{key:"startEditing",value:function e(t){var a=this;return function(e){e(t);a.maybeFetchData()}}},{key:"maybeFetchData",value:function e(){var n=this;return function(){var t=(0,s.default)(r.default.mark(function e(a){var i,s;return r.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:i=u.default.getState();if(!i.userDataRequestInitiated){t.next=5;break}a({fetchStarted:false});t.next=16;break;case 5:a({fetchStarted:true});t.prev=6;t.next=9;return(0,c.fetchAcuityData)();case 9:s=t.sent;n.fetchDataSuccess(s);t.next=16;break;case 13:t.prev=13;t.t0=t["catch"](6);n.fetchDataFailure();case 16:case"end":return t.stop()}},e,null,[[6,13]])}));return function(e){return t.apply(this,arguments)}}()}}]);return e}();var p=l.default.createActions(d);t.default=p;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/SchedulingEditorDialog/components/AppointmentTypeSelect.jsx":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var c=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var u=i(a("./common/temp/node_modules/react/index.js"));var d=i(a("./common/temp/node_modules/prop-types/index.js"));var p=a("./common/temp/node_modules/@sqs/fields/lib/index.js");var h=a("./src/main/webapp/universal/src/shared/i18n/index.ts");function g(s){var n=m();return function e(){var t=(0,l.default)(s),a;if(n){var i=(0,l.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,o.default)(this,a)}}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var f=function(e){(0,r.default)(a,e);var t=g(a);function a(){(0,s.default)(this,a);return t.apply(this,arguments)}(0,n.default)(a,[{key:"render",value:function e(){var t=this.props,a=t.appointmentTypes,i=t.appointmentTypeIndex,s=t.onChange;return u.default.createElement(p.Select,{value:i,label:(0,h.t)("Appointment Type"),onChange:s},a.map(function(e,t){var a=e.name;return u.default.createElement("option",{key:t,value:t},a)}))}}]);return a}(u.default.Component);t.default=f;(0,c.default)(f,"propTypes",{appointmentTypes:d.default.arrayOf(d.default.shape({name:d.default.string.isRequired})).isRequired,appointmentTypeIndex:d.default.number,onChange:d.default.func});e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/SchedulingEditorDialog/components/CalendarSelect.jsx":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var c=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var u=i(a("./common/temp/node_modules/react/index.js"));var d=i(a("./common/temp/node_modules/prop-types/index.js"));var p=a("./common/temp/node_modules/@sqs/fields/lib/index.js");var h=a("./src/main/webapp/universal/src/shared/i18n/index.ts");function g(s){var n=m();return function e(){var t=(0,l.default)(s),a;if(n){var i=(0,l.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,o.default)(this,a)}}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var f=function(e){(0,r.default)(a,e);var t=g(a);function a(){(0,s.default)(this,a);return t.apply(this,arguments)}(0,n.default)(a,[{key:"render",value:function e(){var t=this.props,a=t.calendars,i=t.calendarIndex,s=t.onChange;return u.default.createElement(p.Select,{label:(0,h.t)("Calendar"),value:i,onChange:s},a.map(function(e,t){var a=e.name;return u.default.createElement("option",{key:t,value:t},a)}))}}]);return a}(u.default.Component);t.default=f;(0,c.default)(f,"propTypes",{calendars:d.default.arrayOf(d.default.shape({name:d.default.string.isRequired})).isRequired,calendarIndex:d.default.number,onChange:d.default.func});e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/SchedulingEditorDialog/components/CategorySelect.jsx":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var c=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var u=i(a("./common/temp/node_modules/react/index.js"));var d=i(a("./common/temp/node_modules/prop-types/index.js"));var p=a("./common/temp/node_modules/@sqs/fields/lib/index.js");var h=a("./src/main/webapp/universal/src/shared/i18n/index.ts");function g(s){var n=m();return function e(){var t=(0,l.default)(s),a;if(n){var i=(0,l.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,o.default)(this,a)}}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var f=function(e){(0,r.default)(a,e);var t=g(a);function a(){(0,s.default)(this,a);return t.apply(this,arguments)}(0,n.default)(a,[{key:"render",value:function e(){var t=this.props,a=t.categories,i=t.categoryIndex,s=t.onChange;return u.default.createElement(p.Select,{value:i,label:(0,h.t)("Category"),onChange:s},a.map(function(e,t){var a=e.id,i=e.name;return a.length>0?u.default.createElement("option",{key:t,value:t},i):null}))}}]);return a}(u.default.Component);t.default=f;(0,c.default)(f,"propTypes",{categories:d.default.arrayOf(d.default.shape({id:d.default.string.isRequired,name:d.default.string.isRequired})).isRequired,categoryIndex:d.default.number,onChange:d.default.func});e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/SchedulingEditorDialog/components/ClassSelect.jsx":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var c=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var u=i(a("./common/temp/node_modules/react/index.js"));var d=i(a("./common/temp/node_modules/prop-types/index.js"));var p=a("./common/temp/node_modules/@sqs/fields/lib/index.js");var h=a("./src/main/webapp/universal/src/shared/i18n/index.ts");var g=a("./src/main/webapp/universal/src/apps/App/components/SchedulingEditorDialog/constants/index.js");function m(s){var n=f();return function e(){var t=(0,l.default)(s),a;if(n){var i=(0,l.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,o.default)(this,a)}}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var v=function(e){(0,r.default)(a,e);var t=m(a);function a(){(0,s.default)(this,a);return t.apply(this,arguments)}(0,n.default)(a,[{key:"render",value:function e(){var t=this.props,a=t.classes,i=t.classIndex,s=t.onChange;return u.default.createElement(p.Select,{value:i,label:(0,h.t)("Class"),onChange:s},u.default.createElement("option",{value:g.ALL_CLASSES_INDEX},(0,h.t)("All Classes")),a.map(function(e,t){var a=e.name;return u.default.createElement("option",{key:t,value:t},a)}))}}]);return a}(u.default.Component);t.default=v;(0,c.default)(v,"propTypes",{classes:d.default.arrayOf(d.default.shape({name:d.default.string.isRequired})).isRequired,classIndex:d.default.number,onChange:d.default.func});e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/SchedulingEditorDialog/components/NonRegisteredDialog.jsx":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/assertThisInitialized.js"));var c=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var u=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var d=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var p=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var h=i(a("./common/temp/node_modules/react/index.js"));var g=a("./src/main/webapp/universal/src/shared/i18n/index.ts");var m=i(a("./src/main/webapp/universal/src/apps/App/components/SchedulingEditorDialog/components/NonRegisteredDialog.less"));var f=a("./common/temp/node_modules/@sqs/fields/lib/index.js");var v=i(a("./src/main/webapp/universal/src/apps/App/components/SchedulingEditorDialog/components/UrlInput.jsx"));function b(s){var n=S();return function e(){var t=(0,d.default)(s),a;if(n){var i=(0,d.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,u.default)(this,a)}}function S(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var y="/config/scheduling";var s=function(e){(0,c.default)(n,e);var s=b(n);function n(){var t;(0,r.default)(this,n);for(var e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];t=s.call.apply(s,[this].concat(a));(0,p.default)((0,l.default)(t),"state",{showUrlInput:false});(0,p.default)((0,l.default)(t),"urlInputRef",function(e){t.urlInputElement=e});(0,p.default)((0,l.default)(t),"focusUrlInput",function(){t.urlInputElement&&t.urlInputElement.focus()});(0,p.default)((0,l.default)(t),"onGetStartedClick",function(){window.open(y,"_blank")});(0,p.default)((0,l.default)(t),"onAddUrlClick",function(){t.setState({showUrlInput:true});t.focusUrlInput()});return t}(0,o.default)(n,[{key:"componentDidUpdate",value:function e(t,a){!a.showUrlInput&&this.state.showUrlInput&&this.focusUrlInput()}},{key:"render",value:function e(){return h.default.createElement("div",null,h.default.createElement("div",{className:m.default.description},(0,g.t)("Allow visitors to directly book appointments and classes. If you already use Acuity, link your scheduler, calendar, or appointment type.")),h.default.createElement(f.Button,{type:"primary",onClick:this.onGetStartedClick},(0,g.t)("Get Started With Scheduling")),h.default.createElement(f.Button,{onClick:this.onAddUrlClick},(0,g.t)("Add Existing Acuity Schedule")),this.state.showUrlInput?h.default.createElement("div",{className:m.default.urlInputWrapper},h.default.createElement(v.default,{url:this.props.acuityUrl,onChange:this.props.onChangeAcuityUrl,inputRef:this.urlInputRef,errorMessage:this.props.errorMessage})):null)}}]);return n}(h.default.Component);t.default=s;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/SchedulingEditorDialog/components/NonRegisteredDialog.less":function(e,t,a){e.exports={description:"NonRegisteredDialog-description-1kLqf",urlInputWrapper:"NonRegisteredDialog-urlInputWrapper-39w91"}},"./src/main/webapp/universal/src/apps/App/components/SchedulingEditorDialog/components/PageGroupSelect.jsx":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var c=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var u=i(a("./common/temp/node_modules/react/index.js"));var d=i(a("./common/temp/node_modules/prop-types/index.js"));var p=a("./common/temp/node_modules/@sqs/fields/lib/index.js");var h=i(a("./src/main/webapp/frontend/packages/enums/SchedulingPageGroup.js"));var g=a("./src/main/webapp/universal/src/shared/i18n/index.ts");function m(s){var n=f();return function e(){var t=(0,l.default)(s),a;if(n){var i=(0,l.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,o.default)(this,a)}}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var v=function(e){(0,r.default)(a,e);var t=m(a);function a(){(0,s.default)(this,a);return t.apply(this,arguments)}(0,n.default)(a,[{key:"render",value:function e(){var t=this.props,a=t.userData,i=t.schedulingPageGroup,s=t.initialSchedulingPageGroup;var n=s===h.default.CALENDARS||a.calendars.length>=2;var r=s===h.default.CATEGORIES||a.categories.length>=2;var o=a.classes.length+a.appointmentTypes.length>=2;var l=s===h.default.CLASSES||o&&a.classes.length>=1;var c=s===h.default.APPOINTMENT_TYPES||o&&a.appointmentTypes.length>=1;return u.default.createElement(p.Select,{label:(0,g.t)("Scheduling Page"),value:i,onChange:this.props.onChange},u.default.createElement("option",{value:h.default.ALL},(0,g.t)("All Public Appointment Types")),n?u.default.createElement("option",{value:h.default.CALENDARS},(0,g.t)("Calendars")):null,r?u.default.createElement("option",{value:h.default.CATEGORIES},(0,g.t)("Categories")):null,l?u.default.createElement("option",{value:h.default.CLASSES},(0,g.t)("Classes")):null,c?u.default.createElement("option",{value:h.default.APPOINTMENT_TYPES},(0,g.t)("Appointment Types")):null,u.default.createElement("option",{value:h.default.CUSTOM},(0,g.t)("Custom Link")))}}]);return a}(u.default.Component);t.default=v;(0,c.default)(v,"propTypes",{userData:d.default.shape({calendars:d.default.array.isRequired,categories:d.default.array.isRequired,classes:d.default.array.isRequired,appointmentTypes:d.default.array.isRequired}),schedulingPageGroup:d.default.string,initialSchedulingPageGroup:d.default.string,onChange:d.default.func});e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/SchedulingEditorDialog/components/RegisteredDialog.jsx":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var c=a("./src/main/webapp/universal/src/shared/i18n/index.ts");var u=i(a("./common/temp/node_modules/react/index.js"));var d=i(a("./src/main/webapp/frontend/packages/enums/SchedulingPageGroup.js"));var p=i(a("./src/main/webapp/universal/src/apps/App/components/SchedulingEditorDialog/components/RegisteredDialog.less"));var h=i(a("./src/main/webapp/universal/src/apps/App/components/SchedulingEditorDialog/components/PageGroupSelect.jsx"));var g=i(a("./src/main/webapp/universal/src/apps/App/components/SchedulingEditorDialog/components/CalendarSelect.jsx"));var m=i(a("./src/main/webapp/universal/src/apps/App/components/SchedulingEditorDialog/components/CategorySelect.jsx"));var f=i(a("./src/main/webapp/universal/src/apps/App/components/SchedulingEditorDialog/components/ClassSelect.jsx"));var v=i(a("./src/main/webapp/universal/src/apps/App/components/SchedulingEditorDialog/components/AppointmentTypeSelect.jsx"));var b=i(a("./src/main/webapp/universal/src/apps/App/components/SchedulingEditorDialog/components/UrlInput.jsx"));function S(s){var n=y();return function e(){var t=(0,l.default)(s),a;if(n){var i=(0,l.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,o.default)(this,a)}}function y(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var _=function(e){(0,r.default)(a,e);var t=S(a);function a(){(0,s.default)(this,a);return t.apply(this,arguments)}(0,n.default)(a,[{key:"renderSecondaryInput",value:function e(){var t=this.props,a=t.userData,i=t.selectionState;switch(i.schedulingPageGroup){case d.default.ALL:return null;case d.default.CALENDARS:return u.default.createElement(g.default,{calendars:a.calendars,calendarIndex:i.calendarIndex,onChange:this.props.onChangeCalendarIndex});case d.default.CATEGORIES:return u.default.createElement(m.default,{categories:a.categories,categoryIndex:i.categoryIndex,onChange:this.props.onChangeCategoryIndex});case d.default.CLASSES:return u.default.createElement(f.default,{classes:a.classes,classIndex:i.classIndex,onChange:this.props.onChangeClassIndex});case d.default.APPOINTMENT_TYPES:return u.default.createElement(v.default,{appointmentTypes:a.appointmentTypes,appointmentTypeIndex:i.appointmentTypeIndex,onChange:this.props.onChangeAppointmentTypeIndex});case d.default.CUSTOM:return u.default.createElement(b.default,{url:i.acuityUrl,onChange:this.props.onChangeAcuityUrl,errorMessage:this.props.errorMessage,hint:(0,c.t)("Add the URL of your existing scheduling page, calendar, or appointment type.")});default:return null}}},{key:"render",value:function e(){var t=this.props,a=t.userData,i=t.selectionState;return u.default.createElement(u.default.Fragment,null,u.default.createElement("div",{className:p.default.description},(0,c.t)("Choose an existing scheduling page, calendar, or appointment type.")),u.default.createElement("div",{className:p.default.inputWrapper},u.default.createElement(h.default,{userData:a,schedulingPageGroup:i.schedulingPageGroup,initialSchedulingPageGroup:i.initialSchedulingPageGroup,onChange:this.props.onChangeSchedulingPageGroup})),u.default.createElement("div",{className:p.default.inputWrapper},this.renderSecondaryInput()))}}]);return a}(u.default.Component);t.default=_;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/SchedulingEditorDialog/components/RegisteredDialog.less":function(e,t,a){e.exports={description:"RegisteredDialog-description-3B5Ms",inputWrapper:"RegisteredDialog-inputWrapper-3NJjP"}},"./src/main/webapp/universal/src/apps/App/components/SchedulingEditorDialog/components/SchedulingEditorDialog.jsx":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/assertThisInitialized.js"));var c=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var u=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var d=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var p=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var h=i(a("./common/temp/node_modules/react/index.js"));var g=i(a("./src/main/webapp/universal/src/apps/App/components/SchedulingEditorDialog/actions/SchedulingEditorDialogActions.js"));var m=i(a("./src/main/webapp/frontend/packages/enums/SchedulingPageGroup.js"));var f=i(a("./src/main/webapp/universal/src/apps/App/components/SchedulingEditorDialog/components/SchedulingEditorDialog.less"));var v=i(a("./src/main/webapp/universal/src/apps/App/components/SchedulingEditorDialog/components/NonRegisteredDialog.jsx"));var b=i(a("./src/main/webapp/universal/src/apps/App/components/SchedulingEditorDialog/components/RegisteredDialog.jsx"));var S=i(a("./common/temp/node_modules/@sqs/core-components/primitives/LoadingIndicator.js"));function y(s){var n=_();return function e(){var t=(0,d.default)(s),a;if(n){var i=(0,d.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,u.default)(this,a)}}function _(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var s=function(e){(0,c.default)(n,e);var s=y(n);function n(){var t;(0,r.default)(this,n);for(var e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];t=s.call.apply(s,[this].concat(a));(0,p.default)((0,l.default)(t),"onChangeSchedulingPageGroup",function(e){g.default.change(t.props.clientId,{schedulingPageGroup:e})});(0,p.default)((0,l.default)(t),"onChangeCalendarIndex",function(e){g.default.change(t.props.clientId,{calendarIndex:parseInt(e,10)})});(0,p.default)((0,l.default)(t),"onChangeCategoryIndex",function(e){g.default.change(t.props.clientId,{categoryIndex:parseInt(e,10)})});(0,p.default)((0,l.default)(t),"onChangeClassIndex",function(e){g.default.change(t.props.clientId,{classIndex:parseInt(e,10)})});(0,p.default)((0,l.default)(t),"onChangeAppointmentTypeIndex",function(e){g.default.change(t.props.clientId,{appointmentTypeIndex:parseInt(e,10)})});(0,p.default)((0,l.default)(t),"onChangeAcuityUrl",function(e){g.default.change(t.props.clientId,{acuityUrl:e,urlValidationErrorMessage:""})});(0,p.default)((0,l.default)(t),"onChangeNonRegisteredAcuityUrl",function(e){g.default.change(t.props.clientId,{schedulingPageGroup:e?m.default.CUSTOM:m.default.ALL,acuityUrl:e,urlValidationErrorMessage:""})});return t}(0,o.default)(n,[{key:"renderRegisteredDialog",value:function e(){var t=this.props,a=t.userData,i=t.selectionState;return h.default.createElement(b.default,{userData:a,selectionState:i,onChangeSchedulingPageGroup:this.onChangeSchedulingPageGroup,onChangeCalendarIndex:this.onChangeCalendarIndex,onChangeCategoryIndex:this.onChangeCategoryIndex,onChangeClassIndex:this.onChangeClassIndex,onChangeAppointmentTypeIndex:this.onChangeAppointmentTypeIndex,onChangeAcuityUrl:this.onChangeAcuityUrl,errorMessage:i.urlValidationErrorMessage})}},{key:"renderNonRegisteredDialog",value:function e(){var t=this.props.selectionState;return h.default.createElement(v.default,{acuityUrl:t.acuityUrl,onChangeAcuityUrl:this.onChangeNonRegisteredAcuityUrl,errorMessage:t.urlValidationErrorMessage})}},{key:"render",value:function e(){var t=this.props,a=t.userDataRequestResolved,i=t.userData;return h.default.createElement("div",{className:f.default.container},a?i?this.renderRegisteredDialog():this.renderNonRegisteredDialog():h.default.createElement(S.default,{className:f.default.loadingIndicator}))}}]);return n}(h.default.Component);t.default=s;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/SchedulingEditorDialog/components/SchedulingEditorDialog.less":function(e,t,a){e.exports={container:"SchedulingEditorDialog-container-3ZeSP",loadingIndicator:"SchedulingEditorDialog-loadingIndicator-2r92U"}},"./src/main/webapp/universal/src/apps/App/components/SchedulingEditorDialog/components/UrlInput.jsx":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var c=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var u=i(a("./common/temp/node_modules/react/index.js"));var d=i(a("./common/temp/node_modules/prop-types/index.js"));var p=a("./common/temp/node_modules/@sqs/fields/lib/index.js");var h=a("./src/main/webapp/universal/src/shared/i18n/index.ts");var g=i(a("./src/main/webapp/universal/src/apps/App/components/SchedulingEditorDialog/components/UrlInput.less"));function m(s){var n=f();return function e(){var t=(0,l.default)(s),a;if(n){var i=(0,l.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,o.default)(this,a)}}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var v=function(e){(0,r.default)(a,e);var t=m(a);function a(){(0,s.default)(this,a);return t.apply(this,arguments)}(0,n.default)(a,[{key:"render",value:function e(){return u.default.createElement(u.default.Fragment,null,u.default.createElement(p.Input,{type:"url",value:this.props.url,placeholder:(0,h.t)("https://example.com"),label:(0,h.t)("Acuity Scheduling Page Link"),onChange:this.props.onChange,inputRef:this.props.inputRef,hasErrors:this.props.errorMessage.length>0,errorMessage:this.props.errorMessage}),this.props.hint?u.default.createElement("div",{className:g.default.hint},this.props.hint):null)}}]);return a}(u.default.Component);t.default=v;(0,c.default)(v,"propTypes",{url:d.default.string.isRequired,onChange:d.default.func,hint:d.default.string,errorMessage:d.default.string});e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/SchedulingEditorDialog/components/UrlInput.less":function(e,t,a){e.exports={hint:"UrlInput-hint-1GEgb"}},"./src/main/webapp/universal/src/apps/App/components/SchedulingEditorDialog/constants/index.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.initialSchedulingState=t.ALL_CLASSES_INDEX=void 0;var s=i(a("./src/main/webapp/frontend/packages/enums/SchedulingPageGroup.js"));var n=-1;t.ALL_CLASSES_INDEX=n;var r={schedulingPageGroup:s.default.ALL,calendarIndex:0,categoryIndex:0,classIndex:n,appointmentTypeIndex:0,acuityUrl:"",urlValidationErrorMessage:""};t.initialSchedulingState=r},"./src/main/webapp/universal/src/apps/App/components/SchedulingEditorDialog/index.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/toConsumableArray.js"));var n=i(a("./common/temp/node_modules/alt-utils/lib/connectToStores.js"));var c=i(a("./src/main/webapp/universal/src/apps/App/components/SchedulingEditorDialog/stores/SchedulingEditorDialogStore.js"));var r=i(a("./src/main/webapp/universal/src/apps/App/components/SchedulingEditorDialog/components/SchedulingEditorDialog.jsx"));function o(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?o(Object(a),true).forEach(function(e){(0,s.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var d=(0,n.default)({getStores:function e(){return[c.default]},getPropsFromStores:function e(t){var a=c.default.getState();var i=a.userDataRequestResolved,s=a.userData;var n=a.selectionState[t.clientId];var r={userDataRequestResolved:i,selectionState:n,userData:s};if(!s)return r;var o={calendars:[].concat((0,l.default)(s.calendars),(0,l.default)(n.additionalUserData.calendars)),categories:[].concat((0,l.default)(s.categories),(0,l.default)(n.additionalUserData.categories)),classes:[].concat((0,l.default)(s.classes),(0,l.default)(n.additionalUserData.classes)),appointmentTypes:[].concat((0,l.default)(s.appointmentTypes),(0,l.default)(n.additionalUserData.appointmentTypes))};return u({},r,{userData:o})}},r.default);var p=d;t.default=p;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/SchedulingEditorDialog/stores/SchedulingEditorDialogStore.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var l=i(a("./common/temp/node_modules/lodash/isEqual.js"));var c=i(a("./common/temp/node_modules/lodash/cloneDeep.js"));var u=i(a("./src/main/webapp/universal/src/shared/dispatchers/alt/index.ts"));var d=i(a("./src/main/webapp/universal/src/apps/App/components/SchedulingEditorDialog/actions/SchedulingEditorDialogActions.js"));var p=i(a("./src/main/webapp/universal/src/apps/App/components/SchedulingEditorDialog/utils/getInitialSelectionState.js"));function h(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function g(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?h(Object(a),true).forEach(function(e){(0,r.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var m={selectionState:{},userData:null,userDataRequestInitiated:false,userDataRequestResolved:false};var f=function(){function e(){(0,s.default)(this,e);this.bindActions(d.default);this.state=(0,c.default)(m)}(0,o.default)(e,[{key:"onReset",value:function e(t){this.setState(function(e){return{selectionState:g({},e.selectionState,(0,r.default)({},t,null))}})}},{key:"onChange",value:function e(t){var a=(0,n.default)(t,2),i=a[0],s=a[1];this.setState(function(e){return{selectionState:g({},e.selectionState,(0,r.default)({},i,g({},e.selectionState[i],{},s)))}})}},{key:"onStartEditing",value:function e(i){this.setState(function(e){var t={editing:true,initialDatabaseState:(0,c.default)(i)};if(e.userDataRequestResolved){var a=(0,p.default)(e.userData,i);t=g({},t,{},a,{stateBeforeEditing:(0,c.default)(a)})}return{selectionState:g({},e.selectionState,(0,r.default)({},i.clientId,t))}})}},{key:"onRevertEdits",value:function e(t){this.setState(function(e){return{selectionState:g({},e.selectionState,(0,r.default)({},t,g({},e.selectionState[t],{editing:false,stateBeforeEditing:null},e.selectionState[t].stateBeforeEditing)))}})}},{key:"onCommitEdits",value:function e(t){this.setState(function(e){return{selectionState:g({},e.selectionState,(0,r.default)({},t,g({},e.selectionState[t],{editing:false,stateBeforeEditing:null})))}})}},{key:"onMaybeFetchData",value:function e(t){var a=t.fetchStarted;a&&this.setState({userDataRequestInitiated:true,userDataRequestFailed:false})}},{key:"onFetchDataFailure",value:function e(){this.setState({userDataRequestInitiated:false,userDataRequestFailed:true})}},{key:"onResolveFetchDataFailure",value:function e(){this.setState({userDataRequestFailed:false})}},{key:"onFetchDataSuccess",value:function e(r){this.setState(function(e){var t={};for(var a in e.selectionState){var i=e.selectionState[a];if(!i)continue;var s=!e.userData&&!r||!(0,l.default)(e.userData,r);if(s){var n=(0,p.default)(r,i.initialDatabaseState||{});t[a]=g({},n,{stateBeforeEditing:(0,c.default)(n),editing:i.editing})}else t[a]=(0,c.default)(i)}return{userDataRequestInitiated:false,userDataRequestResolved:true,userData:r,selectionState:t}})}}]);return e}();var v=u.default.createStore(f,"SchedulingEditorDialogStore");t.default=v;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/SchedulingEditorDialog/stores/selectors.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.getAppointmentTypeId=t.getClassId=t.getCategory=t.getCalendarId=t.isDirty=void 0;var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/toConsumableArray.js"));var o=a("./src/main/webapp/universal/src/apps/App/components/SchedulingEditorDialog/constants/index.js");var s=function e(t,a){var i=t.selectionState[a];if(!i||!i.stateBeforeEditing)return false;var s=i.stateBeforeEditing;return Object.keys(o.initialSchedulingState).some(function(e){return s[e]!==i[e]})};t.isDirty=s;var n=function e(t,a){var i=t.selectionState[a];var s=[].concat((0,r.default)(t.userData.calendars),(0,r.default)(i.additionalUserData.calendars));var n=s[i.calendarIndex];return n&&n.id};t.getCalendarId=n;var l=function e(t,a){var i=t.selectionState[a];var s=[].concat((0,r.default)(t.userData.categories),(0,r.default)(i.additionalUserData.categories));var n=s[i.categoryIndex];return n&&n.id};t.getCategory=l;var c=function e(t,a){var i=t.selectionState[a];if(i.classIndex===o.ALL_CLASSES_INDEX)return null;var s=[].concat((0,r.default)(t.userData.classes),(0,r.default)(i.additionalUserData.classes));var n=s[i.classIndex];return n&&n.id};t.getClassId=c;var u=function e(t,a){var i=t.selectionState[a];var s=[].concat((0,r.default)(t.userData.appointmentTypes),(0,r.default)(i.additionalUserData.appointmentTypes));var n=s[i.appointmentTypeIndex];return n&&n.id};t.getAppointmentTypeId=u},"./src/main/webapp/universal/src/apps/App/components/SchedulingEditorDialog/utils/AcuityAPI.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.fetchAcuityData=f;var d=i(a("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var n=i(a("./common/temp/node_modules/lodash/get.js"));var p=i(a("./src/main/webapp/universal/src/shared/utils/network.js"));var h=i(a("./src/main/webapp/universal/src/apps/App/components/SchedulingEditorDialog/utils/transformAcuityData.js"));var r=(0,n.default)(window,"Static.SQUARESPACE_CONTEXT.website.id");var g="/config/scheduling-service/api/squarespace/v1";function m(){return o.apply(this,arguments)}function o(){o=(0,s.default)(d.default.mark(function e(){var a,i;return d.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:a=document.createElement("iframe");a.setAttribute("src","/config/scheduling-service/oauth2/squarespace?websiteId=".concat(r,"&background=1"));a.style.display="none";i=new Promise(function(e,t){a.addEventListener("load",e);a.addEventListener("error",t)});document.body.appendChild(a);t.prev=5;t.next=8;return i;case 8:t.prev=8;a.parentNode.removeChild(a);return t.finish(8);case 11:case"end":return t.stop()}},e,null,[[5,,8,11]])}));return o.apply(this,arguments)}function f(){return l.apply(this,arguments)}function l(){l=(0,s.default)(d.default.mark(function e(){var a,i,s,n,r,o,l,c,u=arguments;return d.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:a=u.length>0&&void 0!==u[0]?u[0]:{},i=a.afterAuth,s=void 0!==i&&i;t.prev=1;t.next=4;return p.default.get("".concat(g,"/me"));case 4:n=t.sent.data;r=p.default.get("".concat(g,"/calendars"));o=p.default.get("".concat(g,"/appointment-types"));t.next=9;return Promise.all([r,o]);case 9:l=t.sent;c=(0,h.default)({user:n,calendars:l[0].data,appointmentTypes:l[1].data});return t.abrupt("return",c);case 14:t.prev=14;t.t0=t["catch"](1);if(!(401===t.t0.status)){t.next=24;break}if(!s){t.next=19;break}throw new Error;case 19:t.next=21;return m();case 21:t.next=23;return f({afterAuth:true});case 23:return t.abrupt("return",t.sent);case 24:if(!(403===t.t0.status)){t.next=26;break}return t.abrupt("return",null);case 26:throw new Error(t.t0);case 27:case"end":return t.stop()}},e,null,[[1,14]])}));return l.apply(this,arguments)}},"./src/main/webapp/universal/src/apps/App/components/SchedulingEditorDialog/utils/getInitialSelectionState.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=s;var l=i(a("./common/temp/node_modules/lodash/cloneDeep.js"));var c=a("./src/main/webapp/universal/src/shared/i18n/index.ts");var u=a("./src/main/webapp/universal/src/apps/App/components/SchedulingEditorDialog/constants/index.js");var d=i(a("./src/main/webapp/frontend/packages/enums/SchedulingPageGroup.js"));function p(e){if(e.schedulingPageGroup)return{schedulingPageGroup:e.schedulingPageGroup};if(e.acuityUrl)return{schedulingPageGroup:d.default.CUSTOM};return{}}function s(e,t){var a=(0,l.default)(u.initialSchedulingState);Object.assign(a,p(t));var i=a.schedulingPageGroup;Object.assign(a,{additionalUserData:{calendars:[],categories:[],classes:[],appointmentTypes:[]},initialSchedulingPageGroup:i});if(!e){t.acuityUrl&&(a.acuityUrl=t.acuityUrl);return a}a.schedulingPageGroup!==d.default.CATEGORIES&&(a.categoryIndex=e.categories.findIndex(function(e){return e.id.length>0}));switch(a.schedulingPageGroup){case d.default.ALL:break;case d.default.CALENDARS:var s=e.calendars.findIndex(function(e){return e.id===t.calendarId});if(-1===s){a.additionalUserData.calendars.push({id:t.calendarId,name:(0,c.t)("(Deleted)")});a.calendarIndex=e.calendars.length}else a.calendarIndex=s;break;case d.default.CATEGORIES:var n=e.categories.findIndex(function(e){return e.id===t.category});if(-1===n){a.additionalUserData.categories.push({id:t.category,name:(0,c.t)("(Deleted)")+" "+t.category});a.categoryIndex=e.categories.length}else a.categoryIndex=n;break;case d.default.CLASSES:if(null===t.classId)a.classIndex=u.ALL_CLASSES_INDEX;else{var r=e.classes.findIndex(function(e){return e.id===t.classId});if(-1===r){a.additionalUserData.classes.push({id:t.classId,name:(0,c.t)("(Deleted)")});a.classIndex=e.classes.length}else a.classIndex=r}break;case d.default.APPOINTMENT_TYPES:var o=e.appointmentTypes.findIndex(function(e){return e.id===t.appointmentTypeId});if(-1===o){a.additionalUserData.appointmentTypes.push({id:t.appointmentTypeId,name:(0,c.t)("(Deleted)")});a.appointmentTypeIndex=e.appointmentTypes.length}else a.appointmentTypeIndex=o;break;case d.default.CUSTOM:a.acuityUrl=t.acuityUrl;break;default:throw new Error("Unknown scheduling page type:",a.schedulingPageGroup)}return a}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/SchedulingEditorDialog/utils/transformAcuityData.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=i;var o=function e(t){return{id:t.id,name:t.name}};function i(e){var t=e.user,a=e.calendars,i=e.appointmentTypes;var s=Array.from(i.reduce(function(e,t){return e.add(t.category)},new Set)).sort(function(e,t){return e.localeCompare(t)}).map(function(e){return{id:e,name:e}});var n=i.filter(function(e){return"class"===e.type}).map(o);var r=i.filter(function(e){return"service"===e.type}).map(o);return{userId:t.id,calendars:a.map(function(e){return{id:e.id,name:e.name}}),categories:s,classes:n,appointmentTypes:r}}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/components/SchedulingEditorDialog/utils/transformStateToDatabaseFormat.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=r;var s=i(a("./src/main/webapp/frontend/packages/enums/SchedulingPageGroup.js"));var n=a("./src/main/webapp/universal/src/apps/App/components/SchedulingEditorDialog/stores/selectors.js");function r(e,t){var a=e.selectionState[t];var i={schedulingPageGroup:a.schedulingPageGroup};switch(a.schedulingPageGroup){case s.default.ALL:i.acuityUrl=a.acuityUrl;break;case s.default.CALENDARS:i.calendarId=(0,n.getCalendarId)(e,t);break;case s.default.CATEGORIES:i.category=(0,n.getCategory)(e,t);break;case s.default.CLASSES:i.classId=(0,n.getClassId)(e,t);break;case s.default.APPOINTMENT_TYPES:i.appointmentTypeId=(0,n.getAppointmentTypeId)(e,t);break;case s.default.CUSTOM:i.acuityUrl=a.acuityUrl;break;default:throw new Error("Undefined scheduling page group: "+a.schedulingPageGroup)}return i}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/NestedCategoriesEditor/WrappedNestedCategoriesLabel.tsx":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var o=i(a("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var c=a("./src/main/webapp/universal/src/shared/i18n/react.ts");var u=i(a("./common/temp/node_modules/@sqs/core-components/modals/Modal.js"));var d=i(a("./common/temp/node_modules/react/index.js"));var p=i(a("./common/temp/node_modules/react-dom/index.js"));var h=i(a("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/NestedCategoriesEditor/index.tsx"));var g=i(a("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/NestedCategoriesEditor/styles.less"));var m=a("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/NestedCategoriesEditor/CategoriesAPI.ts");var f=a("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/NestedCategoriesEditor/CategoriesTree.ts");var v=i(a("./src/main/webapp/universal/src/shared/utils/commerce/analytics/mapProductTypeToString.ts"));var r=function e(t){var r=this;(0,n.default)(this,e);(0,l.default)(this,"container",void 0);(0,l.default)(this,"model",void 0);(0,l.default)(this,"isOpen",void 0);(0,l.default)(this,"rootId",void 0);(0,l.default)(this,"categories",void 0);(0,l.default)(this,"onTreeRefresh",void 0);(0,l.default)(this,"requestCloseOriginatingModal",void 0);(0,l.default)(this,"show",(0,s.default)(o.default.mark(function e(){return o.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return r.setSelectedCategories();case 2:r.render();r.model.once("save",function(){r.render()});case 4:case"end":return t.stop()}},e)})));(0,l.default)(this,"setSelectedCategories",(0,s.default)(o.default.mark(function e(){var a,i,s,n;return o.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:a=r.model.get("collectionId");t.next=3;return(0,m.getCategories)(a);case 3:i=t.sent;s=i.categoryTree;n=f.CategoriesTree.constructCategoriesTree(s,r.categories.length>0?r.categories.map(function(e){return e.id}):r.model.get("categoryIds"),i.categoryTree[0],true);r.rootId=i.categoryTree[0].id;r.categories=n.getAllCategories().filter(function(e){return e.selected}).map(function(e){return{id:e.id,name:e.displayName}});case 8:case"end":return t.stop()}},e)})));(0,l.default)(this,"destroy",function(){p.default.unmountComponentAtNode(r.container)});(0,l.default)(this,"toggleEditor",function(){r.isOpen=!r.isOpen;r.render()});(0,l.default)(this,"setCategories",function(e){r.categories=e});(0,l.default)(this,"closeModal",function(){var t=(0,s.default)(o.default.mark(function e(a){return o.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:null===a||void 0===a?void 0:a.preventDefault();null===a||void 0===a?void 0:a.stopPropagation();r.isOpen=false;r.render();case 4:case"end":return t.stop()}},e)}));return function(e){return t.apply(this,arguments)}}());(0,l.default)(this,"requiresProductSave",function(){return!r.model.get("id")});(0,l.default)(this,"render",function(){p.default.render(d.default.createElement("div",{className:"field-wrapper tag-field-wrapper nested-categories-container clear",onClick:r.toggleEditor},d.default.createElement("div",{className:"field-lhs title"},d.default.createElement(c.T,{project:"apps.App.Commerce.NestedCategoriesEditor"},"Categories")),r.isOpen&&d.default.createElement(u.default,{isOpen:r.isOpen,customClassNames:g.default.popOverZIndex,zIndex:35e3,onRequestClose:r.closeModal},d.default.createElement(h.default,{model:{collectionId:r.model.get("collectionId"),websiteId:window.Static.SQUARESPACE_CONTEXT.website.id,productId:r.model.get("id"),categoryIds:r.categories.map(function(e){return e.id}),productTitle:r.model.get("title"),productType:(0,v.default)(r.model.get("productType"))},closeModal:r.closeModal,callerName:"yui-editor",isEmptyState:false,stylesOverride:g.default,isLoading:!!r.requiresProductSave(),setCategories:r.setCategories,onTreeRefresh:r.onTreeRefresh,requestCloseOriginatingModal:r.requestCloseOriginatingModal})),d.default.createElement("div",{className:"field-rhs"},d.default.createElement("div",{className:"field-input-wrapper"},d.default.createElement("div",{className:"tag-field clear"},d.default.createElement("div",{className:"tag-field-container"},d.default.createElement("div",{className:"text dialog-element"},d.default.createElement("div",{className:"add-header"},d.default.createElement(c.T,{project:"apps.App.Commerce.NestedCategoriesEditor"},"Click to add categories"))),r.categories.filter(function(e){return e.id!=r.rootId}).map(function(e){return d.default.createElement("div",{className:"tag category",key:e.id},e.name)})))))),r.container)});this.container=t.container;this.model=t.productModel;this.onTreeRefresh=t.onTreeRefresh;this.requestCloseOriginatingModal=t.requestCloseOriginatingModal;this.isOpen=false;this.categories=[];this.rootId=""};var b=r;t.default=b;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/RelatedProductsEditor/WrappedCategoryPicker.tsx":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var c=i(a("./common/temp/node_modules/react/index.js"));var u=i(a("./common/temp/node_modules/react-dom/index.js"));var d=a("./src/main/webapp/universal/src/shared/i18n/react.ts");var p=i(a("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/RelatedProductsEditor/index.tsx"));var h=a("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/RelatedProductsEditor/Constants.ts");var g=i(a("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/RelatedProductsEditor/getCategoriesAndTags.ts"));var m=i(a("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/RelatedProductsEditor/styles.less"));var f=function(){function t(e){var i=this;(0,r.default)(this,t);(0,l.default)(this,"container",void 0);(0,l.default)(this,"model",void 0);(0,l.default)(this,"setRelatedAttrsInYUI",void 0);(0,l.default)(this,"apiErrors",false);(0,l.default)(this,"storeWideCats",[]);(0,l.default)(this,"existingProductCats",[]);(0,l.default)(this,"value",void 0);(0,l.default)(this,"flush",false);(0,l.default)(this,"damaskify",false);(0,l.default)(this,"setExistingCats",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];i.existingProductCats=e});(0,l.default)(this,"setValue",function(e){i.value=e;i.render()});(0,l.default)(this,"show",(0,s.default)(n.default.mark(function e(){return n.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return i.getCategoriesAndTags();case 2:i.render();case 3:case"end":return t.stop()}},e)})));(0,l.default)(this,"setCollectionId",function(){var t=(0,s.default)(n.default.mark(function e(a){return n.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:i.model.collectionId=a;t.next=3;return i.getCategoriesAndTags();case 3:i.render();case 4:case"end":return t.stop()}},e)}));return function(e){return t.apply(this,arguments)}}());(0,l.default)(this,"destroy",function(){u.default.unmountComponentAtNode(i.container)});(0,l.default)(this,"render",function(){var e=i.getSelectableTags();u.default.render(c.default.createElement("div",{className:"yui3-widget sqs-widget sqs-data-widget sqs-dialog-field sqs-text"},c.default.createElement("div",{className:"title"},c.default.createElement(d.T,{project:"apps.App.Commerce.RelatedProducts"},"Category Filter")),i.apiErrors?c.default.createElement("div",{className:m.default.error},c.default.createElement(d.T,{project:"apps.App.Commerce.RelatedProducts"},"Error: could not fetch categories.")):c.default.createElement(p.default,{model:i.model,saveRelatedAttrs:i.saveRelatedAttrs,storeWideCats:i.storeWideCats,existingProductCats:i.existingProductCats,selectableTags:e,value:i.value,disableDescription:true,isDropdownFlush:i.flush,damaskify:i.damaskify})),i.container)});(0,l.default)(this,"saveRelatedAttrs",function(e){i.setRelatedAttrsInYUI(e.filter(function(e){return e!==h.OFF_VALUE}));i.render()});this.container=e.container;this.model=e.model;this.setRelatedAttrsInYUI=e.setRelatedAttrsInYUI;this.value=e.value;this.flush=e.flush;this.damaskify=e.damaskify}(0,o.default)(t,[{key:"getSelectableTags",value:function e(){return[]}},{key:"getCategoriesAndTags",value:function(){var e=(0,s.default)(n.default.mark(function e(){var a,i,s;return n.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return(0,g.default)(this.model.collectionId);case 2:a=t.sent;i=a.storeWideCats;s=a.apiErrors;this.storeWideCats=i;this.apiErrors=s;case 7:case"end":return t.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}]);return t}();var v=f;t.default=v;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/RelatedProductsEditor/WrappedRelatedProductsEditor.tsx":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/toConsumableArray.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var c=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var u=i(a("./common/temp/node_modules/react/index.js"));var d=i(a("./common/temp/node_modules/react-dom/index.js"));var p=a("./src/main/webapp/universal/src/shared/i18n/react.ts");var h=i(a("./src/main/webapp/frontend/packages/enums/RelatedProductsStrategy.js"));var g=i(a("./src/main/webapp/frontend/packages/enums/RelatedProductsConfigurationStrategy.js"));var m=i(a("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/RelatedProductsEditor/index.tsx"));var f=a("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/RelatedProductsEditor/RelatedAPI.ts");var v=i(a("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/RelatedProductsEditor/styles.less"));var b=i(a("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/RelatedProductsEditor/getCategoriesAndTags.ts"));var S;var y=(S={},(0,c.default)(S,g.default.OFF,h.default.OFF),(0,c.default)(S,g.default.CATEGORIES,h.default.CATEGORIES),(0,c.default)(S,g.default.FIRST_CATEGORY,h.default.FIRST_CATEGORY),(0,c.default)(S,g.default.TAGS,h.default.TAGS),S);var _=function(){function t(e){var a=this;(0,o.default)(this,t);(0,c.default)(this,"container",void 0);(0,c.default)(this,"model",void 0);(0,c.default)(this,"setRelatedAttrsInYUI",void 0);(0,c.default)(this,"relatedProductsEnabled",false);(0,c.default)(this,"apiErrors",false);(0,c.default)(this,"storeWideCats",[]);(0,c.default)(this,"storeWideTags",[]);(0,c.default)(this,"existingProductTags",[]);(0,c.default)(this,"existingProductCats",[]);(0,c.default)(this,"setExistingCats",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];a.existingProductCats=e});(0,c.default)(this,"setExistingTags",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];a.existingProductTags=e});(0,c.default)(this,"show",(0,n.default)(r.default.mark(function e(){return r.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return a.getCategoriesAndTags();case 2:t.next=4;return a.setRelatedProductsEnabled();case 4:a.render();case 5:case"end":return t.stop()}},e)})));(0,c.default)(this,"destroy",function(){d.default.unmountComponentAtNode(a.container)});(0,c.default)(this,"render",function(){var e=a.getSelectableTags();d.default.render(u.default.createElement("div",{className:"yui3-widget sqs-widget sqs-data-widget sqs-dialog-field sqs-text"},u.default.createElement("div",{className:"title"},u.default.createElement(p.T,{project:"apps.App.Commerce.RelatedProducts"},"Show Related Products")),a.apiErrors?u.default.createElement("div",{className:v.default.error},u.default.createElement(p.T,{project:"apps.App.Commerce.RelatedProducts"},"Error: could not fetch related product settings.")):a.relatedProductsEnabled?u.default.createElement(m.default,{model:a.model,saveRelatedAttrs:a.saveRelatedAttrs,storeWideCats:a.storeWideCats,existingProductCats:a.existingProductCats,selectableTags:e}):u.default.createElement("div",{className:"description"},u.default.createElement(p.T,{project:"apps.App.Commerce.RelatedProducts",link:u.default.createElement("a",{href:"/config/commerce/related-products"},u.default.createElement(p.T,{project:"apps.App.Commerce.RelatedProducts"},"Commerce"))},"To show related products on this product's page, turn on this feature in {link}."))),a.container)});(0,c.default)(this,"saveRelatedAttrs",function(e,t){a.setRelatedAttrsInYUI(e,y[t]);a.render()});this.container=e.container;this.model=e.model;this.setRelatedAttrsInYUI=e.setRelatedAttrsInYUI}(0,l.default)(t,[{key:"getSelectableTags",value:function e(){return(0,s.default)(new Set([].concat((0,s.default)(this.storeWideTags),(0,s.default)(this.existingProductTags))))}},{key:"getCategoriesAndTags",value:function(){var e=(0,n.default)(r.default.mark(function e(){var a,i,s,n;return r.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return(0,b.default)(this.model.collectionId,true,true);case 2:a=t.sent;i=a.storeWideCats;s=a.apiErrors;n=a.storeWideTags;this.storeWideCats=i;this.storeWideTags=n;this.apiErrors=s;case 9:case"end":return t.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"setRelatedProductsEnabled",value:function(){var e=(0,n.default)(r.default.mark(function e(){var a;return r.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return(0,f.getMerchandisingSettings)();case 2:a=t.sent;a?this.relatedProductsEnabled=a.relatedProductsEnabled:this.apiErrors=true;case 4:case"end":return t.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}]);return t}();var C=_;t.default=C;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/VariantImageEditor/ErrorImage.less":function(e,t,a){e.exports={errorImage:"ErrorImage-errorImage-NAi4I",errorIcon:"ErrorImage-errorIcon-2hHhm"}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/VariantImageEditor/ErrorImage.tsx":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var c=i(a("./common/temp/node_modules/react/index.js"));var u=a("./common/temp/node_modules/@sqs/rosetta-icons/build/lib/index.js");var d=i(a("./src/main/webapp/universal/src/shared/components/Image.jsx"));var p=i(a("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/VariantImageEditor/ErrorImage.less"));function h(s){var n=g();return function e(){var t=(0,l.default)(s),a;if(n){var i=(0,l.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,o.default)(this,a)}}function g(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var m=function(e){(0,r.default)(a,e);var t=h(a);function a(){(0,s.default)(this,a);return t.apply(this,arguments)}(0,n.default)(a,[{key:"render",value:function e(){var t=this.props,a=t.className,i=t.imageFile;return c.default.createElement("div",{className:a},c.default.createElement(u.ExclamationMarkCircle,{className:p.default.errorIcon,color:"red"}),c.default.createElement(d.default,{className:p.default.errorImage,fileData:i}))}}]);return a}(c.default.Component);t.default=m;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/VariantImageEditor/ImageDropZone.less":function(e,t,a){e.exports={modalOverlay:"ImageDropZone-modalOverlay-1Jia0",modal:"ImageDropZone-modal-2DFBB",dialogHeader:"ImageDropZone-dialogHeader-1cdIS",dialogBody:"ImageDropZone-dialogBody-qc3qZ",flexChild:"ImageDropZone-flexChild-1iSaD",isSelected:"ImageDropZone-isSelected-2SCS-",imageContainer:"ImageDropZone-imageContainer-2Yyu7",loadingContainer:"ImageDropZone-loadingContainer-x7Hfp",selectable:"ImageDropZone-selectable-CjSLt",flexContainer:"ImageDropZone-flexContainer-2Rje1",error:"ImageDropZone-error-2FqzD",loadingSpinner:"ImageDropZone-loadingSpinner-pjCdn",modalLoadingSpinner:"ImageDropZone-modalLoadingSpinner-2dzRX",queuedContainer:"ImageDropZone-queuedContainer-3AsCD",queuedText:"ImageDropZone-queuedText-1_Pnk",base:"ImageDropZone-base-1_FaP",container:"ImageDropZone-container-2Ge47",hidden:"ImageDropZone-hidden-241Sx",overlay:"ImageDropZone-overlay-Kybdx"}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/VariantImageEditor/ImageDropZone.tsx":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var s=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var r=s(a("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var o=s(a("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var l=s(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var c=s(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var u=s(a("./common/temp/node_modules/@babel/runtime/helpers/assertThisInitialized.js"));var d=s(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var p=s(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var h=s(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var g=s(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var m=i(a("./common/temp/node_modules/react/index.js"));var f=a("./src/main/webapp/universal/src/shared/i18n/react.ts");var v=s(a("./common/temp/node_modules/classnames/index.js"));var b=a("./src/main/webapp/universal/src/shared/components/filePickers/index.js");var S=s(a("./src/main/webapp/universal/src/shared/components/LoadingSpinner.jsx"));var y=a("./src/main/webapp/universal/src/shared/constants/UploadMaxSize.js");var _=a("./src/main/webapp/universal/src/shared/constants/UploadMimeTypes.js");var C=s(a("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/VariantImageEditor/ImageDropZone.less"));function E(s){var n=w();return function e(){var t=(0,h.default)(s),a;if(n){var i=(0,h.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,p.default)(this,a)}}function w(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var n=function(e){(0,d.default)(n,e);var i=E(n);function n(){var s;(0,l.default)(this,n);for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];s=i.call.apply(i,[this].concat(t));(0,g.default)((0,u.default)(s),"state",{isDragging:false,isLoading:false});(0,g.default)((0,u.default)(s),"renderOverlay",function(){var e=s.state,t=e.isDragging,a=e.isLoading;return m.default.createElement("div",{className:C.default.overlay},t&&m.default.createElement("span",null,m.default.createElement(f.T,{project:"apps.App.Commerce.ProductDialog"},"Drop Elements to Upload")),a&&m.default.createElement(S.default,{size:"large"}))});(0,g.default)((0,u.default)(s),"handleImageFileSelect",function(){var t=(0,o.default)(r.default.mark(function e(a){var i;return r.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:s.setState({isDragging:false,isLoading:true});t.prev=1;i=s.props.uploadImage;t.next=5;return i(a);case 5:s.setState({isLoading:false});t.next=11;break;case 8:t.prev=8;t.t0=t["catch"](1);s.setState({isLoading:false});case 11:case"end":return t.stop()}},e,null,[[1,8]])}));return function(e){return t.apply(this,arguments)}}());(0,g.default)((0,u.default)(s),"setDragging",function(){s.setState({isDragging:true})});(0,g.default)((0,u.default)(s),"resetDragging",function(){s.setState({isDragging:false})});return s}(0,c.default)(n,[{key:"render",value:function e(){var t=this.props.children;var a=this.state,i=a.isDragging,s=a.isLoading;return m.default.createElement("div",{className:C.default.base},m.default.createElement(b.FileDropZone,{className:(0,v.default)(C.default.container,(0,g.default)({},C.default.hidden,i||s)),onDrop:this.handleImageFileSelect,onDragEnter:this.setDragging,onDragLeave:this.resetDragging,validMimeTypes:_.IMAGE_MIME_TYPES,maxSize:y.MAX_SIZE,multiple:false},t),(i||s)&&this.renderOverlay())}}]);return n}(m.Component);t.default=n;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/VariantImageEditor/ImageUploadAPI.ts":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.buildProductImageFromResponse=t.upload=void 0;var o=i(a("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var l=i(a("./src/main/webapp/universal/src/shared/utils/network.js"));var s="true";var c=function e(t,a){var i=new FormData;i.append("index",a.toString());i.append("process",s);i.append("contentType",t.type);i.append("fileName",t.name);i.append("fileSize",t.size.toString());i.append("Filedata",t);return i};var r=function(){var s=(0,n.default)(o.default.mark(function e(a,i,s){var n,r;return o.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:n={headers:{"Content-Type":"multipart/form-data"}};r=c(i,s);return t.abrupt("return",l.default.post(a,r,n));case 3:case"end":return t.stop()}},e)}));return function e(t,a,i){return s.apply(this,arguments)}}();t.upload=r;var u=function e(t){var a=t.data.contentItem;return{assetUrl:a.assetUrl,id:a.id,mediaProcessingState:a.mediaProcessingState}};t.buildProductImageFromResponse=u},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/VariantImageEditor/ImageUploader.less":function(e,t,a){e.exports={container:"ImageUploader-container-1QTi7",filepicker:"ImageUploader-filepicker-2SVdG",uploadIcon:"ImageUploader-uploadIcon-3nju3",uploadText:"ImageUploader-uploadText-uRmBF",isLoading:"ImageUploader-isLoading-2nafD",uploadContainer:"ImageUploader-uploadContainer-2uCXx",loadingSpinner:"ImageUploader-loadingSpinner-1TKz1"}},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/VariantImageEditor/ImageUploader.tsx":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var r=i(a("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var c=i(a("./common/temp/node_modules/@babel/runtime/helpers/assertThisInitialized.js"));var u=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var d=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var p=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var h=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var g=i(a("./common/temp/node_modules/classnames/index.js"));var m=a("./src/main/webapp/universal/src/shared/components/filePickers/index.js");var f=a("./src/main/webapp/universal/src/shared/constants/UploadMaxSize.js");var v=a("./src/main/webapp/universal/src/shared/constants/UploadMimeTypes.js");var b=i(a("./common/temp/node_modules/react/index.js"));var S=a("./src/main/webapp/universal/src/shared/i18n/react.ts");var y=i(a("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/VariantImageEditor/ImageUploader.less"));function _(s){var n=C();return function e(){var t=(0,p.default)(s),a;if(n){var i=(0,p.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,d.default)(this,a)}}function C(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var n=function(e){(0,u.default)(n,e);var i=_(n);function n(){var s;(0,l.default)(this,n);for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];s=i.call.apply(i,[this].concat(t));(0,h.default)((0,c.default)(s),"state",{isLoading:false});(0,h.default)((0,c.default)(s),"handleImageFileSelect",function(){var t=(0,o.default)(r.default.mark(function e(a){var i;return r.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:s.setState({isLoading:true});t.prev=1;i=s.props.uploadImage;t.next=5;return i(a);case 5:s.setState({isLoading:false});t.next=11;break;case 8:t.prev=8;t.t0=t["catch"](1);s.setState({isLoading:false});case 11:case"end":return t.stop()}},e,null,[[1,8]])}));return function(e){return t.apply(this,arguments)}}());return s}(0,s.default)(n,[{key:"render",value:function e(){var t=this.state.isLoading;var a=(0,g.default)(y.default.filepicker,(0,h.default)({},y.default.isLoading,t));return b.default.createElement("div",{className:y.default.container},b.default.createElement(m.FilePicker,{className:a,onChange:this.handleImageFileSelect,validMimeTypes:v.IMAGE_MIME_TYPES,maxSize:f.MAX_SIZE,multiple:false,disabled:t},b.default.createElement("div",{className:y.default.uploadContainer},b.default.createElement("span",{className:y.default.uploadIcon}),b.default.createElement("span",{className:y.default.uploadText},b.default.createElement(S.T,{project:"apps.App.Commerce.ProductDialog"},"Upload Image")))))}}]);return n}(b.default.Component);t.default=n;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/VariantImageEditor/UploadErrorModal.tsx":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var c=i(a("./common/temp/node_modules/react/index.js"));var u=i(a("./common/temp/node_modules/@sqs/core-components/modals/ConfirmModal.js"));var d=a("./src/main/webapp/universal/src/shared/i18n/index.ts");function p(s){var n=h();return function e(){var t=(0,l.default)(s),a;if(n){var i=(0,l.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,o.default)(this,a)}}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var g=(0,d.t)("Something went wrong");var m=(0,d.t)("Your image failed to upload.");var f=(0,d.t)("Delete Image");var v=(0,d.t)("Try Again");var b=function e(){return null};var S=function(e){(0,r.default)(a,e);var t=p(a);function a(){(0,s.default)(this,a);return t.apply(this,arguments)}(0,n.default)(a,[{key:"render",value:function e(){var t=this.props,a=t.isOpen,i=t.numImages,s=t.onConfirm,n=t.onDismiss;return c.default.createElement(u.default,{baseZIndex:5e5,clientY:i<3?300:400,hasOverlay:true,isOpen:a,onConfirm:s,onDismiss:n,onRequestClose:b,cancelLabel:f,confirmLabel:v,title:g,message:m})}}]);return a}(c.default.Component);t.default=S;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/VariantImageEditor/WrappedVariantImageEditor.ts":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var r=i(a("./src/main/webapp/frontend/packages/enums/RecordType.js"));var o=i(a("./common/temp/node_modules/react/index.js"));var l=i(a("./common/temp/node_modules/react-dom/index.js"));var c=a("./src/main/webapp/universal/src/apps/App/shared/utils/contentItemUrlRouter.js");var u=i(a("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/VariantImageEditor/index.tsx"));var d=a("./src/main/webapp/universal/src/shared/utils/commerce/analytics/types.ts");var p=a("./src/main/webapp/universal/src/shared/utils/commerce/analytics/trackVariantImages.ts");var h=d.ProductEditor.YUI_EDITOR;var g=function e(t){var i=this;(0,s.default)(this,e);(0,n.default)(this,"container",void 0);(0,n.default)(this,"mainImageId",void 0);(0,n.default)(this,"productModel",void 0);(0,n.default)(this,"setMainImageInYUI",void 0);(0,n.default)(this,"addProductImageInYUI",void 0);(0,n.default)(this,"removeProductImageInYUI",void 0);(0,n.default)(this,"variantId",void 0);(0,n.default)(this,"productId",void 0);(0,n.default)(this,"productName",void 0);(0,n.default)(this,"productType",void 0);(0,n.default)(this,"isOpen",void 0);(0,n.default)(this,"isLoading",void 0);(0,n.default)(this,"isUploadingImage",void 0);(0,n.default)(this,"selectedImageId",void 0);(0,n.default)(this,"errorImageFile",void 0);(0,n.default)(this,"productEditor",void 0);(0,n.default)(this,"show",function(){!i.selectedImageId&&i.mainImageId&&(i.selectedImageId=i.mainImageId);if(i.requiresProductSave()){i.isOpen=true;i.isLoading=true;i.render();i.productModel.once("save",function(){i.isLoading=false;i.render()})}else{i.isOpen=true;i.render()}(0,p.trackOpenVariantImagePicker)({productId:i.productModel.get("id"),variantId:i.variantId,productEditor:h})});(0,n.default)(this,"destroy",function(){l.default.unmountComponentAtNode(i.container)});(0,n.default)(this,"render",function(){var e=o.default.createElement(u.default,{addProductImage:i.addProductImage,closeModal:i.closeModal,errorImageFile:i.errorImageFile,isLoading:i.isLoading,isOpen:i.isOpen,isUploadingImage:i.isUploadingImage,productImageUploadUrl:i.getProductUploadUrl(),productImages:i.getProductImages(),removeProductImage:i.removeProductImage,saveMainImageId:i.saveMainImageId,selectImageId:i.selectImageId,selectedImageId:i.selectedImageId,setErrorImageFile:i.setErrorImageFile,setModalUploadingState:i.setModalUploadingState,productEditor:i.productEditor,productId:i.productId,productName:i.productName,productType:i.productType,variantId:i.variantId});l.default.render(e,i.container)});(0,n.default)(this,"selectImageId",function(e){i.selectedImageId=e;i.render()});(0,n.default)(this,"saveMainImageId",function(e){i.setMainImageInYUI(e);i.mainImageId=e;i.selectedImageId=i.mainImageId;i.closeModal()});(0,n.default)(this,"addProductImage",function(e,t,a){i.addProductImageInYUI(e,t,a);i.render()});(0,n.default)(this,"removeProductImage",function(e){i.removeProductImageInYUI(e,function(){i.render()})});(0,n.default)(this,"setErrorImageFile",function(e){i.errorImageFile=e;i.render()});(0,n.default)(this,"setModalUploadingState",function(e){i.isUploadingImage=e;i.render()});(0,n.default)(this,"closeModal",function(){i.isOpen=false;i.selectedImageId=null;i.render()});(0,n.default)(this,"getProductImages",function(){return i.productModel.items.map(function(e){return{assetUrl:e.get("assetUrl"),id:e.get("id"),mediaProcessingState:e.get("mediaProcessingState")}})});(0,n.default)(this,"requiresProductSave",function(){return!i.productModel.get("id")});(0,n.default)(this,"getProductUploadUrl",function(){return(0,c.getChildImageUploadUrl)({collectionId:i.productModel.get("collectionId"),parentId:i.productModel.get("id"),recordType:r.default.STORE_ITEM})});this.container=t.container;this.mainImageId=t.mainImageId;this.productModel=t.productModel;this.setMainImageInYUI=t.setMainImageInYUI;this.addProductImageInYUI=t.addProductImageInYUI;this.removeProductImageInYUI=t.removeProductImageInYUI;this.variantId=t.variantId;this.productId=t.productModel.get("id");this.productName=t.productModel.get("title");this.productType=t.productModel.get("productType");this.isOpen=false;this.isLoading=false;this.isUploadingImage=false;this.selectedImageId=null;this.errorImageFile=null;this.productEditor=d.ProductEditor.YUI_EDITOR};var m=g;t.default=m;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/VariantImageEditor/index.tsx":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var v=i(a("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/assertThisInitialized.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var c=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var u=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var d=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var p=i(a("./src/main/webapp/frontend/packages/enums/MediaProcessingState.js"));var h=i(a("./common/temp/node_modules/classnames/index.js"));var g=i(a("./common/temp/node_modules/react/index.js"));var m=a("./src/main/webapp/universal/src/shared/i18n/react.ts");var f=i(a("./src/main/webapp/universal/src/shared/components/Image.jsx"));var b=i(a("./src/main/webapp/universal/src/shared/components/LoadingSpinner.jsx"));var S=i(a("./src/main/webapp/universal/src/shared/components/Modal/index.jsx"));var y=i(a("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/VariantImageEditor/ErrorImage.tsx"));var _=i(a("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/VariantImageEditor/ImageDropZone.tsx"));var C=a("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/VariantImageEditor/ImageUploadAPI.ts");var E=i(a("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/VariantImageEditor/ImageUploader.tsx"));var w=i(a("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/VariantImageEditor/UploadErrorModal.tsx"));var A=i(a("./src/main/webapp/universal/src/shared/images/configuration/no-image.png"));var T=i(a("./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/VariantImageEditor/styles.less"));var I=i(a("./src/main/webapp/universal/src/shared/utils/commerce/analytics/mapProductTypeToString.ts"));var q=a("./src/main/webapp/universal/src/shared/utils/commerce/analytics/trackVariantImages.ts");function k(s){var n=L();return function e(){var t=(0,u.default)(s),a;if(n){var i=(0,u.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,c.default)(this,a)}}function L(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var D=function(e){(0,l.default)(a,e);var t=k(a);function a(e){var f;(0,n.default)(this,a);f=t.call(this,e);(0,d.default)((0,o.default)(f),"originalSelectedImage",void 0);(0,d.default)((0,o.default)(f),"renderLoadingSpinner",function(e){return g.default.createElement("div",{key:e,className:(0,h.default)(T.default.flexChild,T.default.flexContainer)},g.default.createElement("div",{className:T.default.loadingContainer},g.default.createElement(b.default,{size:"large",className:T.default.loadingSpinner})))});(0,d.default)((0,o.default)(f),"uploadImage",function(){var t=(0,s.default)(v.default.mark(function e(a){var i,s,n,r,o,l,c,u,d,p,h,g,m;return v.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:i=f.props,s=i.productImages,n=i.productImageUploadUrl,r=i.addProductImage,o=i.setModalUploadingState,l=i.productId,c=i.productName,u=i.productType,d=i.productEditor;p=s.length+1;t.prev=2;o(true);t.next=6;return(0,C.upload)(n,a,p);case 6:h=t.sent;o(false);g=(0,C.buildProductImageFromResponse)(h);null===r||void 0===r?void 0:r(g,p,h.data.job);m=(0,I.default)(u);m&&(0,q.trackUploadImage)({imageId:g.id,productId:l,productName:c,productType:m,productSection:"variant-image-picker",productEditor:d});t.next=18;break;case 14:t.prev=14;t.t0=t["catch"](2);f.addErrorImageFile(a);o(false);case 18:case"end":return t.stop()}},e,null,[[2,14]])}));return function(e){return t.apply(this,arguments)}}());(0,d.default)((0,o.default)(f),"retryUpload",function(){var e=f.props.errorImageFile;if(!e)return;f.removeErrorImageFile();f.uploadImage(e)});(0,d.default)((0,o.default)(f),"addErrorImageFile",function(e){var t=f.props.setErrorImageFile;t(e)});(0,d.default)((0,o.default)(f),"removeProductImage",function(a){return function(e){e.stopPropagation();var t=f.props.removeProductImage;t(a)}});(0,d.default)((0,o.default)(f),"removeErrorImageFile",function(){var e=f.props.setErrorImageFile;e(null)});(0,d.default)((0,o.default)(f),"clearSelectedImageId",function(e){e.stopPropagation();var t=f.props.selectImageId;t(null)});(0,d.default)((0,o.default)(f),"closeModal",function(e){var t=f.props,a=t.closeModal,i=t.productId,s=t.variantId,n=t.productEditor;e.stopPropagation();a();(0,q.trackCloseVariantImagePicker)({productId:i,variantId:s,productEditor:n})});(0,d.default)((0,o.default)(f),"selectImageId",function(a){var i=f.props.selectImageId;return function(e){e.stopPropagation();var t=f.props.selectedImageId;i(t===a?null:a)}});(0,d.default)((0,o.default)(f),"saveMainImageId",function(e){e.stopPropagation();var t=f.props,a=t.selectedImageId,i=t.saveMainImageId;i(a);f.trackEventsOnSave()});f.originalSelectedImage=f.props.selectedImageId;return f}(0,r.default)(a,[{key:"render",value:function e(){var s=this;var t=this.props,a=t.errorImageFile,i=t.isOpen,n=t.isLoading,r=t.productImages,o=t.selectedImageId,l=t.isUploadingImage,c=t.onUploadImage;return g.default.createElement(S.default,{width:null,className:T.default.modal,overlayClassName:T.default.modalOverlay,isOpen:i,onRequestClose:this.closeModal},g.default.createElement(S.default.Header,{className:T.default.dialogHeader,onClick:this.clearSelectedImageId},g.default.createElement(m.T,{project:"apps.App.Commerce.ProductDialog"},"Select Variant Image")),g.default.createElement(S.default.Body,{className:T.default.dialogBody,onClick:this.clearSelectedImageId},n&&g.default.createElement(b.default,{size:"extra-large",className:T.default.modalLoadingSpinner}),!n&&g.default.createElement(g.default.Fragment,null,g.default.createElement(_.default,{uploadImage:c||this.uploadImage},r.map(function(e){var t=e.id,a=e.assetUrl,i=e.mediaProcessingState;switch(i){case p.default.QUEUED:return g.default.createElement("div",{key:t,className:(0,h.default)(T.default.flexChild,T.default.flexContainer)},g.default.createElement("div",{className:T.default.loadingContainer},g.default.createElement("div",{className:T.default.queuedContainer},g.default.createElement(b.default,{size:"large",className:T.default.loadingSpinner}),g.default.createElement("span",{className:T.default.queuedText,onClick:s.removeProductImage(t)},g.default.createElement(m.T,{project:"apps.App.Commerce.ProductDialog"},"Cancel")))));case p.default.READY:return g.default.createElement("div",{key:t,onClick:s.selectImageId(t),className:(0,h.default)(T.default.flexChild,T.default.imageContainer,T.default.selectable,(0,d.default)({},T.default.isSelected,t===o))},g.default.createElement(f.default,{src:a}));case p.default.ERROR:return g.default.createElement("div",{key:t,className:(0,h.default)(T.default.flexChild,T.default.imageContainer)},g.default.createElement(f.default,{src:A.default}));default:return null}}),l&&this.renderLoadingSpinner(),a&&g.default.createElement(y.default,{className:(0,h.default)(T.default.flexChild,T.default.imageContainer),imageFile:a}),g.default.createElement("div",{className:T.default.flexChild},g.default.createElement(E.default,{uploadImage:c||this.uploadImage}))),a&&g.default.createElement(w.default,{numImages:r.length,isOpen:true,onConfirm:this.retryUpload,onDismiss:this.removeErrorImageFile}))),!n&&g.default.createElement(S.default.Footer,null,g.default.createElement(S.default.Button,{onClick:this.closeModal},g.default.createElement(m.T,{project:"apps.App.Commerce.ProductDialog"},"Cancel")),g.default.createElement(S.default.Button,{onClick:this.saveMainImageId},g.default.createElement(m.T,{project:"apps.App.Commerce.ProductDialog"},"Apply"))))}},{key:"trackEventsOnSave",value:function e(){var t=this.props,a=t.selectedImageId,i=t.productId,s=t.variantId,n=t.productEditor;a||(0,q.trackRemoveVariantImage)({imageId:a,productId:i,variantId:s,productEditor:n});a&&!this.originalSelectedImage?(0,q.trackAddVariantImage)({imageId:a,productId:i,variantId:s,productEditor:n}):a&&this.originalSelectedImage&&(0,q.trackChangeVariantImage)({imageId:a,productId:i,variantId:s,productEditor:n});this.originalSelectedImage=a}}]);return a}(g.default.Component);var N=D;t.default=N;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/Commerce/screens/ProductDialog/VariantImageEditor/styles.less":function(e,t,a){e.exports={modalOverlay:"styles-modalOverlay-1vNy8",modal:"styles-modal-1AgdV",dialogHeader:"styles-dialogHeader-2nuGU",dialogBody:"styles-dialogBody-1MRM-",flexChild:"styles-flexChild-LKkyU",isSelected:"styles-isSelected-nuBO7",imageContainer:"styles-imageContainer-1vPJ6",loadingContainer:"styles-loadingContainer-1-K2y",selectable:"styles-selectable-1p28i",flexContainer:"styles-flexContainer-3LMtU",error:"styles-error-3PzAK",loadingSpinner:"styles-loadingSpinner-1Ej5B",modalLoadingSpinner:"styles-modalLoadingSpinner-EvJv_",queuedContainer:"styles-queuedContainer-1JHhF",queuedText:"styles-queuedText-2l8Sy"}},"./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/shared/components/customFields/ImageField.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var s=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var E=s(a("./common/temp/node_modules/@babel/runtime/helpers/extends.js"));var u=s(a("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var n=s(a("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var r=s(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var o=s(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var l=s(a("./common/temp/node_modules/@babel/runtime/helpers/assertThisInitialized.js"));var c=s(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var d=s(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var p=s(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var h=s(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var g=s(a("./common/temp/node_modules/lodash/pick.js"));var m=s(a("./common/temp/node_modules/lodash/isObject.js"));var w=s(a("./common/temp/node_modules/lodash/isFunction.js"));var f=s(a("./common/temp/node_modules/lodash/isEmpty.js"));var v=s(a("./common/temp/node_modules/lodash/debounce.js"));var A=s(a("./common/temp/node_modules/lodash/omit.js"));var b=s(a("./common/temp/node_modules/prop-types/index.js"));var T=i(a("./common/temp/node_modules/react/index.js"));var I=a("./common/temp/node_modules/@sqs/core-components/build/lib/index.js");var q=a("./common/temp/node_modules/@sqs/rosetta-primitives/build/lib/index.js");var S=a("./common/temp/node_modules/@sqs/rosetta-elements/build/lib/index.js");var y=a("./src/main/webapp/frontend/packages/enums/RecordType.js");var _=s(a("./src/main/webapp/frontend/packages/enums/WorkflowStates.js"));var k=a("./src/main/webapp/frontend/packages/enums/LicensedAssetSource.js");var L=a("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/externals.js");var D=s(a("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/shared/components/customFields/ImageField.less"));function C(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function N(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?C(Object(a),true).forEach(function(e){(0,h.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function R(s){var n=O();return function e(){var t=(0,p.default)(s),a;if(n){var i=(0,p.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,d.default)(this,a)}}function O(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var P={UPLOAD_DONE:"uploadDone",UPLOAD_CANCELED:"uploadCanceled",PROCESSING_DONE:"processingDone"};var x={mediaFocalPoint:{x:.5,y:.5},licensedAssetPreview:null,assetUrl:"",licensedAssetId:null};var B=function e(){return T.default.createElement(q.Box,{px:2},T.default.createElement(S.Divider,null))};var M=function(e){(0,c.default)(C,e);var i=R(C);function C(){var p;(0,r.default)(this,C);for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];p=i.call.apply(i,[this].concat(t));(0,h.default)((0,l.default)(p),"state",N({},x,{imageEditorOpen:false,showLicensedAssetPicker:!p.props.value&&p.props.licensedAssetDestination,purchaseModalOpen:false,licensedAssetType:null,licensedAssetUrl:null}));(0,h.default)((0,l.default)(p),"getImageId",function(){var e;var t=p.props.value;if(!(0,m.default)(t))return t;return null===t||void 0===t?void 0:null===(e=t.image)||void 0===e?void 0:e.id});(0,h.default)((0,l.default)(p),"updateStateForNewContentItem",(0,n.default)(u.default.mark(function e(){var a,i,s,n,r,o,l,c;return u.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:a=p.props,i=a.focalPointEditable,s=a.focalPointOverride,n=a.imageEditable,r=a.licensedAssetDestination;o=p.getImageId();if(!((i||n||r)&&o)){t.next=8;break}t.next=5;return p.fetchContentItemData(o);case 5:l=t.sent;c=(0,g.default)(l,Object.keys(x));p.setState(N({},c,{mediaFocalPoint:s||c.mediaFocalPoint||x.mediaFocalPoint}));case 8:case"end":return t.stop()}},e)})));(0,h.default)((0,l.default)(p),"fetchContentItemData",function(e){return L.ContentItemAPI.read(e).then(function(e){var t=e.data;return t})});(0,h.default)((0,l.default)(p),"updateFocalPoint",(0,v.default)(function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var a=p.props,i=a.onFocalPointChange,s=a.focalPointEditable;var n=p.getImageId();if(!n||!s)return;i?i(e):t&&L.ContentItemAPI.updateField({itemId:n,field:"mediaFocalPoint",value:e})},500));(0,h.default)((0,l.default)(p),"getLicensedAssetProps",function(e){var t=L.PurchasedImageStore.getOriginUrlFromId(e)||"";var a=L.PurchasedImageStore.getAssetTypeFromId(e)||null;return{licensedAssetUrl:t,licensedAssetType:a}});(0,h.default)((0,l.default)(p),"handleRemove",function(){var e=p.state,t=e.licensedAssetPreview,a=e.licensedAssetId,i=e.licensedAssetType;t?(0,L.trackInternal)("getty_clear",{assetId:t.assetId,assetSource:k.GETTY}):a&&(0,L.trackInternal)("licensed_asset_remove",{assetId:a,assetSource:i});p.handleChange({})});(0,h.default)((0,l.default)(p),"handleChange",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=p.props,a=t.onChange,i=t.licensedAssetDestination,s=t.value;var n=p.state,r=n.assetUrl,o=n.mediaFocalPoint;var l=p.getLicensedAssetProps(e.licensedAssetId);var c=(0,f.default)(e);var u=p.getImageId()===e.id;var d=e.mediaFocalPoint!==o;!c&&u&&d?p.updateFocalPoint(e.mediaFocalPoint):u||p.updateFocalPoint({x:.5,y:.5},false);(0,m.default)(s)?a(N({},s,{image:e.id?N({},s.image,{focalPoint:e.mediaFocalPoint},e):{}}),{isSameImage:u}):a(e.id,{isSameImage:u});p.setState(N({},(0,g.default)(e,Object.keys(x)),{},l,{showLicensedAssetPicker:!e.id&&i}));e.assetUrls&&e.assetUrls[0].url!==r&&p.setState({assetUrl:e.assetUrls[0].url})});(0,h.default)((0,l.default)(p),"handleUploadEvent",function(e){var t=p.getImageId();e.action===P.UPLOAD_DONE?p.setState({showLicensedAssetPicker:false}):e.action===P.UPLOAD_CANCELED&&p.props.licensedAssetDestination&&!t&&p.setState({showLicensedAssetPicker:true})});(0,h.default)((0,l.default)(p),"handleLicensedImagePicked",function(e){if(!p.props.uploaderRef.current){console.error("Image Uploader not ready.");return}L.ImagePickerViewActions.finishLoadingImage();L.ImagePickerViewActions.closeImagePicker();if(e.cloneItemId){L.ContentItemAPI.copy(e.cloneItemId,_.default.PUBLISHED,null).then(function(e){var t=e.data;return p.handleChange(t)});return}var t=e.licensedAssetId,a=e.url;p.setState({licensedAssetId:t,licensedAssetUrl:a},function(){p.props.uploaderRef.current.uploadFileFromUrl(N({},p.props.uploadData,{},(0,L.buildUploadPostData)(e,y.IMAGE,L.TRANSIENT)))})});(0,h.default)((0,l.default)(p),"handleSaveImageEditor",function(e){if(!p.props.uploaderRef.current){console.error("Image Uploader not ready.");return}p.setState({imageEditorOpen:false});p.props.uploaderRef.current.uploadFiles([e])});(0,h.default)((0,l.default)(p),"handlePurchase",function(e){if(!p.props.uploaderRef.current){console.error("Image Uploader not ready.");return}var t=p.getImageId();p.props.uploaderRef.current.uploadFileFromUrl((0,L.buildUploadPostData)(e,y.IMAGE,L.TRANSIENT,{replaceItemId:t}));p.setState({licensedAssetPreview:null});p.handleClosePurchaseModal()});(0,h.default)((0,l.default)(p),"handleClickEdit",function(){p.props.onClickEdit?p.props.onClickEdit():p.setState({imageEditorOpen:true})});(0,h.default)((0,l.default)(p),"handleCloseImageEditor",function(){p.setState({imageEditorOpen:false})});(0,h.default)((0,l.default)(p),"handleOpenPurchaseModal",function(){var e=p.state.licensedAssetPreview;p.setState({purchaseModalOpen:true});(0,L.trackInternal)("getty_purchase",{assetId:e.assetId,assetSource:k.GETTY})});(0,h.default)((0,l.default)(p),"handleClosePurchaseModal",function(){p.setState({purchaseModalOpen:false})});(0,h.default)((0,l.default)(p),"renderLeftButton",function(){var e=p.state,t=e.licensedAssetPreview,a=e.assetUrl;if(t)return T.default.createElement(q.Button.Tertiary,{onClick:p.handleOpenPurchaseModal},(0,L.t)("Purchase License"));if(a)return T.default.createElement(q.Button.Tertiary,{onClick:p.handleClickEdit,"data-test":"file-button-edit"},(0,L.t)("Image Editor"));return null});return p}(0,o.default)(C,[{key:"componentDidMount",value:function(){var e=(0,n.default)(u.default.mark(function e(){var a;return u.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return this.updateStateForNewContentItem();case 2:if(!this.state.licensedAssetId){t.next=8;break}a=L.PurchasedImageStore.getImageById(this.state.licensedAssetId);if(a){t.next=7;break}t.next=7;return L.PurchasedImageActions.fetch();case 7:this.setState(this.getLicensedAssetProps(this.state.licensedAssetId));case 8:case"end":return t.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"componentDidUpdate",value:function e(t){t.focalPointOverride!==this.props.focalPointOverride&&this.setState({mediaFocalPoint:this.props.focalPointOverride})}},{key:"componentWillUnmount",value:function e(){this.updateFocalPoint.flush()}},{key:"getFocalPoint",value:function e(){var t=this.state.mediaFocalPoint;var a=this.props.invertFocalPoint;var i=t.x,s=t.y;return{x:i,y:a?1-s:s}}},{key:"getPreviewComponent",value:function e(){var i=this;var t=this.props,a=t.height,s=t.focalPointEditable,n=t.invertFocalPoint,r=t.previewKey,o=t.renderPreview;if(o)return o;var l=this.getImageId();var c={value:l,maxHeight:a,dataField:false};var u={focalPoint:this.getFocalPoint(),onFocalPointChange:function e(t,a){return i.handleChange({id:l,mediaFocalPoint:{x:t,y:n?1-a:a}})}};if(s)return function(){return T.default.createElement(I.ImageField,(0,E.default)({key:r},c,u))};return function(){return T.default.createElement(I.ImageField,c)}}},{key:"render",value:function e(){var t;var a=this.state,i=a.imageEditorOpen,s=a.assetUrl,n=a.showLicensedAssetPicker,r=a.licensedAssetPreview,o=a.purchaseModalOpen,l=a.licensedAssetId,c=a.licensedAssetUrl,u=a.licensedAssetType;var d=this.props,p=d.value,h=d.licensedAssetDestination,g=d.imageEditable,m=d.mimeTypes,f=d.height,v=d.errors,b=d.getUploadUrl;var S=this.getImageId();var y=g||r;var _;(0,w.default)(b)&&(_=b(p,l));return T.default.createElement(T.Fragment,null,T.default.createElement(I.FileUpload,(0,E.default)({},(0,A.default)(this.props,Object.keys(C.propTypes)),{uploadUrl:_,ref:this.props.uploaderRef,dispatchValueType:"contentItem",onChange:this.handleChange,onEvent:this.handleUploadEvent,value:S,shouldRenderButtons:!y,height:f,className:D.default.uploadField,mimeTypes:m,fileType:"image",renderPreview:this.getPreviewComponent(),errors:v,"data-test":"image-field"})),S&&y&&T.default.createElement(T.Fragment,null,T.default.createElement("div",{className:D.default.previewButtons},this.renderLeftButton(),T.default.createElement(q.Button.Danger,{onClick:this.handleRemove},(0,L.t)("Remove Image"))),T.default.createElement(B,null)),S&&r&&T.default.createElement(T.Fragment,null,T.default.createElement(I.Context,{type:"label",description:(0,L.t)("This is an unlicensed preview image. To purchase its license, click the Purchase License button above. Watermarks will be removed after purchase")}),T.default.createElement(L.LicensedImagePurchaseModal,{key:"licensed-image-purchase-modal",assetPreview:r,previewUrl:s,isOpen:o,onRequestClose:this.handleClosePurchaseModal,onPurchaseSuccess:this.handlePurchase})),l&&u===k.GETTY&&T.default.createElement(I.Context,{type:"label",description:(0,L.t)("This is a licensed image. Click {link} to review licensing options for print, social, and more.",{link:'<a href="'.concat(c,'" target="_blank">\n              ').concat((0,L.t)("here"),"</a>")})}),n&&T.default.createElement(T.Fragment,null,T.default.createElement(q.Button.Tertiary,{m:2,ml:3,onClick:L.ImagePickerViewActions.openImagePicker,"data-test":"file-button-licensed-image-get"},(0,L.t)("Search For Images")),T.default.createElement(B,null),T.default.createElement(L.LicensedImagePicker,{disableImageReuse:this.props.disableImageReuse,onUnlicensedPreview:this.handleLicensedImagePicked,onLicensedPreview:this.handleLicensedImagePicked,imageDestination:h})),s&&g&&T.default.createElement(L.ImageEditor,{isOpen:i,imageSrc:s,imageFileName:null===p||void 0===p?void 0:null===(t=p.image)||void 0===t?void 0:t.filename,onCancel:this.handleCloseImageEditor,onSave:this.handleSaveImageEditor}))}}]);return C}(T.Component);(0,h.default)(M,"propTypes",{value:b.default.oneOfType([b.default.string,b.default.object]),onChange:b.default.func.isRequired,onClickEdit:b.default.func,onFocalPointChange:b.default.func,licensedAssetDestination:b.default.string,focalPointEditable:b.default.bool,focalPointOverride:b.default.shape({x:b.default.number,y:b.default.number}),imageEditable:b.default.bool,invertFocalPoint:b.default.bool,mimeTypes:b.default.arrayOf(b.default.string),height:b.default.number,errors:b.default.object,collectionId:b.default.string,getUploadUrl:b.default.func,renderPreview:b.default.func,disableImageReuse:b.default.bool});(0,h.default)(M,"defaultProps",{focalPointEditable:true,height:168,imageEditable:true,invertFocalPoint:true,mimeTypes:["image/gif","image/jpeg","image/png"]});var F=T.default.forwardRef(function(e,t){var a=(0,T.useRef)();return T.default.createElement(M,(0,E.default)({},e,{uploaderRef:t||a}))});t.default=F;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/shared/components/customFields/ImageField.less":function(e,t,a){e.exports={previewButtons:"ImageField-previewButtons-2rSSp",uploadField:"ImageField-uploadField-2JOHc"}},"./src/main/webapp/universal/src/apps/App/screens/Settings/screens/Billing/screens/SwitchProductsCheckoutSummary/SwitchProductCheckoutSummary.less":function(e,t,a){e.exports={cartHeader:"SwitchProductCheckoutSummary-cartHeader-qmuEq",cartFooterRow:"SwitchProductCheckoutSummary-cartFooterRow-3HH0T",totalLabel:"SwitchProductCheckoutSummary-totalLabel-1i1aU",totalPrice:"SwitchProductCheckoutSummary-totalPrice-3TWTD",domainWrapper:"SwitchProductCheckoutSummary-domainWrapper-3ky78",domainCancel:"SwitchProductCheckoutSummary-domainCancel-3BeHL",domainName:"SwitchProductCheckoutSummary-domainName-19sE4 typography-ellipsis-2-YdG",domainPrice:"SwitchProductCheckoutSummary-domainPrice-2g2Oz",spinner:"SwitchProductCheckoutSummary-spinner-2ykCj",offerCodeLabel:"SwitchProductCheckoutSummary-offerCodeLabel-17Cmd",offerCodeDiscount:"SwitchProductCheckoutSummary-offerCodeDiscount-2Be8u",visa:"SwitchProductCheckoutSummary-visa-1_TvR",americanExpress:"SwitchProductCheckoutSummary-americanExpress-LKQTZ",masterCard:"SwitchProductCheckoutSummary-masterCard-2lWZQ",discover:"SwitchProductCheckoutSummary-discover-2GFPC",modalHeader:"SwitchProductCheckoutSummary-modalHeader-1VmdX",card:"SwitchProductCheckoutSummary-card-7dyeL",transactionWrapper:"SwitchProductCheckoutSummary-transactionWrapper-Rd2oh",transactionHeader:"SwitchProductCheckoutSummary-transactionHeader-2F8x9 typography-headline-2B8jJ",transactionValue:"SwitchProductCheckoutSummary-transactionValue-3yXj-",money:"SwitchProductCheckoutSummary-money-3RigZ",heading:"SwitchProductCheckoutSummary-heading-Hj9RL",cardHeading:"SwitchProductCheckoutSummary-cardHeading-12Vbn",divider:"SwitchProductCheckoutSummary-divider-1XIFR",lineItem:"SwitchProductCheckoutSummary-lineItem-15cEY",totalSummary:"SwitchProductCheckoutSummary-totalSummary-1Wox7 TotalSummary-container-1Udwh",container:"SwitchProductCheckoutSummary-container-3LcOb"}},"./src/main/webapp/universal/src/apps/App/screens/Settings/screens/Billing/screens/SwitchProductsCheckoutSummary/SwitchProductsCheckoutSummary.jsx":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/assertThisInitialized.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var c=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var u=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var d=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));function p(s){var n=h();return function e(){var t=(0,u.default)(s),a;if(n){var i=(0,u.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,c.default)(this,a)}}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var s=a("./src/main/webapp/universal/src/shared/i18n/index.ts"),g=s.t;var m=a("./src/main/webapp/universal/src/shared/i18n/react.ts"),f=m.T;var v=a("./src/main/webapp/universal/src/shared/components/billing/BillingSummary.jsx");var b=a("./src/main/webapp/universal/src/shared/components/LoadingSpinner.jsx");var S=a("./src/main/webapp/universal/src/shared/components/Modal/index.jsx");var y=a("./src/main/webapp/universal/src/shared/utils/billing/ProductLineUtils.js");var _=a("./common/temp/node_modules/prop-types/index.js");var C=a("./common/temp/node_modules/react/index.js");var E=a("./src/main/webapp/universal/src/apps/App/screens/Settings/screens/Billing/screens/SwitchProductsCheckoutSummary/SwitchProductCheckoutSummary.less");var w=a("./src/main/webapp/frontend/packages/enums/BillingTaxType.js");var A=a("./src/main/webapp/universal/src/apps/App/shared/components/billing/PurchasePreview/index.jsx");var T=a("./src/main/webapp/universal/src/apps/App/shared/components/Receipt/utils/InvoicePropTypes.js").invoice;var I=function(e){(0,l.default)(s,e);var i=p(s);function s(){var n;(0,r.default)(this,s);for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];n=i.call.apply(i,[this].concat(t));(0,d.default)((0,o.default)(n),"getTotalSummaryLabel",function(e){if(e.isZero())return g("Nothing due today");if(e.isNegative())return g("You will be refunded");return g("Total Due Today")});(0,d.default)((0,o.default)(n),"renderTaxedOrderSummary",function(){var e=n.props.invoice;if(!e)return null;return C.createElement(A,{previewInvoice:e})});(0,d.default)((0,o.default)(n),"renderCartFooter",function(){return C.createElement("div",{className:E.cartFooter},C.createElement("div",{className:E.divider}),n.renderTaxedOrderSummary())});(0,d.default)((0,o.default)(n),"renderContents",function(){var e=n.props,t=e.card,a=e.selectedProductName,i=e.toProductLine;var s=y.getLabelForProductLine(i);return C.createElement("div",null,C.createElement(v,{name:t.name,number:t.number,type:t.cardType}),C.createElement("div",null,C.createElement("div",{className:E.heading},C.createElement(f,{project:"apps.App"},"Product Change")),C.createElement("div",null,C.createElement(f,{toProductLineLabel:s,selectedProductName:a,project:"apps.App"},"Squarespace {toProductLineLabel} - {selectedProductName} Plan"))),C.createElement("div",null,n.renderCartFooter()))});(0,d.default)((0,o.default)(n),"renderLoading",function(){return C.createElement(b,{horizontalAlign:"center",className:E.spinner})});return n}(0,n.default)(s,[{key:"render",value:function e(){var t=this.props,a=t.onCancel,i=t.onConfirmProductChange,s=t.loading;return C.createElement(S,{isOpen:true,anchor:"window",width:"450px",onRequestClose:a},C.createElement("div",{"data-test":"switch-product-checkout-summary"},C.createElement(S.Header,{className:E.modalHeader},C.createElement("h1",null,C.createElement(f,{project:"apps.App"},"Order Summary"))),C.createElement(S.Body,{className:E.container},s?this.renderLoading():this.renderContents()),C.createElement(S.Footer,null,C.createElement(S.Button,{onClick:a},C.createElement(f,{project:"apps.App"},"Cancel")),C.createElement(S.Button,{"data-test":"confirm-product-change-button",onClick:s?null:i,disabled:s},C.createElement(f,{project:"apps.App"},"Confirm Product Change")))))}}]);return s}(C.Component);(0,d.default)(I,"propTypes",{card:_.object,fromProductLine:_.string,toProductLine:_.string,invoice:T,currentProductName:_.string,selectedProductName:_.string,loading:_.bool,onCancel:_.func.isRequired,onConfirmProductChange:_.func.isRequired});(0,d.default)(I,"defaultProps",{taxType:w.VAT});e.exports=I},"./src/main/webapp/universal/src/apps/App/screens/Settings/screens/Billing/screens/SwitchProductsCheckoutSummary/index.jsx":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/alt-utils/lib/connectToStores.js");var o=a("./src/main/webapp/universal/src/shared/stores/billing/CustomerStore.js");var s=a("./src/main/webapp/universal/src/apps/App/screens/Settings/screens/Billing/screens/SwitchProductsCheckoutSummary/SwitchProductsCheckoutSummary.jsx");var n=a("./src/main/webapp/universal/src/shared/utils/billing/TaxUtils.js"),l=n.getTaxingEntity;e.exports=i({getStores:function e(){return[o]},getPropsFromStores:function e(t){var a=t.preview;var i=o.getState(),s=i.customer;var n=s?{name:s.name,number:s.maskedCardNumber,cardType:s.cardType}:{};var r=a&&s?l({taxType:a.taxType,taxRateLines:a.taxRateLines}):{};return{customer:s,card:n,taxingEntity:r}}},s)},"./src/main/webapp/universal/src/apps/App/screens/Settings/screens/CustomerAccounts/shared/api/CustomerAccountsSettingsApi.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./src/main/webapp/universal/src/shared/utils/sqsAxios.ts"));var n="/api/settings/site-users/accounts/";var r={get:function e(){return s.default.get(n)},save:function e(t){return s.default.put(n,t)}};t.default=r;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/shared/actions/AnnotationsActions.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=a("./src/main/webapp/universal/src/shared/dispatchers/alt/index.ts");var r=function e(){(0,s.default)(this,e);this.generateActions("hide","showEditorOverlay","hideEditorOverlay","reset","setMouseOver","setOverlayEditors","show","setIsSaving","setPageSectionNodes")};e.exports=n.createActions(r)},"./src/main/webapp/universal/src/apps/App/shared/actions/AnnouncementBarActions.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var r=a("./src/main/webapp/universal/src/shared/dispatchers/alt/index.ts");var o=function(){function e(){(0,s.default)(this,e);this.generateActions("closed","close","resetVisibility","update","removeOnVisibilityChangedHandler")}(0,n.default)(e,[{key:"addOnVisibilityChangedHandler",value:function e(t,a){return{key:t,callback:a}}}]);return e}();e.exports=r.createActions(o)},"./src/main/webapp/universal/src/apps/App/shared/actions/LayoutChooserActions.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var o=a("./src/main/webapp/universal/src/shared/dispatchers/alt/index.ts");var l=a("./src/main/webapp/universal/src/apps/App/shared/actions/SlideActions.js");var c=a("./src/main/webapp/universal/src/apps/App/shared/utils/ContentCollectionAPI.js");var u=a("./src/main/webapp/universal/src/apps/App/shared/utils/CoverPageSummaryAPI.js");var d=a("./src/main/webapp/universal/src/apps/App/shared/utils/LockScreenSummaryAPI.js");var p=a("./src/main/webapp/universal/src/apps/App/shared/utils/PopupOverlaySummaryAPI.js");var h=a("./src/main/webapp/universal/src/apps/App/shared/utils/SlideAPI.js");var g=a("./src/main/webapp/universal/src/apps/App/shared/utils/SlideLayoutAPI.js");var m=a("./src/main/webapp/frontend/packages/enums/SlideType.js");var f=function(){function e(){(0,s.default)(this,e);this.generateActions("fetchDataSuccess","fetchDataFailure","selectCategory","saveSuccess","saveFailure")}(0,n.default)(e,[{key:"fetchData",value:function e(a){var n=this;return function(e){e(a);var t=[c.read(a),u.read(a),g.readAllForType(m.COVER_PAGE)];Promise.all(t).then(function(e){var t=(0,r.default)(e,3),a=t[0],i=t[1],s=t[2];n.fetchDataSuccess({navTitle:a.data.navigationTitle,slide:i.data.slide,layouts:s.data.results})}).catch(function(){return n.fetchDataFailure()})}}},{key:"fetchLockScreenData",value:function e(){var s=this;return function(e){e();var t=[d.readLockScreenSummary(),g.readAllForType(m.LOCK_SCREEN)];Promise.all(t).then(function(e){var t=(0,r.default)(e,2),a=t[0],i=t[1];s.fetchDataSuccess({slide:a.data.slide,layouts:i.data.results})}).catch(function(){return s.fetchDataFailure()})}}},{key:"fetchPopupOverlayData",value:function e(){var s=this;return function(e){e();var t=[p.read(),g.readAllForType(m.POPUP_OVERLAY)];Promise.all(t).then(function(e){var t=(0,r.default)(e,2),a=t[0],i=t[1];s.fetchDataSuccess({slide:a.data.slide,layouts:i.data.results})}).catch(function(){return s.fetchDataFailure()})}}},{key:"selectLayout",value:function e(t,a){return function(e){e(a);l.renderPreview(t,a)}}},{key:"save",value:function e(t){var i=this;return function(e){e();return h.update(t).then(function(e){var t=e.data;return i.saveSuccess(t)}).catch(function(e){var t=e.data;var a=t.message;i.saveFailure(a);return Promise.reject(a)})}}}]);return e}();e.exports=o.createActions(f)},"./src/main/webapp/universal/src/apps/App/shared/actions/PageCollectionDataActions.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var r=a("./src/main/webapp/universal/src/apps/App/shared/utils/PageCollectionDataAPI.js");var o=a("./src/main/webapp/universal/src/apps/App/shared/stores/WebsiteStore/index.js");var l=a("./src/main/webapp/universal/src/shared/dispatchers/alt/index.ts");var c=function(){function e(){(0,s.default)(this,e)}(0,n.default)(e,[{key:"load",value:function e(a){var i=this;return function(t){return r.loadPageCollectionData(a).then(function(e){t(e.data||{collectionId:a});return e}).catch(i.notifyError)}}},{key:"save",value:function e(a,i,s){var n=this;return function(t){var e=o.getState().id;s=Object.assign({},s,{id:a,websiteId:e});return r.updatePageCollectionData(i,s).then(function(e){t(e.data);return e}).catch(n.notifyError)}}},{key:"create",value:function e(a,i){var s=this;return function(t){var e=o.getState().id;i=Object.assign({},i,{websiteId:e});return r.createPageCollectionData(a,i).then(function(e){t(e.data);return e}).catch(s.notifyError)}}},{key:"notifyError",value:function e(t){t instanceof Error&&console.error(t);return Promise.reject(t.data&&(t.data.message||t.data.error)||t.message||t.statusText||t.error)}}]);return e}();e.exports=l.createActions(c)},"./src/main/webapp/universal/src/apps/App/shared/actions/PopupOverlayActions.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var o=i(a("./src/main/webapp/universal/src/shared/dispatchers/alt/index.ts"));var l=i(a("./src/main/webapp/universal/src/apps/App/shared/utils/PopupOverlaySummaryAPI.js"));var c=i(a("./src/main/webapp/universal/src/apps/App/shared/utils/SlideLayoutAPI.js"));var u=i(a("./src/main/webapp/frontend/packages/enums/SlideType.js"));var d=i(a("./src/main/webapp/frontend/packages/enums/PopupOverlayStyle.js"));var p=i(a("./src/main/webapp/universal/src/apps/App/shared/actions/WebsiteSettingsActions.js"));var h=function(){function e(){(0,s.default)(this,e);this.generateActions("fetchDataSuccess","fetchDataFailure","updatePopupStyle","saveFailure","saveSuccess","show","hide")}(0,n.default)(e,[{key:"save",value:function e(t){var a=this;return p.default.save(t).then(function(){return a.saveSuccess(t.popupOverlaySettings.style)}).catch(function(){return a.saveFailure()})}},{key:"fetchData",value:function e(a){var n=this;return function(e){e();var s=a?a.style:d.default.NONE;var t=[l.default.read(),c.default.readAllForType(u.default.POPUP_OVERLAY)];return Promise.all(t).then(function(e){var t=(0,r.default)(e,2),a=t[0],i=t[1];n.fetchDataSuccess({summary:a.data,layouts:i.data.results,popupStyle:s})}).catch(function(){return n.fetchDataFailure()})}}},{key:"discard",value:function e(){return function(e){e();return Promise.resolve()}}}]);return e}();var g=o.default.createActions(h);t.default=g;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/shared/actions/SlideActions.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var o=a("./src/main/webapp/universal/src/apps/App/shared/utils/SlideAPI.js");var r=a("./src/main/webapp/universal/src/shared/dispatchers/alt/index.ts");var l=function(){function e(){(0,s.default)(this,e);this.generateActions("insert","insertSlices","saveSuccess","saveFailure")}(0,n.default)(e,[{key:"update",value:function e(t){var a=this;return function(e){e(t.id);return o.update(t).then(function(e){var t=e.data;return a.insert(t)}).catch(function(e){var t=e.data;return Promise.reject(t.message)})}}},{key:"upsertSlices",value:function e(t){var a=this;return function(e){e(t);return o.upsertSlices(t).then(function(e){var t=e.data;return a.insertSlices(t.slices)}).catch(function(e){var t=e.data;return Promise.reject(t.message)})}}},{key:"renderPreview",value:function e(t,n){var r=this;var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function(e){e();return o.renderPreview(t,a?n:null).then(function(e){var t=e.data;var a=t.renderedSlide,i=t.pageClasses,s=t.slideType;r.renderPreviewSuccess(a,i,n,s)})}}},{key:"renderPreviewSuccess",value:function e(t,a,i,s){return function(e){e();try{window.Y.Global.fire("slideUpdate",{renderedSlide:t,pageClasses:a,layoutId:i,slideType:s})}catch(e){console.error(e)}}}},{key:"save",value:function e(a){var i=this;return function(e){e();var t=Object.values(a).filter(function(e){return!e.isDemo});return o.upsertSlices(t).then(function(e){var t=e.data;var a=t.slices;false;i.saveSuccess(a);return a}).catch(function(e){var t=e.data;var a=t.message;i.saveFailure(a);return Promise.reject(a)})}}},{key:"discard",value:function e(i){var s=this;return function(e){e(i.id);var t=i.id,a=i.layoutIdentifier;s.renderPreview(t,a,false);return Promise.resolve()}}}]);return e}();e.exports=r.createActions(l)},"./src/main/webapp/universal/src/apps/App/shared/actions/WebsiteOverlayActions.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var r=a("./src/main/webapp/universal/src/shared/dispatchers/alt/index.ts");var o=function(){function e(){(0,s.default)(this,e)}(0,n.default)(e,[{key:"update",value:function e(t,a){return{field:t,value:a}}}]);return e}();e.exports=r.createActions(o)},"./src/main/webapp/universal/src/apps/App/shared/components/GoogleSearchPreview/GoogleSearchPreview.jsx":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var c=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var u=i(a("./common/temp/node_modules/prop-types/index.js"));var d=i(a("./common/temp/node_modules/react/index.js"));var p=i(a("./src/main/webapp/universal/src/apps/App/shared/components/GoogleSearchPreview/GoogleSearchPreview.less"));var h=a("./common/temp/node_modules/@sqs/fields/lib/index.js");var g=a("./src/main/webapp/universal/src/shared/i18n/react.ts");var m=i(a("./common/temp/node_modules/classnames/index.js"));function f(s){var n=v();return function e(){var t=(0,l.default)(s),a;if(n){var i=(0,l.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,o.default)(this,a)}}function v(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var b=function(e){(0,r.default)(a,e);var t=f(a);function a(){(0,s.default)(this,a);return t.apply(this,arguments)}(0,n.default)(a,[{key:"render",value:function e(){var t=this.props,a=t.hideTitle,i=t.description,s=t.headerComponent,n=t.isHelpDescription,r=t.title,o=t.url;var l=(0,m.default)(p.default.description,(0,c.default)({},p.default.helperDescription,n));return d.default.createElement("div",null,a?null:s||d.default.createElement(h.Label,{className:p.default.label},d.default.createElement(g.T,{project:"apps.App"},"Search Results Preview")),d.default.createElement("div",{className:p.default.container},d.default.createElement("div",{className:p.default.title},r),d.default.createElement("div",{className:p.default.url},o),d.default.createElement("div",{className:l},i)))}}]);return a}(d.default.Component);(0,c.default)(b,"propTypes",{description:u.default.string,headerComponent:u.default.element,hideTitle:u.default.bool,isHelpDescription:u.default.bool,title:u.default.string,url:u.default.string});var S=b;t.default=S;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/shared/components/GoogleSearchPreview/GoogleSearchPreview.less":function(e,t,a){e.exports={container:"GoogleSearchPreview-container-1HbEB",title:"GoogleSearchPreview-title-1vKqW",previewTitle:"GoogleSearchPreview-previewTitle-T1opM",label:"GoogleSearchPreview-label-1qmLs",description:"GoogleSearchPreview-description-fC5z4",helperDescription:"GoogleSearchPreview-helperDescription-1CWXb",url:"GoogleSearchPreview-url-1Gz10"}},"./src/main/webapp/universal/src/apps/App/shared/components/GoogleSearchPreview/index.jsx":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./src/main/webapp/universal/src/apps/App/shared/components/GoogleSearchPreview/GoogleSearchPreview.jsx"));var n=s.default;t.default=n;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/shared/components/JSFHeaderContext/JSFHeaderContext.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.JSFHeaderChildrenValueContext=t.JSFHeaderChildrenDispatchContext=void 0;var s=i(a("./common/temp/node_modules/react/index.js"));var n=s.default.createContext();t.JSFHeaderChildrenDispatchContext=n;var r=s.default.createContext();t.JSFHeaderChildrenValueContext=r},"./src/main/webapp/universal/src/apps/App/shared/components/JSFHeaderContext/JSFHeaderContextProvider.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var s=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var o=s(a("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));var l=i(a("./common/temp/node_modules/react/index.js"));var c=a("./src/main/webapp/universal/src/apps/App/shared/components/JSFHeaderContext/JSFHeaderContext.js");var n=function e(t){var a=t.children;var i=(0,l.useState)(),s=(0,o.default)(i,2),n=s[0],r=s[1];return l.default.createElement(c.JSFHeaderChildrenDispatchContext.Provider,{value:r},l.default.createElement(c.JSFHeaderChildrenValueContext.Provider,{value:n},a))};var r=n;t.default=r;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/shared/components/JSFHeaderContext/index.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});Object.defineProperty(t,"JSFHeaderChildrenDispatchContext",{enumerable:true,get:function e(){return s.JSFHeaderChildrenDispatchContext}});Object.defineProperty(t,"JSFHeaderChildrenValueContext",{enumerable:true,get:function e(){return s.JSFHeaderChildrenValueContext}});Object.defineProperty(t,"JSFHeaderContextProvider",{enumerable:true,get:function e(){return n.default}});Object.defineProperty(t,"withSetHeaderChildren",{enumerable:true,get:function e(){return r.default}});var s=a("./src/main/webapp/universal/src/apps/App/shared/components/JSFHeaderContext/JSFHeaderContext.js");var n=i(a("./src/main/webapp/universal/src/apps/App/shared/components/JSFHeaderContext/JSFHeaderContextProvider.js"));var r=i(a("./src/main/webapp/universal/src/apps/App/shared/components/JSFHeaderContext/withSetHeaderChildren.js"))},"./src/main/webapp/universal/src/apps/App/shared/components/JSFHeaderContext/withSetHeaderChildren.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var s=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=s(a("./common/temp/node_modules/@babel/runtime/helpers/extends.js"));var r=i(a("./common/temp/node_modules/react/index.js"));var o=a("./src/main/webapp/universal/src/apps/App/shared/components/JSFHeaderContext/JSFHeaderContext.js");var l=function e(a){return function(e){var t=(0,r.useContext)(o.JSFHeaderChildrenDispatchContext);return r.default.createElement(a,(0,n.default)({},e,{setHeaderChildren:t}))}};var c=l;t.default=c;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/shared/components/TabbedHeader/TabbedHeader.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/assertThisInitialized.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var c=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var d=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var p=i(a("./common/temp/node_modules/react/index.js"));var u=i(a("./common/temp/node_modules/prop-types/index.js"));var h=i(a("./common/temp/node_modules/classnames/index.js"));var g=i(a("./src/main/webapp/universal/src/apps/App/shared/components/TabbedHeader/TabbedHeader.less"));var m=a("./common/temp/node_modules/@sqs/transitions/lib/index.js");var f=i(a("./src/main/webapp/universal/src/apps/App/shared/components/TabbedHeader/transitions.js"));var v=i(a("./common/temp/node_modules/@sqs/utils/scroll/scrollTo.js"));function b(s){var n=S();return function e(){var t=(0,c.default)(s),a;if(n){var i=(0,c.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,l.default)(this,a)}}function S(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var y=function(e){(0,r.default)(a,e);var t=b(a);function a(e){var r;(0,s.default)(this,a);r=t.call(this,e);(0,d.default)((0,o.default)(r),"handleScroll",function(e){var t=r.props.tabWidth;var a=e.target,i=a.scrollLeft,s=a.scrollWidth,n=a.clientWidth;r.setState({leftIndicatorVisible:i>.5*t,rightIndicatorVisible:i+n+.5*t<s})});(0,d.default)((0,o.default)(r),"handleTabClick",function(e){var t=e.currentTab,a=e.index;r.setState({active:a});r.scrollTo(a);t.onClick&&t.onClick()});(0,d.default)((0,o.default)(r),"prevTab",function(){var e=r.scrollRef.current.scrollLeft/r.props.tabWidth;r.scrollTo(e)});(0,d.default)((0,o.default)(r),"nextTab",function(){var e=r.props.tabWidth;var t=(r.scrollRef.current.scrollLeft+1.5*e)/e;r.scrollTo(t)});r.scrollRef=p.default.createRef();r.state={active:Math.min(e.defaultTabIndex,e.tabs.length-1),leftIndicatorVisible:false,rightIndicatorVisible:false};return r}(0,n.default)(a,[{key:"componentDidMount",value:function e(){if(this.getScrollable()){this.scrollRef.current.addEventListener("scroll",this.handleScroll,{passive:true});this.scrollTo(this.state.active)}}},{key:"componentWillUnmount",value:function e(){this.getScrollable()&&this.scrollRef.current.removeEventListener("scroll",this.handleScroll)}},{key:"scrollTo",value:function e(t){var a=this.props,i=a.scrollDurationMS,s=a.tabWidth;var n=s*Math.floor(t)-.25*s;(0,v.default)(this.scrollRef.current,{left:n},{minDuration:i,maxDuration:i,easing:"easeInOutSine"})}},{key:"getScrollable",value:function e(){var t=this.props,a=t.tabWidth,i=t.tabs;var s=this.scrollRef.current&&this.scrollRef.current.clientWidth;var n=a*i.length;return!!s&&n>s}},{key:"renderTabs",value:function e(){var l=this;var t=this.props,a=t.tabs,c=t.tabWidth;var u=this.state.active;return a.map(function(e,t){var a;var i=e.className,s=void 0===i?"":i,n=e.error,r=e.tabTitle;var o=(0,h.default)(g.default.tab,(a={},(0,d.default)(a,g.default.active,u===t),(0,d.default)(a,g.default.error,n),a),s);return p.default.createElement("div",{className:o,"data-test":"tab-".concat(t),key:"tab-".concat(r),onClick:l.handleTabClick.bind(l,{currentTab:e,index:t}),style:{width:c}},r)})}},{key:"renderIndicatorMask",value:function e(t){var a=this.props.tabWidth/2;return this.getScrollable()&&p.default.createElement(m.CSSTransitionGroup,{key:"".concat(t,"TransitionGroup"),wrapChildWithTag:false,className:g.default["".concat(t,"TransitionGroup")],transitions:f.default.slideIn},this.state["".concat(t,"IndicatorVisible")]&&[p.default.createElement("div",{key:"".concat(t,"Mask"),className:g.default.scrollIndicatorMask,style:{width:a}}),p.default.createElement("div",{key:"".concat(t,"Icon"),className:g.default.scrollIndicatorIcon,style:{width:a/2},onClick:"left"===t?this.prevTab:this.nextTab})])}},{key:"renderScrollableTabs",value:function e(){var t=this.props,a=t.tabWidth,i=t.tabs;return p.default.createElement("div",{style:{width:a*i.length}},this.renderTabs())}},{key:"render",value:function e(){return p.default.createElement("div",{className:g.default.container},p.default.createElement("div",{className:g.default.flexTabContainer,ref:this.scrollRef},this.renderScrollableTabs()),[this.renderIndicatorMask("left"),this.renderIndicatorMask("right")])}}]);return a}(p.default.PureComponent);(0,d.default)(y,"propTypes",{defaultTabIndex:u.default.number,tabs:u.default.array.isRequired,tabWidth:u.default.number,scrollDurationMS:u.default.number});(0,d.default)(y,"defaultProps",{defaultTabIndex:0,scrollDurationMS:200,tabWidth:140,tabs:[]});var _=y;t.default=_;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/shared/components/TabbedHeader/TabbedHeader.less":function(e,t,a){e.exports={search:"TabbedHeader-search-SRECF",add:"TabbedHeader-add-2tTNZ",clear:"TabbedHeader-clear-2lxxT",clearLight:"TabbedHeader-clearLight-1w-GP",trash:"TabbedHeader-trash-2OUqZ",trashLight:"TabbedHeader-trashLight-2vpNA",check:"TabbedHeader-check-2ybzy",checkDark:"TabbedHeader-checkDark-JLkl9",checkAfter:"TabbedHeader-checkAfter-eRxI6",checkDarkAfter:"TabbedHeader-checkDarkAfter-ZZ4sD",checkDarkSmallAfter:"TabbedHeader-checkDarkSmallAfter-3WZQR",checkDarkBefore:"TabbedHeader-checkDarkBefore-4F5a1",aureusCheck:"TabbedHeader-aureusCheck-HMjMF",upload:"TabbedHeader-upload-2usv_",avatar:"TabbedHeader-avatar-3mLyQ",gearSmall:"TabbedHeader-gearSmall-38YEO",pencilSmall:"TabbedHeader-pencilSmall-xhcME",trashSmall:"TabbedHeader-trashSmall-T6_jm",chevronLight:"TabbedHeader-chevronLight-20LfJ",chevronRight:"TabbedHeader-chevronRight-1OQJC",chevronDark:"TabbedHeader-chevronDark-2FVa8",circleLogoDark:"TabbedHeader-circleLogoDark-3JOG1",gettyLogo:"TabbedHeader-gettyLogo-14zJu",gettyIconLight:"TabbedHeader-gettyIconLight-1U9lQ",chevronUpDark:"TabbedHeader-chevronUpDark-3pmol",chevronDownDark:"TabbedHeader-chevronDownDark-1X3Jf",arrowDark:"TabbedHeader-arrowDark-cG80c",file:"TabbedHeader-file-3O_7_",shoppingCart:"TabbedHeader-shoppingCart-1FGwG",squarespace:"TabbedHeader-squarespace-397fZ",zoomin:"TabbedHeader-zoomin-g4MIA",zoomout:"TabbedHeader-zoomout-D_EsD",squarespaceLight:"TabbedHeader-squarespaceLight-23GkG",container:"TabbedHeader-container-1Br8J",leftTransitionGroup:"TabbedHeader-leftTransitionGroup-1Vig8",rightTransitionGroup:"TabbedHeader-rightTransitionGroup-1J7zl",flexTabContainer:"TabbedHeader-flexTabContainer-1zi79",tab:"TabbedHeader-tab-2kGQy",active:"TabbedHeader-active-174z9",error:"TabbedHeader-error-DNlAo",scrollIndicatorMask:"TabbedHeader-scrollIndicatorMask-1_Gir",scrollIndicatorIcon:"TabbedHeader-scrollIndicatorIcon-2ZuI1"}},"./src/main/webapp/universal/src/apps/App/shared/components/TabbedHeader/index.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./src/main/webapp/universal/src/apps/App/shared/components/TabbedHeader/TabbedHeader.js"));var n=s.default;t.default=n;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/shared/components/TabbedHeader/transitions.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./src/main/webapp/universal/src/apps/App/shared/components/TabbedHeader/transitions.less"));var n={slideIn:{enter:{from:{opacity:0,transform:"translateX(-100%)"},to:{opacity:1,transform:"translateX(0)"},className:s.default.dissolve},leave:{from:{opacity:1,transform:"translateX(0)"},to:{opacity:0,transform:"translateX(-100%)"},className:s.default.dissolve}}};t.default=n;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/shared/components/TabbedHeader/transitions.less":function(e,t,a){e.exports={dissolve:"transitions-dissolve-38-Aa"}},"./src/main/webapp/universal/src/apps/App/shared/components/ToastManager/ToastManagerUtils.tsx":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.getCloseIcon=void 0;var s=i(a("./common/temp/node_modules/react/index.js"));var n=a("./common/temp/node_modules/@sqs/rosetta-icons/build/lib/index.js");var r=a("./common/temp/node_modules/@sqs/rosetta-tokens/build/lib/index.js");var o=function e(){return s.default.createElement(n.CrossLarge,{width:r.space[4],height:r.space[4],color:"gray.400"})};t.getCloseIcon=o},"./src/main/webapp/universal/src/apps/App/shared/constants/PageCatalogType.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i={COLLECTION:"COLLECTION",ITEM:"ITEM"};t.default=i;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/shared/constants/SectionTypes.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i={GALLERY:"GALLERY",IMAGE_AND_TEXT:"IMAGE_AND_TEXT",LAYOUT_ENGINE:"LAYOUT_ENGINE",MAIN_CONTENT:"MAIN_CONTENT",USER_ITEMS_LIST:"USER_ITEMS_LIST",JSON_SCHEMA:"JSON_SCHEMA"};t.default=i;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/shared/constants/category/ItemCategoryMessageBundle.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var n=a("./src/main/webapp/universal/src/shared/i18n/index.ts");var r=i(a("./src/main/webapp/frontend/packages/enums/ItemCatalogCategory.js"));var o=(0,s.default)({},r.default.PROJECTS,(0,n.t)("Projects"));t.default=o;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/shared/constants/category/PageCategoryMessageBundle.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var n=a("./src/main/webapp/universal/src/shared/i18n/index.ts");var r=i(a("./src/main/webapp/frontend/packages/enums/PageCategories.js"));var o;var l=(o={},(0,s.default)(o,r.default.ABOUT,(0,n.t)("About")),(0,s.default)(o,r.default.APPOINTMENTS,(0,n.t)("Appointments")),(0,s.default)(o,r.default.BLOG,(0,n.t)("Blog")),(0,s.default)(o,r.default.CONTACT,(0,n.t)("Contact")),(0,s.default)(o,r.default.DESIGNER_LAYOUTS,(0,n.t)("Designer Layouts")),(0,s.default)(o,r.default.EVENTS,(0,n.t)("Events")),(0,s.default)(o,r.default.FAQS,(0,n.t)("FAQs")),(0,s.default)(o,r.default.GALLERY,(0,n.t)("Gallery")),(0,s.default)(o,r.default.GENERAL,(0,n.t)("General")),(0,s.default)(o,r.default.MEMBER_AREAS,(0,n.t)("Member Areas")),(0,s.default)(o,r.default.MENU,(0,n.t)("Menu")),(0,s.default)(o,r.default.MUSIC,(0,n.t)("Music")),(0,s.default)(o,r.default.PORTFOLIO,(0,n.t)("Portfolio")),(0,s.default)(o,r.default.PRIVACY_POLICY,(0,n.t)("Privacy Policy")),(0,s.default)(o,r.default.PROJECT,(0,n.t)("Project")),(0,s.default)(o,r.default.REVIEWS,(0,n.t)("Reviews")),(0,s.default)(o,r.default.RSVP,(0,n.t)("RSVP")),(0,s.default)(o,r.default.SERVICES,(0,n.t)("Services")),(0,s.default)(o,r.default.STAGING,(0,n.t)("Staging (Internal Only)")),(0,s.default)(o,r.default.STORE,(0,n.t)("Store")),(0,s.default)(o,r.default.TEAM,(0,n.t)("Team")),(0,s.default)(o,r.default.TOS,(0,n.t)("Terms of Service")),o);t.default=l;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/shared/redux/utils/themeUtils.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.getThemeCardMappingsById=void 0;var s=i(a("./common/temp/node_modules/lodash/findIndex.js"));var u=a("./src/main/webapp/universal/src/apps/App/shared/utils/ThemesUtils.js");var d=a("./src/main/webapp/universal/src/shared/constants/ThemesConfig.js");var p=function e(t,a){return(0,s.default)(t,{themeId:a})};var h=function e(t,a){return a>-1&&t.length>a?t[a]:null};var n=function e(t,a){var i=d.ThemesConfigById[a];if(!i)return null;var s=p(t,a);var n=h(t,s);if(!n||!n.mappings)return;var r=(0,u.getThemeTweakMapping)(n.mappings,"siteBackgroundColor");var o=(0,u.getThemeTweakMapping)(n.mappings,"headingLargeColor");var l=(0,u.getThemeTweakMapping)(n.mappings,"paragraphMediumColor");var c={};if(o)if(o.custom){c.headingColorId=o.custom;c.isHeadingCustom=true}else{c.headingColorId=o.colorId;c.isHeadingCustom=false}if(l)if(l.custom){c.bodyColorId=l.custom;c.isBodyCustom=true}else{c.bodyColorId=l.colorId;c.isBodyCustom=false}if(r)if(r.custom){c.backgroundColorId=r.custom;c.isBackgroundCustom=true}else{c.backgroundColorId=r.colorId;c.isBackgroundCustom=false}return c};t.getThemeCardMappingsById=n},"./src/main/webapp/universal/src/apps/App/shared/stores/AnnotationsStore.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var r=a("./src/main/webapp/universal/src/shared/dispatchers/alt/index.ts");var o=a("./src/main/webapp/universal/src/apps/App/shared/actions/AnnotationsActions.js");var l=function e(){return{mouseOverNode:null,editorOverlay:null,overlayEditors:[],visible:true,isSaving:false,pageSectionNodes:null}};var c=function(){function e(){(0,s.default)(this,e);this.state=l();this.bindActions(o)}(0,n.default)(e,[{key:"onReset",value:function e(){this.setState(l())}},{key:"onSetOverlayEditors",value:function e(t){this.setState({overlayEditors:t})}},{key:"onShow",value:function e(){this.setState({visible:true})}},{key:"onHide",value:function e(){this.setState({visible:false})}},{key:"onSetMouseOver",value:function e(t){var a=t.referenceNode,i=t.isOver;this.setState({mouseOverNode:i?a:null})}},{key:"onShowEditorOverlay",value:function e(t){this.setState({editorOverlay:t})}},{key:"onHideEditorOverlay",value:function e(){this.setState({editorOverlay:null})}},{key:"onSetIsSaving",value:function e(t){this.setState({isSaving:t})}},{key:"onSetPageSectionNodes",value:function e(t){this.setState({pageSectionNodes:t})}}]);return e}();e.exports=r.createStore(c,"AnnotationsStore")},"./src/main/webapp/universal/src/apps/App/shared/stores/FeatureGateStore/FeatureGateStore.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var o=i(a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts"));var l=i(a("./src/main/webapp/frontend/packages/enums/Flag.js"));var c=i(a("./src/main/webapp/universal/src/shared/constants/SubscriptionTypes.js"));var u;var d=a("./src/main/webapp/universal/src/shared/i18n/index.ts"),p=d.t;var h=a("./src/main/webapp/universal/src/shared/dispatchers/alt/index.ts");var g=a("./common/temp/node_modules/lodash/get.js");var m=a("./src/main/webapp/universal/src/shared/actions/StaticActions.js");var f=a("./src/main/webapp/universal/src/apps/App/shared/stores/BillingStatusStore.js");var v=a("./src/main/webapp/frontend/packages/enums/Features.js");var b=a("./src/main/webapp/universal/src/apps/App/shared/constants/FeatureGateDefaultCopy.js");var S=o.default.isFeatureEnabled(l.default.MEMBER_AREAS_GA);var y=p("Available with Commerce plans or Member Areas add-on.");var _=p("Subscribe to Commerce Basic, Commerce Advanced, or the Member Areas add-on to continue using this feature after your trial.");var C=p("To continue using Commerce features after your trial, subscribe to the Business, Commerce Basic, or Commerce Advanced plan.");var E={trialUpgradeDescription:p("To continue using API keys after your trial, subscribe to the Business, Commerce Basic, or Commerce Advanced plan. The Inventory, Orders, and Transactions APIs are only available in the Commerce Advanced plan."),upgradeDescription:p("Upgrade to the Business or Commerce plans to use API keys. The Inventory, Orders, Transactions APIs are only available in the Commerce Advanced plan. Your current plan doesn't include these features.")};var w=(u={},(0,r.default)(u,v.COMMERCE,{description:p("Available on Business and Commerce plans."),trialUpgradeDescription:C,upgradeDescription:p("Upgrade to the Business or Commerce plans to sell online. Your current plan doesn't include these features.")}),(0,r.default)(u,v.SHIPSTATION_INTEGRATION,{trialUpgradeDescription:p("To continue using ShipStation after your trial, subscribe to the Commerce Basic or Advanced plan."),upgradeDescription:p("Upgrade to the Commerce plans to use the ShipStation integration. Your current plan doesn't include this feature.")}),(0,r.default)(u,v.REAL_TIME_SHIPPING_RATES,{trialUpgradeDescription:p("To continue using Real-Time Carrier Rates after your trial, subscribe to the Commerce Advanced plan."),upgradeDescription:p("Upgrade to the Commerce Advanced plan to get Real-Time Carrier Rates. Your current plan doesn't include this feature.")}),(0,r.default)(u,v.ABANDONED_CART_RECOVERY,{upgradeDescription:p("Upgrade to the Commerce Advanced plan to use Abandoned Cart Recovery. Your current plan doesn't include this feature.")}),(0,r.default)(u,v.GIFT_CARDS,{upgradeDescription:p("Upgrade to the Commerce Advanced plan to get access to Gift Cards. Your current plan doesn't include this feature.")}),(0,r.default)(u,v.ADD_COMMERCE_PRODUCTS,{trialUpgradeDescription:C,upgradeDescription:p("Upgrade to the Business or Commerce plans to sell online. Gift Cards are only available on Commerce Advanced. Your current plan doesn't include these features.")}),(0,r.default)(u,v.COMMERCE_CHECKOUT_ON_DOMAIN,{upgradeDescription:p("Upgrade to the Commerce Basic or Advanced plan to use Checkout on Your Domain. Your current plan doesn't include this feature.")}),(0,r.default)(u,v.SITE_USER_ACCOUNTS,{description:S?y:p("Available on Commerce plans."),trialUpgradeDescription:S?_:p("To continue using Customer Accounts after your trial, subscribe to the Commerce Basic or Advanced plan."),upgradeDescription:p("Upgrade to the Commerce plans to use Customer Accounts. Your current plan doesn't include this feature.")}),(0,r.default)(u,v.BLOCK_DONATION,{description:p("Available on Business and Commerce plans."),trialUpgradeDescription:p("To continue using Donations after your trial, subscribe to the Business, Commerce Basic, or Commerce Advanced plan."),upgradeDescription:p("Upgrade to the Business or Commerce plans to use Donations. Your current plan doesn't include this feature.")}),(0,r.default)(u,v.FORMS_API,E),(0,r.default)(u,v.INVENTORY_API,E),(0,r.default)(u,v.ORDERS_API,E),(0,r.default)(u,v.TRANSACTION_API,E),(0,r.default)(u,v.AUTO_TRIGGERED_DISCOUNTS,{trialUpgradeDescription:p("To continue using Automatic Discounts after your trial, subscribe to the Commerce Advanced plan."),upgradeDescription:p("Upgrade to the Commerce Advanced plan to use Automatic Discounts. Your current plan doesn't include this feature.")}),(0,r.default)(u,v.LIMITED_USE_DISCOUNTS,{trialUpgradeDescription:p("To continue using Limited-Use Discounts after your trial, subscribe to the Commerce Advanced plan."),upgradeDescription:p("Upgrade to the Commerce Advanced plan to use Limited-Use Discounts. Your current plan doesn't include this feature.")}),(0,r.default)(u,v.PRODUCTS_ON_INSTAGRAM,{description:p("Available on Commerce plans."),trialUpgradeDescription:p("To continue using Products on Instagram after your trial, subscribe to the Commerce Basic or Advanced plan."),upgradeDescription:p("Upgrade to the Commerce Basic or Advanced plan to use Products on Instagram. Your current plan doesn't include this feature.")}),(0,r.default)(u,v.FACEBOOK_PIXEL,{description:p("Available on Business and Commerce plans."),trialUpgradeDescription:p("To continue using Facebook Pixel after your trial, subscribe to the Business or Commerce plans."),upgradeDescription:p("Upgrade to the Business or Commerce plans to use Facebook Pixel. Your current plan doesn't include this feature.")}),(0,r.default)(u,v.COMMERCE_POSTAL_CODE_SHIPPING,{upgradeDescription:p("Upgrade to the Commerce Advanced plan to ship based on Postal Codes. Your current plan doesn't include this feature.")}),(0,r.default)(u,v.COMMERCE_SUBSCRIPTIONS,{trialUpgradeTitle:p("Upgrade to Keep Using this Feature After Your Trial"),upgradeTitle:p("Upgrade to Use this Feature"),description:p("Available on Commerce Advanced. "),upgradeDescription:p("Upgrade to the Commerce Advanced Plan to sell Subscriptions. Your current plan doesn't include this feature."),trialUpgradeDescription:p("To continue selling Subscriptions after your trial, subscribe to the Commerce Advanced plan.")}),(0,r.default)(u,v.FACEBOOK_DYNAMIC_ADS,{description:p("Available on Commerce plans."),trialUpgradeDescription:p("To continue using Facebook Dynamic Ads after your trial, subscribe to the Commerce Basic or Advanced plan."),upgradeDescription:p("Upgrade to the Commerce Basic or Advanced plan to use Facebook Dynamic Ads. Your current plan doesn't include this feature.")}),(0,r.default)(u,v.MARKETING_CAMPAIGN_TRACKER,{description:p("Available on Business and Commerce plans."),trialUpgradeDescription:p("To continue using URL Builder after your trial, subscribe to the Business or Commerce plans."),upgradeDescription:p("Upgrade to the Business or Commerce plans to use URL Builder. Your current plan doesn't include this feature.")}),(0,r.default)(u,v.LIMITED_AVAILABILITY_ALERTS,{trialUpgradeTitle:p("Upgrade to Keep Using this Feature After Your Trial"),upgradeTitle:p("Upgrade to Use this Feature"),description:p("This premium feature is included in Commerce Basic and Commerce Advanced. Upgrade today and change plans at any time, no questions asked."),upgradeDescription:p("This premium feature is included in Commerce Basic and Commerce Advanced. Upgrade today and change plans at any time, no questions asked."),trialUpgradeDescription:p("This premium feature is included in Commerce Basic and Commerce Advanced. Upgrade today and change plans at any time, no questions asked.")}),(0,r.default)(u,v.COMMERCE_RESTOCK_NOTIFICATIONS,{trialUpgradeTitle:p("Upgrade to Keep Using this Feature After Your Trial"),upgradeTitle:p("Upgrade to Use this Feature"),description:p("This premium feature is included in Commerce Basic and Commerce Advanced. Upgrade today and change plans at any time, no questions asked."),upgradeDescription:p("This premium feature is included in Commerce Basic and Commerce Advanced. Upgrade today and change plans at any time, no questions asked."),trialUpgradeDescription:p("This premium feature is included in Commerce Basic and Commerce Advanced. Upgrade today and change plans at any time, no questions asked.")}),(0,r.default)(u,v.COMMERCE_RELATED_PRODUCTS,{trialUpgradeTitle:p("Upgrade to Keep Using this Feature After Your Trial"),upgradeTitle:p("Upgrade to Use this Feature"),description:p("This premium feature is included in Commerce Basic and Commerce Advanced. Upgrade today and change plans at any time, no questions asked."),upgradeDescription:p("This premium feature is included in Commerce Basic and Commerce Advanced. Upgrade today and change plans at any time, no questions asked."),trialUpgradeDescription:p("This premium feature is included in Commerce Basic and Commerce Advanced. Upgrade today and change plans at any time, no questions asked.")}),(0,r.default)(u,v.COMMERCE_POINT_OF_SALE,{trialUpgradeTitle:p("Available on Commerce plans"),upgradeTitle:p("Upgrade to Use this Feature"),description:p("This premium feature is included in Commerce Basic and Commerce Advanced. Upgrade today and change plans at any time, no questions asked."),upgradeDescription:p("This premium feature is included in Commerce Basic and Commerce Advanced. Upgrade today and change plans at any time, no questions asked."),trialUpgradeDescription:p("Upgrade to keep using this feature after your trial. This premium feature is included in Commerce Basic and Commerce Advanced. Upgrade today and change plan at any time, no questions asked.")}),u);var A=(0,r.default)({},c.default.MEMBER_AREAS,{upgradeDescription:p("To use these features, add Member Areas for an additional cost."),trialUpgradeDescription:p("To continue using these features after your trial, subscribe to a website plan and add Member Areas for an additional cost.")});var T=function(){function e(){(0,s.default)(this,e);this.bindActions(m);this.exportPublicMethods({getUpsellCopy:this.getUpsellCopy,getUpsellCopyForAddOnSubscription:this.getUpsellCopyForAddOnSubscription,getCommerceDefaultTrial:this.getCommerceDefaultTrial,getCommerceOrMemberAreasUpsell:this.getCommerceOrMemberAreasUpsell})}(0,n.default)(e,[{key:"onBootstrap",value:function e(t){this.waitFor(f.dispatchToken)}},{key:"getUpsellCopy",value:function e(t){var a=g(w,[t],{});var i={};i.learnMoreLabel=g(a,"learnMoreLabel",b.learnMoreLabel);i.premiumFeatureLabel=g(a,"premiumFeatureLabel",b.premiumFeatureLabel);i.description=g(a,"description",b.description);if(f.isTrial()){i.upgradeDescription=g(a,"trialUpgradeDescription",b.trialUpgradeDescription);i.upgradeTitle=g(a,"trialUpgradeTitle",b.trialUpgradeTitle);i.upgradeCta=g(a,"trialUpgradeCta",b.trialUpgradeCta);i.confirmDescription=g(a,"trialConfirmDescription",b.trialConfirmDescription);i.confirmTitle=g(a,"trialConfirmTitle",b.trialConfirmTitle)}else{i.upgradeDescription=g(a,"upgradeDescription",b.upgradeDescription);i.upgradeTitle=g(a,"upgradeTitle",b.upgradeTitle);i.upgradeCta=g(a,"upgradeCta",b.upgradeCta);i.confirmDescription=g(a,"confirmDescription",b.confirmDescription);i.confirmTitle=g(a,"confirmTitle",b.confirmTitle)}return i}},{key:"getUpsellCopyForAddOnSubscription",value:function e(t){var a=g(A,[t],{});var i={learnMoreLabel:b.learnMoreLabel,premiumFeatureLabel:b.premiumFeatureLabel,description:b.addOnDescription};if(f.isTrial()){i.upgradeDescription=g(a,"trialUpgradeDescription",b.addOnTrialUpgradeTitle);i.upgradeTitle=g(a,"trialUpgradeTitle",b.addOnUpgradeTitle);i.upgradeCta=g(a,"trialUpgradeCta",b.addOnTrialUpgradeCta)}else{i.upgradeDescription=g(a,"upgradeDescription",b.addOnUpgradeTitle);i.upgradeTitle=g(a,"upgradeTitle",b.addOnUpgradeTitle);i.upgradeCta=g(a,"upgradeCta",b.addOnUpgradeCta)}return i}},{key:"getCommerceDefaultTrial",value:function e(){return C}},{key:"getCommerceOrMemberAreasUpsell",value:function e(){var t=this.getUpsellCopy(v.COMMERCE);if(S){t.description=p("Available with Business and Commerce plans, or Member Areas add-on.");var a=p("Subscribe to Business, Commerce, or the Member Areas add-on to continue using this feature after your trial.");t.trialUpgradeDescription=a;f.isTrial()&&(t.upgradeDescription=a)}return t}}]);return e}();e.exports=h.createStore(T,"FeatureGateStore")},"./src/main/webapp/universal/src/apps/App/shared/stores/FeatureGateStore/index.js":function(e,t,a){"use strict";e.exports=a("./src/main/webapp/universal/src/apps/App/shared/stores/FeatureGateStore/FeatureGateStore.js")},"./src/main/webapp/universal/src/apps/App/shared/stores/PageCollectionDataStore.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var o=a("./src/main/webapp/universal/src/shared/dispatchers/alt/index.ts");var l=a("./common/temp/node_modules/lodash/isString.js");var p=a("./src/main/webapp/universal/src/apps/App/shared/stores/WebsiteSettingsStore/index.js");var c=a("./src/main/webapp/universal/src/apps/App/shared/actions/PageCollectionDataActions.js");var h=a("./src/main/webapp/universal/src/shared/utils/LayoutEngine/LayoutJSONCreator.js");var u=function(){function e(){(0,s.default)(this,e);this.bindListeners({onUpdate:[c.LOAD,c.SAVE,c.CREATE]});this.exportPublicMethods({getPageCollectionData:this.getPageCollectionData,getPageCollectionDataList:this.getPageCollectionDataList,savePageCollectionData:this.savePageCollectionData,resetPageCollectionData:this.resetPageCollectionData,createPageCollectionData:this.createPageCollectionData})}(0,r.default)(e,[{key:"getDefaultData",value:function e(){return{layout:h.EmptyLayout(12)}}},{key:"onUpdate",value:function e(t){var a=t.id,i=t.collectionId,s=t.data;s=s||this.getDefaultData();this.setState((0,n.default)({},i,{id:a,data:s}))}},{key:"getPageCollectionData",value:function e(t){var a=this;var i=l(t)?t:t.collectionId;var s=this.getState()[i];if(s)return Promise.resolve(s);return c.load(i).then(function(){return a.getState()[i]})}},{key:"getPageCollectionDataList",value:function e(t){return Promise.all(t.map(this.getPageCollectionData.bind(this)))}},{key:"savePageCollectionData",value:function e(t,a){var i=this;var s=this.getState()[t].id;return c.save(s,t,Object.assign({},a,{data:Object.assign({},a.data,{updatedOn:a.data.updatedOn||this.getState()[t].data.updatedOn})})).then(function(){return i.getState()[t]})}},{key:"resetPageCollectionData",value:function e(t){var a=this;var i=p.getState().markdownMode;var s=h.Layout,n=h.Row,r=h.Column,o=h.HTMLBlock,l=h.MarkdownBlock;var c=i?l(" ","<p> </p>"):o("<p> </p>");var u={layout:s(n(r(12,c)))};var d=this.getState()[t];if(!d)return this.getPageCollectionData(t).then(function(){return a.savePageCollectionData(t,{data:u})});return this.savePageCollectionData(t,{data:u})}},{key:"createPageCollectionData",value:function e(t,a){var i=this;return c.create(t,a).then(function(){return i.getState()[t]})}}]);return e}();e.exports=o.createStore(u,"PageCollectionDataStore")},"./src/main/webapp/universal/src/apps/App/shared/utils/BlockEditorUtils.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.isBlockEditorEnabled=t.isBlockEditorV1Enabled=t.isBlockEditorV2Enabled=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var n=i(a("./src/main/webapp/frontend/packages/enums/Flag.js"));var r=i(a("./common/temp/node_modules/@sqs/block-editor-schemas/dist/cjs/index.js"));var o=i(a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts"));var l=a("./src/main/webapp/universal/src/apps/App/utils/mobileWebFlags.js");function c(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?c(Object(a),true).forEach(function(e){(0,s.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var d=["image","button","video","summary_v2","map"];var p=["newsletter","form"];var h=["social_account_links_v2","quote","menu","code"];var g=function e(t,a){return t.reduce(function(e,t){return u({},e,(0,s.default)({},t,a))},{})};var m=u({},g(d,n.default.BLOCK_EDITORS_P0),{},g(p,n.default.BLOCK_EDITORS_P1),{},g(h,n.default.BLOCK_EDITORS_P2));var f=function e(t){if(!t)return false;var a=t.toLowerCase();return!!(m[a]&&o.default.isFeatureEnabled(m[a])&&r.default.blocks[a])};t.isBlockEditorV2Enabled=f;var v=function e(){return(0,l.isMobileContentEditingEnabled)()||o.default.isFeatureEnabled(n.default.ROSETTA_BLOCK_EDITORS)};t.isBlockEditorV1Enabled=v;var b=function e(t){return v()||f(t)};t.isBlockEditorEnabled=b},"./src/main/webapp/universal/src/apps/App/shared/utils/CollectionUtils.ts":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.getTypeNameById=n;var s=i(a("./src/main/webapp/universal/src/apps/App/shared/stores/ContentCollectionStore.js"));function n(e){if(!e)return null;var t=s.default.getState();var a=t.get(e);return a?a.get("typeName"):null}},"./src/main/webapp/universal/src/apps/App/shared/utils/CoverPageSummaryAPI.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./src/main/webapp/universal/src/shared/utils/network.js"));var n={read:function e(t){return s.default.get("/api/content-collections/".concat(t,"/slide-summary"))}};var r=n;t.default=r;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/shared/utils/LockScreenSummaryAPI.js":function(e,t,a){"use strict";var i=a("./src/main/webapp/universal/src/shared/utils/sqsAxios.ts");var s={readLockScreenSummary:function e(){return i.get("/api/lock-screen/slide-summary")}};e.exports=s},"./src/main/webapp/universal/src/apps/App/shared/utils/PageCollectionDataAPI.js":function(e,t,a){"use strict";var r=a("./src/main/webapp/universal/src/shared/utils/network.js");var o="/api/page-collection-data";var i={loadPageCollectionData:function e(t){return r.get("".concat(o,"/").concat(t))},updatePageCollectionData:function e(t,a){var i=a.id,s=a.websiteId,n=a.data;return r.put("".concat(o,"/").concat(t),{id:i,collectionId:t,websiteId:s,data:n})},createPageCollectionData:function e(t,a){var i=a.websiteId,s=a.data;return r.post("".concat(o,"/").concat(t),{collectionId:t,websiteId:i,data:s})}};e.exports=i},"./src/main/webapp/universal/src/apps/App/shared/utils/PopupOverlaySummaryAPI.js":function(e,t,a){"use strict";var i=a("./src/main/webapp/universal/src/shared/utils/sqsAxios.ts");var s={read:function e(){return i.get("/api/popup-overlay/slide-summary")}};e.exports=s},"./src/main/webapp/universal/src/apps/App/shared/utils/SectionDomUtils.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.isEditingUiEl=g;t.getStyles=m;t.getThemeDataBySectionEl=f;t.getThemeOverride=v;t.getSectionIdByEl=b;t.getNextSectionEl=S;t.getClosestSectionEl=y;t.isOverlayNavOpen=_;t.getCurrentSectionPosition=C;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/toConsumableArray.js"));var n=i(a("./common/temp/node_modules/lodash/isEmpty.js"));var r=i(a("./src/main/webapp/frontend/packages/enums/Flag.js"));var o=a("./src/main/webapp/universal/src/apps/App/shared/constants/SectionConstants.ts");var l=i(a("./src/main/webapp/universal/src/shared/stores/TweakStore.js"));var c=a("./src/main/webapp/universal/src/apps/App/shared/redux/CmsStoreProvider.js");var u=a("./src/main/webapp/universal/src/apps/App/shared/redux/selectors/siteStylesSelectors.js");var d=a("./src/main/webapp/universal/src/apps/App/shared/utils/selectors.js");var p=i(a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts"));var h=[o.ADD_SECTION_BUTTON_HIT_BOX_CLASSNAME,o.SECTION_CONTROL_BUTTON_WRAPPER_CLASSNAME,"sqs-layout-insert-point"];function g(e){if(!e||!e.className)return false;var t=(0,s.default)(e.classList);var a=t.some(function(e){return h.includes(e)});return a}function m(e){return e?JSON.parse(e.getAttribute("data-current-styles")):{}}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;var a=v(e,t);if((0,n.default)(a)){var i=p.default.isFeatureEnabled(r.default.SEVEN_ONE_CONTEXTUAL_STYLE_EDITING_V1)?(0,u.getActiveThemeId)(c.cmsStore.getState()):(0,d.getActiveThemeId)(l.default.getState());return{themeId:i,isDefault:true}}return{themeId:a}}function v(e,t){var a=m(e);if(t&&a)return a[t];return(null===a||void 0===a?void 0:a.sectionTheme)||""}function b(e){return(e?e.getAttribute(o.SECTION_ID_ATTR):"")||""}function S(e){if(!e)return null;var t=e.nextElementSibling;return t&&b(t)?t:null}function y(e){if(!e)return null;return b(e)?e:e.closest(o.SECTION_SELECTOR)||e.closest(o.HEADER_SECTION_SELECTOR)||null}function _(e){var t;return null===(t=e.ownerDocument)||void 0===t?void 0:t.body.classList.contains("header--menu-open")}function C(e,t){if(!t||!e)return;var a=b(t);return e.findIndex(function(e){var t=e.id;return t===a})}},"./src/main/webapp/universal/src/apps/App/shared/utils/SlideAPI.js":function(e,t,a){"use strict";var i=a("./src/main/webapp/universal/src/shared/utils/network.js");var s={update:function e(t){return i.put("/api/slides/".concat(t.id),t)},upsertSlices:function e(t){var a=t[0].slideId;return i.put("/api/slides/".concat(a,"/slices"),{slices:t})},renderPreview:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return i.get("/api/slides/preview",{params:{slideId:t,layoutId:a}})}};e.exports=s},"./src/main/webapp/universal/src/apps/App/shared/utils/SlideLayoutAPI.js":function(e,t,a){"use strict";var i=a("./src/main/webapp/universal/src/shared/utils/sqsAxios.ts");var s={readAllForType:function e(t){return i.get("/api/slide-layouts",{params:{slideTypes:t}})}};e.exports=s},"./src/main/webapp/universal/src/apps/App/shared/utils/contentItemStringUtils.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.getValueFnByKey=u;t.default=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var n;var r=a("./src/main/webapp/universal/src/shared/i18n/index.ts"),o=r.t;var l=(n={Default:{url:o("{presentationName} URL"),whileSquarespaceGeneratesUrLsForYourSAutomaticallyYouCanOptionallyCreateACustomUrlForThisAbove:o("While Squarespace generates URLs for your {presentationName|lower}s automatically, you can optionally create a custom URL for this {presentationName|lower} above."),sourceUrLsAreOftenDisplayedBelowToProvideAttributionOrFurtherReading:o("Source URLs are often displayed below {presentationName|lower|withIndefiniteArticle}, to provide attribution or further reading."),enterTitle:o("Enter {presentationName|lower|withIndefiniteArticle} title…"),featured:o("Featured {presentationName}"),someTemplatesAndBlocksWillHighlightFlaggedAsFeatured:o("Some templates and blocks will highlight {presentationName|lower|withIndefiniteArticle} flagged as featured."),titleShouldLinkToSourceUrl:o("{presentationName} Title should link to Source URL"),commentsAreAllowedOnThis:o("Comments are allowed on this {presentationName|lower}."),publishThisNow:o("Publish this {presentationName|lower} now."),publishThisInTheFuture:o("Publish this {presentationName|lower} in the future."),markThisForReview:o("Mark this {presentationName|lower} for review."),willBeAddedToReviewQueue:o("{presentationName} will be added to review queue."),saveThisForLaterEditing:o("Save this {presentationName|lower} for later editing."),thisWillNotBeVisible:o("This {presentationName|lower} will not be visible."),enterName:o("Enter {presentationName|lower|withIndefiniteArticle} name…")}},(0,s.default)(n,o("Text"),{url:o("Text URL"),whileSquarespaceGeneratesUrLsForYourSAutomaticallyYouCanOptionallyCreateACustomUrlForThisAbove:o("While Squarespace generates URLs for your texts automatically, you can optionally create a custom URL for this text above."),sourceUrLsAreOftenDisplayedBelowToProvideAttributionOrFurtherReading:o("Source URLs are often displayed below a text, to provide attribution or further reading."),enterTitle:o("Enter a text title…"),featured:o("Featured Text"),someTemplatesAndBlocksWillHighlightFlaggedAsFeatured:o("Some templates and blocks will highlight a text flagged as featured."),titleShouldLinkToSourceUrl:o("Text Title should link to Source URL"),commentsAreAllowedOnThis:o("Comments are allowed on this text."),publishThisNow:o("Publish this text now."),publishThisInTheFuture:o("Publish this text in the future."),markThisForReview:o("Mark this text for review."),willBeAddedToReviewQueue:o("Text will be added to review queue."),saveThisForLaterEditing:o("Save this text for later editing."),thisWillNotBeVisible:o("This text will not be visible."),enterName:o("Enter a text name…")}),(0,s.default)(n,o("Image"),{url:o("Image URL"),whileSquarespaceGeneratesUrLsForYourSAutomaticallyYouCanOptionallyCreateACustomUrlForThisAbove:o("While Squarespace generates URLs for your images automatically, you can optionally create a custom URL for this image above."),sourceUrLsAreOftenDisplayedBelowToProvideAttributionOrFurtherReading:o("Source URLs are often displayed below an image, to provide attribution or further reading."),enterTitle:o("Enter an image title…"),featured:o("Featured Image"),someTemplatesAndBlocksWillHighlightFlaggedAsFeatured:o("Some templates and blocks will highlight an image flagged as featured."),titleShouldLinkToSourceUrl:o("Image Title should link to Source URL"),commentsAreAllowedOnThis:o("Comments are allowed on this image."),publishThisNow:o("Publish this image now."),publishThisInTheFuture:o("Publish this image in the future."),markThisForReview:o("Mark this image for review."),willBeAddedToReviewQueue:o("Image will be added to review queue."),saveThisForLaterEditing:o("Save this image for later editing."),thisWillNotBeVisible:o("This image will not be visible."),enterName:o("Enter an image name…")}),(0,s.default)(n,o("Quote"),{url:o("Quote URL"),whileSquarespaceGeneratesUrLsForYourSAutomaticallyYouCanOptionallyCreateACustomUrlForThisAbove:o("While Squarespace generates URLs for your quotes automatically, you can optionally create a custom URL for this quote above."),sourceUrLsAreOftenDisplayedBelowToProvideAttributionOrFurtherReading:o("Source URLs are often displayed below a quote, to provide attribution or further reading."),enterTitle:o("Enter a quote title…"),featured:o("Featured Quote"),someTemplatesAndBlocksWillHighlightFlaggedAsFeatured:o("Some templates and blocks will highlight a quote flagged as featured."),titleShouldLinkToSourceUrl:o("Quote Title should link to Source URL"),commentsAreAllowedOnThis:o("Comments are allowed on this quote."),publishThisNow:o("Publish this quote now."),publishThisInTheFuture:o("Publish this quote in the future."),markThisForReview:o("Mark this quote for review."),willBeAddedToReviewQueue:o("Quote will be added to review queue."),saveThisForLaterEditing:o("Save this quote for later editing."),thisWillNotBeVisible:o("This quote will not be visible."),enterName:o("Enter a quote name…")}),(0,s.default)(n,o("Link"),{url:o("Link URL"),whileSquarespaceGeneratesUrLsForYourSAutomaticallyYouCanOptionallyCreateACustomUrlForThisAbove:o("While Squarespace generates URLs for your links automatically, you can optionally create a custom URL for this link above."),sourceUrLsAreOftenDisplayedBelowToProvideAttributionOrFurtherReading:o("Source URLs are often displayed below a link, to provide attribution or further reading."),enterTitle:o("Enter a link title…"),featured:o("Featured Link"),someTemplatesAndBlocksWillHighlightFlaggedAsFeatured:o("Some templates and blocks will highlight a link flagged as featured."),titleShouldLinkToSourceUrl:o("Link Title should link to Source URL"),commentsAreAllowedOnThis:o("Comments are allowed on this link."),publishThisNow:o("Publish this link now."),publishThisInTheFuture:o("Publish this link in the future."),markThisForReview:o("Mark this link for review."),willBeAddedToReviewQueue:o("Link will be added to review queue."),saveThisForLaterEditing:o("Save this link for later editing."),thisWillNotBeVisible:o("This link will not be visible."),enterName:o("Enter a link name…")}),(0,s.default)(n,o("Track"),{url:o("Track URL"),whileSquarespaceGeneratesUrLsForYourSAutomaticallyYouCanOptionallyCreateACustomUrlForThisAbove:o("While Squarespace generates URLs for your tracks automatically, you can optionally create a custom URL for this track above."),sourceUrLsAreOftenDisplayedBelowToProvideAttributionOrFurtherReading:o("Source URLs are often displayed below a track, to provide attribution or further reading."),enterTitle:o("Enter a track title…"),featured:o("Featured Track"),someTemplatesAndBlocksWillHighlightFlaggedAsFeatured:o("Some templates and blocks will highlight a track flagged as featured."),titleShouldLinkToSourceUrl:o("Track Title should link to Source URL"),commentsAreAllowedOnThis:o("Comments are allowed on this track."),publishThisNow:o("Publish this track now."),publishThisInTheFuture:o("Publish this track in the future."),markThisForReview:o("Mark this track for review."),willBeAddedToReviewQueue:o("Track will be added to review queue."),saveThisForLaterEditing:o("Save this track for later editing."),thisWillNotBeVisible:o("This track will not be visible."),enterName:o("Enter a track name…")}),(0,s.default)(n,o("Video"),{url:o("Video URL"),whileSquarespaceGeneratesUrLsForYourSAutomaticallyYouCanOptionallyCreateACustomUrlForThisAbove:o("While Squarespace generates URLs for your videos automatically, you can optionally create a custom URL for this video above."),sourceUrLsAreOftenDisplayedBelowToProvideAttributionOrFurtherReading:o("Source URLs are often displayed below a video, to provide attribution or further reading."),enterTitle:o("Enter a video title…"),featured:o("Featured Video"),someTemplatesAndBlocksWillHighlightFlaggedAsFeatured:o("Some templates and blocks will highlight a video flagged as featured."),titleShouldLinkToSourceUrl:o("Video Title should link to Source URL"),commentsAreAllowedOnThis:o("Comments are allowed on this video."),publishThisNow:o("Publish this video now."),publishThisInTheFuture:o("Publish this video in the future."),markThisForReview:o("Mark this video for review."),willBeAddedToReviewQueue:o("Video will be added to review queue."),saveThisForLaterEditing:o("Save this video for later editing."),thisWillNotBeVisible:o("This video will not be visible."),enterName:o("Enter a video name…")}),(0,s.default)(n,o("Event"),{url:o("Event URL"),whileSquarespaceGeneratesUrLsForYourSAutomaticallyYouCanOptionallyCreateACustomUrlForThisAbove:o("While Squarespace generates URLs for your events automatically, you can optionally create a custom URL for this event above."),sourceUrLsAreOftenDisplayedBelowToProvideAttributionOrFurtherReading:o("Source URLs are often displayed below an event, to provide attribution or further reading."),enterTitle:o("Enter an event title…"),featured:o("Featured Event"),someTemplatesAndBlocksWillHighlightFlaggedAsFeatured:o("Some templates and blocks will highlight an event flagged as featured."),titleShouldLinkToSourceUrl:o("Event Title should link to Source URL"),commentsAreAllowedOnThis:o("Comments are allowed on this event."),publishThisNow:o("Publish this event now."),publishThisInTheFuture:o("Publish this event in the future."),markThisForReview:o("Mark this event for review."),willBeAddedToReviewQueue:o("Event will be added to review queue."),saveThisForLaterEditing:o("Save this event for later editing."),thisWillNotBeVisible:o("This event will not be visible."),enterName:o("Enter an event name…")}),(0,s.default)(n,o("Gallery"),{url:o("Gallery URL"),whileSquarespaceGeneratesUrLsForYourSAutomaticallyYouCanOptionallyCreateACustomUrlForThisAbove:o("While Squarespace generates URLs for your gallerys automatically, you can optionally create a custom URL for this gallery above."),sourceUrLsAreOftenDisplayedBelowToProvideAttributionOrFurtherReading:o("Source URLs are often displayed below a gallery, to provide attribution or further reading."),enterTitle:o("Enter a gallery title…"),featured:o("Featured Gallery"),someTemplatesAndBlocksWillHighlightFlaggedAsFeatured:o("Some templates and blocks will highlight a gallery flagged as featured."),titleShouldLinkToSourceUrl:o("Gallery Title should link to Source URL"),commentsAreAllowedOnThis:o("Comments are allowed on this gallery."),publishThisNow:o("Publish this gallery now."),publishThisInTheFuture:o("Publish this gallery in the future."),markThisForReview:o("Mark this gallery for review."),willBeAddedToReviewQueue:o("Gallery will be added to review queue."),saveThisForLaterEditing:o("Save this gallery for later editing."),thisWillNotBeVisible:o("This gallery will not be visible."),enterName:o("Enter a gallery name…")}),(0,s.default)(n,o("KBArticle"),{url:o("KBArticle URL"),whileSquarespaceGeneratesUrLsForYourSAutomaticallyYouCanOptionallyCreateACustomUrlForThisAbove:o("While Squarespace generates URLs for your kbArticles automatically, you can optionally create a custom URL for this kbArticle above."),sourceUrLsAreOftenDisplayedBelowToProvideAttributionOrFurtherReading:o("Source URLs are often displayed below a kbArticle, to provide attribution or further reading."),enterTitle:o("Enter a kbArticle title…"),featured:o("Featured KBArticle"),someTemplatesAndBlocksWillHighlightFlaggedAsFeatured:o("Some templates and blocks will highlight a kbArticle flagged as featured."),titleShouldLinkToSourceUrl:o("KBArticle Title should link to Source URL"),commentsAreAllowedOnThis:o("Comments are allowed on this kbArticle."),publishThisNow:o("Publish this kbArticle now."),publishThisInTheFuture:o("Publish this kbArticle in the future."),markThisForReview:o("Mark this kbArticle for review."),willBeAddedToReviewQueue:o("KBArticle will be added to review queue."),saveThisForLaterEditing:o("Save this kbArticle for later editing."),thisWillNotBeVisible:o("This kbArticle will not be visible."),enterName:o("Enter a kbArticle name…")}),(0,s.default)(n,o("Digital Product"),{url:o("Digital Product URL"),whileSquarespaceGeneratesUrLsForYourSAutomaticallyYouCanOptionallyCreateACustomUrlForThisAbove:o("While Squarespace generates URLs for your digital products automatically, you can optionally create a custom URL for this digital product above."),sourceUrLsAreOftenDisplayedBelowToProvideAttributionOrFurtherReading:o("Source URLs are often displayed below a digital product, to provide attribution or further reading."),enterTitle:o("Enter a digital product title…"),featured:o("Featured Digital Product"),someTemplatesAndBlocksWillHighlightFlaggedAsFeatured:o("Some templates and blocks will highlight a digital product flagged as featured."),titleShouldLinkToSourceUrl:o("Digital Product Title should link to Source URL"),commentsAreAllowedOnThis:o("Comments are allowed on this digital product."),publishThisNow:o("Publish this digital product now."),publishThisInTheFuture:o("Publish this digital product in the future."),markThisForReview:o("Mark this digital product for review."),willBeAddedToReviewQueue:o("Digital Product will be added to review queue."),saveThisForLaterEditing:o("Save this digital product for later editing."),thisWillNotBeVisible:o("This digital product will not be visible."),enterName:o("Enter a digital product name…")}),(0,s.default)(n,o("Gift Card Product"),{url:o("Gift Card Product URL"),whileSquarespaceGeneratesUrLsForYourSAutomaticallyYouCanOptionallyCreateACustomUrlForThisAbove:o("While Squarespace generates URLs for your gift card products automatically, you can optionally create a custom URL for this gift card product above."),sourceUrLsAreOftenDisplayedBelowToProvideAttributionOrFurtherReading:o("Source URLs are often displayed below a gift card product, to provide attribution or further reading."),enterTitle:o("Enter a gift card product title…"),featured:o("Featured Gift Card Product"),someTemplatesAndBlocksWillHighlightFlaggedAsFeatured:o("Some templates and blocks will highlight a gift card product flagged as featured."),titleShouldLinkToSourceUrl:o("Gift Card Product Title should link to Source URL"),commentsAreAllowedOnThis:o("Comments are allowed on this gift card product."),publishThisNow:o("Publish this gift card product now."),publishThisInTheFuture:o("Publish this gift card product in the future."),markThisForReview:o("Mark this gift card product for review."),willBeAddedToReviewQueue:o("Gift Card Product will be added to review queue."),saveThisForLaterEditing:o("Save this gift card product for later editing."),thisWillNotBeVisible:o("This gift card product will not be visible."),enterName:o("Enter a gift card product name…")}),(0,s.default)(n,o("Physical Product"),{url:o("Physical Product URL"),whileSquarespaceGeneratesUrLsForYourSAutomaticallyYouCanOptionallyCreateACustomUrlForThisAbove:o("While Squarespace generates URLs for your physical products automatically, you can optionally create a custom URL for this physical product above."),sourceUrLsAreOftenDisplayedBelowToProvideAttributionOrFurtherReading:o("Source URLs are often displayed below a physical product, to provide attribution or further reading."),enterTitle:o("Enter a physical product title…"),featured:o("Featured Physical Product"),someTemplatesAndBlocksWillHighlightFlaggedAsFeatured:o("Some templates and blocks will highlight a physical product flagged as featured."),titleShouldLinkToSourceUrl:o("Physical Product Title should link to Source URL"),commentsAreAllowedOnThis:o("Comments are allowed on this physical product."),publishThisNow:o("Publish this physical product now."),publishThisInTheFuture:o("Publish this physical product in the future."),markThisForReview:o("Mark this physical product for review."),willBeAddedToReviewQueue:o("Physical Product will be added to review queue."),saveThisForLaterEditing:o("Save this physical product for later editing."),thisWillNotBeVisible:o("This physical product will not be visible."),enterName:o("Enter a physical product name…")}),(0,s.default)(n,o("Service Product"),{url:o("Service Product URL"),whileSquarespaceGeneratesUrLsForYourSAutomaticallyYouCanOptionallyCreateACustomUrlForThisAbove:o("While Squarespace generates URLs for your service products automatically, you can optionally create a custom URL for this service product above."),sourceUrLsAreOftenDisplayedBelowToProvideAttributionOrFurtherReading:o("Source URLs are often displayed below a service product, to provide attribution or further reading."),enterTitle:o("Enter a service product title…"),featured:o("Featured Service Product"),someTemplatesAndBlocksWillHighlightFlaggedAsFeatured:o("Some templates and blocks will highlight a service product flagged as featured."),titleShouldLinkToSourceUrl:o("Service Product Title should link to Source URL"),commentsAreAllowedOnThis:o("Comments are allowed on this service product."),publishThisNow:o("Publish this service product now."),publishThisInTheFuture:o("Publish this service product in the future."),markThisForReview:o("Mark this service product for review."),willBeAddedToReviewQueue:o("Service Product will be added to review queue."),saveThisForLaterEditing:o("Save this service product for later editing."),thisWillNotBeVisible:o("This service product will not be visible."),enterName:o("Enter a service product name…")}),(0,s.default)(n,o("Post"),{url:o("Post URL"),whileSquarespaceGeneratesUrLsForYourSAutomaticallyYouCanOptionallyCreateACustomUrlForThisAbove:o("While Squarespace generates URLs for your posts automatically, you can optionally create a custom URL for this post above."),sourceUrLsAreOftenDisplayedBelowToProvideAttributionOrFurtherReading:o("Source URLs are often displayed below a post, to provide attribution or further reading."),enterTitle:o("Enter a post title…"),featured:o("Featured Post"),someTemplatesAndBlocksWillHighlightFlaggedAsFeatured:o("Some templates and blocks will highlight a post flagged as featured."),titleShouldLinkToSourceUrl:o("Post Title should link to Source URL"),commentsAreAllowedOnThis:o("Comments are allowed on this post."),publishThisNow:o("Publish this post now."),publishThisInTheFuture:o("Publish this post in the future."),markThisForReview:o("Mark this post for review."),willBeAddedToReviewQueue:o("Post will be added to review queue."),saveThisForLaterEditing:o("Save this post for later editing."),thisWillNotBeVisible:o("This post will not be visible."),enterName:o("Enter a post name…")}),n);function c(a){return function(e){var t=l[e.presentationName];if(!t){false;t=l.Default}return t[a]}}function u(e){return{$valueFn:c(e)}}var d={getValueFnByKey:u};t.default=d},"./src/main/webapp/universal/src/apps/App/shared/utils/contentPreviewer/ContentInlineReplacer.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var r=i(a("./src/main/webapp/universal/src/apps/App/shared/utils/contentPreviewer/contentHtmlReplace.js"));var o=i(a("./src/main/webapp/universal/src/apps/App/shared/utils/contentPreviewer/getFullQuerySelector.js"));function l(a,e,i){var s=e.replacement,t=e.querySelectors;if(!t)throw"No query selectors provided!";t.forEach(function(e){var t=(0,o.default)(e);null===i.querySelector(t)?(0,r.default)({querySelector:e.parent,child:s?s[a]:null,hidden:null===s},i):(0,r.default)({querySelector:t,innerHtml:s?s[a]:null,hidden:null===s},i)})}var c={"html-block":l.bind(void 0,"text"),"button-block":l.bind(void 0,"buttonText"),"site-title":l.bind(void 0,"title"),page:l.bind(void 0,"description"),"no-component":l.bind(void 0,"siteTitle")};var u=function(){function e(){(0,s.default)(this,e)}(0,n.default)(e,null,[{key:"replace",value:function e(t,a){t.forEach(function(e){c[e.entityType](e,a.contentDocument)})}},{key:"canReplace",value:function e(t){var a=t.entityType,i=t.serverSide;return c.hasOwnProperty(a)&&!i}}]);return e}();t.default=u;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/shared/utils/contentPreviewer/ContentServerReplacer.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var r=i(a("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@sqs/network/lib/index.js"));var o=i(a("./src/main/webapp/universal/src/apps/App/shared/utils/contentPreviewer/contentHtmlReplace.js"));var l=i(a("./common/temp/node_modules/lodash/isNil.js"));var c=i(a("./src/main/webapp/universal/src/apps/App/shared/utils/contentPreviewer/FinalizeReplacements.js"));var u=i(a("./src/main/webapp/universal/src/apps/App/shared/utils/contentPreviewer/PreloadReplacements.js"));var d=i(a("./src/main/webapp/universal/src/apps/App/shared/utils/contentPreviewer/getFullQuerySelector.js"));var p=new Set(["reference-site-title"]);function h(e,t){return!e.innerHTML||!t.innerHTML}function g(e,s,n){var t=e.querySelectors;if(!t)throw"No query selectors provided!";t.forEach(function(e){var t=(0,d.default)(e);var a=n.querySelector(t);var i=null!==s.querySelector(t);if(!a)throw"Unable to find component in response document with query selector: ".concat(t);i?h(a,s.querySelector(t))?(0,o.default)({querySelector:t,outerHtml:a.outerHTML,hidden:false},s):(0,o.default)({querySelector:t,innerHtml:a.innerHTML,hidden:false},s):(0,o.default)({querySelector:e.parent,child:a,hidden:false},s)})}var m={"image-item":g,"no-component":g};function f(e,t){return r.default.post("/api/content-preview?path=".concat(t),e).then(function(e){var t=new DOMParser;return t.parseFromString(e.data,"text/html")})}var v=function(){function e(){(0,s.default)(this,e)}(0,n.default)(e,null,[{key:"replace",value:function e(t,a,i){var n=i.contentDocument,r=i.contentWindow;t.forEach(function(e){u.default.initialize(e,n)});return f(t,a).then(function(s){if(!s.body.innerHTML&&t.length)return Promise.reject(new Error("The response document is empty for the provided component replacements"));return Promise.all(t.map(function(e){var t=e.entityType,a=e.replacement,i=e.serverSide;if(!(0,l.default)(a)&&p.has(a.type)&&!i)return Promise.resolve();if(!(0,l.default)(m[t]))return u.default.finalize(e,n,s).then(function(){return m[t](e,n,s)});return Promise.reject(new Error("No replacement method for entity type ".concat(t)))})).then(function(){return c.default.finalize(t,r,n).then(function(){c.default.cleanup(n,s);u.default.cleanup(t,n)})})})}},{key:"canReplace",value:function e(t){var a=t.entityType,i=t.serverSide,s=t.replacement;return i||m.hasOwnProperty(a)&&!p.has(s.type)}}]);return e}();t.default=v;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/shared/utils/contentPreviewer/FinalizeReplacements.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/toConsumableArray.js"));var o=i(a("./common/temp/node_modules/@sqs/imageloader/dist/indexBuilder.js"));var l=i(a("./src/main/webapp/universal/src/apps/App/shared/utils/contentPreviewer/getFullQuerySelector.js"));var c=new Set(["image-item"]);var u=["has-site-title","has-logo-image"];var d=(new o.default.Builder).withPromises().build();function p(e,t,i){var a=e.reduce(function(a,e){c.has(e.entityType)&&e.querySelectors.forEach(function(e){var t=Array.from(i.querySelectorAll((0,l.default)(e)));a.push.apply(a,(0,r.default)(t))});return a},[]);if(!a.length)return Promise.resolve();t.dispatchEvent(new CustomEvent("controller:refresh"));return Promise.all(a.map(function(e){return d.loadAllAsync({},e.parentNode)}))}function h(t,a){u.forEach(function(e){a.body.classList.contains(e)?t.body.classList.add(e):t.body.classList.remove(e)})}var g=function(){function e(){(0,s.default)(this,e)}(0,n.default)(e,null,[{key:"finalize",value:function e(t,a,i){return p(t,a,i).then(function(){a.Squarespace.initializeLayoutBlocks(a.Y)})}},{key:"cleanup",value:function e(t,a){h(t,a)}}]);return e}();t.default=g;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/shared/utils/contentPreviewer/PreloadReplacements.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var r=i(a("./src/main/webapp/universal/src/apps/App/shared/utils/contentPreviewer/getFullQuerySelector.js"));var o="blur(20px)";function l(e){false}function c(a){return new Promise(function(e){var t=document.createElement("img");t.src=a;t.onload=e;t.onerror=e})}function u(){l("Could not select an image element to set a preload state on.")}function d(e,t,a){var i="[data-parallax-id='".concat(a,"'] > figure:last-of-type img");var s=t.querySelector(i);if(!s){u();return}e.preload.url&&(s.src=e.preload.url);s.style.filter=o}function p(e,t,a){if(!t||!a){u();return}if(e){t.style.backgroundImage="url(".concat(e,")");t.style.backgroundRepeat="no-repeat";t.style.backgroundPosition="50% 50%";t.style.backgroundSize="cover";a.src=""}t.style.filter=o;t.style.removeProperty("transition")}function h(i,s){i.querySelectors.forEach(function(e){var t=s.querySelector(e.parent);var a=s.querySelector((0,r.default)(e));if(t&&t.dataset.parallaxId){d(i,s,t.dataset.parallaxId);return}p(i.preload.url,t,a)})}var g={image:h};function m(e,t,a){if(!e.preload)return;return Promise.all(e.querySelectors.map(function(e){var t=a.querySelector((0,r.default)(e));if(t&&t.dataset&&t.dataset.src)return c(t.dataset.src);return Promise.resolve()}))}var f={image:m};function v(e,a){e.querySelectors.forEach(function(e){var t=a.querySelector(e.parent);if(t&&!t.dataset.parallaxId){t.style.transition="filter 0.25s ease";t.style.filter="blur(0)";t.style.removeProperty("background-image");t.style.removeProperty("background-repeat");t.style.removeProperty("background-position");t.style.removeProperty("background-size")}})}var b={image:v};var S=function(){function e(){(0,s.default)(this,e)}(0,n.default)(e,null,[{key:"initialize",value:function e(t,a){t.preload&&g[t.preload.type]&&g[t.preload.type](t,a)}},{key:"finalize",value:function e(t,a,i){if(t.preload&&f[t.preload.type])return f[t.preload.type](t,a,i);return Promise.resolve()}},{key:"cleanup",value:function e(t,a){t.forEach(function(e){e.preload&&b[e.preload.type]&&b[e.preload.type](e,a)})}}]);return e}();t.default=S;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/shared/utils/contentPreviewer/SerialPromiseQueue.ts":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var o=function(){function e(){(0,s.default)(this,e);(0,r.default)(this,"currentEnqueued",Promise.resolve())}(0,n.default)(e,[{key:"enqueue",value:function e(i){var s=this.currentEnqueued;this.currentEnqueued=new Promise(function(e,t){function a(){return i().then(e).catch(t)}s.then(a).catch(a)});return this.currentEnqueued}}]);return e}();var l=o;t.default=l;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/shared/utils/contentPreviewer/contentHtmlReplace.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=s;var l=i(a("./common/temp/node_modules/lodash/isNil.js"));function c(e,t){t?e.style.display="none":e.style.display.includes("none")&&(e.style.display="")}function u(e,t){e.outerHTML=t}function d(e,t){e.innerHTML=t}function p(e,t){e.appendChild(t)}function s(e,t){var a=e.querySelector,i=e.hidden,s=e.outerHtml,n=e.innerHtml,r=e.child;var o=t.querySelectorAll(a);if(0===o.length)throw"Unable to find any replacements with query selector: ".concat(a);(0,l.default)(i)||o.forEach(function(e){return c(e,i)});(0,l.default)(s)||o.forEach(function(e){return u(e,s)});(0,l.default)(r)||o.forEach(function(e){return p(e,r)});(0,l.default)(n)||o.forEach(function(e){return d(e,n)})}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/shared/utils/contentPreviewer/getFullQuerySelector.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=i;function i(e){var t=e.child,a=e.parent;return"".concat(a," ").concat(t)}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/shared/utils/contentPreviewer/index.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=l;var n=i(a("./src/main/webapp/universal/src/apps/App/shared/utils/contentPreviewer/ContentInlineReplacer.js"));var r=i(a("./src/main/webapp/universal/src/apps/App/shared/utils/contentPreviewer/ContentServerReplacer.js"));var s=i(a("./src/main/webapp/universal/src/apps/App/shared/utils/contentPreviewer/SerialPromiseQueue.ts"));var o=new s.default;function l(e,t,a){var i=[];var s=[];e.forEach(function(e){r.default.canReplace(e)?i.push(e):n.default.canReplace(e)&&s.push(e)});if(i.length>0)return o.enqueue(function(){return r.default.replace(i,t,a).then(function(){return n.default.replace(s,a)})});return o.enqueue(function(){return Promise.resolve().then(function(){return n.default.replace(s,a)})})}false;e.exports=t.default},"./src/main/webapp/universal/src/apps/App/shared/utils/hooks/useEventListener.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=s;var d=i(a("./common/temp/node_modules/@babel/runtime/helpers/toConsumableArray.js"));var p=i(a("./common/temp/node_modules/lodash/isUndefined.js"));var h=a("./common/temp/node_modules/react/index.js");function s(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=a.deps,s=void 0===i?[]:i,n=a.element,r=void 0===n?document.body:n,o=a.useCapture,l=a.passive;var c=(0,h.useRef)();(0,h.useEffect)(function(){c.current=e},[e]);var u;if(!(0,p.default)(o)){u=u||{};u.capture=o}if(!(0,p.default)(l)){u=u||{};u.passive=l}(0,h.useEffect)(function(){var e=function e(t){return c.current(t)};setTimeout(function(){return r.addEventListener(t,e,u)});return function(){r.removeEventListener(t,e,u)}},[t,r].concat((0,d.default)(s)))}e.exports=t.default},"./src/main/webapp/universal/src/apps/App/shared/utils/isImageAndTextSection.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./src/main/webapp/universal/src/apps/App/shared/constants/SectionTypes.js"));function n(e){return e.sectionName===s.default.IMAGE_AND_TEXT}var r=n;t.default=r;e.exports=t.default},"./src/main/webapp/universal/src/apps/CommentsGuestLogin/index.jsx":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/extends.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var c=i(a("./common/temp/node_modules/@babel/runtime/helpers/assertThisInitialized.js"));var u=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var d=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var p=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var h=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));function g(s){var n=m();return function e(){var t=(0,p.default)(s),a;if(n){var i=(0,p.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,d.default)(this,a)}}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var s=a("./common/temp/node_modules/prop-types/index.js");var f=a("./common/temp/node_modules/react/index.js");var n=a("./common/temp/node_modules/@sqs/fields/lib/index.js"),v=n.Input;var b=a("./src/main/webapp/universal/src/shared/i18n/index.ts"),S=b.t;var y=a("./src/main/webapp/universal/src/shared/styles/sentinel.less");var _=function(e){(0,u.default)(n,e);var s=g(n);function n(){var i;(0,o.default)(this,n);for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];i=s.call.apply(s,[this].concat(t));(0,h.default)((0,c.default)(i),"state",{authorUrl:"",displayName:"",email:"",errors:{}});(0,h.default)((0,c.default)(i),"handleSubmit",function(){""===i.state.displayName?i.setState({errors:{displayName:true}}):i.props.onSubmit(i.state)});(0,h.default)((0,c.default)(i),"bindField",function(a){return{value:i.state[a],hasErrors:i.state.errors[a],onKeyDown:function e(t){"Enter"===t.key&&i.handleSubmit()},onChange:function e(t){i.setState((0,h.default)({},a,t))}}});return i}(0,l.default)(n,[{key:"render",value:function e(){var t=""===this.state.displayName;var a=window.navigator.userAgent.toLowerCase();var i=a.indexOf("safari/")>-1||a.indexOf("chrome/")>-1;return f.createElement("div",null,f.createElement("div",{className:y.overlay}),f.createElement("div",{className:y.close,onClick:this.props.onClose}),f.createElement("i",{className:y.desktopLogo}),f.createElement("header",{className:y.mobileHeader},f.createElement("i",{className:y.mobileLogo}),f.createElement("h1",{className:y.title},S("Post a Comment"))),f.createElement("div",{className:y.container},f.createElement("header",{className:y.desktopHeader},f.createElement("h1",{className:y.title},S("Post a Comment"))),f.createElement(v,(0,r.default)({theme:"midnight",placeholder:S("Name")},this.bindField("displayName"))),f.createElement(v,(0,r.default)({theme:"midnight",placeholder:S("Email Address")},this.bindField("email"))),f.createElement(v,(0,r.default)({theme:"midnight",placeholder:S("Website URL")},this.bindField("authorUrl"))),f.createElement("button",{disabled:t,className:y.button,onClick:this.handleSubmit},S("Comment as Guest")),!i&&f.createElement("div",{className:y.link},f.createElement("a",{className:y.anchor,onClick:this.props.onLoginClick},S("Log in to Comment")))))}}]);return n}(f.Component);(0,h.default)(_,"propTypes",{onSubmit:s.func,onLoginClick:s.func,onClose:s.func});e.exports=_},"./src/main/webapp/universal/src/apps/Commerce/CartPage/loadCartBundle.ts":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i=function e(i,s){return new Promise(function(e,t){var a=s.document.createElement("script");a.setAttribute("type","text/javascript");a.setAttribute("src",i);a.addEventListener("load",e);s.document.head?s.document.head.appendChild(a):t()})};t.default=i;e.exports=t.default},"./src/main/webapp/universal/src/apps/Commerce/ProductPage/WaitLists/ProductWaitListForm.ts":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var o=a("./src/main/webapp/universal/src/shared/i18n/index.ts");var l=a("./common/temp/node_modules/validator/validator.js");var c=a("./src/main/webapp/universal/src/shared/utils/commerce/api/RestockNotificationApi.ts");var u=a("./src/main/webapp/universal/src/shared/utils/GoogleReCaptchaCheckbox.ts");var n=function e(t){var n=this;(0,s.default)(this,e);(0,r.default)(this,"el",void 0);(0,r.default)(this,"form",void 0);(0,r.default)(this,"productId",void 0);(0,r.default)(this,"variantId",void 0);(0,r.default)(this,"errorNode",void 0);(0,r.default)(this,"captcha",void 0);(0,r.default)(this,"handleSubmitRestockNotification",function(e){e.preventDefault();var t=n.form.querySelector('[name="email"]');var a=t.value;var i=n.el.querySelector('[name="isJoinMailingList"]');n.clearError();if(a)if((0,l.isEmail)(a)){var s={isJoinMailingList:i&&i.checked,productId:n.productId,siteVisitorEmail:a,variantId:n.variantId};n.captcha&&n.captcha.isRendered()?n.signUpForRestockNotificationWithReCaptcha(s):n.invokeSignUpForRestockNotification(s)}else n.showError((0,o.t)("Email is invalid"));else n.showError((0,o.t)("Email cannot be blank"))});(0,r.default)(this,"signUpForRestockNotificationWithReCaptcha",function(e){var t=n.captcha.getCaptchaToken();if(!t){n.showError((0,o.t)("Complete CAPTCHA before submitting."));return}e.captchaToken=t;n.invokeSignUpForRestockNotification(e)});(0,r.default)(this,"invokeSignUpForRestockNotification",function(e){(0,c.signUpForRestockNotification)(e).then(function(){n.showSuccessMessage();if(n.captcha){n.captcha.destroy();n.captcha=null}}).catch(function(e){n.showError(e.data.message);n.captcha&&n.captcha.reset()})});(0,r.default)(this,"showSuccessMessage",function(){var e=(0,o.t)("Signed up!");var t=window.Static.SQUARESPACE_CONTEXT.websiteSettings.storeSettings.merchandisingSettings.restockNotificationsSuccessText;var a=document.createElement("span");a.classList.add("product-restock-success-message");a.innerText=t||e;Array.from(n.el.children).forEach(function(e){e.classList.contains("product-restock-cta")||n.el.removeChild(e)});n.el.appendChild(a)});(0,r.default)(this,"showError",function(e){if(!n.errorNode){n.errorNode=document.createElement("span");n.errorNode.classList.add("product-restock-error-message");n.el.appendChild(n.errorNode)}n.errorNode.innerText=e});(0,r.default)(this,"clearError",function(){if(!n.errorNode)return;n.errorNode.innerText=""});this.el=t;this.form=t.querySelector("form");this.productId=t.getAttribute("data-product-id");this.variantId=t.getAttribute("data-variant-id");this.form.addEventListener("submit",this.handleSubmitRestockNotification);this.captcha=(0,u.initializeCaptcha)(this.el)};t.default=n;e.exports=t.default},"./src/main/webapp/universal/src/apps/Commerce/ProductPage/WaitLists/productWaitLists.ts":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./src/main/webapp/universal/src/apps/Commerce/ProductPage/WaitLists/ProductWaitListForm.ts"));var n="product-restock-notification";var r=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;var a=Array.from(t.getElementsByClassName(n));a.forEach(function(e){return new s.default(e)})};t.default=r;e.exports=t.default},"./src/main/webapp/universal/src/apps/Commerce/shared/components/TemplateCart.ts":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var r=a("./src/main/webapp/universal/src/shared/constants/commerce/CommerceSelectors.ts");var l=a("./src/main/webapp/universal/src/shared/i18n/index.ts");var c=100;var u=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t>c?"".concat(c,"+"):t.toString()};var d=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(t>c)return(0,l.pluralize)({one:"More than one item in cart",other:"More than {%n} items in cart"},c,void 0);return(0,l.pluralize)({one:"One item in cart",other:"{%n} items in cart"},t,void 0)};var p=function(){(0,n.default)(r,null,[{key:"syncAll",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.instances.forEach(function(e){return e.sync(t)})}},{key:"mountAll",value:function e(){var t=Array.from(document.getElementsByClassName(r.CONTAINER_CLASSNAME));for(var a=0,i=t;a<i.length;a++){var s=i[a];r.instances.push(new r(s))}}},{key:"unmountAll",value:function e(){r.instances=[]}}]);function r(e){(0,s.default)(this,r);(0,o.default)(this,"initialized",false);(0,o.default)(this,"containerEl",null);(0,o.default)(this,"quantityEl",null);(0,o.default)(this,"subtotalEl",null);this.containerEl=e;this.containerEl.classList.add(r.CLASSNAME);this.containerEl.setAttribute("data-test","continue-to-cart");this.quantityEl=e.getElementsByClassName(r.QUANTITY_CLASSNAME)[0];this.subtotalEl=e.getElementsByClassName(r.SUBTOTAL_CLASSNAME)[0]}(0,n.default)(r,[{key:"sync",value:function e(t){var a=t.items,i=void 0===a?0:a,s=t.subtotal,n=void 0===s?"":s;if(!this.initialized&&this.containerEl){this.containerEl.classList.add(r.INITIALIZED_CLASS);this.initialized=true}if(this.containerEl)if(this.quantityEl){this.quantityEl.textContent=u(i);this.containerEl.setAttribute("aria-label",d(i))}else this.containerEl.setAttribute("aria-label",(0,l.t)("Cart",void 0));this.subtotalEl&&(this.subtotalEl.textContent=n)}}]);return r}();t.default=p;(0,o.default)(p,"CONTAINER_CLASSNAME",r.TEMPLATE_CART_CONTAINER_CLASS);(0,o.default)(p,"QUANTITY_CLASSNAME",r.TEMPLATE_CART_QUANTITY_CLASS);(0,o.default)(p,"SUBTOTAL_CLASSNAME",r.TEMPLATE_CART_SUBTOTAL_CLASS);(0,o.default)(p,"CLASSNAME",r.TEMPLATE_CART_CLASS);(0,o.default)(p,"INITIALIZED_CLASS",r.TEMPLATE_CART_INITIALIZED_CLASS);(0,o.default)(p,"instances",[]);e.exports=t.default},"./src/main/webapp/universal/src/apps/Commerce/shared/utils/isCartPage.ts":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i=a("./src/main/webapp/universal/src/shared/constants/commerce/CommerceSelectors.ts");var s=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return!!t.document.getElementById(i.FULL_PAGE_CART_ROOT_ID)};t.default=s;e.exports=t.default},"./src/main/webapp/universal/src/apps/ConfigWebsite/RteEditor.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var s=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=l;var E=s(a("./common/temp/node_modules/@babel/runtime/helpers/extends.js"));var w=s(a("./common/temp/node_modules/@babel/runtime/helpers/toConsumableArray.js"));var A=s(a("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));var n=s(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var T=s(a("./common/temp/node_modules/lodash/debounce.js"));var I=s(a("./common/temp/node_modules/lodash/isEqual.js"));var q=i(a("./common/temp/node_modules/react/index.js"));var k=i(a("./common/temp/node_modules/@sqs/rte-core/dist/index.js"));var L=a("./common/temp/node_modules/@sqs/core-components/build/lib/index.js");var D=a("./common/temp/node_modules/@sqs/rosetta-utilities/build/lib/index.js");var N=a("./common/temp/node_modules/@sqs/rosetta-tokens/build/lib/index.js");var r=a("./src/main/webapp/universal/src/shared/constants/TextEditor.js");var R=a("./src/main/webapp/universal/src/shared/i18n/index.ts");function o(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function O(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?o(Object(a),true).forEach(function(e){(0,n.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var P="data-sqsp-rte-active";var x=r.defaultSchemas.classic;var B=O({},r.defaultSchemas.plainText,{inline:true});function l(e){var i=e.node,s=e.onChange,t=e.storedValue,n=e.type;var r=(0,q.useRef)(null);var a=(0,q.useMemo)(function(){return k.EditorSchema.create("richtext"===n?x:B)},[n]);var o=(0,q.useState)(function(){return k.EditorState.fromHTML({schema:a,html:t||"",placeholder:(0,R.t)("Type here…")})}),l=(0,A.default)(o,2),c=l[0],u=l[1];var d=(0,q.useRef)(false);var p=(0,q.useRef)(false);var h=(0,q.useRef)(null);var g=(0,q.useRef)(t);(0,q.useEffect)(function(){if(!r.current)return;i.setAttribute(P,"");var a=(0,T.default)(function(e){if(null===h.current)return;p.current=false;var t="plaintext"===n?e.doc.textContent:h.current.getHTML();if((0,I.default)(g.current,t))return;s(t)},300);var e=function e(t){h.current.updateState(t);u(t);if(!d.current)return;p.current=true;a(t)};(0,w.default)(i.childNodes).forEach(function(e){e!==r.current&&i.removeChild(e)});h.current=new k.default({mountNode:r.current,state:c,nodeViews:c.nodeViews,onStateChange:e,handleDOMEvents:{mousedown:function e(t,a){return a.stopPropagation()},focus:function e(){return d.current=true},blur:function e(){return d.current=false}}});var t=i.getAttribute("tabindex");i.setAttribute("tabindex",-1);return function(){void 0!==t?i.setAttribute("tabindex",t):i.removeAttribute("tabindex");i.insertAdjacentHTML("beforeend",h.current.view.dom.innerHTML);h.current.destroy();h.current=null;i.removeAttribute(P)}},[i,s,n]);(0,q.useEffect)(function(){g.current=t;if(!h.current||p.current)return;h.current.setContent(t||"",{preserveSelection:true,preserveWhitespace:true})},[t]);var m=(0,k.getMenuState)(c);var f=!!("richtext"===n&&r.current&&m);var v="mobile"===(0,D.getBreakpoint)(N.breakpoints).platform;var b=v?L.RteMobileToolbar:L.RteFloatingToolbar;var S=function e(){var t;return(t=h.current).preventEditorBlur.apply(t,arguments)};var y=function e(){var t;return(t=h.current).execCommand.apply(t,arguments)};var _={editor:h.current,execCommand:y,preventEditorBlur:S,menuState:m};v?_.isVisible=d.current&&"range"===m.selectionType:_.anchorNode=r.current;var C={position:"relative"};d.current&&(C.outline="2px solid white");return q.default.createElement(D.ZIndexStack,null,function(e){return q.default.createElement(q.default.Fragment,null,q.default.createElement("div",{className:"rte",ref:r,style:O({},C,{zIndex:e})}),f?q.default.createElement(b,(0,E.default)({},_,{zIndex:e})):null)})}e.exports=t.default},"./src/main/webapp/universal/src/apps/ConfigWebsite/RteManager.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var s=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=_;var C=s(a("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));var n=s(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var r=s(a("./common/temp/node_modules/@babel/runtime/helpers/toConsumableArray.js"));var o=s(a("./common/temp/node_modules/lodash/differenceBy.js"));var l=s(a("./common/temp/node_modules/lodash/get.js"));var E=i(a("./common/temp/node_modules/react/index.js"));var w=a("./common/temp/node_modules/react-dom/index.js");var A=s(a("./src/main/webapp/universal/src/apps/App/shared/stores/PageSectionsStore.js"));var c=s(a("./src/main/webapp/universal/src/apps/App/shared/actions/PageSectionsActions.js"));var T=s(a("./src/main/webapp/universal/src/apps/ConfigWebsite/RteEditor.js"));var u=a("./common/temp/node_modules/@sqs/jsf-utils/lib/es/main.js");var d=a("./common/temp/node_modules/uuid/index.js");function I(t,e){var a;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=p(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var i=0;var s=function e(){};return{s:s,n:function e(){if(i>=t.length)return{done:true};return{done:false,value:t[i++]}},e:function e(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n=true,r=false,o;return{s:function e(){a=t[Symbol.iterator]()},n:function e(){var t=a.next();n=t.done;return t},e:function e(t){r=true;o=t},f:function e(){try{n||null==a.return||a.return()}finally{if(r)throw o}}}}function p(e,t){if(!e)return;if("string"===typeof e)return h(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return h(e,t)}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}function g(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function m(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?g(Object(a),true).forEach(function(e){(0,n.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var f=u.jsonPointerUtils.getJsonPointerValue;function v(e){var a=(0,l.default)(e,["ownerDocument","defaultView","sectionControllerInstance","getControllersByNode"]);if(!a)return[];var t=e.querySelectorAll("[data-controller]");return(0,r.default)(t).reduce(function(e,t){return e.concat(a(t))},[])}function b(e){var t=v(e);return t.filter(function(e){var t;return!!(null!==e&&void 0!==e&&null!==(t=e.methods)&&void 0!==t&&t.getRteConfigs)})}function S(e){var t=b(e);var s=e.dataset.sectionId;return t.reduce(function(e,t){var a=t.methods.getRteConfigs().map(function(e){var t=e.jsonPointer,a=e.node;var i="".concat(s,":").concat(t);a.dataset.sqspRteId||(a.dataset.sqspRteId=(0,d.v4)());return m({},e,{sectionId:s,mappingKey:i,rteId:a.dataset.sqspRteId})});return e.concat(a)},[])}function y(e){var t=e.sectionId,a=e.jsonPointer;return"".concat(t,":").concat(a)}function q(n,e){var r={};return e.reduce(function(e,t){var a=t.sectionId,i=t.mappingKey,s=t.jsonPointer;if(!e[i]){r[a]||(r[a]=n.find(function(e){var t=e.id;return t===a}));e[i]=f(r[a],s)}return e},{})}function k(e){return e.reduce(function(e,t){var a=t.sectionId;var i=y(t);e[i]||(e[i]=function(e){c.default.rteChange({sectionId:a,jsonPointer:t.jsonPointer,value:e})});return e},{})}function L(e){var t=[];var a=I(e),i;try{for(a.s();!(i=a.n()).done;){var s=i.value;t.push.apply(t,(0,r.default)(S(s)))}}catch(e){a.e(e)}finally{a.f()}return t}function D(e,t,a){var i=(0,o.default)(e,t,a);var s=(0,o.default)(t,e,a);return i.length>0||s.length>0}function _(e){var t=e.rootElement;var a=(0,E.useState)(function(){return new Set(t.querySelectorAll("section[data-section-id]"))}),i=(0,C.default)(a,2),s=i[0],n=i[1];var r=(0,E.useState)(function(){return L(s)}),o=(0,C.default)(r,2),l=o[0],c=o[1];var u=(0,E.useState)(function(){return A.default.getState().sections}),d=(0,C.default)(u,2),p=d[0],h=d[1];var g=(0,E.useState)(function(){return q(p,l)}),m=(0,C.default)(g,2),f=m[0],v=m[1];var b=(0,E.useState)(function(){return k(l)}),S=(0,C.default)(b,2),y=S[0],_=S[1];(0,E.useEffect)(function(){var e=new MutationObserver(function(g){n(function(e){var t=false;var a=new Set(e);var i=I(g),s;try{for(i.s();!(s=i.n()).done;){var n=s.value,r=n.addedNodes,o=n.removedNodes;0===r.length&&0===o.length||(t=true);var l=I(r),c;try{for(l.s();!(c=l.n()).done;){var u=c.value;"SECTION"===u.tagName&&u.hasAttribute("data-section-id")&&a.add(u)}}catch(e){l.e(e)}finally{l.f()}var d=I(o),p;try{for(d.s();!(p=d.n()).done;){var h=p.value;a.delete(h)}}catch(e){d.e(e)}finally{d.f()}}}catch(e){i.e(e)}finally{i.f()}return t?a:e})});e.observe(t,{childList:true});return function(){return e.disconnect()}},[t]);(0,E.useEffect)(function(){return A.default.listen(function(){var e=A.default.getState().sections;h(e)})},[]);(0,E.useEffect)(function(){c(function(e){var t=L(s);if(D(t,e,"rteId"))return t;return e})},[s]);(0,E.useEffect)(function(){v(function(e){var t=q(p,l);var a=Object.keys(t);var i=Object.keys(e);if(D(a,i))return t;var s=I(l),n;try{for(s.s();!(n=s.n()).done;){var r=n.value.mappingKey;if(t[r]!==e[r])return t}}catch(e){s.e(e)}finally{s.f()}return e})},[p,l]);(0,E.useEffect)(function(){_(function(e){var t=k(l);var a=new Set(Object.keys(t));var i=I(a),s;try{for(i.s();!(s=i.n()).done;){var n=s.value;n in e&&(t[n]=e[n])}}catch(e){i.e(e)}finally{i.f()}return t})},[l]);return l.map(function(e){var t=e.mappingKey,a=e.rteId,i=e.node,s=e.type;var n=f[t];var r=y[t];return E.default.createElement(E.Fragment,{key:a},(0,w.createPortal)(E.default.createElement(T.default,{node:i,onChange:r,storedValue:n,type:s}),e.node))})}e.exports=t.default},"./src/main/webapp/universal/src/apps/ParkingPage/screens/Upgrade/components/ReactivateSite/ReactivateSite.jsx":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/assertThisInitialized.js"));var c=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var u=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var d=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var p=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));function h(s){var n=g();return function e(){var t=(0,d.default)(s),a;if(n){var i=(0,d.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,u.default)(this,a)}}function g(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var s=a("./common/temp/node_modules/prop-types/index.js");var m=a("./common/temp/node_modules/react/index.js");var n=a("./common/temp/node_modules/@sqs/fields/lib/index.js"),f=n.Button;var v=a("./src/main/webapp/universal/src/shared/components/Confirmation.jsx");var b=a("./src/main/webapp/universal/src/shared/components/Alert.jsx");var S=a("./src/main/webapp/universal/src/apps/App/shared/components/BigSpinner/index.jsx");var y=a("./src/main/webapp/universal/src/apps/ParkingPage/screens/Upgrade/components/ReactivateSite/ReactivateSite.less");var _=a("./src/main/webapp/universal/src/apps/App/shared/actions/ProductLineTransitionActions.js");var C=a("./src/main/webapp/universal/src/shared/utils/analytics/trackInternal.ts");var E=a("./src/main/webapp/universal/src/shared/i18n/index.ts"),w=E.formatDateTime;var A=function(e){(0,c.default)(n,e);var s=h(n);function n(){var t;(0,r.default)(this,n);for(var e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];t=s.call.apply(s,[this].concat(a));(0,p.default)((0,l.default)(t),"state",{confirmationOpen:false,hasError:false,isUpdating:false});(0,p.default)((0,l.default)(t),"handleDismissError",function(){t.setState({hasError:false})});(0,p.default)((0,l.default)(t),"handleReactivateClick",function(){t.trackEvent("reactivate-site");t.setState({confirmationOpen:true})});(0,p.default)((0,l.default)(t),"handleConfirmReactivate",function(){var e="classic";t.trackEvent("reactivate-site-confirmation");t.setState({confirmationOpen:false,isUpdating:true});_.transition(e).then(t.handleReactivateSuccess,t.handleReactivateError)});(0,p.default)((0,l.default)(t),"handleReactivateSuccess",function(){window.location=window.location.origin+"/config"});(0,p.default)((0,l.default)(t),"handleReactivateError",function(){t.setState({confirmationOpen:false,hasError:true,isUpdating:false})});(0,p.default)((0,l.default)(t),"handleCancel",function(){t.setState({confirmationOpen:false})});(0,p.default)((0,l.default)(t),"trackEvent",function(e){C("interface_click",{identifier:e})});(0,p.default)((0,l.default)(t),"renderErrorModal",function(){var e=t.state.hasError;return m.createElement(b,{anchor:"window",isOpen:e,onDismiss:t.handleDismissError,title:""},"We were unable to reactivate your site. Please try again.")});(0,p.default)((0,l.default)(t),"renderReactivateConfirmation",function(){var e=t.state.confirmationOpen;return m.createElement(v,{anchor:"window",isOpen:e,onCancel:t.handleCancel,onConfirm:t.handleConfirmReactivate,title:"",confirmText:"Reactivate Site",cancelText:"Cancel"},"Your previous site and content will be reactivated. Enjoy a free 14 day trial and upgrade when you are ready.")});return t}(0,o.default)(n,[{key:"render",value:function e(){var t=this.props,a=t.createdOn,i=t.siteTitle;var s=this.state.isUpdating;var n=w(a);return m.createElement("div",{className:y.container},m.createElement("p",{className:y.reactivateTitle},"Reactivate Site"),m.createElement("p",{className:y.description},"Restore the contents of a previous site."),m.createElement("p",{className:y.createdOnTitle},i),m.createElement("p",{className:y.description},"Created ",n),m.createElement(f,{onClick:this.handleReactivateClick},"Reactivate Site"),this.renderErrorModal(),this.renderReactivateConfirmation(),m.createElement(S,{visible:s}))}}]);return n}(m.Component);(0,p.default)(A,"propTypes",{createdOn:s.number,siteTitle:s.string});e.exports=A},"./src/main/webapp/universal/src/apps/ParkingPage/screens/Upgrade/components/ReactivateSite/ReactivateSite.less":function(e,t,a){e.exports={container:"ReactivateSite-container-EKWQA",reactivateTitle:"ReactivateSite-reactivateTitle-26Icz",description:"ReactivateSite-description-1kXCN",createdOnTitle:"ReactivateSite-createdOnTitle-1D4cf"}},"./src/main/webapp/universal/src/apps/ParkingPage/screens/Upgrade/components/ReactivateSite/index.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/alt-utils/lib/connectToStores.js");var s=a("./src/main/webapp/universal/src/apps/ParkingPage/screens/Upgrade/components/ReactivateSite/ReactivateSite.jsx");var n=a("./src/main/webapp/universal/src/apps/App/shared/stores/WebsiteStore/index.js");var r=a("./src/main/webapp/universal/src/apps/App/shared/stores/WebsiteSettingsStore/index.js");var o=i({getStores:function e(){return[n,r]},getPropsFromStores:function e(){var t=n.getState(),a=t.createdOn,i=t.siteTitle;return{createdOn:a,siteTitle:i}}},s);e.exports=o},"./src/main/webapp/universal/src/common/bootstrap.js":function(e,t,c){"use strict";function u(t,e){var a;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=l(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var i=0;var s=function e(){};return{s:s,n:function e(){if(i>=t.length)return{done:true};return{done:false,value:t[i++]}},e:function e(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n=true,r=false,o;return{s:function e(){a=t[Symbol.iterator]()},n:function e(){var t=a.next();n=t.done;return t},e:function e(t){r=true;o=t},f:function e(){try{n||null==a.return||a.return()}finally{if(r)throw o}}}}function l(e,t){if(!e)return;if("string"===typeof e)return i(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return i(e,t)}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}c("./src/main/webapp/universal/src/common/consoleShim.js");c("./src/main/webapp/universal/src/shared/utils/polyfills/index.js");var a=c("./src/main/webapp/universal/src/shared/i18n/index.ts");var d=c("./common/temp/node_modules/lodash/get.js");var p=c("./common/temp/node_modules/lodash/noop.js");var h=c("./src/main/webapp/universal/src/shared/utils/polyfills/addLegacyPolyfills.js");var m=c("./src/main/webapp/universal/src/shared/utils/WebsiteOverlaysUtils.js");var f=c("./src/main/webapp/universal/src/shared/utils/analytics/trackInternal.ts");var v=c("./src/main/webapp/universal/src/shared/utils/humanizeDate.js");var b=c("./common/temp/node_modules/@sqs/error-reporter/dist/index.js");var S=c("./src/main/webapp/universal/src/shared/components/forms/CharacterCounter.js");var y=c("./src/main/webapp/universal/src/shared/constants/PinterestSelectors.js");var _=c("./src/main/webapp/universal/src/shared/utils/BlockAnimationsInitializer.js");var C=c("./src/main/webapp/universal/src/shared/utils/ImageBlockInitializer.js");var E=c("./src/main/webapp/universal/src/shared/utils/OpenTableBlockInitializer.js");var w=c("./src/main/webapp/universal/src/shared/utils/OpenTableV2BlockInitializer.js");var A=c("./src/main/webapp/universal/src/shared/utils/SummaryV2BlockInitializer.js");var T=c("./src/main/webapp/universal/src/shared/utils/SocialGalleryBlockInitializer.js");var I=c("./src/main/webapp/universal/src/shared/utils/MenuBlockInitializer.js");var q=c("./src/main/webapp/universal/src/shared/utils/census/ButtonBlockTrackingInitializer.js");var k=c("./src/main/webapp/universal/src/shared/utils/CartPageInitializer.ts");var L=c("./src/main/webapp/universal/src/shared/utils/Singleton.js");var D=c("./src/main/webapp/universal/src/shared/utils/GoogleMapsUtils.js");var N=c("./src/main/webapp/universal/src/shared/i18n/resolvedLocales.ts");var R=c("./src/main/webapp/frontend/packages/enums/BlockType.js");var O=c("./src/main/webapp/universal/src/shared/utils/TemplateVersionUtils.js");var P=c("./src/main/webapp/universal/src/shared/utils/GoogleReCaptchaAPI.js");var x=c("./src/main/webapp/universal/src/shared/utils/census/CensusUtils.ts");var B=c("./src/main/webapp/frontend/packages/enums/WebsiteRole.js");var M=c("./src/main/webapp/universal/src/common/globalActionsBootstrap.js");var F=c("./src/main/webapp/universal/src/common/cookieBanner.js");var j=c("./src/main/webapp/universal/src/common/dynamicText.js");var U=c("./src/main/webapp/universal/src/common/embeds.js");var V=c("./src/main/webapp/universal/src/common/normalize.js");var H=c("./src/main/webapp/universal/src/common/mercury.js");var G=/Trident.*rv[ :]*11\./.test(navigator.userAgent);var W=a.t;var z=a.setLocale;window.Common=function e(g){if(g.COMMON_ALREADY_RAN){console.warn("Detected second run, this is bad.");return}g.COMMON_ALREADY_RAN=true;g.Static=g.Static||{};g.noop=p;h(g);g.Singleton=L;g.Class={create:function e(t){var a;a=t.initialize?function e(){this.initialize.apply(this,arguments)}:function e(){};a.prototype=t;a.extend=function(e){return g.Class.extend(this,e)};a.specialize=function(e,t){var a=g.Class.specialize(this,e);a._parent=t;return a};return a},extend:function e(s,t){t.initialize||(t.initialize=s.prototype.initialize);var a=g.Class.create(t);var i=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;for(var n in s.prototype)a.prototype[n]?"function"===typeof a.prototype[n]&&i.test(a.prototype[n])&&(a.prototype[n]=function(a,i){return function(){var e=this._super;this._super=s.prototype[a];var t=i.apply(this,arguments);this._super=e;return t}}(n,a.prototype[n])):a.prototype[n]=s.prototype[n];a.prototype.superclass=s.prototype;return a},specialize:function e(t,a){var i=g.Class.extend(t,a);return new i}};g.SquarespaceFonts={alreadyLoaded:[],alreadyPreloaded:[],loadViaContext:function e(){var t={googleFamilies:g.Static.SQUARESPACE_CONTEXT.googleFonts};g.Static.SQUARESPACE_CONTEXT.website.typekitId&&(t.typeKit={id:g.Static.SQUARESPACE_CONTEXT.website.typekitId});this.load(t)},getContext:function e(){return g.Static},setupTypekit:function e(){try{if(!this.setup){if(!g.TypekitPreview)return;g.TypekitPreview.setup({auth_id:"ss",auth_token:"BInhlQ%2Bl4i%2FTK2LNzmpe2QC%2Bdl6Qc7iJa15oy7OfSGK%2BY7lwDRam4FlQCIzQGEqAiJZo10MshaDLZWgX%2FckdPK0bOW%2FAfpkj2O5MO1d7Aul7v1RGoa7OBxfdciGAxZqjHAPKKo0fqkxxKF%2F9mM9JjA%3D%3D"});this.setup=true}}catch(e){console.error(e);b.trackCaughtError("common","setupTypekit issue",e.stack)}},loadTypekit:function e(t,a){this.setupTypekit();var i=[];var s;try{if(g.Y.Lang.isArray(t))t.forEach(function(e,t){if(-1!==this.alreadyLoaded.indexOf(e)&&-1!==this.alreadyPreloaded.indexOf(e))return;s=g.Static.SQUARESPACE_CONTEXT.typekitFonts[e];if(!s)throw new Error('Requested font no longer in Typekit "'+e+'"');this.alreadyPreloaded.push(e);i.push({id:s.id,css_name:e,variations:["n4"]})});else{if(-1!==this.alreadyLoaded.indexOf(t)){a&&a();return}s=g.Static.SQUARESPACE_CONTEXT.typekitFonts[t];if(!s)throw new Error('Requested font no longer in Typekit "'+t+'"');this.alreadyLoaded.push(t);i.push({id:s.id,css_name:t,variations:s.variations})}g.TypekitPreview.load(i,{active:function e(){a&&a()},inactive:function e(){a&&a()}})}catch(e){console.error(e);b.trackCaughtError("common","loadTypekit issue",e.stack)}},preloadTypekit:function e(t,a){this.setupTypekit();var i=[];for(var s=0;s<t.length;s++){if(-1!==this.alreadyPreloaded.indexOf(t[s])||-1!==this.alreadyLoaded.indexOf(t[s]))continue;this.alreadyPreloaded.push(t[s]);i.push({id:g.Static.SQUARESPACE_CONTEXT.typekitFonts[t[s]]?g.Static.SQUARESPACE_CONTEXT.typekitFonts[t[s]].id:g.Static.SQUARESPACE_CONTEXT.typekitkitFonts[t[s]].id,css_name:t[s],variations:["n4"]})}g.TypekitPreview.load(i,{active:function e(){a&&a()},inactive:function e(){a&&a()}})},load:function e(i,t,s){s=s||g;i=i||{};if("all"===i.googleFamilies){if(this.everythingLoaded)return;i.googleFamilies=[];for(var a in s.Static.SQUARESPACE_CONTEXT.googleFonts){var n=s.Static.SQUARESPACE_CONTEXT.googleFonts[a];i.googleFamilies.push(n.includeName)}this.everythingLoaded=true}else if(i.googleFamilies)for(var r=0;r<i.googleFamilies.length;r++)if(-1===this.alreadyLoaded.indexOf(i.googleFamilies[r]))this.alreadyLoaded.push(i.googleFamilies[r]);else{i.googleFamilies.splice(r,1);r--}else i.googleFamilies=[];if(0===i.googleFamilies.length)return;g.Y.UA.ie?s.setTimeout(function(){var e=s.document.createElement("link");e.rel="stylesheet";var t="//fonts.googleapis.com/css?family=";t+=i.googleFamilies.join("|");e.href=t;var a=s.document.getElementsByTagName("script")[0];a.parentNode.insertBefore(e,a)},20):s.setTimeout(function(){var e=s.document.createElement("style");var t="@import url('//fonts.googleapis.com/css?family=";t+=i.googleFamilies.join("|");t+="');";e.innerHTML=t;var a=s.document.getElementsByTagName("script")[0];a.parentNode.insertBefore(e,a)},20)}};g.Squarespace=g.Squarespace||{};g.Squarespace.INITIALIZED=false;g.Squarespace.SQUARESPACE_INITIALIZED_ONCE=false;H.mixin(g);g.Squarespace.shouldRedirectToConfig=function(e){var t="noredirect";var a=["noredirect"];if("localhost"===e.location.hostname)return false;if(this.getSession(t,e))return false;for(var i=0;i<a.length;i++)if(-1!==e.location.search.indexOf(a[i])){this.setSession(t,true,e);return false}return e.Static.SQUARESPACE_CONTEXT.websiteSettings&&e.Static.SQUARESPACE_CONTEXT.authenticatedAccount&&!e.Static.SQUARESPACE_CONTEXT.website.developerMode&&!e.Static.SQUARESPACE_CONTEXT.website.cloneable&&!this._userHasViewerRole(e.Static.SQUARESPACE_CONTEXT.websiteRoles)&&e.top===e};g.Squarespace.getSession=function(e,t){try{if(t.sessionStorage&&t.sessionStorage[e])return t.sessionStorage[e]}catch(e){return null}return null};g.Squarespace.setSession=function(e,t,a){try{if(a.sessionStorage){a.sessionStorage[e]=t;return{success:true,error:null}}}catch(e){return{success:false,error:e}}return{success:false,error:"Browser does not support session storage"}};g.Squarespace.createCookie=function(e,t,a,i,s){var n;if(a){var r=new Date;r.setTime(r.getTime()+24*a*60*60*1e3);n="; expires="+r.toGMTString()}else n="";s.document.cookie=e+"="+t+n+"; path="+i};g.Squarespace.load=function(a){if(!a){console.error("Squarespace.load running with an assumed window context! Results may vary!");a=window}if(this.shouldRedirectToConfig(a)){a.stop&&a.stop();var e=c("./src/main/webapp/universal/src/shared/constants/Constants.js");this.createCookie(e.PREVIEW_FRAME_EXPANDED_COOKIE,true,null,"/",a);var t=encodeURIComponent(a.location.pathname+a.location.search);a.location.href="/config/?frameUrl="+t;return}M(a);a.document.addEventListener("DOMContentLoaded",function e(){j(a)});a.Y=a.YUI(function(){var e={};for(var t in a.YUI_CONFIG)e[t]=a.YUI_CONFIG[t];return e}());V(a);a.Y.use("squarespace-image-loader");a.Y.use("squarespace-public-api");a.Y.on("domready",a.Squarespace.afterBodyLoad,a.Squarespace);var i=N.setResolvedWebsiteLocaleFromContext();z("en-US",i)};g.Squarespace.injectRollups=function(e){try{if(e.top.YUI!==e.YUI){for(var t in e.top.YUI.Env.mods)e.YUI.Env.mods.hasOwnProperty(t)||(e.YUI.Env.mods[t]=e.top.YUI.Env.mods[t]);var a=e.top.Static.SQUARESPACE_CONTEXT.frameRollups;for(var i in a)a[i].css&&this._injectStylesheetFromTopFrame(a[i].css,e.document)}}catch(e){}};g.Squarespace._injectStylesheetFromTopFrame=function(e,t){var a='<link rel="stylesheet" href="'+e+'" type="text/css" />';t.head?g.Y.one(t.head).append(a):t.write(a)};var r="squarespace-commerce_email_preview";var o=["squarespace-error_reporter"];function n(e){var t=g.Y.clone(e);var a=t[r];if(g.Y.Lang.isValue(a)){t["squarespace-commerce-email-preview"]=a;delete t[r]}var i=u(o),s;try{for(i.s();!(s=i.n()).done;){var n=s.value;t.hasOwnProperty(n)&&delete t[n]}}catch(e){i.e(e)}finally{i.f()}return t}g.Squarespace._humanizeAllDates=function(e){Y.all(e).each(function(e){var t=parseInt(e.getAttribute("data-date"),10);if(!Y.Lang.isNumber(t)){console.warn("Invalid date on node: ",e);return}e.set("innerHTML",v(t).capitalize())})};g.Squarespace.afterBodyLoad=function(){var i=g.Y;var e="loading"===i.config.doc.readyState;var s=i.Squarespace.Utils.isInDamaskFrame();if(!e&&s&&g.top.YUI_NOT_YET_LOADED){i.use(Object.keys(n(i.config.win.SQUARESPACE_ROLLUPS)),p);return}if(e&&s){i.once("domready",i.config.win.Squarespace.afterBodyLoad,i.config.win.Squarespace);return}if(this.AFTER_BODY_LOADED)return;this.AFTER_BODY_LOADED=true;s&&this.injectRollups(g);i.use(function(e){var t=i.Object.keys(n(e));if(s){var a=["squarespace-management"];a.forEach(function(e){-1===t.indexOf(e)&&t.push(e)})}return t}(i.config.win.SQUARESPACE_ROLLUPS),g.Squarespace.globalInit)};g.Squarespace.addLoadTrigger=function(i,t){var s=g.Y;if(!s.one(i))return;if(s.Squarespace.Utils.isInDamaskFrame()){var a=[];s.Array.each(t,function(e){s.Lang.isObject(g.YUI.Env.mods[e])&&a.push(e)});t=s.Array.filter(t,function(e){return!a.includes(e)});s.Array.each(a,function(e){s.use(e);var t=s.config.win.Static.SQUARESPACE_CONTEXT.rollups[e];if(!t){console.warn("Unable to load module '"+e+"' for trigger '"+i+"'");return}if(t.css){var a=t.css.split(",");s.Array.each(a,function(e){this._injectStylesheetFromTopFrame(e,s.config.doc)},this)}},this);t.length>0&&console.error("addLoadTrigger","There are modules that were requested, that were not available in the Seven top frame.",t)}if(0===t.length)return;var n=[];var r=[];for(var e=0,o=t.length;e<o;++e){var l=t[e];var c=s.config.win.Static.SQUARESPACE_CONTEXT.rollups[l];if(!c){console.warn("Unable to load module '"+l+"' for trigger '"+i+"'");return}c.js&&s.Array.each(c.js.split(","),function(e){e.length>0&&n.push(e)});c.css&&s.Array.each(c.css.split(","),function(e){e.length>0&&r.push(e)})}s.Get.load([].concat(n,r),{win:s.config.win},function(e){s.use(t)})};g.Squarespace.globalInit=function(e){V(g);O.isSevenOne()&&e.one("body").addClass("seven-one-global-animations");e.Squarespace.EscManager&&e.Squarespace.EscManager.attach(e.one(e.config.win));x.manageCookies();x.trackPageview();e.config.win.Squarespace._humanizeAllDates(".timesince");e.config.win.Squarespace.initializeLayoutBlocks(e);e.config.win.Squarespace.initializeImageBlockDynamicElements(e);e.config.win.Squarespace.initializeGlobalLightbox(e);e.config.win.Squarespace.initializeVideo(e);e.config.win.Squarespace.initializeCartPage(e);e.config.win.Squarespace.initializeSvgs(e);var t=g.Static.SQUARESPACE_CONTEXT.websiteSettings.disqusShortname;e.Lang.isValue(t)&&""!==t&&e.config.win.Squarespace.initializeDisqusCommentLinks(e);-1!==e.config.doc.location.href.indexOf("logout=true")&&e.on("domready",function(){new e.Squarespace.Widgets.Information({"strings.title":W("Logout Successful"),"strings.message":W("You have been successfully logged out.")})});if(g.Static.SQUARESPACE_CONTEXT.websiteSettings.commentsEnabled){var a=g.Static.SQUARESPACE_CONTEXT.demoCollections;var i=g.Static.SQUARESPACE_CONTEXT.collectionId;var s=false;if(e.Lang.isArray(a)&&e.Lang.isValue(i)){var n=e.Array.map(a,function(e){return e.collectionId});-1!==n.indexOf(i)&&(s=true)}s||e.config.win.Squarespace.addLoadTrigger(".squarespace-comments",["squarespace-dialog","squarespace-comments"])}var r;r=e.Squarespace.Utils.isInDamaskFrame()?g.top.SQUARESPACE_LOGIN&&g.top.SQUARESPACE_LOGIN.isLoggedIn():g.SQUARESPACE_LOGIN&&g.SQUARESPACE_LOGIN.isLoggedIn();var o=m.shouldShowAnnouncementBar({settings:g.Static.SQUARESPACE_CONTEXT.websiteSettings.announcementBarSettings,context:{pageType:g.Static.SQUARESPACE_CONTEXT.pageType,collection:g.Static.SQUARESPACE_CONTEXT.collection}});(r||o)&&e.config.win.Squarespace.addLoadTrigger("body",["squarespace-announcement-bar"]);var l=m.shouldShowSSBadge({websiteSettings:g.Static.SQUARESPACE_CONTEXT.websiteSettings});var c=m.shouldShowMobileInformationBar({win:e.config.win,isMobile:e.UA.mobile,settings:g.Static.SQUARESPACE_CONTEXT.websiteSettings.mobileInfoBarSettings});var u=m.shouldShowLicensedAssetsBar({YNodeBody:e.one(e.config.doc.body)});(r||l||c||u)&&e.config.win.Squarespace.addLoadTrigger("body",["squarespace-website-overlays-manager"]);var d=g.Static.SQUARESPACE_CONTEXT.websiteSettings.popupOverlaySettings;var p=d&&m.shouldShowPopupOverlay({settings:d,context:{pageType:g.Static.SQUARESPACE_CONTEXT.pageType,collection:g.Static.SQUARESPACE_CONTEXT.collection},isMobile:e.UA.mobile,urlSearch:window.location.search});(r||p)&&e.config.win.Squarespace.addLoadTrigger("body",["squarespace-popup-overlay"]);F(e);e.config.win.Squarespace.addLoadTrigger(".sqs-audio-embed, .sqs-audio-playlist, .sqs-album-block",["squarespace-audio-player"]);e.Lang.isObject(g.Static.SQUARESPACE_CONTEXT.websiteSettings.pinterestOverlayOptions)&&"disabled"!==g.Static.SQUARESPACE_CONTEXT.websiteSettings.pinterestOverlayOptions.mode&&e.config.win.Squarespace.addLoadTrigger(y.TRIGGER_SELECTORS.join(","),["squarespace-pinterest"]);e.config.win.Squarespace.addLoadTrigger(".collection-type-products.view-list .products-collection-v2",["squarespace-products-collection-list-v2"]);e.config.win.Squarespace.addLoadTrigger(".collection-type-products.view-item .products-collection-v2",["squarespace-products-collection-item-v2"]);e.config.win.Squarespace.addLoadTrigger(".sqs-image-zoom-area",["squarespace-image-zoom"]);e.config.win.Squarespace.addLoadTrigger(".collection-type-blog.view-list .sqs-blog-list",["squarespace-blog-collection-list"]);e.config.win.Squarespace.addLoadTrigger(".collection-type-gallery .sqs-gallery-list",["squarespace-gallery-collection-list"]);e.config.win.Squarespace.addLoadTrigger(".sqs-block-calendar",["squarespace-calendar-block-renderer"]);e.config.win.Squarespace.addLoadTrigger(".collection-type-events.view-list",["squarespace-events-collection"]);e.config.win.Squarespace.addLoadTrigger(".sqs-product-quick-view-button[data-id]",["squarespace-product-quick-view","squarespace-image-zoom","squarespace-products-collection-item-v2"]);e.config.win.Squarespace.addLoadTrigger(".sqs-block-chart",["squarespace-chartjs-helpers"]);e.config.win.Squarespace.addLoadTrigger(".sqs-block-tourdates[data-block-json]",["squarespace-tourdates"]);e.config.win.Squarespace.addLoadTrigger(".sqs-search-page",["squarespace-search-page"]);e.config.win.Squarespace.addLoadTrigger(".sqs-simple-like",["squarespace-simple-liking"]);e.config.win.Squarespace.addLoadTrigger(".squarespace-social-buttons",["squarespace-social-buttons"]);e.config.win.Squarespace.addLoadTrigger(".sqs-share-buttons",["squarespace-share-buttons"]);_.initializeAnimations(e.config.win);function h(e){_.polyfillAndObserve(e)}e.Global.on("_syncBodyClasses",h);H.markReady(e)};g.Squarespace.initializeDisqusCommentLinks=function(a){var i="#disqus_thread";var s="#comment-{id}";var e=a.all(".sqs-comment-link");var n="href";var r="data-id";var t;var o=g.Static.SQUARESPACE_CONTEXT.websiteSettings.disqusShortname;var l=a.Lang.isString(o)&&""!==o;t=l?function e(t){return g.Static.SQUARESPACE_CONTEXT.website.baseUrl+t.getAttribute(n)+i}:function e(t){return g.Static.SQUARESPACE_CONTEXT.website.baseUrl+t.getAttribute(n)+a.substitute(s,{id:t.getAttribute(r)})};e.each(function(e){e.setHTML("Comments");e.setAttribute(n,t(e))},this);if(l){g.disqus_shortname=o;a.Get.script("//"+o+".disqus.com/count.js")}};g.Squarespace.initializeCollectionPages=function(e,t){if(e.Squarespace.EventsCollection){t.all(".sqs-events-collection-list").each(e.Squarespace.EventsCollection.initializeListView);t.all(".sqs-events-collection-calendar").each(e.Squarespace.EventsCollection.initializeCalendarView)}else e.config.win.Squarespace.addLoadTrigger(".sqs-events-collection-list, .sqs-events-collection-calendar",["squarespace-events-collection"])};g.Squarespace.initializeLayoutBlocks=function(n,e){e=e||n;this.initializeSummaryV2Block(n);e.all([".sqs-block-video",".sqs-block-embed"].join(",")).each(function(e){U(e,n,g)});e.all(".sqs-block-image img[data-image]").each(function(e){C.initializeImageBlock(e,n)});var t=[".sqs-block-product img[data-image]"];n.config.win.Squarespace.SQUARESPACE_INITIALIZED_ONCE&&t.push(".sqs-block-collectionlink img[data-image]");e.all(t.join(",")).each(function(e){C.initializeBasicBlockWithImage(e,n)});e.all(".sqs-block-soundcloud").each(function(e){g.Squarespace.initializeSoundcloudBlock(e,n)});e.all(".sqs-block-map[data-block-json]").each(function(e){var t=c("./common/temp/node_modules/@sqs/site-rendering/Maps/MapView.js");var a=n.JSON.parse(e.getAttribute("data-block-json"));var i=D.mapModelToViewConfig(a);var s=N.getResolvedWebsiteLocale();e.setAttribute("data-animation-role","image");f("google_maps_map_load_on_site");O.isSevenOne()&&(i.ui=n.merge({},i.ui,{scrollwheel:false}));t.createView(i.ui,i.location,e.one(".sqs-block-content").getDOMNode(),s)});g.Squarespace.initializeFormBlocks(e,n);e.all(".sqs-block-newsletter").each(function(e){g.Squarespace.initializeNewsletterBlock(e,n)});e.all(".sqs-block-donation").each(function(e){g.Squarespace.initializeDonationButton(e,n)});e.all(".sqs-block-button").each(function(e){g.Squarespace.initializeButtonBlock(e,n)});g.Squarespace.initializeAspectRatioBlocks(n);var a=[".sqs-block-gallery",".sqs-block-video"].join(",");e.all(a).each(function(e){n.SQS.Gallery.Manager.initializeBlock(e)});var i=[{selector:".sqs-block-flickr",blockType:R.FLICKR},{selector:".sqs-block-instagram",blockType:R.INSTAGRAM},{selector:".sqs-block-fivehundredpix",blockType:R.FIVEHUNDREDPIX}];i.forEach(function(i){e.all(i.selector).each(function(e){var t=e.one(".sqs-gallery-container");var a=t&&"true"===t.getAttribute("data-async-rendering-enabled");a?T(e,i.blockType).then(function(){Squarespace.initializeAspectRatioBlocks(n);n.SQS.Gallery.Manager.initializeBlock(e)}):n.SQS.Gallery.Manager.initializeBlock(e)})});e.all(".sqs-block-opentable").each(function(e){g.Squarespace.initializeOpenTableBlock(e,n)});e.all(".sqs-block-opentable-v2").each(function(e){g.Squarespace.initializeOpenTableV2Block(e.getDOMNode())});n.Squarespace.Widgets.AudioPlayer?e.all(".sqs-audio-embed").each(n.Squarespace.Widgets.AudioPlayer.initializeNode):n.config.win.Squarespace.addLoadTrigger(".sqs-audio-embed, .sqs-audio-playlist, .sqs-album-block",["squarespace-audio-player"]);n.Squarespace.Tourdates?e.all(".sqs-block-tourdates[data-block-json]").each(n.Squarespace.Tourdates.initializeNode):n.config.win.Squarespace.addLoadTrigger(".sqs-block-tourdates[data-block-json]",["squarespace-tourdates"]);n.Squarespace.CalendarBlockRenderer?e.all(".sqs-block.calendar-block[data-block-json]").each(n.Squarespace.CalendarBlockRenderer.initializeNode):n.config.win.Squarespace.addLoadTrigger(".sqs-block.calendar-block[data-block-json]",["squarespace-calendar-block-renderer"]);var s=e.one(".sqs-block-zola");s&&this.initializeZolaBlocks(s,n);var r=e.one(".sqs-block-acuity");r&&this.initializeAcuityBlocks(r,n);this.initializeSearchBlock(n);this.initializeChartBlock(n);this.initializeSocialLinks(n);this.initializeMenuBlock(n)};g.Squarespace.initializeSocialLinks=function(i){if(i.UA.gecko<=0)return;i.all('use[class^="SocialLinks"][*|href]').each(function(e){var t=e.getAttribute("xlink:href");var a=t.indexOf("#");-1!==a&&e.setAttribute("xlink:href",i.config.win.location.origin+i.config.win.location.pathname+t.substr(a))})};g.Squarespace.initializeMenuBlock=function(e){e.all(".menu-wrapper").each(function(e){I.initializeMenuBlock(e._node)})};g.Squarespace.initializePageContent=function(e,t){g.Squarespace.initializeLayoutBlocks(e,t);g.Squarespace.initializeCollectionPages(e,t)};g.Squarespace.initializeImageBlockDynamicElements=function(e){var a=e.config.win;function t(){e.all(".image-block-v2").each(function(e){e.toggleClass("sqs-narrow-width",e.get("offsetWidth")<415);var t=e.one("img");t&&a.ImageLoader.load(t)});j(a)}this._resizeEmitter=new e.Squarespace.ResizeEmitter;this._resizeEmitter.on("resize",t,this);e.Global.on("tweak:change",t)};g.Squarespace.initializeSummaryV2Block=function(t){t.all(".sqs-block-summary-v2").each(function(e){A(e).then(function(){t.SQS.Gallery.Manager.initializeBlock(e)})})};g.Squarespace.initializeButtonBlock=function(e,t){q(e)};g.Squarespace.initializeOpenTableBlock=function(e,t){E(e,t)};g.Squarespace.initializeOpenTableV2Block=function(e){w(e)};g.Squarespace.initializeZolaBlocks=function(e,t){var a="zola-wjs";var i=t.config.win.document.getElementById(a);if(i){if(!t.config.win.Squarespace.SQUARESPACE_INITIALIZED_ONCE)return;if(t.config.win.ZolaWidget){t.config.win.ZolaWidget.init();return}i.remove()}var s=document.createElement("script");s.src=e.one("[data-zola-script-src]").getAttribute("data-zola-script-src");s.id=a;s.async=true;t.config.win.document.head.appendChild(s)};g.Squarespace.initializeAcuityBlocks=function(e,t){if(!t.config.win.Squarespace.SQUARESPACE_INITIALIZED_ONCE)return;var a=e.one("script");var i=document.createElement("script");i.src=a.getAttribute("src");i.async=true;a.remove();e.appendChild(i)};g.Squarespace.initializeSoundcloudBlock=function(e,t){var a=e.one("iframe");if(a){var i=a.getAttribute("src");try{var s=t.QueryString.parse(i).url;if(s){var n=s.indexOf("/playlists/")>=0;e.toggleClass("isPlaylist",n)}}catch(e){console.error("Issue parsing SoundCloud url: "+i,e)}}};g.Squarespace.initializeVideoBlock=function(e,t){e.videoloader||e.plug(t.Squarespace.VideoLoader)};function s(e,t){try{var a=P.getCaptchaContainer(e,t);if(a){P.destroy(a);P.render(e,a)}var i=t.getAttribute("data-form-id");i&&x.trackFormRender(i)}catch(e){console.error("Could not render form",{formEl:t,error:e})}}g.Squarespace.initializeFormBlocks=function(e,i){e.all(".sqs-block-form").each(function e(t){var a=t.one("form");if(!a)return;s(i.config.win,a.getDOMNode())});S(i.config.doc);var t=".sqs-block-form .lightbox-handle";var a=e.all(t);if(a.isEmpty())return;if(i.Squarespace.FormRenderingUtils){i.Squarespace.FormRenderingUtils.initializeFormLightbox(e);return}i.config.win.Squarespace.addLoadTrigger(t,["squarespace-form-rendering-utils"])};g.Squarespace.initializeNewsletterBlock=function(e,t){var a=e.one(".newsletter-form");if(!a)return;s(t.config.win,a.getDOMNode());var i=e.ancestor();e.toggleClass("newsletter-form-has-small-container",i.get("offsetWidth")<320).addClass("rendered")};g.Squarespace.initializeDonationButton=function(e,t){var a=e.one(".sqs-donate-button");if(!a){console.error("Careful, there was no button found inside this node!",e.getDOMNode());return}var i=function e(){t.Squarespace.Commerce.goToDonatePage(a.getAttribute("data-donate-page-id"))};a.on("click",i);a.on("keydown",function(e){13!==e.keyCode&&32!==e.keyCode||i()})};g.Squarespace.initializeGlobalLightbox=function(e){e.all('[rel="lightbox"][data-lightbox]').plug(e.Squarespace.Lightbox2Plug)};g.Squarespace.initializeCommerce=function(e){if(!e.Squarespace.Commerce.initializeCommerce){console.warn("Commerce rollup not loaded, exiting initializeCommerce() invocation.");return}e.Squarespace.Commerce.initializeCommerce(e)};g.Squarespace.initializeChartBlock=function(e){e.ChartJS&&e.ChartJS.initializeCharts?e.ChartJS.initializeCharts():e.config.win.Squarespace.addLoadTrigger(".sqs-block-chart",["squarespace-chartjs-helpers"])};g.Squarespace.initializeVideo=function(t){t.all(".sqs-video-wrapper").each(function(e){e.videoloader||e.ancestor(".sqs-block-video")||e.ancestor(".slide")||e.plug(t.Squarespace.VideoLoader,{load:"false"!==e.getAttribute("data-load")})})};g.Squarespace.initializeSearchBlock=function(e){var t=e.all(".sqs-search-ui-text-input");if(t.isEmpty())return;if(!e.Squarespace.Widgets.SearchPreview){e.config.win.Squarespace.addLoadTrigger(".sqs-search-ui-text-input",["squarespace-search-preview"]);return}e.Squarespace.Widgets.SearchPreview.renderAllSearchPreviewNodes()};var t=function e(t){var a=d(t,"SQS.LayoutEngine.AspectRatioManager");a&&a.initAllBlocks()};g.Squarespace.initializeAspectRatioBlocks=t;g.Squarespace._userHasViewerRole=function(e){if(!e)return false;return Object.keys(e).length>0&&e[B.VIEWER]};g.Squarespace.initializeCartPage=function(a){k.initialize({onInitialize:function e(t){a.config.win.Squarespace.onInitialize(a,t)},onDestroy:function e(t){a.config.win.Squarespace.onDestroy(a,t)},win:a.config.win})};g.Squarespace.initializeSvgs=function(e){e.config.win.Squarespace.onInitialize(e,function(){e.on("domready",function(){G&&Promise.resolve().then(function(e){var t=c("./src/main/webapp/universal/src/shared/utils/SvgCompatibility.js");t.parse()}.bind(null,c)).catch(p)})})};function a(){window.SquarespaceFonts.loadViaContext();window.Squarespace.load(window);window.Squarespace.afterBodyLoad(window.Y)}var i=G?document.querySelector('script[src*="common-"]'):document.currentScript;var l=i&&i.hasAttribute("defer");l&&g.document.addEventListener("DOMContentLoaded",a)};Common(window)},"./src/main/webapp/universal/src/common/consoleShim.js":function(e,t,a){"use strict";"undefined"===typeof console&&(console={assert:function e(){},group:function e(){},groupEnd:function e(){},log:function e(){},dir:function e(){},warn:function e(){},error:function e(t){var e=Array.prototype.slice.call(arguments);throw new Error(e)}})},"./src/main/webapp/universal/src/common/cookieBanner.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=o;var s=i(a("./common/temp/node_modules/lodash/get.js"));var n=a("./src/main/webapp/universal/src/shared/utils/CookieBanner.js");var r=i(a("./src/main/webapp/universal/src/shared/utils/WebsiteOverlaysUtils.js"));function o(a){if(!a||!(0,s.default)(a,"config.win.Static.COOKIE_BANNER_CAPABLE"))return;var e=(0,s.default)(a,"config.win.Static.SQUARESPACE_CONTEXT.cookieSettings");var t=e&&r.default.shouldShowCookieBanner({settings:e,urlSearch:window.location.search});t&&(0,n.mount)(a.config.win.Static.SQUARESPACE_CONTEXT.cookieSettings);a.Global.on("cookieBanner:force",function e(t){if(!(0,s.default)(a,"config.win.document.body"))return;(0,n.mount)(a.merge({force:true},t));a.config.win.document.body.classList.add("sqs-cookie-banner-v2-forced");a.Global.once("cookieBanner:unforce",function e(t){a.Global.detach("cookieBanner:update");if(!(0,s.default)(a,"config.win.document.body"))return;a.config.win.document.body.classList.remove("sqs-cookie-banner-v2-forced");(0,n.mount)(t)});a.Global.on("cookieBanner:update",function e(t){if(!(0,s.default)(a,"config.win.document.body"))return;(0,n.unmount)();(0,n.mount)(a.merge({force:true},t))})})}e.exports=t.default},"./src/main/webapp/universal/src/common/dynamicText.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=o;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/toConsumableArray.js"));var n=i(a("./src/main/webapp/universal/src/shared/utils/makeTextDynamic.js"));var r=[".image-block-v2 .sqs-dynamic-text-container"].join(",");function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r;(0,s.default)(e.document.querySelectorAll(t)).forEach(function(e){return(0,n.default)(e)})}e.exports=t.default},"./src/main/webapp/universal/src/common/embeds.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var l=i(a("./src/main/webapp/universal/src/shared/utils/UrlUtils.js"));var c=function e(t,a){if(!t)return;var i=t.getAttribute("data-block-json");if(i){var s=a.JSON.parse(i);s&&"Twitter"!==s.providerName&&t.get("children").each(function(e){return e.resizetoparent({sizeonly:true})})}t.setStyles({visibility:"visible",opacity:1,height:"auto"})};var s=function e(t,a,i){var s=t.one(".sqs-block-content");if(!s)return;l.default.securifyBlockEmbed(s);var n=s.test(".sqs-block-video .sqs-block-content");if(n){var r=s.one(".sqs-video-wrapper");r&&i.Squarespace.initializeVideoBlock(r,a);return}var o=s.one(".intrinsic");o||c(s,a)};t.default=s;e.exports=t.default},"./src/main/webapp/universal/src/common/globalActionsBootstrap.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=l;var s=i(a("./common/temp/node_modules/lodash/get.js"));var n=a("./src/main/webapp/universal/src/shared/utils/SqsVersion.js");function r(e){try{var t=e.top!==e;var a=(0,s.default)(e,"top.YUI.Env",false);return t&&a}catch(e){}return false}function o(e){return e.top.Static.SQUARESPACE_CONTEXT}function l(e){var t=n.IS_SQUARESPACE_MOBILE_APP||r(e);if(!t)return;e.YUI.Env.globalEvents=e.top.YUI.Env.globalEvents;var a=(0,s.default)(e,"StaticActions.bootstrap",null);if(!a)return;var i=o(e);a(i)}e.exports=t.default},"./src/main/webapp/universal/src/common/mercury.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.mixin=t.globalDestroy=t.markReady=t.onDestroy=t.onInitialize=t.destructors=t.initializers=void 0;var i=[];t.initializers=i;var s=[];t.destructors=s;var n=function e(t,a){t.config.win.Squarespace.INITIALIZED&&a();-1===i.indexOf(a)&&i.push(a)};t.onInitialize=n;var r=function e(t,a){s.push(a)};t.onDestroy=r;var o=function e(t){if(t.config.win.Squarespace.INITIALIZED)return;i.forEach(function(e){try{e()}catch(e){console.error("[mercury.markReady] Error invoking initializer.",e)}});t.config.win.Squarespace.INITIALIZED=true;t.config.win.Squarespace.SQUARESPACE_INITIALIZED_ONCE=true};t.markReady=o;var l=function e(t){if(!t.config.win.Squarespace.INITIALIZED)return;t.config.win.Squarespace.INITIALIZED=false;s.forEach(function(e){return e()})};t.globalDestroy=l;var c=function e(t){t.Squarespace=t.Squarespace||{};t.Squarespace.onInitialize=n;t.Squarespace.onDestroy=r;t.Squarespace.globalMarkReady=o;t.Squarespace.globalDestroy=l};t.mixin=c},"./src/main/webapp/universal/src/common/normalize.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=i;function i(e){e.Static.SQUARESPACE_CONTEXT.collection&&(e.Static.SQUARESPACE_CONTEXT.collectionId=e.Static.SQUARESPACE_CONTEXT.collection.id);e.Static.SQUARESPACE_CONTEXT.item&&(e.Static.SQUARESPACE_CONTEXT.itemId=e.Static.SQUARESPACE_CONTEXT.item.id)}e.exports=t.default},"./src/main/webapp/universal/src/shared/components/Form/fields/EmbedField.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var s=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=s(a("./common/temp/node_modules/@babel/runtime/helpers/extends.js"));var r=s(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var o=s(a("./common/temp/node_modules/react/index.js"));var l=a("./src/main/webapp/universal/src/shared/utils/coreCmsFlags.ts");var c=i(a("./common/temp/node_modules/@sqs/core-components/fields/EmbedField.js"));var u=a("./src/main/webapp/universal/src/shared/i18n/index.ts");function d(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function p(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?d(Object(a),true).forEach(function(e){(0,r.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var h=function e(t){if(t.error_code)throw(0,u.t)("Invalid URL",{});return t};var g=function e(t){return o.default.createElement(c.default,(0,n.default)({},t,{providerConfigurations:p({embedly:p({},c.EmbedResolvers.embedly,{checkErr:h}),youtube:p({},c.EmbedResolvers.youtube,{checkErr:h})},(0,l.isCoreCmsVariant)(l.YOUTUBE_OEMBED)&&{youtube:{config:p({},c.EmbedResolvers.youtube.config,{format:"json",serviceUrl:"/api/oembed/youtube"})}})}))};t.default=g;e.exports=t.default},"./src/main/webapp/universal/src/shared/components/LegacyGoogleDriveConfig.jsx":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var c=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));function u(s){var n=d();return function e(){var t=(0,l.default)(s),a;if(n){var i=(0,l.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,o.default)(this,a)}}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var p=a("./common/temp/node_modules/prop-types/index.js");var h=a("./common/temp/node_modules/react/index.js");var g=a("./src/main/webapp/universal/src/shared/components/GoogleDriveConfig.jsx");var m=a("./src/main/webapp/universal/src/shared/actions/GoogleDriveConfigActions.js");var f=a("./src/main/webapp/universal/src/shared/stores/GoogleDriveConfigStore.js");var v=a("./common/temp/node_modules/alt-utils/lib/connectToStores.js");var b=function(e){(0,r.default)(a,e);var t=u(a);function a(){(0,s.default)(this,a);return t.apply(this,arguments)}(0,n.default)(a,[{key:"render",value:function e(){return h.createElement(g,this.props)}}]);return a}(h.Component);(0,c.default)(b,"propTypes",{initialData:p.shape({connectionState:p.number,username:p.string,socialConfig:p.obj,spreadsheetName:p.string}),isConnecting:p.bool,isConnected:p.bool,username:p.string,showConnectionFailedAlert:p.bool,showConnectionFailedError:p.bool,googleDriveSpreadsheetName:p.string,showFormNameRequiredError:p.bool,googleDriveConfig:p.object});(0,c.default)(b,"defaultProps",{initialData:{}});var S=v({getStores:function e(){return[f]},componentDidConnect:function e(t){m.loadFromSavedData(t.initialData||{})},getPropsFromStores:function e(){return f.getState()}},b);e.exports=S},"./src/main/webapp/universal/src/shared/components/LegacyMailChimpConfig.jsx":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var c=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));function u(s){var n=d();return function e(){var t=(0,l.default)(s),a;if(n){var i=(0,l.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,o.default)(this,a)}}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var p=a("./common/temp/node_modules/prop-types/index.js");var h=a("./common/temp/node_modules/react/index.js");var g=a("./src/main/webapp/universal/src/shared/components/MailChimpConfig.jsx");var m=a("./src/main/webapp/universal/src/shared/actions/MailChimpConfigActions.js");var f=a("./src/main/webapp/universal/src/shared/stores/MailChimpConfigStore.js");var v=a("./common/temp/node_modules/alt-utils/lib/connectToStores.js");var b=function(e){(0,r.default)(a,e);var t=u(a);function a(){(0,s.default)(this,a);return t.apply(this,arguments)}(0,n.default)(a,[{key:"UNSAFE_componentWillMount",value:function e(){m.savePreviousSettings()}},{key:"componentWillUnmount",value:function e(){m.restorePreviousSettings()}},{key:"render",value:function e(){return h.createElement(g,this.props)}}]);return a}(h.Component);(0,c.default)(b,"propTypes",{initialData:p.shape({connectionState:p.number,list:p.string,socialConfig:p.obj,username:p.string,useSingleOptIn:p.bool}),isConnecting:p.bool.isRequired,isMailChimpConnected:p.bool.isRequired,mailChimpError:p.bool.isRequired,mailChimpListId:p.string,mailChimpLists:p.arrayOf(p.object),mailChimpUsername:p.string,mailChimpUseSingleOptIn:p.bool,showConnectionFailedAlert:p.bool.isRequired,showMailingListRequiredError:p.bool.isRequired,showNoMailChimpListsAlert:p.bool.isRequired});(0,c.default)(b,"defaultProps",{mailChimpLists:[]});var S=v({getStores:function e(){return[f]},componentDidConnect:function e(t){m.loadFromSavedData(t.initialData||{})},getPropsFromStores:function e(){var t=f.getState();var a=t.mailChimpConfig;return{isConnecting:t.isConnecting,isMailChimpConnected:a.isMailChimpConnected,mailChimpError:a.mailChimpConnectionInfo.mailChimpError,mailChimpListId:a.mailChimpListId,mailChimpLists:a.mailChimpConnectionInfo.mailChimpLists,mailChimpUsername:a.mailChimpUsername,mailChimpUseSingleOptIn:a.mailChimpUseSingleOptIn,showConnectionFailedAlert:t.showConnectionFailedAlert,showMailingListRequiredError:t.showMailingListRequiredError,showNoMailChimpListsAlert:t.showNoMailChimpListsAlert}}},b);e.exports=S},"./src/main/webapp/universal/src/shared/components/LoadingPage.jsx":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var c=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));function u(s){var n=d();return function e(){var t=(0,l.default)(s),a;if(n){var i=(0,l.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,o.default)(this,a)}}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var p=a("./common/temp/node_modules/prop-types/index.js");var h=a("./common/temp/node_modules/react/index.js");var g=a("./src/main/webapp/universal/src/shared/components/LoadingSpinner.jsx");var m=a("./src/main/webapp/universal/src/shared/components/LoadingPage.less");var f=a("./common/temp/node_modules/classnames/index.js");var v=a("./src/main/webapp/universal/src/shared/i18n/index.ts"),b=v.t;var S=function(e){(0,r.default)(a,e);var t=u(a);function a(){(0,s.default)(this,a);return t.apply(this,arguments)}(0,n.default)(a,[{key:"render",value:function e(){var t=this.props,a=t.waitingText,i=t.isVisible,s=t.color;return h.createElement("div",{className:f(m.overlay,(0,c.default)({},m.shown,i))},h.createElement(g,{horizontalAlign:"center",color:s,size:"extra-large"}),h.createElement("p",null,a))}}]);return a}(h.Component);(0,c.default)(S,"propTypes",{waitingText:p.string.isRequired,isVisible:p.bool,color:p.string});(0,c.default)(S,"defaultProps",{color:"light",isVisible:false,waitingText:b("Please wait…")});e.exports=S},"./src/main/webapp/universal/src/shared/components/LoadingPage.less":function(e,t,a){e.exports={overlay:"LoadingPage-overlay-3UaiY",shown:"LoadingPage-shown-3rPKJ"}},"./src/main/webapp/universal/src/shared/components/ProductPageGallery.ts":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var r="sqs-pdp-gallery-slide";var o="sqs-pdp-gallery-slide-active";var l="sqs-pdp-gallery-slide-transition";var c="ProductItem-gallery-slides-item";var u="ProductItem-gallery-thumbnails-item";var d="sqs-active-slide";var p=0;var h=function e(t,a){var i=this;(0,s.default)(this,e);(0,n.default)(this,"thumbnails",void 0);(0,n.default)(this,"images",void 0);(0,n.default)(this,"currentIndex",p);(0,n.default)(this,"incrementCurrentIndex",function(){var e=(i.currentIndex+1)%i.images.length;i.setNewIndex(e)});(0,n.default)(this,"decrementCurrentIndex",function(){var e=i.currentIndex-1;e=e<0?e+i.images.length:e;i.setNewIndex(e)});(0,n.default)(this,"setNewIndex",function(e){if(e===i.currentIndex)return;i.images.forEach(function(e){return e.classList.remove(l)});i.images[e].classList.add(l);i.images[i.currentIndex].classList.add(l);i.setInactiveImage(i.currentIndex);i.setActiveImage(e);i.currentIndex=e});(0,n.default)(this,"destroy",function(){i.images.forEach(function(e){e.classList.remove(o,d,r,l)});i.thumbnails.forEach(function(e){e.removeEventListener("click",i.handleThumbnailClick)});var e=document.querySelector("iframe#sqs-site-frame");null!==e&&e.contentWindow?e.contentWindow.removeEventListener("keyup",i.handleKeypress):document.removeEventListener("keyup",i.handleKeypress)});(0,n.default)(this,"handleKeypress",function(e){var t=e.key||e.keyCode;"ArrowRight"===t||39===t?i.incrementCurrentIndex():"ArrowLeft"!==t&&37!==t||i.decrementCurrentIndex()});(0,n.default)(this,"handleThumbnailClick",function(e){var t=e.currentTarget;var a=t.getAttribute("data-thumbnail-index");a&&i.setNewIndex(+a-1)});(0,n.default)(this,"setActiveImage",function(e){return i.images[e].classList.add(o,d)});(0,n.default)(this,"setInactiveImage",function(e){return i.images[e].classList.remove(o,d)});(0,n.default)(this,"attachEventListeners",function(){i.thumbnails.forEach(function(e){e.addEventListener("click",i.handleThumbnailClick)});var e=document.querySelector("iframe#sqs-site-frame");null!==e&&e.contentWindow?e.contentWindow.addEventListener("keyup",i.handleKeypress):document.addEventListener("keyup",i.handleKeypress)});this.images=Array.from(t.getElementsByClassName(c));this.images.forEach(function(e,t){t===p&&e.classList.add(o,d);e.classList.add(r)});this.thumbnails=Array.from(a.getElementsByClassName(u));this.attachEventListeners()};t.default=h;e.exports=t.default},"./src/main/webapp/universal/src/shared/components/SafariPrivateAlert.jsx":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var s=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var r=s(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var o=s(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var l=s(a("./common/temp/node_modules/@babel/runtime/helpers/assertThisInitialized.js"));var c=s(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var u=s(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var d=s(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var p=s(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var h=i(a("./common/temp/node_modules/react/index.js"));var g=s(a("./src/main/webapp/universal/src/shared/components/Alert.jsx"));var m=s(a("./src/main/webapp/universal/src/shared/constants/HelpLinks.js"));var f=a("./src/main/webapp/universal/src/shared/i18n/index.ts");var v=a("./src/main/webapp/universal/src/shared/i18n/react.ts");function b(s){var n=S();return function e(){var t=(0,d.default)(s),a;if(n){var i=(0,d.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,u.default)(this,a)}}function S(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var n=function(e){(0,c.default)(n,e);var s=b(n);function n(){var e;(0,r.default)(this,n);for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];e=s.call.apply(s,[this].concat(a));(0,p.default)((0,l.default)(e),"handleDismiss",function(){window.location.href="https://account.squarespace.com"});return e}(0,o.default)(n,[{key:"render",value:function e(){return h.default.createElement(g.default,{isOpen:true,anchor:"window",title:(0,f.t)("Safari Private Mode"),theme:"damask",dismissText:(0,f.t)("Back to Account"),onDismiss:this.handleDismiss},h.default.createElement(v.T,{supportedBrowserLink:h.default.createElement("a",{href:m.default.SUMMARY_EDITOR},h.default.createElement(v.T,{project:"src.shared"},"supported browser")),project:"src.shared"},"You're using Safari Private Browsing, which isn't supported. To log in, open this page in a new window without private browsing, or use a different {supportedBrowserLink}."))}}]);return n}(h.Component);var y=n;t.default=y;e.exports=t.default},"./src/main/webapp/universal/src/shared/components/fields/TextEditor/components/LinkEditor/LinkEditorPopOver.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var s=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var g=s(a("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));var m=i(a("./common/temp/node_modules/react/index.js"));var f=s(a("./src/main/webapp/frontend/packages/enums/Flag.js"));var v=a("./common/temp/node_modules/@sqs/rosetta-elements/build/lib/index.js");var b=s(a("./common/temp/node_modules/@sqs/core-components/components/ComposedLinkEditor.js"));var S=s(a("./src/main/webapp/universal/src/shared/components/fields/TextEditor/components/LinkEditor/LinkEditorPopOver.less"));var y=s(a("./common/temp/node_modules/classnames/index.js"));var _=a("./src/main/webapp/universal/src/apps/App/screens/ContentBrowser/externals.js");var C=function e(t){return t.stopPropagation()};function n(e){var t=e.className,a=e.modalClassName,i=e.pageDropdownClassName,s=e.isOpen,n=e.initialPosition,r=e.value,o=e.onChange,l=e.canEditTextContent,c=e.onRequestClose;var u=(0,m.useState)(r),d=(0,g.default)(u,2),p=d[0],h=d[1];return m.default.createElement(v.Modal.Transition,null,s&&m.default.createElement(v.Modal,{className:(0,y.default)(S.default.noPointerEvents,t),lockScroll:false,lockFocus:false,zIndex:1e5},m.default.createElement(v.Modal.Position,{className:S.default.noPointerEvents,position:n,constraintTo:"window"},m.default.createElement(v.Modal.Dialog,{className:(0,y.default)(S.default.pointerEvents,S.default.editorContainer)},m.default.createElement("div",{onClick:C},m.default.createElement(b.default,{canEditTextContent:l,className:S.default.linkModal,modalClassName:(0,y.default)(S.default.linkModal,a),pageDropdownClassName:i,value:p,onChange:function e(t){h(t);o(t)},autocompleteContentItems:true,onRequestClose:c,componentProps:_.BetaFeaturesUtils.isFeatureEnabled(f.default.NESTED_CATEGORIES)?{CONTENT_PICKER:{websiteId:_.WebsiteStore.getState().get("id"),versions:{collection:{product:"1.1"}}}}:{}}))))))}var r=n;t.default=r;e.exports=t.default},"./src/main/webapp/universal/src/shared/components/fields/TextEditor/components/LinkEditor/LinkEditorPopOver.less":function(e,t,a){e.exports={linkModal:"LinkEditorPopOver-linkModal-1Ku_2",editorContainer:"LinkEditorPopOver-editorContainer-3kTTP",noPointerEvents:"LinkEditorPopOver-noPointerEvents-24zRd",pointerEvents:"LinkEditorPopOver-pointerEvents-2VeMj"}},"./src/main/webapp/universal/src/shared/components/fields/TextEditor/components/LinkEditor/getAnchor.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=i;function i(e){if(0===e.rangeCount)return null;var t=e.getRangeAt(0).startContainer;if(!t)return null;t.getBoundingClientRect||(t=t.parentNode);return t.getBoundingClientRect()}e.exports=t.default},"./src/main/webapp/universal/src/shared/components/fields/TextEditor/components/LinkPreview.jsx":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/assertThisInitialized.js"));var c=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var u=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var d=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var p=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var s=i(a("./common/temp/node_modules/prop-types/index.js"));var h=i(a("./common/temp/node_modules/react/index.js"));var g=i(a("./common/temp/node_modules/react-dom/index.js"));var m=i(a("./common/temp/node_modules/classnames/index.js"));var f=a("./src/main/webapp/universal/src/shared/i18n/index.ts");var v=a("./src/main/webapp/universal/src/shared/i18n/react.ts");var b=i(a("./src/main/webapp/universal/src/shared/components/fields/TextEditor/components/LinkPreview.less"));function S(s){var n=y();return function e(){var t=(0,d.default)(s),a;if(n){var i=(0,d.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,u.default)(this,a)}}function y(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var n=function(e){(0,c.default)(n,e);var s=S(n);function n(){var t;(0,r.default)(this,n);for(var e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];t=s.call.apply(s,[this].concat(a));(0,p.default)((0,l.default)(t),"state",{anchor:t.props.anchor});(0,p.default)((0,l.default)(t),"node",document.createElement("div"));(0,p.default)((0,l.default)(t),"handleRemoveClick",function(e){e.preventDefault();t.props.onRemoveLink()});(0,p.default)((0,l.default)(t),"handleEditClick",function(e){e.preventDefault();t.props.onEditLink(t.props.link)});return t}(0,o.default)(n,[{key:"UNSAFE_componentWillMount",value:function e(){document.body.appendChild(this.node);if(this.props.isOpen){var t=this.getAnchor();t&&this.setState({anchor:t})}}},{key:"UNSAFE_componentWillReceiveProps",value:function e(t){if(t.isOpen&&t.link&&(!this.props.isOpen||!this.props.link||t.link.href!==this.props.link.href||!this.state.anchor)){var a=this.getAnchor(t);a&&this.setState({anchor:a})}}},{key:"componentDidUpdate",value:function e(t){var a=this;this.props.isOpen&&this.props.inFullScreen!==t.inFullScreen&&setTimeout(function(){var e=a.getAnchor();e&&a.setState({anchor:e})},0)}},{key:"componentWillUnmount",value:function e(){this.node.parentElement&&this.node.parentElement.removeChild(this.node)}},{key:"getAnchor",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;if(t.anchor)return t.anchor;return n.getAnchor(t.getSelection())}},{key:"renderPreview",value:function e(){var t=this.props,a=t.link,i=t.className;var s=this.state.anchor;var n=a.href;var r=(0,f.t)("No Link URL");var o=(0,m.default)(b.default.container,i);return h.default.createElement("div",{className:o,style:s},h.default.createElement("a",{className:b.default.link,href:n,target:"_blank",title:(0,f.t)("Go to URL"),onMouseDown:function e(t){t.stopPropagation();t.preventDefault();window.open(t.currentTarget.href)}},h.default.createElement("span",{className:b.default.linkText},n||r)),h.default.createElement("button",{className:b.default.actionButton,onMouseDown:this.handleRemoveClick},h.default.createElement(v.T,{project:"src.shared"},"Remove")),h.default.createElement("button",{className:b.default.actionButton,onMouseDown:this.handleEditClick},h.default.createElement(v.T,{project:"src.shared"},"Edit")))}},{key:"render",value:function e(){var t=this.props,a=t.link,i=t.isOpen;if(!i||!this.state.anchor||!a||!a.href)return null;return g.default.createPortal(this.renderPreview(),this.node)}}]);return n}(h.default.Component);(0,p.default)(n,"propTypes",{anchor:s.default.shape({left:s.default.number,top:s.default.number}),link:s.default.shape({href:s.default.string,target:s.default.string}),onRemoveLink:s.default.func.isRequired,onEditLink:s.default.func.isRequired,isOpen:s.default.bool,inFullScreen:s.default.bool,getSelection:s.default.func});(0,p.default)(n,"defaultProps",{getSelection:function e(){return window.getSelection()},isOpen:false});(0,p.default)(n,"getAnchor",function(e){if(!e||0===e.rangeCount)return null;var t=e.getRangeAt(0).startContainer;if(!t)return null;t.getBoundingClientRect||(t=t.parentNode);var a=t.getBoundingClientRect(),i=a.bottom,s=a.left;return{top:i,left:Math.min(s,window.innerWidth-305)}});var _=n;t.default=_;e.exports=t.default},"./src/main/webapp/universal/src/shared/components/fields/TextEditor/components/LinkPreview.less":function(e,t,a){e.exports={container:"LinkPreview-container-2kZ8x shadows-windowShadow-8pyoU",link:"LinkPreview-link-2KjFj",linkText:"LinkPreview-linkText-31v4g",actionButton:"LinkPreview-actionButton-3mSO9"}},"./src/main/webapp/universal/src/shared/components/forms/CharacterCounter.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=s;var n=function e(t,a,i,s){var n=a.value.length;i.innerText="".concat(n," / ").concat(s);t.classList.toggle("error",n>s)};var i=function e(t){var a=t.querySelector("textarea");if(!a||a.dataset.characterCounter)return;a.dataset.characterCounter=true;var i;i=parseInt(t.dataset.maxLength,10);i=isNaN(i)?0:Math.max(i,0);if(0===i)return;var s=document.createElement("div");s.style.textAlign="right";t.appendChild(s);n(t,a,s,i);a.addEventListener("input",function(e){n(t,a,s,i)})};function s(e){Array.from(e.querySelectorAll(".textarea[data-max-length]")).forEach(i)}e.exports=t.default},"./src/main/webapp/universal/src/shared/constants/AutocompleteTypes.js":function(e,t,a){"use strict";var i={GIVEN_NAME:"given-name",FAMILY_NAME:"family-name",CITY:"city",STATE:"state",POSTAL_CODE:"postal-code",COUNTRY_NAME:"country-name",CC_FULL_NAME:"cc-full-name",CC_NUMBER:"cc-number",CC_EXP_MOTNH:"cc-exp-month",CC_EXP_YEAR:"cc-exp-year",CC_CSC:"cc-csc"};e.exports=i},"./src/main/webapp/universal/src/shared/constants/BlockAnimations.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts");var s={NONE:{value:"none",label:(0,i.t)("None")},FADE_IN:{value:"fade-in",label:(0,i.t)("Fade In")},FOCUS_IN:{value:"focus-in",label:(0,i.t)("Focus In")},SLIDE_UP:{value:"slide-up",label:(0,i.t)("Slide Up")},SLIDE_DOWN:{value:"slide-down",label:(0,i.t)("Slide Down")},SLIDE_FROM_LEFT:{value:"slide-from-left",label:(0,i.t)("Slide from Left")},SLIDE_FROM_RIGHT:{value:"slide-from-right",label:(0,i.t)("Slide from Right")},HORIZONTAL_CLIP:{value:"horizontal-clip",label:(0,i.t)("Horizontal Clip")},VERTICAL_CLIP:{value:"vertical-clip",label:(0,i.t)("Vertical Clip")},TILT_UP:{value:"tilt-up",label:(0,i.t)("Tilt Up")},TILT_DOWN:{value:"tilt-down",label:(0,i.t)("Tilt Down")},COLLIDE:{value:"collide",label:(0,i.t)("Collide")},REVEAL:{value:"reveal",label:(0,i.t)("Reveal")},CUSTOM:{value:"custom",label:(0,i.t)("Custom")},NO_ANIMATION:{value:"no-animation",label:(0,i.t)("No Animation")},SITE_DEFAULT:{value:"site-default",label:(0,i.t)("Site Default")}};var n=s;t.default=n;e.exports=t.default},"./src/main/webapp/universal/src/shared/constants/BlockTypeStrings.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/lodash/invert.js");var s=a("./common/temp/node_modules/lodash/mapValues.js");var n=a("./common/temp/node_modules/lodash/camelCase.js");var r=a("./common/temp/node_modules/lodash/startCase.js");var o=a("./src/main/webapp/frontend/packages/enums/BlockType.js");var l=i(o);var c=s(l,n);var u=s(l,r);e.exports={BlockTypeKeys:l,BlockTypeNames:c,BlockTypeLabels:u}},"./src/main/webapp/universal/src/shared/constants/BlockTypeToBetaFlags.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var n=i(a("./src/main/webapp/frontend/packages/enums/Flag.js"));var r=i(a("./src/main/webapp/frontend/packages/enums/BlockType.js"));var o=Object.freeze((0,s.default)({},r.default.MEMBER_AREA,[n.default.MEMBER_AREAS_BETA_V2,n.default.MEMBER_AREAS_GA]));var l=o;t.default=l;e.exports=t.default},"./src/main/webapp/universal/src/shared/constants/BlockVariantTypeKeys.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/lodash/invert.js");var s=a("./src/main/webapp/universal/src/shared/constants/BlockVariantTypes.js");e.exports=i(s)},"./src/main/webapp/universal/src/shared/constants/BlockVariantTypes.js":function(e,t,a){"use strict";var i={GALLERY_SLIDESHOW:1e3,GALLERY_CAROUSEL:1002,GALLERY_GRID:1003,GALLERY_STACK:1004,SUMMARY_WALL:1005,SUMMARY_CAROUSEL:1006,SUMMARY_LIST:1007,SUMMARY_GRID:1008,CHART_BAR:1009,CHART_LINE:1010,CHART_PIE:1011,IMAGE_INLINE:1012,IMAGE_POSTER:1013,IMAGE_CARD:1014,IMAGE_OVERLAP:1015,IMAGE_COLLAGE:1016,IMAGE_STACK:1017};e.exports=i},"./src/main/webapp/universal/src/shared/constants/BusinessHoursConstants.js":function(e,t,a){"use strict";var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts"),s=i.t;e.exports={HOUR_12:1,HOUR_24:2,LANG:{closed:s("Closed"),open:s("Open"),allDay:s("All Day")},TIME_TYPE:{start:"start",end:"end"},MAX_TIMESTAMP:1440}},"./src/main/webapp/universal/src/shared/constants/ChildGroups.js":function(e,t,a){"use strict";var i={GENERIC:null,DIGITAL_GOODS:"digitalGoods"};e.exports=i},"./src/main/webapp/universal/src/shared/constants/ConnectedAccountLinkConfigurations.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var n=a("./src/main/webapp/frontend/packages/enums/ExternalServiceProviders.js");var r=(0,s.default)({},n.CHOWNOW,{serviceId:n.CHOWNOW,displayName:"ChowNow",defaultLinkTitle:"Order Now",slug:"chownow"});e.exports=r},"./src/main/webapp/universal/src/shared/constants/DateTime.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.WEEKDAYS_SHORT=t.EN_MONTHS=void 0;var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts");var s=["January","February","March","April","May","June","July","August","September","October","November","December"];t.EN_MONTHS=s;var n=[(0,i.t)("Su"),(0,i.t)("Mo"),(0,i.t)("Tu"),(0,i.t)("We"),(0,i.t)("Th"),(0,i.t)("Fr"),(0,i.t)("Sa")];t.WEEKDAYS_SHORT=n},"./src/main/webapp/universal/src/shared/constants/FormBuilderDialogFields.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./src/main/webapp/universal/src/shared/constants/FormBuilderFields.js"));var n=a("./src/main/webapp/universal/src/shared/i18n/index.ts");var r=[{icon:"text",title:(0,n.t)("Text"),value:s.default.TEXT},{icon:"textarea",title:(0,n.t)("Text Area"),value:s.default.TEXT_AREA},{icon:"select",title:(0,n.t)("Select"),value:s.default.SELECT},{icon:"checkbox",title:(0,n.t)("Checkbox"),value:s.default.CHECKBOX},{icon:"radio",title:(0,n.t)("Radio"),value:s.default.RADIO},{icon:"likert",title:(0,n.t)("Survey"),value:s.default.LIKERT},{icon:"name",title:(0,n.t)("Name"),value:s.default.NAME},{icon:"password",title:(0,n.t)("Password"),value:s.default.PASSWORD},{icon:"address",title:(0,n.t)("Address"),value:s.default.ADDRESS},{icon:"twitter",title:(0,n.t)("Twitter"),value:s.default.TWITTER},{icon:"website",title:(0,n.t)("Website"),value:s.default.WEBSITE},{icon:"email",title:(0,n.t)("Email"),value:s.default.EMAIL},{icon:"date",title:(0,n.t)("Date"),value:s.default.DATE},{icon:"time",title:(0,n.t)("Time"),value:s.default.TIME},{icon:"phone",title:(0,n.t)("Phone"),value:s.default.PHONE},{icon:"number",title:(0,n.t)("Number"),value:s.default.NUMBER},{icon:"currency",title:(0,n.t)("Currency"),value:s.default.CURRENCY},{icon:"sectionbreak",title:(0,n.t)("Line"),value:s.default.SECTION},{icon:"hidden",title:(0,n.t)("Hidden"),value:s.default.HIDDEN}];var o=r;t.default=o;e.exports=t.default},"./src/main/webapp/universal/src/shared/constants/FormBuilderFieldNames.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./src/main/webapp/frontend/packages/enums/Flag.js"));var n=i(a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts"));var r={text:["description","placeholder","required"],textarea:["description","placeholder","required"],email:["description","placeholder","required"],currency:["description","currencySymbol","required"],number:["description","placeholder","required"],website:["description","placeholder","required"],password:["description","required"],twitter:["description","required"],date:["description","required"],time:["description","required"],name:["description","required"],address:["description","required"],phone:["description","showCountryCode","required"],section:["description","underline"],radio:["description","options","required"],checkbox:["description","options","required"],select:["description","options","required"],likert:["description","options","required"],hidden:["key","value"]};n.default.isFeatureEnabled(s.default.VANILLA_FORM_HANDLER)&&r.textarea.push("maxLength");var o=r;t.default=o;e.exports=t.default},"./src/main/webapp/universal/src/shared/constants/FormBuilderFields.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./src/main/webapp/frontend/packages/enums/Flag.js"));var n=a("./src/main/webapp/universal/src/shared/i18n/index.ts");var r=i(a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts"));var o={};o.TEXT={type:"text",id:null,locked:false,title:(0,n.t)("Text"),description:"",placeholder:"",required:false,text:true};o.TEXT_AREA={type:"textarea",id:null,locked:false,title:(0,n.t)("Text Area"),description:"",placeholder:"",required:false,textarea:true};r.default.isFeatureEnabled(s.default.VANILLA_FORM_HANDLER)&&(o.TEXT_AREA.maxLength="");o.EMAIL={type:"email",id:null,locked:false,title:(0,n.t)("Email"),description:"",placeholder:"",required:false,email:true};o.CURRENCY={type:"currency",id:null,locked:false,title:(0,n.t)("Currency"),description:"",currencySymbol:"$",required:false,currency:true};o.NUMBER={type:"number",id:null,locked:false,title:(0,n.t)("Number"),description:"",placeholder:"",required:false,number:true};o.WEBSITE={type:"website",id:null,locked:false,title:(0,n.t)("Website"),description:"",placeholder:"",required:false,website:true};o.PASSWORD={type:"password",id:null,locked:false,title:(0,n.t)("Password"),description:"",required:false,password:true};o.TWITTER={type:"twitter",id:null,locked:false,title:(0,n.t)("Twitter"),description:"",required:false,twitter:true};o.DATE={type:"date",id:null,locked:false,title:(0,n.t)("Date"),description:"",required:false,date:true};o.TIME={type:"time",id:null,locked:false,title:(0,n.t)("Time"),description:"",required:false,time:true};o.NAME={type:"name",id:null,locked:false,title:(0,n.t)("Name"),description:"",required:false,name:true};o.ADDRESS={type:"address",id:null,locked:false,title:(0,n.t)("Address"),description:"",required:false,address:true};o.PHONE={type:"phone",id:null,locked:false,title:(0,n.t)("Phone"),description:"",showCountryCode:false,required:false,phone:true};o.SECTION={type:"section",id:null,locked:false,title:(0,n.t)("Section"),description:"",underline:true,section:true};o.RADIO={type:"radio",id:null,locked:false,title:(0,n.t)("Radio"),description:"",options:[(0,n.t)("Option One"),(0,n.t)("Option Two")],required:false,radio:true};o.CHECKBOX={type:"checkbox",id:null,locked:false,title:(0,n.t)("Checkbox"),description:"",options:[(0,n.t)("Option One"),(0,n.t)("Option Two")],required:false,checkbox:true};o.SELECT={type:"select",id:null,locked:false,title:(0,n.t)("Select"),description:"",options:[(0,n.t)("Option One"),(0,n.t)("Option Two")],required:false,select:true};o.LIKERT={type:"likert",id:null,locked:false,title:(0,n.t)("Survey"),description:"",options:[(0,n.t)("Option One"),(0,n.t)("Option Two")],required:false,likert:true};o.HIDDEN={type:"hidden",id:null,locked:false,title:(0,n.t)("Hidden"),description:"",required:false,hidden:true};var l=o;t.default=l;e.exports=t.default},"./src/main/webapp/universal/src/shared/constants/FormModelFieldsets.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i={BUILD:1,STORAGE:2,ADVANCED:3,CAPTCHA:4,DISCLAIMER:5};var s=i;t.default=s;e.exports=t.default},"./src/main/webapp/universal/src/shared/constants/FrameMessageType.js":function(e,t,a){"use strict";var i=a("./src/main/webapp/frontend/packages/enums/AuthenticationFrameMessageType.js");var s={AUTHENTICATED:i.AUTHENTICATED,REDIRECT:i.REDIRECT,CLOSE:"close",STEP_CHANGE:"step-change",CART_UPDATE:"cart"};e.exports=s},"./src/main/webapp/universal/src/shared/constants/GalleryBlockConstants.js":function(e,t,a){"use strict";var i={DEFAULT_SLIDER_ASPECT_RATIO:50,RERENDER_ATTR_WHITELIST:["aspectRatio","autoplay","autoplay-duration","lightbox","lightboxTheme","methodOption","padding","thumbnail-strip-height","thumbnail-strip-margin","transientGallery","vSize"]};e.exports=i},"./src/main/webapp/universal/src/shared/constants/GalleryOptions.js":function(e,t,a){"use strict";var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts"),s=i.t;var n={design:{title:s("Gallery Design"),description:s("Gallery designs give you a variety of ways to display images."),type:"multiOption",defaultValue:"grid",options:{slideshow:{title:s("Slideshow"),values:{thumbnails:true},icon:"slideshow"},slider:{title:s("Carousel"),values:{thumbnails:false},icon:"carousel"},grid:{title:s("Grid"),values:{thumbnails:false,autoplay:false},icon:"grid"},stacked:{title:s("Stacked"),values:{thumbnails:false,autoplay:false},icon:"stacked"}}},autoplay:{type:"boolean",title:s("Automatically Transition Between Slides"),defaultValue:false,onlyFor:["design:slideshow","design:slider","design:standard"]},"autoplay-duration":{type:"slider",title:s("Autoplay Delay (Seconds)"),description:s("Seconds between autoplay transitions."),min:1,max:10,defaultValue:5,onlyFor:["autoplay:true"]},controls:{type:"boolean",defaultValue:false,title:s("Show Next and Previous Controls"),onlyFor:["design:slideshow","design:slider","design:standard"]},"auto-crop":{type:"boolean",title:s("Automatically Crop Images"),defaultValue:true,onlyFor:["design:slideshow","design:standard"]},"aspect-ratio":{title:s("Aspect Ratio"),type:"select",defaultValue:"square",options:{square:{title:s("1:1 Square")},standard:{title:s("3:2 Standard")},"standard-vertical":{title:s("2:3 Standard (Vertical)")},"four-three":{title:s("4:3 Four-Three")},"three-four-vertical":{title:s("3:4 Three-Four (Vertical)")},widescreen:{title:s("16:9 Widescreen")},"anamorphic-widescreen":{title:s("2.40 Anamorphic Widescreen")}},onlyFor:["design:grid"]},"square-thumbs":{type:"boolean",title:s("Crop Images"),description:s("Crop images to the aspect ratio."),defaultValue:true,onlyFor:["design:grid","design:standard"]},thumbnails:{type:"boolean",defaultValue:false,title:s("Show Thumbnails"),onlyFor:["design:slideshow"]},"thumbnail-strip-height":{type:"slider",title:s("Thumbnail Strip Height"),description:s("Select the thumbnail strip height."),min:0,max:200,defaultValue:80,onlyFor:["thumbnails:true"]},"thumbnail-strip-margin":{type:"slider",title:s("Thumbnail Strip Margin"),description:s("Select the distance between the main image and the thumbnail strip."),min:0,max:60,defaultValue:20,onlyFor:["thumbnails:true"]},"show-meta-basic":{type:"boolean",title:s("Show Title and Description"),defaultValue:true,onlyFor:["design:stacked"]},"show-meta":{type:"boolean",title:s("Show Title and Description"),defaultValue:true,onlyFor:["design:slideshow"]},"show-meta-only-title":{type:"boolean",title:s("Show Title"),description:s("Show the title below the image"),defaultValue:false,onlyFor:["design:grid"]},"meta-position":{title:s("Title and Description Position"),description:s("Control the location of the Image's Title and Description."),type:"select",padding:[10,0],defaultValue:"bottom",options:{top:{title:s("Top")},"top-left":{title:s("Top Left")},"top-right":{title:s("Top Right")},center:{title:s("Center")},bottom:{title:s("Bottom")},"bottom-left":{title:s("Bottom Left")},"bottom-right":{title:s("Bottom Right")}},onlyFor:["show-meta:true"]},"show-meta-on-hover":{type:"boolean",title:s("Show on Hover"),defaultValue:false,description:s("Show the title and description only on hover."),onlyFor:["show-meta:true"]},"active-alignment":{title:s("Active Alignment"),description:s("Where does the active image align to in the slider."),type:"select",defaultValue:"center",options:{left:{title:s("Left")},center:{title:s("Center")},right:{title:s("Right")}},onlyFor:["design:slider"]},"thumbnails-per-row":{type:"slider",title:s("Thumbnails Per Row"),description:s("Choose the thumbnails per row."),min:1,max:10,defaultValue:4,labelWidth:33,onlyFor:["design:grid","design:standard"]},padding:{type:"slider",title:s("Padding"),description:s("Padding around the gridded images."),min:0,max:50,defaultValue:20,labelWidth:33,onlyFor:["design:grid","design:autocolumns","design:standard"]},lightbox:{type:"boolean",defaultValue:false,title:s("Lightbox"),description:s("Clicking on the images will pop the image up in a lightbox."),onlyFor:["design:grid","design:autocolumns"]},lightboxTheme:{type:"select",defaultValue:"dark",title:s("Lightbox Theme"),options:{dark:{title:s("Dark Overlay")},light:{title:s("Light Overlay")}},onlyFor:["lightbox:true"]},"max-width":{type:"slider",title:s("Max Width"),description:s("Maximum width for each column"),min:100,max:300,defaultValue:300,onlyFor:["design:autocolumns"]},newWindow:{type:"boolean",defaultValue:false,title:s("Open Links in New Window"),description:s("Images with links will open in a new window.")},transparentBackground:{type:"boolean",defaultValue:false,title:s("Transparent Background"),description:s("Remove the color behind uncropped or transparent images."),onlyFor:["auto-crop:false","design:slideshow"],matchAllOnlyFor:true}};e.exports=n},"./src/main/webapp/universal/src/shared/constants/GooglePlaces.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.googleTrackingContextProp=t.DETAILS_URL=t.AUTOCOMPLETE_URL=void 0;var i=a("./common/temp/node_modules/prop-types/index.js");var s="/api/google-maps/places/autocomplete";t.AUTOCOMPLETE_URL=s;var n="/api/google-maps/places/details";t.DETAILS_URL=n;var r=(0,i.shape)({productPage:i.string.isRequired,productSection:i.string.isRequired});t.googleTrackingContextProp=r},"./src/main/webapp/universal/src/shared/constants/MediaProcessingErrors.js":function(e,t,a){"use strict";var i={UPLOAD:1,PROCESSING:2};e.exports=i},"./src/main/webapp/universal/src/shared/constants/PanelDirectionClasses.js":function(e,t,a){"use strict";var i={INCOMING:{LEFT:"incomingLeft",RIGHT:"incomingRight"},OUTGOING:{LEFT:"outgoingLeft",RIGHT:"outgoingRight"},INCOMING_PANEL:"incomingPanel"};e.exports=i},"./src/main/webapp/universal/src/shared/constants/PinterestSelectors.js":function(e,t,a){"use strict";var i={BLOGS:['body.collection-type-blog [data-type="item"]','body.collection-type-blog [data-type="promoted-block"]','[class*="collection-type-blog"]'],BLOGS_AND_PAGES:['body.collection-type-blog [data-type="item"]','body.collection-type-blog [data-type="promoted-block"]','[class*="collection-type-page"]','[class*="collection-type-blog"]','[class*="collection-type-products"]','[data-type="page"]',"#productList","#productlist","#productGallery",".ProductList",".sqs-system-gallery","#flowItems",".productlist",".productitem-images",".sqs-pinterest-products-wrapper"],VALID_IMAGE_CONTAINER:[".sqs-block-image",".sqs-gallery-block-stacked",".sqs-gallery-block-grid",".sqs-gallery-block-slideshow",".sqs-block-html",".product-image","#productGallery","#productSlideshow",".ProductList-item",".product",".productlist-item",".sqs-system-gallery .slides .slide","article.flow-item",".productitem-images",".sqs-pinterest-products-wrapper",'[data-controller="ProductListImageLoader"]'],TRIGGER_SELECTORS:[".sqs-block-image",".sqs-gallery-block-stacked",".sqs-gallery-block-grid",".sqs-gallery-block-slideshow",".sqs-block-html img",".product-image","#productGallery .slide img","#productSlideshow",".ProductList-item",".product",'[class^="products"]',".productlist-item",".sqs-system-gallery","#flowItems",".productitem-images",".sqs-pinterest-image img",".sqs-pinterest-products-wrapper img"]};e.exports=i},"./src/main/webapp/universal/src/shared/constants/PopupOverlayLocalStorage.js":function(e,t,a){"use strict";e.exports={CLOSED_DATE:"date-closed",KEY:"squarespace-popup-overlay",VERSION:"version",SUBMITTED:"submitted"}},"./src/main/webapp/universal/src/shared/constants/PublicApiEvent.ts":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i;(function(e){e["API_KEY_CREATION_MODAL_COPY"]="api_key_creation_modal_copy";e["API_KEY_CREATION_MODAL_CANCEL"]="api_key_creation_modal_cancel";e["API_KEY_CREATION_MODAL_NEXT"]="api_key_creation_modal_next";e["API_KEY_CREATION_MODAL_COMPLETE"]="api_key_creation_modal_complete";e["API_KEYS_PANEL_CREATE_KEY"]="api_keys_panel_create_key";e["API_KEYS_PANEL_LEARN_MORE"]="api_keys_panel_learn_more";e["API_KEYS_PANEL_TERMS_OF_USE"]="api_keys_panel_terms_of_use";e["API_KEYS_PANEL_DELETE_KEY"]="api_keys_panel_delete_key";e["API_KEYS_PANEL_DELETE_KEY_CONFIRM"]="api_keys_panel_delete_key_confirm"})(i=i||{});var s=i;t.default=s;e.exports=t.default},"./src/main/webapp/universal/src/shared/constants/SliceTypeByName.js":function(e,t,a){"use strict";var i=a("./src/main/webapp/frontend/packages/enums/SliceType.js");var s={heading:i.HEADING,"sub-heading":i.SUB_HEADING,body:i.BODY,image:i.IMAGE,gallery:i.GALLERY,video:i.VIDEO,"social-icons":i.SOCIAL_ICONS,buttons:i.BUTTONS,navigation:i.NAVIGATION,"custom-form":i.CUSTOM_FORM,newsletter:i.NEWSLETTER,album:i.ALBUM,map:i.MAP,lock:i.LOCK,password:i.PASSWORD,twitter:i.TWITTER,logo:i.LOGO,action:i.ACTION,"popup-overlay-action":i.POPUP_OVERLAY_ACTION,"temp-lock-inject":i.TEMP_LOCK_INJECT};e.exports=s},"./src/main/webapp/universal/src/shared/constants/SliceTypeNames.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var n;var r=a("./src/main/webapp/frontend/packages/enums/SliceType.js");var o=(n={},(0,s.default)(n,r.HEADING,"heading"),(0,s.default)(n,r.SUB_HEADING,"sub-heading"),(0,s.default)(n,r.BODY,"body"),(0,s.default)(n,r.IMAGE,"image"),(0,s.default)(n,r.GALLERY,"gallery"),(0,s.default)(n,r.VIDEO,"video"),(0,s.default)(n,r.SOCIAL_ICONS,"social-icons"),(0,s.default)(n,r.BUTTONS,"buttons"),(0,s.default)(n,r.NAVIGATION,"navigation"),(0,s.default)(n,r.CUSTOM_FORM,"custom-form"),(0,s.default)(n,r.NEWSLETTER,"newsletter"),(0,s.default)(n,r.ALBUM,"album"),(0,s.default)(n,r.MAP,"map"),(0,s.default)(n,r.LOCK,"lock"),(0,s.default)(n,r.PASSWORD,"password"),(0,s.default)(n,r.TWITTER,"twitter"),(0,s.default)(n,r.LOGO,"logo"),(0,s.default)(n,r.ACTION,"action"),(0,s.default)(n,r.POPUP_OVERLAY_ACTION,"popup-overlay-action"),(0,s.default)(n,r.TEMP_LOCK_INJECT,"temp-lock-inject"),n);e.exports=o},"./src/main/webapp/universal/src/shared/constants/SlideTypeByName.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/lodash/invert.js");var s=a("./src/main/webapp/universal/src/shared/constants/SlideTypeNames.js");e.exports=i(s)},"./src/main/webapp/universal/src/shared/constants/TweakEvents.js":function(e,t,a){"use strict";var i={CHANGE:"tweak:change",CLOSE:"tweak:close",SAVE:"tweak:save",RESET:"tweak:reset",AFTER_SHOW:"tweak:aftershow",AFTER_CLOSE:"tweak:afterclose",BEFORE_OPEN:"tweak:beforeopen"};e.exports=i},"./src/main/webapp/universal/src/shared/constants/commerce/BillingPeriodUnits.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i={WEEK:"WEEK",MONTH:"MONTH",YEAR:"YEAR"};var s=i;t.default=s;e.exports=t.default},"./src/main/webapp/universal/src/shared/constants/commerce/CommerceEvent.ts":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i;(function(e){e["CART_PAGE_PRODUCT_FORM_OPEN"]="commerce_cart_page_product_form_open";e["CART_PAGE_PRODUCT_FORM_CLOSE"]="commerce_cart_page_product_form_close";e["CART_PAGE_PRODUCT_FORM_SUBMIT"]="commerce_cart_page_product_form_submit";e["CART_PAGE_LOADED"]="commerce_cart_page_loaded";e["CHECKOUT_PAGE_EXTRA_PAYMENT_AUTHENTICATION_REQUIRED"]="commerce_checkout_page_extra_payment_authentication_required";e["CHECKOUT_PAGE_EXTRA_PAYMENT_AUTHENTICATION_FAILURE"]="commerce_checkout_page_extra_payment_authentication_failure";e["CHECKOUT_PAGE_EXTRA_PAYMENT_AUTHENTICATION_SUCCESS"]="commerce_checkout_page_extra_payment_authentication_success";e["CHECKOUT_PAGE_EXTRA_PAYMENT_AUTHENTICATION_REQUIRED_TEST_MODE"]="commerce_checkout_page_extra_payment_authentication_required_test_mode";e["CHECKOUT_PAGE_EXTRA_PAYMENT_AUTHENTICATION_FAILURE_TEST_MODE"]="commerce_checkout_page_extra_payment_authentication_failure_test_mode";e["CHECKOUT_PAGE_EXTRA_PAYMENT_AUTHENTICATION_SUCCESS_TEST_MODE"]="commerce_checkout_page_extra_payment_authentication_success_test_mode";e["CHECKOUT_PAGE_EXTRA_PAYMENT_AUTHENTICATION_REQUIRED_APPLE_PAY"]="commerce_checkout_page_extra_payment_authentication_required_apple_pay";e["CHECKOUT_PAGE_PRODUCT_FORM_OPEN"]="commerce_checkout_page_product_form_open";e["CHECKOUT_PAGE_PRODUCT_FORM_CLOSE"]="commerce_checkout_page_product_form_close";e["CHECKOUT_PAGE_PRODUCT_FORM_SUBMIT"]="commerce_checkout_page_product_form_submit";e["CHECKOUT_PAGE_LOADED"]="commerce_checkout_page_loaded";e["INITIATE_CHECKOUT"]="InitiateCheckout";e["CHECKOUT_PAGE_ADD_PAYMENT"]="AddPaymentInfo";e["CREATE_CUSTOMER_ACCOUNT"]="CompleteRegistration";e["ADD_TO_CART"]="AddToCart";e["SEARCH"]="Search";e["SUBSCRIBE_NEWSLETTER"]="Lead";e["VIEW_PRODUCT_PAGE"]="ViewContent";e["PURCHASE"]="Purchase";e["INVENTORY_PANEL_SEARCH_PRODUCTS"]="commerce_inventory_panel_search_products";e["INVENTORY_PANEL_SORT_ON_NAME"]="commerce_inventory_panel_sort_on_name";e["INVENTORY_PANEL_SORT_ON_STOCK"]="commerce_inventory_panel_sort_on_stock";e["INVENTORY_PANEL_SORT_ON_PRICE"]="commerce_inventory_panel_sort_on_price";e["INVENTORY_PANEL_CLICK_ROW_EXPANDER"]="commerce_inventory_panel_click_row_expander";e["INVENTORY_PANEL_CLICK_ROW"]="commerce_inventory_panel_click_row";e["INVENTORY_PANEL_CLICK_NEXT_PAGE"]="commerce_inventory_panel_click_next_page";e["INVENTORY_PANEL_SETTINGS_OPEN"]="commerce_inventory_panel_settings_open";e["INVENTORY_PANEL_SETTINGS_CLOSE"]="commerce_inventory_panel_settings_close";e["INVENTORY_PANEL_SETTINGS_SAVE"]="commerce_inventory_panel_settings_save";e["INVENTORY_PANEL_SETTINGS_TOGGLE_SCARCITY_PDP"]="commerce_inventory_panel_settings_toggle_scarcity_pdp";e["INVENTORY_PANEL_SETTINGS_TOGGLE_SCARCITY_BLOCKS"]="commerce_inventory_panel_settings_toggle_scarcity_blocks";e["INVENTORY_PANEL_SETTINGS_CHANGE_SCARCITY_THRESHOLD"]="commerce_inventory_panel_settings_change_scarcity_threshold";e["INSTAGRAM_PRODUCTS_FEED_URL_COPY"]="commerce_instagram_products_feed_url_copy";e["FACEBOOK_DYNAMIC_ADS_PRODUCTS_FEED_URL_COPY"]="commerce_facebook_ads_feed_url_copy";e["FACEBOOK_PIXEL_SAVE_ID"]="commerce_facebook_pixel_save_id"})(i=i||{});var s=i;t.default=s;e.exports=t.default},"./src/main/webapp/universal/src/shared/constants/commerce/CommerceSelectors.ts":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.PRODUCT_PRICE_SELECTORS=t.PRODUCT_TITLE_SELECTORS=t.DIGITAL_PRODUCT_DETAIL_PAGE_SELECTORS=t.PRODUCT_LIST_PAGE_SELECTORS=t.PRODUCT_DETAIL_PAGE_SELECTORS=t.TEMPLATE_CART_SUBTOTAL_CLASS=t.TEMPLATE_CART_QUANTITY_CLASS=t.TEMPLATE_CART_INITIALIZED_CLASS=t.TEMPLATE_CART_CLASS=t.TEMPLATE_CART_CONTAINER_CLASS=t.TEMPLATE_CART_INDICATOR_CLASS=t.FULL_PAGE_CART_CONTAINER_ID=t.FULL_PAGE_CART_ROOT_ID=t.CART_PILL_CLASS=t.CART_PILL_DEFAULT_CONTAINER_CLASS=t.CART_PILL_TEMPLATE_CONTAINER_CLASS=t.ADD_TO_CART_BUTTON_CONTAINER_CLASS=void 0;var i="sqs-add-to-cart-button-wrapper";t.ADD_TO_CART_BUTTON_CONTAINER_CLASS=i;var s="sqs-cart-dropzone";t.CART_PILL_TEMPLATE_CONTAINER_CLASS=s;var n="absolute-cart-box";t.CART_PILL_DEFAULT_CONTAINER_CLASS=n;var r="sqs-pill-shopping-cart";t.CART_PILL_CLASS=r;var o="sqs-cart-root";t.FULL_PAGE_CART_ROOT_ID=o;var l="sqs-cart-container";t.FULL_PAGE_CART_CONTAINER_ID=l;var c="sqs-has-custom-cart";t.TEMPLATE_CART_INDICATOR_CLASS=c;var u="sqs-custom-cart";t.TEMPLATE_CART_CONTAINER_CLASS=u;var d="sqs-template-integrated-shopping-cart";t.TEMPLATE_CART_CLASS=d;var p="sqs-cart-initialized";t.TEMPLATE_CART_INITIALIZED_CLASS=p;var h="sqs-cart-quantity";t.TEMPLATE_CART_QUANTITY_CLASS=h;var g="sqs-cart-subtotal";t.TEMPLATE_CART_SUBTOTAL_CLASS=g;var m=["#productDetails",".product-variants",".ProductItem"];t.PRODUCT_DETAIL_PAGE_SELECTORS=m;var f=["#productList",".ProductList-grid"];t.PRODUCT_LIST_PAGE_SELECTORS=f;var v=["#productWrapper",".ProductItem"];t.DIGITAL_PRODUCT_DETAIL_PAGE_SELECTORS=v;var b=[".product-title",".ProductItem-details-title"];t.PRODUCT_TITLE_SELECTORS=b;var S=[".product-price"];t.PRODUCT_PRICE_SELECTORS=S},"./src/main/webapp/universal/src/shared/constants/menuDemoContent.js":function(e,t,a){"use strict";var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts"),s=i.t;var n=a("./src/main/webapp/universal/src/shared/utils/formatting/substituteString.js");var r={menuTitle:s("MEALS"),sandwichesTitle:s("Sandwiches"),lePaysanSandwichTitle:s("LE PAYSAN"),lePaysanIngredients:s("Smoked Turkey, Brie & apple chutney\n$14"),sohoSandwichTitle:s("SOHO MEDITERRANEAN SANDWICH"),sohoSandwichIngredients:s("Hummus, grilled vegetables & halloumi cheese\n$15"),steakSandwichTitle:s("STEAK SANDWICH"),steakSandwichIngredients:s("Steak w/ onions, bacon & cheddar\n$18"),pastaTitle:s("Pasta"),gramignaTitle:s("GRAMIGNA"),gramignaPastaIngredients:s("macaroni, pork sausage, swiss chard, black pepper\n$20"),garganelliTitle:s("GARGANELLI"),garganelliPastaIngredients:s("pasta quills, cream, peas, truffle butter, prosciutto\n$22"),spallinaTitle:s("SPALLINA"),spallinaPastaIngredients:s("double ravioli, squacquerone cheese, rabbit, porcini\n$24"),drinksTitle:s("DRINKS"),wineTitle:s("Wine"),wine1:s("Sauvignon Blanc, Kim Crawford, Imalborough\n$12.00 glass /  $45.00 bottle"),wine2:s("Meursault, Mat Rot, Burgundy, France\n$13 glass / $80 bottle")};var o=n("{menuTitle}\n=========\n\n{sandwichesTitle}\n----------\n\n{lePaysanSandwichTitle}\n{lePaysanIngredients}\n\n{sohoSandwichTitle}\n{sohoSandwichIngredients}\n\n{steakSandwichTitle}\n{steakSandwichIngredients}\n\n\n{pastaTitle}\n------\n\n{gramignaTitle}\n{gramignaPastaIngredients}\n\n{garganelliTitle}\n{garganelliPastaIngredients}\n\n{spallinaTitle}\n{spallinaPastaIngredients}\n\n\n{drinksTitle}\n=========\n\n{wineTitle}\n----\n\n{wine1}\n\n{wine2}",r);e.exports=o},"./src/main/webapp/universal/src/shared/images/standard/icon_form_42_light.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAALBJREFUeNrs1rEKhDAMgOH2Bm/s7c7Cvam+2r2Nh5MuNYvgYMTelTbCXwiELn6kTayPMbo7rIe7yQIKFChQoECBZoX2ErFS9Ecgr7yeZommUvEWiedV6Lb5kvgWAgaJcXOlQn3haqrfvdpM4+4OTZa7/r3LuxrQlKMvcR3+PnoGPlCgmaCtkpuDfpTc5Bw1/QsNBZHhl4qae+ZpFR0qNviQUlHmKFCgQIECBXq6VgEGAAGdTEngMZ9oAAAAAElFTkSuQmCC"},"./src/main/webapp/universal/src/shared/productBlocks.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var l=".sqs-product-block-variant-image";var i=function e(t){var a=t.e,i=t.blockEl;var s=a.detail.selectedVariant;var n=s.mainImage;if(!n)return;var r=i.querySelector("".concat(l,".shown"));r&&r.classList.remove("shown");var o=i.querySelector("".concat(l,'[data-image-id="').concat(n.id,'"]'));o&&o.classList.add("shown")};var s=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;var a=t.querySelectorAll(".sqs-block-product");if(!a.length)return;a.forEach(function(t){var e=t.querySelector(".product-variants");e&&e.addEventListener("variant:change",function(e){return i({e:e,blockEl:t})})})};var n={initializeProductBlocks:s};t.default=n;e.exports=t.default},"./src/main/webapp/universal/src/shared/productVariants.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./src/main/webapp/universal/src/shared/i18n/commerce/MoneyFormatterProvider.ts"));var n=i(a("./src/main/webapp/universal/src/shared/utils/commerce/StoreCurrencyManager.js"));var o=a("./src/main/webapp/universal/src/shared/utils/commerce/SubscriptionUtils.js");var r=i(a("./src/main/webapp/universal/src/shared/utils/currency/MoneyUtils.js"));var l=a("./src/main/webapp/universal/src/shared/i18n/index.ts");var c=i(a("./common/temp/node_modules/@sqs/error-reporter/dist/index.js"));var d=i(a("./common/temp/node_modules/lodash/get.js"));var p=i(a("./common/temp/node_modules/lodash/pickBy.js"));var u="tweak-product-basic-item-variant-picker-layout-boxes";var h="data-variant-option-name";function g(e){var t=n.default.getStoreCurrency();var a=r.default.fromCents(e,t);return s.default.formatter.format(a)}function m(t,a){return Object.keys(t).every(function(e){return t[e]===a[e]})}function v(e,a){return e.find(function(e){var t=e.attributes;return m(a,t)})}function b(e){return e.unlimited||e.qtyInStock>0}function f(){var e=(0,l.t)("Sold Out");var t=(0,d.default)(window,["Static","SQUARESPACE_CONTEXT","websiteSettings","storeSettings","merchandisingSettings","customSoldOutText"]);return t||e}function S(e,t){return e.filter(function(e){return!!m(t,e.attributes)&&!b(e)})}function y(){return!!document.querySelector(".".concat(u))}function _(e){e.forEach(function(e){e.forEach(function(e){e.value&&(e.innerHTML=e.value)})})}function C(e,t,a){if(!t){e.textContent=(0,l.t)("Unavailable");return}if(t.onSale){e.textContent=g(t.salePrice);var i=a.createElement("span");i.textContent=" ";e.appendChild(i);var s=a.createElement("span");s.className="original-price";s.textContent=g(t.price);e.appendChild(s)}else e.textContent=g(t.price)}function E(e,t,a,i){if(!a||!t){e.textContent=(0,l.t)("Unavailable");return}var s=JSON.parse(t);if(a.onSale){e.textContent=(0,o.getSubscriptionPriceString)(s,g(a.salePrice));var n=i.createElement("span");n.textContent=" ";e.appendChild(n);var r=i.createElement("span");r.className="original-price";r.textContent=(0,o.getSubscriptionPriceString)(s,g(a.price));e.appendChild(r)}else e.textContent=(0,o.getSubscriptionPriceString)(s,g(a.price))}function w(e,t,a){if(e)t.setAttribute("data-variant-in-stock",e);else{var i=f();var s=a.createElement("div");s.className="variant-out-of-stock";s.textContent=i;t.appendChild(s)}}function A(a,e){var t=e.parentElement.querySelectorAll(".product-scarcity[data-variant-attributes]");t.forEach(function(e){if(!a){e.hidden=true;return}try{var t=JSON.parse(e.dataset.variantAttributes);m(t,a.attributes)&&e.hidden?e.hidden=false:e.hidden=true}catch(e){c.default.trackCaughtError("common","updateScarcityAlert",e.stack)}})}function T(t,e){var a=e.parentElement.querySelectorAll(".product-restock-notification");a.forEach(function(e){if(!t){e.hidden=true;return}t.id===e.getAttribute("data-variant-id")?e.hidden=false:e.hidden=true})}function I(e){var i={};var s=[];e.forEach(function(e){var t=e.value;var a=e.getAttribute(h);0===e.selectedIndex?s.push(a):i[a]=t});return{optionSelections:i,unselectedOptions:s}}function q(e){var s={};var n=[];e.forEach(function(e){var t=e.getAttribute(h);var a=Array.from(e.getElementsByTagName("input"));var i=a.find(function(e){return e.checked});i?s[t]=i.value:n.push(t)});return{optionSelections:s,unselectedOptions:n}}function k(e,t,a){var i=I(t),s=i.optionSelections,n=i.unselectedOptions;var r=e.target.getAttribute(h);if(1===n.length&&r!==n[0])return;if(n.length<=1){var o=t.find(function(e){return e.getAttribute(h)===r});var l=(0,p.default)(s,function(e,t){return t!==r});var c=S(a,l);var u=f();o.forEach(function(t){c.forEach(function(e){t.value===e.attributes[r]&&(t.innerHTML="".concat(t.value," (").concat(u,")"))})})}}function L(e,t){var a=q(e),i=a.optionSelections,s=a.unselectedOptions;e.forEach(function(e){var t=e.getElementsByClassName("variant-radiobtn");t.forEach(function(e){e.classList.remove("variant-unavailable")})});if(1===s.length){var n=s[0];var r=e.find(function(e){return e.getAttribute(h)===n});var o=(0,p.default)(i,function(e,t){return t!==n});var l=S(t,o);var c=r.getElementsByClassName("variant-radiobtn");c.forEach(function(t){l.forEach(function(e){t.value===e.attributes[n]&&t.classList.add("variant-unavailable")})})}}function D(e){var t=e.productVariantsEl,a=e.productVariants,i=e.optionSelects,s=e.radioButtonWrappers,n=e.productPriceEl,r=e.initialPriceHTML,o=e.doc;t.removeAttribute("data-unselected-options");t.removeAttribute("data-selected-variant");t.removeAttribute("data-variant-in-stock");Array.from(t.getElementsByClassName("variant-out-of-stock")).forEach(function(e){return e.remove()});var l;var c;if(y()){var u=q(s);l=u.optionSelections;c=u.unselectedOptions}else{var d=I(i);l=d.optionSelections;c=d.unselectedOptions}t.setAttribute("data-unselected-options",JSON.stringify(c));if(c.length>0){n&&n.innerHTML!==r&&(n.innerHTML=r);A(null,t);T(null,t)}else{var p=v(a,l);var h=!!p;if(h){t.setAttribute("data-selected-variant",JSON.stringify(p));t.dispatchEvent(new CustomEvent("variant:change",{detail:{selectedVariant:p}}))}if(n){var g="true"===t.getAttribute("data-is-subscribable");if(g){var m=t.getAttribute("data-subscription-plan");E(n,m,p,o)}else C(n,p,o)}if(h){var f=b(p);w(f,t,o)}A(p,t);T(p,t)}}function N(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;var t;var a=(0,d.default)(window,["Static","SQUARESPACE_CONTEXT","websiteSettings","storeSettings","merchandisingSettings","soldOutVariantsDropdownDisabled"]);var i=(0,d.default)(window,["Static","SQUARESPACE_CONTEXT","websiteSettings","storeSettings","merchandisingSettings","restockNotificationsEnabled"]);var u=!i&&!a;t=e?Array.from(e.getElementsByClassName("product-variants")):Array.from(c.getElementsByClassName("product-variants"));t.filter(function(e){return e.getAttribute("data-variants")}).forEach(function(t){var a=JSON.parse(t.getAttribute("data-variants"));var i=Array.from(t.getElementsByTagName("select"));var s=Array.from(t.getElementsByClassName("variant-radiobtn-wrapper"));var n=t.parentElement.getElementsByClassName("product-price")[0];var r;n&&(r=n.innerHTML);D({productVariantsEl:t,productVariants:a,optionSelects:i,radioButtonWrappers:s,productPriceEl:n,initialPriceHTML:r,doc:c});for(var e=0,o=i;e<o.length;e++){var l=o[e];l.addEventListener("change",function(e){D({productVariantsEl:t,productVariants:a,optionSelects:i,radioButtonWrappers:s,productPriceEl:n,initialPriceHTML:r,doc:c});u&&_(i)});u&&l.addEventListener("mousedown",function(e){_(i);k(e,i,a)})}s.forEach(function(e){e.addEventListener("click",function(e){D({productVariantsEl:t,productVariants:a,optionSelects:i,radioButtonWrappers:s,productPriceEl:n,initialPriceHTML:r,doc:c});L(s,a)})})})}var R={initializeVariantDropdowns:N};t.default=R;e.exports=t.default},"./src/main/webapp/universal/src/shared/styles/sentinel.less":function(e,t,a){e.exports={overlay:"sentinel-overlay-3gTl0",close:"sentinel-close-3D8TS icons-clearLight-pi2yL",container:"sentinel-container-3GtXT",button:"sentinel-button-nRUOU buttons-minor-2x1Qd buttons-button-1_-9w buttons-kiwi-16ajz",desktopLogo:"sentinel-desktopLogo-3jS8h icons-squarespaceLight-3SdfV",desktopHeader:"sentinel-desktopHeader-1rjLn",mobileLogo:"sentinel-mobileLogo-32jqG icons-squarespaceLight-3SdfV",mobileHeader:"sentinel-mobileHeader-KoiVX",title:"sentinel-title-2bv_h",link:"sentinel-link-aJDCJ",anchor:"sentinel-anchor-Gm-CQ",message:"sentinel-message-1qvzb"}},"./src/main/webapp/universal/src/shared/utils/BlockAnimationsInitializer.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.initializeAnimations=t.polyfillAndObserve=void 0;var s=a("./src/main/webapp/universal/src/shared/utils/ClassBasedState.js");var n=i(a("./src/main/webapp/universal/src/shared/utils/polyfillIntersectionObserver.js"));var r=a("./src/main/webapp/universal/src/shared/utils/IntersectionObserverUtils.js");var o=i(a("./src/main/webapp/universal/src/shared/utils/Loggers.ts"));var l=(0,o.default)("BlockAnimationsInitializer","#fc0"),c=l.err;var u;var d=['[class*="block-animation-"]:not(.block-animation-none):not(.animation-loaded)','.combination-animation-custom[class*="individual-animation-"]:not(.individual-animation-none):not(.animation-loaded)','.combination-animation-custom[class*="individual-text-animation-"]:not(.individual-text-animation-none):not(.animation-loaded)','[class*="combination-animation-"]:not(.combination-animation-none):not([class*="combination-animation-custom"]):not(.animation-loaded)'].join(",");var p=function e(t,s){t.forEach(function(a){if(!document.body.contains(a.target)){s.unobserve(a.target);return}var e=a.target.querySelector("img.loading");if(e){if(e.dataset.queuedBlockAnimation)return;e.dataset.queuedBlockAnimation="true";var i=function e(t){t.currentTarget.removeEventListener("load",i);p([a],s)};e.addEventListener("load",i);return}if((0,r.isRatioIntersecting)(a)){a.target.classList.add("animation-loaded");if(!s||!s.unobserve){c("missing IntersectionObserver");return}s.unobserve(a.target)}})};var h=function e(a){if(!a||!a.document){c("Cannot init animations without a window context");return}(0,n.default)(a).then(function(e){u=u||new e(p,{root:null,threshold:[0,.1,.25,.5,1]});var t=a.document.body.querySelectorAll(d);t.length>0&&t.forEach(function e(t){t.classList.remove("animation-loaded");u.observe(t)})}).catch(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c(e.message)})};t.polyfillAndObserve=h;var g=function e(t){if(!t||!t.document){c("Cannot init animations without a window context");return}if((0,s.isEditMode)(t))return;h(t);t.addEventListener("load",function(){return h(t)});t.Y&&t.Y.on("template:dynamicPageReady",function(){return h(t)});t.addEventListener("beforeunload",function(){u&&u.disconnect()})};t.initializeAnimations=g},"./src/main/webapp/universal/src/shared/utils/BlockBetaFeatureUtils.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.filterBlocksByBetaFeature=void 0;var s=i(a("./src/main/webapp/universal/src/apps/App/shared/utils/BetaFeaturesUtils.ts"));var n=i(a("./src/main/webapp/universal/src/shared/constants/BlockTypeToBetaFlags.js"));var r=i(a("./common/temp/node_modules/lodash/cloneDeep.js"));var o=function e(t){var a=(0,r.default)(t);a.forEach(function(e){var t=e.items.filter(function(e){var t=n.default[e];if(t)return t.some(function(e){return s.default.isFeatureEnabled(e)});return true});e.items=t});return a};t.filterBlocksByBetaFeature=o},"./src/main/webapp/universal/src/shared/utils/BlockSchemasUtils.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/lodash/startCase.js"));var n=i(a("./common/temp/node_modules/lodash/get.js"));var r=i(a("./common/temp/node_modules/lodash/mergeWith.js"));var o=i(a("./common/temp/node_modules/@sqs/block-schemas/build/index.js"));var l={};l.getTitle=function(e){return(0,n.default)(o.default,[e.toLowerCase(),"meta","title"])||(0,s.default)(e.toLowerCase())};l.getVariantTitle=function(e,t){return(0,n.default)(o.default,[e.toLowerCase(),"meta","variants",t.slice(t.lastIndexOf("_")+1).toLowerCase(),"title"])||(0,s.default)(t.toLowerCase())};function c(e,t){if(!t){console.log("No default values provided");return e}return(0,r.default)({},t,e,function(e,t){return Array.isArray(t)?t:void 0})}var u={meta:l,getValueWithDefaults:c};t.default=u;e.exports=t.default},"./src/main/webapp/universal/src/shared/utils/BusinessHoursUtils.js":function(e,t,a){"use strict";var d=a("./src/main/webapp/universal/src/shared/constants/BusinessHoursConstants.js");var i={isAllDayText:function e(t){if(t){var a=t.toLocaleLowerCase().trim();var i=d.LANG.open.toLocaleLowerCase().trim();var s=d.LANG.allDay.toLocaleLowerCase().trim();return a===i||a===s}return false},isClosedText:function e(t){if(t){var a=t.toLocaleLowerCase().trim();var i=d.LANG.closed.toLocaleLowerCase().trim();return a===i}return false},minuteValidator:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"00";if(2!==t.length)throw new Error("Invalid minutes");t=parseInt(t,10);if(isNaN(t)||t<0||t>59)throw new Error("Invalid minutes");return t},hourValidator:function e(t,a){if(!t&&0!==t)throw new Error("Missing hours");t=parseInt(t,10);if(isNaN(t))throw new Error("Invalid hour");if(a===d.HOUR_24&&(t<0||t>23))throw new Error("Invalid hour");if(a===d.HOUR_12&&(t<1||t>12))throw new Error("Invalid hour");return t},getMeridiemAndMode:function e(t){var a={};var i=t;i=i.replace(/[0-9]| /g,"");i=i.replace(/:/,"");if("am"===i||"pm"===i){a.meridiem=i;a.mode=d.HOUR_12}else{if(""!==i)throw new Error("Unwanted characters");a.mode=d.HOUR_24}return a},convertTo24HourMode:function e(t,a,i,s){if(a===d.HOUR_12){if("pm"===i)return 12===t?t:t+12;if("end"===s&&12===t)return 24;return 12===t?0:t}return"end"===s&&0===t?24:t},parseTime:function e(t,a){var i=true;var s;var n;var r;var o;try{t=t.toLowerCase();var l=this.getMeridiemAndMode(t);r=l.meridiem;o=l.mode;if(o===d.HOUR_24&&!t.match(":"))throw new Error("Invalid format");var c=t.replace(r,"").split(":");s=c[0];s=this.hourValidator(s,o);n=c[1];n=this.minuteValidator(n)}catch(e){i=false}if(i){var u=this.convertTo24HourMode(s,o,r,a);return{mode:o,timestamp:parseInt(60*u+n,10)}}return null},parseTimeRange:function e(t){var a;var i;try{var s=t.split(/ to | till | til | until |-|—/i);if(2!==s.length||!s[0]||!s[1])throw new Error("Range is not correct");a=this.parseTime(s[0].trim(),d.TIME_TYPE.start);i=this.parseTime(s[1].trim(),d.TIME_TYPE.end);if(!a||!i)throw new Error("Incorrect time");if(a.mode!==i.mode)throw new Error("Inconsistent formats")}catch(e){return false}return{from:a,to:i}},parseMultipleTimeRange:function e(t){var a=this;var i=true;var s={text:t,ranges:[]};this.isAllDayText(t)&&(t="12am - 12am");this.isClosedText(t)&&(t=null);try{if(t){var n=t.split(",");var r;var o;n.forEach(function(e,t){e=a.parseTimeRange(e.trim());o=t===n.length-1;if(!e||!o&&e.from.timestamp>=e.to.timestamp)throw new Error("Invalid range");if(s.ranges.length>0){r=s.ranges[s.ranges.length-1];if(r.to.timestamp>=e.from.timestamp)throw new Error("Invalid multiple ranges");if(r.to.mode!==e.to.mode)throw new Error("Inconsistent formats")}s.ranges.push(e)})}}catch(e){i=false}s.ranges.forEach(function(e){e.to=e.to.timestamp;e.from=e.from.timestamp});return!!i&&s}};e.exports=i},"./src/main/webapp/universal/src/shared/utils/CartPageInitializer.ts":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.initialize=void 0;var s=i(a("./src/main/webapp/universal/src/apps/Commerce/CartPage/loadCartBundle.ts"));var n=i(a("./src/main/webapp/universal/src/apps/Commerce/shared/utils/isCartPage.ts"));var r=i(a("./src/main/webapp/universal/src/shared/utils/patchWebpackPublicPath.ts"));var o=i(a("./src/main/webapp/universal/src/shared/utils/ready.ts"));var l=null;var c=false;var u=function e(t){if(!(0,n.default)(t))return;l=l||t.SquarespaceCommerceCartBundle;if(l){l.initialize();return}o.default.then(function(){(0,r.default)();var e=t.Static.SQUARESPACE_CONTEXT.rollups["squarespace-commerce-cart"].js;(0,s.default)(e,t).then(function(){l=t.SquarespaceCommerceCartBundle;l.initialize()}).catch(function(e){console.error("Failed to load cart page bundle.");throw new Error(e)})})};var d=function e(t){l&&(0,n.default)(t)&&l.destroy()};var p=function e(t){var a=t.onInitialize,i=t.onDestroy,s=t.win;if((0,n.default)(s)&&!c){a(function(){return u(s)});i(function(){return d(s)});c=true}};t.initialize=p},"./src/main/webapp/universal/src/shared/utils/ClassBasedState.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.isEditMode=void 0;var s=i(a("./common/temp/node_modules/lodash/get.js"));var n=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;var a="sqs-edit-mode";var i=(0,s.default)(t,"document.body");return i&&i.classList.contains(a)};t.isEditMode=n},"./src/main/webapp/universal/src/shared/utils/ContentPreview.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.getContentPreview=n;t.getSectionPreview=o;t.getMainContentPreview=c;t.getFragmentFromContentPreview=g;var u=i(a("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var d=i(a("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/@sqs/network/lib/index.js"));var p="/api/content-preview";function n(){return r.apply(this,arguments)}function r(){r=(0,s.default)(u.default.mark(function e(){var a,i,s,n,r,o,l,c=arguments;return u.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:a=c.length>0&&void 0!==c[0]?c[0]:{},i=a.pathname,s=a.replacements;if(i){t.next=3;break}throw new Error("pathname is required");case 3:n="".concat(p,"?path=").concat(i);t.next=6;return d.default.post(n,s);case 6:r=t.sent;o=new DOMParser;l=o.parseFromString(r.data,"text/html");return t.abrupt("return",l);case 10:case"end":return t.stop()}},e)}));return r.apply(this,arguments)}function o(e,t){return l.apply(this,arguments)}function l(){l=(0,s.default)(u.default.mark(function e(a,i){var s,n,r,o,l;return u.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:s="".concat(p,"/previewSection");t.next=3;return d.default.post(s,a);case 3:n=t.sent;r=new DOMParser;o=r.parseFromString(n.data,"text/html");l=o.querySelector(i);return t.abrupt("return",l);case 8:case"end":return t.stop()}},e)}));return l.apply(this,arguments)}function c(e,t,a){return h.apply(this,arguments)}function h(){h=(0,s.default)(u.default.mark(function e(a,i,s){var n,r,o,l,c;return u.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:n="".concat(p,"/previewMainContentSection?url=").concat(a,"&typeName=").concat(i.typeName);t.next=3;return d.default.post(n,i);case 3:r=t.sent;o=new DOMParser;l=o.parseFromString(r.data,"text/html");c=l.querySelector(s);return t.abrupt("return",c);case 8:case"end":return t.stop()}},e)}));return h.apply(this,arguments)}function g(e){var t=e.responseDoc,a=e.selector;var i=t.querySelector(a);if(!i)throw new Error("Unable to find selector in responseDoc");return i}},"./src/main/webapp/universal/src/shared/utils/Context.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/lodash/get.js"));var n=function e(){var t=(0,s.default)(window,"Static.SQUARESPACE_CONTEXT.appDomain","");return t&&(-1!==t.indexOf("sqsp.com")||-1!==t.indexOf("squarespace.com"))};var r={isProductionEnvironment:n};t.default=r;e.exports=t.default},"./src/main/webapp/universal/src/shared/utils/CookieBanner.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var s=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.unmount=t.mount=t.renderDom=t.applySettings=void 0;var n=s(a("./common/temp/node_modules/@sqs/cookie-cutter/index.js"));var u=i(a("./src/main/webapp/universal/src/shared/constants/CookieBanner.js"));var d=a("./src/main/webapp/universal/src/apps/App/screens/Settings/screens/VisitorData/utils/visitorDataTransformations.js");var r=2;var p="sqs-cookie-banner-v".concat(r);var h;var g;var m;var f;var o=function e(t){t.preventDefault();if(document.body.className.indexOf("sqs-cookie-banner-v2-forced")>-1)return false;var a=new Date;a.setTime((new Date).getTime()+2592e6);n.default.set("ss_cookieAllowed",true,{path:"/",expires:a});g.remove()};var l=function e(){g=document.createElement("div");g.className=p;m=document.createElement("div");m.className="".concat(p,"-text");f=document.createElement("button");f.className="".concat(p,"-accept");f.addEventListener("click",o);var t=document.createElement("div");t.className="".concat(p,"-acceptWrapper");t.appendChild(f);g.appendChild(m);g.appendChild(t);return g};t.renderDom=l;var c=function e(t){var a=t.isCookieBannerEnabled;var i=(0,d.getWithDefaults)(t),s=i.cookieBannerCtaText,n=i.cookieBannerCtaVariant,r=i.cookieBannerPosition,o=i.cookieBannerText,l=i.cookieBannerTheme,c=i.cookieBannerVariant;h=r===u.BAR_POSITIONS.TOP&&document.body.querySelector(".sqs-announcement-bar-dropzone")||document.body;g.className=p;g.classList.add(c,l,r,n);m.innerHTML=0===o.indexOf("<p>")?o:"<p>".concat(o,"</p>");switch(n){case u.CTA_VARIANTS.BUTTON:f.innerText=s;break;case u.CTA_VARIANTS.TEXT:f.innerText=s;break;case u.CTA_VARIANTS.ICON:f.innerText=" ";break}r===u.BAR_POSITIONS.TOP?document.body.classList.add("".concat(p,"-top")):document.body.classList.remove("".concat(p,"-top"));if(a){h.classList.add("".concat(p,"-enabled"));h.appendChild(g)}else h.classList.remove("".concat(p,"-enabled"));return g};t.applySettings=c;var v=function e(){var t={expires:new Date(0)};["SS_MATTR","SS_MID","SS_lastvisit","user_segment","ss_cid","ss_cpvisit","ss_cvisit","ss_cvr","ss_cvt"].forEach(function(e){return n.default.set(e,"",t)})};var b=function e(){g&&g.remove();g=null;h&&h.classList.remove("".concat(p,"-enabled"))};t.unmount=b;var S=function e(t){if(!t.force){var a=n.default.get("ss_cookieAllowed");!a&&t.isRestrictiveCookiePolicyEnabled&&v();if("undefined"!==typeof a&&null!==a)return false}g||l();c(t);return true};t.mount=S},"./src/main/webapp/universal/src/shared/utils/CoverPageEditorLang.js":function(e,t,a){"use strict";var i=a("./src/main/webapp/universal/src/shared/i18n/index.ts"),s=i.t;var n=a("./src/main/webapp/frontend/packages/enums/SliceType.js");var r=new Map;r.set(n.HEADING,s("Heading"));r.set(n.SUB_HEADING,s("Sub Heading"));r.set(n.BODY,s("Body"));r.set(n.IMAGE,s("Image"));r.set(n.GALLERY,s("Imagery"));r.set(n.VIDEO,s("Video"));r.set(n.SOCIAL_ICONS,s("Social Icons"));r.set(n.BUTTONS,s("Buttons"));r.set(n.NAVIGATION,s("Navigation"));r.set(n.CUSTOM_FORM,s("Custom Form"));r.set(n.NEWSLETTER,s("Newsletter"));r.set(n.ALBUM,s("Audio"));r.set(n.MAP,s("Map"));r.set(n.LOCK,s("Lock"));r.set(n.PASSWORD,s("Password"));r.set(n.TWITTER,s("Twitter"));r.set(n.LOGO,s("Logo"));r.set(n.ACTION,s("Action"));r.set(n.TEMP_LOCK_INJECT,s("temp_lock_inject"));var o=new Map;o.set("BRANDING_TEXT","branding-text");o.set("ACTION","action");o.set("MEDIA","media");o.set("VIDEO","video");o.set("AUDIO","audio");o.set("LOCATION","location");o.set("TWITTER","twitter");o.set("SOCIAL_ICONS","social-links");e.exports={getLabelForSliceType:function e(t){return r.get(t)},getUrlForSliceTypeGroupForSliceType:function e(t,a){var i=null;for(var s in a){if(!a.hasOwnProperty(s))continue;if(a[s].indexOf(t)>-1){i=s;break}}return o.get(i)}}},"./src/main/webapp/universal/src/shared/utils/ExcerptBlankHTMLUtils.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i=a("./common/temp/node_modules/lodash/isString.js");var s='<p class=""></p>';var n="";function r(e){if(!i(e))return false;if(e.length>100)return false;return true}function o(e){if(e===s)return n;var t=false;try{var a=document.createElement("div");a.innerHTML=e;t=!a.textContent||!a.textContent.trim()}catch(e){window.SQUARESPACE_SENTRY&&window.SQUARESPACE_SENTRY.captureMessage("Excerpt blanking failed!")}if(t)return n;return e}var l={shouldTrimExcerpt:r,trimExcerptHTML:o};t.default=l;e.exports=t.default},"./src/main/webapp/universal/src/shared/utils/FormConnections.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.calculateRemoved=s;t.getFromModel=n;var l=i(a("./src/main/webapp/frontend/packages/enums/FormBackendConnectionType.js"));var c=i(a("./src/main/webapp/frontend/packages/enums/FormBackendConnectionState.js"));function s(e,t){if(!Array.isArray(e)||!e.length)return[];var a=t.map(function(e){return e.backendType});return e.reduce(function(e,t){a.includes(t.backendType)||e.push(t.backendType);return e},[])}function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.formId,a=e.connections,i=void 0===a?[]:a,s=e.legacyDefaults,o=void 0===s?{}:s;var n=i.reduce(function(e,t){var a=t.backendId,i=t.backendType,s=t.config,n=t.connectionState,r=t.socialConfig;if(!a&&i!==l.default.ZAPIER){false;return e}switch(i){case l.default.CAMPAIGNS:e.campaignsConnect={connectionState:c.default.CONNECTED,useSingleOptIn:!!(s&&"true"===s.useSingleOptIn),listId:a};break;case l.default.EMAIL:e.emailConnect={connectionState:n,email:a};break;case l.default.ZAPIER:e.zapierConnect={connectionState:n,url:a};break;case l.default.GOOGLE:e.googleDocsConnect={connectionState:n,username:r.profileUserName,spreadsheetName:s.spreadsheetName||o.googleSpreadsheetName,socialConfig:r};break;case l.default.MAILCHIMP:e.mailchimpConnect={connectionState:n,list:a,username:r.profileUserName||o.mailchimpUsername,useSingleOptIn:!!(s&&"true"===s.useSingleOptIn),socialConfig:r};break;default:e.errors=e.errors||[];e.errors.push(t);break}return e},{});if(!t){var r=window.Static.SQUARESPACE_CONTEXT.authenticatedAccount.email;r&&!n.emailConnect&&(n.emailConnect={connectionState:c.default.CONNECTED,email:r})}return n}},"./src/main/webapp/universal/src/shared/utils/FormDialogConfigBuilder.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.getMailchimpSignupConfig=v;t.getZapierSignupConfig=S;t.getConfigContext=y;t.getConfig=_;t.ZAPIER_SIGNUP_URL=t.MAILCHIMP_SIGNUP_URL=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var n=i(a("./src/main/webapp/frontend/packages/enums/Features.js"));var r=i(a("./src/main/webapp/frontend/packages/enums/FormBackendConnectionType.js"));var o=i(a("./src/main/webapp/frontend/packages/enums/GoogleReCaptchaThemeType.js"));var l=i(a("./src/main/webapp/frontend/packages/enums/GoogleReCaptchaAlignmentType.js"));var c=i(a("./src/main/webapp/universal/src/shared/constants/HelpLinks.js"));var u=a("./src/main/webapp/universal/src/shared/utils/GoogleReCaptchaAPIAuthenticated.js");var d=a("./src/main/webapp/universal/src/shared/i18n/index.ts");var p=i(a("./src/main/webapp/universal/src/apps/App/shared/stores/FeaturesStore.js"));var h=i(a("./src/main/webapp/universal/src/shared/images/standard/icon_form_42_light.png"));function g(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function m(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?g(Object(a),true).forEach(function(e){(0,s.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var f=["http://www.mailchimp.com/signup","?utm_source=squarespace1","&utm_medium=partnerships","&utm_campaign=pid","&pid=squarespace","&source=website"].join("");t.MAILCHIMP_SIGNUP_URL=f;function v(e){return{ctor:e.Squarespace.DialogFields.Description,config:{name:"mailchimpAccountCreation",text:'<a href="'.concat(f,'" target="_blank">')+(0,d.t)("Don't have a MailChimp account? Click here to sign up.")+"</a>"}}}var b="https://support.squarespace.com/hc/articles/360000641507/";t.ZAPIER_SIGNUP_URL=b;function S(e){return{ctor:e.Squarespace.DialogFields.Description,config:{name:"zapierAccountCreation",text:'<a href="'.concat(b,'" target="_blank">')+(0,d.t)("Don't have a Zapier account? Click here to sign up.")+"</a>"}}}function y(e){return{primaryFieldConfigs:[{ctor:e.Squarespace.DialogFields.Description,config:{text:(0,d.t)("Add a customizable form to collect visitor information. Form submissions can be sent to an email address, or saved to a Google Drive sheet or MailChimp list.")+' <a href="'.concat(c.default.FORM_EDITOR,'" target="_blank">')+(0,d.t)("Learn more")+"</a>"}},{ctor:e.Squarespace.DialogFields.LabeledText,config:{name:"name","strings.label":(0,d.t)("Form Name"),submitOnEnter:true}},{ctor:e.Squarespace.DialogFields.Description,config:{text:(0,d.t)("<strong>Drag and drop</strong> the fields below to manipulate the structure of your form. <strong>Click</strong> on any field to edit it.")}},{ctor:e.Squarespace.DialogFields.FormBuilder,config:{name:"fields",isMailChimpConnected:{$valueFn:function e(t){var a=t.getFormModel();var i=a.getConnBackend(r.default.MAILCHIMP);return i.length>0}}}}],connectFieldConfigsByName:{description:{ctor:e.Squarespace.DialogFields.Description,config:{text:(0,d.t)('For more information about the handling of your customers’ personal data visit our GDPR Guide. <a href="{helpLink}" target="_blank">Learn More</a>. ',{helpLink:c.default.GDPR})}},email:{ctor:e.Squarespace.DialogFields.EmailServiceConnect,config:{name:"emailConnect"}},zapier:{ctor:e.Squarespace.DialogFields.ZapierServiceConnect,config:{name:"zapierConnect",getZapsConnected:{$valueFn:function e(t){return function(){var e=t.getFormModel();return e.getConnBackend(r.default.ZAPIER).length}}}}},googleDocs:{ctor:e.Squarespace.DialogFields.GoogleDocsServiceConnect,config:{name:"googleDocsConnect"}},mailchimp:{ctor:e.Squarespace.DialogFields.MailChimpServiceConnect,config:{name:"mailchimpConnect"}},campaigns:{ctor:e.Squarespace.DialogFields.CampaignsServiceConnect,config:{name:"campaignsConnect"}}},connectFieldConfigs:[{$include:"connectFieldConfigsByName.description"},{$include:"connectFieldConfigsByName.email"},{$include:"connectFieldConfigsByName.mailchimp",$when:function e(){return p.default.isFeatureEnabled(n.default.MAILCHIMP_INTEGRATION)}},m({},v(e),{$when:function e(t){if(!p.default.isFeatureEnabled(n.default.MAILCHIMP_INTEGRATION))return false;var a=t.getFormModel();var i=a.getConnBackend(r.default.MAILCHIMP);return 0===i.length}}),{$include:"connectFieldConfigsByName.zapier",$when:function e(){return p.default.isFeatureEnabled(n.default.FORMS_API)}},m({},S(e),{$when:function e(t){if(!p.default.isFeatureEnabled(n.default.FORMS_API))return false;var a=t.getFormModel();var i=a.getConnBackend(r.default.ZAPIER);return 0===i.length}}),{$include:"connectFieldConfigsByName.googleDocs"}],submissionFieldConfigs:[{ctor:e.Squarespace.DialogFields.Text,config:{name:"submitButtonText",className:"thin","strings.title":(0,d.t)("Submit Button Label"),"strings.placeholder":(0,d.t)("Submit")}},{ctor:e.Squarespace.DialogFields.Select,config:{name:"buttonAlignment","strings.title":(0,d.t)("Button Alignment"),defaultValue:"left",className:"thin dark",options:[{value:"left",label:(0,d.t)("Left")},{value:"center",label:(0,d.t)("Center")},{value:"right",label:(0,d.t)("Right")}]}},{ctor:e.Squarespace.DialogFields.Description,config:{name:"successRedirectDescription",title:(0,d.t)("Post-Submit Redirect"),text:(0,d.t)("If provided, the user will be redirected upon form submission.")}},{ctor:e.Squarespace.DialogFields.CreateLink,config:{name:"successRedirect",disableNewWindow:true,condensed:true,required:false,renderTabs:{content:true,external:true,files:false}}},{ctor:e.Squarespace.DialogFields.Description,config:{name:"submissionMessageDescription",title:(0,d.t)("Post-Submit Message"),text:(0,d.t)("Display this message to users after they submit your form.")}},{ctor:e.Squarespace.DialogFields.Wysiwyg,config:{name:"submissionMessage",editorHeight:175,classNames:"submissionMessage"}},{ctor:e.Squarespace.DialogFields.Description,config:{name:"submissionHTMLDescription",title:(0,d.t)("Post-Submit HTML"),text:(0,d.t)("HTML to be rendered in addition to the Post-Submit Message.")}},{ctor:e.Squarespace.DialogFields.HtmlCode,config:{name:"submissionHTML"}}],lightboxFieldConfigs:[{ctor:e.Squarespace.DialogFields.Description,config:{name:"lightboxModeDescription",title:(0,d.t)("Lightbox Mode"),text:(0,d.t)("Replace this form with a button. Open the form in a lightbox when this button is pressed, rather than embedding it in the page. Great for long forms.")}},{ctor:e.Squarespace.DialogFields.Check,config:{name:"useLightbox","strings.title":(0,d.t)("Enable Lightbox Mode")}},{ctor:e.Squarespace.DialogFields.Description,config:{name:"lightboxHandleDescription"}},{ctor:e.Squarespace.DialogFields.Text,config:{name:"lightboxHandleText",className:"thin","strings.title":(0,d.t)("Open Button Label"),"strings.description":(0,d.t)("Display this text on the button to open this form."),"strings.placeholder":(0,d.t)("Open Form")}}],captchaFieldConfigs:[{ctor:e.Squarespace.DialogFields.Description,config:{name:"captchaDescription",title:(0,d.t)("Google ReCaptcha"),text:(0,d.t)('Prevent spam and abuse by asking visitors to check I’m not a robot before submitting. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:c.default.GOOGLE_RECAPTCHA_SETUP})}},{ctor:e.Squarespace.DialogFields.Check,config:{name:"captchaEnabled","strings.title":(0,d.t)("Add Google reCaptcha")}},{ctor:e.Squarespace.DialogFields.Select,config:{name:"captchaTheme","strings.title":(0,d.t)("Theme"),defaultValue:o.default.LIGHT,className:"thin dark",numeric:true,options:[{value:o.default.LIGHT,label:(0,d.t)("Light")},{value:o.default.DARK,label:(0,d.t)("Dark")}]}},{ctor:e.Squarespace.DialogFields.Select,config:{name:"captchaAlignment","strings.title":(0,d.t)("Alignment"),defaultValue:l.default.LEFT,className:"thin dark",numeric:true,options:[{value:l.default.LEFT,label:(0,d.t)("Left")},{value:l.default.CENTER,label:(0,d.t)("Center")},{value:l.default.RIGHT,label:(0,d.t)("Right")}]}}]}}function _(e){return{loadingText:(0,d.t)("Editing Form…"),style:"standard",width:470,height:540,title:(0,d.t)("Edit Form"),initialDataByReference:true,primaryTabs:[{title:(0,d.t)("Edit Form"),icon:h.default,tabTitle:(0,d.t)("Build"),scroll:true,fields:{$include:"primaryFieldConfigs"}}],secondaryTabs:[{tabTitle:(0,d.t)("Storage"),fields:{$include:"connectFieldConfigs"}},{tabTitle:(0,d.t)("Advanced"),scroll:true,fields:[{$include:"submissionFieldConfigs",$concat:true},{$include:"lightboxFieldConfigs",$concat:true}]},{tabTitle:(0,d.t)("Captcha"),fields:{$include:"captchaFieldConfigs"},$when:function e(t){return(0,u.isCaptchaEnabled)()}}]}}},"./src/main/webapp/universal/src/shared/utils/FormHandler.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var s=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=s(a("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));var r=s(a("./common/temp/node_modules/@babel/runtime/helpers/toConsumableArray.js"));var l=s(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var c=s(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var u=s(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var o=s(a("./common/temp/node_modules/lodash/isString.js"));var d=s(a("./common/temp/node_modules/lodash/isObject.js"));var p=s(a("./common/temp/node_modules/lodash/invoke.js"));var h=a("./src/main/webapp/universal/src/shared/i18n/index.ts");var g=s(a("./common/temp/node_modules/qs/lib/index.js"));var m=a("./common/temp/node_modules/@sqs/utils/scroll/index.js");var f=s(a("./src/main/webapp/universal/src/shared/constants/FacebookPixelConstants.js"));var v=a("./src/main/webapp/universal/src/shared/utils/commerce/trackEvent.ts");var b=i(a("./src/main/webapp/universal/src/shared/utils/GoogleReCaptchaAPI.js"));var S=a("./src/main/webapp/universal/src/shared/utils/EmailUtils.js");var y=s(a("./src/main/webapp/universal/src/shared/utils/network.js"));var _=a("./src/main/webapp/universal/src/shared/utils/census/CensusUtils.ts");function C(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function E(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?C(Object(a),true).forEach(function(e){(0,u.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var w=function(){function o(e,t){var a=this;(0,l.default)(this,o);(0,u.default)(this,"success",function(e){a.isNewsletterForm()&&(0,v.trackSubscribeNewsletter)();(0,p.default)(a.win,"Y.Global.fire","form:submitSuccess");if(!a.redirectToSuccessRedirect()){a.unlock();a.renderSuccess()}});(0,u.default)(this,"createErrorNode",function(e){var t=a.win.document.createElement("div");t.className="field-error";t.innerHTML=e;return t});(0,u.default)(this,"fail",function(e){a.renderErrors(e);a.isNewsletterForm()||a.renderSurroundingErrors();var t=b.getCaptchaContainer(a.win,a.formEl);if(t){a.submitEl&&a.submitEl.getAttribute("data-captcha-bound")&&(a.submitEl.disabled=true);b.reset(a.win,t)}a.unlock()});if(!e||!t)throw new Error("Invalid FormHandler construction.");this.win=e;t instanceof Element?this.formEl=t:t.formNode&&(this.formEl=t.formNode.getDOMNode());if(!this.formEl)throw new Error("FormHandler needs a valid <form> for formEl.");this.submitEl=this.formEl.querySelector('[type="submit"]')||document.createElement("div");this.submitText=this.submitEl.value}(0,c.default)(o,[{key:"clearErrors",value:function e(){(0,r.default)(this.formEl.querySelectorAll(".field-error")).forEach(function(e){return e.remove()});(0,r.default)(this.formEl.querySelectorAll(".form-item.error")).forEach(function(e){return e.classList.remove("error")})}},{key:"isLocked",value:function e(){this.formEl.classList.contains("submitting")}},{key:"lock",value:function e(){this.submitEl.classList.add("submitting");this.submitEl.value=o.strings.SUBMIT_TEXT_IN_PROGRESS}},{key:"unlock",value:function e(){this.submitEl.classList.remove("submitting");this.submitEl.value=this.submitText}},{key:"validate",value:function e(){return(0,r.default)(this.formEl.querySelectorAll(".form-item")).reduce(function(e,t){var a=o.validateField(t),i=a.isValid,s=a.message;if(!i){e.isValid=false;e.errors.push({fieldId:t.id,message:s})}return e},{isValid:true,errors:[]})}},{key:"withCaptcha",value:function e(t){var a=b.getCaptchaContainer(this.win,this.formEl);if(!a)return t;var i=b.validate(this.win,a);return i?E({},t,{captchaKey:i}):null}},{key:"submit",value:function e(t){var a=this;if(this.isLocked())return false;this.lock();if(!t.disableValidation){this.clearErrors();var i=this.validate(),s=i.isValid,n=i.errors;if(!s){this.fail(o.strings.FIELD_VALIDATION_ERROR);this.renderFieldClientErrors(n);return false}}var r;try{r=this.withCaptcha(t)}catch(e){this.fail(o.strings.CAPTCHA_INCOMPLETE_ERROR);return false}o.getFormKey().catch(function(e){a.fail(o.strings.FORM_KEY_ERROR)}).then(function(e){r.key=e;try{var t=a.getSanitizedFieldValues();r.form=JSON.stringify(t)}catch(e){throw new Error(o.strings.FIELD_SANITIZATION_ERROR)}try{a.save(r)}catch(e){throw new Error(o.strings.SUBMIT_ERROR)}}).catch(function(e){a.fail(e.message)});return false}},{key:"getSanitizedFieldValues",value:function e(){return(0,r.default)(this.formEl.querySelectorAll(".form-item")).reduce(function(e,t){e[t.id]=o.getSanitizedFieldValue(t);return e},{})}},{key:"save",value:function e(t){var a=E({},t);(0,_.addIntraPageEventFields)(a);return y.default.post(o.endpoints.SAVE,a,o.NETWORK_OPTIONS).then(this.success).catch(this.fail)}},{key:"isNewsletterForm",value:function e(){return Boolean(this.formEl.classList.contains("newsletter-form")||this.formEl.querySelector(f.default.NEWSLETTER_OVERLAY_NODE_ID))}},{key:"renderFieldError",value:function e(t,a){var i=this.formEl.querySelector("#".concat(t));if(!i)return;i.classList.add("error");var s=i.querySelector(".title");a&&s&&s.parentNode&&s.parentNode.insertBefore(this.createErrorNode(a),s)}},{key:"renderFieldClientErrors",value:function e(t){var i=this;t.forEach(function(e){var t=e.fieldId,a=e.message;return i.renderFieldError(t,a)})}},{key:"renderFieldServerErrors",value:function e(t){var s=this;Object.entries(t).forEach(function(e){var t=(0,n.default)(e,2),a=t[0],i=t[1];s.renderFieldError(a,i)})}},{key:"renderErrorMessage",value:function e(t){this.formEl.insertBefore(this.createErrorNode(t),this.isNewsletterForm()?this.formEl.querySelector(".newsletter-form-body"):this.formEl.firstChild)}},{key:"renderSurroundingErrors",value:function e(){var t=this.formEl;t.insertBefore(this.createErrorNode(o.strings.ERROR_ABOVE),t.firstChild);this.formEl.appendChild(this.createErrorNode(o.strings.ERROR_BELOW))}},{key:"renderErrors",value:function e(t){if(o.isFieldErrors(t))this.renderFieldServerErrors(t.data.errors);else{var a=o.getErrorMessage(t)||o.strings.UNKNOWN_ERROR;this.renderErrorMessage(a)}}},{key:"showSubmissionText",value:function e(){var t=this.formEl.querySelector(".form-submission-text");if(!t)return;t.classList.remove("hidden");(0,r.default)(t.querySelectorAll("*")).forEach(function(e){return e.classList.remove("hidden")})}},{key:"hideForm",value:function e(){(0,r.default)(this.formEl.querySelectorAll("*")).forEach(function(e){return e.classList.add("hidden")})}},{key:"redirectToSuccessRedirect",value:function e(){var t=this.formEl.dataset.successRedirect;if(t){window.history.replaceState&&window.history.replaceState({},document.title,window.location.href);window.location.href=t;return true}return false}},{key:"getPostSubmitHtml",value:function e(){var t=this.formEl.querySelector(".form-submission-html");return t?t.dataset.submissionHtml:""}},{key:"appendAndRunPostSubmitHtml",value:function e(){var a=this;var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";var i=this.formEl.querySelector(".form-submission-html");i.innerHTML=this.getPostSubmitHtml();i.classList.remove("hidden");(0,r.default)(i.querySelectorAll("script")).forEach(function(e){try{if(e.src){var t=document.createElement("script");(0,r.default)(e.attributes).forEach(function(e){t[e.name]=e.value});e.parentNode.insertBefore(t,e)}else a.win.eval(e.innerText)}catch(e){false}})}},{key:"renderSuccess",value:function e(){this.hideForm();this.showSubmissionText();(0,m.scrollIntoView)(this.formEl,true);this.appendAndRunPostSubmitHtml(this.getPostSubmitHtml())}}]);return o}();t.default=w;(0,u.default)(w,"initialQuery",g.default.parse(window.location.search.replace(/^\?/,"")));(0,u.default)(w,"endpoints",{SAVE:"/api/form/SaveFormSubmission",FORM_KEY:"/api/form/FormSubmissionKey"});(0,u.default)(w,"NETWORK_OPTIONS",{withCredentials:true});(0,u.default)(w,"strings",{SUBMIT_TEXT_IN_PROGRESS:(0,h.t)("Submitting…"),SUBMIT_ERROR:(0,h.t)("Error processing form submission. Please reload and try again."),UNKNOWN_ERROR:(0,h.t)("Unknown error, please try again later."),CAPTCHA_INCOMPLETE_ERROR:(0,h.t)("Complete CAPTCHA before submitting."),FORM_KEY_ERROR:(0,h.t)("Could not get a form submission key, please try again later."),FIELD_SANITIZATION_ERROR:(0,h.t)("Could not parse the form fields, please check your entries."),FIELD_VALIDATION_ERROR:(0,h.t)("One or more fields is invalid, please check your entries."),ERROR_ABOVE:(0,h.t)("Your form has encountered a problem. Please scroll down to review."),ERROR_BELOW:(0,h.t)("Your form has encountered a problem. Please scroll up to review."),FAIL_MAX_LENGTH:(0,h.t)("You have exceeded the character limit."),FAIL_EMAIL:(0,h.t)("Email is not valid. Email addresses should follow the format user@domain.com.")});(0,u.default)(w,"errorCodes",{401:(0,h.t)("Unable to submit form. Please try again later."),404:(0,h.t)("This form has not been configured yet."),429:(0,h.t)("Unable to submit form. Submission rate limit exceeded. Please try again later."),500:(0,h.t)("Unable to send form. Please try again later.")});(0,u.default)(w,"getFormKey",function(){return y.default.post(w.endpoints.FORM_KEY,{},w.NETWORK_OPTIONS).then(function(e){var t=e.data.key;return t})});(0,u.default)(w,"isFieldErrors",function(e){return(0,d.default)(e)&&400===e.status&&e.data&&e.data.errors&&Object.keys(e.data.errors).length>0});(0,u.default)(w,"getErrorMessage",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if((0,o.default)(e))return e;if(!(0,d.default)(e))return"";if(e.status&&w.errorCodes[e.status])return w.errorCodes[e.status];if(e.data&&e.data.error)return e.data.error;return""});(0,u.default)(w,"sanitizeValue",function(e){var t=e.querySelector(".field-element");return t?t.value:null});(0,u.default)(w,"sanitizeChildValuesToArray",function(e){return e?(0,r.default)(e.querySelectorAll(".field-element")).map(function(e){var t=e.value;return t}):[]});(0,u.default)(w,"sanitizePhone",function(e){var t=w.sanitizeChildValuesToArray(e);return 3===t.length?[""].concat((0,r.default)(t)):t});(0,u.default)(w,"sanitizeCheckbox",function(e){return(0,r.default)(e.querySelectorAll("input")).reduce(function(e,t){t.checked&&e.push(t.value);return e},[])});(0,u.default)(w,"sanitizeRadio",function(e){return w.sanitizeCheckbox(e)[0]});(0,u.default)(w,"sanitizeSelect",function(e){var t=e.querySelector("select");return t?t.value:null});(0,u.default)(w,"sanitizeLike",function(e){return(0,r.default)(e.querySelectorAll(".item")).reduce(function(e,t){var a=w.sanitizeCheckbox(t);var i=t.dataset.question;i&&a.length>0&&(e[i]=a);return e},{})});(0,u.default)(w,"sanitizeHidden",function(e){var t=w.initialQuery||g.default.parse(window.location.search.replace(/^\?/,""));return(e.name&&t[e.name]?t[e.name]:e.value).toString()});(0,u.default)(w,"sanitizersHash",{address:w.sanitizeChildValuesToArray,checkbox:w.sanitizeCheckbox,date:w.sanitizeChildValuesToArray,hidden:w.sanitizeHidden,likert:w.sanitizeLike,name:w.sanitizeChildValuesToArray,phone:w.sanitizePhone,radio:w.sanitizeRadio,select:w.sanitizeSelect,time:w.sanitizeChildValuesToArray,default:w.sanitizeValue});(0,u.default)(w,"getSanitizedFieldValue",function(e){if(e.classList.contains("section"))return;var t=(0,r.default)(e.classList).find(function(e){return w.sanitizersHash[e]})||"default";var a=w.sanitizersHash[t];return a(e)});(0,u.default)(w,"validateField",function(e){if(e.classList.contains("section"))return{isValid:true};var t=e.classList.contains("required");if(e.dataset.maxLength){var a=e.querySelector("textarea");var i=a.value.trim();var s=!t&&0===i.length;var n=parseInt(e.dataset.maxLength,10);var r=Boolean(n&&!isNaN(n));var o=s||!r||a.value.length<=n;return{isValid:o,message:w.strings.FAIL_MAX_LENGTH}}if(e.classList.contains("email")){var l=e.querySelector("input");var c=l.value.trim();var u=!t&&0===c.length;var d=u||(0,S.isValidEmail)(c);return{isValid:d,message:w.strings.FAIL_EMAIL}}return{isValid:true}});e.exports=t.default},"./src/main/webapp/universal/src/shared/utils/FrameMessageConsumer.js":function(e,t,a){"use strict";var i=a("./src/main/webapp/universal/src/shared/utils/appDomainUtils.js"),c=i.getAppDomain;var r={isOriginValid:function e(t,a){if(a&&t===a)return true;var i=c();var s="https://oauth.".concat(i);var n="dev.squarespace.net"===i?":8448":"";var r="https://login.".concat(i).concat(n);var o=window.location.host;var l=["http://"+o,"https://"+o,s,r];return l.indexOf(t)>=0},subscribe:function e(s,n){var t=function e(t){var a=t.data,i=t.origin;r.isOriginValid(i,n)?s(a):console.info("Invalid origin on postMessage: ".concat(i))};window.addEventListener("message",t);return function(){window.removeEventListener("message",t)}}};e.exports=r},"./src/main/webapp/universal/src/shared/utils/GoogleMapsTrackingUtils.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.trackGoogleDetails=t.trackGoogleAutoComplete=void 0;var c=i(a("./common/temp/node_modules/lodash/omit.js"));var u=i(a("./src/main/webapp/universal/src/shared/utils/CMSV7GooglePlacesEvents.ts"));var d=a("./src/main/webapp/universal/src/shared/constants/GooglePlaces.js");var p=function e(a){var i=[];Object.keys(a).forEach(function(e){var t="string"===typeof a[e]?a[e]:JSON.stringify(a[e]);i.push(e+"="+t)});return i.join("&")};var s=function e(t,a){var i=(0,c.default)(t,"query");var s=p(i);var n=a||{},r=n.productPage,o=n.productSection;var l={sessionToken:t.sessiontoken,url:d.AUTOCOMPLETE_URL+"?"+s,productPage:r,productSection:o};u.default.googleAutoCompleteCall(l)};t.trackGoogleAutoComplete=s;var n=function e(t,a){var i=(0,c.default)(t,"placeid");var s=p(i);var n=a||{},r=n.productPage,o=n.productSection;var l={sessionToken:t.sessiontoken,url:d.DETAILS_URL+"?"+s,productPage:r,productSection:o};u.default.googleDetailsCall(l)};t.trackGoogleDetails=n},"./src/main/webapp/universal/src/shared/utils/GoogleMapsUtils.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.destroyUpdater=t.updateUiOptions=t.mapModelToViewConfig=t.Styles=t.getStyleById=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var n=i(a("./common/temp/node_modules/@sqs/site-rendering/Maps/constants/styles.js"));var r=a("./src/main/webapp/universal/src/shared/utils/Loggers.ts");function o(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function c(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?o(Object(a),true).forEach(function(e){(0,s.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var u=(0,r.createErrorLogger)("GoogleMapsUtils");var l=[null,n.default.Original,n.default.Grayscale,n.default.Satellite,n.default.MinimalLight,n.default.MinimalDark,n.default.MinimalBlue];var d=function e(t){return l[t]};t.getStyleById=d;var p={ORIGINAL:1,GRAYSCALE:2,SATELLITE:3,MINIMAL_LIGHT:4,MINIMAL_DARK:5,MINIMAL_BLUE:6};t.Styles=p;var h=function e(t){var a=t.location,i=t.controls,s=t.terrain,n=t.labels,r=t.style;return{location:a,ui:{showControls:i,showTerrain:s,showLabels:n,style:l[r]}}};t.mapModelToViewConfig=h;var g=60;var m=new Map;var f=function e(t,a){if(!t||!a)return;var i=m.get(t)||{},s=i.timeout,n=i.options,r=void 0===n?{}:n;s&&window.clearTimeout(s);var o=c({},r,{},a);var l=function e(){try{t.updateUIOptions(o)}catch(e){u(e)}};m.set(t,{cb:l,timeout:window.setTimeout(l,g),options:o})};t.updateUiOptions=f;var v=function e(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t)return;var i=m.get(t)||{},s=i.cb,n=i.timeout;n&&window.clearTimeout(n);!a&&s&&s();m.delete(t)};t.destroyUpdater=v},"./src/main/webapp/universal/src/shared/utils/GooglePlacesAPI.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./src/main/webapp/universal/src/shared/utils/network.js"));var n=a("./src/main/webapp/universal/src/shared/utils/GoogleMapsTrackingUtils.js");var r=a("./src/main/webapp/universal/src/shared/utils/error-reporter/global-sentry.ts");var o=a("./src/main/webapp/universal/src/shared/constants/GooglePlaces.js");var l=function e(t,a){false;if(!a||!a.productPage||!a.productSection){console.error("Please provide a tracking context when using Google Places API autocomplete to track cost");(0,r.captureException)(new Error("Tracking context is missing for Google Places API autocomplete"))}(0,n.trackGoogleAutoComplete)(t,a);return s.default.get(o.AUTOCOMPLETE_URL,{params:t})};var c=function e(t,a){false;false;if(!a||!a.productPage||!a.productSection){console.error("Please provide a tracking context when using Google Places API details to track cost");(0,r.captureException)(new Error("Tracking context is missing for Google Places API details"))}(0,n.trackGoogleDetails)(t,a);return s.default.get(o.DETAILS_URL,{params:t})};var u={getPlacePredictions:l,getDetails:c};t.default=u;e.exports=t.default},"./src/main/webapp/universal/src/shared/utils/GoogleReCaptchaAPI.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.loadReCaptcha=p;t.render=h;t.renderAll=g;t.validate=m;t.executeFirst=f;t.execute=v;t.reset=b;t.resetFirst=S;t.getCaptchaContainer=y;t.destroy=_;t.RECAPTCHA_RENDER_TYPE=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var r=i(a("./common/temp/node_modules/lodash/get.js"));var n=i(a("./src/main/webapp/universal/src/shared/utils/loadScript.js"));function o(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function l(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?o(Object(a),true).forEach(function(e){(0,s.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var c="https://www.google.com/recaptcha/api.js?onload=__grecaptchaOnLoadCallback&render=";var u="data-id";var d={EXPLICIT:"explicit",ONLOAD:"onload"};t.RECAPTCHA_RENDER_TYPE=d;function p(a){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.EXPLICIT;a.__grecaptchaOnLoadPromise=a.__grecaptchaOnLoadPromise||new Promise(function(e,t){a.__grecaptchaOnLoadCallback=function(){return e()};if(a.document){false;(0,n.default)(c+i,{doc:a.document}).catch(t)}else t("[GoogleReCaptchaAPI] Document was destroyed")});return a.__grecaptchaOnLoadPromise}function h(a,i){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var n=(0,r.default)(a,"Static.SQUARESPACE_CONTEXT.website.captchaSettings.siteKey");if(!n)return;return p(a).then(function(){if(!i||i.getAttribute(u)||a.document!==i.ownerDocument||!(0,r.default)(i,"ownerDocument.defaultView")){console.error("Error rendering captcha into node",{node:i});return}var e=i.clientWidth<320?"compact":"normal";var t=a.grecaptcha.render(i,l({sitekey:n,size:e},s),true);i.setAttribute(u,t);i.classList.add("rendered")})}function g(t){if(!t.document)return;var e=t.document.querySelectorAll(".captcha-container:not('.rendered')");Array.from(e).forEach(function(e){return h(t,e)})}function m(e,t){var a=t.getAttribute(u);if(!a)return;return e.grecaptcha.getResponse(a)}function f(e){if(e.grecaptcha)return Promise.resolve(e.grecaptcha.execute());return Promise.reject({error:"ReCaptcha has not been set up!"})}function v(e,t){var a=t.getAttribute(u);if(!a)return Promise.resolve();if(e.grecaptcha)return Promise.resolve(e.grecaptcha.execute(a));return Promise.reject({error:"ReCaptcha has not been set up!"})}function b(e,t){var a=t.getAttribute(u);if(!a)return;e.grecaptcha.reset(a)}function S(e){e&&e.grecaptcha&&e.grecaptcha.reset()}function y(e,t){var a=t.querySelector(".captcha-container");var i=(0,r.default)(e,"Static.SQUARESPACE_CONTEXT.website.captchaSettings.siteKey");return i?a:null}function _(e){while(e.firstChild)e.removeChild(e.firstChild);e.removeAttribute(u)}},"./src/main/webapp/universal/src/shared/utils/GoogleReCaptchaAPIAuthenticated.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.isCaptchaEnabled=void 0;var s=i(a("./src/main/webapp/universal/src/apps/App/shared/stores/WebsiteStore/index.js"));var n=function e(){var t=s.default.getState().toJS(),a=t.captchaSettings;return!!a&&!!a.siteKey&&!!a.secretKey};t.isCaptchaEnabled=n},"./src/main/webapp/universal/src/shared/utils/GoogleReCaptchaCheckbox.ts":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireWildcard.js");var s=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.initializeCaptcha=t.GoogleReCaptchaCheckbox=void 0;var n=s(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var r=s(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var o=i(a("./src/main/webapp/universal/src/shared/utils/GoogleReCaptchaAPI.js"));function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function c(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),true).forEach(function(e){(0,r.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var u={theme:"light",size:"normal"};var d=function e(t,a){var i=this;(0,n.default)(this,e);(0,r.default)(this,"captchaContainer",void 0);(0,r.default)(this,"captchaRendered",void 0);(0,r.default)(this,"isRendered",function(){return i.captchaRendered});(0,r.default)(this,"getCaptchaToken",function(){if(!i.captchaContainer)return null;return o.validate(window,i.captchaContainer)});(0,r.default)(this,"reset",function(){if(!i.captchaContainer)return;o.reset(window,i.captchaContainer)});(0,r.default)(this,"destroy",function(){if(!i.captchaContainer)return;o.destroy(i.captchaContainer);i.captchaContainer=null;i.captchaRendered=false});this.captchaContainer=t;this.captchaRendered=false;o.render(window,this.captchaContainer,{theme:a.theme,size:a.size}).then(function(){return i.captchaRendered=true})};t.GoogleReCaptchaCheckbox=d;var p=function e(t,a){var i=o.getCaptchaContainer(window,t);var s=c({},u,{},a);return i?new d(i,s):null};t.initializeCaptcha=p},"./src/main/webapp/universal/src/shared/utils/ImageBlockInitializer.js":function(e,t,a){"use strict";var l=a("./src/main/webapp/universal/src/shared/i18n/index.ts").t;var c=a("./src/main/webapp/universal/src/shared/utils/makeTextDynamic.js");var u=function e(t,a){var i=t.one("img[data-image]");if(!i)return;var s=i.loader;if(!s)return;var n={content:s.getBareElement(),title:l("Image")};var r=t.getAttribute("data-description");r&&(n.meta=r);var o=t.getAttribute("data-lightbox-theme");o&&(n.theme=o);t.plug(a.Squarespace.Lightbox2Plug,{lightboxOptions:n})};var d=function e(t,a){t.setStyles({position:null,top:null,left:null,width:null,height:null});var i=!!t.ancestor(".sized,.content-fill");if(i){var s=a.on("resize",function(){if(t.getDOMNode()&&t.inDoc())t.fire("refresh");else{s.detach();s=null}},a.config.win);var n=t.ancestor(".image-block-wrapper");var r=t.ancestor(".sqs-layout");if(n&&r&&!r.hasClass("editing")){var o=n.get("offsetHeight")/n.get("offsetWidth");var l=[];l.push("padding-bottom: "+100*o+"% !important;");l.push("height: auto !important;");n.setAttribute("style",l.join(""));t.setStyles({maxWidth:"none"})}}var c=!!t.ancestor(".has-aspect-ratio");t.plug(a.Squarespace.Loader2,{mode:c||i?"fill":"none",fixedRatio:c})};var i=function e(t,a){d(t,a);var i=t.ancestor(".sqs-block");if(!i)return;var s=i.one(".lightbox");s&&u(s,a);if(!i.hasClass("sqs-block-image"))return;var n=false;var r=i.one(".image-block-outer-wrapper");if(r){var o=r.get("offsetWidth")<415;r.toggleClass("sqs-narrow-width",o);o&&(n=true)}var l=i.one(".sqs-dynamic-text-container");l&&c(l.getDOMNode());i.addClass("sqs-text-ready");n&&a.config.win.ImageLoader.load(t)};e.exports={initializeImageBlock:i,initializeBasicBlockWithImage:d}},"./src/main/webapp/universal/src/shared/utils/IntersectionObserverUtils.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isRatioIntersecting=void 0;var i=a("./src/main/webapp/universal/src/shared/utils/Loggers.ts");var l=(0,i.createLogger)("IntersectionObserverUtils","#fc0");var s=function e(t){var a=t.target,i=t.intersectionRatio,s=t.isIntersecting,n=t.boundingClientRect;var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;if(!document.body.contains(a)){l("Memory leak detected: el is no longer in document.body.",a);return false}if(!window.innerHeight)return false;if(i>=r)return true;var o=n.height>window.innerHeight;return o&&s};t.isRatioIntersecting=s},"./src/main/webapp/universal/src/shared/utils/KeyboardScrubber.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=s;var f=a("./src/main/webapp/universal/src/shared/utils/Keyboard.js");var v=i(a("./common/temp/node_modules/@sqs/utils/number/clamp.js"));var b=[1,2,5,10,60];var S=10;function s(e){var t=e.element,r=e.getDuration,o=e.getPosition,l=e.isPlaying,a=e.play,c=e.pause,u=e.setPosition;var d=null;var p;var h;var i=function e(t){var a;if((0,f.isArrowLeftKey)(t)||(0,f.isArrowDownKey)(t))a=-1;else{if(!(0,f.isArrowRightKey)(t)&&!(0,f.isArrowUpKey)(t))return;a=1}t.preventDefault();if(t.keyCode!==d){if(null===d){p=l();p&&c()}d=t.keyCode;h=0}var i=Math.min(b.length-1,Math.floor(h/S));var s=b[i];var n=(0,v.default)(o()+a*s,0,r());u(n);h++};var s=function e(){if(null!==d){d=null;p&&a()}};var n=function e(t){t.keyCode===d&&s()};var g=s;var m="function"===typeof t.getDOMNode?t.getDOMNode():t;m.addEventListener("keydown",i);m.addEventListener("keyup",n);m.addEventListener("blur",g);return function e(){m.removeEventListener("keydown",i);m.removeEventListener("keyup",n);m.removeEventListener("blur",g)}}e.exports=t.default},"./src/main/webapp/universal/src/shared/utils/LayoutEngine/LayoutJSONCreator.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/typeof.js"));var n=a("./src/main/webapp/universal/src/shared/i18n/index.ts"),r=n.t;var o=a("./src/main/webapp/frontend/packages/enums/BlockType.js");var l=12;var c=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;return{columns:t,rows:[]}};var u=function e(){for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return{rows:a}};var d=function e(){for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return{columns:a}};var p=function e(t){for(var a=arguments.length,i=new Array(a>1?a-1:0),s=1;s<a;s++)i[s-1]=arguments[s];if("number"!==typeof t){i.unshift(t);t=l}if(i[0]&&!i[0].type)return{span:t,rows:i};return{span:t,blocks:i}};var h=function e(t,a){return{type:t,value:"object"===(0,s.default)(a)?a:void 0}};var g=function e(t,a){return h(o.MARKDOWN,{html:a,wysiwyg:{source:t,engine:"code",mode:"markdown",isSource:false}})};var m=function e(t){return h(o.HTML,{html:t})};var f=function e(t,a){var i={};t&&"number"===typeof t&&(i.aspectRatio=t);(a||t&&"string"===typeof t)&&Object.assign(i,{description:{html:a||t}});return h(o.IMAGE,i)};var v=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"medium";var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"center";var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r("Learn more");return h(o.BUTTON,{buttonSize:t,buttonAlignment:a,buttonText:i})};e.exports={EmptyLayout:c,Layout:u,Row:d,Column:p,Block:h,MarkdownBlock:g,HTMLBlock:m,ImageBlock:f,ButtonBlock:v}},"./src/main/webapp/universal/src/shared/utils/LocalStorageUtils.js":function(e,t,a){"use strict";function i(e,t){if(localStorage){"string"!==typeof t&&(t=JSON.stringify(t));try{localStorage.setItem(e,t)}catch(e){console.warn(e)}}}function s(e){var t=null;if(localStorage)try{var a=localStorage.getItem(e);t=JSON.parse(a)}catch(e){t=null}return t}e.exports={getLocalStorageData:s,saveToLocalStorage:i}},"./src/main/webapp/universal/src/shared/utils/MenuBlockInitializer.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.initializeMenuBlock=s;var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/toConsumableArray.js"));var r=0;var o="menu-select-labels--active";function s(e){var t=(0,n.default)(e.querySelectorAll(".js-menu-select-labels"));var a=t.length;if(0===a)return;var s=(0,n.default)(e.querySelectorAll(".js-menu"));function i(a,i){t.forEach(function(e,t){if(t===a){e.setAttribute("tabindex",0);e.setAttribute("aria-selected",true);e.classList.add(o);i&&e.focus()}else{e.setAttribute("tabindex",-1);e.setAttribute("aria-selected",false);e.classList.remove(o)}});s.forEach(function(e,t){e.style.display=t===a?"block":"none"})}i(r,false);t.forEach(function(e,t){e.addEventListener("click",function(){i(t,true)});e.addEventListener("keydown",function(e){if(13===e.keyCode||32===e.keyCode){e.stopPropagation();i(t,true)}else if(37===e.keyCode){e.stopPropagation();i((t-1+a)%a,true)}else if(39===e.keyCode){e.stopPropagation();i((t+1)%a,true)}})})}},"./src/main/webapp/universal/src/shared/utils/OpenTableBlockInitializer.js":function(e,t,a){"use strict";e.exports=function(n,r){var o=r.config.win;o.Squarespace.onInitialize(r,function(){var e=o.SQUARESPACE_LOGIN&&o.SQUARESPACE_LOGIN.isLoggedIn();var t="https:"===r.config.doc.location.protocol;var a=n.one(".OT_Faux_Block");var i=n.one("#OT_form:not(.OT_Faux_Block)");function s(){i&&i.remove();a.removeClass("sqs-block-opentable-hidden")}if(e){s();a.all(".OT_list li").removeClass("sqs-block-opentable-hidden");a.on("click",function(e){e.preventDefault();r.Squarespace.Widgets.Alert({"strings.title":"Preview Only","strings.message":"Please log out of your Squarespace account in order to use the OpenTable Block."})})}else(o.Squarespace.SQUARESPACE_INITIALIZED_ONCE||t)&&s()});o.Squarespace.onDestroy(r,function(){r.one("#ui-datepicker-div")&&r.one("#ui-datepicker-div").hide()})}},"./src/main/webapp/universal/src/shared/utils/OpenTableV2BlockInitializer.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var d=i(a("./common/temp/node_modules/loadjs/dist/loadjs.umd.js"));var o=i(a("./common/temp/node_modules/@sqs/utils/dom/findParent.js"));var r=i(a("./src/main/webapp/universal/src/shared/utils/waitForExistence.js"));var l=function e(t,a){var i=0;var s=(0,o.default)(t[0],".".concat(a),function(){return++i>3});if(!s){var n=t[0];var r=n.parentNode;s=r.ownerDocument.createElement("div");s.classList.add(a);r.insertBefore(s,n)}t.forEach(function(e){return s.appendChild(e)});return s};var c=function e(t){var a=t.querySelector(".squarespace-opentable-new-age-wrapper");a.classList.add("loaded");a.classList.remove("loading")};var p=function e(t){var a=t.querySelector(".squarespace-opentable-new-age-wrapper");if(!a)return Promise.reject("[opentablev2] No wrappers");a.classList.add("loading");if(a.querySelector("iframe")){c(t);return Promise.resolve()}var i=(0,r.default)({parent:a,selector:".ot-date-picker, .ot-time-picker, .ot-party-size-picker"}).then(function(e){return l(e,"squarespace-opentable-picker-wrapper")});var s=(0,r.default)({parent:a,selector:".ot-dtp-picker-button"}).then(function(e){return l(e,"squarespace-opentable-button-wrapper")});var n=(0,r.default)({parent:a,selector:".ot-title"}).then(function(e){e.forEach(function(e){var t=e.innerHTML;var a=e.ownerDocument.createElement("h1");a.classList.add("squarespace-ot-title");a.innerHTML=t;e.parentNode.insertBefore(a,e);e.parentNode.removeChild(e)})});return Promise.all([i,s,n]).then((0,r.default)({parent:a,selector:".ot-select-label"})).then(function(){return c(t)}).catch(function(e){console.error("[opentable] widget DOM never rendered")})};var s=function e(c,u){return new Promise(function(t,a){var s=u.querySelector("script");var e=u.clientWidth>850?"wide":"standard";var i=c.Y.Squarespace.Utils&&c.Y.Squarespace.Utils.isInDamaskFrame();var n=i?"false":"true";var r=s.getAttribute("src");var o=r.replace(/&(iframe|overlay|theme)=\w+/g,"");var l="".concat(o,"&iframe=").concat(n,"&overlay=false&theme=").concat(e);(0,d.default)(l,{before:function e(t,a){var i=s.parentNode;try{c.OT&&c.OT.Events&&Object.keys(c.OT.Events.get()).forEach(function(e){return c.OT.Events.remove(e)});c.oc&&c.oc.events.reset()}catch(e){console.error(e.message)}i.innerHTML="";i.appendChild(a);return false},success:function e(){try{i&&c.oc&&c.oc.renderUnloadedComponents();p(u).then(function(){if(c.oc&&u.querySelector(".ot-hide")){var e=u.querySelector(".ot-dtp-picker");c.oc.$(e).OTdtp("init")}t()})}catch(e){console.error(e.message);a("[opentable] could not reloadScript and reinit block")}},error:function e(){a("[opentable] loadjs failed")}})})};e.exports=function(e){var t=e.ownerDocument.defaultView;t.Squarespace.SQUARESPACE_INITIALIZED_ONCE?s(t,e).catch(function(e){console.error(e)}):p(e)}},"./src/main/webapp/universal/src/shared/utils/RteUtils.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.getItems=k;t.createState=t.createSchema=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var o=a("./common/temp/node_modules/@sqs/rte-core/dist/index.js");var l=a("./src/main/webapp/universal/src/shared/constants/TextEditor.js");var n=a("./common/temp/node_modules/@sqs/core-components/build/lib/index.js");function r(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function c(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?r(Object(a),true).forEach(function(e){(0,s.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var u=n.RteItemConfig.align,d=n.RteItemConfig.blockQuote,p=n.RteItemConfig.blockType,h=n.RteItemConfig.bold,g=n.RteItemConfig.clearFormatting,m=n.RteItemConfig.indent,f=n.RteItemConfig.italic,v=n.RteItemConfig.orderedList,b=n.RteItemConfig.outdent,S=n.RteItemConfig.link,y=n.RteItemConfig.redo,_=n.RteItemConfig.strikethrough,C=n.RteItemConfig.subscript,E=n.RteItemConfig.superscript,w=n.RteItemConfig.underline,A=n.RteItemConfig.undo,T=n.RteItemConfig.unorderedList;var I=function e(t){var a=t.schema,i=t.schemaType,s=t.isInline,n=t.isLinkable;a=a||l.defaultSchemas[i];if(s)return o.EditorSchema.createInline(c({},a,{link:n,hardBreak:false,paragraph:false}));var r={multiple:true,required:true};return o.EditorSchema.create(c({},a,{link:n}),r)};t.createSchema=I;var q=function e(t){var a=t.initialData,i=t.schema,s=t.placeholder;if("string"===typeof a)return o.EditorState.fromHTML({html:a,schema:i,placeholder:s});var n=a&&a.getDOMNode?a.getDOMNode():a;if(n&&n.nodeType)return o.EditorState.fromNode({node:n,schema:i,placeholder:s});return o.EditorState.createEmpty({schema:i,placeholder:s})};t.createState=q;function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=c({hasAlignment:true},e);var t=[h,f,w];e.hasLink&&t.push(S);if("classic"===e.type){t.push(l.DIVIDER,p);e.hasAlignment&&t.push(u);t.push(l.DIVIDER,d,T,v,l.DIVIDER,_,E,C,l.DIVIDER,b,m)}t.push(l.DIVIDER,l.Items.PASTE_PLAIN,A,y,g);return t}},"./src/main/webapp/universal/src/shared/utils/SimpleLikingAPI.js":function(e,t,a){"use strict";var i=a("./src/main/webapp/universal/src/shared/utils/network.js");var s=",";var n=function e(t){return i.post("/api/content-items/"+t+"/sentiment/like").then(function(e){var t=e.data;return t})};var r=[];var o=null;var l=function e(){var t=r.map(function(e){return e.itemId}).join(s);i.get("/api/blog-like-count/".concat(t)).then(function(e){var t=e.data;r.forEach(function(e){if(t.hasOwnProperty(e.itemId)){e.resolve(t[e.itemId]);return}e.reject()});r=[];o=null})};var c=function e(a){return new Promise(function(e,t){r.push({itemId:a,resolve:e,reject:t});null!==o&&clearTimeout(o);o=setTimeout(l,100)})};var u=function e(t){return c(t)};e.exports={like:n,getLikeCount:u}},"./src/main/webapp/universal/src/shared/utils/Singleton.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i={create:function e(t){false;var a=function e(){};a.prototype=t;var i=new a;i.ready&&i.ready();return i}};var s=i;t.default=s;e.exports=t.default},"./src/main/webapp/universal/src/shared/utils/SocialGalleryBlockInitializer.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=s;var n=i(a("./src/main/webapp/universal/src/shared/utils/network.js"));function s(a,e){a.getDOMNode&&(a=a.getDOMNode());var t;try{t=JSON.parse(a.getAttribute("data-block-json"))}catch(e){console.warn("Issue with decoding the JSON: ",e);return Promise.reject()}var i=JSON.stringify({type:e,id:a.getAttribute("id").replace("block-",""),value:t});var s="widgetJSON=".concat(i);return n.default.post("/api/widget/GetWidgetRendering",s).then(function(e){var t=a.querySelector(".sqs-block-content");t&&e.data&&e.data.html&&(t.innerHTML=e.data.html)})}e.exports=t.default},"./src/main/webapp/universal/src/shared/utils/SummaryV2BlockInitializer.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/toConsumableArray.js"));var o=a("./src/main/webapp/universal/src/shared/utils/network.js");var l=a("./node_modules/querystring-es3/index.js");var c=a("./src/main/webapp/frontend/packages/enums/BlockType.js");function s(a){var e=a.querySelector(".summary-block-wrapper");if(!e)return Promise.resolve();if(!e.matches(".summary-block-collection-type-events"))return Promise.resolve();var t;try{t=JSON.parse(a.getAttribute("data-block-json"))}catch(e){console.warn("Issue with decoding the JSON: ",e);return Promise.resolve()}var i=a.ownerDocument.defaultView.Static.SQUARESPACE_CONTEXT.collectionId;var s=a.closest('.sqs-layout[data-type="page"]');s&&(i=s.getAttribute("id").replace("page-",""));var n=l.stringify({collectionId:i,widgetJSON:JSON.stringify({type:c.SUMMARY_V2,id:a.getAttribute("id").replace("block-",""),value:t})});var r={headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}};return o.post("/api/widget/GetWidgetRendering",n,r).then(function(e){var t=a.querySelector(".sqs-block-content");t&&(t.innerHTML=e.data.html)})}var r=function e(t){t.getDOMNode&&(t=t.getDOMNode());return s(t).then(function(){if(!t.querySelector(".summary-block-setting-design-autogrid"))return Promise.resolve();var a=(0,n.default)(t.querySelectorAll("img"));var i=0;var s=function e(t){t.target.removeEventListener("load",e);i++;if(i===a.length){i=0;window.dispatchEvent(new Event("resize"))}};var e=function e(t){t.addEventListener("load",s)};a.forEach(e)})};t.default=r;e.exports=t.default},"./src/main/webapp/universal/src/shared/utils/SvgCompatibility.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/toConsumableArray.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var o=i(a("./common/temp/node_modules/platform/platform.js"));var l=i(a("./src/main/webapp/universal/src/shared/utils/network.js"));var c=function e(){(0,n.default)(this,e)};t.default=c;(0,r.default)(c,"SVG_NAMESPACE_URI","http://www.w3.org/2000/svg");(0,r.default)(c,"SVG_NAMESPACE_QUALIFIED_NAME","g");(0,r.default)(c,"SVG_USE_SELECTOR","use");(0,r.default)(c,"spritesheetPromises",{});(0,r.default)(c,"isNeeded",function(){return"IE"===o.default.name});(0,r.default)(c,"logError",function(e){var t=e.message;"undefined"!==typeof console&&console.error("[SvgCompatibility] ".concat(t))});(0,r.default)(c,"getEls",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;return(0,s.default)(e.querySelectorAll(c.SVG_USE_SELECTOR))});(0,r.default)(c,"parse",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;if(!c.isNeeded())return;c.getEls(e).forEach(function(a){var e=c.elToUrlId(a),t=e.url,i=e.id;if(!t||!i){false;return}c.getSpritesheet(t).then(function(e){false;var t=c.getIconFromSpritesheet(i,e);c.swapElWithIcon(a,t)}).catch(c.logError)})});(0,r.default)(c,"elToUrlId",function(e){var t=e.getAttribute("xlink:href").split("#");return{url:t[0],id:t[1]}});(0,r.default)(c,"getSpritesheet",function(e){return c.spritesheetPromises[e]?c.spritesheetPromises[e]:c.loadSpritesheet(e)});(0,r.default)(c,"loadSpritesheet",function(e){false;c.spritesheetPromises[e]=l.default.get(e).then(function(e){var t=e.data;var a=document.createElement("div");a.innerHTML=t;return a}).catch(function(e){return document.createElement("div")});return c.spritesheetPromises[e]});(0,r.default)(c,"getIconFromSpritesheet",function(e,t){if(!e||!t)throw new Error("id and spritesheet are required");var a=t.querySelector("#".concat(e));if(!a)throw new Error('Could not find icon "'.concat(e,'"'));return a.cloneNode(true)});(0,r.default)(c,"swapElWithIcon",function(e,t){if(!e||!e.parentNode||!t||!t.childNodes)throw new Error("Non-orphan el and non-empty icon are required");var a=document.createElementNS(c.SVG_NAMESPACE_URI,c.SVG_NAMESPACE_QUALIFIED_NAME);(0,s.default)(t.childNodes).forEach(function(e){return a.appendChild(e)});a.setAttribute("class",e.getAttribute("class"));e.parentNode.replaceChild(a,e)});e.exports=t.default},"./src/main/webapp/universal/src/shared/utils/TemplateHelpers.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.prefixFormatters=t.getImageAlt=t.stripTags=t.colorDataToDataAttrs=void 0;var v=function e(t){return t.topLeftAverage&&t.topRightAverage&&t.bottomLeftAverage&&t.bottomRightAverage&&t.centerAverage?' data-color-topleft="#'.concat(t.topLeftAverage,'"\n  data-color-topright="#').concat(t.topRightAverage,'"\n  data-color-bottomleft="#').concat(t.bottomLeftAverage,'"\n  data-color-bottomright="#').concat(t.bottomRightAverage,'"\n  data-color-center="#').concat(t.centerAverage,'" '):""};t.colorDataToDataAttrs=v;var i=function e(t){return t.replace(/<(?:.|\n)*?>/gm,"")};t.stripTags=i;var s=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.title&&t.title.length>0)return t.title;if(t.body&&t.body.length>0)return i(t.body);if(t.filename&&t.filename.length>0)return t.filename;return""};t.getImageAlt=s;var n={};t.prefixFormatters=n;n.video=function(f){return{name:"video",func:function e(t,a,i){var s=t.oembed||{};var n=t.assetUrl,r=t.colorData,o=t.mediaFocalPoint;var l=false;var c=false;if(i)for(var u=0;u<i.length;u++){var d=i[u];"load-false"===d?l=true:"color-data"===d&&(c=true)}var p=l?'data-load="false" ':"";var h=f.Squarespace.Escaping.escapeForHtmlTag(s.html);var g='<div class="sqs-video-wrapper"\n      '.concat(p,'\n      data-html="').concat(h,'"\n      data-provider-name="').concat(s.providerName,'">');if(t.overlay){var m='<div class="sqs-video-overlay';if(!t.mainImageId&&!t.systemDataId)m+=' no-thumb" style="opacity: 0;">';else{m+='" style="opacity: 0;">';m+='<img data-load="false" data-image="'+n+'" data-src="'+n+'" data-image-dimensions="'+(t.originalSize||"")+'" data-image-focal-point="'+(o?o.x+","+o.y:"0.5,0.5")+'" ';c&&r&&(m+=v(r));m+="/>"}m+='<div class="sqs-video-opaque"></div><div class="sqs-video-icon"></div>';m+="</div>";g+=m}g+="</div>";return g}}}},"./src/main/webapp/universal/src/shared/utils/TemplateSwitcher/IFrameUrls.ts":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var o=i(a("./common/temp/node_modules/@sqs/cookie-cutter/index.js"));var l=i(a("./src/main/webapp/frontend/packages/enums/WebsiteType.js"));var c=a("./common/temp/node_modules/@sqs/i18n-locale-list/es/index.js");var u,d,p,h,g,m;var f=function(){function n(){(0,s.default)(this,n)}(0,r.default)(n,null,[{key:"buildSubDomainsForLocale",value:function e(){return c.locales.translationFiles.reduce(function(e,t,a){if(t!=="".concat(c.locales.defaultLocale)){var i=c.locales.supportedLanguageTags[a];e[t]={prod:i,staging:"www-staging-".concat(i,"-origin")}}return e},{})}},{key:"getSubdomain",value:function e(){var t=n.subDomainsForLocale[n.templatesLocale]||n.subDomains;if("true"===o.default.get("sqs-use-staging-template-switcher"))return t.staging;return t.prod}},{key:"getFrameOriginUrl",value:function e(){return"https://".concat(n.getSubdomain(),".squarespace.com")}},{key:"getUrls",value:function e(t){var a=n.translatedTemplateStoreRoutes[n.templatesLocale]||n.templateStoreRoute;var i=n.pathForWebsiteType[t]||n.pathForWebsiteType[l.default.CLASSIC];var s=this.getFrameOriginUrl();return{origin:s,source:"".concat(s,"/").concat(a,"/").concat(n.embeddedRoute,"/").concat(i,"/?locale_redirect=false")}}}]);return n}();t.default=f;(0,n.default)(f,"embeddedRoute","embedded");(0,n.default)(f,"appDomain",(null===(u=window)||void 0===u?void 0:null===(d=u.Static)||void 0===d?void 0:null===(p=d.SQUARESPACE_CONTEXT)||void 0===p?void 0:p.appDomain)||"");(0,n.default)(f,"subDomainsForLocale",f.buildSubDomainsForLocale());(0,n.default)(f,"templatesLocale",(null===(h=window.Static)||void 0===h?void 0:null===(g=h.SQUARESPACE_CONTEXT)||void 0===g?void 0:g.templateLocale)||"");(0,n.default)(f,"templateStoreRoute","templates");(0,n.default)(f,"translatedTemplateStoreRoutes",{"es-419":"plantillas","fr-FR":"modeles","de-DE":"vorlagen","pt-BR":"templates","it-IT":"templates"});(0,n.default)(f,"subDomains",{prod:"www",staging:"www-staging"});(0,n.default)(f,"pathForWebsiteType",(m={},(0,n.default)(m,l.default.CLASSIC,"template-switcher"),(0,n.default)(m,l.default.COVER_PAGE,"change-cover-page"),(0,n.default)(m,l.default.PARKING_PAGE,"change-parking-page"),m));e.exports=t.default},"./src/main/webapp/universal/src/shared/utils/TemplateSwitcher/TemplateSwitcher.ts":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=t.MessageType=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var r=i(a("./src/main/webapp/universal/src/shared/utils/TemplateSwitcher/IFrameUrls.ts"));var o;t.MessageType=o;(function(e){e["CONNECT"]="connect_template_switcher";e["INSTALL_TEMPLATE"]="install_template"})(o||(t.MessageType=o={}));var l=function e(t){var a=this;(0,s.default)(this,e);(0,n.default)(this,"iframe",void 0);(0,n.default)(this,"installTemplate",void 0);(0,n.default)(this,"installedTemplateWebsiteIds",void 0);(0,n.default)(this,"onLoad",void 0);(0,n.default)(this,"iframeUrls",void 0);(0,n.default)(this,"handleIframeLoad",function(){var e;a.onLoad();null===(e=a.iframe.contentWindow)||void 0===e?void 0:e.postMessage({installedTemplateWebsiteIds:a.installedTemplateWebsiteIds,type:o.CONNECT,url:window.location.origin},a.iframeUrls.origin)});(0,n.default)(this,"handlePostMessage",function(e){if(e.origin!==a.iframeUrls.origin)return;if(e.data.type===o.INSTALL_TEMPLATE){a.installTemplate({cloneIdentifier:e.data.id});window.removeEventListener("message",a.handlePostMessage)}});this.iframeUrls=r.default.getUrls(t.websiteType);this.installTemplate=t.installTemplate;this.installedTemplateWebsiteIds=t.installedTemplateWebsiteIds;this.onLoad=t.onLoad;this.iframe=document.createElement("iframe");this.iframe.setAttribute("data-test","template-switcher-iframe");this.iframe.src=this.iframeUrls.source;this.iframe.addEventListener("load",this.handleIframeLoad);t.container.appendChild(this.iframe);window.addEventListener("message",this.handlePostMessage)};t.default=l},"./src/main/webapp/universal/src/shared/utils/TemplateSwitcher/index.ts":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});Object.defineProperty(t,"default",{enumerable:true,get:function e(){return s.default}});var s=i(a("./src/main/webapp/universal/src/shared/utils/TemplateSwitcher/TemplateSwitcher.ts"));e.exports=t.default},"./src/main/webapp/universal/src/shared/utils/VisualUtils.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getFocalPoint=void 0;var i=function e(t){var a=t.distance,i=t.imgSize,s=t.containerSize,n=t.startFocal;var r=s-i;if(r>=0)return n;var o=r*n+a;var l=o/r;return Math.max(Math.min(l,1),0)};t.getFocalPoint=i},"./src/main/webapp/universal/src/shared/utils/WebsiteOverlaysUtils.js":function(e,t,a){"use strict";var c=a("./src/main/webapp/frontend/packages/enums/AnnouncementBarStyle.js");var d=a("./src/main/webapp/frontend/packages/enums/PopupOverlayStyle.js");var p=a("./src/main/webapp/frontend/packages/enums/CollectionTypes.js");var h=a("./src/main/webapp/frontend/packages/enums/PageTypes.js");var r=a("./src/main/webapp/frontend/packages/enums/MobileInfoBarStyle.js");var i=a("./src/main/webapp/frontend/packages/enums/SSBadgeType.js");var o=a("./common/temp/node_modules/lodash/isNumber.js");var s=a("./src/main/webapp/universal/src/shared/utils/LocalStorageUtils.js"),l=s.getLocalStorageData;var u=a("./src/main/webapp/universal/src/shared/constants/PopupOverlayLocalStorage.js");var g=a("./common/temp/node_modules/lodash/isEmpty.js");var n=a("./src/main/webapp/universal/src/shared/utils/TemplateVersionUtils.js");function m(e){var t=e.settings,a=void 0===t?{}:t,i=e.context,s=void 0===i?{}:i;var n=s.pageType===h.NOT_FOUND&&s.collection&&s.collection.type===p.SPLASH_PAGE;var r=n||s.pageType===h.SPLASH_PAGE||s.pageType===h.LOCK_SCREEN;var o=s.pageType===h.COMMERCE_EMAIL_PREVIEW;var l=a.style!==c.NONE&&a.text;return l&&!r&&!o}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=l(u.KEY);if(t&&!g(t)){var a=t[u.VERSION];if(a&&a<e.version)return true;var i=t[u.SUBMITTED];if(i&&e.showUntilSignup)return false;var s=Date.now();var n=t[u.CLOSED_DATE];if(n){var r=new Date(n);r.setDate(r.getDate()+e.displayFrequency);if(r<s&&-1!==e.displayFrequency)return true}return false}return true}function v(e){var t=e.settings,a=void 0===t?{}:t,i=e.context,s=void 0===i?{}:i,n=e.isMobile,r=void 0!==n&&n,o=e.urlSearch,l=void 0===o?"":o;var c=s.pageType===h.NOT_FOUND&&s.collection&&s.collection.type===p.SPLASH_PAGE;var u=c||s.pageType===h.LOCK_SCREEN;if(false===a.enableMobile&&r||!a.style||a.style===d.NONE||u||l.includes("sqsscreenshot=true"))return false;return f(a)}function b(e){var t=e.websiteSettings;if(n.isSevenOne())return false;if(!t.hasOwnProperty("ssBadgeType"))return false;return t.ssBadgeType!==i.NONE}function S(e){var t=e.win,a=e.isMobile,i=e.settings;if(!a)return false;var s=t.innerWidth;var n=s<=1024;if(!n)return false;if(!i||!o(i.style))return false;if(i.style===r.NONE)return false;return true}function y(e){var t=e.YNodeBody;var a=t.all('img[data-licensed-asset-preview="true"]');var i=t.hasClass("has-preview-getty-imgs");return!a.isEmpty()||i}function _(e){var t=e.settings,a=void 0===t?{}:t,i=e.urlSearch,s=void 0===i?"":i;if(s.includes("sqsscreenshot=true"))return false;return a.isCookieBannerEnabled}e.exports={shouldShowAnnouncementBar:m,shouldShowPopupOverlay:v,shouldShowMobileInformationBar:S,shouldShowLicensedAssetsBar:y,shouldShowSSBadge:b,shouldShowCookieBanner:_}},"./src/main/webapp/universal/src/shared/utils/YuiElimination.ts":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.isYuiClassEnabled=l;var s=i(a("./common/temp/node_modules/lodash/get.js"));var n=a("./common/temp/node_modules/@sqs/praetor/build/module/index.js");var r=function e(){return(0,s.default)(window,["Static","SQUARESPACE_CONTEXT","yuiEliminationExperimentList"],[])};var o;function l(e){if(!o){var t=r();if(!t.length)return true;o=new n.StaticPraetorClient({isConfigurationLoaded:true,experimentContextList:t})}var a=o.getABTestVariant("".concat(e,"-enabled"),"true"),i=a.variant;if("false"===i)return false;return true}},"./src/main/webapp/universal/src/shared/utils/__legacyRouterHooks.js":function(e,t,a){"use strict";var i;e.exports={onChange:function e(){var t;if(!i)return;return(t=i).onChange.apply(t,arguments)},onBeforeChange:function e(t){if(!i)return;return i.onBeforeChange(t)},onBeforeUnload:function e(t){if(!i)return;return i.onBeforeUnload(t)},setRouter:function e(t){i=t}}},"./src/main/webapp/universal/src/shared/utils/alphabetize.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i=function e(t){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return[].concat(t).sort(function(e,t){var a=s.key?e[s.key].toLowerCase():e.toLowerCase();var i=s.key?t[s.key].toLowerCase():t.toLowerCase();return a<i?-1:a>i?1:0})};t.default=i;e.exports=t.default},"./src/main/webapp/universal/src/shared/utils/analytics/trackFacebookPixel.ts":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var a=window.top;a.fbq&&a.fbq("track",e,t)}var s=i;t.default=s;e.exports=t.default},"./src/main/webapp/universal/src/shared/utils/calculateDateDiff.js":function(e,t,a){"use strict";var i=function e(t,a){if(a<t)return e(a,t);var i=a.getFullYear()-t.getFullYear();a.getMonth()<t.getMonth()&&i--;var s=(a.getMonth()-t.getMonth()+12)%12;var n;if(a.getDate()<t.getDate()){s--;var r=new Date(t.getYear(),t.getMonth()+1,0).getDate();n=r-t.getDate()+a.getDate()}else n=a.getDate()-t.getDate();var o=Math.floor(n/7);n-=7*o;return{year:i,month:s,week:o,day:n}};e.exports=i},"./src/main/webapp/universal/src/shared/utils/calculateFullDayOffset.js":function(e,t,a){"use strict";var n=a("./src/main/webapp/universal/src/shared/utils/shiftForWebsiteTimezoneDisplay.js");var r=864e5;e.exports=function(e,t){if(!e||!t)return null;var a=function e(t){var a=n(t);a.set({hour:0,minute:0,second:0,millisecond:0});return Math.floor(a.getTime()/r)};var i=a(e);var s=a(t);return s-i}},"./src/main/webapp/universal/src/shared/utils/census/ButtonBlockTrackingInitializer.js":function(e,t,a){"use strict";var c=a("./src/main/webapp/frontend/packages/enums/ButtonContext.js");var u=a("./src/main/webapp/universal/src/shared/utils/UrlUtils.js");var d=a("./src/main/webapp/universal/src/shared/utils/census/CensusUtils.ts");function i(e){var a=e.one("a");if(!a||a.getAttribute("data-initialized"))return;var t=a.get("parentNode");var i=a.ancestor(".sqs-block-button");var s=i.getAttribute("id");var n=a.getAttribute("href");var r=a.hasAttribute("target");var o=u.isMailto(n);var l={id:s,buttonText:a.get("innerHTML"),clickthroughUrl:n,alignment:t.getAttribute("data-alignment"),size:t.getAttribute("data-button-size"),newWindow:r,context:c.BUTTON_BLOCK};d.trackButtonView(l);a.on("click",function(e){if(a.hasAttribute("data-tracked")){a.removeAttribute("data-tracked");return}var t=(!r||e.metaKey||e.ctrlKey||e.shiftKey)&&!o;if(t){e.preventDefault();e.stopImmediatePropagation()}d.trackButtonClick(l).then(function(){if(t){a.setAttribute("data-tracked",true);a.simulate("click")}})});a.setAttribute("data-initialized",true)}e.exports=i},"./src/main/webapp/universal/src/shared/utils/census/CensusUtils.ts":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.addIntraPageEventFields=b;t.manageCookies=k;t.track=L;t.trackFormRender=R;t.trackOverlayEvent=O;t.trackPageview=P;t.trackProductQuickView=x;t.trackButtonView=t.trackButtonClick=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/typeof.js"));var n=i(a("./common/temp/node_modules/@sqs/census-cookie-manager/dist/index.js"));var r=i(a("./common/temp/node_modules/@sqs/cookie-cutter/index.js"));var o=i(a("./src/main/webapp/frontend/packages/enums/PageTypes.js"));var l=i(a("./src/main/webapp/frontend/packages/enums/CensusEventType.js"));var c=a("./src/main/webapp/universal/src/shared/i18n/resolvedLocales.ts");var u=i(a("./src/main/webapp/universal/src/shared/utils/network.js"));var d=i(a("./node_modules/querystring-es3/index.js"));var p=["ss_cid","ss_cpvisit","ss_cvisit","ss_cvr","ss_cvt"];var h=function e(){return Promise.resolve()};var g={headers:{"Content-type":"application/x-www-form-urlencoded; charset=utf-8"}};function m(){return window.Static.SQUARESPACE_CONTEXT}function f(){return window.__WE_ARE_SQUARESPACE_DISABLING_CENSUS__}function v(){try{window.localStorage.setItem("test","1");return true}catch(e){return false}}function b(e){var t=m(),a=t.itemId,i=t.item,s=t.collectionId,n=t.collection;S(e,n);if(a&&i){e.pageTitle=i.title;e.pageId=a;e.contentSource="i"}else if(s&&n){e.pageTitle=n.title;e.pageId=s;e.contentSource="c"}e.pagePath=window.location.pathname}function S(e,t){t&&(e.pagePermissionTypeValue=t.permissionType);return e}function y(){var e=m(),t=e.authenticatedAccount,a=e.pageType;return!t&&a!==o.default.NOT_FOUND&&a!==o.default.LOCK_SCREEN&&a!==o.default.MEMBER_AREA_ACCESS_DENIED&&true!==f()}function _(){var e=m(),t=e.website;if(null!==t&&void 0!==t&&t.cloneable)return true;return false}function C(){var e=m(),t=e.cookieSettings;if(_())return true;return t&&t.isRestrictiveCookiePolicyEnabled&&(t.isRestrictiveCookiePolicyAbsolute||!t.isCookieBannerEnabled||!r.default.get("ss_cookieAllowed"))}function E(a){return function(e){if(y()){var t=n.default.hit(C());e.visitorCookie=t;b(e);return u.default.post(a,e,{timeout:2500}).catch(h)}return Promise.resolve()}}function w(e){e.userAgent=navigator.userAgent;e.clientDate=(new Date).getTime();e.viewportInnerHeight=window.innerHeight;e.viewportInnerWidth=window.innerWidth;e.screenHeight=window.screen.height;e.screenWidth=window.screen.width;return e}function A(e){var t=m(),a=t.website,i=t.templateId;a&&(e.websiteId=a.id);i&&(e.templateId=i);e.website_locale=(0,c.getResolvedWebsiteLocale)();return e}function T(e){e.url=window.location.pathname;var t=m(),a=t.itemId,i=t.item,s=t.collectionId,n=t.collection;S(e,n);if(a&&i){e.title=i.title;e.itemId=a;e.recordType=i.recordType}else if(s&&n){e.title=n.title;e.collectionId=s}return e}function I(){return{localStorageSupported:v(),queryString:window.location.search,referrer:window.document.referrer}}function q(){return"/search"===window.location.pathname}function k(){if(C())for(var e=0;e<p.length;e++)r.default.get(p[e])&&r.default.set(p[e],"",{path:"/",expires:new Date(0).toUTCString()})}function L(e,t){if(!y())return;"object"===(0,s.default)(t)&&null!==t||(t={});A(t);w(t);T(t);var a=n.default.hit(C());u.default.post("/api/census/RecordHit",d.default.stringify({event:e,data:JSON.stringify(t),ss_cvr:a}),g).catch(h)}var D=E("/api/census/button-click");t.trackButtonClick=D;var N=E("/api/census/button-render");t.trackButtonView=N;function R(e){if(y()){var t=n.default.hit(C());var a={formId:e,visitorCookie:t};b(a);return u.default.post("/api/census/form-render",a).catch(h)}return Promise.resolve()}function O(e){if(y()){var t=n.default.hit(C());e.visitorCookie=t;b(e);return u.default.post("/api/census/overlay",e).catch(h)}}function P(){if(q())return;var e=I();L(l.default.PAGE_VIEW,e)}function x(e){y()&&u.default.post("/api/census/RecordQuickView/".concat(e))}},"./src/main/webapp/universal/src/shared/utils/commerce/SubscriptionUtils.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.getSubscriptionPriceString=t.isSubscriptionIndefinite=t.shouldSeeUpsell=t.isSubscribableProductTypeForMerchant=void 0;var q=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var s=i(a("./src/main/webapp/universal/src/apps/App/shared/stores/FeaturesStore.js"));var n=i(a("./src/main/webapp/frontend/packages/enums/Features.js"));var k=a("./src/main/webapp/universal/src/shared/i18n/index.ts");var L=i(a("./common/temp/node_modules/lodash/get.js"));var D=i(a("./src/main/webapp/universal/src/shared/constants/commerce/BillingPeriodUnits.js"));var r=a("./src/main/webapp/frontend/packages/enums/ProductTypes.js");var o;var l=function e(t){return t===r.PHYSICAL||t===r.SERVICE};t.isSubscribableProductTypeForMerchant=l;var c=function e(){return!s.default.isFeatureEnabled(n.default.COMMERCE_SUBSCRIPTIONS)};t.shouldSeeUpsell=c;var N=function e(t){var a=t.numBillingCycles;return 0===a};t.isSubscriptionIndefinite=N;var R=Object.freeze((o={},(0,q.default)(o,D.default.WEEK,52),(0,q.default)(o,D.default.MONTH,12),(0,q.default)(o,D.default.YEAR,1),o));var u=function e(t){var a,i,s,n,r,o,l,c,u,d,p,h,g,m,f,v,b;var S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";var y=t.billingPeriod,_=y.value,C=y.unit,E=t.numBillingCycles;var w=_*E;var A=!N(t);var T=w%R[C]===0?D.default.YEAR:C;T!==C&&(w/=R[C]);var I=[_>1,C,A];if(A){I.push(T);T===D.default.YEAR&&I.push(w>1)}return(0,L.default)((b={},(0,q.default)(b,false,(c={},(0,q.default)(c,D.default.WEEK,(s={},(0,q.default)(s,false,(0,k.t)("{priceString} every week",{priceString:S})),(0,q.default)(s,true,(i={},(0,q.default)(i,D.default.WEEK,(0,k.t)("{priceString} every week for {durationValue} weeks",{priceString:S,durationValue:w})),(0,q.default)(i,D.default.YEAR,(a={},(0,q.default)(a,false,(0,k.t)("{priceString} every week for 1 year",{priceString:S})),(0,q.default)(a,true,(0,k.t)("{priceString} every week for {durationValue} years",{priceString:S,durationValue:w})),a)),i)),s)),(0,q.default)(c,D.default.MONTH,(o={},(0,q.default)(o,false,(0,k.t)("{priceString} every month",{priceString:S})),(0,q.default)(o,true,(r={},(0,q.default)(r,D.default.MONTH,(0,k.t)("{priceString} every month for {durationValue} months",{priceString:S,durationValue:w})),(0,q.default)(r,D.default.YEAR,(n={},(0,q.default)(n,false,(0,k.t)("{priceString} every month for 1 year",{priceString:S})),(0,q.default)(n,true,(0,k.t)("{priceString} every month for {durationValue} years",{priceString:S,durationValue:w})),n)),r)),o)),(0,q.default)(c,D.default.YEAR,(l={},(0,q.default)(l,false,(0,k.t)("{priceString} every year",{priceString:S})),(0,q.default)(l,true,(0,k.t)("{priceString} every year for {durationValue} years",{priceString:S,durationValue:w})),l)),c)),(0,q.default)(b,true,(v={},(0,q.default)(v,D.default.WEEK,(p={},(0,q.default)(p,false,(0,k.t)("{priceString} every {billingPeriodValue} weeks",{priceString:S,billingPeriodValue:_})),(0,q.default)(p,true,(d={},(0,q.default)(d,D.default.WEEK,(0,k.t)("{priceString} every {billingPeriodValue} weeks for {durationValue} weeks",{priceString:S,billingPeriodValue:_,durationValue:w})),(0,q.default)(d,D.default.YEAR,(u={},(0,q.default)(u,false,(0,k.t)("{priceString} every {billingPeriodValue} weeks for 1 year",{priceString:S,billingPeriodValue:_})),(0,q.default)(u,true,(0,k.t)("{priceString} every {billingPeriodValue} weeks for {durationValue} years",{priceString:S,billingPeriodValue:_,durationValue:w})),u)),d)),p)),(0,q.default)(v,D.default.MONTH,(m={},(0,q.default)(m,false,(0,k.t)("{priceString} every {billingPeriodValue} months",{priceString:S,billingPeriodValue:_})),(0,q.default)(m,true,(g={},(0,q.default)(g,D.default.MONTH,(0,k.t)("{priceString} every {billingPeriodValue} months for {durationValue} months",{priceString:S,billingPeriodValue:_,durationValue:w})),(0,q.default)(g,D.default.YEAR,(h={},(0,q.default)(h,false,(0,k.t)("{priceString} every {billingPeriodValue} months for 1 year",{priceString:S,billingPeriodValue:_})),(0,q.default)(h,true,(0,k.t)("{priceString} every {billingPeriodValue} months for {durationValue} years",{priceString:S,billingPeriodValue:_,durationValue:w})),h)),g)),m)),(0,q.default)(v,D.default.YEAR,(f={},(0,q.default)(f,false,(0,k.t)("{priceString} every {billingPeriodValue} years",{priceString:S,billingPeriodValue:_})),(0,q.default)(f,true,(0,k.t)("{priceString} every {billingPeriodValue} years for {durationValue} years",{priceString:S,billingPeriodValue:_,durationValue:w})),f)),v)),b),I,(0,k.t)("Unavailable"))};t.getSubscriptionPriceString=u},"./src/main/webapp/universal/src/shared/utils/commerce/WaitlistUtils.ts":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getInStockVariantIds=void 0;var i=function e(t){if(!t)return[];return t.filter(function(e){return e.qtyInStock||e.unlimited}).map(function(e){return e.id})};t.getInStockVariantIds=i},"./src/main/webapp/universal/src/shared/utils/commerce/api/RestockNotificationApi.ts":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.sendEmailsForProducts=t.sendEmailsForProduct=t.fetchTotalEmailCountForVariants=t.fetchSignupGroupEmails=t.fetchAllRestockNotificationSignupGroups=t.fetchRestockNotificationSignupGroups=t.signUpForRestockNotification=void 0;var c=i(a("./common/temp/node_modules/@babel/runtime/regenerator/index.js"));var u=i(a("./common/temp/node_modules/@babel/runtime/helpers/toConsumableArray.js"));var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/asyncToGenerator.js"));var d=i(a("./src/main/webapp/universal/src/shared/utils/network.js"));var p="/api/site-users/account/notifications/restock";var n=function e(t){return d.default.post(p,t)};t.signUpForRestockNotification=n;var o=function e(t){return d.default.get("".concat(p,"/groups"),{params:{cursor:t}})};t.fetchRestockNotificationSignupGroups=o;var r=function(){var t=(0,s.default)(c.default.mark(function e(){var a,i,s,n,r;return c.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:i=true;s=[];case 2:if(!i){t.next=12;break}t.next=5;return o(a);case 5:n=t.sent;r=n.data;i=r.hasNextPage;a=r.nextPageCursor;s.push.apply(s,(0,u.default)(r.signUpGroups));t.next=2;break;case 12:return t.abrupt("return",s);case 13:case"end":return t.stop()}},e)}));return function e(){return t.apply(this,arguments)}}();t.fetchAllRestockNotificationSignupGroups=r;var l=function(){var i=(0,s.default)(c.default.mark(function e(a,i){var s,n,r,o,l;return c.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:n=true;r=[];case 2:if(!n){t.next=12;break}t.next=5;return d.default.get(p,{params:{productId:a,variantId:i,cursor:s}});case 5:o=t.sent;l=o.data;n=l.hasNextPage;s=l.nextPageCursor;r.push.apply(r,(0,u.default)(l.signUps));t.next=2;break;case 12:return t.abrupt("return",r);case 13:case"end":return t.stop()}},e)}));return function e(t,a){return i.apply(this,arguments)}}();t.fetchSignupGroupEmails=l;var h=function(){var i=(0,s.default)(c.default.mark(function e(a,i){var s,n;return c.default.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:if(!(0===i.length)){t.next=2;break}return t.abrupt("return",0);case 2:s=i.map(function(e){return l(a,e)});t.next=5;return Promise.all(s);case 5:n=t.sent;return t.abrupt("return",n.reduce(function(e,t){return e+t.length},0));case 7:case"end":return t.stop()}},e)}));return function e(t,a){return i.apply(this,arguments)}}();t.fetchTotalEmailCountForVariants=h;var g=function e(t,a){return d.default.post("".concat(p,"/send"),{productId:t,variantId:a})};t.sendEmailsForProduct=g;var m=function e(t){return d.default.post("".concat(p,"/send/all"),{sendRequests:t})};t.sendEmailsForProducts=m},"./src/main/webapp/universal/src/shared/utils/commerce/trackEvent.ts":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.trackInventoryPanelClickNextPage=t.trackInventoryPanelClickRow=t.trackInventoryPanelClickRowExpander=t.trackInventoryPanelSortOnPrice=t.trackInventoryPanelSortOnStock=t.trackInventoryPanelSortOnName=t.trackInventoryPanelSearchProducts=t.trackFacebookPixelSaveId=t.trackDynamicAdsProductsFeedUrlCopy=t.trackInstagramProductsFeedUrlCopy=t.trackApiKeyCreationModalComplete=t.trackApiKeyCreationModalCancel=t.trackApiKeyCreationModalNext=t.trackApiKeyCreationModalCopy=t.trackApiKeysPanelDeleteKeyConfirm=t.trackApiKeysPanelDeleteKey=t.trackApiKeysPanelCreateKey=t.trackApiKeysPanelTermsOfUse=t.trackApiKeysPanelLearnMore=t.trackCheckoutPageExtraPaymentAuthenticationRequiredApplePay=t.trackCheckoutPageExtraPaymentAuthenticationSuccess=t.trackCheckoutPageExtraPaymentAuthenticationFailure=t.trackCheckoutPageExtraPaymentAuthenticationRequired=t.trackCheckoutPageLoaded=t.trackCheckoutPageProductFormSubmit=t.trackCheckoutPageProductFormClose=t.trackPurchase=t.trackViewProductPage=t.trackSubscribeNewsletter=t.trackSearch=t.trackAddToCart=t.trackCreateCustomerAccount=t.trackCheckoutPageAddPaymentInfo=t.trackInitiateCheckout=t.trackCheckoutPageProductFormOpen=t.trackCartPageProductFormSubmit=t.trackCartPageProductFormClose=t.trackCartPageProductFormOpen=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var n=i(a("./common/temp/node_modules/@sqs/utils/performance/BrowserMetrics.js"));var r=i(a("./src/main/webapp/universal/src/shared/constants/commerce/CommerceEvent.ts"));var o=i(a("./src/main/webapp/universal/src/shared/constants/PublicApiEvent.ts"));var l=i(a("./src/main/webapp/universal/src/shared/utils/analytics/trackFacebookPixel.ts"));var c=i(a("./src/main/webapp/universal/src/shared/utils/analytics/trackInternal.ts"));function u(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function d(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?u(Object(a),true).forEach(function(e){(0,s.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var p=function e(){return(0,c.default)(r.default.CART_PAGE_PRODUCT_FORM_OPEN)};t.trackCartPageProductFormOpen=p;var h=function e(){return(0,c.default)(r.default.CART_PAGE_PRODUCT_FORM_CLOSE)};t.trackCartPageProductFormClose=h;var g=function e(){return(0,c.default)(r.default.CART_PAGE_PRODUCT_FORM_SUBMIT)};t.trackCartPageProductFormSubmit=g;var m=function e(){return(0,c.default)(r.default.CHECKOUT_PAGE_PRODUCT_FORM_OPEN)};t.trackCheckoutPageProductFormOpen=m;var f=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,l.default)(r.default.INITIATE_CHECKOUT,t)};t.trackInitiateCheckout=f;var v=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,l.default)(r.default.CHECKOUT_PAGE_ADD_PAYMENT,t)};t.trackCheckoutPageAddPaymentInfo=v;var b=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,l.default)(r.default.CREATE_CUSTOMER_ACCOUNT,t)};t.trackCreateCustomerAccount=b;var S=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,l.default)(r.default.ADD_TO_CART,t)};t.trackAddToCart=S;var y=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,l.default)(r.default.SEARCH,t)};t.trackSearch=y;var _=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,l.default)(r.default.SUBSCRIBE_NEWSLETTER,t)};t.trackSubscribeNewsletter=_;var C=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,l.default)(r.default.VIEW_PRODUCT_PAGE,t)};t.trackViewProductPage=C;var E=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,l.default)(r.default.PURCHASE,t)};t.trackPurchase=E;var w=function e(){return(0,c.default)(r.default.CHECKOUT_PAGE_PRODUCT_FORM_CLOSE)};t.trackCheckoutPageProductFormClose=w;var A=function e(){return(0,c.default)(r.default.CHECKOUT_PAGE_PRODUCT_FORM_SUBMIT)};t.trackCheckoutPageProductFormSubmit=A;var T=function e(){return(0,c.default)(r.default.CHECKOUT_PAGE_LOADED,n.default.collect())};t.trackCheckoutPageLoaded=T;var I=function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,c.default)(t?r.default.CHECKOUT_PAGE_EXTRA_PAYMENT_AUTHENTICATION_REQUIRED_TEST_MODE:r.default.CHECKOUT_PAGE_EXTRA_PAYMENT_AUTHENTICATION_REQUIRED)};t.trackCheckoutPageExtraPaymentAuthenticationRequired=I;var q=function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,c.default)(t?r.default.CHECKOUT_PAGE_EXTRA_PAYMENT_AUTHENTICATION_FAILURE_TEST_MODE:r.default.CHECKOUT_PAGE_EXTRA_PAYMENT_AUTHENTICATION_FAILURE)};t.trackCheckoutPageExtraPaymentAuthenticationFailure=q;var k=function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,c.default)(t?r.default.CHECKOUT_PAGE_EXTRA_PAYMENT_AUTHENTICATION_SUCCESS_TEST_MODE:r.default.CHECKOUT_PAGE_EXTRA_PAYMENT_AUTHENTICATION_SUCCESS)};t.trackCheckoutPageExtraPaymentAuthenticationSuccess=k;var L=function e(){return(0,c.default)(r.default.CHECKOUT_PAGE_EXTRA_PAYMENT_AUTHENTICATION_REQUIRED_APPLE_PAY)};t.trackCheckoutPageExtraPaymentAuthenticationRequiredApplePay=L;var D=function e(){return(0,c.default)("interface_click",{identifier:o.default.API_KEYS_PANEL_LEARN_MORE})};t.trackApiKeysPanelLearnMore=D;var N=function e(){return(0,c.default)("interface_click",{identifier:o.default.API_KEYS_PANEL_TERMS_OF_USE})};t.trackApiKeysPanelTermsOfUse=N;var R=function e(){return(0,c.default)("interface_click",{identifier:o.default.API_KEYS_PANEL_CREATE_KEY})};t.trackApiKeysPanelCreateKey=R;var O=function e(t){return(0,c.default)("interface_click",d({identifier:o.default.API_KEYS_PANEL_DELETE_KEY},t))};t.trackApiKeysPanelDeleteKey=O;var P=function e(t){return(0,c.default)("interface_click",d({identifier:o.default.API_KEYS_PANEL_DELETE_KEY_CONFIRM},t))};t.trackApiKeysPanelDeleteKeyConfirm=P;var x=function e(t){return(0,c.default)("interface_click",d({identifier:o.default.API_KEY_CREATION_MODAL_COPY},t))};t.trackApiKeyCreationModalCopy=x;var B=function e(t){return(0,c.default)("interface_click",d({identifier:o.default.API_KEY_CREATION_MODAL_NEXT},t))};t.trackApiKeyCreationModalNext=B;var M=function e(t){return(0,c.default)("interface_click",d({identifier:o.default.API_KEY_CREATION_MODAL_CANCEL},t))};t.trackApiKeyCreationModalCancel=M;var F=function e(t){return(0,c.default)("interface_click",d({identifier:o.default.API_KEY_CREATION_MODAL_COMPLETE},t))};t.trackApiKeyCreationModalComplete=F;var j=function e(){return(0,c.default)(r.default.INSTAGRAM_PRODUCTS_FEED_URL_COPY)};t.trackInstagramProductsFeedUrlCopy=j;var U=function e(){return(0,c.default)(r.default.FACEBOOK_DYNAMIC_ADS_PRODUCTS_FEED_URL_COPY)};t.trackDynamicAdsProductsFeedUrlCopy=U;var V=function e(){return(0,c.default)(r.default.FACEBOOK_PIXEL_SAVE_ID)};t.trackFacebookPixelSaveId=V;var H=function e(){return(0,c.default)(r.default.INVENTORY_PANEL_SEARCH_PRODUCTS)};t.trackInventoryPanelSearchProducts=H;var G=function e(){return(0,c.default)(r.default.INVENTORY_PANEL_SORT_ON_NAME)};t.trackInventoryPanelSortOnName=G;var W=function e(){return(0,c.default)(r.default.INVENTORY_PANEL_SORT_ON_STOCK)};t.trackInventoryPanelSortOnStock=W;var z=function e(){return(0,c.default)(r.default.INVENTORY_PANEL_SORT_ON_PRICE)};t.trackInventoryPanelSortOnPrice=z;var Y=function e(){return(0,c.default)(r.default.INVENTORY_PANEL_CLICK_ROW_EXPANDER)};t.trackInventoryPanelClickRowExpander=Y;var Q=function e(){return(0,c.default)(r.default.INVENTORY_PANEL_CLICK_ROW)};t.trackInventoryPanelClickRow=Q;var X=function e(){return(0,c.default)(r.default.INVENTORY_PANEL_CLICK_NEXT_PAGE)};t.trackInventoryPanelClickNextPage=X},"./src/main/webapp/universal/src/shared/utils/createWebsiteDate.js":function(e,t,a){"use strict";var s=a("./src/main/webapp/universal/src/shared/utils/calculateTimezoneOffset.js");var n=6e4;function i(){var e=new Date(Date.UTC.apply(this,arguments));var t=s(e.getTime());var a=t.standardUTCOffset;t=s(e.getTime()-a*n);var i=t.utcOffset;e.setMinutes(e.getMinutes()-i);return e}e.exports=i},"./src/main/webapp/universal/src/shared/utils/evaluateJsonTemplate.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=f;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var o=i(a("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var l=i(a("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var c=a("./common/temp/node_modules/@squarespace/template-engine/lib-es/index.js");var u=i(a("./src/main/webapp/universal/src/shared/utils/humanizeDate.js"));var d=i(a("./src/main/webapp/universal/src/shared/utils/legacyCapitalize.js"));var p=i(a("./common/temp/node_modules/lodash/isNumber.js"));function h(s){var n=g();return function e(){var t=(0,l.default)(s),a;if(n){var i=(0,l.default)(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return(0,o.default)(this,a)}}function g(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var m=function(e){(0,r.default)(a,e);var t=h(a);function a(){(0,s.default)(this,a);return t.apply(this,arguments)}(0,n.default)(a,[{key:"apply",value:function e(t,a,i){var s=a[0];var n=s.node.asNumber();if(!(0,p.default)(n))return"Invalid date.";var r=(0,d.default)((0,u.default)(n));s.set('<span class="timesince" data-date="'.concat(n,'">').concat(r,"</span>"))}}]);return a}(c.Formatter);function f(e,t){var a=new c.Compiler({predicates:c.Predicates,formatters:Object.assign({},c.Formatters,{timesince:new m})});var i=a.execute({code:e,json:t}),s=i.ctx,n=i.errors;n.length>0&&console.log("JSONT compilation error messages:",n);return s.render()}e.exports=t.default},"./src/main/webapp/universal/src/shared/utils/formatting/substituteString.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/typeof.js"));var n=i(a("./common/temp/node_modules/lodash/memoize.js"));var r=/({[^}]+})/g;var o=/{([^}]+)}/;var l=function e(t){return"string"===typeof t};var c=(0,n.default)(function(e){return e.split(r)});var u=function e(t,a){return t+"-"+JSON.stringify(a)};var d=(0,n.default)(function(e,a){"object"===(0,s.default)(a)&&null!==a&&(e=e.map(function(e){var t=e.match(o);if(t&&a.hasOwnProperty(t[1]))return a[t[1]]+"";return e}));return e.join("")},u);var p=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!a||!l(t))return t;var i=c(t);return d(i,a)};t.default=p;e.exports=t.default},"./src/main/webapp/universal/src/shared/utils/getCollectionDataFromContext.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));function n(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));a.push.apply(a,i)}return a}function r(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?n(Object(a),true).forEach(function(e){(0,s.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var o=a("./common/temp/node_modules/lodash/isPlainObject.js");var l=a("./common/temp/node_modules/lodash/isString.js");function c(e){"/"===e[0]&&(e=e.substr(1));"/"===e[e.length-1]&&(e=e.substr(0,e.length-1));return e}function u(e){if(!o(e))return null;if(l(e.urlId))return e;if(!l(e.fullUrl)||e.fullUrl.length<=1)return e;return r({},e,{urlId:c(e.fullUrl)})}e.exports=u},"./src/main/webapp/universal/src/shared/utils/getWeekdaysData.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/moment/moment.js");var s=a("./src/main/webapp/universal/src/shared/i18n/resolvedLocales.ts"),n=s.getResolvedWebsiteLocale;i.locale(n());var r=i().localeData();e.exports=function(){return r.weekdays().reduce(function(e,t){e[t.toLowerCase()]=t;return e},{})}},"./src/main/webapp/universal/src/shared/utils/getWeekdaysShortData.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/moment/moment.js");var s=a("./src/main/webapp/universal/src/shared/i18n/resolvedLocales.ts"),n=s.getResolvedWebsiteLocale;i.locale(n());var r=i().localeData();e.exports=function(){return r.weekdaysShort().reduce(function(e,t,a){var i=r.weekdays()[a].toLowerCase();e[i]=t;return e},{})}},"./src/main/webapp/universal/src/shared/utils/humanizeDate.js":function(e,t,a){"use strict";var s=a("./common/temp/node_modules/moment/moment.js");e.exports=function e(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=s(t);false;var i=t.isAfter()||!a&&t.diff(s(),"s")>-60;return i?t.from(t):t.fromNow()}},"./src/main/webapp/universal/src/shared/utils/humanizeDuration.js":function(e,t,a){"use strict";var s=a("./common/temp/node_modules/moment/moment.js");var n=a("./common/temp/node_modules/lodash/padStart.js");e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;var t=s.duration(e);var a=t.seconds();var i=Math.floor(t.subtract(s.duration(a,"s")).asMinutes());return i+":"+n(a,2,0)}},"./src/main/webapp/universal/src/shared/utils/isAppleiPadOS13.js":function(e,t,a){"use strict";var i=function e(){var t=window.navigator.userAgent.toLowerCase();var a=t.indexOf("safari/");var i="ontouchstart"in window;if(a<=-1||!i)return false;if(window.screen.width<700)return false;var s="undefined"!==typeof window&&"PointerEvent"in window&&1===window.PointerEvent.prototype.constructor.length;return s};e.exports=i},"./src/main/webapp/universal/src/shared/utils/isIeOrEdge.ts":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i=function e(){var t=window.navigator.userAgent;return t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0};t.default=i;e.exports=t.default},"./src/main/webapp/universal/src/shared/utils/legacyCapitalize.js":function(e,t,a){"use strict";var i=function e(t){return t.charAt(0).toUpperCase()+t.slice(1)};e.exports=i},"./src/main/webapp/universal/src/shared/utils/makeTextDynamic.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=i;function c(e,t){if("function"===typeof e.closest)return e.closest(t)||null;while(e){if(e.matches(t))return e;e=e.parentElement}return null}function i(e){if(!e)return false;var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sqs-dynamic-text";var a=e.ownerDocument;var o=a.defaultView;if(!o)return false;var l=o.innerWidth;var i=Array.from(e.querySelectorAll("."+t));i.forEach(function(e){var t=e.offsetWidth;var a=Math.floor(t/l*1e3)/10;var i=parseInt(e.getAttribute("data-width-percentage"),10);if(i===a)return;e.style.fontSize=a+"%";e.setAttribute("data-width-percentage",a);var s=parseInt(o.getComputedStyle(e,null).getPropertyValue("font-size"),10);var n=e.firstChild;n&&n.classList&&(s>0&&s<=13?n.classList.add("min-font-set"):n.classList.contains("min-font-set")&&n.classList.remove("min-font-set"));var r=c(e,".image-block-outer-wrapper");r&&r.classList.add("sqs-text-ready")});return true}e.exports=t.default},"./src/main/webapp/universal/src/shared/utils/performance.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.notifyUserTiming=i;function i(){"function"===typeof window.dispatchEvent&&"function"===typeof CustomEvent&&window.dispatchEvent(new CustomEvent("userTiming"))}},"./src/main/webapp/universal/src/shared/utils/polyfills/addLegacyPolyfills.js":function(e,t,a){"use strict";e.exports=function(i){i.Element.prototype.matches||(i.Element.prototype.matches=i.Element.prototype.matchesSelector||i.Element.prototype.mozMatchesSelector||i.Element.prototype.msMatchesSelector||i.Element.prototype.oMatchesSelector||i.Element.prototype.webkitMatchesSelector||function(e){var t=(this.document||this.ownerDocument).querySelectorAll(e);var a=t.length;while(--a>=0&&t.item(a)!==this);return a>-1});if("function"!==typeof i.CustomEvent){var e=function e(t,a){a=a||{bubbles:false,cancelable:false,detail:void 0};var i=document.createEvent("CustomEvent");i.initCustomEvent(t,a.bubbles,a.cancelable,a.detail);return i};e.prototype=i.Event.prototype;i.CustomEvent=e;"function"!==typeof i.Event&&(i.Event=e)}i.String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)};i.Array.prototype.removeRange=function(e,t){this.splice(e,!t||1+t-e+(!(t<0^e>=0)&&(t<0||-1)*this.length));return this.length};i.Array.prototype.removeAt=function(e){this.removeRange(e,e)};i.Array.prototype.remove=function(e){for(var t=0;t<this.length;++t)if(this[t]===e){this.removeAt(t);return}};i.Array.prototype.shuffle||(i.Array.prototype.shuffle=function(){var e=[];while(this.length)e.push(this.splice(Math.random()*this.length,1));while(e.length)this.push(e.pop()[0]);return this});var t="Array.prototype.contains is non standard. Use Array.prototype.includes instead";i.Array.prototype.contains=function(e){var t;false;return this.indexOf(e)>-1};i.Number.prototype.formatMoney=function(e,t,a,i){false;var s=this;e=isNaN(e=Math.abs(e))?2:e;i&&s%1===0&&(e=0);t=t||".";a=a||",";var n=s<0?"-":"";var r=parseInt(s=Math.abs(+s||0).toFixed(e),10)+"",o=(o=r.length)>3?o%3:0;return n+(o?r.substr(0,o)+a:"")+r.substr(o).replace(/(\d{3})(?=\d)/g,"$1"+a)+(e?t+Math.abs(s-r).toFixed(e).slice(2):"")};i.Date.prototype.toRelativeTime=function(e){e=e||new Date;var t=(e.getTime()-this.getTime())/1e3;return t<60?"less than a minute ago":t<120?"about a minute ago":t<3600?Math.floor(t/60)+" minutes ago":t<7200?"about an hour ago":t<86400?"about "+Math.floor(t/3600)+" hours ago":t<172800?"1 day ago":Math.floor(t/86400)+" days ago"};i.Date.prototype.stdTimezoneOffset=function(){var e=new Date(this.getFullYear(),0,1);var t=new Date(this.getFullYear(),6,1);return Math.max(e.getTimezoneOffset(),t.getTimezoneOffset())};i.Date.prototype.isDST=function(){return this.getTimezoneOffset()<this.stdTimezoneOffset()};i.Date.isLeapYear=function(e){return e%4===0&&e%100!==0||e%400===0};i.Date.getDaysInMonth=function(e,t){return[31,Date.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]};i.Date.prototype.isLeapYear=function(){return i.Date.isLeapYear(this.getFullYear())};i.Date.prototype.getDaysInMonth=function(){return i.Date.getDaysInMonth(this.getFullYear(),this.getMonth())};i.Date.prototype.moveToFirstDayOfMonth=function(){return this.set({day:1})};i.Date.prototype.moveToLastDayOfMonth=function(){return this.set({day:this.getDaysInMonth()})};i.Date.prototype.addDays=function(e){return this.addMilliseconds(864e5*e)};i.Date.prototype.addMilliseconds=function(e){this.setMilliseconds(this.getMilliseconds()+e);return this};i.Date.prototype.addSeconds=function(e){return this.addMilliseconds(1e3*e)};i.Date.prototype.addMinutes=function(e){return this.addMilliseconds(6e4*e)};i.Date.prototype.addHours=function(e){return this.addMilliseconds(36e5*e)};i.Date.prototype.addDays=function(e){return this.addMilliseconds(864e5*e)};i.Date.prototype.addWeeks=function(e){return this.addMilliseconds(6048e5*e)};i.Date.prototype.addMonths=function(e){var t=this.getDate();this.setDate(1);this.setMonth(this.getMonth()+e);this.setDate(Math.min(t,this.getDaysInMonth()));return this};i.Date.prototype.addYears=function(e){return this.addMonths(12*e)};i.Date._validate=function(e,t,a,i){return true};i.Date.validateMillisecond=function(e){return i.Date._validate(e,0,999,"milliseconds")};i.Date.validateSecond=function(e){return i.Date._validate(e,0,59,"seconds")};i.Date.validateMinute=function(e){return i.Date._validate(e,0,59,"minutes")};i.Date.validateHour=function(e){return i.Date._validate(e,0,23,"hours")};i.Date.validateDay=function(e,t,a){return i.Date._validate(e,1,i.Date.getDaysInMonth(t,a),"days")};i.Date.validateMonth=function(e){return i.Date._validate(e,0,11,"months")};i.Date.validateYear=function(e){return i.Date._validate(e,1,9999,"seconds")};i.Date.prototype.set=function(e){var t=e;t.millisecond||0===t.millisecond||(t.millisecond=-1);t.second||0===t.second||(t.second=-1);t.minute||0===t.minute||(t.minute=-1);t.hour||0===t.hour||(t.hour=-1);t.day||0===t.day||(t.day=-1);t.month||0===t.month||(t.month=-1);t.year||0===t.year||(t.year=-1);-1!==t.millisecond&&i.Date.validateMillisecond(t.millisecond)&&this.addMilliseconds(t.millisecond-this.getMilliseconds());-1!==t.second&&i.Date.validateSecond(t.second)&&this.addSeconds(t.second-this.getSeconds());-1!==t.minute&&i.Date.validateMinute(t.minute)&&this.addMinutes(t.minute-this.getMinutes());-1!==t.hour&&i.Date.validateHour(t.hour)&&this.addHours(t.hour-this.getHours());-1!==t.month&&i.Date.validateMonth(t.month)&&this.addMonths(t.month-this.getMonth());-1!==t.year&&i.Date.validateYear(t.year)&&this.addYears(t.year-this.getFullYear());-1!==t.day&&i.Date.validateDay(t.day,this.getFullYear(),this.getMonth())&&this.addDays(t.day-this.getDate());t.timezone&&this.setTimezone(t.timezone);t.timezoneOffset&&this.setTimezoneOffset(t.timezoneOffset);return this}}},"./src/main/webapp/universal/src/shared/utils/polyfills/classList.js":function(e,t,a){"use strict";"document"in self&&("classList"in document.createElement("_")?function(){var e=document.createElement("_");e.classList.add("c1","c2");if(!e.classList.contains("c2")){var t=function e(t){var i=DOMTokenList.prototype[t];DOMTokenList.prototype[t]=function(e){var t,a=arguments.length;for(t=0;t<a;t++){e=arguments[t];i.call(this,e)}}};t("add");t("remove")}e.classList.toggle("c3",false);if(e.classList.contains("c3")){var a=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return 1 in arguments&&!this.contains(e)===!t?t:a.call(this,e)}}e=null}():function(e){if(!("Element"in e))return;var t="classList",a="prototype",i=e.Element[a],s=Object,r=String[a].trim||function(){return this.replace(/^\s+|\s+$/g,"")},n=Array[a].indexOf||function(e){var t=0,a=this.length;for(;t<a;t++)if(t in this&&this[t]===e)return t;return-1},o=function e(t,a){this.name=t;this.code=DOMException[t];this.message=a},l=function e(t,a){if(""===a)throw new o("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(a))throw new o("INVALID_CHARACTER_ERR","String contains an invalid character");return n.call(t,a)},c=function e(t){var a=r.call(t.getAttribute("class")||""),i=a?a.split(/\s+/):[],s=0,n=i.length;for(;s<n;s++)this.push(i[s]);this._updateClassName=function(){t.setAttribute("class",this.toString())}},u=c[a]=[],d=function e(){return new c(this)};o[a]=Error[a];u.item=function(e){return this[e]||null};u.contains=function(e){e+="";return-1!==l(this,e)};u.add=function(){var e=arguments,t=0,a=e.length,i,s=false;do{i=e[t]+"";if(-1===l(this,i)){this.push(i);s=true}}while(++t<a);s&&this._updateClassName()};u.remove=function(){var e=arguments,t=0,a=e.length,i,s=false,n;do{i=e[t]+"";n=l(this,i);while(-1!==n){this.splice(n,1);s=true;n=l(this,i)}}while(++t<a);s&&this._updateClassName()};u.toggle=function(e,t){e+="";var a=this.contains(e),i=a?true!==t&&"remove":false!==t&&"add";i&&this[i](e);return true===t||false===t?t:!a};u.toString=function(){return this.join(" ")};if(s.defineProperty){var p={get:d,enumerable:true,configurable:true};try{s.defineProperty(i,t,p)}catch(e){if(-2146823252===e.number){p.enumerable=false;s.defineProperty(i,t,p)}}}else s[a].__defineGetter__&&i.__defineGetter__(t,d)}(self))},"./src/main/webapp/universal/src/shared/utils/polyfills/index.js":function(e,t,a){"use strict";a("./common/temp/node_modules/core-js/modules/es.symbol.js");a("./common/temp/node_modules/core-js/modules/es.symbol.description.js");a("./common/temp/node_modules/core-js/modules/es.symbol.async-iterator.js");a("./common/temp/node_modules/core-js/modules/es.symbol.has-instance.js");a("./common/temp/node_modules/core-js/modules/es.symbol.is-concat-spreadable.js");a("./common/temp/node_modules/core-js/modules/es.symbol.iterator.js");a("./common/temp/node_modules/core-js/modules/es.symbol.match.js");a("./common/temp/node_modules/core-js/modules/es.symbol.replace.js");a("./common/temp/node_modules/core-js/modules/es.symbol.search.js");a("./common/temp/node_modules/core-js/modules/es.symbol.species.js");a("./common/temp/node_modules/core-js/modules/es.symbol.split.js");a("./common/temp/node_modules/core-js/modules/es.symbol.to-primitive.js");a("./common/temp/node_modules/core-js/modules/es.symbol.to-string-tag.js");a("./common/temp/node_modules/core-js/modules/es.symbol.unscopables.js");a("./common/temp/node_modules/core-js/modules/es.array.concat.js");a("./common/temp/node_modules/core-js/modules/es.array.copy-within.js");a("./common/temp/node_modules/core-js/modules/es.array.every.js");a("./common/temp/node_modules/core-js/modules/es.array.fill.js");a("./common/temp/node_modules/core-js/modules/es.array.filter.js");a("./common/temp/node_modules/core-js/modules/es.array.find.js");a("./common/temp/node_modules/core-js/modules/es.array.find-index.js");a("./common/temp/node_modules/core-js/modules/es.array.flat.js");a("./common/temp/node_modules/core-js/modules/es.array.flat-map.js");a("./common/temp/node_modules/core-js/modules/es.array.for-each.js");a("./common/temp/node_modules/core-js/modules/es.array.from.js");a("./common/temp/node_modules/core-js/modules/es.array.includes.js");a("./common/temp/node_modules/core-js/modules/es.array.index-of.js");a("./common/temp/node_modules/core-js/modules/es.array.iterator.js");a("./common/temp/node_modules/core-js/modules/es.array.join.js");a("./common/temp/node_modules/core-js/modules/es.array.last-index-of.js");a("./common/temp/node_modules/core-js/modules/es.array.map.js");a("./common/temp/node_modules/core-js/modules/es.array.of.js");a("./common/temp/node_modules/core-js/modules/es.array.reduce.js");a("./common/temp/node_modules/core-js/modules/es.array.reduce-right.js");a("./common/temp/node_modules/core-js/modules/es.array.reverse.js");a("./common/temp/node_modules/core-js/modules/es.array.slice.js");a("./common/temp/node_modules/core-js/modules/es.array.some.js");a("./common/temp/node_modules/core-js/modules/es.array.sort.js");a("./common/temp/node_modules/core-js/modules/es.array.species.js");a("./common/temp/node_modules/core-js/modules/es.array.splice.js");a("./common/temp/node_modules/core-js/modules/es.array.unscopables.flat.js");a("./common/temp/node_modules/core-js/modules/es.array.unscopables.flat-map.js");a("./common/temp/node_modules/core-js/modules/es.json.to-string-tag.js");a("./common/temp/node_modules/core-js/modules/es.map.js");a("./common/temp/node_modules/core-js/modules/es.math.to-string-tag.js");a("./common/temp/node_modules/core-js/modules/es.object.assign.js");a("./common/temp/node_modules/core-js/modules/es.object.define-getter.js");a("./common/temp/node_modules/core-js/modules/es.object.define-setter.js");a("./common/temp/node_modules/core-js/modules/es.object.entries.js");a("./common/temp/node_modules/core-js/modules/es.object.freeze.js");a("./common/temp/node_modules/core-js/modules/es.object.from-entries.js");a("./common/temp/node_modules/core-js/modules/es.object.get-own-property-descriptor.js");a("./common/temp/node_modules/core-js/modules/es.object.get-own-property-descriptors.js");a("./common/temp/node_modules/core-js/modules/es.object.get-own-property-names.js");a("./common/temp/node_modules/core-js/modules/es.object.get-prototype-of.js");a("./common/temp/node_modules/core-js/modules/es.object.is.js");a("./common/temp/node_modules/core-js/modules/es.object.is-extensible.js");a("./common/temp/node_modules/core-js/modules/es.object.is-frozen.js");a("./common/temp/node_modules/core-js/modules/es.object.is-sealed.js");a("./common/temp/node_modules/core-js/modules/es.object.keys.js");a("./common/temp/node_modules/core-js/modules/es.object.lookup-getter.js");a("./common/temp/node_modules/core-js/modules/es.object.lookup-setter.js");a("./common/temp/node_modules/core-js/modules/es.object.prevent-extensions.js");a("./common/temp/node_modules/core-js/modules/es.object.seal.js");a("./common/temp/node_modules/core-js/modules/es.object.to-string.js");a("./common/temp/node_modules/core-js/modules/es.object.values.js");a("./common/temp/node_modules/core-js/modules/es.promise.js");a("./common/temp/node_modules/core-js/modules/es.promise.finally.js");a("./common/temp/node_modules/core-js/modules/es.regexp.exec.js");a("./common/temp/node_modules/core-js/modules/es.set.js");a("./common/temp/node_modules/core-js/modules/es.string.code-point-at.js");a("./common/temp/node_modules/core-js/modules/es.string.ends-with.js");a("./common/temp/node_modules/core-js/modules/es.string.from-code-point.js");a("./common/temp/node_modules/core-js/modules/es.string.includes.js");a("./common/temp/node_modules/core-js/modules/es.string.iterator.js");a("./common/temp/node_modules/core-js/modules/es.string.match.js");a("./common/temp/node_modules/core-js/modules/es.string.pad-end.js");a("./common/temp/node_modules/core-js/modules/es.string.pad-start.js");a("./common/temp/node_modules/core-js/modules/es.string.raw.js");a("./common/temp/node_modules/core-js/modules/es.string.repeat.js");a("./common/temp/node_modules/core-js/modules/es.string.replace.js");a("./common/temp/node_modules/core-js/modules/es.string.search.js");a("./common/temp/node_modules/core-js/modules/es.string.split.js");a("./common/temp/node_modules/core-js/modules/es.string.starts-with.js");a("./common/temp/node_modules/core-js/modules/es.string.trim.js");a("./common/temp/node_modules/core-js/modules/es.string.trim-end.js");a("./common/temp/node_modules/core-js/modules/es.string.trim-start.js");a("./common/temp/node_modules/core-js/modules/es.string.anchor.js");a("./common/temp/node_modules/core-js/modules/es.string.big.js");a("./common/temp/node_modules/core-js/modules/es.string.blink.js");a("./common/temp/node_modules/core-js/modules/es.string.bold.js");a("./common/temp/node_modules/core-js/modules/es.string.fixed.js");a("./common/temp/node_modules/core-js/modules/es.string.fontcolor.js");a("./common/temp/node_modules/core-js/modules/es.string.fontsize.js");a("./common/temp/node_modules/core-js/modules/es.string.italics.js");a("./common/temp/node_modules/core-js/modules/es.string.link.js");a("./common/temp/node_modules/core-js/modules/es.string.small.js");a("./common/temp/node_modules/core-js/modules/es.string.strike.js");a("./common/temp/node_modules/core-js/modules/es.string.sub.js");a("./common/temp/node_modules/core-js/modules/es.string.sup.js");a("./common/temp/node_modules/core-js/modules/web.dom-collections.for-each.js");a("./common/temp/node_modules/core-js/modules/web.dom-collections.iterator.js");a("./common/temp/node_modules/core-js/modules/web.url-search-params.js");a("./src/main/webapp/universal/src/shared/utils/polyfills/classList.js");a("./common/temp/node_modules/@sqs/request-idle-callback/index.js");Element.prototype.remove||(Element.prototype.remove=function(){null!==this.parentNode&&this.parentNode.removeChild(this)});Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null})},"./src/main/webapp/universal/src/shared/utils/ready.ts":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i=new Promise(function(t){var e=document,a=e.readyState;if("complete"===a||"interactive"===a){t();return}var i=function e(){document.removeEventListener("DOMContentLoaded",e,false);t()};document.addEventListener("DOMContentLoaded",i,false)});var s=i;t.default=s;e.exports=t.default},"./src/main/webapp/universal/src/shared/utils/rendering.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.getWidthForHeight=s;t.getHeightForWidth=n;t.getDimensionsFromNode=o;t.getSquarespaceSizeForWidth=l;t.getIconUrl=c;var r=i(a("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));function s(e,t,a){return e/t*a}function n(e,t,a){return t/e*a}function o(e){var t=e.getAttribute("data-image-dimensions");if("string"===typeof t){var a=t.split("x").map(function(e){return Number(e)}),i=(0,r.default)(a,2),s=i[0],n=i[1];return{width:s,height:n}}return{width:null,height:null}}function l(e){window.devicePixelRatio&&(e*=window.devicePixelRatio);if(e>1500)return"2500w";if(e>1e3)return"1500w";if(e>750)return"1000w";if(e>500)return"750w";if(e>300)return"500w";if(e>100)return"300w";return"100w"}function c(e,t,a){return"/universal/images-v6/icons/icon-".concat(e,"-").concat(t,"-").concat(a,".png")}},"./src/main/webapp/universal/src/shared/utils/selfThrottle.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var s=i(a("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var n=i(a("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var o=false;var r=22;var l=2;var c=function(){function t(e){(0,s.default)(this,t);this.workFn=e;this.pending=false;this.samples=[];this.lastCompleteExecution=null;this.sampledAverageExecution=null;this.pendingDowntime=null}(0,n.default)(t,[{key:"invoke",value:function e(){var t=this;var a=this.lastCompleteExecution,i=this.sampledAverageExecution;if(this.pending){o&&console.log("pending!");return}if(null!==a&&null!==i){var s=Date.now()-a;var n=i*l;if(s<n){var r=n-s;if(this.pendingDowntime){o&&console.log("no downtime, and timer is set just going to wait");return}o&&console.log("no downtime, not allowing. need to wait another ",r);this.pendingDowntime=setTimeout(function(){t.invoke();t.pendingDowntime=null},r);return}}this.doWork()}},{key:"doWork",value:function e(){var t=Date.now();this.pending=true;try{this.workFn()}catch(e){console.error(e)}this.lastCompleteExecution=Date.now();var a=this.lastCompleteExecution-t;this.pending=false;var i=this.samples;i.unshift(a);i.length>r&&(this.samples=i=i.slice(0,r));this.sampledAverageExecution=i.reduce(function(e,t){return e+t},0)/i.length;o&&console.log("executionTime",a,"sampledAverageExecution",this.sampledAverageExecution)}}]);return t}();function u(e){var t=new c(e);return function(){return t.invoke()}}e.exports=u},"./src/main/webapp/universal/src/shared/utils/showPageViolations.js":function(e,t,a){"use strict";var i=a("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:true});t.default=o;var s=i(a("./src/main/webapp/universal/src/apps/App/shared/constants/UpsellDestination.js"));var n=a("./src/main/webapp/universal/src/shared/utils/BlockFeatureGatingUtils.js");var r=a("./src/main/webapp/universal/src/shared/i18n/index.ts");function o(){(0,n.showUpsellConfirmation)({upgradeTitle:(0,r.t)("Page Limit Reached"),upgradeDescription:(0,r.t)("This page can't be enabled because you've exceeded the number of pages allowed in your plan (20). Upgrade to the Business plan for unlimited pages."),destination:s.default.UPGRADE_PLAN})}e.exports=t.default},"./src/main/webapp/universal/src/shared/utils/validation/schedulingUrlValidator.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=i;function i(e){if(""===e)return true;var t=["squarespacescheduling.com","acuityscheduling.com","as.me"];var a=/(https?:\/\/)?([a-zA-Z0-9_\-]+\.)*([a-zA-Z0-9][a-zA-Z0-9_\-\.]*\.[a-zA-Z]{2,24})(\/\S*)?/g;var i=a.exec(e);var s=i?i[3]:null;return t.includes(s)}e.exports=t.default},"./src/main/webapp/universal/src/shared/utils/waitForExistence.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.parent,r=e.selector,t=e.minLength,o=void 0===t?1:t,a=e.frequencyMs,l=void 0===a?100:a,i=e.maxRetries,c=void 0===i?0:i;if(!n||!r)return Promise.reject("[waitForExistence] Called without a parent or selector");return new Promise(function(a,i){var s=0;c>99999999&&(c=0);var e=function e(){if(!n){i("[waitForExistence] parent does not or no longer exists");return}var t=Array.from(n.querySelectorAll(r));if(t.length>=o){a(t);return}if(0!==c){s+=1;if(s>c){i("[waitForExistence] Did not find ".concat(r," in ").concat(l*s,"ms"));return}}window.setTimeout(e,l)};e()})}var s=i;t.default=s;e.exports=t.default},"./src/main/webapp/universal/styles-compressed/management.css":function(e,t,a){}}]);
//# sourceMappingURL=https://sourcemaps.squarespace.net/universal/scripts-compressed/41-84fa3405f2286164cdc75-min.en-US.js.map